(self.webpackChunkclipz=self.webpackChunkclipz||[]).push([[179],{6217:(Qt,it,K)=>{"use strict";K.d(it,{nm:()=>Ni});var E=K(2122);K(4650),K(259);var Fe=K(5861),Me=K(9681),Et=K(4859),Mt=K(2090),St=K(1877);const J=new Map,he={activated:!1,tokenObservers:[]},Ne={initialized:!1,enabled:!1};function mt(pt){return J.get(pt)||Object.assign({},he)}function xt(){return Ne}const Xe="https://content-firebaseappcheck.googleapis.com/v1",ot="exchangeDebugToken",lt={OFFSET_DURATION:3e5,RETRIAL_MIN_WAIT:3e4,RETRIAL_MAX_WAIT:96e4};class Nt{constructor(ft,Ct,sn,Sn,Jn){if(this.operation=ft,this.retryPolicy=Ct,this.getWaitDuration=sn,this.lowerBound=Sn,this.upperBound=Jn,this.pending=null,this.nextErrorWaitInterval=Sn,Sn>Jn)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(ft){var Ct=this;return(0,Fe.Z)(function*(){Ct.stop();try{Ct.pending=new Mt.BH,yield function jt(pt){return new Promise(ft=>{setTimeout(ft,pt)})}(Ct.getNextRun(ft)),Ct.pending.resolve(),yield Ct.pending.promise,Ct.pending=new Mt.BH,yield Ct.operation(),Ct.pending.resolve(),yield Ct.pending.promise,Ct.process(!0).catch(()=>{})}catch(sn){Ct.retryPolicy(sn)?Ct.process(!1).catch(()=>{}):Ct.stop()}})()}getNextRun(ft){if(ft)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const Ct=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),Ct}}}const Ot=new Mt.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function Hn(pt,ft){return Zn.apply(this,arguments)}function Zn(){return(Zn=(0,Fe.Z)(function*({url:pt,body:ft},Ct){const sn={"Content-Type":"application/json"},Sn=Ct.getImmediate({optional:!0});if(Sn){const os=yield Sn.getHeartbeatsHeader();os&&(sn["X-Firebase-Client"]=os)}const Jn={method:"POST",body:JSON.stringify(ft),headers:sn};let Tr,$r;try{Tr=yield fetch(pt,Jn)}catch(os){throw Ot.create("fetch-network-error",{originalErrorMessage:os?.message})}if(200!==Tr.status)throw Ot.create("fetch-status-error",{httpStatus:Tr.status});try{$r=yield Tr.json()}catch(os){throw Ot.create("fetch-parse-error",{originalErrorMessage:os?.message})}const mi=$r.ttl.match(/^([\d.]+)(s)$/);if(!mi||!mi[2]||isNaN(Number(mi[1])))throw Ot.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${$r.ttl}`});const Xi=1e3*Number(mi[1]),ss=Date.now();return{token:$r.token,expireTimeMillis:ss+Xi,issuedAtTimeMillis:ss}})).apply(this,arguments)}const kr="firebase-app-check-database",ii=1,fr="firebase-app-check-store";let Ar=null;function Ri(pt,ft){return er.apply(this,arguments)}function er(){return(er=(0,Fe.Z)(function*(pt,ft){const sn=(yield function Tn(){return Ar||(Ar=new Promise((pt,ft)=>{try{const Ct=indexedDB.open(kr,ii);Ct.onsuccess=sn=>{pt(sn.target.result)},Ct.onerror=sn=>{var Sn;ft(Ot.create("storage-open",{originalErrorMessage:null===(Sn=sn.target.error)||void 0===Sn?void 0:Sn.message}))},Ct.onupgradeneeded=sn=>{0===sn.oldVersion&&sn.target.result.createObjectStore(fr,{keyPath:"compositeKey"})}}catch(Ct){ft(Ot.create("storage-open",{originalErrorMessage:Ct?.message}))}}),Ar)}()).transaction(fr,"readwrite"),Jn=sn.objectStore(fr).put({compositeKey:pt,value:ft});return new Promise((Tr,$r)=>{Jn.onsuccess=mi=>{Tr()},sn.onerror=mi=>{var Xi;$r(Ot.create("storage-set",{originalErrorMessage:null===(Xi=mi.target.error)||void 0===Xi?void 0:Xi.message}))}})})).apply(this,arguments)}const Lr=new St.Yd("@firebase/app-check");function Vi(pt,ft){return(0,Mt.hl)()?function Hr(pt,ft){return Ri(function Us(pt){return`${pt.options.appId}-${pt.name}`}(pt),ft)}(pt,ft).catch(Ct=>{Lr.warn(`Failed to write token to IndexedDB. Error: ${Ct}`)}):Promise.resolve()}function Ir(){return di.apply(this,arguments)}function di(){return(di=(0,Fe.Z)(function*(){const pt=xt();if(pt.enabled&&pt.token)return pt.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")})).apply(this,arguments)}const mn={error:"UNKNOWN_ERROR"};function Xt(pt){return Mt.US.encodeString(JSON.stringify(pt),!1)}function yn(pt){return tr.apply(this,arguments)}function tr(){return(tr=(0,Fe.Z)(function*(pt,ft=!1){const Ct=pt.app;!function zt(pt){if(!mt(pt).activated)throw Ot.create("use-before-activation",{appName:pt.name})}(Ct);const sn=mt(Ct);let Jn,Sn=sn.token;if(Sn&&!ht(Sn)&&(sn.token=void 0,Sn=void 0),!Sn){const mi=yield sn.cachedTokenPromise;mi&&(ht(mi)?Sn=mi:yield Vi(Ct,void 0))}if(!ft&&Sn&&ht(Sn))return{token:Sn.token};let $r,Tr=!1;if(function Rr(){return xt().enabled}()){sn.exchangeTokenPromise||(sn.exchangeTokenPromise=Hn(function qn(pt,ft){const{projectId:Ct,appId:sn,apiKey:Sn}=pt.options;return{url:`${Xe}/projects/${Ct}/apps/${sn}:${ot}?key=${Sn}`,body:{debug_token:ft}}}(Ct,yield Ir()),pt.heartbeatServiceProvider).finally(()=>{sn.exchangeTokenPromise=void 0}),Tr=!0);const mi=yield sn.exchangeTokenPromise;return yield Vi(Ct,mi),sn.token=mi,{token:mi.token}}try{sn.exchangeTokenPromise||(sn.exchangeTokenPromise=sn.provider.getToken().finally(()=>{sn.exchangeTokenPromise=void 0}),Tr=!0),Sn=yield mt(Ct).exchangeTokenPromise}catch(mi){"appCheck/throttled"===mi.code?Lr.warn(mi.message):Lr.error(mi),Jn=mi}return Sn?Jn?$r=ht(Sn)?{token:Sn.token,internalError:Jn}:$t(Jn):($r={token:Sn.token},sn.token=Sn,yield Vi(Ct,Sn)):$r=$t(Jn),Tr&&function Ze(pt,ft){const Ct=mt(pt).tokenObservers;for(const sn of Ct)try{"EXTERNAL"===sn.type&&null!=ft.error?sn.error(ft.error):sn.next(ft)}catch{}}(Ct,$r),$r})).apply(this,arguments)}function vr(pt,ft){const Ct=mt(pt),sn=Ct.tokenObservers.filter(Sn=>Sn.next!==ft);0===sn.length&&Ct.tokenRefresher&&Ct.tokenRefresher.isRunning()&&Ct.tokenRefresher.stop(),Ct.tokenObservers=sn}function Jr(pt){const{app:ft}=pt,Ct=mt(ft);let sn=Ct.tokenRefresher;sn||(sn=function tt(pt){const{app:ft}=pt;return new Nt((0,Fe.Z)(function*(){let sn;if(sn=mt(ft).token?yield yn(pt,!0):yield yn(pt),sn.error)throw sn.error;if(sn.internalError)throw sn.internalError}),()=>!0,()=>{const Ct=mt(ft);if(Ct.token){let sn=Ct.token.issuedAtTimeMillis+.5*(Ct.token.expireTimeMillis-Ct.token.issuedAtTimeMillis)+3e5;return sn=Math.min(sn,Ct.token.expireTimeMillis-3e5),Math.max(0,sn-Date.now())}return 0},lt.RETRIAL_MIN_WAIT,lt.RETRIAL_MAX_WAIT)}(pt),Ct.tokenRefresher=sn),!sn.isRunning()&&Ct.isTokenAutoRefreshEnabled&&sn.start()}function ht(pt){return pt.expireTimeMillis-Date.now()>0}function $t(pt){return{token:Xt(mn),error:pt}}class Rt{constructor(ft,Ct){this.app=ft,this.heartbeatServiceProvider=Ct}_delete(){const{tokenObservers:ft}=mt(this.app);for(const Ct of ft)vr(this.app,Ct.next);return Promise.resolve()}}const Sr="app-check-internal";!function Ei(){(0,Me._registerComponent)(new Et.wA("app-check",pt=>function fn(pt,ft){return new Rt(pt,ft)}(pt.getProvider("app").getImmediate(),pt.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((pt,ft,Ct)=>{pt.getProvider(Sr).initialize()})),(0,Me._registerComponent)(new Et.wA(Sr,pt=>function Xn(pt){return{getToken:ft=>yn(pt,ft),addTokenListener:ft=>function nr(pt,ft,Ct,sn){const{app:Sn}=pt,Jn=mt(Sn);if(Jn.tokenObservers=[...Jn.tokenObservers,{next:Ct,error:sn,type:ft}],Jn.token&&ht(Jn.token)){const $r=Jn.token;Promise.resolve().then(()=>{Ct({token:$r.token}),Jr(pt)}).catch(()=>{})}Jn.cachedTokenPromise.then(()=>Jr(pt))}(pt,"INTERNAL",ft),removeTokenListener:ft=>vr(pt.app,ft)}}(pt.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,Me.registerVersion)("@firebase/app-check","0.6.4")}();class Ni{constructor(){return(0,E.vb)("app-check")}}typeof window<"u"&&window},1205:(Qt,it,K)=>{"use strict";K.d(it,{zQ:()=>Xe,ww:()=>ut,rT:()=>Ne,f7:()=>st,L6:()=>J,_Q:()=>he,lh:()=>mt,Qv:()=>St,nw:()=>xt});var E=K(4650),M=K(7579),re=K(9646),Oe=K(9751),De=K(8996),ke=K(6451),Ge=K(5363),He=K(3900),Ke=K(4004),Ie=K(6063);class Pe extends M.x{constructor(ot=1/0,lt=1/0,gt=Ie.l){super(),this._bufferSize=ot,this._windowTime=lt,this._timestampProvider=gt,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=lt===1/0,this._bufferSize=Math.max(1,ot),this._windowTime=Math.max(1,lt)}next(ot){const{isStopped:lt,_buffer:gt,_infiniteTimeWindow:Nt,_timestampProvider:jt,_windowTime:_n}=this;lt||(gt.push(ot),!Nt&&gt.push(jt.now()+_n)),this._trimBuffer(),super.next(ot)}_subscribe(ot){this._throwIfClosed(),this._trimBuffer();const lt=this._innerSubscribe(ot),{_infiniteTimeWindow:gt,_buffer:Nt}=this,jt=Nt.slice();for(let _n=0;_n<jt.length&&!ot.closed;_n+=gt?1:2)ot.next(jt[_n]);return this._checkFinalizedStatuses(ot),lt}_trimBuffer(){const{_bufferSize:ot,_timestampProvider:lt,_buffer:gt,_infiniteTimeWindow:Nt}=this,jt=(Nt?1:2)*ot;if(ot<1/0&&jt<gt.length&&gt.splice(0,gt.length-jt),!Nt){const _n=lt.now();let Ot=0;for(let rn=1;rn<gt.length&&gt[rn]<=_n;rn+=2)Ot=rn;Ot&&gt.splice(0,Ot+1)}}}var Re=K(3099);function yt(Je,ot,lt){let gt,Nt=!1;return Je&&"object"==typeof Je?({bufferSize:gt=1/0,windowTime:ot=1/0,refCount:Nt=!1,scheduler:lt}=Je):gt=Je??1/0,(0,Re.B)({connector:()=>new Pe(gt,ot,lt),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:Nt})}var ae=K(590),Pt=K(576);function et(Je,ot){return(0,Pt.m)(ot)?(0,He.w)(()=>Je,ot):(0,He.w)(()=>Je)}var at=K(9468),nt=K(9300),We=K(2122),dt=K(2011),Fe=K(6895),Me=K(6217),Et=K(9260);const St=new E.OlP("angularfire2.auth.use-emulator"),J=new E.OlP("angularfire2.auth.settings"),he=new E.OlP("angularfire2.auth.tenant-id"),Ne=new E.OlP("angularfire2.auth.langugage-code"),mt=new E.OlP("angularfire2.auth.use-device-language"),st=new E.OlP("angularfire.auth.persistence"),xt=(Je,ot,lt,gt,Nt,jt,_n,Ot)=>(0,dt.cc)(`${Je.name}.auth`,"AngularFireAuth",Je.name,()=>{const rn=ot.runOutsideAngular(()=>Je.auth());if(lt&&rn.useEmulator(...lt),gt&&(rn.tenantId=gt),rn.languageCode=Nt,jt&&rn.useDeviceLanguage(),_n)for(const[zt,bn]of Object.entries(_n))rn.settings[zt]=bn;return Ot&&rn.setPersistence(Ot),rn},[lt,gt,Nt,jt,_n,Ot]);let Xe=(()=>{class Je{constructor(lt,gt,Nt,jt,_n,Ot,rn,zt,bn,dr,Hn,Zn){const Vr=new M.x,mr=(0,re.of)(void 0).pipe((0,Ge.Q)(_n.outsideAngular),(0,He.w)(()=>jt.runOutsideAngular(()=>Promise.resolve().then(K.bind(K,4217)))),(0,Ke.U)(()=>(0,dt.on)(lt,jt,gt)),(0,Ke.U)(qn=>xt(qn,jt,Ot,zt,bn,dr,rn,Hn)),yt({bufferSize:1,refCount:!1}));if((0,Fe.PM)(Nt))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=(0,re.of)(null);else{mr.pipe((0,ae.P)()).subscribe();const kr=mr.pipe((0,He.w)(Bn=>Bn.getRedirectResult().then(Ar=>Ar,()=>null)),We.iC,yt({bufferSize:1,refCount:!1})),ii=mr.pipe((0,He.w)(Bn=>new Oe.y(Ar=>({unsubscribe:jt.runOutsideAngular(()=>Bn.onAuthStateChanged(Tn=>Ar.next(Tn),Tn=>Ar.error(Tn),()=>Ar.complete()))})))),fr=mr.pipe((0,He.w)(Bn=>new Oe.y(Ar=>({unsubscribe:jt.runOutsideAngular(()=>Bn.onIdTokenChanged(Tn=>Ar.next(Tn),Tn=>Ar.error(Tn),()=>Ar.complete()))}))));this.authState=kr.pipe(et(ii),(0,at.R)(_n.outsideAngular),(0,Ge.Q)(_n.insideAngular)),this.user=kr.pipe(et(fr),(0,at.R)(_n.outsideAngular),(0,Ge.Q)(_n.insideAngular)),this.idToken=this.user.pipe((0,He.w)(Bn=>Bn?(0,De.D)(Bn.getIdToken()):(0,re.of)(null))),this.idTokenResult=this.user.pipe((0,He.w)(Bn=>Bn?(0,De.D)(Bn.getIdTokenResult()):(0,re.of)(null))),this.credential=(0,ke.T)(kr,Vr,this.authState.pipe((0,nt.h)(Bn=>!Bn))).pipe((0,Ke.U)(Bn=>Bn?.user?Bn:null),(0,at.R)(_n.outsideAngular),(0,Ge.Q)(_n.insideAngular))}return(0,dt.pX)(this,mr,jt,{spy:{apply:(qn,kr,ii)=>{(qn.startsWith("signIn")||qn.startsWith("createUser"))&&ii.then(fr=>Vr.next(fr))}}})}}return Je.\u0275fac=function(lt){return new(lt||Je)(E.LFG(dt.Dh),E.LFG(dt.xv,8),E.LFG(E.Lbi),E.LFG(E.R0b),E.LFG(We.HU),E.LFG(St,8),E.LFG(J,8),E.LFG(he,8),E.LFG(Ne,8),E.LFG(mt,8),E.LFG(st,8),E.LFG(Me.nm,8))},Je.\u0275prov=E.Yz7({token:Je,factory:Je.\u0275fac,providedIn:"any"}),Je})(),ut=(()=>{class Je{constructor(){Et.Z.registerVersion("angularfire",We.q4.full,"auth-compat")}}return Je.\u0275fac=function(lt){return new(lt||Je)},Je.\u0275mod=E.oAB({type:Je}),Je.\u0275inj=E.cJS({providers:[Xe]}),Je})()},2095:(Qt,it,K)=>{"use strict";K.d(it,{ST:()=>a0});var E=K(4650),M=K(4986),re=K(9751),Oe=K(8996),De=K(9646),ke=K(2122),Ge=K(8675),He=K(4482),Ke=K(5403);function Ie(){return(0,He.e)((a,e)=>{let n,c=!1;a.subscribe((0,Ke.x)(e,p=>{const _=n;n=p,c&&e.next([_,p]),c=!0}))})}var Pe=K(4004),Re=K(5026),yt=K(4671);function Pt(a,e){return a===e}var Ne,et=K(9300),at=K(2011),nt=K(6895),dt=(K(4217),K(3942)),Fe=K(5861),Me=K(9681),Et=K(4859),Mt=K(1877),St=K(2090),J=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},he={},mt=mt||{},st=J||self;function xt(){}function Xe(a){var e=typeof a;return"array"==(e="object"!=e?e:a?Array.isArray(a)?"array":e:"null")||"object"==e&&"number"==typeof a.length}function ut(a){var e=typeof a;return"object"==e&&null!=a||"function"==e}var ot="closure_uid_"+(1e9*Math.random()>>>0),lt=0;function gt(a,e,n){return a.call.apply(a.bind,arguments)}function Nt(a,e,n){if(!a)throw Error();if(2<arguments.length){var c=Array.prototype.slice.call(arguments,2);return function(){var p=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(p,c),a.apply(e,p)}}return function(){return a.apply(e,arguments)}}function jt(a,e,n){return(jt=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?gt:Nt).apply(null,arguments)}function _n(a,e){var n=Array.prototype.slice.call(arguments,1);return function(){var c=n.slice();return c.push.apply(c,arguments),a.apply(this,c)}}function Ot(a,e){function n(){}n.prototype=e.prototype,a.X=e.prototype,a.prototype=new n,a.prototype.constructor=a,a.Wb=function(c,p,_){for(var w=Array(arguments.length-2),N=2;N<arguments.length;N++)w[N-2]=arguments[N];return e.prototype[p].apply(c,w)}}function rn(){this.s=this.s,this.o=this.o}rn.prototype.s=!1,rn.prototype.na=function(){!this.s&&(this.s=!0,this.M(),0)&&function Je(a){Object.prototype.hasOwnProperty.call(a,ot)&&a[ot]||(a[ot]=++lt)}(this)},rn.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const bn=Array.prototype.indexOf?function(a,e){return Array.prototype.indexOf.call(a,e,void 0)}:function(a,e){if("string"==typeof a)return"string"!=typeof e||1!=e.length?-1:a.indexOf(e,0);for(let n=0;n<a.length;n++)if(n in a&&a[n]===e)return n;return-1};function dr(a){const e=a.length;if(0<e){const n=Array(e);for(let c=0;c<e;c++)n[c]=a[c];return n}return[]}function Hn(a,e){for(let n=1;n<arguments.length;n++){const c=arguments[n];if(Xe(c)){const p=a.length||0,_=c.length||0;a.length=p+_;for(let w=0;w<_;w++)a[p+w]=c[w]}else a.push(c)}}function Zn(a,e){this.type=a,this.g=this.target=e,this.defaultPrevented=!1}Zn.prototype.h=function(){this.defaultPrevented=!0};var Vr=function(){if(!st.addEventListener||!Object.defineProperty)return!1;var a=!1,e=Object.defineProperty({},"passive",{get:function(){a=!0}});try{st.addEventListener("test",xt,e),st.removeEventListener("test",xt,e)}catch{}return a}();function mr(a){return/^[\s\xa0]*$/.test(a)}var qn=String.prototype.trim?function(a){return a.trim()}:function(a){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(a)[1]};function kr(a,e){return a<e?-1:a>e?1:0}function ii(){var a=st.navigator;return a&&(a=a.userAgent)?a:""}function fr(a){return-1!=ii().indexOf(a)}function Bn(a){return Bn[" "](a),a}Bn[" "]=xt;var Wn,a,Tn=fr("Opera"),ci=fr("Trident")||fr("MSIE"),Hr=fr("Edge"),pr=Hr||ci,gi=fr("Gecko")&&!(-1!=ii().toLowerCase().indexOf("webkit")&&!fr("Edge"))&&!(fr("Trident")||fr("MSIE"))&&!fr("Edge"),Ri=-1!=ii().toLowerCase().indexOf("webkit")&&!fr("Edge");function er(){var a=st.document;return a?a.documentMode:void 0}e:{var or="",Us=(a=ii(),gi?/rv:([^\);]+)(\)|;)/.exec(a):Hr?/Edge\/([\d\.]+)/.exec(a):ci?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(a):Ri?/WebKit\/(\S+)/.exec(a):Tn?/(?:Version)[ \/]?(\S+)/.exec(a):void 0);if(Us&&(or=Us?Us[1]:""),ci){var Lr=er();if(null!=Lr&&Lr>parseFloat(or)){Wn=String(Lr);break e}}Wn=or}var Qn={};var Fr=st.document&&ci&&(er()||parseInt(Wn,10))||void 0;function Rr(a,e){if(Zn.call(this,a?a.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,a){var n=this.type=a.type,c=a.changedTouches&&a.changedTouches.length?a.changedTouches[0]:null;if(this.target=a.target||a.srcElement,this.g=e,e=a.relatedTarget){if(gi){e:{try{Bn(e.nodeName);var p=!0;break e}catch{}p=!1}p||(e=null)}}else"mouseover"==n?e=a.fromElement:"mouseout"==n&&(e=a.toElement);this.relatedTarget=e,c?(this.clientX=void 0!==c.clientX?c.clientX:c.pageX,this.clientY=void 0!==c.clientY?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0):(this.clientX=void 0!==a.clientX?a.clientX:a.pageX,this.clientY=void 0!==a.clientY?a.clientY:a.pageY,this.screenX=a.screenX||0,this.screenY=a.screenY||0),this.button=a.button,this.key=a.key||"",this.ctrlKey=a.ctrlKey,this.altKey=a.altKey,this.shiftKey=a.shiftKey,this.metaKey=a.metaKey,this.pointerId=a.pointerId||0,this.pointerType="string"==typeof a.pointerType?a.pointerType:Ir[a.pointerType]||"",this.state=a.state,this.i=a,a.defaultPrevented&&Rr.X.h.call(this)}}Ot(Rr,Zn);var Ir={2:"touch",3:"pen",4:"mouse"};Rr.prototype.h=function(){Rr.X.h.call(this);var a=this.i;a.preventDefault?a.preventDefault():a.returnValue=!1};var di="closure_listenable_"+(1e6*Math.random()|0),kn=0;function mn(a,e,n,c,p){this.listener=a,this.proxy=null,this.src=e,this.type=n,this.capture=!!c,this.ha=p,this.key=++kn,this.ba=this.ea=!1}function Xt(a){a.ba=!0,a.listener=null,a.proxy=null,a.src=null,a.ha=null}function yn(a,e,n){for(const c in a)e.call(n,a[c],c,a)}function tr(a){const e={};for(const n in a)e[n]=a[n];return e}const nr="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function vr(a,e){let n,c;for(let p=1;p<arguments.length;p++){for(n in c=arguments[p],c)a[n]=c[n];for(let _=0;_<nr.length;_++)n=nr[_],Object.prototype.hasOwnProperty.call(c,n)&&(a[n]=c[n])}}function Jr(a){this.src=a,this.g={},this.h=0}function tt(a,e){var n=e.type;if(n in a.g){var _,c=a.g[n],p=bn(c,e);(_=0<=p)&&Array.prototype.splice.call(c,p,1),_&&(Xt(e),0==a.g[n].length&&(delete a.g[n],a.h--))}}function Ze(a,e,n,c){for(var p=0;p<a.length;++p){var _=a[p];if(!_.ba&&_.listener==e&&_.capture==!!n&&_.ha==c)return p}return-1}Jr.prototype.add=function(a,e,n,c,p){var _=a.toString();(a=this.g[_])||(a=this.g[_]=[],this.h++);var w=Ze(a,e,c,p);return-1<w?(e=a[w],n||(e.ea=!1)):((e=new mn(e,this.src,_,!!c,p)).ea=n,a.push(e)),e};var ht="closure_lm_"+(1e6*Math.random()|0),$t={};function Rt(a,e,n,c,p){if(c&&c.once)return oi(a,e,n,c,p);if(Array.isArray(e)){for(var _=0;_<e.length;_++)Rt(a,e[_],n,c,p);return null}return n=Ht(n),a&&a[di]?a.N(e,n,ut(c)?!!c.capture:!!c,p):fn(a,e,n,!1,c,p)}function fn(a,e,n,c,p,_){if(!e)throw Error("Invalid event type");var w=ut(p)?!!p.capture:!!p,N=ge(a);if(N||(a[ht]=N=new Jr(a)),(n=N.add(e,n,c,w,_)).proxy)return n;if(c=function Xn(){const e=Te;return function a(n){return e.call(a.src,a.listener,n)}}(),n.proxy=c,c.src=a,c.listener=n,a.addEventListener)Vr||(p=w),void 0===p&&(p=!1),a.addEventListener(e.toString(),c,p);else if(a.attachEvent)a.attachEvent(fe(e.toString()),c);else{if(!a.addListener||!a.removeListener)throw Error("addEventListener and attachEvent are unavailable.");a.addListener(c)}return n}function oi(a,e,n,c,p){if(Array.isArray(e)){for(var _=0;_<e.length;_++)oi(a,e[_],n,c,p);return null}return n=Ht(n),a&&a[di]?a.O(e,n,ut(c)?!!c.capture:!!c,p):fn(a,e,n,!0,c,p)}function de(a,e,n,c,p){if(Array.isArray(e))for(var _=0;_<e.length;_++)de(a,e[_],n,c,p);else c=ut(c)?!!c.capture:!!c,n=Ht(n),a&&a[di]?(a=a.i,(e=String(e).toString())in a.g&&-1<(n=Ze(_=a.g[e],n,c,p))&&(Xt(_[n]),Array.prototype.splice.call(_,n,1),0==_.length&&(delete a.g[e],a.h--))):a&&(a=ge(a))&&(e=a.g[e.toString()],a=-1,e&&(a=Ze(e,n,c,p)),(n=-1<a?e[a]:null)&&we(n))}function we(a){if("number"!=typeof a&&a&&!a.ba){var e=a.src;if(e&&e[di])tt(e.i,a);else{var n=a.type,c=a.proxy;e.removeEventListener?e.removeEventListener(n,c,a.capture):e.detachEvent?e.detachEvent(fe(n),c):e.addListener&&e.removeListener&&e.removeListener(c),(n=ge(e))?(tt(n,a),0==n.h&&(n.src=null,e[ht]=null)):Xt(a)}}}function fe(a){return a in $t?$t[a]:$t[a]="on"+a}function Te(a,e){if(a.ba)a=!0;else{e=new Rr(e,this);var n=a.listener,c=a.ha||a.src;a.ea&&we(a),a=n.call(c,e)}return a}function ge(a){return(a=a[ht])instanceof Jr?a:null}var Ye="__closure_events_fn_"+(1e9*Math.random()>>>0);function Ht(a){return"function"==typeof a?a:(a[Ye]||(a[Ye]=function(e){return a.handleEvent(e)}),a[Ye])}function pn(){rn.call(this),this.i=new Jr(this),this.P=this,this.I=null}function Nn(a,e){var n,c=a.I;if(c)for(n=[];c;c=c.I)n.push(c);if(a=a.P,c=e.type||e,"string"==typeof e)e=new Zn(e,a);else if(e instanceof Zn)e.target=e.target||a;else{var p=e;vr(e=new Zn(c,a),p)}if(p=!0,n)for(var _=n.length-1;0<=_;_--){var w=e.g=n[_];p=jr(w,c,!0,e)&&p}if(p=jr(w=e.g=a,c,!0,e)&&p,p=jr(w,c,!1,e)&&p,n)for(_=0;_<n.length;_++)p=jr(w=e.g=n[_],c,!1,e)&&p}function jr(a,e,n,c){if(!(e=a.i.g[String(e)]))return!0;e=e.concat();for(var p=!0,_=0;_<e.length;++_){var w=e[_];if(w&&!w.ba&&w.capture==n){var N=w.listener,te=w.ha||w.src;w.ea&&tt(a.i,w),p=!1!==N.call(te,c)&&p}}return p&&!c.defaultPrevented}Ot(pn,rn),pn.prototype[di]=!0,pn.prototype.removeEventListener=function(a,e,n,c){de(this,a,e,n,c)},pn.prototype.M=function(){if(pn.X.M.call(this),this.i){var e,a=this.i;for(e in a.g){for(var n=a.g[e],c=0;c<n.length;c++)Xt(n[c]);delete a.g[e],a.h--}}this.I=null},pn.prototype.N=function(a,e,n,c){return this.i.add(String(a),e,!1,n,c)},pn.prototype.O=function(a,e,n,c){return this.i.add(String(a),e,!0,n,c)};var Or=st.JSON.stringify;function wi(){var a=Ci;let e=null;return a.g&&(e=a.g,a.g=a.g.next,a.g||(a.h=null),e.next=null),e}var rr,Zi=new class{constructor(a,e){this.i=a,this.j=e,this.h=0,this.g=null}get(){let a;return 0<this.h?(this.h--,a=this.g,this.g=a.next,a.next=null):a=this.i(),a}}(()=>new Ms,a=>a.reset());class Ms{constructor(){this.next=this.g=this.h=null}set(e,n){this.h=e,this.g=n,this.next=null}reset(){this.next=this.g=this.h=null}}function is(a){st.setTimeout(()=>{throw a},0)}function vs(a,e){rr||function Yi(){var a=st.Promise.resolve(void 0);rr=function(){a.then(Es)}}(),_i||(rr(),_i=!0),Ci.add(a,e)}var _i=!1,Ci=new class xr{constructor(){this.h=this.g=null}add(e,n){const c=Zi.get();c.set(e,n),this.h?this.h.next=c:this.g=c,this.h=c}};function Es(){for(var a;a=wi();){try{a.h.call(a.g)}catch(n){is(n)}var e=Zi;e.j(a),100>e.h&&(e.h++,a.next=e.g,e.g=a)}_i=!1}function Ss(a,e){pn.call(this),this.h=a||1,this.g=e||st,this.j=jt(this.lb,this),this.l=Date.now()}function Pn(a){a.ca=!1,a.R&&(a.g.clearTimeout(a.R),a.R=null)}function Sr(a,e,n){if("function"==typeof a)n&&(a=jt(a,n));else{if(!a||"function"!=typeof a.handleEvent)throw Error("Invalid listener argument");a=jt(a.handleEvent,a)}return 2147483647<Number(e)?-1:st.setTimeout(a,e||0)}function Ei(a){a.g=Sr(()=>{a.g=null,a.i&&(a.i=!1,Ei(a))},a.j);const e=a.h;a.h=null,a.m.apply(null,e)}Ot(Ss,pn),(Ne=Ss.prototype).ca=!1,Ne.R=null,Ne.lb=function(){if(this.ca){var a=Date.now()-this.l;0<a&&a<.8*this.h?this.R=this.g.setTimeout(this.j,this.h-a):(this.R&&(this.g.clearTimeout(this.R),this.R=null),Nn(this,"tick"),this.ca&&(Pn(this),this.start()))}},Ne.start=function(){this.ca=!0,this.R||(this.R=this.g.setTimeout(this.j,this.h),this.l=Date.now())},Ne.M=function(){Ss.X.M.call(this),Pn(this),delete this.g};class hs extends rn{constructor(e,n){super(),this.m=e,this.j=n,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:Ei(this)}M(){super.M(),this.g&&(st.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Qi(a){rn.call(this),this.h=a,this.g={}}Ot(Qi,rn);var Ni=[];function fs(a,e,n,c){Array.isArray(n)||(n&&(Ni[0]=n.toString()),n=Ni);for(var p=0;p<n.length;p++){var _=Rt(e,n[p],c||a.handleEvent,!1,a.h||a);if(!_)break;a.g[_.key]=_}}function Gr(a){yn(a.g,function(e,n){this.g.hasOwnProperty(n)&&we(e)},a),a.g={}}function qs(){this.g=!0}function Ks(a,e,n,c){a.info(function(){return"XMLHTTP TEXT ("+e+"): "+function la(a,e){if(!a.g)return e;if(!e)return null;try{var n=JSON.parse(e);if(n)for(a=0;a<n.length;a++)if(Array.isArray(n[a])){var c=n[a];if(!(2>c.length)){var p=c[1];if(Array.isArray(p)&&!(1>p.length)){var _=p[0];if("noop"!=_&&"stop"!=_&&"close"!=_)for(var w=1;w<p.length;w++)p[w]=""}}}return Or(n)}catch{return e}}(a,n)+(c?" "+c:"")})}Qi.prototype.M=function(){Qi.X.M.call(this),Gr(this)},Qi.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},qs.prototype.Aa=function(){this.g=!1},qs.prototype.info=function(){};var Os={},Bs=null;function Ko(){return Bs=Bs||new pn}function ys(a){Zn.call(this,Os.Pa,a)}function Zs(a){const e=Ko();Nn(e,new ys(e))}function jo(a,e){Zn.call(this,Os.STAT_EVENT,a),this.stat=e}function Li(a){const e=Ko();Nn(e,new jo(e,a))}function pt(a,e){Zn.call(this,Os.Qa,a),this.size=e}function ft(a,e){if("function"!=typeof a)throw Error("Fn must not be null and must be a function");return st.setTimeout(function(){a()},e)}Os.Pa="serverreachability",Ot(ys,Zn),Os.STAT_EVENT="statevent",Ot(jo,Zn),Os.Qa="timingevent",Ot(pt,Zn);var Ct={NO_ERROR:0,mb:1,zb:2,yb:3,tb:4,xb:5,Ab:6,Ma:7,TIMEOUT:8,Db:9},sn={rb:"complete",Nb:"success",Na:"error",Ma:"abort",Fb:"ready",Gb:"readystatechange",TIMEOUT:"timeout",Bb:"incrementaldata",Eb:"progress",ub:"downloadprogress",Vb:"uploadprogress"};function Sn(){}function Tr(){}Sn.prototype.h=null;var ss,$r={OPEN:"a",qb:"b",Na:"c",Cb:"d"};function mi(){Zn.call(this,"d")}function Xi(){Zn.call(this,"c")}function os(){}function Pr(a,e,n,c){this.l=a,this.j=e,this.m=n,this.U=c||1,this.S=new Qi(this),this.O=ks,this.T=new Ss(a=pr?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.V=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.Y=-1,this.I=!1,this.N=0,this.L=null,this.$=this.J=this.Z=this.P=!1,this.h=new Uo}function Uo(){this.i=null,this.g="",this.h=!1}Ot(mi,Zn),Ot(Xi,Zn),Ot(os,Sn),os.prototype.g=function(){return new XMLHttpRequest},os.prototype.i=function(){return{}},ss=new os;var ks=45e3,vo={},Da={};function Do(a,e,n){a.K=1,a.v=da(Bo(e)),a.s=n,a.P=!0,Di(a,null)}function Di(a,e){a.F=Date.now(),Aa(a),a.A=Bo(a.v);var n=a.A,c=a.U;Array.isArray(c)||(c=[String(c)]),Rs(n.i,"t",c),a.C=0,n=a.l.H,a.h=new Uo,a.g=gs(a.l,n?e:null,!a.s),0<a.N&&(a.L=new hs(jt(a.La,a,a.g),a.N)),fs(a.S,a.g,"readystatechange",a.ib),e=a.H?tr(a.H):{},a.s?(a.u||(a.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",a.g.da(a.A,a.u,a.s,e)):(a.u="GET",a.g.da(a.A,a.u,null,e)),Zs(),function Xs(a,e,n,c,p,_){a.info(function(){if(a.g)if(_)for(var w="",N=_.split("&"),te=0;te<N.length;te++){var ce=N[te].split("=");if(1<ce.length){var Ae=ce[0];ce=ce[1];var rt=Ae.split("_");w=2<=rt.length&&"type"==rt[1]?w+(Ae+"=")+ce+"&":w+(Ae+"=redacted&")}}else w=null;else w=_;return"XMLHTTP REQ ("+c+") [attempt "+p+"]: "+e+"\n"+n+"\n"+w})}(a.j,a.u,a.A,a.m,a.U,a.s)}function Jo(a){return!!a.g&&"GET"==a.u&&2!=a.K&&a.l.Da}function Ao(a,e,n){let p,c=!0;for(;!a.I&&a.C<n.length;){if(p=ca(a,n),p==Da){4==e&&(a.o=4,Li(14),c=!1),Ks(a.j,a.m,null,"[Incomplete Response]");break}if(p==vo){a.o=4,Li(15),Ks(a.j,a.m,n,"[Invalid Chunk]"),c=!1;break}Ks(a.j,a.m,p,null),to(a,p)}Jo(a)&&p!=Da&&p!=vo&&(a.h.g="",a.C=0),4!=e||0!=n.length||a.h.h||(a.o=1,Li(16),c=!1),a.i=a.i&&c,c?0<n.length&&!a.$&&(a.$=!0,(e=a.l).g==a&&e.$&&!e.K&&(e.j.info("Great, no buffering proxy detected. Bytes received: "+n.length),Il(e),e.K=!0,Li(11))):(Ks(a.j,a.m,n,"[Invalid Chunked Response]"),eo(a),Js(a))}function ca(a,e){var n=a.C,c=e.indexOf("\n",n);return-1==c?Da:(n=Number(e.substring(n,c)),isNaN(n)?vo:(c+=1)+n>e.length?Da:(e=e.substr(c,n),a.C=c+n,e))}function Aa(a){a.V=Date.now()+a.O,Pa(a,a.O)}function Pa(a,e){if(null!=a.B)throw Error("WatchDog timer not null");a.B=ft(jt(a.gb,a),e)}function Ba(a){a.B&&(st.clearTimeout(a.B),a.B=null)}function Js(a){0==a.l.G||a.I||xl(a.l,a)}function eo(a){Ba(a);var e=a.L;e&&"function"==typeof e.na&&e.na(),a.L=null,Pn(a.T),Gr(a.S),a.g&&(e=a.g,a.g=null,e.abort(),e.na())}function to(a,e){try{var n=a.l;if(0!=n.G&&(n.g==a||ta(n.h,a)))if(!a.J&&ta(n.h,a)&&3==n.G){try{var c=n.Fa.g.parse(e)}catch{c=null}if(Array.isArray(c)&&3==c.length){var p=c;if(0==p[0]){e:if(!n.u){if(n.g){if(!(n.g.F+3e3<a.F))break e;uu(n),pa(n)}Ga(n),Li(18)}}else n.Ba=p[1],0<n.Ba-n.T&&37500>p[2]&&n.L&&0==n.A&&!n.v&&(n.v=ft(jt(n.cb,n),6e3));if(1>=_o(n.h)&&n.ja){try{n.ja()}catch{}n.ja=void 0}}else ia(n,11)}else if((a.J||n.g==a)&&uu(n),!mr(e))for(p=n.Fa.g.parse(e),e=0;e<p.length;e++){let ce=p[e];if(n.T=ce[0],ce=ce[1],2==n.G)if("c"==ce[0]){n.I=ce[1],n.ka=ce[2];const Ae=ce[3];null!=Ae&&(n.ma=Ae,n.j.info("VER="+n.ma));const rt=ce[4];null!=rt&&(n.Ca=rt,n.j.info("SVER="+n.Ca));const kt=ce[5];null!=kt&&"number"==typeof kt&&0<kt&&(n.J=c=1.5*kt,n.j.info("backChannelRequestTimeoutMs_="+c)),c=n;const on=a.g;if(on){const gn=on.g?on.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(gn){var _=c.h;_.g||-1==gn.indexOf("spdy")&&-1==gn.indexOf("quic")&&-1==gn.indexOf("h2")||(_.j=_.l,_.g=new Set,_.h&&(ro(_,_.h),_.h=null))}if(c.D){const Yn=on.g?on.g.getResponseHeader("X-HTTP-Session-Id"):null;Yn&&(c.za=Yn,hi(c.F,c.D,Yn))}}n.G=3,n.l&&n.l.xa(),n.$&&(n.P=Date.now()-a.F,n.j.info("Handshake RTT: "+n.P+"ms"));var w=a;if((c=n).sa=so(c,c.H?c.ka:null,c.V),w.J){na(c.h,w);var N=w,te=c.J;te&&N.setTimeout(te),N.B&&(Ba(N),Aa(N)),c.g=w}else qr(c);0<n.i.length&&au(n)}else"stop"!=ce[0]&&"close"!=ce[0]||ia(n,7);else 3==n.G&&("stop"==ce[0]||"close"==ce[0]?"stop"==ce[0]?ia(n,7):To(n):"noop"!=ce[0]&&n.l&&n.l.wa(ce),n.A=0)}Zs()}catch{}}function ru(a,e){if(a.forEach&&"function"==typeof a.forEach)a.forEach(e,void 0);else if(Xe(a)||"string"==typeof a)Array.prototype.forEach.call(a,e,void 0);else for(var n=function Au(a){if(a.oa&&"function"==typeof a.oa)return a.oa();if(!a.W||"function"!=typeof a.W){if(typeof Map<"u"&&a instanceof Map)return Array.from(a.keys());if(!(typeof Set<"u"&&a instanceof Set)){if(Xe(a)||"string"==typeof a){var e=[];a=a.length;for(var n=0;n<a;n++)e.push(n);return e}e=[],n=0;for(const c in a)e[n++]=c;return e}}}(a),c=function wl(a){if(a.W&&"function"==typeof a.W)return a.W();if(typeof Map<"u"&&a instanceof Map||typeof Set<"u"&&a instanceof Set)return Array.from(a.values());if("string"==typeof a)return a.split("");if(Xe(a)){for(var e=[],n=a.length,c=0;c<n;c++)e.push(a[c]);return e}for(c in e=[],n=0,a)e[n++]=a[c];return e}(a),p=c.length,_=0;_<p;_++)e.call(void 0,c[_],n&&n[_],a)}(Ne=Pr.prototype).setTimeout=function(a){this.O=a},Ne.ib=function(a){a=a.target;const e=this.L;e&&3==Wr(a)?e.l():this.La(a)},Ne.La=function(a){try{if(a==this.g)e:{const Ae=Wr(this.g);var e=this.g.Ea();if(this.g.aa(),!(3>Ae)&&(3!=Ae||pr||this.g&&(this.h.h||this.g.fa()||Pi(this.g)))){this.I||4!=Ae||7==e||Zs(),Ba(this);var n=this.g.aa();this.Y=n;t:if(Jo(this)){var c=Pi(this.g);a="";var p=c.length,_=4==Wr(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){eo(this),Js(this);var w="";break t}this.h.i=new st.TextDecoder}for(e=0;e<p;e++)this.h.h=!0,a+=this.h.i.decode(c[e],{stream:_&&e==p-1});c.splice(0,p),this.h.g+=a,this.C=0,w=this.h.g}else w=this.g.fa();if(this.i=200==n,function ar(a,e,n,c,p,_,w){a.info(function(){return"XMLHTTP RESP ("+c+") [ attempt "+p+"]: "+e+"\n"+n+"\n"+_+" "+w})}(this.j,this.u,this.A,this.m,this.U,Ae,n),this.i){if(this.Z&&!this.J){t:{if(this.g){var N,te=this.g;if((N=te.g?te.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!mr(N)){var ce=N;break t}}ce=null}if(!(n=ce)){this.i=!1,this.o=3,Li(12),eo(this),Js(this);break e}Ks(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,to(this,n)}this.P?(Ao(this,Ae,w),pr&&this.i&&3==Ae&&(fs(this.S,this.T,"tick",this.hb),this.T.start())):(Ks(this.j,this.m,w,null),to(this,w)),4==Ae&&eo(this),this.i&&!this.I&&(4==Ae?xl(this.l,this):(this.i=!1,Aa(this)))}else 400==n&&0<w.indexOf("Unknown SID")?(this.o=3,Li(12)):(this.o=0,Li(13)),eo(this),Js(this)}}}catch{}},Ne.hb=function(){if(this.g){var a=Wr(this.g),e=this.g.fa();this.C<e.length&&(Ba(this),Ao(this,a,e),this.i&&4!=a&&Aa(this))}},Ne.cancel=function(){this.I=!0,eo(this)},Ne.gb=function(){this.B=null;const a=Date.now();0<=a-this.V?(function Fo(a,e){a.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(Zs(),Li(17)),eo(this),this.o=2,Js(this)):Pa(this,this.V-a)};var Vs=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Zo(a,e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,a instanceof Zo){this.h=void 0!==e?e:a.h,Po(this,a.j),this.s=a.s,this.g=a.g,uo(this,a.m),this.l=a.l,e=a.i;var n=new ai;n.i=e.i,e.g&&(n.g=new Map(e.g),n.h=e.h),yo(this,n),this.o=a.o}else a&&(n=String(a).match(Vs))?(this.h=!!e,Po(this,n[1]||"",!0),this.s=ha(n[2]||""),this.g=ha(n[3]||"",!0),uo(this,n[4]),this.l=ha(n[5]||"",!0),yo(this,n[6]||"",!0),this.o=ha(n[7]||"")):(this.h=!!e,this.i=new ai(null,this.h))}function Bo(a){return new Zo(a)}function Po(a,e,n){a.j=n?ha(e,!0):e,a.j&&(a.j=a.j.replace(/:$/,""))}function uo(a,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);a.m=e}else a.m=null}function yo(a,e,n){e instanceof ai?(a.i=e,function ou(a,e){e&&!a.j&&(Hi(a),a.i=null,a.g.forEach(function(n,c){var p=c.toLowerCase();c!=p&&(Fi(this,c),Rs(this,p,n))},a)),a.j=e}(a.i,a.h)):(n||(e=Yo(e,Va)),a.i=new ai(e,a.h))}function hi(a,e,n){a.i.set(e,n)}function da(a){return hi(a,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),a}function ha(a,e){return a?e?decodeURI(a.replace(/%25/g,"%2525")):decodeURIComponent(a):""}function Yo(a,e,n){return"string"==typeof a?(a=encodeURI(a).replace(e,ea),n&&(a=a.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),a):null}function ea(a){return"%"+((a=a.charCodeAt(0))>>4&15).toString(16)+(15&a).toString(16)}Zo.prototype.toString=function(){var a=[],e=this.j;e&&a.push(Yo(e,su,!0),":");var n=this.g;return(n||"file"==e)&&(a.push("//"),(e=this.s)&&a.push(Yo(e,su,!0),"@"),a.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&a.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&a.push("/"),a.push(Yo(n,"/"==n.charAt(0)?Vo:Cl,!0))),(n=this.i.toString())&&a.push("?",n),(n=this.o)&&a.push("#",Yo(n,ws)),a.join("")};var su=/[#\/\?@]/g,Cl=/[#\?:]/g,Vo=/[#\?]/g,Va=/[#\?@]/g,ws=/#/g;function ai(a,e){this.h=this.g=null,this.i=a||null,this.j=!!e}function Hi(a){a.g||(a.g=new Map,a.h=0,a.i&&function iu(a,e){if(a){a=a.split("&");for(var n=0;n<a.length;n++){var c=a[n].indexOf("="),p=null;if(0<=c){var _=a[n].substring(0,c);p=a[n].substring(c+1)}else _=a[n];e(_,p?decodeURIComponent(p.replace(/\+/g," ")):"")}}}(a.i,function(e,n){a.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}function Fi(a,e){Hi(a),e=Ji(a,e),a.g.has(e)&&(a.i=null,a.h-=a.g.get(e).length,a.g.delete(e))}function no(a,e){return Hi(a),e=Ji(a,e),a.g.has(e)}function Rs(a,e,n){Fi(a,e),0<n.length&&(a.i=null,a.g.set(Ji(a,e),dr(n)),a.h+=n.length)}function Ji(a,e){return e=String(e),a.j&&(e=e.toLowerCase()),e}function vi(a){this.l=a||Cs,a=st.PerformanceNavigationTiming?0<(a=st.performance.getEntriesByType("navigation")).length&&("hq"==a[0].nextHopProtocol||"h2"==a[0].nextHopProtocol):!!(st.g&&st.g.Ga&&st.g.Ga()&&st.g.Ga().$b),this.j=a?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(Ne=ai.prototype).add=function(a,e){Hi(this),this.i=null,a=Ji(this,a);var n=this.g.get(a);return n||this.g.set(a,n=[]),n.push(e),this.h+=1,this},Ne.forEach=function(a,e){Hi(this),this.g.forEach(function(n,c){n.forEach(function(p){a.call(e,p,c,this)},this)},this)},Ne.oa=function(){Hi(this);const a=Array.from(this.g.values()),e=Array.from(this.g.keys()),n=[];for(let c=0;c<e.length;c++){const p=a[c];for(let _=0;_<p.length;_++)n.push(e[c])}return n},Ne.W=function(a){Hi(this);let e=[];if("string"==typeof a)no(this,a)&&(e=e.concat(this.g.get(Ji(this,a))));else{a=Array.from(this.g.values());for(let n=0;n<a.length;n++)e=e.concat(a[n])}return e},Ne.set=function(a,e){return Hi(this),this.i=null,no(this,a=Ji(this,a))&&(this.h-=this.g.get(a).length),this.g.set(a,[e]),this.h+=1,this},Ne.get=function(a,e){return a&&0<(a=this.W(a)).length?String(a[0]):e},Ne.toString=function(){if(this.i)return this.i;if(!this.g)return"";const a=[],e=Array.from(this.g.keys());for(var n=0;n<e.length;n++){var c=e[n];const _=encodeURIComponent(String(c)),w=this.W(c);for(c=0;c<w.length;c++){var p=_;""!==w[c]&&(p+="="+encodeURIComponent(String(w[c]))),a.push(p)}}return this.i=a.join("&")};var Cs=10;function fa(a){return!!a.h||!!a.g&&a.g.size>=a.j}function _o(a){return a.h?1:a.g?a.g.size:0}function ta(a,e){return a.h?a.h==e:!!a.g&&a.g.has(e)}function ro(a,e){a.g?a.g.add(e):a.h=e}function na(a,e){a.h&&a.h==e?a.h=null:a.g&&a.g.has(e)&&a.g.delete(e)}function ji(a){if(null!=a.h)return a.i.concat(a.h.D);if(null!=a.g&&0!==a.g.size){let e=a.i;for(const n of a.g.values())e=e.concat(n.D);return e}return dr(a.i)}function Dr(){}function ra(){this.g=new Dr}function ne(a,e,n){const c=n||"";try{ru(a,function(p,_){let w=p;ut(p)&&(w=Or(p)),e.push(c+_+"="+encodeURIComponent(w))})}catch(p){throw e.push(c+"type="+encodeURIComponent("_badmap")),p}}function q(a,e,n,c,p){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,p(c)}catch{}}function O(a){this.l=a.ac||null,this.j=a.jb||!1}function H(a,e){pn.call(this),this.D=a,this.u=e,this.m=void 0,this.readyState=be,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}vi.prototype.cancel=function(){if(this.i=ji(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const a of this.g.values())a.cancel();this.g.clear()}},Dr.prototype.stringify=function(a){return st.JSON.stringify(a,void 0)},Dr.prototype.parse=function(a){return st.JSON.parse(a,void 0)},Ot(O,Sn),O.prototype.g=function(){return new H(this.l,this.j)},O.prototype.i=function(a){return function(){return a}}({}),Ot(H,pn);var be=0;function Ve(a){a.j.read().then(a.Ta.bind(a)).catch(a.ga.bind(a))}function xe(a){a.readyState=4,a.l=null,a.j=null,a.A=null,wt(a)}function wt(a){a.onreadystatechange&&a.onreadystatechange.call(a)}(Ne=H.prototype).open=function(a,e){if(this.readyState!=be)throw this.abort(),Error("Error reopening a connection");this.C=a,this.B=e,this.readyState=1,wt(this)},Ne.send=function(a){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};a&&(e.body=a),(this.D||st).fetch(new Request(this.B,e)).then(this.Wa.bind(this),this.ga.bind(this))},Ne.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,xe(this)),this.readyState=be},Ne.Wa=function(a){if(this.g&&(this.l=a,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=a.headers,this.readyState=2,wt(this)),this.g&&(this.readyState=3,wt(this),this.g)))if("arraybuffer"===this.responseType)a.arrayBuffer().then(this.Ua.bind(this),this.ga.bind(this));else if(typeof st.ReadableStream<"u"&&"body"in a){if(this.j=a.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Ve(this)}else a.text().then(this.Va.bind(this),this.ga.bind(this))},Ne.Ta=function(a){if(this.g){if(this.u&&a.value)this.response.push(a.value);else if(!this.u){var e=a.value?a.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!a.done}))&&(this.response=this.responseText+=e)}a.done?xe(this):wt(this),3==this.readyState&&Ve(this)}},Ne.Va=function(a){this.g&&(this.response=this.responseText=a,xe(this))},Ne.Ua=function(a){this.g&&(this.response=a,xe(this))},Ne.ga=function(){this.g&&xe(this)},Ne.setRequestHeader=function(a,e){this.v.append(a,e)},Ne.getResponseHeader=function(a){return this.h&&this.h.get(a.toLowerCase())||""},Ne.getAllResponseHeaders=function(){if(!this.h)return"";const a=[],e=this.h.entries();for(var n=e.next();!n.done;)a.push((n=n.value)[0]+": "+n[1]),n=e.next();return a.join("\r\n")},Object.defineProperty(H.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(a){this.m=a?"include":"same-origin"}});var Jt=st.JSON.parse;function wn(a){pn.call(this),this.headers=new Map,this.u=a||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=xn,this.K=this.L=!1}Ot(wn,pn);var xn="",yr=/^https?$/i,zr=["POST","PUT"];function Ai(a,e){a.h=!1,a.g&&(a.l=!0,a.g.abort(),a.l=!1),a.j=e,a.m=5,Ui(a),Hs(a)}function Ui(a){a.D||(a.D=!0,Nn(a,"complete"),Nn(a,"error"))}function ps(a){if(a.h&&typeof mt<"u"&&(!a.C[1]||4!=Wr(a)||2!=a.aa()))if(a.v&&4==Wr(a))Sr(a.Ha,0,a);else if(Nn(a,"readystatechange"),4==Wr(a)){a.h=!1;try{const N=a.aa();e:switch(N){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var n;if(!(n=e)){var c;if(c=0===N){var p=String(a.H).match(Vs)[1]||null;if(!p&&st.self&&st.self.location){var _=st.self.location.protocol;p=_.substr(0,_.length-1)}c=!yr.test(p?p.toLowerCase():"")}n=c}if(n)Nn(a,"complete"),Nn(a,"success");else{a.m=6;try{var w=2<Wr(a)?a.g.statusText:""}catch{w=""}a.j=w+" ["+a.aa()+"]",Ui(a)}}finally{Hs(a)}}}function Hs(a,e){if(a.g){ts(a);const n=a.g,c=a.C[0]?xt:null;a.g=null,a.C=null,e||Nn(a,"ready");try{n.onreadystatechange=c}catch{}}}function ts(a){a.g&&a.K&&(a.g.ontimeout=null),a.A&&(st.clearTimeout(a.A),a.A=null)}function Wr(a){return a.g?a.g.readyState:0}function Pi(a){try{if(!a.g)return null;if("response"in a.g)return a.g.response;switch(a.J){case xn:case"text":return a.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in a.g)return a.g.mozResponseArrayBuffer}return null}catch{return null}}function as(a){let e="";return yn(a,function(n,c){e+=c,e+=":",e+=n,e+="\r\n"}),e}function Gi(a,e,n){e:{for(c in n){var c=!1;break e}c=!0}c||(n=as(n),"string"==typeof a?null!=n&&encodeURIComponent(String(n)):hi(a,e,n))}function Ns(a,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[a]||e}function Ho(a){this.Ca=0,this.i=[],this.j=new qs,this.ka=this.sa=this.F=this.V=this.g=this.za=this.D=this.ia=this.o=this.S=this.s=null,this.ab=this.U=0,this.Za=Ns("failFast",!1,a),this.L=this.v=this.u=this.m=this.l=null,this.Y=!0,this.pa=this.Ba=this.T=-1,this.Z=this.A=this.C=0,this.Xa=Ns("baseRetryDelayMs",5e3,a),this.bb=Ns("retryDelaySeedMs",1e4,a),this.$a=Ns("forwardChannelMaxRetries",2,a),this.ta=Ns("forwardChannelRequestTimeoutMs",2e4,a),this.ra=a&&a.xmlHttpFactory||void 0,this.Da=a&&a.Zb||!1,this.J=void 0,this.H=a&&a.supportsCrossDomainXhr||!1,this.I="",this.h=new vi(a&&a.concurrentRequestLimit),this.Fa=new ra,this.O=a&&a.fastHandshake||!1,this.N=a&&a.encodeInitMessageHeaders||!1,this.O&&this.N&&(this.N=!1),this.Ya=a&&a.Xb||!1,a&&a.Aa&&this.j.Aa(),a&&a.forceLongPolling&&(this.Y=!1),this.$=!this.O&&this.Y&&a&&a.detectBufferingProxy||!1,this.ja=void 0,this.P=0,this.K=!1,this.la=this.B=null}function To(a){if(ga(a),3==a.G){var e=a.U++,n=Bo(a.F);hi(n,"SID",a.I),hi(n,"RID",e),hi(n,"TYPE","terminate"),yu(a,n),(e=new Pr(a,a.j,e,void 0)).K=2,e.v=da(Bo(n)),n=!1,st.navigator&&st.navigator.sendBeacon&&(n=st.navigator.sendBeacon(e.v.toString(),"")),!n&&st.Image&&((new Image).src=e.v,n=!0),n||(e.g=gs(e.l,null),e.g.da(e.v)),e.F=Date.now(),Aa(e)}Pu(a)}function pa(a){a.g&&(Il(a),a.g.cancel(),a.g=null)}function ga(a){pa(a),a.u&&(st.clearTimeout(a.u),a.u=null),uu(a),a.h.cancel(),a.m&&("number"==typeof a.m&&st.clearTimeout(a.m),a.m=null)}function au(a){fa(a.h)||a.m||(a.m=!0,vs(a.Ja,a),a.C=0)}function io(a,e){var n;n=e?e.m:a.U++;const c=Bo(a.F);hi(c,"SID",a.I),hi(c,"RID",n),hi(c,"AID",a.T),yu(a,c),a.o&&a.s&&Gi(c,a.o,a.s),n=new Pr(a,a.j,n,a.C+1),null===a.o&&(n.H=a.s),e&&(a.i=e.D.concat(a.i)),e=il(a,n,1e3),n.setTimeout(Math.round(.5*a.ta)+Math.round(.5*a.ta*Math.random())),ro(a.h,n),Do(n,c,e)}function yu(a,e){a.ia&&yn(a.ia,function(n,c){hi(e,c,n)}),a.l&&ru({},function(n,c){hi(e,c,n)})}function il(a,e,n){n=Math.min(a.i.length,n);var c=a.l?jt(a.l.Ra,a.l,a):null;e:{var p=a.i;let _=-1;for(;;){const w=["count="+n];-1==_?0<n?(_=p[0].h,w.push("ofs="+_)):_=0:w.push("ofs="+_);let N=!0;for(let te=0;te<n;te++){let ce=p[te].h;const Ae=p[te].g;if(ce-=_,0>ce)_=Math.max(0,p[te].h-100),N=!1;else try{ne(Ae,w,"req"+ce+"_")}catch{c&&c(Ae)}}if(N){c=w.join("&");break e}}}return a=a.i.splice(0,n),e.D=a,c}function qr(a){a.g||a.u||(a.Z=1,vs(a.Ia,a),a.A=0)}function Ga(a){return!(a.g||a.u||3<=a.A||(a.Z++,a.u=ft(jt(a.Ia,a),Ls(a,a.A)),a.A++,0))}function Il(a){null!=a.B&&(st.clearTimeout(a.B),a.B=null)}function sl(a){a.g=new Pr(a,a.j,"rpc",a.Z),null===a.o&&(a.g.H=a.s),a.g.N=0;var e=Bo(a.sa);hi(e,"RID","rpc"),hi(e,"SID",a.I),hi(e,"CI",a.L?"0":"1"),hi(e,"AID",a.T),hi(e,"TYPE","xmlhttp"),yu(a,e),a.o&&a.s&&Gi(e,a.o,a.s),a.J&&a.g.setTimeout(a.J);var n=a.g;a=a.ka,n.K=1,n.v=da(Bo(e)),n.s=null,n.P=!0,Di(n,a)}function uu(a){null!=a.v&&(st.clearTimeout(a.v),a.v=null)}function xl(a,e){var n=null;if(a.g==e){uu(a),Il(a),a.g=null;var c=2}else{if(!ta(a.h,e))return;n=e.D,na(a.h,e),c=1}if(0!=a.G)if(a.pa=e.Y,e.i)if(1==c){n=e.s?e.s.length:0,e=Date.now()-e.F;var p=a.C;Nn(c=Ko(),new pt(c,n)),au(a)}else qr(a);else if(3==(p=e.o)||0==p&&0<a.pa||!(1==c&&function ma(a,e){return!(_o(a.h)>=a.h.j-(a.m?1:0)||(a.m?(a.i=e.D.concat(a.i),0):1==a.G||2==a.G||a.C>=(a.Za?0:a.$a)||(a.m=ft(jt(a.Ja,a,e),Ls(a,a.C)),a.C++,0)))}(a,e)||2==c&&Ga(a)))switch(n&&0<n.length&&(e=a.h,e.i=e.i.concat(n)),p){case 1:ia(a,5);break;case 4:ia(a,10);break;case 3:ia(a,6);break;default:ia(a,2)}}function Ls(a,e){let n=a.Xa+Math.floor(Math.random()*a.bb);return a.l||(n*=2),n*e}function ia(a,e){if(a.j.info("Error code "+e),2==e){var n=null;a.l&&(n=null);var c=jt(a.kb,a);n||(n=new Zo("//www.google.com/images/cleardot.gif"),st.location&&"http"==st.location.protocol||Po(n,"https"),da(n)),function Z(a,e){const n=new qs;if(st.Image){const c=new Image;c.onload=_n(q,n,c,"TestLoadImage: loaded",!0,e),c.onerror=_n(q,n,c,"TestLoadImage: error",!1,e),c.onabort=_n(q,n,c,"TestLoadImage: abort",!1,e),c.ontimeout=_n(q,n,c,"TestLoadImage: timeout",!1,e),st.setTimeout(function(){c.ontimeout&&c.ontimeout()},1e4),c.src=a}else e(!1)}(n.toString(),c)}else Li(2);a.G=0,a.l&&a.l.va(e),Pu(a),ga(a)}function Pu(a){if(a.G=0,a.la=[],a.l){const e=ji(a.h);(0!=e.length||0!=a.i.length)&&(Hn(a.la,e),Hn(a.la,a.i),a.h.i.length=0,dr(a.i),a.i.length=0),a.l.ua()}}function so(a,e,n){var c=n instanceof Zo?Bo(n):new Zo(n,void 0);if(""!=c.g)e&&(c.g=e+"."+c.g),uo(c,c.m);else{var p=st.location;c=p.protocol,e=e?e+"."+p.hostname:p.hostname,p=+p.port;var _=new Zo(null,void 0);c&&Po(_,c),e&&(_.g=e),p&&uo(_,p),n&&(_.l=n),c=_}return e=a.za,(n=a.D)&&e&&hi(c,n,e),hi(c,"VER",a.ma),yu(a,c),c}function gs(a,e,n){if(e&&!a.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new wn(n&&a.Da&&!a.ra?new O({jb:!0}):a.ra)).Ka(a.H),e}function us(){}function $a(){if(ci&&!(10<=Number(Fr)))throw Error("Environmental error: no available transport.")}function Mo(a,e){pn.call(this),this.g=new Ho(e),this.l=a,this.h=e&&e.messageUrlParams||null,a=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(a?a["X-Client-Protocol"]="webchannel":a={"X-Client-Protocol":"webchannel"}),this.g.s=a,a=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(a?a["X-WebChannel-Content-Type"]=e.messageContentType:a={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(a?a["X-WebChannel-Client-Profile"]=e.ya:a={"X-WebChannel-Client-Profile":e.ya}),this.g.S=a,(a=e&&e.Yb)&&!mr(a)&&(this.g.o=a),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!mr(e)&&(this.g.D=e,null!==(a=this.h)&&e in a&&e in(a=this.h)&&delete a[e]),this.j=new Mu(this)}function lo(a){mi.call(this);var e=a.__sm__;if(e){e:{for(const n in e){a=n;break e}a=void 0}(this.i=a)&&(a=this.i,e=null!==e&&a in e?e[a]:void 0),this.data=e}else this.data=a}function za(){Xi.call(this),this.status=1}function Mu(a){this.g=a}(Ne=wn.prototype).Ka=function(a){this.L=a},Ne.da=function(a,e,n,c){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+a);e=e?e.toUpperCase():"GET",this.H=a,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():ss.g(),this.C=function Jn(a){return a.h||(a.h=a.i())}(this.u?this.u:ss),this.g.onreadystatechange=jt(this.Ha,this);try{this.F=!0,this.g.open(e,String(a),!0),this.F=!1}catch(_){return void Ai(this,_)}if(a=n||"",n=new Map(this.headers),c)if(Object.getPrototypeOf(c)===Object.prototype)for(var p in c)n.set(p,c[p]);else{if("function"!=typeof c.keys||"function"!=typeof c.get)throw Error("Unknown input type for opt_headers: "+String(c));for(const _ of c.keys())n.set(_,c.get(_))}c=Array.from(n.keys()).find(_=>"content-type"==_.toLowerCase()),p=st.FormData&&a instanceof st.FormData,!(0<=bn(zr,e))||c||p||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[_,w]of n)this.g.setRequestHeader(_,w);this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{ts(this),0<this.B&&((this.K=function Ti(a){return ci&&function ti(){return function Ar(a){var e=Qn;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=a(9)}(function(){let a=0;const e=qn(String(Wn)).split("."),n=qn("9").split("."),c=Math.max(e.length,n.length);for(let w=0;0==a&&w<c;w++){var p=e[w]||"",_=n[w]||"";do{if(p=/(\d*)(\D*)(.*)/.exec(p)||["","","",""],_=/(\d*)(\D*)(.*)/.exec(_)||["","","",""],0==p[0].length&&0==_[0].length)break;a=kr(0==p[1].length?0:parseInt(p[1],10),0==_[1].length?0:parseInt(_[1],10))||kr(0==p[2].length,0==_[2].length)||kr(p[2],_[2]),p=p[3],_=_[3]}while(0==a)}return 0<=a})}()&&"number"==typeof a.timeout&&void 0!==a.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=jt(this.qa,this)):this.A=Sr(this.qa,this.B,this)),this.v=!0,this.g.send(a),this.v=!1}catch(_){Ai(this,_)}},Ne.qa=function(){typeof mt<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Nn(this,"timeout"),this.abort(8))},Ne.abort=function(a){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=a||7,Nn(this,"complete"),Nn(this,"abort"),Hs(this))},Ne.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Hs(this,!0)),wn.X.M.call(this)},Ne.Ha=function(){this.s||(this.F||this.v||this.l?ps(this):this.fb())},Ne.fb=function(){ps(this)},Ne.aa=function(){try{return 2<Wr(this)?this.g.status:-1}catch{return-1}},Ne.fa=function(){try{return this.g?this.g.responseText:""}catch{return""}},Ne.Sa=function(a){if(this.g){var e=this.g.responseText;return a&&0==e.indexOf(a)&&(e=e.substring(a.length)),Jt(e)}},Ne.Ea=function(){return this.m},Ne.Oa=function(){return"string"==typeof this.j?this.j:String(this.j)},(Ne=Ho.prototype).ma=8,Ne.G=1,Ne.Ja=function(a){if(this.m)if(this.m=null,1==this.G){if(!a){this.U=Math.floor(1e5*Math.random()),a=this.U++;const p=new Pr(this,this.j,a,void 0);let _=this.s;if(this.S&&(_?(_=tr(_),vr(_,this.S)):_=this.S),null!==this.o||this.N||(p.H=_,_=null),this.O)e:{for(var e=0,n=0;n<this.i.length;n++){var c=this.i[n];if(void 0===(c="__data__"in c.g&&"string"==typeof(c=c.g.__data__)?c.length:void 0))break;if(4096<(e+=c)){e=n;break e}if(4096===e||n===this.i.length-1){e=n+1;break e}}e=1e3}else e=1e3;e=il(this,p,e),hi(n=Bo(this.F),"RID",a),hi(n,"CVER",22),this.D&&hi(n,"X-HTTP-Session-Id",this.D),yu(this,n),_&&(this.N?e="headers="+encodeURIComponent(String(as(_)))+"&"+e:this.o&&Gi(n,this.o,_)),ro(this.h,p),this.Ya&&hi(n,"TYPE","init"),this.O?(hi(n,"$req",e),hi(n,"SID","null"),p.Z=!0,Do(p,n,null)):Do(p,n,e),this.G=2}}else 3==this.G&&(a?io(this,a):0==this.i.length||fa(this.h)||io(this))},Ne.Ia=function(){if(this.u=null,sl(this),this.$&&!(this.K||null==this.g||0>=this.P)){var a=2*this.P;this.j.info("BP detection timer enabled: "+a),this.B=ft(jt(this.eb,this),a)}},Ne.eb=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.L=!1,this.K=!0,Li(10),pa(this),sl(this))},Ne.cb=function(){null!=this.v&&(this.v=null,pa(this),Ga(this),Li(19))},Ne.kb=function(a){a?(this.j.info("Successfully pinged google.com"),Li(2)):(this.j.info("Failed to ping google.com"),Li(1))},(Ne=us.prototype).xa=function(){},Ne.wa=function(){},Ne.va=function(){},Ne.ua=function(){},Ne.Ra=function(){},$a.prototype.g=function(a,e){return new Mo(a,e)},Ot(Mo,pn),Mo.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.H=!0);var a=this.g,e=this.l,n=this.h||void 0;Li(0),a.V=e,a.ia=n||{},a.L=a.Y,a.F=so(a,null,a.V),au(a)},Mo.prototype.close=function(){To(this.g)},Mo.prototype.u=function(a){var e=this.g;if("string"==typeof a){var n={};n.__data__=a,a=n}else this.v&&((n={}).__data__=Or(a),a=n);e.i.push(new class{constructor(a,e){this.h=a,this.g=e}}(e.ab++,a)),3==e.G&&au(e)},Mo.prototype.M=function(){this.g.l=null,delete this.j,To(this.g),delete this.g,Mo.X.M.call(this)},Ot(lo,mi),Ot(za,Xi),Ot(Mu,us),Mu.prototype.xa=function(){Nn(this.g,"a")},Mu.prototype.wa=function(a){Nn(this.g,new lo(a))},Mu.prototype.va=function(a){Nn(this.g,new za)},Mu.prototype.ua=function(){Nn(this.g,"b")},$a.prototype.createWebChannel=$a.prototype.g,Mo.prototype.send=Mo.prototype.u,Mo.prototype.open=Mo.prototype.m,Mo.prototype.close=Mo.prototype.close,Ct.NO_ERROR=0,Ct.TIMEOUT=8,Ct.HTTP_ERROR=6,sn.COMPLETE="complete",Tr.EventType=$r,$r.OPEN="a",$r.CLOSE="b",$r.ERROR="c",$r.MESSAGE="d",pn.prototype.listen=pn.prototype.N,wn.prototype.listenOnce=wn.prototype.O,wn.prototype.getLastError=wn.prototype.Oa,wn.prototype.getLastErrorCode=wn.prototype.Ea,wn.prototype.getStatus=wn.prototype.aa,wn.prototype.getResponseJson=wn.prototype.Sa,wn.prototype.getResponseText=wn.prototype.fa,wn.prototype.send=wn.prototype.da,wn.prototype.setWithCredentials=wn.prototype.Ka;var Mc=he.createWebChannelTransport=function(){return new $a},Ou=he.getStatEventTarget=function(){return Ko()},sa=he.ErrorCode=Ct,va=he.EventType=sn,V=he.Event=Os,oe=he.Stat={sb:0,vb:1,wb:2,Pb:3,Ub:4,Rb:5,Sb:6,Qb:7,Ob:8,Tb:9,PROXY:10,NOPROXY:11,Mb:12,Ib:13,Jb:14,Hb:15,Kb:16,Lb:17,ob:18,nb:19,pb:20},W=he.FetchXmlHttpFactory=O,Ee=he.WebChannel=Tr,Qe=he.XhrIo=wn;const Ft="@firebase/firestore";class qt{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}qt.UNAUTHENTICATED=new qt(null),qt.GOOGLE_CREDENTIALS=new qt("google-credentials-uid"),qt.FIRST_PARTY=new qt("first-party-uid"),qt.MOCK_USER=new qt("mock-user");let Rn="9.17.2";const Nr=new Mt.Yd("@firebase/firestore");function Ii(){return Nr.logLevel}function Kt(a,...e){if(Nr.logLevel<=Mt.in.DEBUG){const n=e.map(Mi);Nr.debug(`Firestore (${Rn}): ${a}`,...n)}}function si(a,...e){if(Nr.logLevel<=Mt.in.ERROR){const n=e.map(Mi);Nr.error(`Firestore (${Rn}): ${a}`,...n)}}function gr(a,...e){if(Nr.logLevel<=Mt.in.WARN){const n=e.map(Mi);Nr.warn(`Firestore (${Rn}): ${a}`,...n)}}function Mi(a){if("string"==typeof a)return a;try{return JSON.stringify(a)}catch{return a}}function Fn(a="Unexpected state"){const e=`FIRESTORE (${Rn}) INTERNAL ASSERTION FAILED: `+a;throw si(e),new Error(e)}function Vn(a,e){a||Fn()}function Cn(a,e){return a}const Bt={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class un extends St.ZR{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Oi{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}class Ma{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Dl{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(qt.UNAUTHENTICATED))}shutdown(){}}class ol{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class Oa{constructor(e){this.t=e,this.currentUser=qt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){var c=this;let p=this.i;const _=ce=>this.i!==p?(p=this.i,n(ce)):Promise.resolve();let w=new Oi;this.o=()=>{this.i++,this.currentUser=this.u(),w.resolve(),w=new Oi,e.enqueueRetryable(()=>_(this.currentUser))};const N=()=>{const ce=w;e.enqueueRetryable((0,Fe.Z)(function*(){yield ce.promise,yield _(c.currentUser)}))},te=ce=>{Kt("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=ce,this.auth.addAuthTokenListener(this.o),N()};this.t.onInit(ce=>te(ce)),setTimeout(()=>{if(!this.auth){const ce=this.t.getImmediate({optional:!0});ce?te(ce):(Kt("FirebaseAuthCredentialsProvider","Auth not yet detected"),w.resolve(),w=new Oi)}},0),N()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(c=>this.i!==e?(Kt("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):c?(Vn("string"==typeof c.accessToken),new Ma(c.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Vn(null===e||"string"==typeof e),new qt(e)}}class Bl{constructor(e,n,c,p){this.h=e,this.l=n,this.m=c,this.g=p,this.type="FirstParty",this.user=qt.FIRST_PARTY,this.p=new Map}I(){return this.g?this.g():(Vn(!("object"!=typeof this.h||null===this.h||!this.h.auth||!this.h.auth.getAuthHeaderValueForFirstParty)),this.h.auth.getAuthHeaderValueForFirstParty([]))}get headers(){this.p.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.p.set("Authorization",e),this.m&&this.p.set("X-Goog-Iam-Authorization-Token",this.m),this.p}}class lu{constructor(e,n,c,p){this.h=e,this.l=n,this.m=c,this.g=p}getToken(){return Promise.resolve(new Bl(this.h,this.l,this.m,this.g))}start(e,n){e.enqueueRetryable(()=>n(qt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Go{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class uc{constructor(e){this.T=e,this.forceRefresh=!1,this.appCheck=null,this.A=null}start(e,n){const c=_=>{null!=_.error&&Kt("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${_.error.message}`);const w=_.token!==this.A;return this.A=_.token,Kt("FirebaseAppCheckTokenProvider",`Received ${w?"new":"existing"} token.`),w?n(_.token):Promise.resolve()};this.o=_=>{e.enqueueRetryable(()=>c(_))};const p=_=>{Kt("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=_,this.appCheck.addTokenListener(this.o)};this.T.onInit(_=>p(_)),setTimeout(()=>{if(!this.appCheck){const _=this.T.getImmediate({optional:!0});_?p(_):Kt("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Vn("string"==typeof n.token),this.A=n.token,new Go(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function Wa(a){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(a);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(n);else for(let c=0;c<a;c++)n[c]=Math.floor(256*Math.random());return n}class ku{static R(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let c="";for(;c.length<20;){const p=Wa(40);for(let _=0;_<p.length;++_)c.length<20&&p[_]<n&&(c+=e.charAt(p[_]%e.length))}return c}}function Mr(a,e){return a<e?-1:a>e?1:0}function Ru(a,e,n){return a.length===e.length&&a.every((c,p)=>n(c,e[p]))}function Oo(a){return a+"\0"}class zi{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new un(Bt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new un(Bt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new un(Bt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new un(Bt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return zi.fromMillis(Date.now())}static fromDate(e){return zi.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),c=Math.floor(1e6*(e-1e3*n));return new zi(n,c)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Mr(this.nanoseconds,e.nanoseconds):Mr(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class ur{constructor(e){this.timestamp=e}static fromTimestamp(e){return new ur(e)}static min(){return new ur(new zi(0,0))}static max(){return new ur(new zi(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class Wu{constructor(e,n,c){void 0===n?n=0:n>e.length&&Fn(),void 0===c?c=e.length-n:c>e.length-n&&Fn(),this.segments=e,this.offset=n,this.len=c}get length(){return this.len}isEqual(e){return 0===Wu.comparator(this,e)}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Wu?e.forEach(c=>{n.push(c)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,c=this.limit();n<c;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const c=Math.min(e.length,n.length);for(let p=0;p<c;p++){const _=e.get(p),w=n.get(p);if(_<w)return-1;if(_>w)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class Ur extends Wu{construct(e,n,c){return new Ur(e,n,c)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const n=[];for(const c of e){if(c.indexOf("//")>=0)throw new un(Bt.INVALID_ARGUMENT,`Invalid segment (${c}). Paths must not contain // in them.`);n.push(...c.split("/").filter(p=>p.length>0))}return new Ur(n)}static emptyPath(){return new Ur([])}}const qa=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class _s extends Wu{construct(e,n,c){return new _s(e,n,c)}static isValidIdentifier(e){return qa.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),_s.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new _s(["__name__"])}static fromServerFormat(e){const n=[];let c="",p=0;const _=()=>{if(0===c.length)throw new un(Bt.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(c),c=""};let w=!1;for(;p<e.length;){const N=e[p];if("\\"===N){if(p+1===e.length)throw new un(Bt.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const te=e[p+1];if("\\"!==te&&"."!==te&&"`"!==te)throw new un(Bt.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);c+=te,p+=2}else"`"===N?(w=!w,p++):"."!==N||w?(c+=N,p++):(_(),p++)}if(_(),w)throw new un(Bt.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new _s(n)}static emptyPath(){return new _s([])}}class Mn{constructor(e){this.path=e}static fromPath(e){return new Mn(Ur.fromString(e))}static fromName(e){return new Mn(Ur.fromString(e).popFirst(5))}static empty(){return new Mn(Ur.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===Ur.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,n){return Ur.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Mn(new Ur(e.slice()))}}class al{constructor(e,n,c,p){this.indexId=e,this.collectionGroup=n,this.fields=c,this.indexState=p}}function Nu(a){return a.fields.find(e=>2===e.kind)}function $o(a){return a.fields.filter(e=>2!==e.kind)}al.UNKNOWN_ID=-1;class Vl{constructor(e,n){this.fieldPath=e,this.kind=n}}class ul{constructor(e,n){this.sequenceNumber=e,this.offset=n}static empty(){return new ul(0,xs.min())}}function lc(a,e){const n=a.toTimestamp().seconds,c=a.toTimestamp().nanoseconds+1,p=ur.fromTimestamp(1e9===c?new zi(n+1,0):new zi(n,c));return new xs(p,Mn.empty(),e)}function _u(a){return new xs(a.readTime,a.key,-1)}class xs{constructor(e,n,c){this.readTime=e,this.documentKey=n,this.largestBatchId=c}static min(){return new xs(ur.min(),Mn.empty(),-1)}static max(){return new xs(ur.max(),Mn.empty(),-1)}}function cu(a,e){let n=a.readTime.compareTo(e.readTime);return 0!==n?n:(n=Mn.comparator(a.documentKey,e.documentKey),0!==n?n:Mr(a.largestBatchId,e.largestBatchId))}const bo="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Al{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function Ka(a){return Ku.apply(this,arguments)}function Ku(){return Ku=(0,Fe.Z)(function*(a){if(a.code!==Bt.FAILED_PRECONDITION||a.message!==bo)throw a;Kt("LocalStore","Unexpectedly lost primary lease")}),Ku.apply(this,arguments)}class Lt{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Fn(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new Lt((c,p)=>{this.nextCallback=_=>{this.wrapSuccess(e,_).next(c,p)},this.catchCallback=_=>{this.wrapFailure(n,_).next(c,p)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof Lt?n:Lt.resolve(n)}catch(n){return Lt.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):Lt.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):Lt.reject(n)}static resolve(e){return new Lt((n,c)=>{n(e)})}static reject(e){return new Lt((n,c)=>{c(e)})}static waitFor(e){return new Lt((n,c)=>{let p=0,_=0,w=!1;e.forEach(N=>{++p,N.next(()=>{++_,w&&_===p&&n()},te=>c(te))}),w=!0,_===p&&n()})}static or(e){let n=Lt.resolve(!1);for(const c of e)n=n.next(p=>p?Lt.resolve(p):c());return n}static forEach(e,n){const c=[];return e.forEach((p,_)=>{c.push(n.call(this,p,_))}),this.waitFor(c)}static mapArray(e,n){return new Lt((c,p)=>{const _=e.length,w=new Array(_);let N=0;for(let te=0;te<_;te++){const ce=te;n(e[ce]).next(Ae=>{w[ce]=Ae,++N,N===_&&c(w)},Ae=>p(Ae))}})}static doWhile(e,n){return new Lt((c,p)=>{const _=()=>{!0===e()?n().next(()=>{_()},p):c()};_()})}}class Oc{constructor(e,n){this.action=e,this.transaction=n,this.aborted=!1,this.v=new Oi,this.transaction.oncomplete=()=>{this.v.resolve()},this.transaction.onabort=()=>{n.error?this.v.reject(new Gs(e,n.error)):this.v.resolve()},this.transaction.onerror=c=>{const p=Eo(c.target.error);this.v.reject(new Gs(e,p))}}static open(e,n,c,p){try{return new Oc(n,e.transaction(p,c))}catch(_){throw new Gs(n,_)}}get P(){return this.v.promise}abort(e){e&&this.v.reject(e),this.aborted||(Kt("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}V(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const n=this.transaction.objectStore(e);return new cc(n)}}class Za{constructor(e,n,c){this.name=e,this.version=n,this.S=c,12.2===Za.D((0,St.z$)())&&si("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Kt("SimpleDb","Removing database:",e),Pl(window.indexedDB.deleteDatabase(e)).toPromise()}static C(){if(!(0,St.hl)())return!1;if(Za.N())return!0;const e=(0,St.z$)(),n=Za.D(e),c=0<n&&n<10,p=Za.k(e),_=0<p&&p<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||c||_)}static N(){var e;return typeof process<"u"&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.O)}static M(e,n){return e.store(n)}static D(e){const n=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),c=n?n[1].split("_").slice(0,2).join("."):"-1";return Number(c)}static k(e){const n=e.match(/Android ([\d.]+)/i),c=n?n[1].split(".").slice(0,2).join("."):"-1";return Number(c)}F(e){var n=this;return(0,Fe.Z)(function*(){return n.db||(Kt("SimpleDb","Opening database:",n.name),n.db=yield new Promise((c,p)=>{const _=indexedDB.open(n.name,n.version);_.onsuccess=w=>{c(w.target.result)},_.onblocked=()=>{p(new Gs(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},_.onerror=w=>{const N=w.target.error;p("VersionError"===N.name?new un(Bt.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===N.name?new un(Bt.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+N):new Gs(e,N))},_.onupgradeneeded=w=>{Kt("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',w.oldVersion),n.S.$(w.target.result,_.transaction,w.oldVersion,n.version).next(()=>{Kt("SimpleDb","Database upgrade to version "+n.version+" complete")})}})),n.B&&(n.db.onversionchange=c=>n.B(c)),n.db})()}L(e){this.B=e,this.db&&(this.db.onversionchange=n=>e(n))}runTransaction(e,n,c,p){var _=this;return(0,Fe.Z)(function*(){const w="readonly"===n;let N=0;for(;;){++N;try{_.db=yield _.F(e);const te=Oc.open(_.db,e,w?"readonly":"readwrite",c),ce=p(te).next(Ae=>(te.V(),Ae)).catch(Ae=>(te.abort(Ae),Lt.reject(Ae))).toPromise();return ce.catch(()=>{}),yield te.P,ce}catch(te){const ce=te,Ae="FirebaseError"!==ce.name&&N<3;if(Kt("SimpleDb","Transaction failed with error:",ce.message,"Retrying:",Ae),_.close(),!Ae)return Promise.reject(ce)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class fi{constructor(e){this.q=e,this.U=!1,this.K=null}get isDone(){return this.U}get G(){return this.K}set cursor(e){this.q=e}done(){this.U=!0}j(e){this.K=e}delete(){return Pl(this.q.delete())}}class Gs extends un{constructor(e,n){super(Bt.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${n}`),this.name="IndexedDbTransactionError"}}function Ya(a){return"IndexedDbTransactionError"===a.name}class cc{constructor(e){this.store=e}put(e,n){let c;return void 0!==n?(Kt("SimpleDb","PUT",this.store.name,e,n),c=this.store.put(n,e)):(Kt("SimpleDb","PUT",this.store.name,"<auto-key>",e),c=this.store.put(e)),Pl(c)}add(e){return Kt("SimpleDb","ADD",this.store.name,e,e),Pl(this.store.add(e))}get(e){return Pl(this.store.get(e)).next(n=>(void 0===n&&(n=null),Kt("SimpleDb","GET",this.store.name,e,n),n))}delete(e){return Kt("SimpleDb","DELETE",this.store.name,e),Pl(this.store.delete(e))}count(){return Kt("SimpleDb","COUNT",this.store.name),Pl(this.store.count())}W(e,n){const c=this.options(e,n);if(c.index||"function"!=typeof this.store.getAll){const p=this.cursor(c),_=[];return this.H(p,(w,N)=>{_.push(N)}).next(()=>_)}{const p=this.store.getAll(c.range);return new Lt((_,w)=>{p.onerror=N=>{w(N.target.error)},p.onsuccess=N=>{_(N.target.result)}})}}J(e,n){const c=this.store.getAll(e,null===n?void 0:n);return new Lt((p,_)=>{c.onerror=w=>{_(w.target.error)},c.onsuccess=w=>{p(w.target.result)}})}Y(e,n){Kt("SimpleDb","DELETE ALL",this.store.name);const c=this.options(e,n);c.Z=!1;const p=this.cursor(c);return this.H(p,(_,w,N)=>N.delete())}X(e,n){let c;n?c=e:(c={},n=e);const p=this.cursor(c);return this.H(p,n)}tt(e){const n=this.cursor({});return new Lt((c,p)=>{n.onerror=_=>{const w=Eo(_.target.error);p(w)},n.onsuccess=_=>{const w=_.target.result;w?e(w.primaryKey,w.value).next(N=>{N?w.continue():c()}):c()}})}H(e,n){const c=[];return new Lt((p,_)=>{e.onerror=w=>{_(w.target.error)},e.onsuccess=w=>{const N=w.target.result;if(!N)return void p();const te=new fi(N),ce=n(N.primaryKey,N.value,te);if(ce instanceof Lt){const Ae=ce.catch(rt=>(te.done(),Lt.reject(rt)));c.push(Ae)}te.isDone?p():null===te.G?N.continue():N.continue(te.G)}}).next(()=>Lt.waitFor(c))}options(e,n){let c;return void 0!==e&&("string"==typeof e?c=e:n=e),{index:c,range:n}}cursor(e){let n="next";if(e.reverse&&(n="prev"),e.index){const c=this.store.index(e.index);return e.Z?c.openKeyCursor(e.range,n):c.openCursor(e.range,n)}return this.store.openCursor(e.range,n)}}function Pl(a){return new Lt((e,n)=>{a.onsuccess=c=>{e(c.target.result)},a.onerror=c=>{const p=Eo(c.target.error);n(p)}})}let fd=!1;function Eo(a){const e=Za.D((0,St.z$)());if(e>=12.2&&e<13){const n="An internal error was encountered in the Indexed Database server";if(a.message.indexOf(n)>=0){const c=new un("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${n}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return fd||(fd=!0,setTimeout(()=>{throw c},0)),c}}return a}class Ds{constructor(e,n){this.asyncQueue=e,this.et=n,this.task=null}start(){this.nt(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}nt(e){var n=this;Kt("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,Fe.Z)(function*(){n.task=null;try{Kt("IndexBackiller",`Documents written: ${yield n.et.st()}`)}catch(c){Ya(c)?Kt("IndexBackiller","Ignoring IndexedDB error during index backfill: ",c):yield Ka(c)}yield n.nt(6e4)}))}}class ka{constructor(e,n){this.localStore=e,this.persistence=n}st(e=50){var n=this;return(0,Fe.Z)(function*(){return n.persistence.runTransaction("Backfill Indexes","readwrite-primary",c=>n.it(c,e))})()}it(e,n){const c=new Set;let p=n,_=!0;return Lt.doWhile(()=>!0===_&&p>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(w=>{if(null!==w&&!c.has(w))return Kt("IndexBackiller",`Processing collection: ${w}`),this.rt(e,w,p).next(N=>{p-=N,c.add(w)});_=!1})).next(()=>n-p)}rt(e,n,c){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,n).next(p=>this.localStore.localDocuments.getNextDocuments(e,n,p,c).next(_=>{const w=_.changes;return this.localStore.indexManager.updateIndexEntries(e,w).next(()=>this.ot(p,_)).next(N=>(Kt("IndexBackiller",`Updating offset: ${N}`),this.localStore.indexManager.updateCollectionGroup(e,n,N))).next(()=>w.size)}))}ot(e,n){let c=e;return n.changes.forEach((p,_)=>{const w=_u(_);cu(w,c)>0&&(c=w)}),new xs(c.readTime,c.documentKey,Math.max(n.batchId,e.largestBatchId))}}let ya=(()=>{class a{constructor(n,c){this.previousValue=n,c&&(c.sequenceNumberHandler=p=>this.ut(p),this.ct=p=>c.writeSequenceNumber(p))}ut(n){return this.previousValue=Math.max(n,this.previousValue),this.previousValue}next(){const n=++this.previousValue;return this.ct&&this.ct(n),n}}return a.at=-1,a})();class Ra{constructor(e,n,c,p,_,w,N,te){this.databaseId=e,this.appId=n,this.persistenceKey=c,this.host=p,this.ssl=_,this.forceLongPolling=w,this.autoDetectLongPolling=N,this.useFetchStreams=te}}class Tu{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new Tu("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Tu&&e.projectId===this.projectId&&e.database===this.database}}function zo(a){let e=0;for(const n in a)Object.prototype.hasOwnProperty.call(a,n)&&e++;return e}function co(a,e){for(const n in a)Object.prototype.hasOwnProperty.call(a,n)&&e(n,a[n])}function Yu(a){for(const e in a)if(Object.prototype.hasOwnProperty.call(a,e))return!1;return!0}function du(a){return null==a}function Qa(a){return 0===a&&1/a==-1/0}function P(a){return"number"==typeof a&&Number.isInteger(a)&&!Qa(a)&&a<=Number.MAX_SAFE_INTEGER&&a>=Number.MIN_SAFE_INTEGER}class R extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class B{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(c){try{return atob(c)}catch(p){throw p instanceof DOMException?new R("Invalid base64 string: "+p):p}}(e);return new B(n)}static fromUint8Array(e){const n=function(c){let p="";for(let _=0;_<c.length;++_)p+=String.fromCharCode(c[_]);return p}(e);return new B(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const n=new Uint8Array(e.length);for(let c=0;c<e.length;c++)n[c]=e.charCodeAt(c);return n}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Mr(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}B.EMPTY_BYTE_STRING=new B("");const Q=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function pe(a){if(Vn(!!a),"string"==typeof a){let e=0;const n=Q.exec(a);if(Vn(!!n),n[1]){let p=n[1];p=(p+"000000000").substr(0,9),e=Number(p)}const c=new Date(a);return{seconds:Math.floor(c.getTime()/1e3),nanos:e}}return{seconds:ve(a.seconds),nanos:ve(a.nanos)}}function ve(a){return"number"==typeof a?a:"string"==typeof a?Number(a):0}function _t(a){return"string"==typeof a?B.fromBase64String(a):B.fromUint8Array(a)}function Wt(a){var e,n;return"server_timestamp"===(null===(n=((null===(e=a?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function zn(a){const e=a.mapValue.fields.__previous_value__;return Wt(e)?zn(e):e}function jn(a){const e=pe(a.mapValue.fields.__local_write_time__.timestampValue);return new zi(e.seconds,e.nanos)}const ui={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Wi={nullValue:"NULL_VALUE"};function dn(a){return"nullValue"in a?0:"booleanValue"in a?1:"integerValue"in a||"doubleValue"in a?2:"timestampValue"in a?3:"stringValue"in a?5:"bytesValue"in a?6:"referenceValue"in a?7:"geoPointValue"in a?8:"arrayValue"in a?9:"mapValue"in a?Wt(a)?4:_r(a)?9007199254740991:10:Fn()}function So(a,e){if(a===e)return!0;const n=dn(a);if(n!==dn(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return a.booleanValue===e.booleanValue;case 4:return jn(a).isEqual(jn(e));case 3:return function(c,p){if("string"==typeof c.timestampValue&&"string"==typeof p.timestampValue&&c.timestampValue.length===p.timestampValue.length)return c.timestampValue===p.timestampValue;const _=pe(c.timestampValue),w=pe(p.timestampValue);return _.seconds===w.seconds&&_.nanos===w.nanos}(a,e);case 5:return a.stringValue===e.stringValue;case 6:return p=e,_t(a.bytesValue).isEqual(_t(p.bytesValue));case 7:return a.referenceValue===e.referenceValue;case 8:return function(c,p){return ve(c.geoPointValue.latitude)===ve(p.geoPointValue.latitude)&&ve(c.geoPointValue.longitude)===ve(p.geoPointValue.longitude)}(a,e);case 2:return function(c,p){if("integerValue"in c&&"integerValue"in p)return ve(c.integerValue)===ve(p.integerValue);if("doubleValue"in c&&"doubleValue"in p){const _=ve(c.doubleValue),w=ve(p.doubleValue);return _===w?Qa(_)===Qa(w):isNaN(_)&&isNaN(w)}return!1}(a,e);case 9:return Ru(a.arrayValue.values||[],e.arrayValue.values||[],So);case 10:return function(c,p){const _=c.mapValue.fields||{},w=p.mapValue.fields||{};if(zo(_)!==zo(w))return!1;for(const N in _)if(_.hasOwnProperty(N)&&(void 0===w[N]||!So(_[N],w[N])))return!1;return!0}(a,e);default:return Fn()}var p}function Qo(a,e){return void 0!==(a.values||[]).find(n=>So(n,e))}function Fs(a,e){if(a===e)return 0;const n=dn(a),c=dn(e);if(n!==c)return Mr(n,c);switch(n){case 0:case 9007199254740991:return 0;case 1:return Mr(a.booleanValue,e.booleanValue);case 2:return function(p,_){const w=ve(p.integerValue||p.doubleValue),N=ve(_.integerValue||_.doubleValue);return w<N?-1:w>N?1:w===N?0:isNaN(w)?isNaN(N)?0:-1:1}(a,e);case 3:return Lu(a.timestampValue,e.timestampValue);case 4:return Lu(jn(a),jn(e));case 5:return Mr(a.stringValue,e.stringValue);case 6:return function(p,_){const w=_t(p),N=_t(_);return w.compareTo(N)}(a.bytesValue,e.bytesValue);case 7:return function(p,_){const w=p.split("/"),N=_.split("/");for(let te=0;te<w.length&&te<N.length;te++){const ce=Mr(w[te],N[te]);if(0!==ce)return ce}return Mr(w.length,N.length)}(a.referenceValue,e.referenceValue);case 8:return function(p,_){const w=Mr(ve(p.latitude),ve(_.latitude));return 0!==w?w:Mr(ve(p.longitude),ve(_.longitude))}(a.geoPointValue,e.geoPointValue);case 9:return function(p,_){const w=p.values||[],N=_.values||[];for(let te=0;te<w.length&&te<N.length;++te){const ce=Fs(w[te],N[te]);if(ce)return ce}return Mr(w.length,N.length)}(a.arrayValue,e.arrayValue);case 10:return function(p,_){if(p===ui.mapValue&&_===ui.mapValue)return 0;if(p===ui.mapValue)return 1;if(_===ui.mapValue)return-1;const w=p.fields||{},N=Object.keys(w),te=_.fields||{},ce=Object.keys(te);N.sort(),ce.sort();for(let Ae=0;Ae<N.length&&Ae<ce.length;++Ae){const rt=Mr(N[Ae],ce[Ae]);if(0!==rt)return rt;const kt=Fs(w[N[Ae]],te[ce[Ae]]);if(0!==kt)return kt}return Mr(N.length,ce.length)}(a.mapValue,e.mapValue);default:throw Fn()}}function Lu(a,e){if("string"==typeof a&&"string"==typeof e&&a.length===e.length)return Mr(a,e);const n=pe(a),c=pe(e),p=Mr(n.seconds,c.seconds);return 0!==p?p:Mr(n.nanos,c.nanos)}function Xa(a){return z(a)}function z(a){return"nullValue"in a?"null":"booleanValue"in a?""+a.booleanValue:"integerValue"in a?""+a.integerValue:"doubleValue"in a?""+a.doubleValue:"timestampValue"in a?function(c){const p=pe(c);return`time(${p.seconds},${p.nanos})`}(a.timestampValue):"stringValue"in a?a.stringValue:"bytesValue"in a?_t(a.bytesValue).toBase64():"referenceValue"in a?Mn.fromName(a.referenceValue).toString():"geoPointValue"in a?`geo(${(e=a.geoPointValue).latitude},${e.longitude})`:"arrayValue"in a?function(c){let p="[",_=!0;for(const w of c.values||[])_?_=!1:p+=",",p+=z(w);return p+"]"}(a.arrayValue):"mapValue"in a?function(c){const p=Object.keys(c.fields||{}).sort();let _="{",w=!0;for(const N of p)w?w=!1:_+=",",_+=`${N}:${z(c.fields[N])}`;return _+"}"}(a.mapValue):Fn();var e}function X(a,e){return{referenceValue:`projects/${a.projectId}/databases/${a.database}/documents/${e.path.canonicalString()}`}}function _e(a){return!!a&&"integerValue"in a}function $e(a){return!!a&&"arrayValue"in a}function It(a){return!!a&&"nullValue"in a}function Vt(a){return!!a&&"doubleValue"in a&&isNaN(Number(a.doubleValue))}function vn(a){return!!a&&"mapValue"in a}function ir(a){if(a.geoPointValue)return{geoPointValue:Object.assign({},a.geoPointValue)};if(a.timestampValue&&"object"==typeof a.timestampValue)return{timestampValue:Object.assign({},a.timestampValue)};if(a.mapValue){const e={mapValue:{fields:{}}};return co(a.mapValue.fields,(n,c)=>e.mapValue.fields[n]=ir(c)),e}if(a.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(a.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=ir(a.arrayValue.values[n]);return e}return Object.assign({},a)}function _r(a){return"__max__"===(((a.mapValue||{}).fields||{}).__type__||{}).stringValue}function hr(a){return"nullValue"in a?Wi:"booleanValue"in a?{booleanValue:!1}:"integerValue"in a||"doubleValue"in a?{doubleValue:NaN}:"timestampValue"in a?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in a?{stringValue:""}:"bytesValue"in a?{bytesValue:""}:"referenceValue"in a?X(Tu.empty(),Mn.empty()):"geoPointValue"in a?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in a?{arrayValue:{}}:"mapValue"in a?{mapValue:{}}:Fn()}function Yr(a){return"nullValue"in a?{booleanValue:!1}:"booleanValue"in a?{doubleValue:NaN}:"integerValue"in a||"doubleValue"in a?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in a?{stringValue:""}:"stringValue"in a?{bytesValue:""}:"bytesValue"in a?X(Tu.empty(),Mn.empty()):"referenceValue"in a?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in a?{arrayValue:{}}:"arrayValue"in a?{mapValue:{}}:"mapValue"in a?ui:Fn()}function Qr(a,e){const n=Fs(a.value,e.value);return 0!==n?n:a.inclusive&&!e.inclusive?-1:!a.inclusive&&e.inclusive?1:0}function _a(a,e){const n=Fs(a.value,e.value);return 0!==n?n:a.inclusive&&!e.inclusive?1:!a.inclusive&&e.inclusive?-1:0}class $s{constructor(e,n){this.position=e,this.inclusive=n}}function Ml(a,e,n){let c=0;for(let p=0;p<a.position.length;p++){const _=e[p],w=a.position[p];if(c=_.field.isKeyField()?Mn.comparator(Mn.fromName(w.referenceValue),n.key):Fs(w,n.data.field(_.field)),"desc"===_.dir&&(c*=-1),0!==c)break}return c}function pd(a,e){if(null===a)return null===e;if(null===e||a.inclusive!==e.inclusive||a.position.length!==e.position.length)return!1;for(let n=0;n<a.position.length;n++)if(!So(a.position[n],e.position[n]))return!1;return!0}class Ol{}class ei extends Ol{constructor(e,n,c){super(),this.field=e,this.op=n,this.value=c}static create(e,n,c){return e.isKeyField()?"in"===n||"not-in"===n?this.createKeyFieldInFilter(e,n,c):new rf(e,n,c):"array-contains"===n?new kc(e,c):"in"===n?new pg(e,c):"not-in"===n?new Om(e,c):"array-contains-any"===n?new km(e,c):new ei(e,n,c)}static createKeyFieldInFilter(e,n,c){return"in"===n?new md(e,c):new Mm(e,c)}matches(e){const n=e.data.field(this.field);return"!="===this.op?null!==n&&this.matchesComparison(Fs(n,this.value)):null!==n&&dn(this.value)===dn(n)&&this.matchesComparison(Fs(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return Fn()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class Si extends Ol{constructor(e,n){super(),this.filters=e,this.op=n,this.ft=null}static create(e,n){return new Si(e,n)}matches(e){return bu(this)?void 0===this.filters.find(n=>!n.matches(e)):void 0!==this.filters.find(n=>n.matches(e))}getFlattenedFilters(){return null!==this.ft||(this.ft=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ft}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const e=this.dt(n=>n.isInequality());return null!==e?e.field:null}dt(e){for(const n of this.getFlattenedFilters())if(e(n))return n;return null}}function bu(a){return"and"===a.op}function tf(a){return"or"===a.op}function op(a){return nf(a)&&bu(a)}function nf(a){for(const e of a.filters)if(e instanceof Si)return!1;return!0}function gd(a){if(a instanceof ei)return a.field.canonicalString()+a.op.toString()+Xa(a.value);if(op(a))return a.filters.map(e=>gd(e)).join(",");{const e=a.filters.map(n=>gd(n)).join(",");return`${a.op}(${e})`}}function ih(a,e){return a instanceof ei?(n=a,(c=e)instanceof ei&&n.op===c.op&&n.field.isEqual(c.field)&&So(n.value,c.value)):a instanceof Si?function(n,c){return c instanceof Si&&n.op===c.op&&n.filters.length===c.filters.length&&n.filters.reduce((p,_,w)=>p&&ih(_,c.filters[w]),!0)}(a,e):void Fn();var n,c}function hg(a,e){const n=a.filters.concat(e);return Si.create(n,a.op)}function sh(a){return a instanceof ei?`${(e=a).field.canonicalString()} ${e.op} ${Xa(e.value)}`:a instanceof Si?function(e){return e.op.toString()+" {"+e.getFilters().map(sh).join(" ,")+"}"}(a):"Filter";var e}class rf extends ei{constructor(e,n,c){super(e,n,c),this.key=Mn.fromName(c.referenceValue)}matches(e){const n=Mn.comparator(e.key,this.key);return this.matchesComparison(n)}}class md extends ei{constructor(e,n){super(e,"in",n),this.keys=fg(0,n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class Mm extends ei{constructor(e,n){super(e,"not-in",n),this.keys=fg(0,n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function fg(a,e){var n;return((null===(n=e.arrayValue)||void 0===n?void 0:n.values)||[]).map(c=>Mn.fromName(c.referenceValue))}class kc extends ei{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return $e(n)&&Qo(n.arrayValue,this.value)}}class pg extends ei{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return null!==n&&Qo(this.value.arrayValue,n)}}class Om extends ei{constructor(e,n){super(e,"not-in",n)}matches(e){if(Qo(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return null!==n&&!Qo(this.value.arrayValue,n)}}class km extends ei{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!$e(n)||!n.arrayValue.values)&&n.arrayValue.values.some(c=>Qo(this.value.arrayValue,c))}}class oh{constructor(e,n="asc"){this.field=e,this.dir=n}}function Rm(a,e){return a.dir===e.dir&&a.field.isEqual(e.field)}class ho{constructor(e,n){this.comparator=e,this.root=n||Ts.EMPTY}insert(e,n){return new ho(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Ts.BLACK,null,null))}remove(e){return new ho(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Ts.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const c=this.comparator(e,n.key);if(0===c)return n.value;c<0?n=n.left:c>0&&(n=n.right)}return null}indexOf(e){let n=0,c=this.root;for(;!c.isEmpty();){const p=this.comparator(e,c.key);if(0===p)return n+c.left.size;p<0?c=c.left:(n+=c.left.size+1,c=c.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,c)=>(e(n,c),!1))}toString(){const e=[];return this.inorderTraversal((n,c)=>(e.push(`${n}:${c}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new kl(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new kl(this.root,e,this.comparator,!1)}getReverseIterator(){return new kl(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new kl(this.root,e,this.comparator,!0)}}class kl{constructor(e,n,c,p){this.isReverse=p,this.nodeStack=[];let _=1;for(;!e.isEmpty();)if(_=n?c(e.key,n):1,n&&p&&(_*=-1),_<0)e=this.isReverse?e.left:e.right;else{if(0===_){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Ts{constructor(e,n,c,p,_){this.key=e,this.value=n,this.color=c??Ts.RED,this.left=p??Ts.EMPTY,this.right=_??Ts.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,c,p,_){return new Ts(e??this.key,n??this.value,c??this.color,p??this.left,_??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,c){let p=this;const _=c(e,p.key);return p=_<0?p.copy(null,null,null,p.left.insert(e,n,c),null):0===_?p.copy(null,n,null,null,null):p.copy(null,null,null,null,p.right.insert(e,n,c)),p.fixUp()}removeMin(){if(this.left.isEmpty())return Ts.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let c,p=this;if(n(e,p.key)<0)p.left.isEmpty()||p.left.isRed()||p.left.left.isRed()||(p=p.moveRedLeft()),p=p.copy(null,null,null,p.left.remove(e,n),null);else{if(p.left.isRed()&&(p=p.rotateRight()),p.right.isEmpty()||p.right.isRed()||p.right.left.isRed()||(p=p.moveRedRight()),0===n(e,p.key)){if(p.right.isEmpty())return Ts.EMPTY;c=p.right.min(),p=p.copy(c.key,c.value,null,null,p.right.removeMin())}p=p.copy(null,null,null,null,p.right.remove(e,n))}return p.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Ts.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Ts.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Fn();const e=this.left.check();if(e!==this.right.check())throw Fn();return e+(this.isRed()?0:1)}}Ts.EMPTY=null,Ts.RED=!0,Ts.BLACK=!1,Ts.EMPTY=new class{constructor(){this.size=0}get key(){throw Fn()}get value(){throw Fn()}get color(){throw Fn()}get left(){throw Fn()}get right(){throw Fn()}copy(a,e,n,c,p){return this}insert(a,e,n){return new Ts(a,e)}remove(a,e){return this}isEmpty(){return!0}inorderTraversal(a){return!1}reverseTraversal(a){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class es{constructor(e){this.comparator=e,this.data=new ho(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,c)=>(e(n),!1))}forEachInRange(e,n){const c=this.data.getIteratorFrom(e[0]);for(;c.hasNext();){const p=c.getNext();if(this.comparator(p.key,e[1])>=0)return;n(p.key)}}forEachWhile(e,n){let c;for(c=void 0!==n?this.data.getIteratorFrom(n):this.data.getIterator();c.hasNext();)if(!e(c.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Na(this.data.getIterator())}getIteratorFrom(e){return new Na(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(c=>{n=n.add(c)}),n}isEqual(e){if(!(e instanceof es)||this.size!==e.size)return!1;const n=this.data.getIterator(),c=e.data.getIterator();for(;n.hasNext();){const p=n.getNext().key,_=c.getNext().key;if(0!==this.comparator(p,_))return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new es(this.comparator);return n.data=e,n}}class Na{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Rc(a){return a.hasNext()?a.getNext():void 0}class Zr{constructor(e){this.fields=e,e.sort(_s.comparator)}static empty(){return new Zr([])}unionWith(e){let n=new es(_s.comparator);for(const c of this.fields)n=n.add(c);for(const c of e)n=n.add(c);return new Zr(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Ru(this.fields,e.fields,(n,c)=>n.isEqual(c))}}class fo{constructor(e){this.value=e}static empty(){return new fo({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let c=0;c<e.length-1;++c)if(n=(n.mapValue.fields||{})[e.get(c)],!vn(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=ir(n)}setAll(e){let n=_s.emptyPath(),c={},p=[];e.forEach((w,N)=>{if(!n.isImmediateParentOf(N)){const te=this.getFieldsMap(n);this.applyChanges(te,c,p),c={},p=[],n=N.popLast()}w?c[N.lastSegment()]=ir(w):p.push(N.lastSegment())});const _=this.getFieldsMap(n);this.applyChanges(_,c,p)}delete(e){const n=this.field(e.popLast());vn(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return So(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let c=0;c<e.length;++c){let p=n.mapValue.fields[e.get(c)];vn(p)&&p.mapValue.fields||(p={mapValue:{fields:{}}},n.mapValue.fields[e.get(c)]=p),n=p}return n.mapValue.fields}applyChanges(e,n,c){co(n,(p,_)=>e[p]=_);for(const p of c)delete e[p]}clone(){return new fo(ir(this.value))}}function sf(a){const e=[];return co(a.fields,(n,c)=>{const p=new _s([n]);if(vn(c)){const _=sf(c.mapValue).fields;if(0===_.length)e.push(p);else for(const w of _)e.push(p.child(w))}else e.push(p)}),new Zr(e)}class js{constructor(e,n,c,p,_,w,N){this.key=e,this.documentType=n,this.version=c,this.readTime=p,this.createTime=_,this.data=w,this.documentState=N}static newInvalidDocument(e){return new js(e,0,ur.min(),ur.min(),ur.min(),fo.empty(),0)}static newFoundDocument(e,n,c,p){return new js(e,1,n,ur.min(),c,p,0)}static newNoDocument(e,n){return new js(e,2,n,ur.min(),ur.min(),fo.empty(),0)}static newUnknownDocument(e,n){return new js(e,3,n,ur.min(),ur.min(),fo.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(ur.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=fo.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=fo.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ur.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof js&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new js(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class gg{constructor(e,n=null,c=[],p=[],_=null,w=null,N=null){this.path=e,this.collectionGroup=n,this.orderBy=c,this.filters=p,this.limit=_,this.startAt=w,this.endAt=N,this._t=null}}function Nc(a,e=null,n=[],c=[],p=null,_=null,w=null){return new gg(a,e,n,c,p,_,w)}function Lc(a){const e=Cn(a);if(null===e._t){let n=e.path.canonicalString();null!==e.collectionGroup&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(c=>gd(c)).join(","),n+="|ob:",n+=e.orderBy.map(c=>{return(p=c).field.canonicalString()+p.dir;var p}).join(","),du(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(c=>Xa(c)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(c=>Xa(c)).join(",")),e._t=n}return e._t}function Fc(a,e){if(a.limit!==e.limit||a.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<a.orderBy.length;n++)if(!Rm(a.orderBy[n],e.orderBy[n]))return!1;if(a.filters.length!==e.filters.length)return!1;for(let n=0;n<a.filters.length;n++)if(!ih(a.filters[n],e.filters[n]))return!1;return a.collectionGroup===e.collectionGroup&&!!a.path.isEqual(e.path)&&!!pd(a.startAt,e.startAt)&&pd(a.endAt,e.endAt)}function af(a){return Mn.isDocumentKey(a.path)&&null===a.collectionGroup&&0===a.filters.length}function jc(a,e){return a.filters.filter(n=>n instanceof ei&&n.field.isEqual(e))}function mg(a,e,n){let c=Wi,p=!0;for(const _ of jc(a,e)){let w=Wi,N=!0;switch(_.op){case"<":case"<=":w=hr(_.value);break;case"==":case"in":case">=":w=_.value;break;case">":w=_.value,N=!1;break;case"!=":case"not-in":w=Wi}Qr({value:c,inclusive:p},{value:w,inclusive:N})<0&&(c=w,p=N)}if(null!==n)for(let _=0;_<a.orderBy.length;++_)if(a.orderBy[_].field.isEqual(e)){const w=n.position[_];Qr({value:c,inclusive:p},{value:w,inclusive:n.inclusive})<0&&(c=w,p=n.inclusive);break}return{value:c,inclusive:p}}function uf(a,e,n){let c=ui,p=!0;for(const _ of jc(a,e)){let w=ui,N=!0;switch(_.op){case">=":case">":w=Yr(_.value),N=!1;break;case"==":case"in":case"<=":w=_.value;break;case"<":w=_.value,N=!1;break;case"!=":case"not-in":w=ui}_a({value:c,inclusive:p},{value:w,inclusive:N})>0&&(c=w,p=N)}if(null!==n)for(let _=0;_<a.orderBy.length;++_)if(a.orderBy[_].field.isEqual(e)){const w=n.position[_];_a({value:c,inclusive:p},{value:w,inclusive:n.inclusive})>0&&(c=w,p=n.inclusive);break}return{value:c,inclusive:p}}class wo{constructor(e,n=null,c=[],p=[],_=null,w="F",N=null,te=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=c,this.filters=p,this.limit=_,this.limitType=w,this.startAt=N,this.endAt=te,this.wt=null,this.gt=null}}function Uc(a,e,n,c,p,_,w,N){return new wo(a,e,n,c,p,_,w,N)}function dc(a){return new wo(a)}function lf(a){return 0===a.filters.length&&null===a.limit&&null==a.startAt&&null==a.endAt&&(0===a.explicitOrderBy.length||1===a.explicitOrderBy.length&&a.explicitOrderBy[0].field.isKeyField())}function Ta(a){return a.explicitOrderBy.length>0?a.explicitOrderBy[0].field:null}function Eu(a){for(const e of a.filters){const n=e.getFirstInequalityField();if(null!==n)return n}return null}function cf(a){return null!==a.collectionGroup}function ll(a){const e=Cn(a);if(null===e.wt){e.wt=[];const n=Eu(e),c=Ta(e);if(null!==n&&null===c)n.isKeyField()||e.wt.push(new oh(n)),e.wt.push(new oh(_s.keyField(),"asc"));else{let p=!1;for(const _ of e.explicitOrderBy)e.wt.push(_),_.field.isKeyField()&&(p=!0);if(!p){const _=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.wt.push(new oh(_s.keyField(),_))}}}return e.wt}function Ja(a){const e=Cn(a);if(!e.gt)if("F"===e.limitType)e.gt=Nc(e.path,e.collectionGroup,ll(e),e.filters,e.limit,e.startAt,e.endAt);else{const n=[];for(const _ of ll(e))n.push(new oh(_.field,"desc"===_.dir?"asc":"desc"));const c=e.endAt?new $s(e.endAt.position,e.endAt.inclusive):null,p=e.startAt?new $s(e.startAt.position,e.startAt.inclusive):null;e.gt=Nc(e.path,e.collectionGroup,n,e.filters,e.limit,c,p)}return e.gt}function df(a,e){e.getFirstInequalityField(),Eu(a);const n=a.filters.concat([e]);return new wo(a.path,a.collectionGroup,a.explicitOrderBy.slice(),n,a.limit,a.limitType,a.startAt,a.endAt)}function hf(a,e,n){return new wo(a.path,a.collectionGroup,a.explicitOrderBy.slice(),a.filters.slice(),e,n,a.startAt,a.endAt)}function Qu(a,e){return Fc(Ja(a),Ja(e))&&a.limitType===e.limitType}function ah(a){return`${Lc(Ja(a))}|lt:${a.limitType}`}function ff(a){return`Query(target=${function(e){let n=e.path.canonicalString();return null!==e.collectionGroup&&(n+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(n+=`, filters: [${e.filters.map(c=>sh(c)).join(", ")}]`),du(e.limit)||(n+=", limit: "+e.limit),e.orderBy.length>0&&(n+=`, orderBy: [${e.orderBy.map(c=>{return`${(p=c).field.canonicalString()} (${p.dir})`;var p}).join(", ")}]`),e.startAt&&(n+=", startAt: ",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(c=>Xa(c)).join(",")),e.endAt&&(n+=", endAt: ",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(c=>Xa(c)).join(",")),`Target(${n})`}(Ja(a))}; limitType=${a.limitType})`}function ba(a,e){return e.isFoundDocument()&&function(n,c){const p=c.key.path;return null!==n.collectionGroup?c.key.hasCollectionId(n.collectionGroup)&&n.path.isPrefixOf(p):Mn.isDocumentKey(n.path)?n.path.isEqual(p):n.path.isImmediateParentOf(p)}(a,e)&&function(n,c){for(const p of ll(n))if(!p.field.isKeyField()&&null===c.data.field(p.field))return!1;return!0}(a,e)&&function(n,c){for(const p of n.filters)if(!p.matches(c))return!1;return!0}(a,e)&&(c=e,!((n=a).startAt&&!function(p,_,w){const N=Ml(p,_,w);return p.inclusive?N<=0:N<0}(n.startAt,ll(n),c)||n.endAt&&!function(p,_,w){const N=Ml(p,_,w);return p.inclusive?N>=0:N>0}(n.endAt,ll(n),c)));var n,c}function ap(a){return a.collectionGroup||(a.path.length%2==1?a.path.lastSegment():a.path.get(a.path.length-2))}function vd(a){return(e,n)=>{let c=!1;for(const p of ll(a)){const _=uh(p,e,n);if(0!==_)return _;c=c||p.field.isKeyField()}return 0}}function uh(a,e,n){const c=a.field.isKeyField()?Mn.comparator(e.key,n.key):function(p,_,w){const N=_.data.field(p),te=w.data.field(p);return null!==N&&null!==te?Fs(N,te):Fn()}(a.field,e,n);switch(a.dir){case"asc":return c;case"desc":return-1*c;default:return Fn()}}function pf(a,e){if(a.yt){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Qa(e)?"-0":e}}function hc(a){return{integerValue:""+a}}function vg(a,e){return P(e)?hc(e):pf(a,e)}class Su{constructor(){this._=void 0}}function yd(a,e,n){return a instanceof Xu?function(c,p){const _={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:c.seconds,nanos:c.nanoseconds}}}};return p&&(_.fields.__previous_value__=p),{mapValue:_}}(n,e):a instanceof cl?lp(a,e):a instanceof fc?dl(a,e):function(c,p){const _=gf(c,p),w=mf(_)+mf(c.It);return _e(_)&&_e(c.It)?hc(w):pf(c.Tt,w)}(a,e)}function up(a,e,n){return a instanceof cl?lp(a,e):a instanceof fc?dl(a,e):n}function gf(a,e){return a instanceof hl?_e(n=e)||(c=n)&&"doubleValue"in c?e:{integerValue:0}:null;var c,n}class Xu extends Su{}class cl extends Su{constructor(e){super(),this.elements=e}}function lp(a,e){const n=_d(e);for(const c of a.elements)n.some(p=>So(p,c))||n.push(c);return{arrayValue:{values:n}}}class fc extends Su{constructor(e){super(),this.elements=e}}function dl(a,e){let n=_d(e);for(const c of a.elements)n=n.filter(p=>!So(p,c));return{arrayValue:{values:n}}}class hl extends Su{constructor(e,n){super(),this.Tt=e,this.It=n}}function mf(a){return ve(a.integerValue||a.doubleValue)}function _d(a){return $e(a)&&a.arrayValue.values?a.arrayValue.values.slice():[]}class Bc{constructor(e,n){this.field=e,this.transform=n}}class Nm{constructor(e,n){this.version=e,this.transformResults=n}}class As{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new As}static exists(e){return new As(void 0,e)}static updateTime(e){return new As(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Hl(a,e){return void 0!==a.updateTime?e.isFoundDocument()&&e.version.isEqual(a.updateTime):void 0===a.exists||a.exists===e.isFoundDocument()}class Vc{}function Td(a,e){if(!a.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return a.isNoDocument()?new Rl(a.key,As.none()):new hu(a.key,a.data,As.none());{const n=a.data,c=fo.empty();let p=new es(_s.comparator);for(let _ of e.fields)if(!p.has(_)){let w=n.field(_);null===w&&_.length>1&&(_=_.popLast(),w=n.field(_)),null===w?c.delete(_):c.set(_,w),p=p.add(_)}return new fu(a.key,c,new Zr(p.toArray()),As.none())}}function yg(a,e,n){a instanceof hu?function(c,p,_){const w=c.value.clone(),N=_f(c.fieldTransforms,p,_.transformResults);w.setAll(N),p.convertToFoundDocument(_.version,w).setHasCommittedMutations()}(a,e,n):a instanceof fu?function(c,p,_){if(!Hl(c.precondition,p))return void p.convertToUnknownDocument(_.version);const w=_f(c.fieldTransforms,p,_.transformResults),N=p.data;N.setAll(ch(c)),N.setAll(w),p.convertToFoundDocument(_.version,N).setHasCommittedMutations()}(a,e,n):e.convertToNoDocument(n.version).setHasCommittedMutations()}function lh(a,e,n,c){return a instanceof hu?function(p,_,w,N){if(!Hl(p.precondition,_))return w;const te=p.value.clone(),ce=_g(p.fieldTransforms,N,_);return te.setAll(ce),_.convertToFoundDocument(_.version,te).setHasLocalMutations(),null}(a,e,n,c):a instanceof fu?function(p,_,w,N){if(!Hl(p.precondition,_))return w;const te=_g(p.fieldTransforms,N,_),ce=_.data;return ce.setAll(ch(p)),ce.setAll(te),_.convertToFoundDocument(_.version,ce).setHasLocalMutations(),null===w?null:w.unionWith(p.fieldMask.fields).unionWith(p.fieldTransforms.map(Ae=>Ae.field))}(a,e,n,c):(w=n,Hl(a.precondition,_=e)?(_.convertToNoDocument(_.version).setHasLocalMutations(),null):w);var _,w}function vf(a,e){let n=null;for(const c of a.fieldTransforms){const p=e.data.field(c.field),_=gf(c.transform,p||null);null!=_&&(null===n&&(n=fo.empty()),n.set(c.field,_))}return n||null}function yf(a,e){return a.type===e.type&&!!a.key.isEqual(e.key)&&!!a.precondition.isEqual(e.precondition)&&(c=e.fieldTransforms,!!(void 0===(n=a.fieldTransforms)&&void 0===c||n&&c&&Ru(n,c,(p,_)=>function cp(a,e){return a.field.isEqual(e.field)&&(c=e.transform,(n=a.transform)instanceof cl&&c instanceof cl||n instanceof fc&&c instanceof fc?Ru(n.elements,c.elements,So):n instanceof hl&&c instanceof hl?So(n.It,c.It):n instanceof Xu&&c instanceof Xu);var n,c}(p,_))))&&(0===a.type?a.value.isEqual(e.value):1!==a.type||a.data.isEqual(e.data)&&a.fieldMask.isEqual(e.fieldMask));var n,c}class hu extends Vc{constructor(e,n,c,p=[]){super(),this.key=e,this.value=n,this.precondition=c,this.fieldTransforms=p,this.type=0}getFieldMask(){return null}}class fu extends Vc{constructor(e,n,c,p,_=[]){super(),this.key=e,this.data=n,this.fieldMask=c,this.precondition=p,this.fieldTransforms=_,this.type=1}getFieldMask(){return this.fieldMask}}function ch(a){const e=new Map;return a.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const c=a.data.field(n);e.set(n,c)}}),e}function _f(a,e,n){const c=new Map;Vn(a.length===n.length);for(let p=0;p<n.length;p++){const _=a[p],w=_.transform,N=e.data.field(_.field);c.set(_.field,up(w,N,n[p]))}return c}function _g(a,e,n){const c=new Map;for(const p of a){const _=p.transform,w=n.data.field(p.field);c.set(p.field,yd(_,w,e))}return c}class Rl extends Vc{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class dp extends Vc{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class Tg{constructor(e){this.count=e}}var ko,ki;function Gl(a){switch(a){default:return Fn();case Bt.CANCELLED:case Bt.UNKNOWN:case Bt.DEADLINE_EXCEEDED:case Bt.RESOURCE_EXHAUSTED:case Bt.INTERNAL:case Bt.UNAVAILABLE:case Bt.UNAUTHENTICATED:return!1;case Bt.INVALID_ARGUMENT:case Bt.NOT_FOUND:case Bt.ALREADY_EXISTS:case Bt.PERMISSION_DENIED:case Bt.FAILED_PRECONDITION:case Bt.ABORTED:case Bt.OUT_OF_RANGE:case Bt.UNIMPLEMENTED:case Bt.DATA_LOSS:return!0}}function dh(a){if(void 0===a)return si("GRPC error has no .code"),Bt.UNKNOWN;switch(a){case ko.OK:return Bt.OK;case ko.CANCELLED:return Bt.CANCELLED;case ko.UNKNOWN:return Bt.UNKNOWN;case ko.DEADLINE_EXCEEDED:return Bt.DEADLINE_EXCEEDED;case ko.RESOURCE_EXHAUSTED:return Bt.RESOURCE_EXHAUSTED;case ko.INTERNAL:return Bt.INTERNAL;case ko.UNAVAILABLE:return Bt.UNAVAILABLE;case ko.UNAUTHENTICATED:return Bt.UNAUTHENTICATED;case ko.INVALID_ARGUMENT:return Bt.INVALID_ARGUMENT;case ko.NOT_FOUND:return Bt.NOT_FOUND;case ko.ALREADY_EXISTS:return Bt.ALREADY_EXISTS;case ko.PERMISSION_DENIED:return Bt.PERMISSION_DENIED;case ko.FAILED_PRECONDITION:return Bt.FAILED_PRECONDITION;case ko.ABORTED:return Bt.ABORTED;case ko.OUT_OF_RANGE:return Bt.OUT_OF_RANGE;case ko.UNIMPLEMENTED:return Bt.UNIMPLEMENTED;case ko.DATA_LOSS:return Bt.DATA_LOSS;default:return Fn()}}(ki=ko||(ko={}))[ki.OK=0]="OK",ki[ki.CANCELLED=1]="CANCELLED",ki[ki.UNKNOWN=2]="UNKNOWN",ki[ki.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ki[ki.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ki[ki.NOT_FOUND=5]="NOT_FOUND",ki[ki.ALREADY_EXISTS=6]="ALREADY_EXISTS",ki[ki.PERMISSION_DENIED=7]="PERMISSION_DENIED",ki[ki.UNAUTHENTICATED=16]="UNAUTHENTICATED",ki[ki.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ki[ki.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ki[ki.ABORTED=10]="ABORTED",ki[ki.OUT_OF_RANGE=11]="OUT_OF_RANGE",ki[ki.UNIMPLEMENTED=12]="UNIMPLEMENTED",ki[ki.INTERNAL=13]="INTERNAL",ki[ki.UNAVAILABLE=14]="UNAVAILABLE",ki[ki.DATA_LOSS=15]="DATA_LOSS";class fl{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),c=this.inner[n];if(void 0!==c)for(const[p,_]of c)if(this.equalsFn(p,e))return _}has(e){return void 0!==this.get(e)}set(e,n){const c=this.mapKeyFn(e),p=this.inner[c];if(void 0===p)return this.inner[c]=[[e,n]],void this.innerSize++;for(let _=0;_<p.length;_++)if(this.equalsFn(p[_][0],e))return void(p[_]=[e,n]);p.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),c=this.inner[n];if(void 0===c)return!1;for(let p=0;p<c.length;p++)if(this.equalsFn(c[p][0],e))return 1===c.length?delete this.inner[n]:c.splice(p,1),this.innerSize--,!0;return!1}forEach(e){co(this.inner,(n,c)=>{for(const[p,_]of c)e(p,_)})}isEmpty(){return Yu(this.inner)}size(){return this.innerSize}}const Hc=new ho(Mn.comparator);function eu(){return Hc}const La=new ho(Mn.comparator);function Fu(...a){let e=La;for(const n of a)e=e.insert(n.key,n);return e}function Gc(a){let e=La;return a.forEach((n,c)=>e=e.insert(n,c.overlayedDocument)),e}function wu(){return Ju()}function pc(){return Ju()}function Ju(){return new fl(a=>a.toString(),(a,e)=>a.isEqual(e))}const bg=new ho(Mn.comparator),$c=new es(Mn.comparator);function pi(...a){let e=$c;for(const n of a)e=e.add(n);return e}const pl=new es(Mr);function gc(){return pl}class Nl{constructor(e,n,c,p,_){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=c,this.documentUpdates=p,this.resolvedLimboDocuments=_}static createSynthesizedRemoteEventForCurrentChange(e,n,c){const p=new Map;return p.set(e,$l.createSynthesizedTargetChangeForCurrentChange(e,n,c)),new Nl(ur.min(),p,gc(),eu(),pi())}}class $l{constructor(e,n,c,p,_){this.resumeToken=e,this.current=n,this.addedDocuments=c,this.modifiedDocuments=p,this.removedDocuments=_}static createSynthesizedTargetChangeForCurrentChange(e,n,c){return new $l(c,n,pi(),pi(),pi())}}class gl{constructor(e,n,c,p){this.Et=e,this.removedTargetIds=n,this.key=c,this.At=p}}class Tf{constructor(e,n){this.targetId=e,this.Rt=n}}class Fa{constructor(e,n,c=B.EMPTY_BYTE_STRING,p=null){this.state=e,this.targetIds=n,this.resumeToken=c,this.cause=p}}class bf{constructor(){this.bt=0,this.vt=ml(),this.Pt=B.EMPTY_BYTE_STRING,this.Vt=!1,this.St=!0}get current(){return this.Vt}get resumeToken(){return this.Pt}get Dt(){return 0!==this.bt}get Ct(){return this.St}xt(e){e.approximateByteSize()>0&&(this.St=!0,this.Pt=e)}Nt(){let e=pi(),n=pi(),c=pi();return this.vt.forEach((p,_)=>{switch(_){case 0:e=e.add(p);break;case 2:n=n.add(p);break;case 1:c=c.add(p);break;default:Fn()}}),new $l(this.Pt,this.Vt,e,n,c)}kt(){this.St=!1,this.vt=ml()}Ot(e,n){this.St=!0,this.vt=this.vt.insert(e,n)}Mt(e){this.St=!0,this.vt=this.vt.remove(e)}Ft(){this.bt+=1}$t(){this.bt-=1}Bt(){this.St=!0,this.Vt=!0}}class Ef{constructor(e){this.Lt=e,this.qt=new Map,this.Ut=eu(),this.Kt=bd(),this.Gt=new es(Mr)}Qt(e){for(const n of e.Et)e.At&&e.At.isFoundDocument()?this.jt(n,e.At):this.zt(n,e.key,e.At);for(const n of e.removedTargetIds)this.zt(n,e.key,e.At)}Wt(e){this.forEachTarget(e,n=>{const c=this.Ht(n);switch(e.state){case 0:this.Jt(n)&&c.xt(e.resumeToken);break;case 1:c.$t(),c.Dt||c.kt(),c.xt(e.resumeToken);break;case 2:c.$t(),c.Dt||this.removeTarget(n);break;case 3:this.Jt(n)&&(c.Bt(),c.xt(e.resumeToken));break;case 4:this.Jt(n)&&(this.Yt(n),c.xt(e.resumeToken));break;default:Fn()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.qt.forEach((c,p)=>{this.Jt(p)&&n(p)})}Zt(e){const n=e.targetId,c=e.Rt.count,p=this.Xt(n);if(p){const _=p.target;if(af(_))if(0===c){const w=new Mn(_.path);this.zt(n,w,js.newNoDocument(w,ur.min()))}else Vn(1===c);else this.te(n)!==c&&(this.Yt(n),this.Gt=this.Gt.add(n))}}ee(e){const n=new Map;this.qt.forEach((_,w)=>{const N=this.Xt(w);if(N){if(_.current&&af(N.target)){const te=new Mn(N.target.path);null!==this.Ut.get(te)||this.ne(w,te)||this.zt(w,te,js.newNoDocument(te,e))}_.Ct&&(n.set(w,_.Nt()),_.kt())}});let c=pi();this.Kt.forEach((_,w)=>{let N=!0;w.forEachWhile(te=>{const ce=this.Xt(te);return!ce||2===ce.purpose||(N=!1,!1)}),N&&(c=c.add(_))}),this.Ut.forEach((_,w)=>w.setReadTime(e));const p=new Nl(e,n,this.Gt,this.Ut,c);return this.Ut=eu(),this.Kt=bd(),this.Gt=new es(Mr),p}jt(e,n){if(!this.Jt(e))return;const c=this.ne(e,n.key)?2:0;this.Ht(e).Ot(n.key,c),this.Ut=this.Ut.insert(n.key,n),this.Kt=this.Kt.insert(n.key,this.se(n.key).add(e))}zt(e,n,c){if(!this.Jt(e))return;const p=this.Ht(e);this.ne(e,n)?p.Ot(n,1):p.Mt(n),this.Kt=this.Kt.insert(n,this.se(n).delete(e)),c&&(this.Ut=this.Ut.insert(n,c))}removeTarget(e){this.qt.delete(e)}te(e){const n=this.Ht(e).Nt();return this.Lt.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ft(e){this.Ht(e).Ft()}Ht(e){let n=this.qt.get(e);return n||(n=new bf,this.qt.set(e,n)),n}se(e){let n=this.Kt.get(e);return n||(n=new es(Mr),this.Kt=this.Kt.insert(e,n)),n}Jt(e){const n=null!==this.Xt(e);return n||Kt("WatchChangeAggregator","Detected inactive target",e),n}Xt(e){const n=this.qt.get(e);return n&&n.Dt?null:this.Lt.ie(e)}Yt(e){this.qt.set(e,new bf),this.Lt.getRemoteKeysForTarget(e).forEach(n=>{this.zt(e,n,null)})}ne(e,n){return this.Lt.getRemoteKeysForTarget(e).has(n)}}function bd(){return new ho(Mn.comparator)}function ml(){return new ho(Mn.comparator)}const zc={asc:"ASCENDING",desc:"DESCENDING"},hh={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Wc={and:"AND",or:"OR"};class hp{constructor(e,n){this.databaseId=e,this.yt=n}}function vl(a,e){return a.yt?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Sf(a,e){return a.yt?e.toBase64():e.toUint8Array()}function mc(a,e){return vl(a,e.toTimestamp())}function Ro(a){return Vn(!!a),ur.fromTimestamp(function(e){const n=pe(e);return new zi(n.seconds,n.nanos)}(a))}function wf(a,e){return(n=a,new Ur(["projects",n.projectId,"databases",n.database])).child("documents").child(e).canonicalString();var n}function I(a){const e=Ur.fromString(a);return Vn(gh(e)),e}function y(a,e){return wf(a.databaseId,e.path)}function T(a,e){const n=I(e);if(n.get(1)!==a.databaseId.projectId)throw new un(Bt.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+a.databaseId.projectId);if(n.get(3)!==a.databaseId.database)throw new un(Bt.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+a.databaseId.database);return new Mn(Tt(n))}function k(a,e){return wf(a.databaseId,e)}function se(a){const e=I(a);return 4===e.length?Ur.emptyPath():Tt(e)}function Ce(a){return new Ur(["projects",a.databaseId.projectId,"databases",a.databaseId.database]).canonicalString()}function Tt(a){return Vn(a.length>4&&"documents"===a.get(4)),a.popFirst(5)}function Zt(a,e,n){return{name:y(a,e),fields:n.value.mapValue.fields}}function Ln(a,e,n){const c=T(a,e.name),p=Ro(e.updateTime),_=e.createTime?Ro(e.createTime):ur.min(),w=new fo({mapValue:{fields:e.fields}}),N=js.newFoundDocument(c,p,_,w);return n&&N.setHasCommittedMutations(),n?N.setHasCommittedMutations():N}function Er(a,e){let n;if(e instanceof hu)n={update:Zt(a,e.key,e.value)};else if(e instanceof Rl)n={delete:y(a,e.key)};else if(e instanceof fu)n={update:Zt(a,e.key,e.data),updateMask:yc(e.fieldMask)};else{if(!(e instanceof dp))return Fn();n={verify:y(a,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(c=>function(p,_){const w=_.transform;if(w instanceof Xu)return{fieldPath:_.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(w instanceof cl)return{fieldPath:_.field.canonicalString(),appendMissingElements:{values:w.elements}};if(w instanceof fc)return{fieldPath:_.field.canonicalString(),removeAllFromArray:{values:w.elements}};if(w instanceof hl)return{fieldPath:_.field.canonicalString(),increment:w.It};throw Fn()}(0,c))),e.precondition.isNone||(n.currentDocument=void 0!==(p=e.precondition).updateTime?{updateTime:mc(a,p.updateTime)}:void 0!==p.exists?{exists:p.exists}:Fn()),n;var p}function Wo(a,e){const n=e.currentDocument?void 0!==(p=e.currentDocument).updateTime?As.updateTime(Ro(p.updateTime)):void 0!==p.exists?As.exists(p.exists):As.none():As.none(),c=e.updateTransforms?e.updateTransforms.map(p=>function(_,w){let N=null;"setToServerValue"in w?(Vn("REQUEST_TIME"===w.setToServerValue),N=new Xu):"appendMissingElements"in w?N=new cl(w.appendMissingElements.values||[]):"removeAllFromArray"in w?N=new fc(w.removeAllFromArray.values||[]):"increment"in w?N=new hl(_,w.increment):Fn();const te=_s.fromServerFormat(w.fieldPath);return new Bc(te,N)}(a,p)):[];var p;if(e.update){const p=T(a,e.update.name),_=new fo({mapValue:{fields:e.update.fields}});if(e.updateMask){const w=new Zr((e.updateMask.fieldPaths||[]).map(ce=>_s.fromServerFormat(ce)));return new fu(p,_,w,n,c)}return new hu(p,_,n,c)}if(e.delete){const p=T(a,e.delete);return new Rl(p,n)}if(e.verify){const p=T(a,e.verify);return new dp(p,n)}return Fn()}function fh(a,e){return{documents:[k(a,e.path)]}}function Ed(a,e){const n={structuredQuery:{}},c=e.path;null!==e.collectionGroup?(n.parent=k(a,c),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=k(a,c.popLast()),n.structuredQuery.from=[{collectionId:c.lastSegment()}]);const p=function(te){if(0!==te.length)return Kn(Si.create(te,"and"))}(e.filters);p&&(n.structuredQuery.where=p);const _=function(te){if(0!==te.length)return te.map(ce=>{return{field:zl((Ae=ce).field),direction:ph(Ae.dir)};var Ae})}(e.orderBy);_&&(n.structuredQuery.orderBy=_);const w=(ce=e.limit,a.yt||du(ce)?ce:{value:ce});var ce,N,te;return null!==w&&(n.structuredQuery.limit=w),e.startAt&&(n.structuredQuery.startAt={before:(N=e.startAt).inclusive,values:N.position}),e.endAt&&(n.structuredQuery.endAt={before:!(te=e.endAt).inclusive,values:te.position}),n}function qc(a){let e=se(a.parent);const n=a.structuredQuery,c=n.from?n.from.length:0;let p=null;if(c>0){Vn(1===c);const Ae=n.from[0];Ae.allDescendants?p=Ae.collectionId:e=e.child(Ae.collectionId)}let _=[];n.where&&(_=function(Ae){const rt=Kc(Ae);return rt instanceof Si&&op(rt)?rt.getFilters():[rt]}(n.where));let w=[];n.orderBy&&(w=n.orderBy.map(Ae=>{return new oh(vc((rt=Ae).field),function(kt){switch(kt){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(rt.direction));var rt}));let N=null;n.limit&&(N=function(Ae){let rt;return rt="object"==typeof Ae?Ae.value:Ae,du(rt)?null:rt}(n.limit));let te=null;var Ae;n.startAt&&(te=new $s((Ae=n.startAt).values||[],!!Ae.before));let ce=null;return n.endAt&&(ce=function(Ae){return new $s(Ae.values||[],!Ae.before)}(n.endAt)),Uc(e,p,w,_,N,"F",te,ce)}function Kc(a){return void 0!==a.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const n=vc(e.unaryFilter.field);return ei.create(n,"==",{doubleValue:NaN});case"IS_NULL":const c=vc(e.unaryFilter.field);return ei.create(c,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const p=vc(e.unaryFilter.field);return ei.create(p,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const _=vc(e.unaryFilter.field);return ei.create(_,"!=",{nullValue:"NULL_VALUE"});default:return Fn()}}(a):void 0!==a.fieldFilter?ei.create(vc((e=a).fieldFilter.field),function(n){switch(n){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Fn()}}(e.fieldFilter.op),e.fieldFilter.value):void 0!==a.compositeFilter?function(e){return Si.create(e.compositeFilter.filters.map(n=>Kc(n)),function(n){switch(n){case"AND":return"and";case"OR":return"or";default:return Fn()}}(e.compositeFilter.op))}(a):Fn();var e}function ph(a){return zc[a]}function fp(a){return hh[a]}function pp(a){return Wc[a]}function zl(a){return{fieldPath:a.canonicalString()}}function vc(a){return _s.fromServerFormat(a.fieldPath)}function Kn(a){return a instanceof ei?function(e){if("=="===e.op){if(Vt(e.value))return{unaryFilter:{field:zl(e.field),op:"IS_NAN"}};if(It(e.value))return{unaryFilter:{field:zl(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(Vt(e.value))return{unaryFilter:{field:zl(e.field),op:"IS_NOT_NAN"}};if(It(e.value))return{unaryFilter:{field:zl(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:zl(e.field),op:fp(e.op),value:e.value}}}(a):a instanceof Si?function(e){const n=e.getFilters().map(c=>Kn(c));return 1===n.length?n[0]:{compositeFilter:{op:pp(e.op),filters:n}}}(a):Fn()}function yc(a){const e=[];return a.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function gh(a){return a.length>=4&&"projects"===a.get(0)&&"databases"===a.get(2)}function Cu(a){let e="";for(let n=0;n<a.length;n++)e.length>0&&(e=Cf(e)),e=Qv(a.get(n),e);return Cf(e)}function Qv(a,e){let n=e;const c=a.length;for(let p=0;p<c;p++){const _=a.charAt(p);switch(_){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=_}}return n}function Cf(a){return a+"\x01\x01"}function _c(a){const e=a.length;if(Vn(e>=2),2===e)return Vn("\x01"===a.charAt(0)&&"\x01"===a.charAt(1)),Ur.emptyPath();const n=e-2,c=[];let p="";for(let _=0;_<e;){const w=a.indexOf("\x01",_);switch((w<0||w>n)&&Fn(),a.charAt(w+1)){case"\x01":const N=a.substring(_,w);let te;0===p.length?te=N:(p+=N,te=p,p=""),c.push(te);break;case"\x10":p+=a.substring(_,w),p+="\0";break;case"\x11":p+=a.substring(_,w+1);break;default:Fn()}_=w+2}return new Ur(c)}const oa=["userId","batchId"];function Sd(a,e){return[a,Cu(e)]}function gp(a,e,n){return[a,Cu(e),n]}const mh={},Zc=["prefixPath","collectionGroup","readTime","documentId"],mp=["prefixPath","collectionGroup","documentId"],If=["collectionGroup","readTime","prefixPath","documentId"],Xv=["canonicalId","targetId"],No=["targetId","path"],E_=["path","targetId"],Jv=["collectionId","parent"],Ll=["indexId","uid"],Lm=["uid","sequenceNumber"],S_=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],ey=["indexId","uid","orderedDocumentKey"],At=["userId","collectionPath","documentId"],Eg=["userId","collectionPath","largestBatchId"],Sg=["userId","collectionGroup","largestBatchId"],Wl=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],Fm=[...Wl,"documentOverlays"],Iu=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],ql=Iu,Kl=[...ql,"indexConfiguration","indexState","indexEntries"];class vp extends Al{constructor(e,n){super(),this.re=e,this.currentSequenceNumber=n}}function Lo(a,e){const n=Cn(a);return Za.M(n.re,e)}class yp{constructor(e,n,c,p){this.batchId=e,this.localWriteTime=n,this.baseMutations=c,this.mutations=p}applyToRemoteDocument(e,n){const c=n.mutationResults;for(let p=0;p<this.mutations.length;p++){const _=this.mutations[p];_.key.isEqual(e.key)&&yg(_,e,c[p])}}applyToLocalView(e,n){for(const c of this.baseMutations)c.key.isEqual(e.key)&&(n=lh(c,e,n,this.localWriteTime));for(const c of this.mutations)c.key.isEqual(e.key)&&(n=lh(c,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const c=pc();return this.mutations.forEach(p=>{const _=e.get(p.key),w=_.overlayedDocument;let N=this.applyToLocalView(w,_.mutatedFields);N=n.has(p.key)?null:N;const te=Td(w,N);null!==te&&c.set(p.key,te),w.isValidDocument()||w.convertToNoDocument(ur.min())}),c}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),pi())}isEqual(e){return this.batchId===e.batchId&&Ru(this.mutations,e.mutations,(n,c)=>yf(n,c))&&Ru(this.baseMutations,e.baseMutations,(n,c)=>yf(n,c))}}class jm{constructor(e,n,c,p){this.batch=e,this.commitVersion=n,this.mutationResults=c,this.docVersions=p}static from(e,n,c){Vn(e.mutations.length===c.length);let p=bg;const _=e.mutations;for(let w=0;w<_.length;w++)p=p.insert(_[w].key,c[w].version);return new jm(e,n,c,p)}}class wg{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class Tc{constructor(e,n,c,p,_=ur.min(),w=ur.min(),N=B.EMPTY_BYTE_STRING){this.target=e,this.targetId=n,this.purpose=c,this.sequenceNumber=p,this.snapshotVersion=_,this.lastLimboFreeSnapshotVersion=w,this.resumeToken=N}withSequenceNumber(e){return new Tc(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,n){return new Tc(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new Tc(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class Cg{constructor(e){this.oe=e}}function Ig(a,e){const n=e.key,c={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:_p(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())c.document={name:y(p=a.oe,(_=e).key),fields:_.data.value.mapValue.fields,updateTime:vl(p,_.version.toTimestamp()),createTime:vl(p,_.createTime.toTimestamp())};else if(e.isNoDocument())c.noDocument={path:n.path.toArray(),readTime:Zl(e.version)};else{if(!e.isUnknownDocument())return Fn();c.unknownDocument={path:n.path.toArray(),version:Zl(e.version)}}var p,_;return c}function _p(a){const e=a.toTimestamp();return[e.seconds,e.nanoseconds]}function Zl(a){const e=a.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Yc(a){const e=new zi(a.seconds,a.nanoseconds);return ur.fromTimestamp(e)}function bc(a,e){const n=(e.baseMutations||[]).map(_=>Wo(a.oe,_));for(let _=0;_<e.mutations.length-1;++_)_+1<e.mutations.length&&void 0!==e.mutations[_+1].transform&&(e.mutations[_].updateTransforms=e.mutations[_+1].transform.fieldTransforms,e.mutations.splice(_+1,1),++_);const c=e.mutations.map(_=>Wo(a.oe,_)),p=zi.fromMillis(e.localWriteTimeMs);return new yp(e.batchId,p,n,c)}function Tl(a){const e=Yc(a.readTime),n=void 0!==a.lastLimboFreeSnapshotVersion?Yc(a.lastLimboFreeSnapshotVersion):ur.min();let c;var p;return void 0!==a.query.documents?(Vn(1===(p=a.query).documents.length),c=Ja(dc(se(p.documents[0])))):c=Ja(qc(a.query)),new Tc(c,a.targetId,0,a.lastListenSequenceNumber,e,n,B.fromBase64String(a.resumeToken))}function Um(a,e){const n=Zl(e.snapshotVersion),c=Zl(e.lastLimboFreeSnapshotVersion);let p;p=af(e.target)?fh(a.oe,e.target):Ed(a.oe,e.target);const _=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Lc(e.target),readTime:n,resumeToken:_,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:c,query:p}}function Df(a){const e=qc({parent:a.parent,structuredQuery:a.structuredQuery});return"LAST"===a.limitType?hf(e,e.limit,"L"):e}function vh(a,e){return new wg(e.largestBatchId,Wo(a.oe,e.overlayMutation))}function ty(a,e){const n=e.path.lastSegment();return[a,Cu(e.path.popLast()),n]}function xg(a,e,n,c){return{indexId:a,uid:e.uid||"",sequenceNumber:n,readTime:Zl(c.readTime),documentKey:Cu(c.documentKey.path),largestBatchId:c.largestBatchId}}class Tp{getBundleMetadata(e,n){return Qc(e).get(n).next(c=>{if(c)return{id:(p=c).bundleId,createTime:Yc(p.createTime),version:p.version};var p})}saveBundleMetadata(e,n){return Qc(e).put({bundleId:(c=n).id,createTime:Zl(Ro(c.createTime)),version:c.version});var c}getNamedQuery(e,n){return yh(e).get(n).next(c=>{if(c)return{name:(p=c).name,query:Df(p.bundledQuery),readTime:Yc(p.readTime)};var p})}saveNamedQuery(e,n){return yh(e).put({name:(c=n).name,readTime:Zl(Ro(c.readTime)),bundledQuery:c.bundledQuery});var c}}function Qc(a){return Lo(a,"bundles")}function yh(a){return Lo(a,"namedQueries")}class _h{constructor(e,n){this.Tt=e,this.userId=n}static ue(e,n){return new _h(e,n.uid||"")}getOverlay(e,n){return bp(e).get(ty(this.userId,n)).next(c=>c?vh(this.Tt,c):null)}getOverlays(e,n){const c=wu();return Lt.forEach(n,p=>this.getOverlay(e,p).next(_=>{null!==_&&c.set(p,_)})).next(()=>c)}saveOverlays(e,n,c){const p=[];return c.forEach((_,w)=>{const N=new wg(n,w);p.push(this.ce(e,N))}),Lt.waitFor(p)}removeOverlaysForBatchId(e,n,c){const p=new Set;n.forEach(w=>p.add(Cu(w.getCollectionPath())));const _=[];return p.forEach(w=>{const N=IDBKeyRange.bound([this.userId,w,c],[this.userId,w,c+1],!1,!0);_.push(bp(e).Y("collectionPathOverlayIndex",N))}),Lt.waitFor(_)}getOverlaysForCollection(e,n,c){const p=wu(),_=Cu(n),w=IDBKeyRange.bound([this.userId,_,c],[this.userId,_,Number.POSITIVE_INFINITY],!0);return bp(e).W("collectionPathOverlayIndex",w).next(N=>{for(const te of N){const ce=vh(this.Tt,te);p.set(ce.getKey(),ce)}return p})}getOverlaysForCollectionGroup(e,n,c,p){const _=wu();let w;const N=IDBKeyRange.bound([this.userId,n,c],[this.userId,n,Number.POSITIVE_INFINITY],!0);return bp(e).X({index:"collectionGroupOverlayIndex",range:N},(te,ce,Ae)=>{const rt=vh(this.Tt,ce);_.size()<p||rt.largestBatchId===w?(_.set(rt.getKey(),rt),w=rt.largestBatchId):Ae.done()}).next(()=>_)}ce(e,n){return bp(e).put(function(c,p,_){const[w,N,te]=ty(p,_.mutation.key);return{userId:p,collectionPath:N,documentId:te,collectionGroup:_.mutation.key.getCollectionGroup(),largestBatchId:_.largestBatchId,overlayMutation:Er(c.oe,_.mutation)}}(this.Tt,this.userId,n))}}function bp(a){return Lo(a,"documentOverlays")}class Th{constructor(){}ae(e,n){this.he(e,n),n.le()}he(e,n){if("nullValue"in e)this.fe(n,5);else if("booleanValue"in e)this.fe(n,10),n.de(e.booleanValue?1:0);else if("integerValue"in e)this.fe(n,15),n.de(ve(e.integerValue));else if("doubleValue"in e){const c=ve(e.doubleValue);isNaN(c)?this.fe(n,13):(this.fe(n,15),Qa(c)?n.de(0):n.de(c))}else if("timestampValue"in e){const c=e.timestampValue;this.fe(n,20),"string"==typeof c?n._e(c):(n._e(`${c.seconds||""}`),n.de(c.nanos||0))}else if("stringValue"in e)this.we(e.stringValue,n),this.me(n);else if("bytesValue"in e)this.fe(n,30),n.ge(_t(e.bytesValue)),this.me(n);else if("referenceValue"in e)this.ye(e.referenceValue,n);else if("geoPointValue"in e){const c=e.geoPointValue;this.fe(n,45),n.de(c.latitude||0),n.de(c.longitude||0)}else"mapValue"in e?_r(e)?this.fe(n,Number.MAX_SAFE_INTEGER):(this.pe(e.mapValue,n),this.me(n)):"arrayValue"in e?(this.Ie(e.arrayValue,n),this.me(n)):Fn()}we(e,n){this.fe(n,25),this.Te(e,n)}Te(e,n){n._e(e)}pe(e,n){const c=e.fields||{};this.fe(n,55);for(const p of Object.keys(c))this.we(p,n),this.he(c[p],n)}Ie(e,n){const c=e.values||[];this.fe(n,50);for(const p of c)this.he(p,n)}ye(e,n){this.fe(n,37),Mn.fromName(e).path.forEach(c=>{this.fe(n,60),this.Te(c,n)})}fe(e,n){e.de(n)}me(e){e.de(2)}}function Bm(a){if(0===a)return 8;let e=0;return!(a>>4)&&(e+=4,a<<=4),!(a>>6)&&(e+=2,a<<=2),!(a>>7)&&(e+=1),e}function Xc(a){const e=64-function(n){let c=0;for(let p=0;p<8;++p){const _=Bm(255&n[p]);if(c+=_,8!==_)break}return c}(a);return Math.ceil(e/8)}Th.Ee=new Th;class Dg{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ae(e){const n=e[Symbol.iterator]();let c=n.next();for(;!c.done;)this.Re(c.value),c=n.next();this.be()}ve(e){const n=e[Symbol.iterator]();let c=n.next();for(;!c.done;)this.Pe(c.value),c=n.next();this.Ve()}Se(e){for(const n of e){const c=n.charCodeAt(0);if(c<128)this.Re(c);else if(c<2048)this.Re(960|c>>>6),this.Re(128|63&c);else if(n<"\ud800"||"\udbff"<n)this.Re(480|c>>>12),this.Re(128|63&c>>>6),this.Re(128|63&c);else{const p=n.codePointAt(0);this.Re(240|p>>>18),this.Re(128|63&p>>>12),this.Re(128|63&p>>>6),this.Re(128|63&p)}}this.be()}De(e){for(const n of e){const c=n.charCodeAt(0);if(c<128)this.Pe(c);else if(c<2048)this.Pe(960|c>>>6),this.Pe(128|63&c);else if(n<"\ud800"||"\udbff"<n)this.Pe(480|c>>>12),this.Pe(128|63&c>>>6),this.Pe(128|63&c);else{const p=n.codePointAt(0);this.Pe(240|p>>>18),this.Pe(128|63&p>>>12),this.Pe(128|63&p>>>6),this.Pe(128|63&p)}}this.Ve()}Ce(e){const n=this.xe(e),c=Xc(n);this.Ne(1+c),this.buffer[this.position++]=255&c;for(let p=n.length-c;p<n.length;++p)this.buffer[this.position++]=255&n[p]}ke(e){const n=this.xe(e),c=Xc(n);this.Ne(1+c),this.buffer[this.position++]=~(255&c);for(let p=n.length-c;p<n.length;++p)this.buffer[this.position++]=~(255&n[p])}Oe(){this.Me(255),this.Me(255)}Fe(){this.$e(255),this.$e(255)}reset(){this.position=0}seed(e){this.Ne(e.length),this.buffer.set(e,this.position),this.position+=e.length}Be(){return this.buffer.slice(0,this.position)}xe(e){const n=function(p){const _=new DataView(new ArrayBuffer(8));return _.setFloat64(0,p,!1),new Uint8Array(_.buffer)}(e),c=0!=(128&n[0]);n[0]^=c?255:128;for(let p=1;p<n.length;++p)n[p]^=c?255:0;return n}Re(e){const n=255&e;0===n?(this.Me(0),this.Me(255)):255===n?(this.Me(255),this.Me(0)):this.Me(n)}Pe(e){const n=255&e;0===n?(this.$e(0),this.$e(255)):255===n?(this.$e(255),this.$e(0)):this.$e(e)}be(){this.Me(0),this.Me(1)}Ve(){this.$e(0),this.$e(1)}Me(e){this.Ne(1),this.buffer[this.position++]=e}$e(e){this.Ne(1),this.buffer[this.position++]=~e}Ne(e){const n=e+this.position;if(n<=this.buffer.length)return;let c=2*this.buffer.length;c<n&&(c=n);const p=new Uint8Array(c);p.set(this.buffer),this.buffer=p}}class w_{constructor(e){this.Le=e}ge(e){this.Le.Ae(e)}_e(e){this.Le.Se(e)}de(e){this.Le.Ce(e)}le(){this.Le.Oe()}}class C_{constructor(e){this.Le=e}ge(e){this.Le.ve(e)}_e(e){this.Le.De(e)}de(e){this.Le.ke(e)}le(){this.Le.Fe()}}class wd{constructor(){this.Le=new Dg,this.qe=new w_(this.Le),this.Ue=new C_(this.Le)}seed(e){this.Le.seed(e)}Ke(e){return 0===e?this.qe:this.Ue}Be(){return this.Le.Be()}reset(){this.Le.reset()}}class bh{constructor(e,n,c,p){this.indexId=e,this.documentKey=n,this.arrayValue=c,this.directionalValue=p}Ge(){const e=this.directionalValue.length,n=0===e||255===this.directionalValue[e-1]?e+1:e,c=new Uint8Array(n);return c.set(this.directionalValue,0),n!==e?c.set([0],this.directionalValue.length):++c[c.length-1],new bh(this.indexId,this.documentKey,this.arrayValue,c)}}function Yl(a,e){let n=a.indexId-e.indexId;return 0!==n?n:(n=Ag(a.arrayValue,e.arrayValue),0!==n?n:(n=Ag(a.directionalValue,e.directionalValue),0!==n?n:Mn.comparator(a.documentKey,e.documentKey)))}function Ag(a,e){for(let n=0;n<a.length&&n<e.length;++n){const c=a[n]-e[n];if(0!==c)return c}return a.length-e.length}class Vm{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Qe=e.orderBy,this.je=[];for(const n of e.filters){const c=n;c.isInequality()?this.ze=c:this.je.push(c)}}We(e){Vn(e.collectionGroup===this.collectionId);const n=Nu(e);if(void 0!==n&&!this.He(n))return!1;const c=$o(e);let p=0,_=0;for(;p<c.length&&this.He(c[p]);++p);if(p===c.length)return!0;if(void 0!==this.ze){const w=c[p];if(!this.Je(this.ze,w)||!this.Ye(this.Qe[_++],w))return!1;++p}for(;p<c.length;++p)if(_>=this.Qe.length||!this.Ye(this.Qe[_++],c[p]))return!1;return!0}He(e){for(const n of this.je)if(this.Je(n,e))return!0;return!1}Je(e,n){return!(void 0===e||!e.field.isEqual(n.fieldPath))&&2===n.kind==("array-contains"===e.op||"array-contains-any"===e.op)}Ye(e,n){return!!e.field.isEqual(n.fieldPath)&&(0===n.kind&&"asc"===e.dir||1===n.kind&&"desc"===e.dir)}}function Ep(a){var e,n;if(Vn(a instanceof ei||a instanceof Si),a instanceof ei){if(a instanceof pg){const p=(null===(n=null===(e=a.value.arrayValue)||void 0===e?void 0:e.values)||void 0===n?void 0:n.map(_=>ei.create(a.field,"==",_)))||[];return Si.create(p,"or")}return a}const c=a.filters.map(p=>Ep(p));return Si.create(c,a.op)}function el(a){if(0===a.getFilters().length)return[];const e=Sh(Ep(a));return Vn(Eh(e)),Cd(e)||Sp(e)?[e]:e.getFilters()}function Cd(a){return a instanceof ei}function Sp(a){return a instanceof Si&&op(a)}function Eh(a){return Cd(a)||Sp(a)||function(e){if(e instanceof Si&&tf(e)){for(const n of e.getFilters())if(!Cd(n)&&!Sp(n))return!1;return!0}return!1}(a)}function Sh(a){if(Vn(a instanceof ei||a instanceof Si),a instanceof ei)return a;if(1===a.filters.length)return Sh(a.filters[0]);const e=a.filters.map(c=>Sh(c));let n=Si.create(e,a.op);return n=Mg(n),Eh(n)?n:(Vn(n instanceof Si),Vn(bu(n)),Vn(n.filters.length>1),n.filters.reduce((c,p)=>Id(c,p)))}function Id(a,e){let n;return Vn(a instanceof ei||a instanceof Si),Vn(e instanceof ei||e instanceof Si),n=a instanceof ei?e instanceof ei?Si.create([a,e],"and"):Pg(a,e):e instanceof ei?Pg(e,a):function(c,p){if(Vn(c.filters.length>0&&p.filters.length>0),bu(c)&&bu(p))return hg(c,p.getFilters());const _=tf(c)?c:p,w=tf(c)?p:c,N=_.filters.map(te=>Id(te,w));return Si.create(N,"or")}(a,e),Mg(n)}function Pg(a,e){if(bu(e))return hg(e,a.getFilters());{const n=e.filters.map(c=>Id(a,c));return Si.create(n,"or")}}function Mg(a){if(Vn(a instanceof ei||a instanceof Si),a instanceof ei)return a;const e=a.getFilters();if(1===e.length)return Mg(e[0]);if(nf(a))return a;const n=e.map(p=>Mg(p)),c=[];return n.forEach(p=>{p instanceof ei?c.push(p):p instanceof Si&&(p.op===a.op?c.push(...p.filters):c.push(p))}),1===c.length?c[0]:Si.create(c,a.op)}class I_{constructor(){this.Ze=new Hm}addToCollectionParentIndex(e,n){return this.Ze.add(n),Lt.resolve()}getCollectionParents(e,n){return Lt.resolve(this.Ze.getEntries(n))}addFieldIndex(e,n){return Lt.resolve()}deleteFieldIndex(e,n){return Lt.resolve()}getDocumentsMatchingTarget(e,n){return Lt.resolve(null)}getIndexType(e,n){return Lt.resolve(0)}getFieldIndexes(e,n){return Lt.resolve([])}getNextCollectionGroupToUpdate(e){return Lt.resolve(null)}getMinOffset(e,n){return Lt.resolve(xs.min())}getMinOffsetFromCollectionGroup(e,n){return Lt.resolve(xs.min())}updateCollectionGroup(e,n,c){return Lt.resolve()}updateIndexEntries(e,n){return Lt.resolve()}}class Hm{constructor(){this.index={}}add(e){const n=e.lastSegment(),c=e.popLast(),p=this.index[n]||new es(Ur.comparator),_=!p.has(c);return this.index[n]=p.add(c),_}has(e){const n=e.lastSegment(),c=e.popLast(),p=this.index[n];return p&&p.has(c)}getEntries(e){return(this.index[e]||new es(Ur.comparator)).toArray()}}const Af=new Uint8Array(0);class wp{constructor(e,n){this.user=e,this.databaseId=n,this.Xe=new Hm,this.tn=new fl(c=>Lc(c),(c,p)=>Fc(c,p)),this.uid=e.uid||""}addToCollectionParentIndex(e,n){if(!this.Xe.has(n)){const c=n.lastSegment(),p=n.popLast();e.addOnCommittedListener(()=>{this.Xe.add(n)});const _={collectionId:c,parent:Cu(p)};return Og(e).put(_)}return Lt.resolve()}getCollectionParents(e,n){const c=[],p=IDBKeyRange.bound([n,""],[Oo(n),""],!1,!0);return Og(e).W(p).next(_=>{for(const w of _){if(w.collectionId!==n)break;c.push(_c(w.parent))}return c})}addFieldIndex(e,n){const c=kg(e),p={indexId:(w=n).indexId,collectionGroup:w.collectionGroup,fields:w.fields.map(N=>[N.fieldPath.canonicalString(),N.kind])};var w;delete p.indexId;const _=c.add(p);if(n.indexState){const w=Ch(e);return _.next(N=>{w.put(xg(N,this.user,n.indexState.sequenceNumber,n.indexState.offset))})}return _.next()}deleteFieldIndex(e,n){const c=kg(e),p=Ch(e),_=wh(e);return c.delete(n.indexId).next(()=>p.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0))).next(()=>_.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,n){const c=wh(e);let p=!0;const _=new Map;return Lt.forEach(this.en(n),w=>this.nn(e,w).next(N=>{p&&(p=!!N),_.set(w,N)})).next(()=>{if(p){let w=pi();const N=[];return Lt.forEach(_,(te,ce)=>{var Ae;Kt("IndexedDbIndexManager",`Using index ${Ae=te,`id=${Ae.indexId}|cg=${Ae.collectionGroup}|f=${Ae.fields.map(qi=>`${qi.fieldPath}:${qi.kind}`).join(",")}`} to execute ${Lc(n)}`);const rt=function(qi,xo){const rs=Nu(xo);if(void 0===rs)return null;for(const ds of jc(qi,rs.fieldPath))switch(ds.op){case"array-contains-any":return ds.value.arrayValue.values||[];case"array-contains":return[ds.value]}return null}(ce,te),kt=function(qi,xo){const rs=new Map;for(const ds of $o(xo))for(const qo of jc(qi,ds.fieldPath))switch(qo.op){case"==":case"in":rs.set(ds.fieldPath.canonicalString(),qo.value);break;case"not-in":case"!=":return rs.set(ds.fieldPath.canonicalString(),qo.value),Array.from(rs.values())}return null}(ce,te),on=function(qi,xo){const rs=[];let ds=!0;for(const qo of $o(xo)){const nh=0===qo.kind?mg(qi,qo.fieldPath,qi.startAt):uf(qi,qo.fieldPath,qi.startAt);rs.push(nh.value),ds&&(ds=nh.inclusive)}return new $s(rs,ds)}(ce,te),gn=function(qi,xo){const rs=[];let ds=!0;for(const qo of $o(xo)){const nh=0===qo.kind?uf(qi,qo.fieldPath,qi.endAt):mg(qi,qo.fieldPath,qi.endAt);rs.push(nh.value),ds&&(ds=nh.inclusive)}return new $s(rs,ds)}(ce,te),Yn=this.sn(te,ce,on),br=this.sn(te,ce,gn),Ws=this.rn(te,ce,kt),mo=this.on(te.indexId,rt,Yn,on.inclusive,br,gn.inclusive,Ws);return Lt.forEach(mo,qi=>c.J(qi,n.limit).next(xo=>{xo.forEach(rs=>{const ds=Mn.fromSegments(rs.documentKey);w.has(ds)||(w=w.add(ds),N.push(ds))})}))}).next(()=>N)}return Lt.resolve(null)})}en(e){let n=this.tn.get(e);return n||(n=0===e.filters.length?[e]:el(Si.create(e.filters,"and")).map(c=>Nc(e.path,e.collectionGroup,e.orderBy,c.getFilters(),e.limit,e.startAt,e.endAt)),this.tn.set(e,n),n)}on(e,n,c,p,_,w,N){const te=(null!=n?n.length:1)*Math.max(c.length,_.length),ce=te/(null!=n?n.length:1),Ae=[];for(let rt=0;rt<te;++rt){const kt=n?this.un(n[rt/ce]):Af,on=this.cn(e,kt,c[rt%ce],p),gn=this.an(e,kt,_[rt%ce],w),Yn=N.map(br=>this.cn(e,kt,br,!0));Ae.push(...this.createRange(on,gn,Yn))}return Ae}cn(e,n,c,p){const _=new bh(e,Mn.empty(),n,c);return p?_:_.Ge()}an(e,n,c,p){const _=new bh(e,Mn.empty(),n,c);return p?_.Ge():_}nn(e,n){const c=new Vm(n),p=null!=n.collectionGroup?n.collectionGroup:n.path.lastSegment();return this.getFieldIndexes(e,p).next(_=>{let w=null;for(const N of _)c.We(N)&&(!w||N.fields.length>w.fields.length)&&(w=N);return w})}getIndexType(e,n){let c=2;const p=this.en(n);return Lt.forEach(p,_=>this.nn(e,_).next(w=>{w?0!==c&&w.fields.length<function(N){let te=new es(_s.comparator),ce=!1;for(const Ae of N.filters)for(const rt of Ae.getFlattenedFilters())rt.field.isKeyField()||("array-contains"===rt.op||"array-contains-any"===rt.op?ce=!0:te=te.add(rt.field));for(const Ae of N.orderBy)Ae.field.isKeyField()||(te=te.add(Ae.field));return te.size+(ce?1:0)}(_)&&(c=1):c=0})).next(()=>null!==n.limit&&p.length>1&&2===c?1:c)}hn(e,n){const c=new wd;for(const p of $o(e)){const _=n.data.field(p.fieldPath);if(null==_)return null;const w=c.Ke(p.kind);Th.Ee.ae(_,w)}return c.Be()}un(e){const n=new wd;return Th.Ee.ae(e,n.Ke(0)),n.Be()}ln(e,n){const c=new wd;return Th.Ee.ae(X(this.databaseId,n),c.Ke(function(p){const _=$o(p);return 0===_.length?0:_[_.length-1].kind}(e))),c.Be()}rn(e,n,c){if(null===c)return[];let p=[];p.push(new wd);let _=0;for(const w of $o(e)){const N=c[_++];for(const te of p)if(this.fn(n,w.fieldPath)&&$e(N))p=this.dn(p,w,N);else{const ce=te.Ke(w.kind);Th.Ee.ae(N,ce)}}return this._n(p)}sn(e,n,c){return this.rn(e,n,c.position)}_n(e){const n=[];for(let c=0;c<e.length;++c)n[c]=e[c].Be();return n}dn(e,n,c){const p=[...e],_=[];for(const w of c.arrayValue.values||[])for(const N of p){const te=new wd;te.seed(N.Be()),Th.Ee.ae(w,te.Ke(n.kind)),_.push(te)}return _}fn(e,n){return!!e.filters.find(c=>c instanceof ei&&c.field.isEqual(n)&&("in"===c.op||"not-in"===c.op))}getFieldIndexes(e,n){const c=kg(e),p=Ch(e);return(n?c.W("collectionGroupIndex",IDBKeyRange.bound(n,n)):c.W()).next(_=>{const w=[];return Lt.forEach(_,N=>p.get([N.indexId,this.uid]).next(te=>{w.push(function(ce,Ae){const rt=Ae?new ul(Ae.sequenceNumber,new xs(Yc(Ae.readTime),new Mn(_c(Ae.documentKey)),Ae.largestBatchId)):ul.empty(),kt=ce.fields.map(([on,gn])=>new Vl(_s.fromServerFormat(on),gn));return new al(ce.indexId,ce.collectionGroup,kt,rt)}(N,te))})).next(()=>w)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(n=>0===n.length?null:(n.sort((c,p)=>{const _=c.indexState.sequenceNumber-p.indexState.sequenceNumber;return 0!==_?_:Mr(c.collectionGroup,p.collectionGroup)}),n[0].collectionGroup))}updateCollectionGroup(e,n,c){const p=kg(e),_=Ch(e);return this.wn(e).next(w=>p.W("collectionGroupIndex",IDBKeyRange.bound(n,n)).next(N=>Lt.forEach(N,te=>_.put(xg(te.indexId,this.user,w,c)))))}updateIndexEntries(e,n){const c=new Map;return Lt.forEach(n,(p,_)=>{const w=c.get(p.collectionGroup);return(w?Lt.resolve(w):this.getFieldIndexes(e,p.collectionGroup)).next(N=>(c.set(p.collectionGroup,N),Lt.forEach(N,te=>this.mn(e,p,te).next(ce=>{const Ae=this.gn(_,te);return ce.isEqual(Ae)?Lt.resolve():this.yn(e,_,te,ce,Ae)}))))})}pn(e,n,c,p){return wh(e).put({indexId:p.indexId,uid:this.uid,arrayValue:p.arrayValue,directionalValue:p.directionalValue,orderedDocumentKey:this.ln(c,n.key),documentKey:n.key.path.toArray()})}In(e,n,c,p){return wh(e).delete([p.indexId,this.uid,p.arrayValue,p.directionalValue,this.ln(c,n.key),n.key.path.toArray()])}mn(e,n,c){const p=wh(e);let _=new es(Yl);return p.X({index:"documentKeyIndex",range:IDBKeyRange.only([c.indexId,this.uid,this.ln(c,n)])},(w,N)=>{_=_.add(new bh(c.indexId,n,N.arrayValue,N.directionalValue))}).next(()=>_)}gn(e,n){let c=new es(Yl);const p=this.hn(n,e);if(null==p)return c;const _=Nu(n);if(null!=_){const w=e.data.field(_.fieldPath);if($e(w))for(const N of w.arrayValue.values||[])c=c.add(new bh(n.indexId,e.key,this.un(N),p))}else c=c.add(new bh(n.indexId,e.key,Af,p));return c}yn(e,n,c,p,_){Kt("IndexedDbIndexManager","Updating index entries for document '%s'",n.key);const w=[];return function(N,te,ce,Ae,rt){const kt=N.getIterator(),on=te.getIterator();let gn=Rc(kt),Yn=Rc(on);for(;gn||Yn;){let br=!1,Ws=!1;if(gn&&Yn){const mo=ce(gn,Yn);mo<0?Ws=!0:mo>0&&(br=!0)}else null!=gn?Ws=!0:br=!0;br?(Ae(Yn),Yn=Rc(on)):Ws?(rt(gn),gn=Rc(kt)):(gn=Rc(kt),Yn=Rc(on))}}(p,_,Yl,N=>{w.push(this.pn(e,n,c,N))},N=>{w.push(this.In(e,n,c,N))}),Lt.waitFor(w)}wn(e){let n=1;return Ch(e).X({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(c,p,_)=>{_.done(),n=p.sequenceNumber+1}).next(()=>n)}createRange(e,n,c){c=c.sort((w,N)=>Yl(w,N)).filter((w,N,te)=>!N||0!==Yl(w,te[N-1]));const p=[];p.push(e);for(const w of c){const N=Yl(w,e),te=Yl(w,n);if(0===N)p[0]=e.Ge();else if(N>0&&te<0)p.push(w),p.push(w.Ge());else if(te>0)break}p.push(n);const _=[];for(let w=0;w<p.length;w+=2){if(this.Tn(p[w],p[w+1]))return[];_.push(IDBKeyRange.bound([p[w].indexId,this.uid,p[w].arrayValue,p[w].directionalValue,Af,[]],[p[w+1].indexId,this.uid,p[w+1].arrayValue,p[w+1].directionalValue,Af,[]]))}return _}Tn(e,n){return Yl(e,n)>0}getMinOffsetFromCollectionGroup(e,n){return this.getFieldIndexes(e,n).next(Ih)}getMinOffset(e,n){return Lt.mapArray(this.en(n),c=>this.nn(e,c).next(p=>p||Fn())).next(Ih)}}function Og(a){return Lo(a,"collectionParents")}function wh(a){return Lo(a,"indexEntries")}function kg(a){return Lo(a,"indexConfiguration")}function Ch(a){return Lo(a,"indexState")}function Ih(a){Vn(0!==a.length);let e=a[0].indexState.offset,n=e.largestBatchId;for(let c=1;c<a.length;c++){const p=a[c].indexState.offset;cu(p,e)<0&&(e=p),n<p.largestBatchId&&(n=p.largestBatchId)}return new xs(e.readTime,e.documentKey,n)}const Gm={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class ju{constructor(e,n,c){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=c}static withCacheSize(e){return new ju(e,ju.DEFAULT_COLLECTION_PERCENTILE,ju.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function Rg(a,e,n){const c=a.store("mutations"),p=a.store("documentMutations"),_=[],w=IDBKeyRange.only(n.batchId);let N=0;const te=c.X({range:w},(Ae,rt,kt)=>(N++,kt.delete()));_.push(te.next(()=>{Vn(1===N)}));const ce=[];for(const Ae of n.mutations){const rt=gp(e,Ae.key.path,n.batchId);_.push(p.delete(rt)),ce.push(Ae.key)}return Lt.waitFor(_).next(()=>ce)}function Pf(a){if(!a)return 0;let e;if(a.document)e=a.document;else if(a.unknownDocument)e=a.unknownDocument;else{if(!a.noDocument)throw Fn();e=a.noDocument}return JSON.stringify(e).length}ju.DEFAULT_COLLECTION_PERCENTILE=10,ju.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,ju.DEFAULT=new ju(41943040,ju.DEFAULT_COLLECTION_PERCENTILE,ju.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),ju.DISABLED=new ju(-1,0,0);class Jc{constructor(e,n,c,p){this.userId=e,this.Tt=n,this.indexManager=c,this.referenceDelegate=p,this.En={}}static ue(e,n,c,p){Vn(""!==e.uid);const _=e.isAuthenticated()?e.uid:"";return new Jc(_,n,c,p)}checkEmpty(e){let n=!0;const c=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return xd(e).X({index:"userMutationsIndex",range:c},(p,_,w)=>{n=!1,w.done()}).next(()=>n)}addMutationBatch(e,n,c,p){const _=bl(e),w=xd(e);return w.add({}).next(N=>{Vn("number"==typeof N);const te=new yp(N,n,c,p),ce=function(kt,on,gn){const Yn=gn.baseMutations.map(Ws=>Er(kt.oe,Ws)),br=gn.mutations.map(Ws=>Er(kt.oe,Ws));return{userId:on,batchId:gn.batchId,localWriteTimeMs:gn.localWriteTime.toMillis(),baseMutations:Yn,mutations:br}}(this.Tt,this.userId,te),Ae=[];let rt=new es((kt,on)=>Mr(kt.canonicalString(),on.canonicalString()));for(const kt of p){const on=gp(this.userId,kt.key.path,N);rt=rt.add(kt.key.path.popLast()),Ae.push(w.put(ce)),Ae.push(_.put(on,mh))}return rt.forEach(kt=>{Ae.push(this.indexManager.addToCollectionParentIndex(e,kt))}),e.addOnCommittedListener(()=>{this.En[N]=te.keys()}),Lt.waitFor(Ae).next(()=>te)})}lookupMutationBatch(e,n){return xd(e).get(n).next(c=>c?(Vn(c.userId===this.userId),bc(this.Tt,c)):null)}An(e,n){return this.En[n]?Lt.resolve(this.En[n]):this.lookupMutationBatch(e,n).next(c=>{if(c){const p=c.keys();return this.En[n]=p,p}return null})}getNextMutationBatchAfterBatchId(e,n){const c=n+1,p=IDBKeyRange.lowerBound([this.userId,c]);let _=null;return xd(e).X({index:"userMutationsIndex",range:p},(w,N,te)=>{N.userId===this.userId&&(Vn(N.batchId>=c),_=bc(this.Tt,N)),te.done()}).next(()=>_)}getHighestUnacknowledgedBatchId(e){const n=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let c=-1;return xd(e).X({index:"userMutationsIndex",range:n,reverse:!0},(p,_,w)=>{c=_.batchId,w.done()}).next(()=>c)}getAllMutationBatches(e){const n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return xd(e).W("userMutationsIndex",n).next(c=>c.map(p=>bc(this.Tt,p)))}getAllMutationBatchesAffectingDocumentKey(e,n){const c=Sd(this.userId,n.path),p=IDBKeyRange.lowerBound(c),_=[];return bl(e).X({range:p},(w,N,te)=>{const[ce,Ae,rt]=w,kt=_c(Ae);if(ce===this.userId&&n.path.isEqual(kt))return xd(e).get(rt).next(on=>{if(!on)throw Fn();Vn(on.userId===this.userId),_.push(bc(this.Tt,on))});te.done()}).next(()=>_)}getAllMutationBatchesAffectingDocumentKeys(e,n){let c=new es(Mr);const p=[];return n.forEach(_=>{const w=Sd(this.userId,_.path),N=IDBKeyRange.lowerBound(w),te=bl(e).X({range:N},(ce,Ae,rt)=>{const[kt,on,gn]=ce,Yn=_c(on);kt===this.userId&&_.path.isEqual(Yn)?c=c.add(gn):rt.done()});p.push(te)}),Lt.waitFor(p).next(()=>this.Rn(e,c))}getAllMutationBatchesAffectingQuery(e,n){const c=n.path,p=c.length+1,_=Sd(this.userId,c),w=IDBKeyRange.lowerBound(_);let N=new es(Mr);return bl(e).X({range:w},(te,ce,Ae)=>{const[rt,kt,on]=te,gn=_c(kt);rt===this.userId&&c.isPrefixOf(gn)?gn.length===p&&(N=N.add(on)):Ae.done()}).next(()=>this.Rn(e,N))}Rn(e,n){const c=[],p=[];return n.forEach(_=>{p.push(xd(e).get(_).next(w=>{if(null===w)throw Fn();Vn(w.userId===this.userId),c.push(bc(this.Tt,w))}))}),Lt.waitFor(p).next(()=>c)}removeMutationBatch(e,n){return Rg(e.re,this.userId,n).next(c=>(e.addOnCommittedListener(()=>{this.bn(n.batchId)}),Lt.forEach(c,p=>this.referenceDelegate.markPotentiallyOrphaned(e,p))))}bn(e){delete this.En[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(n=>{if(!n)return Lt.resolve();const c=IDBKeyRange.lowerBound([this.userId]),p=[];return bl(e).X({range:c},(_,w,N)=>{if(_[0]===this.userId){const te=_c(_[1]);p.push(te)}else N.done()}).next(()=>{Vn(0===p.length)})})}containsKey(e,n){return ny(e,this.userId,n)}vn(e){return Ql(e).get(this.userId).next(n=>n||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function ny(a,e,n){const c=Sd(e,n.path),p=c[1],_=IDBKeyRange.lowerBound(c);let w=!1;return bl(a).X({range:_,Z:!0},(N,te,ce)=>{const[Ae,rt,kt]=N;Ae===e&&rt===p&&(w=!0),ce.done()}).next(()=>w)}function xd(a){return Lo(a,"mutations")}function bl(a){return Lo(a,"documentMutations")}function Ql(a){return Lo(a,"mutationQueues")}class xh{constructor(e){this.Pn=e}next(){return this.Pn+=2,this.Pn}static Vn(){return new xh(0)}static Sn(){return new xh(-1)}}class $m{constructor(e,n){this.referenceDelegate=e,this.Tt=n}allocateTargetId(e){return this.Dn(e).next(n=>{const c=new xh(n.highestTargetId);return n.highestTargetId=c.next(),this.Cn(e,n).next(()=>n.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Dn(e).next(n=>ur.fromTimestamp(new zi(n.lastRemoteSnapshotVersion.seconds,n.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Dn(e).next(n=>n.highestListenSequenceNumber)}setTargetsMetadata(e,n,c){return this.Dn(e).next(p=>(p.highestListenSequenceNumber=n,c&&(p.lastRemoteSnapshotVersion=c.toTimestamp()),n>p.highestListenSequenceNumber&&(p.highestListenSequenceNumber=n),this.Cn(e,p)))}addTargetData(e,n){return this.xn(e,n).next(()=>this.Dn(e).next(c=>(c.targetCount+=1,this.Nn(n,c),this.Cn(e,c))))}updateTargetData(e,n){return this.xn(e,n)}removeTargetData(e,n){return this.removeMatchingKeysForTargetId(e,n.targetId).next(()=>Cp(e).delete(n.targetId)).next(()=>this.Dn(e)).next(c=>(Vn(c.targetCount>0),c.targetCount-=1,this.Cn(e,c)))}removeTargets(e,n,c){let p=0;const _=[];return Cp(e).X((w,N)=>{const te=Tl(N);te.sequenceNumber<=n&&null===c.get(te.targetId)&&(p++,_.push(this.removeTargetData(e,te)))}).next(()=>Lt.waitFor(_)).next(()=>p)}forEachTarget(e,n){return Cp(e).X((c,p)=>{const _=Tl(p);n(_)})}Dn(e){return x_(e).get("targetGlobalKey").next(n=>(Vn(null!==n),n))}Cn(e,n){return x_(e).put("targetGlobalKey",n)}xn(e,n){return Cp(e).put(Um(this.Tt,n))}Nn(e,n){let c=!1;return e.targetId>n.highestTargetId&&(n.highestTargetId=e.targetId,c=!0),e.sequenceNumber>n.highestListenSequenceNumber&&(n.highestListenSequenceNumber=e.sequenceNumber,c=!0),c}getTargetCount(e){return this.Dn(e).next(n=>n.targetCount)}getTargetData(e,n){const c=Lc(n),p=IDBKeyRange.bound([c,Number.NEGATIVE_INFINITY],[c,Number.POSITIVE_INFINITY]);let _=null;return Cp(e).X({range:p,index:"queryTargetsIndex"},(w,N,te)=>{const ce=Tl(N);Fc(n,ce.target)&&(_=ce,te.done())}).next(()=>_)}addMatchingKeys(e,n,c){const p=[],_=ed(e);return n.forEach(w=>{const N=Cu(w.path);p.push(_.put({targetId:c,path:N})),p.push(this.referenceDelegate.addReference(e,c,w))}),Lt.waitFor(p)}removeMatchingKeys(e,n,c){const p=ed(e);return Lt.forEach(n,_=>{const w=Cu(_.path);return Lt.waitFor([p.delete([c,w]),this.referenceDelegate.removeReference(e,c,_)])})}removeMatchingKeysForTargetId(e,n){const c=ed(e),p=IDBKeyRange.bound([n],[n+1],!1,!0);return c.delete(p)}getMatchingKeysForTargetId(e,n){const c=IDBKeyRange.bound([n],[n+1],!1,!0),p=ed(e);let _=pi();return p.X({range:c,Z:!0},(w,N,te)=>{const ce=_c(w[1]),Ae=new Mn(ce);_=_.add(Ae)}).next(()=>_)}containsKey(e,n){const c=Cu(n.path),p=IDBKeyRange.bound([c],[Oo(c)],!1,!0);let _=0;return ed(e).X({index:"documentTargetsIndex",Z:!0,range:p},([w,N],te,ce)=>{0!==w&&(_++,ce.done())}).next(()=>_>0)}ie(e,n){return Cp(e).get(n).next(c=>c?Tl(c):null)}}function Cp(a){return Lo(a,"targets")}function x_(a){return Lo(a,"targetGlobal")}function ed(a){return Lo(a,"targetDocuments")}function ry([a,e],[n,c]){const p=Mr(a,n);return 0===p?Mr(e,c):p}class Ip{constructor(e){this.kn=e,this.buffer=new es(ry),this.On=0}Mn(){return++this.On}Fn(e){const n=[e,this.Mn()];if(this.buffer.size<this.kn)this.buffer=this.buffer.add(n);else{const c=this.buffer.last();ry(n,c)<0&&(this.buffer=this.buffer.delete(c).add(n))}}get maxValue(){return this.buffer.last()[0]}}class zm{constructor(e,n,c){this.garbageCollector=e,this.asyncQueue=n,this.localStore=c,this.$n=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Bn(6e4)}stop(){this.$n&&(this.$n.cancel(),this.$n=null)}get started(){return null!==this.$n}Bn(e){var n=this;Kt("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.$n=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,Fe.Z)(function*(){n.$n=null;try{yield n.localStore.collectGarbage(n.garbageCollector)}catch(c){Ya(c)?Kt("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",c):yield Ka(c)}yield n.Bn(3e5)}))}}class iy{constructor(e,n){this.Ln=e,this.params=n}calculateTargetCount(e,n){return this.Ln.qn(e).next(c=>Math.floor(n/100*c))}nthSequenceNumber(e,n){if(0===n)return Lt.resolve(ya.at);const c=new Ip(n);return this.Ln.forEachTarget(e,p=>c.Fn(p.sequenceNumber)).next(()=>this.Ln.Un(e,p=>c.Fn(p))).next(()=>c.maxValue)}removeTargets(e,n,c){return this.Ln.removeTargets(e,n,c)}removeOrphanedDocuments(e,n){return this.Ln.removeOrphanedDocuments(e,n)}collect(e,n){return-1===this.params.cacheSizeCollectionThreshold?(Kt("LruGarbageCollector","Garbage collection skipped; disabled"),Lt.resolve(Gm)):this.getCacheSize(e).next(c=>c<this.params.cacheSizeCollectionThreshold?(Kt("LruGarbageCollector",`Garbage collection skipped; Cache size ${c} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Gm):this.Kn(e,n))}getCacheSize(e){return this.Ln.getCacheSize(e)}Kn(e,n){let c,p,_,w,N,te,ce;const Ae=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(rt=>(rt>this.params.maximumSequenceNumbersToCollect?(Kt("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${rt}`),p=this.params.maximumSequenceNumbersToCollect):p=rt,w=Date.now(),this.nthSequenceNumber(e,p))).next(rt=>(c=rt,N=Date.now(),this.removeTargets(e,c,n))).next(rt=>(_=rt,te=Date.now(),this.removeOrphanedDocuments(e,c))).next(rt=>(ce=Date.now(),Ii()<=Mt.in.DEBUG&&Kt("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${w-Ae}ms\n\tDetermined least recently used ${p} in `+(N-w)+`ms\n\tRemoved ${_} targets in `+(te-N)+`ms\n\tRemoved ${rt} documents in `+(ce-te)+`ms\nTotal Duration: ${ce-Ae}ms`),Lt.resolve({didRun:!0,sequenceNumbersCollected:p,targetsRemoved:_,documentsRemoved:rt})))}}class sy{constructor(e,n){this.db=e,this.garbageCollector=new iy(this,n)}qn(e){const n=this.Gn(e);return this.db.getTargetCache().getTargetCount(e).next(c=>n.next(p=>c+p))}Gn(e){let n=0;return this.Un(e,c=>{n++}).next(()=>n)}forEachTarget(e,n){return this.db.getTargetCache().forEachTarget(e,n)}Un(e,n){return this.Qn(e,(c,p)=>n(p))}addReference(e,n,c){return Ng(e,c)}removeReference(e,n,c){return Ng(e,c)}removeTargets(e,n,c){return this.db.getTargetCache().removeTargets(e,n,c)}markPotentiallyOrphaned(e,n){return Ng(e,n)}jn(e,n){return function(c,p){let _=!1;return Ql(c).tt(w=>ny(c,w,p).next(N=>(N&&(_=!0),Lt.resolve(!N)))).next(()=>_)}(e,n)}removeOrphanedDocuments(e,n){const c=this.db.getRemoteDocumentCache().newChangeBuffer(),p=[];let _=0;return this.Qn(e,(w,N)=>{if(N<=n){const te=this.jn(e,w).next(ce=>{if(!ce)return _++,c.getEntry(e,w).next(()=>(c.removeEntry(w,ur.min()),ed(e).delete([0,Cu(w.path)])))});p.push(te)}}).next(()=>Lt.waitFor(p)).next(()=>c.apply(e)).next(()=>_)}removeTarget(e,n){const c=n.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,c)}updateLimboDocument(e,n){return Ng(e,n)}Qn(e,n){const c=ed(e);let p,_=ya.at;return c.X({index:"documentTargetsIndex"},([w,N],{path:te,sequenceNumber:ce})=>{0===w?(_!==ya.at&&n(new Mn(_c(p)),_),_=ce,p=te):_=ya.at}).next(()=>{_!==ya.at&&n(new Mn(_c(p)),_)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Ng(a,e){return ed(a).put((c=a.currentSequenceNumber,{targetId:0,path:Cu(e.path),sequenceNumber:c}));var c}class oy{constructor(){this.changes=new fl(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,js.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const c=this.changes.get(n);return void 0!==c?Lt.resolve(c):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class Fl{constructor(e){this.Tt=e}setIndexManager(e){this.indexManager=e}addEntry(e,n,c){return Dh(e).put(c)}removeEntry(e,n,c){return Dh(e).delete(function(p,_){const w=p.path.toArray();return[w.slice(0,w.length-2),w[w.length-2],_p(_),w[w.length-1]]}(n,c))}updateMetadata(e,n){return this.getMetadata(e).next(c=>(c.byteSize+=n,this.zn(e,c)))}getEntry(e,n){let c=js.newInvalidDocument(n);return Dh(e).X({index:"documentKeyIndex",range:IDBKeyRange.only(xp(n))},(p,_)=>{c=this.Wn(n,_)}).next(()=>c)}Hn(e,n){let c={size:0,document:js.newInvalidDocument(n)};return Dh(e).X({index:"documentKeyIndex",range:IDBKeyRange.only(xp(n))},(p,_)=>{c={document:this.Wn(n,_),size:Pf(_)}}).next(()=>c)}getEntries(e,n){let c=eu();return this.Jn(e,n,(p,_)=>{const w=this.Wn(p,_);c=c.insert(p,w)}).next(()=>c)}Yn(e,n){let c=eu(),p=new ho(Mn.comparator);return this.Jn(e,n,(_,w)=>{const N=this.Wn(_,w);c=c.insert(_,N),p=p.insert(_,Pf(w))}).next(()=>({documents:c,Zn:p}))}Jn(e,n,c){if(n.isEmpty())return Lt.resolve();let p=new es(Wm);n.forEach(te=>p=p.add(te));const _=IDBKeyRange.bound(xp(p.first()),xp(p.last())),w=p.getIterator();let N=w.getNext();return Dh(e).X({index:"documentKeyIndex",range:_},(te,ce,Ae)=>{const rt=Mn.fromSegments([...ce.prefixPath,ce.collectionGroup,ce.documentId]);for(;N&&Wm(N,rt)<0;)c(N,null),N=w.getNext();N&&N.isEqual(rt)&&(c(N,ce),N=w.hasNext()?w.getNext():null),N?Ae.j(xp(N)):Ae.done()}).next(()=>{for(;N;)c(N,null),N=w.hasNext()?w.getNext():null})}getDocumentsMatchingQuery(e,n,c,p){const _=n.path,w=[_.popLast().toArray(),_.lastSegment(),_p(c.readTime),c.documentKey.path.isEmpty()?"":c.documentKey.path.lastSegment()],N=[_.popLast().toArray(),_.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Dh(e).W(IDBKeyRange.bound(w,N,!0)).next(te=>{let ce=eu();for(const Ae of te){const rt=this.Wn(Mn.fromSegments(Ae.prefixPath.concat(Ae.collectionGroup,Ae.documentId)),Ae);rt.isFoundDocument()&&(ba(n,rt)||p.has(rt.key))&&(ce=ce.insert(rt.key,rt))}return ce})}getAllFromCollectionGroup(e,n,c,p){let _=eu();const w=cy(n,c),N=cy(n,xs.max());return Dh(e).X({index:"collectionGroupIndex",range:IDBKeyRange.bound(w,N,!0)},(te,ce,Ae)=>{const rt=this.Wn(Mn.fromSegments(ce.prefixPath.concat(ce.collectionGroup,ce.documentId)),ce);_=_.insert(rt.key,rt),_.size===p&&Ae.done()}).next(()=>_)}newChangeBuffer(e){return new uy(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(n=>n.byteSize)}getMetadata(e){return ly(e).get("remoteDocumentGlobalKey").next(n=>(Vn(!!n),n))}zn(e,n){return ly(e).put("remoteDocumentGlobalKey",n)}Wn(e,n){if(n){const c=function xf(a,e){let n;if(e.document)n=Ln(a.oe,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const c=Mn.fromSegments(e.noDocument.path),p=Yc(e.noDocument.readTime);n=js.newNoDocument(c,p),e.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!e.unknownDocument)return Fn();{const c=Mn.fromSegments(e.unknownDocument.path),p=Yc(e.unknownDocument.version);n=js.newUnknownDocument(c,p)}}return e.readTime&&n.setReadTime(function(c){const p=new zi(c[0],c[1]);return ur.fromTimestamp(p)}(e.readTime)),n}(this.Tt,n);if(!c.isNoDocument()||!c.version.isEqual(ur.min()))return c}return js.newInvalidDocument(e)}}function ay(a){return new Fl(a)}class uy extends oy{constructor(e,n){super(),this.Xn=e,this.trackRemovals=n,this.ts=new fl(c=>c.toString(),(c,p)=>c.isEqual(p))}applyChanges(e){const n=[];let c=0,p=new es((_,w)=>Mr(_.canonicalString(),w.canonicalString()));return this.changes.forEach((_,w)=>{const N=this.ts.get(_);if(n.push(this.Xn.removeEntry(e,_,N.readTime)),w.isValidDocument()){const te=Ig(this.Xn.Tt,w);p=p.add(_.path.popLast());const ce=Pf(te);c+=ce-N.size,n.push(this.Xn.addEntry(e,_,te))}else if(c-=N.size,this.trackRemovals){const te=Ig(this.Xn.Tt,w.convertToNoDocument(ur.min()));n.push(this.Xn.addEntry(e,_,te))}}),p.forEach(_=>{n.push(this.Xn.indexManager.addToCollectionParentIndex(e,_))}),n.push(this.Xn.updateMetadata(e,c)),Lt.waitFor(n)}getFromCache(e,n){return this.Xn.Hn(e,n).next(c=>(this.ts.set(n,{size:c.size,readTime:c.document.readTime}),c.document))}getAllFromCache(e,n){return this.Xn.Yn(e,n).next(({documents:c,Zn:p})=>(p.forEach((_,w)=>{this.ts.set(_,{size:w,readTime:c.get(_).readTime})}),c))}}function ly(a){return Lo(a,"remoteDocumentGlobal")}function Dh(a){return Lo(a,"remoteDocumentsV14")}function xp(a){const e=a.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function cy(a,e){const n=e.documentKey.path.toArray();return[a,_p(e.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function Wm(a,e){const n=a.path.toArray(),c=e.path.toArray();let p=0;for(let _=0;_<n.length-2&&_<c.length-2;++_)if(p=Mr(n[_],c[_]),p)return p;return p=Mr(n.length,c.length),p||(p=Mr(n[n.length-2],c[c.length-2]),p||Mr(n[n.length-1],c[c.length-1]))}class D_{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}class Lg{constructor(e,n,c,p){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=c,this.indexManager=p}getDocument(e,n){let c=null;return this.documentOverlayCache.getOverlay(e,n).next(p=>(c=p,this.remoteDocumentCache.getEntry(e,n))).next(p=>(null!==c&&lh(c.mutation,p,Zr.empty(),zi.now()),p))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(c=>this.getLocalViewOfDocuments(e,c,pi()).next(()=>c))}getLocalViewOfDocuments(e,n,c=pi()){const p=wu();return this.populateOverlays(e,p,n).next(()=>this.computeViews(e,n,p,c).next(_=>{let w=Fu();return _.forEach((N,te)=>{w=w.insert(N,te.overlayedDocument)}),w}))}getOverlayedDocuments(e,n){const c=wu();return this.populateOverlays(e,c,n).next(()=>this.computeViews(e,n,c,pi()))}populateOverlays(e,n,c){const p=[];return c.forEach(_=>{n.has(_)||p.push(_)}),this.documentOverlayCache.getOverlays(e,p).next(_=>{_.forEach((w,N)=>{n.set(w,N)})})}computeViews(e,n,c,p){let _=eu();const w=Ju(),N=Ju();return n.forEach((te,ce)=>{const Ae=c.get(ce.key);p.has(ce.key)&&(void 0===Ae||Ae.mutation instanceof fu)?_=_.insert(ce.key,ce):void 0!==Ae?(w.set(ce.key,Ae.mutation.getFieldMask()),lh(Ae.mutation,ce,Ae.mutation.getFieldMask(),zi.now())):w.set(ce.key,Zr.empty())}),this.recalculateAndSaveOverlays(e,_).next(te=>(te.forEach((ce,Ae)=>w.set(ce,Ae)),n.forEach((ce,Ae)=>{var rt;return N.set(ce,new D_(Ae,null!==(rt=w.get(ce))&&void 0!==rt?rt:null))}),N))}recalculateAndSaveOverlays(e,n){const c=Ju();let p=new ho((w,N)=>w-N),_=pi();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(w=>{for(const N of w)N.keys().forEach(te=>{const ce=n.get(te);if(null===ce)return;let Ae=c.get(te)||Zr.empty();Ae=N.applyToLocalView(ce,Ae),c.set(te,Ae);const rt=(p.get(N.batchId)||pi()).add(te);p=p.insert(N.batchId,rt)})}).next(()=>{const w=[],N=p.getReverseIterator();for(;N.hasNext();){const te=N.getNext(),ce=te.key,Ae=te.value,rt=pc();Ae.forEach(kt=>{if(!_.has(kt)){const on=Td(n.get(kt),c.get(kt));null!==on&&rt.set(kt,on),_=_.add(kt)}}),w.push(this.documentOverlayCache.saveOverlays(e,ce,rt))}return Lt.waitFor(w)}).next(()=>c)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(c=>this.recalculateAndSaveOverlays(e,c))}getDocumentsMatchingQuery(e,n,c){return Mn.isDocumentKey((p=n).path)&&null===p.collectionGroup&&0===p.filters.length?this.getDocumentsMatchingDocumentQuery(e,n.path):cf(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,c):this.getDocumentsMatchingCollectionQuery(e,n,c);var p}getNextDocuments(e,n,c,p){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,c,p).next(_=>{const w=p-_.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,c.largestBatchId,p-_.size):Lt.resolve(wu());let N=-1,te=_;return w.next(ce=>Lt.forEach(ce,(Ae,rt)=>(N<rt.largestBatchId&&(N=rt.largestBatchId),_.get(Ae)?Lt.resolve():this.remoteDocumentCache.getEntry(e,Ae).next(kt=>{te=te.insert(Ae,kt)}))).next(()=>this.populateOverlays(e,ce,_)).next(()=>this.computeViews(e,te,ce,pi())).next(Ae=>({batchId:N,changes:Gc(Ae)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new Mn(n)).next(c=>{let p=Fu();return c.isFoundDocument()&&(p=p.insert(c.key,c)),p})}getDocumentsMatchingCollectionGroupQuery(e,n,c){const p=n.collectionGroup;let _=Fu();return this.indexManager.getCollectionParents(e,p).next(w=>Lt.forEach(w,N=>{const te=(ce=n,Ae=N.child(p),new wo(Ae,null,ce.explicitOrderBy.slice(),ce.filters.slice(),ce.limit,ce.limitType,ce.startAt,ce.endAt));var ce,Ae;return this.getDocumentsMatchingCollectionQuery(e,te,c).next(ce=>{ce.forEach((Ae,rt)=>{_=_.insert(Ae,rt)})})}).next(()=>_))}getDocumentsMatchingCollectionQuery(e,n,c){let p;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,c.largestBatchId).next(_=>(p=_,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,c,p))).next(_=>{p.forEach((N,te)=>{const ce=te.getKey();null===_.get(ce)&&(_=_.insert(ce,js.newInvalidDocument(ce)))});let w=Fu();return _.forEach((N,te)=>{const ce=p.get(N);void 0!==ce&&lh(ce.mutation,te,Zr.empty(),zi.now()),ba(n,te)&&(w=w.insert(N,te))}),w})}}class A_{constructor(e){this.Tt=e,this.es=new Map,this.ns=new Map}getBundleMetadata(e,n){return Lt.resolve(this.es.get(n))}saveBundleMetadata(e,n){var c;return this.es.set(n.id,{id:(c=n).id,version:c.version,createTime:Ro(c.createTime)}),Lt.resolve()}getNamedQuery(e,n){return Lt.resolve(this.ns.get(n))}saveNamedQuery(e,n){return this.ns.set(n.name,{name:(c=n).name,query:Df(c.bundledQuery),readTime:Ro(c.readTime)}),Lt.resolve();var c}}class yi{constructor(){this.overlays=new ho(Mn.comparator),this.ss=new Map}getOverlay(e,n){return Lt.resolve(this.overlays.get(n))}getOverlays(e,n){const c=wu();return Lt.forEach(n,p=>this.getOverlay(e,p).next(_=>{null!==_&&c.set(p,_)})).next(()=>c)}saveOverlays(e,n,c){return c.forEach((p,_)=>{this.ce(e,n,_)}),Lt.resolve()}removeOverlaysForBatchId(e,n,c){const p=this.ss.get(c);return void 0!==p&&(p.forEach(_=>this.overlays=this.overlays.remove(_)),this.ss.delete(c)),Lt.resolve()}getOverlaysForCollection(e,n,c){const p=wu(),_=n.length+1,w=new Mn(n.child("")),N=this.overlays.getIteratorFrom(w);for(;N.hasNext();){const te=N.getNext().value,ce=te.getKey();if(!n.isPrefixOf(ce.path))break;ce.path.length===_&&te.largestBatchId>c&&p.set(te.getKey(),te)}return Lt.resolve(p)}getOverlaysForCollectionGroup(e,n,c,p){let _=new ho((ce,Ae)=>ce-Ae);const w=this.overlays.getIterator();for(;w.hasNext();){const ce=w.getNext().value;if(ce.getKey().getCollectionGroup()===n&&ce.largestBatchId>c){let Ae=_.get(ce.largestBatchId);null===Ae&&(Ae=wu(),_=_.insert(ce.largestBatchId,Ae)),Ae.set(ce.getKey(),ce)}}const N=wu(),te=_.getIterator();for(;te.hasNext()&&(te.getNext().value.forEach((ce,Ae)=>N.set(ce,Ae)),!(N.size()>=p)););return Lt.resolve(N)}ce(e,n,c){const p=this.overlays.get(c.key);if(null!==p){const w=this.ss.get(p.largestBatchId).delete(c.key);this.ss.set(p.largestBatchId,w)}this.overlays=this.overlays.insert(c.key,new wg(n,c));let _=this.ss.get(n);void 0===_&&(_=pi(),this.ss.set(n,_)),this.ss.set(n,_.add(c.key))}}class Dp{constructor(){this.rs=new es(Ea.os),this.us=new es(Ea.cs)}isEmpty(){return this.rs.isEmpty()}addReference(e,n){const c=new Ea(e,n);this.rs=this.rs.add(c),this.us=this.us.add(c)}hs(e,n){e.forEach(c=>this.addReference(c,n))}removeReference(e,n){this.ls(new Ea(e,n))}fs(e,n){e.forEach(c=>this.removeReference(c,n))}ds(e){const n=new Mn(new Ur([])),c=new Ea(n,e),p=new Ea(n,e+1),_=[];return this.us.forEachInRange([c,p],w=>{this.ls(w),_.push(w.key)}),_}_s(){this.rs.forEach(e=>this.ls(e))}ls(e){this.rs=this.rs.delete(e),this.us=this.us.delete(e)}ws(e){const n=new Mn(new Ur([])),c=new Ea(n,e),p=new Ea(n,e+1);let _=pi();return this.us.forEachInRange([c,p],w=>{_=_.add(w.key)}),_}containsKey(e){const n=new Ea(e,0),c=this.rs.firstAfterOrEqual(n);return null!==c&&e.isEqual(c.key)}}class Ea{constructor(e,n){this.key=e,this.gs=n}static os(e,n){return Mn.comparator(e.key,n.key)||Mr(e.gs,n.gs)}static cs(e,n){return Mr(e.gs,n.gs)||Mn.comparator(e.key,n.key)}}class dy{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.ys=1,this.ps=new es(Ea.os)}checkEmpty(e){return Lt.resolve(0===this.mutationQueue.length)}addMutationBatch(e,n,c,p){const _=this.ys;this.ys++;const w=new yp(_,n,c,p);this.mutationQueue.push(w);for(const N of p)this.ps=this.ps.add(new Ea(N.key,_)),this.indexManager.addToCollectionParentIndex(e,N.key.path.popLast());return Lt.resolve(w)}lookupMutationBatch(e,n){return Lt.resolve(this.Is(n))}getNextMutationBatchAfterBatchId(e,n){const p=this.Ts(n+1),_=p<0?0:p;return Lt.resolve(this.mutationQueue.length>_?this.mutationQueue[_]:null)}getHighestUnacknowledgedBatchId(){return Lt.resolve(0===this.mutationQueue.length?-1:this.ys-1)}getAllMutationBatches(e){return Lt.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const c=new Ea(n,0),p=new Ea(n,Number.POSITIVE_INFINITY),_=[];return this.ps.forEachInRange([c,p],w=>{const N=this.Is(w.gs);_.push(N)}),Lt.resolve(_)}getAllMutationBatchesAffectingDocumentKeys(e,n){let c=new es(Mr);return n.forEach(p=>{const _=new Ea(p,0),w=new Ea(p,Number.POSITIVE_INFINITY);this.ps.forEachInRange([_,w],N=>{c=c.add(N.gs)})}),Lt.resolve(this.Es(c))}getAllMutationBatchesAffectingQuery(e,n){const c=n.path,p=c.length+1;let _=c;Mn.isDocumentKey(_)||(_=_.child(""));const w=new Ea(new Mn(_),0);let N=new es(Mr);return this.ps.forEachWhile(te=>{const ce=te.key.path;return!!c.isPrefixOf(ce)&&(ce.length===p&&(N=N.add(te.gs)),!0)},w),Lt.resolve(this.Es(N))}Es(e){const n=[];return e.forEach(c=>{const p=this.Is(c);null!==p&&n.push(p)}),n}removeMutationBatch(e,n){Vn(0===this.As(n.batchId,"removed")),this.mutationQueue.shift();let c=this.ps;return Lt.forEach(n.mutations,p=>{const _=new Ea(p.key,n.batchId);return c=c.delete(_),this.referenceDelegate.markPotentiallyOrphaned(e,p.key)}).next(()=>{this.ps=c})}bn(e){}containsKey(e,n){const c=new Ea(n,0),p=this.ps.firstAfterOrEqual(c);return Lt.resolve(n.isEqual(p&&p.key))}performConsistencyCheck(e){return Lt.resolve()}As(e,n){return this.Ts(e)}Ts(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Is(e){const n=this.Ts(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}class P_{constructor(e){this.Rs=e,this.docs=new ho(Mn.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const c=n.key,p=this.docs.get(c),_=p?p.size:0,w=this.Rs(n);return this.docs=this.docs.insert(c,{document:n.mutableCopy(),size:w}),this.size+=w-_,this.indexManager.addToCollectionParentIndex(e,c.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const c=this.docs.get(n);return Lt.resolve(c?c.document.mutableCopy():js.newInvalidDocument(n))}getEntries(e,n){let c=eu();return n.forEach(p=>{const _=this.docs.get(p);c=c.insert(p,_?_.document.mutableCopy():js.newInvalidDocument(p))}),Lt.resolve(c)}getDocumentsMatchingQuery(e,n,c,p){let _=eu();const w=n.path,N=new Mn(w.child("")),te=this.docs.getIteratorFrom(N);for(;te.hasNext();){const{key:ce,value:{document:Ae}}=te.getNext();if(!w.isPrefixOf(ce.path))break;ce.path.length>w.length+1||cu(_u(Ae),c)<=0||(p.has(Ae.key)||ba(n,Ae))&&(_=_.insert(Ae.key,Ae.mutableCopy()))}return Lt.resolve(_)}getAllFromCollectionGroup(e,n,c,p){Fn()}bs(e,n){return Lt.forEach(this.docs,c=>n(c))}newChangeBuffer(e){return new M_(this)}getSize(e){return Lt.resolve(this.size)}}class M_ extends oy{constructor(e){super(),this.Xn=e}applyChanges(e){const n=[];return this.changes.forEach((c,p)=>{p.isValidDocument()?n.push(this.Xn.addEntry(e,p)):this.Xn.removeEntry(c)}),Lt.waitFor(n)}getFromCache(e,n){return this.Xn.getEntry(e,n)}getAllFromCache(e,n){return this.Xn.getEntries(e,n)}}class hy{constructor(e){this.persistence=e,this.vs=new fl(n=>Lc(n),Fc),this.lastRemoteSnapshotVersion=ur.min(),this.highestTargetId=0,this.Ps=0,this.Vs=new Dp,this.targetCount=0,this.Ss=xh.Vn()}forEachTarget(e,n){return this.vs.forEach((c,p)=>n(p)),Lt.resolve()}getLastRemoteSnapshotVersion(e){return Lt.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Lt.resolve(this.Ps)}allocateTargetId(e){return this.highestTargetId=this.Ss.next(),Lt.resolve(this.highestTargetId)}setTargetsMetadata(e,n,c){return c&&(this.lastRemoteSnapshotVersion=c),n>this.Ps&&(this.Ps=n),Lt.resolve()}xn(e){this.vs.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.Ss=new xh(n),this.highestTargetId=n),e.sequenceNumber>this.Ps&&(this.Ps=e.sequenceNumber)}addTargetData(e,n){return this.xn(n),this.targetCount+=1,Lt.resolve()}updateTargetData(e,n){return this.xn(n),Lt.resolve()}removeTargetData(e,n){return this.vs.delete(n.target),this.Vs.ds(n.targetId),this.targetCount-=1,Lt.resolve()}removeTargets(e,n,c){let p=0;const _=[];return this.vs.forEach((w,N)=>{N.sequenceNumber<=n&&null===c.get(N.targetId)&&(this.vs.delete(w),_.push(this.removeMatchingKeysForTargetId(e,N.targetId)),p++)}),Lt.waitFor(_).next(()=>p)}getTargetCount(e){return Lt.resolve(this.targetCount)}getTargetData(e,n){const c=this.vs.get(n)||null;return Lt.resolve(c)}addMatchingKeys(e,n,c){return this.Vs.hs(n,c),Lt.resolve()}removeMatchingKeys(e,n,c){this.Vs.fs(n,c);const p=this.persistence.referenceDelegate,_=[];return p&&n.forEach(w=>{_.push(p.markPotentiallyOrphaned(e,w))}),Lt.waitFor(_)}removeMatchingKeysForTargetId(e,n){return this.Vs.ds(n),Lt.resolve()}getMatchingKeysForTargetId(e,n){const c=this.Vs.ws(n);return Lt.resolve(c)}containsKey(e,n){return Lt.resolve(this.Vs.containsKey(n))}}class fy{constructor(e,n){this.Ds={},this.overlays={},this.Cs=new ya(0),this.xs=!1,this.xs=!0,this.referenceDelegate=e(this),this.Ns=new hy(this),this.indexManager=new I_,this.remoteDocumentCache=new P_(c=>this.referenceDelegate.ks(c)),this.Tt=new Cg(n),this.Os=new A_(this.Tt)}start(){return Promise.resolve()}shutdown(){return this.xs=!1,Promise.resolve()}get started(){return this.xs}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new yi,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let c=this.Ds[e.toKey()];return c||(c=new dy(n,this.referenceDelegate),this.Ds[e.toKey()]=c),c}getTargetCache(){return this.Ns}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Os}runTransaction(e,n,c){Kt("MemoryPersistence","Starting transaction:",e);const p=new qm(this.Cs.next());return this.referenceDelegate.Ms(),c(p).next(_=>this.referenceDelegate.Fs(p).next(()=>_)).toPromise().then(_=>(p.raiseOnCommittedEvent(),_))}$s(e,n){return Lt.or(Object.values(this.Ds).map(c=>()=>c.containsKey(e,n)))}}class qm extends Al{constructor(e){super(),this.currentSequenceNumber=e}}class Fg{constructor(e){this.persistence=e,this.Bs=new Dp,this.Ls=null}static qs(e){return new Fg(e)}get Us(){if(this.Ls)return this.Ls;throw Fn()}addReference(e,n,c){return this.Bs.addReference(c,n),this.Us.delete(c.toString()),Lt.resolve()}removeReference(e,n,c){return this.Bs.removeReference(c,n),this.Us.add(c.toString()),Lt.resolve()}markPotentiallyOrphaned(e,n){return this.Us.add(n.toString()),Lt.resolve()}removeTarget(e,n){this.Bs.ds(n.targetId).forEach(p=>this.Us.add(p.toString()));const c=this.persistence.getTargetCache();return c.getMatchingKeysForTargetId(e,n.targetId).next(p=>{p.forEach(_=>this.Us.add(_.toString()))}).next(()=>c.removeTargetData(e,n))}Ms(){this.Ls=new Set}Fs(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Lt.forEach(this.Us,c=>{const p=Mn.fromPath(c);return this.Ks(e,p).next(_=>{_||n.removeEntry(p,ur.min())})}).next(()=>(this.Ls=null,n.apply(e)))}updateLimboDocument(e,n){return this.Ks(e,n).next(c=>{c?this.Us.delete(n.toString()):this.Us.add(n.toString())})}ks(e){return 0}Ks(e,n){return Lt.or([()=>Lt.resolve(this.Bs.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.$s(e,n)])}}class Km{constructor(e){this.Tt=e}$(e,n,c,p){const _=new Oc("createOrUpgrade",n);var N;c<1&&p>=1&&(e.createObjectStore("owner"),(N=e).createObjectStore("mutationQueues",{keyPath:"userId"}),N.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",oa,{unique:!0}),N.createObjectStore("documentMutations"),tu(e),function(N){N.createObjectStore("remoteDocuments")}(e));let w=Lt.resolve();return c<3&&p>=3&&(0!==c&&(function(N){N.deleteObjectStore("targetDocuments"),N.deleteObjectStore("targets"),N.deleteObjectStore("targetGlobal")}(e),tu(e)),w=w.next(()=>function(N){const te=N.store("targetGlobal"),ce={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:ur.min().toTimestamp(),targetCount:0};return te.put("targetGlobalKey",ce)}(_))),c<4&&p>=4&&(0!==c&&(w=w.next(()=>function(N,te){return te.store("mutations").W().next(ce=>{N.deleteObjectStore("mutations"),N.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",oa,{unique:!0});const Ae=te.store("mutations"),rt=ce.map(kt=>Ae.put(kt));return Lt.waitFor(rt)})}(e,_))),w=w.next(()=>{!function(N){N.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),c<5&&p>=5&&(w=w.next(()=>this.Gs(_))),c<6&&p>=6&&(w=w.next(()=>(function(N){N.createObjectStore("remoteDocumentGlobal")}(e),this.Qs(_)))),c<7&&p>=7&&(w=w.next(()=>this.js(_))),c<8&&p>=8&&(w=w.next(()=>this.zs(e,_))),c<9&&p>=9&&(w=w.next(()=>{!function(N){N.objectStoreNames.contains("remoteDocumentChanges")&&N.deleteObjectStore("remoteDocumentChanges")}(e)})),c<10&&p>=10&&(w=w.next(()=>this.Ws(_))),c<11&&p>=11&&(w=w.next(()=>{(function(N){N.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(N){N.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),c<12&&p>=12&&(w=w.next(()=>{!function(N){const te=N.createObjectStore("documentOverlays",{keyPath:At});te.createIndex("collectionPathOverlayIndex",Eg,{unique:!1}),te.createIndex("collectionGroupOverlayIndex",Sg,{unique:!1})}(e)})),c<13&&p>=13&&(w=w.next(()=>function(N){const te=N.createObjectStore("remoteDocumentsV14",{keyPath:Zc});te.createIndex("documentKeyIndex",mp),te.createIndex("collectionGroupIndex",If)}(e)).next(()=>this.Hs(e,_)).next(()=>e.deleteObjectStore("remoteDocuments"))),c<14&&p>=14&&(w=w.next(()=>this.Js(e,_))),c<15&&p>=15&&(w=w.next(()=>function(N){N.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),N.createObjectStore("indexState",{keyPath:Ll}).createIndex("sequenceNumberIndex",Lm,{unique:!1}),N.createObjectStore("indexEntries",{keyPath:S_}).createIndex("documentKeyIndex",ey,{unique:!1})}(e))),w}Qs(e){let n=0;return e.store("remoteDocuments").X((c,p)=>{n+=Pf(p)}).next(()=>{const c={byteSize:n};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",c)})}Gs(e){const n=e.store("mutationQueues"),c=e.store("mutations");return n.W().next(p=>Lt.forEach(p,_=>{const w=IDBKeyRange.bound([_.userId,-1],[_.userId,_.lastAcknowledgedBatchId]);return c.W("userMutationsIndex",w).next(N=>Lt.forEach(N,te=>{Vn(te.userId===_.userId);const ce=bc(this.Tt,te);return Rg(e,_.userId,ce).next(()=>{})}))}))}js(e){const n=e.store("targetDocuments"),c=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(p=>{const _=[];return c.X((w,N)=>{const te=new Ur(w),ce=[0,Cu(te)];_.push(n.get(ce).next(Ae=>Ae?Lt.resolve():n.put({targetId:0,path:Cu(te),sequenceNumber:p.highestListenSequenceNumber})))}).next(()=>Lt.waitFor(_))})}zs(e,n){e.createObjectStore("collectionParents",{keyPath:Jv});const c=n.store("collectionParents"),p=new Hm,_=w=>{if(p.add(w)){const N=w.lastSegment(),te=w.popLast();return c.put({collectionId:N,parent:Cu(te)})}};return n.store("remoteDocuments").X({Z:!0},(w,N)=>{const te=new Ur(w);return _(te.popLast())}).next(()=>n.store("documentMutations").X({Z:!0},([w,N,te],ce)=>{const Ae=_c(N);return _(Ae.popLast())}))}Ws(e){const n=e.store("targets");return n.X((c,p)=>{const _=Tl(p),w=Um(this.Tt,_);return n.put(w)})}Hs(e,n){const c=n.store("remoteDocuments"),p=[];return c.X((_,w)=>{const N=n.store("remoteDocumentsV14"),te=(ce=w,ce.document?new Mn(Ur.fromString(ce.document.name).popFirst(5)):ce.noDocument?Mn.fromSegments(ce.noDocument.path):ce.unknownDocument?Mn.fromSegments(ce.unknownDocument.path):Fn()).path.toArray();var ce;const Ae={prefixPath:te.slice(0,te.length-2),collectionGroup:te[te.length-2],documentId:te[te.length-1],readTime:w.readTime||[0,0],unknownDocument:w.unknownDocument,noDocument:w.noDocument,document:w.document,hasCommittedMutations:!!w.hasCommittedMutations};p.push(N.put(Ae))}).next(()=>Lt.waitFor(p))}Js(e,n){const c=n.store("mutations"),p=ay(this.Tt),_=new fy(Fg.qs,this.Tt.oe);return c.W().next(w=>{const N=new Map;return w.forEach(te=>{var ce;let Ae=null!==(ce=N.get(te.userId))&&void 0!==ce?ce:pi();bc(this.Tt,te).keys().forEach(rt=>Ae=Ae.add(rt)),N.set(te.userId,Ae)}),Lt.forEach(N,(te,ce)=>{const Ae=new qt(ce),rt=_h.ue(this.Tt,Ae),kt=_.getIndexManager(Ae),on=Jc.ue(Ae,this.Tt,kt,_.referenceDelegate);return new Lg(p,on,rt,kt).recalculateAndSaveOverlaysForDocumentKeys(new vp(n,ya.at),te).next()})})}}function tu(a){a.createObjectStore("targetDocuments",{keyPath:No}).createIndex("documentTargetsIndex",E_,{unique:!0}),a.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",Xv,{unique:!0}),a.createObjectStore("targetGlobal")}const jg="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class Ap{constructor(e,n,c,p,_,w,N,te,ce,Ae,rt=15){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=c,this.Ys=_,this.window=w,this.document=N,this.Zs=ce,this.Xs=Ae,this.ti=rt,this.Cs=null,this.xs=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ei=null,this.inForeground=!1,this.ni=null,this.si=null,this.ii=Number.NEGATIVE_INFINITY,this.ri=kt=>Promise.resolve(),!Ap.C())throw new un(Bt.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new sy(this,p),this.oi=n+"main",this.Tt=new Cg(te),this.ui=new Za(this.oi,this.ti,new Km(this.Tt)),this.Ns=new $m(this.referenceDelegate,this.Tt),this.remoteDocumentCache=ay(this.Tt),this.Os=new Tp,this.window&&this.window.localStorage?this.ci=this.window.localStorage:(this.ci=null,!1===Ae&&si("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.ai().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new un(Bt.FAILED_PRECONDITION,jg);return this.hi(),this.li(),this.fi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Ns.getHighestSequenceNumber(e))}).then(e=>{this.Cs=new ya(e,this.Zs)}).then(()=>{this.xs=!0}).catch(e=>(this.ui&&this.ui.close(),Promise.reject(e)))}di(e){var n=this;return this.ri=function(){var c=(0,Fe.Z)(function*(p){if(n.started)return e(p)});return function(p){return c.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.ui.L(function(){var n=(0,Fe.Z)(function*(c){null===c.newVersion&&(yield e())});return function(c){return n.apply(this,arguments)}}())}setNetworkEnabled(e){var n=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Ys.enqueueAndForget((0,Fe.Z)(function*(){n.started&&(yield n.ai())})))}ai(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>Pp(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this._i(e).next(n=>{n||(this.isPrimary=!1,this.Ys.enqueueRetryable(()=>this.ri(!1)))})}).next(()=>this.wi(e)).next(n=>this.isPrimary&&!n?this.mi(e).next(()=>!1):!!n&&this.gi(e).next(()=>!0))).catch(e=>{if(Ya(e))return Kt("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Kt("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Ys.enqueueRetryable(()=>this.ri(e)),this.isPrimary=e})}_i(e){return Xl(e).get("owner").next(n=>Lt.resolve(this.yi(n)))}pi(e){return Pp(e).delete(this.clientId)}Ii(){var e=this;return(0,Fe.Z)(function*(){if(e.isPrimary&&!e.Ti(e.ii,18e5)){e.ii=Date.now();const n=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",c=>{const p=Lo(c,"clientMetadata");return p.W().next(_=>{const w=e.Ei(_,18e5),N=_.filter(te=>-1===w.indexOf(te));return Lt.forEach(N,te=>p.delete(te.clientId)).next(()=>N)})}).catch(()=>[]);if(e.ci)for(const c of n)e.ci.removeItem(e.Ai(c.clientId))}})()}fi(){this.si=this.Ys.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.ai().then(()=>this.Ii()).then(()=>this.fi()))}yi(e){return!!e&&e.ownerId===this.clientId}wi(e){return this.Xs?Lt.resolve(!0):Xl(e).get("owner").next(n=>{if(null!==n&&this.Ti(n.leaseTimestampMs,5e3)&&!this.Ri(n.ownerId)){if(this.yi(n)&&this.networkEnabled)return!0;if(!this.yi(n)){if(!n.allowTabSynchronization)throw new un(Bt.FAILED_PRECONDITION,jg);return!1}}return!(!this.networkEnabled||!this.inForeground)||Pp(e).W().next(c=>void 0===this.Ei(c,5e3).find(p=>!(this.clientId===p.clientId||!(!this.networkEnabled&&p.networkEnabled||!this.inForeground&&p.inForeground&&this.networkEnabled===p.networkEnabled))))}).next(n=>(this.isPrimary!==n&&Kt("IndexedDbPersistence",`Client ${n?"is":"is not"} eligible for a primary lease.`),n))}shutdown(){var e=this;return(0,Fe.Z)(function*(){e.xs=!1,e.bi(),e.si&&(e.si.cancel(),e.si=null),e.vi(),e.Pi(),yield e.ui.runTransaction("shutdown","readwrite",["owner","clientMetadata"],n=>{const c=new vp(n,ya.at);return e.mi(c).next(()=>e.pi(c))}),e.ui.close(),e.Vi()})()}Ei(e,n){return e.filter(c=>this.Ti(c.updateTimeMs,n)&&!this.Ri(c.clientId))}Si(){return this.runTransaction("getActiveClients","readonly",e=>Pp(e).W().next(n=>this.Ei(n,18e5).map(c=>c.clientId)))}get started(){return this.xs}getMutationQueue(e,n){return Jc.ue(e,this.Tt,n,this.referenceDelegate)}getTargetCache(){return this.Ns}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new wp(e,this.Tt.oe.databaseId)}getDocumentOverlayCache(e){return _h.ue(this.Tt,e)}getBundleCache(){return this.Os}runTransaction(e,n,c){Kt("IndexedDbPersistence","Starting transaction:",e);const p="readonly"===n?"readonly":"readwrite",_=15===(w=this.ti)?Kl:14===w?ql:13===w?Iu:12===w?Fm:11===w?Wl:void Fn();var w;let N;return this.ui.runTransaction(e,p,_,te=>(N=new vp(te,this.Cs?this.Cs.next():ya.at),"readwrite-primary"===n?this._i(N).next(ce=>!!ce||this.wi(N)).next(ce=>{if(!ce)throw si(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Ys.enqueueRetryable(()=>this.ri(!1)),new un(Bt.FAILED_PRECONDITION,bo);return c(N)}).next(ce=>this.gi(N).next(()=>ce)):this.Di(N).next(()=>c(N)))).then(te=>(N.raiseOnCommittedEvent(),te))}Di(e){return Xl(e).get("owner").next(n=>{if(null!==n&&this.Ti(n.leaseTimestampMs,5e3)&&!this.Ri(n.ownerId)&&!this.yi(n)&&!(this.Xs||this.allowTabSynchronization&&n.allowTabSynchronization))throw new un(Bt.FAILED_PRECONDITION,jg)})}gi(e){const n={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Xl(e).put("owner",n)}static C(){return Za.C()}mi(e){const n=Xl(e);return n.get("owner").next(c=>this.yi(c)?(Kt("IndexedDbPersistence","Releasing primary lease."),n.delete("owner")):Lt.resolve())}Ti(e,n){const c=Date.now();return!(e<c-n||e>c&&(si(`Detected an update time that is in the future: ${e} > ${c}`),1))}hi(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ni=()=>{this.Ys.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.ai()))},this.document.addEventListener("visibilitychange",this.ni),this.inForeground="visible"===this.document.visibilityState)}vi(){this.ni&&(this.document.removeEventListener("visibilitychange",this.ni),this.ni=null)}li(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ei=()=>{this.bi(),(0,St.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.Ys.enterRestrictedMode(!0),this.Ys.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ei))}Pi(){this.ei&&(this.window.removeEventListener("pagehide",this.ei),this.ei=null)}Ri(e){var n;try{const c=null!==(null===(n=this.ci)||void 0===n?void 0:n.getItem(this.Ai(e)));return Kt("IndexedDbPersistence",`Client '${e}' ${c?"is":"is not"} zombied in LocalStorage`),c}catch(c){return si("IndexedDbPersistence","Failed to get zombied client id.",c),!1}}bi(){if(this.ci)try{this.ci.setItem(this.Ai(this.clientId),String(Date.now()))}catch(e){si("Failed to set zombie client id.",e)}}Vi(){if(this.ci)try{this.ci.removeItem(this.Ai(this.clientId))}catch{}}Ai(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Xl(a){return Lo(a,"owner")}function Pp(a){return Lo(a,"clientMetadata")}function Mf(a,e){let n=a.projectId;return a.isDefaultDatabase||(n+="."+a.database),"firestore/"+e+"/"+n+"/"}class Of{constructor(e,n,c,p){this.targetId=e,this.fromCache=n,this.Ci=c,this.xi=p}static Ni(e,n){let c=pi(),p=pi();for(const _ of n.docChanges)switch(_.type){case 0:c=c.add(_.doc.key);break;case 1:p=p.add(_.doc.key)}return new Of(e,n.fromCache,c,p)}}class py{constructor(){this.ki=!1}initialize(e,n){this.Oi=e,this.indexManager=n,this.ki=!0}getDocumentsMatchingQuery(e,n,c,p){return this.Mi(e,n).next(_=>_||this.Fi(e,n,p,c)).next(_=>_||this.$i(e,n))}Mi(e,n){if(lf(n))return Lt.resolve(null);let c=Ja(n);return this.indexManager.getIndexType(e,c).next(p=>0===p?null:(null!==n.limit&&1===p&&(n=hf(n,null,"F"),c=Ja(n)),this.indexManager.getDocumentsMatchingTarget(e,c).next(_=>{const w=pi(..._);return this.Oi.getDocuments(e,w).next(N=>this.indexManager.getMinOffset(e,c).next(te=>{const ce=this.Bi(n,N);return this.Li(n,ce,w,te.readTime)?this.Mi(e,hf(n,null,"F")):this.qi(e,ce,n,te)}))})))}Fi(e,n,c,p){return lf(n)||p.isEqual(ur.min())?this.$i(e,n):this.Oi.getDocuments(e,c).next(_=>{const w=this.Bi(n,_);return this.Li(n,w,c,p)?this.$i(e,n):(Ii()<=Mt.in.DEBUG&&Kt("QueryEngine","Re-using previous result from %s to execute query: %s",p.toString(),ff(n)),this.qi(e,w,n,lc(p,-1)))})}Bi(e,n){let c=new es(vd(e));return n.forEach((p,_)=>{ba(e,_)&&(c=c.add(_))}),c}Li(e,n,c,p){if(null===e.limit)return!1;if(c.size!==n.size)return!0;const _="F"===e.limitType?n.last():n.first();return!!_&&(_.hasPendingWrites||_.version.compareTo(p)>0)}$i(e,n){return Ii()<=Mt.in.DEBUG&&Kt("QueryEngine","Using full collection scan to execute query:",ff(n)),this.Oi.getDocumentsMatchingQuery(e,n,xs.min())}qi(e,n,c,p){return this.Oi.getDocumentsMatchingQuery(e,c,p).next(_=>(n.forEach(w=>{_=_.insert(w.key,w)}),_))}}class p0{constructor(e,n,c,p){this.persistence=e,this.Ui=n,this.Tt=p,this.Ki=new ho(Mr),this.Gi=new fl(_=>Lc(_),Fc),this.Qi=new Map,this.ji=e.getRemoteDocumentCache(),this.Ns=e.getTargetCache(),this.Os=e.getBundleCache(),this.zi(c)}zi(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Lg(this.ji,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.ji.setIndexManager(this.indexManager),this.Ui.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Ki))}}function O_(a,e,n,c){return new p0(a,e,n,c)}function k_(a,e){return Zm.apply(this,arguments)}function Zm(){return Zm=(0,Fe.Z)(function*(a,e){const n=Cn(a);return yield n.persistence.runTransaction("Handle user change","readonly",c=>{let p;return n.mutationQueue.getAllMutationBatches(c).next(_=>(p=_,n.zi(e),n.mutationQueue.getAllMutationBatches(c))).next(_=>{const w=[],N=[];let te=pi();for(const ce of p){w.push(ce.batchId);for(const Ae of ce.mutations)te=te.add(Ae.key)}for(const ce of _){N.push(ce.batchId);for(const Ae of ce.mutations)te=te.add(Ae.key)}return n.localDocuments.getDocuments(c,te).next(ce=>({Wi:ce,removedBatchIds:w,addedBatchIds:N}))})})}),Zm.apply(this,arguments)}function gy(a){const e=Cn(a);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ns.getLastRemoteSnapshotVersion(n))}function Dd(a,e,n){let c=pi(),p=pi();return n.forEach(_=>c=c.add(_)),e.getEntries(a,c).next(_=>{let w=eu();return n.forEach((N,te)=>{const ce=_.get(N);te.isFoundDocument()!==ce.isFoundDocument()&&(p=p.add(N)),te.isNoDocument()&&te.version.isEqual(ur.min())?(e.removeEntry(N,te.readTime),w=w.insert(N,te)):!ce.isValidDocument()||te.version.compareTo(ce.version)>0||0===te.version.compareTo(ce.version)&&ce.hasPendingWrites?(e.addEntry(te),w=w.insert(N,te)):Kt("LocalStore","Ignoring outdated watch update for ",N,". Current version:",ce.version," Watch version:",te.version)}),{Hi:w,Ji:p}})}function R_(a,e){const n=Cn(a);return n.persistence.runTransaction("Get next mutation batch","readonly",c=>(void 0===e&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(c,e)))}function Ah(a,e){const n=Cn(a);return n.persistence.runTransaction("Allocate target","readwrite",c=>{let p;return n.Ns.getTargetData(c,e).next(_=>_?(p=_,Lt.resolve(p)):n.Ns.allocateTargetId(c).next(w=>(p=new Tc(e,w,0,c.currentSequenceNumber),n.Ns.addTargetData(c,p).next(()=>p))))}).then(c=>{const p=n.Ki.get(c.targetId);return(null===p||c.snapshotVersion.compareTo(p.snapshotVersion)>0)&&(n.Ki=n.Ki.insert(c.targetId,c),n.Gi.set(e,c.targetId)),c})}function Ec(a,e,n){return Qm.apply(this,arguments)}function Qm(){return Qm=(0,Fe.Z)(function*(a,e,n){const c=Cn(a),p=c.Ki.get(e),_=n?"readwrite":"readwrite-primary";try{n||(yield c.persistence.runTransaction("Release target",_,w=>c.persistence.referenceDelegate.removeTarget(w,p)))}catch(w){if(!Ya(w))throw w;Kt("LocalStore",`Failed to update sequence numbers for target ${e}: ${w}`)}c.Ki=c.Ki.remove(e),c.Gi.delete(p.target)}),Qm.apply(this,arguments)}function Ph(a,e,n){const c=Cn(a);let p=ur.min(),_=pi();return c.persistence.runTransaction("Execute query","readonly",w=>function(N,te,ce){const Ae=Cn(N),rt=Ae.Gi.get(ce);return void 0!==rt?Lt.resolve(Ae.Ki.get(rt)):Ae.Ns.getTargetData(te,ce)}(c,w,Ja(e)).next(N=>{if(N)return p=N.lastLimboFreeSnapshotVersion,c.Ns.getMatchingKeysForTargetId(w,N.targetId).next(te=>{_=te})}).next(()=>c.Ui.getDocumentsMatchingQuery(w,e,n?p:ur.min(),n?_:pi())).next(N=>(Ug(c,ap(e),N),{documents:N,Yi:_})))}function Mp(a,e){const n=Cn(a),c=Cn(n.Ns),p=n.Ki.get(e);return p?Promise.resolve(p.target):n.persistence.runTransaction("Get target data","readonly",_=>c.ie(_,e).next(w=>w?w.target:null))}function Jl(a,e){const n=Cn(a),c=n.Qi.get(e)||ur.min();return n.persistence.runTransaction("Get new document changes","readonly",p=>n.ji.getAllFromCollectionGroup(p,e,lc(c,-1),Number.MAX_SAFE_INTEGER)).then(p=>(Ug(n,e,p),p))}function Ug(a,e,n){let c=a.Qi.get(e)||ur.min();n.forEach((p,_)=>{_.readTime.compareTo(c)>0&&(c=_.readTime)}),a.Qi.set(e,c)}function Xm(){return Xm=(0,Fe.Z)(function*(a,e,n,c){const p=Cn(a);let _=pi(),w=eu();for(const ce of n){const Ae=e.Zi(ce.metadata.name);ce.document&&(_=_.add(Ae));const rt=e.Xi(ce);rt.setReadTime(e.tr(ce.metadata.readTime)),w=w.insert(Ae,rt)}const N=p.ji.newChangeBuffer({trackRemovals:!0}),te=yield Ah(p,(ce=c,Ja(dc(Ur.fromString(`__bundle__/docs/${ce}`)))));var ce;return p.persistence.runTransaction("Apply bundle documents","readwrite",ce=>Dd(ce,N,w).next(Ae=>(N.apply(ce),Ae)).next(Ae=>p.Ns.removeMatchingKeysForTargetId(ce,te.targetId).next(()=>p.Ns.addMatchingKeys(ce,_,te.targetId)).next(()=>p.localDocuments.getLocalViewOfDocuments(ce,Ae.Hi,Ae.Ji)).next(()=>Ae.Hi)))}),Xm.apply(this,arguments)}function Bg(a,e){return Vg.apply(this,arguments)}function Vg(){return Vg=(0,Fe.Z)(function*(a,e,n=pi()){const c=yield Ah(a,Ja(Df(e.bundledQuery))),p=Cn(a);return p.persistence.runTransaction("Save named query","readwrite",_=>{const w=Ro(e.readTime);if(c.snapshotVersion.compareTo(w)>=0)return p.Os.saveNamedQuery(_,e);const N=c.withResumeToken(B.EMPTY_BYTE_STRING,w);return p.Ki=p.Ki.insert(N.targetId,N),p.Ns.updateTargetData(_,N).next(()=>p.Ns.removeMatchingKeysForTargetId(_,c.targetId)).next(()=>p.Ns.addMatchingKeys(_,n,c.targetId)).next(()=>p.Os.saveNamedQuery(_,e))})}),Vg.apply(this,arguments)}function Hg(a,e){return`firestore_clients_${a}_${e}`}function Jm(a,e,n){let c=`firestore_mutations_${a}_${n}`;return e.isAuthenticated()&&(c+=`_${e.uid}`),c}function Op(a,e){return`firestore_targets_${a}_${e}`}class ev{constructor(e,n,c,p){this.user=e,this.batchId=n,this.state=c,this.error=p}static er(e,n,c){const p=JSON.parse(c);let _,w="object"==typeof p&&-1!==["pending","acknowledged","rejected"].indexOf(p.state)&&(void 0===p.error||"object"==typeof p.error);return w&&p.error&&(w="string"==typeof p.error.message&&"string"==typeof p.error.code,w&&(_=new un(p.error.code,p.error.message))),w?new ev(e,n,p.state,_):(si("SharedClientState",`Failed to parse mutation state for ID '${n}': ${c}`),null)}nr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Ad{constructor(e,n,c){this.targetId=e,this.state=n,this.error=c}static er(e,n){const c=JSON.parse(n);let p,_="object"==typeof c&&-1!==["not-current","current","rejected"].indexOf(c.state)&&(void 0===c.error||"object"==typeof c.error);return _&&c.error&&(_="string"==typeof c.error.message&&"string"==typeof c.error.code,_&&(p=new un(c.error.code,c.error.message))),_?new Ad(e,c.state,p):(si("SharedClientState",`Failed to parse target state for ID '${e}': ${n}`),null)}nr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class kp{constructor(e,n){this.clientId=e,this.activeTargetIds=n}static er(e,n){const c=JSON.parse(n);let p="object"==typeof c&&c.activeTargetIds instanceof Array,_=gc();for(let w=0;p&&w<c.activeTargetIds.length;++w)p=P(c.activeTargetIds[w]),_=_.add(c.activeTargetIds[w]);return p?new kp(e,_):(si("SharedClientState",`Failed to parse client data for instance '${e}': ${n}`),null)}}class vy{constructor(e,n){this.clientId=e,this.onlineState=n}static er(e){const n=JSON.parse(e);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new vy(n.clientId,n.onlineState):(si("SharedClientState",`Failed to parse online state: ${e}`),null)}}class Pd{constructor(){this.activeTargetIds=gc()}sr(e){this.activeTargetIds=this.activeTargetIds.add(e)}ir(e){this.activeTargetIds=this.activeTargetIds.delete(e)}nr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Gg{constructor(e,n,c,p,_){this.window=e,this.Ys=n,this.persistenceKey=c,this.rr=p,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ur=this.cr.bind(this),this.ar=new ho(Mr),this.started=!1,this.hr=[];const w=c.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=_,this.lr=Hg(this.persistenceKey,this.rr),this.dr=`firestore_sequence_number_${this.persistenceKey}`,this.ar=this.ar.insert(this.rr,new Pd),this._r=new RegExp(`^firestore_clients_${w}_([^_]*)$`),this.wr=new RegExp(`^firestore_mutations_${w}_(\\d+)(?:_(.*))?$`),this.mr=new RegExp(`^firestore_targets_${w}_(\\d+)$`),this.gr=`firestore_online_state_${this.persistenceKey}`,this.yr=function(N){return`firestore_bundle_loaded_v2_${N}`}(this.persistenceKey),this.window.addEventListener("storage",this.ur)}static C(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,Fe.Z)(function*(){const n=yield e.syncEngine.Si();for(const p of n){if(p===e.rr)continue;const _=e.getItem(Hg(e.persistenceKey,p));if(_){const w=kp.er(p,_);w&&(e.ar=e.ar.insert(w.clientId,w))}}e.pr();const c=e.storage.getItem(e.gr);if(c){const p=e.Ir(c);p&&e.Tr(p)}for(const p of e.hr)e.cr(p);e.hr=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.dr,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Er(this.ar)}isActiveQueryTarget(e){let n=!1;return this.ar.forEach((c,p)=>{p.activeTargetIds.has(e)&&(n=!0)}),n}addPendingMutation(e){this.Ar(e,"pending")}updateMutationState(e,n,c){this.Ar(e,n,c),this.Rr(e)}addLocalQueryTarget(e){let n="not-current";if(this.isActiveQueryTarget(e)){const c=this.storage.getItem(Op(this.persistenceKey,e));if(c){const p=Ad.er(e,c);p&&(n=p.state)}}return this.br.sr(e),this.pr(),n}removeLocalQueryTarget(e){this.br.ir(e),this.pr()}isLocalQueryTarget(e){return this.br.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(Op(this.persistenceKey,e))}updateQueryState(e,n,c){this.vr(e,n,c)}handleUserChange(e,n,c){n.forEach(p=>{this.Rr(p)}),this.currentUser=e,c.forEach(p=>{this.addPendingMutation(p)})}setOnlineState(e){this.Pr(e)}notifyBundleLoaded(e){this.Vr(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ur),this.removeItem(this.lr),this.started=!1)}getItem(e){const n=this.storage.getItem(e);return Kt("SharedClientState","READ",e,n),n}setItem(e,n){Kt("SharedClientState","SET",e,n),this.storage.setItem(e,n)}removeItem(e){Kt("SharedClientState","REMOVE",e),this.storage.removeItem(e)}cr(e){var n=this;const c=e;if(c.storageArea===this.storage){if(Kt("SharedClientState","EVENT",c.key,c.newValue),c.key===this.lr)return void si("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Ys.enqueueRetryable((0,Fe.Z)(function*(){if(n.started){if(null!==c.key)if(n._r.test(c.key)){if(null==c.newValue){const p=n.Sr(c.key);return n.Dr(p,null)}{const p=n.Cr(c.key,c.newValue);if(p)return n.Dr(p.clientId,p)}}else if(n.wr.test(c.key)){if(null!==c.newValue){const p=n.Nr(c.key,c.newValue);if(p)return n.kr(p)}}else if(n.mr.test(c.key)){if(null!==c.newValue){const p=n.Or(c.key,c.newValue);if(p)return n.Mr(p)}}else if(c.key===n.gr){if(null!==c.newValue){const p=n.Ir(c.newValue);if(p)return n.Tr(p)}}else if(c.key===n.dr){const p=function(_){let w=ya.at;if(null!=_)try{const N=JSON.parse(_);Vn("number"==typeof N),w=N}catch(N){si("SharedClientState","Failed to read sequence number from WebStorage",N)}return w}(c.newValue);p!==ya.at&&n.sequenceNumberHandler(p)}else if(c.key===n.yr){const p=n.Fr(c.newValue);yield Promise.all(p.map(_=>n.syncEngine.$r(_)))}}else n.hr.push(c)}))}}get br(){return this.ar.get(this.rr)}pr(){this.setItem(this.lr,this.br.nr())}Ar(e,n,c){const p=new ev(this.currentUser,e,n,c),_=Jm(this.persistenceKey,this.currentUser,e);this.setItem(_,p.nr())}Rr(e){const n=Jm(this.persistenceKey,this.currentUser,e);this.removeItem(n)}Pr(e){this.storage.setItem(this.gr,JSON.stringify({clientId:this.rr,onlineState:e}))}vr(e,n,c){const p=Op(this.persistenceKey,e),_=new Ad(e,n,c);this.setItem(p,_.nr())}Vr(e){const n=JSON.stringify(Array.from(e));this.setItem(this.yr,n)}Sr(e){const n=this._r.exec(e);return n?n[1]:null}Cr(e,n){const c=this.Sr(e);return kp.er(c,n)}Nr(e,n){const c=this.wr.exec(e),p=Number(c[1]);return ev.er(new qt(void 0!==c[2]?c[2]:null),p,n)}Or(e,n){const c=this.mr.exec(e),p=Number(c[1]);return Ad.er(p,n)}Ir(e){return vy.er(e)}Fr(e){return JSON.parse(e)}kr(e){var n=this;return(0,Fe.Z)(function*(){if(e.user.uid===n.currentUser.uid)return n.syncEngine.Br(e.batchId,e.state,e.error);Kt("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Mr(e){return this.syncEngine.Lr(e.targetId,e.state,e.error)}Dr(e,n){const c=n?this.ar.insert(e,n):this.ar.remove(e),p=this.Er(this.ar),_=this.Er(c),w=[],N=[];return _.forEach(te=>{p.has(te)||w.push(te)}),p.forEach(te=>{_.has(te)||N.push(te)}),this.syncEngine.qr(w,N).then(()=>{this.ar=c})}Tr(e){this.ar.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Er(e){let n=gc();return e.forEach((c,p)=>{n=n.unionWith(p.activeTargetIds)}),n}}class yy{constructor(){this.Ur=new Pd,this.Kr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,c){}addLocalQueryTarget(e){return this.Ur.sr(e),this.Kr[e]||"not-current"}updateQueryState(e,n,c){this.Kr[e]=n}removeLocalQueryTarget(e){this.Ur.ir(e)}isLocalQueryTarget(e){return this.Ur.activeTargetIds.has(e)}clearQueryState(e){delete this.Kr[e]}getAllActiveQueryTargets(){return this.Ur.activeTargetIds}isActiveQueryTarget(e){return this.Ur.activeTargetIds.has(e)}start(){return this.Ur=new Pd,Promise.resolve()}handleUserChange(e,n,c){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class _y{Gr(e){}shutdown(){}}class Ty{constructor(){this.Qr=()=>this.jr(),this.zr=()=>this.Wr(),this.Hr=[],this.Jr()}Gr(e){this.Hr.push(e)}shutdown(){window.removeEventListener("online",this.Qr),window.removeEventListener("offline",this.zr)}Jr(){window.addEventListener("online",this.Qr),window.addEventListener("offline",this.zr)}jr(){Kt("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.Hr)e(0)}Wr(){Kt("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.Hr)e(1)}static C(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const L_={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Rp{constructor(e){this.Yr=e.Yr,this.Zr=e.Zr}Xr(e){this.eo=e}no(e){this.so=e}onMessage(e){this.io=e}close(){this.Zr()}send(e){this.Yr(e)}ro(){this.eo()}oo(e){this.so(e)}uo(e){this.io(e)}}class kf extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.co=(e.ssl?"https":"http")+"://"+e.host,this.ao="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get ho(){return!1}lo(e,n,c,p,_){const w=this.fo(e,n);Kt("RestConnection","Sending: ",w,c);const N={};return this._o(N,p,_),this.wo(e,w,N,c).then(te=>(Kt("RestConnection","Received: ",te),te),te=>{throw gr("RestConnection",`${e} failed with error: `,te,"url: ",w,"request:",c),te})}mo(e,n,c,p,_,w){return this.lo(e,n,c,p,_)}_o(e,n,c){e["X-Goog-Api-Client"]="gl-js/ fire/"+Rn,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((p,_)=>e[_]=p),c&&c.headers.forEach((p,_)=>e[_]=p)}fo(e,n){return`${this.co}/v1/${n}:${L_[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}wo(e,n,c,p){return new Promise((_,w)=>{const N=new Qe;N.setWithCredentials(!0),N.listenOnce(va.COMPLETE,()=>{try{switch(N.getLastErrorCode()){case sa.NO_ERROR:const ce=N.getResponseJson();Kt("Connection","XHR received:",JSON.stringify(ce)),_(ce);break;case sa.TIMEOUT:Kt("Connection",'RPC "'+e+'" timed out'),w(new un(Bt.DEADLINE_EXCEEDED,"Request time out"));break;case sa.HTTP_ERROR:const Ae=N.getStatus();if(Kt("Connection",'RPC "'+e+'" failed with status:',Ae,"response text:",N.getResponseText()),Ae>0){let rt=N.getResponseJson();Array.isArray(rt)&&(rt=rt[0]);const kt=rt?.error;if(kt&&kt.status&&kt.message){const on=function(gn){const Yn=gn.toLowerCase().replace(/_/g,"-");return Object.values(Bt).indexOf(Yn)>=0?Yn:Bt.UNKNOWN}(kt.status);w(new un(on,kt.message))}else w(new un(Bt.UNKNOWN,"Server responded with status "+N.getStatus()))}else w(new un(Bt.UNAVAILABLE,"Connection failed."));break;default:Fn()}}finally{Kt("Connection",'RPC "'+e+'" completed.')}});const te=JSON.stringify(p);N.send(n,"POST",te,c,15)})}yo(e,n,c){const p=[this.co,"/","google.firestore.v1.Firestore","/",e,"/channel"],_=Mc(),w=Ou(),N={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(N.xmlHttpFactory=new W({})),this._o(N.initMessageHeaders,n,c),N.encodeInitMessageHeaders=!0;const te=p.join("");Kt("Connection","Creating WebChannel: "+te,N);const ce=_.createWebChannel(te,N);let Ae=!1,rt=!1;const kt=new Rp({Yr:gn=>{rt?Kt("Connection","Not sending because WebChannel is closed:",gn):(Ae||(Kt("Connection","Opening WebChannel transport."),ce.open(),Ae=!0),Kt("Connection","WebChannel sending:",gn),ce.send(gn))},Zr:()=>ce.close()}),on=(gn,Yn,br)=>{gn.listen(Yn,Ws=>{try{br(Ws)}catch(mo){setTimeout(()=>{throw mo},0)}})};return on(ce,Ee.EventType.OPEN,()=>{rt||Kt("Connection","WebChannel transport opened.")}),on(ce,Ee.EventType.CLOSE,()=>{rt||(rt=!0,Kt("Connection","WebChannel transport closed"),kt.oo())}),on(ce,Ee.EventType.ERROR,gn=>{rt||(rt=!0,gr("Connection","WebChannel transport errored:",gn),kt.oo(new un(Bt.UNAVAILABLE,"The operation could not be completed")))}),on(ce,Ee.EventType.MESSAGE,gn=>{var Yn;if(!rt){const br=gn.data[0];Vn(!!br);const mo=br.error||(null===(Yn=br[0])||void 0===Yn?void 0:Yn.error);if(mo){Kt("Connection","WebChannel received error:",mo);const qi=mo.status;let xo=function(ds){const qo=ko[ds];if(void 0!==qo)return dh(qo)}(qi),rs=mo.message;void 0===xo&&(xo=Bt.INTERNAL,rs="Unknown error status: "+qi+" with message "+mo.message),rt=!0,kt.oo(new un(xo,rs)),ce.close()}else Kt("Connection","WebChannel received:",br),kt.uo(br)}}),on(w,V.STAT_EVENT,gn=>{gn.stat===oe.PROXY?Kt("Connection","Detected buffering proxy"):gn.stat===oe.NOPROXY&&Kt("Connection","Detected no buffering proxy")}),setTimeout(()=>{kt.ro()},0),kt}}function Mh(){return typeof window<"u"?window:null}function td(){return typeof document<"u"?document:null}function ec(a){return new hp(a,!0)}class nd{constructor(e,n,c=1e3,p=1.5,_=6e4){this.Ys=e,this.timerId=n,this.po=c,this.Io=p,this.To=_,this.Eo=0,this.Ao=null,this.Ro=Date.now(),this.reset()}reset(){this.Eo=0}bo(){this.Eo=this.To}vo(e){this.cancel();const n=Math.floor(this.Eo+this.Po()),c=Math.max(0,Date.now()-this.Ro),p=Math.max(0,n-c);p>0&&Kt("ExponentialBackoff",`Backing off for ${p} ms (base delay: ${this.Eo} ms, delay with jitter: ${n} ms, last attempt: ${c} ms ago)`),this.Ao=this.Ys.enqueueAfterDelay(this.timerId,p,()=>(this.Ro=Date.now(),e())),this.Eo*=this.Io,this.Eo<this.po&&(this.Eo=this.po),this.Eo>this.To&&(this.Eo=this.To)}Vo(){null!==this.Ao&&(this.Ao.skipDelay(),this.Ao=null)}cancel(){null!==this.Ao&&(this.Ao.cancel(),this.Ao=null)}Po(){return(Math.random()-.5)*this.Eo}}class $g{constructor(e,n,c,p,_,w,N,te){this.Ys=e,this.So=c,this.Do=p,this.connection=_,this.authCredentialsProvider=w,this.appCheckCredentialsProvider=N,this.listener=te,this.state=0,this.Co=0,this.xo=null,this.No=null,this.stream=null,this.ko=new nd(e,n)}Oo(){return 1===this.state||5===this.state||this.Mo()}Mo(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Fo()}stop(){var e=this;return(0,Fe.Z)(function*(){e.Oo()&&(yield e.close(0))})()}$o(){this.state=0,this.ko.reset()}Bo(){this.Mo()&&null===this.xo&&(this.xo=this.Ys.enqueueAfterDelay(this.So,6e4,()=>this.Lo()))}qo(e){this.Uo(),this.stream.send(e)}Lo(){var e=this;return(0,Fe.Z)(function*(){if(e.Mo())return e.close(0)})()}Uo(){this.xo&&(this.xo.cancel(),this.xo=null)}Ko(){this.No&&(this.No.cancel(),this.No=null)}close(e,n){var c=this;return(0,Fe.Z)(function*(){c.Uo(),c.Ko(),c.ko.cancel(),c.Co++,4!==e?c.ko.reset():n&&n.code===Bt.RESOURCE_EXHAUSTED?(si(n.toString()),si("Using maximum backoff delay to prevent overloading the backend."),c.ko.bo()):n&&n.code===Bt.UNAUTHENTICATED&&3!==c.state&&(c.authCredentialsProvider.invalidateToken(),c.appCheckCredentialsProvider.invalidateToken()),null!==c.stream&&(c.Go(),c.stream.close(),c.stream=null),c.state=e,yield c.listener.no(n)})()}Go(){}auth(){this.state=1;const e=this.Qo(this.Co),n=this.Co;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([c,p])=>{this.Co===n&&this.jo(c,p)},c=>{e(()=>{const p=new un(Bt.UNKNOWN,"Fetching auth token failed: "+c.message);return this.zo(p)})})}jo(e,n){const c=this.Qo(this.Co);this.stream=this.Wo(e,n),this.stream.Xr(()=>{c(()=>(this.state=2,this.No=this.Ys.enqueueAfterDelay(this.Do,1e4,()=>(this.Mo()&&(this.state=3),Promise.resolve())),this.listener.Xr()))}),this.stream.no(p=>{c(()=>this.zo(p))}),this.stream.onMessage(p=>{c(()=>this.onMessage(p))})}Fo(){var e=this;this.state=5,this.ko.vo((0,Fe.Z)(function*(){e.state=0,e.start()}))}zo(e){return Kt("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Qo(e){return n=>{this.Ys.enqueueAndForget(()=>this.Co===e?n():(Kt("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Rf extends $g{constructor(e,n,c,p,_,w){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,c,p,w),this.Tt=_}Wo(e,n){return this.connection.yo("Listen",e,n)}onMessage(e){this.ko.reset();const n=function Br(a,e){let n;if("targetChange"in e){const c="NO_CHANGE"===(te=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===te?1:"REMOVE"===te?2:"CURRENT"===te?3:"RESET"===te?4:Fn(),p=e.targetChange.targetIds||[],_=function(te,ce){return te.yt?(Vn(void 0===ce||"string"==typeof ce),B.fromBase64String(ce||"")):(Vn(void 0===ce||ce instanceof Uint8Array),B.fromUint8Array(ce||new Uint8Array))}(a,e.targetChange.resumeToken),w=e.targetChange.cause,N=w&&function(te){const ce=void 0===te.code?Bt.UNKNOWN:dh(te.code);return new un(ce,te.message||"")}(w);n=new Fa(c,p,_,N||null)}else if("documentChange"in e){const c=e.documentChange,p=T(a,c.document.name),_=Ro(c.document.updateTime),w=c.document.createTime?Ro(c.document.createTime):ur.min(),N=new fo({mapValue:{fields:c.document.fields}}),te=js.newFoundDocument(p,_,w,N);n=new gl(c.targetIds||[],c.removedTargetIds||[],te.key,te)}else if("documentDelete"in e){const c=e.documentDelete,p=T(a,c.document),_=c.readTime?Ro(c.readTime):ur.min(),w=js.newNoDocument(p,_);n=new gl([],c.removedTargetIds||[],w.key,w)}else if("documentRemove"in e){const c=e.documentRemove,p=T(a,c.document);n=new gl([],c.removedTargetIds||[],p,null)}else{if(!("filter"in e))return Fn();{const c=e.filter,_=new Tg(c.count||0);n=new Tf(c.targetId,_)}}var te;return n}(this.Tt,e),c=function(p){if(!("targetChange"in p))return ur.min();const _=p.targetChange;return _.targetIds&&_.targetIds.length?ur.min():_.readTime?Ro(_.readTime):ur.min()}(e);return this.listener.Ho(n,c)}Jo(e){const n={};n.database=Ce(this.Tt),n.addTarget=function(p,_){let w;const N=_.target;return w=af(N)?{documents:fh(p,N)}:{query:Ed(p,N)},w.targetId=_.targetId,_.resumeToken.approximateByteSize()>0?w.resumeToken=Sf(p,_.resumeToken):_.snapshotVersion.compareTo(ur.min())>0&&(w.readTime=vl(p,_.snapshotVersion.toTimestamp())),w}(this.Tt,e);const c=function _l(a,e){const n=function(c,p){switch(p){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return Fn()}}(0,e.purpose);return null==n?null:{"goog-listen-tags":n}}(0,e);c&&(n.labels=c),this.qo(n)}Yo(e){const n={};n.database=Ce(this.Tt),n.removeTarget=e,this.qo(n)}}class Md extends $g{constructor(e,n,c,p,_,w){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,c,p,w),this.Tt=_,this.Zo=!1}get Xo(){return this.Zo}start(){this.Zo=!1,this.lastStreamToken=void 0,super.start()}Go(){this.Zo&&this.tu([])}Wo(e,n){return this.connection.yo("Write",e,n)}onMessage(e){if(Vn(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Zo){this.ko.reset();const n=function yl(a,e){return a&&a.length>0?(Vn(void 0!==e),a.map(n=>function(c,p){let _=Ro(c.updateTime?c.updateTime:p);return _.isEqual(ur.min())&&(_=Ro(p)),new Nm(_,c.transformResults||[])}(n,e))):[]}(e.writeResults,e.commitTime),c=Ro(e.commitTime);return this.listener.eu(c,n)}return Vn(!e.writeResults||0===e.writeResults.length),this.Zo=!0,this.listener.nu()}su(){const e={};e.database=Ce(this.Tt),this.qo(e)}tu(e){const n={streamToken:this.lastStreamToken,writes:e.map(c=>Er(this.Tt,c))};this.qo(n)}}class Np extends class{}{constructor(e,n,c,p){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=c,this.Tt=p,this.iu=!1}ru(){if(this.iu)throw new un(Bt.FAILED_PRECONDITION,"The client has already been terminated.")}lo(e,n,c){return this.ru(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([p,_])=>this.connection.lo(e,n,c,p,_)).catch(p=>{throw"FirebaseError"===p.name?(p.code===Bt.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),p):new un(Bt.UNKNOWN,p.toString())})}mo(e,n,c,p){return this.ru(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([_,w])=>this.connection.mo(e,n,c,_,w,p)).catch(_=>{throw"FirebaseError"===_.name?(_.code===Bt.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),_):new un(Bt.UNKNOWN,_.toString())})}terminate(){this.iu=!0}}class Ey{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.ou=0,this.uu=null,this.cu=!0}au(){0===this.ou&&(this.hu("Unknown"),this.uu=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.uu=null,this.lu("Backend didn't respond within 10 seconds."),this.hu("Offline"),Promise.resolve())))}fu(e){"Online"===this.state?this.hu("Unknown"):(this.ou++,this.ou>=1&&(this.du(),this.lu(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.hu("Offline")))}set(e){this.du(),this.ou=0,"Online"===e&&(this.cu=!1),this.hu(e)}hu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}lu(e){const n=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.cu?(si(n),this.cu=!1):Kt("OnlineStateTracker",n)}du(){null!==this.uu&&(this.uu.cancel(),this.uu=null)}}class F_{constructor(e,n,c,p,_){var w=this;this.localStore=e,this.datastore=n,this.asyncQueue=c,this.remoteSyncer={},this._u=[],this.wu=new Map,this.mu=new Set,this.gu=[],this.yu=_,this.yu.Gr(N=>{c.enqueueAndForget((0,Fe.Z)(function*(){var te;tc(w)&&(Kt("RemoteStore","Restarting streams for network reachability change."),yield(te=(0,Fe.Z)(function*(ce){const Ae=Cn(ce);Ae.mu.add(4),yield Oh(Ae),Ae.pu.set("Unknown"),Ae.mu.delete(4),yield Lf(Ae)}),function(ce){return te.apply(this,arguments)})(w))}))}),this.pu=new Ey(c,p)}}function Lf(a){return tv.apply(this,arguments)}function tv(){return tv=(0,Fe.Z)(function*(a){if(tc(a))for(const e of a.gu)yield e(!0)}),tv.apply(this,arguments)}function Oh(a){return zg.apply(this,arguments)}function zg(){return zg=(0,Fe.Z)(function*(a){for(const e of a.gu)yield e(!1)}),zg.apply(this,arguments)}function Wg(a,e){const n=Cn(a);n.wu.has(e.targetId)||(n.wu.set(e.targetId,e),Sy(n)?kh(n):Sa(n).Mo()&&Uu(n,e))}function Lp(a,e){const n=Cn(a),c=Sa(n);n.wu.delete(e),c.Mo()&&nv(n,e),0===n.wu.size&&(c.Mo()?c.Bo():tc(n)&&n.pu.set("Unknown"))}function Uu(a,e){a.Iu.Ft(e.targetId),Sa(a).Jo(e)}function nv(a,e){a.Iu.Ft(e),Sa(a).Yo(e)}function kh(a){a.Iu=new Ef({getRemoteKeysForTarget:e=>a.remoteSyncer.getRemoteKeysForTarget(e),ie:e=>a.wu.get(e)||null}),Sa(a).start(),a.pu.au()}function Sy(a){return tc(a)&&!Sa(a).Oo()&&a.wu.size>0}function tc(a){return 0===Cn(a).mu.size}function rv(a){a.Iu=void 0}function j_(a){return iv.apply(this,arguments)}function iv(){return iv=(0,Fe.Z)(function*(a){a.wu.forEach((e,n)=>{Uu(a,e)})}),iv.apply(this,arguments)}function wy(a,e){return qg.apply(this,arguments)}function qg(){return qg=(0,Fe.Z)(function*(a,e){rv(a),Sy(a)?(a.pu.fu(e),kh(a)):a.pu.set("Unknown")}),qg.apply(this,arguments)}function Fp(a,e,n){return sv.apply(this,arguments)}function sv(){return sv=(0,Fe.Z)(function*(a,e,n){if(a.pu.set("Online"),e instanceof Fa&&2===e.state&&e.cause)try{yield(c=(0,Fe.Z)(function*(p,_){const w=_.cause;for(const N of _.targetIds)p.wu.has(N)&&(yield p.remoteSyncer.rejectListen(N,w),p.wu.delete(N),p.Iu.removeTarget(N))}),function(p,_){return c.apply(this,arguments)})(a,e)}catch(c){Kt("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),c),yield Rh(a,c)}else if(e instanceof gl?a.Iu.Qt(e):e instanceof Tf?a.Iu.Zt(e):a.Iu.Wt(e),!n.isEqual(ur.min()))try{const c=yield gy(a.localStore);n.compareTo(c)>=0&&(yield function(p,_){const w=p.Iu.ee(_);return w.targetChanges.forEach((N,te)=>{if(N.resumeToken.approximateByteSize()>0){const ce=p.wu.get(te);ce&&p.wu.set(te,ce.withResumeToken(N.resumeToken,_))}}),w.targetMismatches.forEach(N=>{const te=p.wu.get(N);if(!te)return;p.wu.set(N,te.withResumeToken(B.EMPTY_BYTE_STRING,te.snapshotVersion)),nv(p,N);const ce=new Tc(te.target,N,1,te.sequenceNumber);Uu(p,ce)}),p.remoteSyncer.applyRemoteEvent(w)}(a,n))}catch(c){Kt("RemoteStore","Failed to raise snapshot:",c),yield Rh(a,c)}var c}),sv.apply(this,arguments)}function Rh(a,e,n){return Ff.apply(this,arguments)}function Ff(){return Ff=(0,Fe.Z)(function*(a,e,n){if(!Ya(e))throw e;a.mu.add(1),yield Oh(a),a.pu.set("Offline"),n||(n=()=>gy(a.localStore)),a.asyncQueue.enqueueRetryable((0,Fe.Z)(function*(){Kt("RemoteStore","Retrying IndexedDB access"),yield n(),a.mu.delete(1),yield Lf(a)}))}),Ff.apply(this,arguments)}function Cy(a,e){return e().catch(n=>Rh(a,n,e))}function jf(a){return Od.apply(this,arguments)}function Od(){return Od=(0,Fe.Z)(function*(a){const e=Cn(a),n=kd(e);let c=e._u.length>0?e._u[e._u.length-1].batchId:-1;for(;Iy(e);)try{const p=yield R_(e.localStore,c);if(null===p){0===e._u.length&&n.Bo();break}c=p.batchId,Sc(e,p)}catch(p){yield Rh(e,p)}jp(e)&&xy(e)}),Od.apply(this,arguments)}function Iy(a){return tc(a)&&a._u.length<10}function Sc(a,e){a._u.push(e);const n=kd(a);n.Mo()&&n.Xo&&n.tu(e.mutations)}function jp(a){return tc(a)&&!kd(a).Oo()&&a._u.length>0}function xy(a){kd(a).start()}function Dy(a){return Kg.apply(this,arguments)}function Kg(){return Kg=(0,Fe.Z)(function*(a){kd(a).su()}),Kg.apply(this,arguments)}function ov(a){return nc.apply(this,arguments)}function nc(){return nc=(0,Fe.Z)(function*(a){const e=kd(a);for(const n of a._u)e.tu(n.mutations)}),nc.apply(this,arguments)}function Ay(a,e,n){return Up.apply(this,arguments)}function Up(){return Up=(0,Fe.Z)(function*(a,e,n){const c=a._u.shift(),p=jm.from(c,e,n);yield Cy(a,()=>a.remoteSyncer.applySuccessfulWrite(p)),yield jf(a)}),Up.apply(this,arguments)}function av(a,e){return uv.apply(this,arguments)}function uv(){return uv=(0,Fe.Z)(function*(a,e){var n;e&&kd(a).Xo&&(yield(n=(0,Fe.Z)(function*(c,p){if(Gl(_=p.code)&&_!==Bt.ABORTED){const w=c._u.shift();kd(c).$o(),yield Cy(c,()=>c.remoteSyncer.rejectFailedWrite(w.batchId,p)),yield jf(c)}var _}),function(c,p){return n.apply(this,arguments)})(a,e)),jp(a)&&xy(a)}),uv.apply(this,arguments)}function Nh(a,e){return Uf.apply(this,arguments)}function Uf(){return Uf=(0,Fe.Z)(function*(a,e){const n=Cn(a);n.asyncQueue.verifyOperationInProgress(),Kt("RemoteStore","RemoteStore received new credentials");const c=tc(n);n.mu.add(3),yield Oh(n),c&&n.pu.set("Unknown"),yield n.remoteSyncer.handleCredentialChange(e),n.mu.delete(3),yield Lf(n)}),Uf.apply(this,arguments)}function Bu(a,e){return tl.apply(this,arguments)}function tl(){return tl=(0,Fe.Z)(function*(a,e){const n=Cn(a);e?(n.mu.delete(2),yield Lf(n)):e||(n.mu.add(2),yield Oh(n),n.pu.set("Unknown"))}),tl.apply(this,arguments)}function Sa(a){return a.Tu||(a.Tu=function(e,n,c){const p=Cn(e);return p.ru(),new Rf(n,p.connection,p.authCredentials,p.appCheckCredentials,p.Tt,c)}(a.datastore,a.asyncQueue,{Xr:j_.bind(null,a),no:wy.bind(null,a),Ho:Fp.bind(null,a)}),a.gu.push(function(){var e=(0,Fe.Z)(function*(n){n?(a.Tu.$o(),Sy(a)?kh(a):a.pu.set("Unknown")):(yield a.Tu.stop(),rv(a))});return function(n){return e.apply(this,arguments)}}())),a.Tu}function kd(a){return a.Eu||(a.Eu=function(e,n,c){const p=Cn(e);return p.ru(),new Md(n,p.connection,p.authCredentials,p.appCheckCredentials,p.Tt,c)}(a.datastore,a.asyncQueue,{Xr:Dy.bind(null,a),no:av.bind(null,a),nu:ov.bind(null,a),eu:Ay.bind(null,a)}),a.gu.push(function(){var e=(0,Fe.Z)(function*(n){n?(a.Eu.$o(),yield jf(a)):(yield a.Eu.stop(),a._u.length>0&&(Kt("RemoteStore",`Stopping write stream with ${a._u.length} pending writes`),a._u=[]))});return function(n){return e.apply(this,arguments)}}())),a.Eu}class Bp{constructor(e,n,c,p,_){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=c,this.op=p,this.removalCallback=_,this.deferred=new Oi,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(w=>{})}static createAndSchedule(e,n,c,p,_){const w=Date.now()+c,N=new Bp(e,n,w,p,_);return N.start(c),N}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new un(Bt.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Rd(a,e){if(si("AsyncQueue",`${e}: ${a}`),Ya(a))return new un(Bt.UNAVAILABLE,`${e}: ${a}`);throw a}class Nd{constructor(e){this.comparator=e?(n,c)=>e(n,c)||Mn.comparator(n.key,c.key):(n,c)=>Mn.comparator(n.key,c.key),this.keyedMap=Fu(),this.sortedSet=new ho(this.comparator)}static emptySet(e){return new Nd(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,c)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Nd)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),c=e.sortedSet.getIterator();for(;n.hasNext();){const p=n.getNext().key,_=c.getNext().key;if(!p.isEqual(_))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,n){const c=new Nd;return c.comparator=this.comparator,c.keyedMap=e,c.sortedSet=n,c}}class lv{constructor(){this.Au=new ho(Mn.comparator)}track(e){const n=e.doc.key,c=this.Au.get(n);c?0!==e.type&&3===c.type?this.Au=this.Au.insert(n,e):3===e.type&&1!==c.type?this.Au=this.Au.insert(n,{type:c.type,doc:e.doc}):2===e.type&&2===c.type?this.Au=this.Au.insert(n,{type:2,doc:e.doc}):2===e.type&&0===c.type?this.Au=this.Au.insert(n,{type:0,doc:e.doc}):1===e.type&&0===c.type?this.Au=this.Au.remove(n):1===e.type&&2===c.type?this.Au=this.Au.insert(n,{type:1,doc:c.doc}):0===e.type&&1===c.type?this.Au=this.Au.insert(n,{type:2,doc:e.doc}):Fn():this.Au=this.Au.insert(n,e)}Ru(){const e=[];return this.Au.inorderTraversal((n,c)=>{e.push(c)}),e}}class Ld{constructor(e,n,c,p,_,w,N,te,ce){this.query=e,this.docs=n,this.oldDocs=c,this.docChanges=p,this.mutatedKeys=_,this.fromCache=w,this.syncStateChanged=N,this.excludesMetadataChanges=te,this.hasCachedResults=ce}static fromInitialDocuments(e,n,c,p,_){const w=[];return n.forEach(N=>{w.push({type:0,doc:N})}),new Ld(e,n,Nd.emptySet(n),w,c,p,!0,!1,_)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Qu(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,c=e.docChanges;if(n.length!==c.length)return!1;for(let p=0;p<n.length;p++)if(n[p].type!==c[p].type||!n[p].doc.isEqual(c[p].doc))return!1;return!0}}class rd{constructor(){this.bu=void 0,this.listeners=[]}}class Zg{constructor(){this.queries=new fl(e=>ah(e),Qu),this.onlineState="Unknown",this.vu=new Set}}function Bf(a,e){return Fd.apply(this,arguments)}function Fd(){return Fd=(0,Fe.Z)(function*(a,e){const n=Cn(a),c=e.query;let p=!1,_=n.queries.get(c);if(_||(p=!0,_=new rd),p)try{_.bu=yield n.onListen(c)}catch(w){const N=Rd(w,`Initialization of query '${ff(e.query)}' failed`);return void e.onError(N)}n.queries.set(c,_),_.listeners.push(e),e.Pu(n.onlineState),_.bu&&e.Vu(_.bu)&&dv(n)}),Fd.apply(this,arguments)}function cv(a,e){return Yg.apply(this,arguments)}function Yg(){return Yg=(0,Fe.Z)(function*(a,e){const n=Cn(a),c=e.query;let p=!1;const _=n.queries.get(c);if(_){const w=_.listeners.indexOf(e);w>=0&&(_.listeners.splice(w,1),p=0===_.listeners.length)}if(p)return n.queries.delete(c),n.onUnlisten(c)}),Yg.apply(this,arguments)}function Py(a,e){const n=Cn(a);let c=!1;for(const p of e){const w=n.queries.get(p.query);if(w){for(const N of w.listeners)N.Vu(p)&&(c=!0);w.bu=p}}c&&dv(n)}function U_(a,e,n){const c=Cn(a),p=c.queries.get(e);if(p)for(const _ of p.listeners)_.onError(n);c.queries.delete(e)}function dv(a){a.vu.forEach(e=>{e.next()})}class wc{constructor(e,n,c){this.query=e,this.Su=n,this.Du=!1,this.Cu=null,this.onlineState="Unknown",this.options=c||{}}Vu(e){if(!this.options.includeMetadataChanges){const c=[];for(const p of e.docChanges)3!==p.type&&c.push(p);e=new Ld(e.query,e.docs,e.oldDocs,c,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Du?this.xu(e)&&(this.Su.next(e),n=!0):this.Nu(e,this.onlineState)&&(this.ku(e),n=!0),this.Cu=e,n}onError(e){this.Su.error(e)}Pu(e){this.onlineState=e;let n=!1;return this.Cu&&!this.Du&&this.Nu(this.Cu,e)&&(this.ku(this.Cu),n=!0),n}Nu(e,n){return!e.fromCache||(!this.options.Ou||!("Offline"!==n))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===n)}xu(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Cu&&this.Cu.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}ku(e){e=Ld.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Du=!0,this.Su.next(e)}}class hv{constructor(e,n){this.Mu=e,this.byteLength=n}Fu(){return"metadata"in this.Mu}}class B_{constructor(e){this.Tt=e}Zi(e){return T(this.Tt,e)}Xi(e){return e.metadata.exists?Ln(this.Tt,e.document,!1):js.newNoDocument(this.Zi(e.metadata.name),this.tr(e.metadata.readTime))}tr(e){return Ro(e)}}class V_{constructor(e,n,c){this.$u=e,this.localStore=n,this.Tt=c,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=My(e)}Bu(e){this.progress.bytesLoaded+=e.byteLength;let n=this.progress.documentsLoaded;if(e.Mu.namedQuery)this.queries.push(e.Mu.namedQuery);else if(e.Mu.documentMetadata){this.documents.push({metadata:e.Mu.documentMetadata}),e.Mu.documentMetadata.exists||++n;const c=Ur.fromString(e.Mu.documentMetadata.name);this.collectionGroups.add(c.get(c.length-2))}else e.Mu.document&&(this.documents[this.documents.length-1].document=e.Mu.document,++n);return n!==this.progress.documentsLoaded?(this.progress.documentsLoaded=n,Object.assign({},this.progress)):null}Lu(e){const n=new Map,c=new B_(this.Tt);for(const p of e)if(p.metadata.queries){const _=c.Zi(p.metadata.name);for(const w of p.metadata.queries){const N=(n.get(w)||pi()).add(_);n.set(w,N)}}return n}complete(){var e=this;return(0,Fe.Z)(function*(){const n=yield function N_(a,e,n,c){return Xm.apply(this,arguments)}(e.localStore,new B_(e.Tt),e.documents,e.$u.id),c=e.Lu(e.documents);for(const p of e.queries)yield Bg(e.localStore,p,c.get(p.name));return e.progress.taskState="Success",{progress:e.progress,qu:e.collectionGroups,Uu:n}})()}}function My(a){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:a.totalDocuments,totalBytes:a.totalBytes}}class Vp{constructor(e){this.key=e}}class fv{constructor(e){this.key=e}}class Oy{constructor(e,n){this.query=e,this.Ku=n,this.Gu=null,this.hasCachedResults=!1,this.current=!1,this.Qu=pi(),this.mutatedKeys=pi(),this.ju=vd(e),this.zu=new Nd(this.ju)}get Wu(){return this.Ku}Hu(e,n){const c=n?n.Ju:new lv,p=n?n.zu:this.zu;let _=n?n.mutatedKeys:this.mutatedKeys,w=p,N=!1;const te="F"===this.query.limitType&&p.size===this.query.limit?p.last():null,ce="L"===this.query.limitType&&p.size===this.query.limit?p.first():null;if(e.inorderTraversal((Ae,rt)=>{const kt=p.get(Ae),on=ba(this.query,rt)?rt:null,gn=!!kt&&this.mutatedKeys.has(kt.key),Yn=!!on&&(on.hasLocalMutations||this.mutatedKeys.has(on.key)&&on.hasCommittedMutations);let br=!1;kt&&on?kt.data.isEqual(on.data)?gn!==Yn&&(c.track({type:3,doc:on}),br=!0):this.Yu(kt,on)||(c.track({type:2,doc:on}),br=!0,(te&&this.ju(on,te)>0||ce&&this.ju(on,ce)<0)&&(N=!0)):!kt&&on?(c.track({type:0,doc:on}),br=!0):kt&&!on&&(c.track({type:1,doc:kt}),br=!0,(te||ce)&&(N=!0)),br&&(on?(w=w.add(on),_=Yn?_.add(Ae):_.delete(Ae)):(w=w.delete(Ae),_=_.delete(Ae)))}),null!==this.query.limit)for(;w.size>this.query.limit;){const Ae="F"===this.query.limitType?w.last():w.first();w=w.delete(Ae.key),_=_.delete(Ae.key),c.track({type:1,doc:Ae})}return{zu:w,Ju:c,Li:N,mutatedKeys:_}}Yu(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,c){const p=this.zu;this.zu=e.zu,this.mutatedKeys=e.mutatedKeys;const _=e.Ju.Ru();_.sort((ce,Ae)=>function(rt,kt){const on=gn=>{switch(gn){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Fn()}};return on(rt)-on(kt)}(ce.type,Ae.type)||this.ju(ce.doc,Ae.doc)),this.Zu(c);const w=n?this.Xu():[],N=0===this.Qu.size&&this.current?1:0,te=N!==this.Gu;return this.Gu=N,0!==_.length||te?{snapshot:new Ld(this.query,e.zu,p,_,e.mutatedKeys,0===N,te,!1,!!c&&c.resumeToken.approximateByteSize()>0),tc:w}:{tc:w}}Pu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({zu:this.zu,Ju:new lv,mutatedKeys:this.mutatedKeys,Li:!1},!1)):{tc:[]}}ec(e){return!this.Ku.has(e)&&!!this.zu.has(e)&&!this.zu.get(e).hasLocalMutations}Zu(e){e&&(e.addedDocuments.forEach(n=>this.Ku=this.Ku.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ku=this.Ku.delete(n)),this.current=e.current)}Xu(){if(!this.current)return[];const e=this.Qu;this.Qu=pi(),this.zu.forEach(c=>{this.ec(c.key)&&(this.Qu=this.Qu.add(c.key))});const n=[];return e.forEach(c=>{this.Qu.has(c)||n.push(new fv(c))}),this.Qu.forEach(c=>{e.has(c)||n.push(new Vp(c))}),n}nc(e){this.Ku=e.Yi,this.Qu=pi();const n=this.Hu(e.documents);return this.applyChanges(n,!0)}sc(){return Ld.fromInitialDocuments(this.query,this.zu,this.mutatedKeys,0===this.Gu,this.hasCachedResults)}}class H_{constructor(e,n,c){this.query=e,this.targetId=n,this.view=c}}class G_{constructor(e){this.key=e,this.ic=!1}}class ky{constructor(e,n,c,p,_,w){this.localStore=e,this.remoteStore=n,this.eventManager=c,this.sharedClientState=p,this.currentUser=_,this.maxConcurrentLimboResolutions=w,this.rc={},this.oc=new fl(N=>ah(N),Qu),this.uc=new Map,this.cc=new Set,this.ac=new ho(Mn.comparator),this.hc=new Map,this.lc=new Dp,this.fc={},this.dc=new Map,this._c=xh.Sn(),this.onlineState="Unknown",this.wc=void 0}get isPrimaryClient(){return!0===this.wc}}function pv(a,e){return gv.apply(this,arguments)}function gv(){return gv=(0,Fe.Z)(function*(a,e){const n=wv(a);let c,p;const _=n.oc.get(e);if(_)c=_.targetId,n.sharedClientState.addLocalQueryTarget(c),p=_.view.sc();else{const w=yield Ah(n.localStore,Ja(e));n.isPrimaryClient&&Wg(n.remoteStore,w);const N=n.sharedClientState.addLocalQueryTarget(w.targetId);c=w.targetId,p=yield Hp(n,e,c,"current"===N,w.resumeToken)}return p}),gv.apply(this,arguments)}function Hp(a,e,n,c,p){return mv.apply(this,arguments)}function mv(){return mv=(0,Fe.Z)(function*(a,e,n,c,p){a.mc=(rt,kt,on)=>{return(gn=(0,Fe.Z)(function*(Yn,br,Ws,mo){let qi=br.view.Hu(Ws);qi.Li&&(qi=yield Ph(Yn.localStore,br.query,!1).then(({documents:ds})=>br.view.Hu(ds,qi)));const xo=mo&&mo.targetChanges.get(br.targetId),rs=br.view.applyChanges(qi,Yn.isPrimaryClient,xo);return ja(Yn,br.targetId,rs.tc),rs.snapshot}),function(Yn,br,Ws,mo){return gn.apply(this,arguments)})(a,rt,kt,on);var gn};const _=yield Ph(a.localStore,e,!0),w=new Oy(e,_.Yi),N=w.Hu(_.documents),te=$l.createSynthesizedTargetChangeForCurrentChange(n,c&&"Offline"!==a.onlineState,p),ce=w.applyChanges(N,a.isPrimaryClient,te);ja(a,n,ce.tc);const Ae=new H_(e,n,w);return a.oc.set(e,Ae),a.uc.has(n)?a.uc.get(n).push(e):a.uc.set(n,[e]),ce.snapshot}),mv.apply(this,arguments)}function id(a,e){return vv.apply(this,arguments)}function vv(){return vv=(0,Fe.Z)(function*(a,e){const n=Cn(a),c=n.oc.get(e),p=n.uc.get(c.targetId);if(p.length>1)return n.uc.set(c.targetId,p.filter(_=>!Qu(_,e))),void n.oc.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(c.targetId),n.sharedClientState.isActiveQueryTarget(c.targetId)||(yield Ec(n.localStore,c.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(c.targetId),Lp(n.remoteStore,c.targetId),Vu(n,c.targetId)}).catch(Ka))):(Vu(n,c.targetId),yield Ec(n.localStore,c.targetId,!0))}),vv.apply(this,arguments)}function yv(){return yv=(0,Fe.Z)(function*(a,e,n){const c=nm(a);try{const p=yield function(_,w){const N=Cn(_),te=zi.now(),ce=w.reduce((kt,on)=>kt.add(on.key),pi());let Ae,rt;return N.persistence.runTransaction("Locally write mutations","readwrite",kt=>{let on=eu(),gn=pi();return N.ji.getEntries(kt,ce).next(Yn=>{on=Yn,on.forEach((br,Ws)=>{Ws.isValidDocument()||(gn=gn.add(br))})}).next(()=>N.localDocuments.getOverlayedDocuments(kt,on)).next(Yn=>{Ae=Yn;const br=[];for(const Ws of w){const mo=vf(Ws,Ae.get(Ws.key).overlayedDocument);null!=mo&&br.push(new fu(Ws.key,mo,sf(mo.value.mapValue),As.exists(!0)))}return N.mutationQueue.addMutationBatch(kt,te,br,w)}).next(Yn=>{rt=Yn;const br=Yn.applyToLocalDocumentSet(Ae,gn);return N.documentOverlayCache.saveOverlays(kt,Yn.batchId,br)})}).then(()=>({batchId:rt.batchId,changes:Gc(Ae)}))}(c.localStore,e);c.sharedClientState.addPendingMutation(p.batchId),function(_,w,N){let te=_.fc[_.currentUser.toKey()];te||(te=new ho(Mr)),te=te.insert(w,N),_.fc[_.currentUser.toKey()]=te}(c,p.batchId,n),yield wa(c,p.changes),yield jf(c.remoteStore)}catch(p){const _=Rd(p,"Failed to persist write");n.reject(_)}}),yv.apply(this,arguments)}function Ry(a,e){return _v.apply(this,arguments)}function _v(){return _v=(0,Fe.Z)(function*(a,e){const n=Cn(a);try{const c=yield function my(a,e){const n=Cn(a),c=e.snapshotVersion;let p=n.Ki;return n.persistence.runTransaction("Apply remote event","readwrite-primary",_=>{const w=n.ji.newChangeBuffer({trackRemovals:!0});p=n.Ki;const N=[];e.targetChanges.forEach((Ae,rt)=>{const kt=p.get(rt);if(!kt)return;N.push(n.Ns.removeMatchingKeys(_,Ae.removedDocuments,rt).next(()=>n.Ns.addMatchingKeys(_,Ae.addedDocuments,rt)));let on=kt.withSequenceNumber(_.currentSequenceNumber);var gn,Yn,br;e.targetMismatches.has(rt)?on=on.withResumeToken(B.EMPTY_BYTE_STRING,ur.min()).withLastLimboFreeSnapshotVersion(ur.min()):Ae.resumeToken.approximateByteSize()>0&&(on=on.withResumeToken(Ae.resumeToken,c)),p=p.insert(rt,on),Yn=on,br=Ae,(0===(gn=kt).resumeToken.approximateByteSize()||Yn.snapshotVersion.toMicroseconds()-gn.snapshotVersion.toMicroseconds()>=3e8||br.addedDocuments.size+br.modifiedDocuments.size+br.removedDocuments.size>0)&&N.push(n.Ns.updateTargetData(_,on))});let te=eu(),ce=pi();if(e.documentUpdates.forEach(Ae=>{e.resolvedLimboDocuments.has(Ae)&&N.push(n.persistence.referenceDelegate.updateLimboDocument(_,Ae))}),N.push(Dd(_,w,e.documentUpdates).next(Ae=>{te=Ae.Hi,ce=Ae.Ji})),!c.isEqual(ur.min())){const Ae=n.Ns.getLastRemoteSnapshotVersion(_).next(rt=>n.Ns.setTargetsMetadata(_,_.currentSequenceNumber,c));N.push(Ae)}return Lt.waitFor(N).next(()=>w.apply(_)).next(()=>n.localDocuments.getLocalViewOfDocuments(_,te,ce)).next(()=>te)}).then(_=>(n.Ki=p,_))}(n.localStore,e);e.targetChanges.forEach((p,_)=>{const w=n.hc.get(_);w&&(Vn(p.addedDocuments.size+p.modifiedDocuments.size+p.removedDocuments.size<=1),p.addedDocuments.size>0?w.ic=!0:p.modifiedDocuments.size>0?Vn(w.ic):p.removedDocuments.size>0&&(Vn(w.ic),w.ic=!1))}),yield wa(n,c,e)}catch(c){yield Ka(c)}}),_v.apply(this,arguments)}function Tv(a,e,n){const c=Cn(a);if(c.isPrimaryClient&&0===n||!c.isPrimaryClient&&1===n){const p=[];c.oc.forEach((_,w)=>{const N=w.view.Pu(e);N.snapshot&&p.push(N.snapshot)}),function(_,w){const N=Cn(_);N.onlineState=w;let te=!1;N.queries.forEach((ce,Ae)=>{for(const rt of Ae.listeners)rt.Pu(w)&&(te=!0)}),te&&dv(N)}(c.eventManager,e),p.length&&c.rc.Ho(p),c.onlineState=e,c.isPrimaryClient&&c.sharedClientState.setOnlineState(e)}}function Ny(a,e,n){return Qg.apply(this,arguments)}function Qg(){return Qg=(0,Fe.Z)(function*(a,e,n){const c=Cn(a);c.sharedClientState.updateQueryState(e,"rejected",n);const p=c.hc.get(e),_=p&&p.key;if(_){let w=new ho(Mn.comparator);w=w.insert(_,js.newNoDocument(_,ur.min()));const N=pi().add(_),te=new Nl(ur.min(),new Map,new es(Mr),w,N);yield Ry(c,te),c.ac=c.ac.remove(_),c.hc.delete(e),Hf(c)}else yield Ec(c.localStore,e,!1).then(()=>Vu(c,e,n)).catch(Ka)}),Qg.apply(this,arguments)}function g0(a,e){return Xg.apply(this,arguments)}function Xg(){return Xg=(0,Fe.Z)(function*(a,e){const n=Cn(a),c=e.batch.batchId;try{const p=yield function Ym(a,e){const n=Cn(a);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",c=>{const p=e.batch.keys(),_=n.ji.newChangeBuffer({trackRemovals:!0});return function(w,N,te,ce){const Ae=te.batch,rt=Ae.keys();let kt=Lt.resolve();return rt.forEach(on=>{kt=kt.next(()=>ce.getEntry(N,on)).next(gn=>{const Yn=te.docVersions.get(on);Vn(null!==Yn),gn.version.compareTo(Yn)<0&&(Ae.applyToRemoteDocument(gn,te),gn.isValidDocument()&&(gn.setReadTime(te.commitVersion),ce.addEntry(gn)))})}),kt.next(()=>w.mutationQueue.removeMutationBatch(N,Ae))}(n,c,e,_).next(()=>_.apply(c)).next(()=>n.mutationQueue.performConsistencyCheck(c)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(c,p,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,function(w){let N=pi();for(let te=0;te<w.mutationResults.length;++te)w.mutationResults[te].transformResults.length>0&&(N=N.add(w.batch.mutations[te].key));return N}(e))).next(()=>n.localDocuments.getDocuments(c,p))})}(n.localStore,e);Ev(n,c,null),Gp(n,c),n.sharedClientState.updateMutationState(c,"acknowledged"),yield wa(n,p)}catch(p){yield Ka(p)}}),Xg.apply(this,arguments)}function m0(a,e,n){return Vf.apply(this,arguments)}function Vf(){return Vf=(0,Fe.Z)(function*(a,e,n){const c=Cn(a);try{const p=yield function(_,w){const N=Cn(_);return N.persistence.runTransaction("Reject batch","readwrite-primary",te=>{let ce;return N.mutationQueue.lookupMutationBatch(te,w).next(Ae=>(Vn(null!==Ae),ce=Ae.keys(),N.mutationQueue.removeMutationBatch(te,Ae))).next(()=>N.mutationQueue.performConsistencyCheck(te)).next(()=>N.documentOverlayCache.removeOverlaysForBatchId(te,ce,w)).next(()=>N.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(te,ce)).next(()=>N.localDocuments.getDocuments(te,ce))})}(c.localStore,e);Ev(c,e,n),Gp(c,e),c.sharedClientState.updateMutationState(e,"rejected",n),yield wa(c,p)}catch(p){yield Ka(p)}}),Vf.apply(this,arguments)}function bv(){return bv=(0,Fe.Z)(function*(a,e){const n=Cn(a);tc(n.remoteStore)||Kt("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const c=yield function(_){const w=Cn(_);return w.persistence.runTransaction("Get highest unacknowledged batch id","readonly",N=>w.mutationQueue.getHighestUnacknowledgedBatchId(N))}(n.localStore);if(-1===c)return void e.resolve();const p=n.dc.get(c)||[];p.push(e),n.dc.set(c,p)}catch(c){const p=Rd(c,"Initialization of waitForPendingWrites() operation failed");e.reject(p)}}),bv.apply(this,arguments)}function Gp(a,e){(a.dc.get(e)||[]).forEach(n=>{n.resolve()}),a.dc.delete(e)}function Ev(a,e,n){const c=Cn(a);let p=c.fc[c.currentUser.toKey()];if(p){const _=p.get(e);_&&(n?_.reject(n):_.resolve(),p=p.remove(e)),c.fc[c.currentUser.toKey()]=p}}function Vu(a,e,n=null){a.sharedClientState.removeLocalQueryTarget(e);for(const c of a.uc.get(e))a.oc.delete(c),n&&a.rc.gc(c,n);a.uc.delete(e),a.isPrimaryClient&&a.lc.ds(e).forEach(c=>{a.lc.containsKey(c)||Xo(a,c)})}function Xo(a,e){a.cc.delete(e.path.canonicalString());const n=a.ac.get(e);null!==n&&(Lp(a.remoteStore,n),a.ac=a.ac.remove(e),a.hc.delete(n),Hf(a))}function ja(a,e,n){for(const c of n)c instanceof Vp?(a.lc.addReference(c.key,e),jd(a,c)):c instanceof fv?(Kt("SyncEngine","Document no longer in limbo: "+c.key),a.lc.removeReference(c.key,e),a.lc.containsKey(c.key)||Xo(a,c.key)):Fn()}function jd(a,e){const n=e.key,c=n.path.canonicalString();a.ac.get(n)||a.cc.has(c)||(Kt("SyncEngine","New document in limbo: "+n),a.cc.add(c),Hf(a))}function Hf(a){for(;a.cc.size>0&&a.ac.size<a.maxConcurrentLimboResolutions;){const e=a.cc.values().next().value;a.cc.delete(e);const n=new Mn(Ur.fromString(e)),c=a._c.next();a.hc.set(c,new G_(n)),a.ac=a.ac.insert(n,c),Wg(a.remoteStore,new Tc(Ja(dc(n.path)),c,2,ya.at))}}function wa(a,e,n){return $p.apply(this,arguments)}function $p(){return $p=(0,Fe.Z)(function*(a,e,n){const c=Cn(a),p=[],_=[],w=[];var N;c.oc.isEmpty()||(c.oc.forEach((N,te)=>{w.push(c.mc(te,e,n).then(ce=>{if((ce||n)&&c.isPrimaryClient&&c.sharedClientState.updateQueryState(te.targetId,ce?.fromCache?"not-current":"current"),ce){p.push(ce);const Ae=Of.Ni(te.targetId,ce);_.push(Ae)}}))}),yield Promise.all(w),c.rc.Ho(p),yield(N=(0,Fe.Z)(function*(te,ce){const Ae=Cn(te);try{yield Ae.persistence.runTransaction("notifyLocalViewChanges","readwrite",rt=>Lt.forEach(ce,kt=>Lt.forEach(kt.Ci,on=>Ae.persistence.referenceDelegate.addReference(rt,kt.targetId,on)).next(()=>Lt.forEach(kt.xi,on=>Ae.persistence.referenceDelegate.removeReference(rt,kt.targetId,on)))))}catch(rt){if(!Ya(rt))throw rt;Kt("LocalStore","Failed to update sequence numbers: "+rt)}for(const rt of ce){const kt=rt.targetId;if(!rt.fromCache){const on=Ae.Ki.get(kt),Yn=on.withLastLimboFreeSnapshotVersion(on.snapshotVersion);Ae.Ki=Ae.Ki.insert(kt,Yn)}}}),function(te,ce){return N.apply(this,arguments)})(c.localStore,_))}),$p.apply(this,arguments)}function Gf(a,e){return Ud.apply(this,arguments)}function Ud(){return Ud=(0,Fe.Z)(function*(a,e){const n=Cn(a);if(!n.currentUser.isEqual(e)){Kt("SyncEngine","User change. New user:",e.toKey());const c=yield k_(n.localStore,e);n.currentUser=e,(p=n).dc.forEach(w=>{w.forEach(N=>{N.reject(new un(Bt.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),p.dc.clear(),n.sharedClientState.handleUserChange(e,c.removedBatchIds,c.addedBatchIds),yield wa(n,c.Wi)}var p}),Ud.apply(this,arguments)}function Lh(a,e){const n=Cn(a),c=n.hc.get(e);if(c&&c.ic)return pi().add(c.key);{let p=pi();const _=n.uc.get(e);if(!_)return p;for(const w of _){const N=n.oc.get(w);p=p.unionWith(N.view.Wu)}return p}}function $f(a,e){return Bd.apply(this,arguments)}function Bd(){return Bd=(0,Fe.Z)(function*(a,e){const n=Cn(a),c=yield Ph(n.localStore,e.query,!0),p=e.view.nc(c);return n.isPrimaryClient&&ja(n,e.targetId,p.tc),p}),Bd.apply(this,arguments)}function zf(a,e){return Cc.apply(this,arguments)}function Cc(){return Cc=(0,Fe.Z)(function*(a,e){const n=Cn(a);return Jl(n.localStore,e).then(c=>wa(n,c))}),Cc.apply(this,arguments)}function Ic(a,e,n,c){return Vd.apply(this,arguments)}function Vd(){return Vd=(0,Fe.Z)(function*(a,e,n,c){const p=Cn(a),_=yield function(w,N){const te=Cn(w),ce=Cn(te.mutationQueue);return te.persistence.runTransaction("Lookup mutation documents","readonly",Ae=>ce.An(Ae,N).next(rt=>rt?te.localDocuments.getDocuments(Ae,rt):Lt.resolve(null)))}(p.localStore,e);var N;null!==_?("pending"===n?yield jf(p.remoteStore):"acknowledged"===n||"rejected"===n?(Ev(p,e,c||null),Gp(p,e),N=e,Cn(Cn(p.localStore).mutationQueue).bn(N)):Fn(),yield wa(p,_)):Kt("SyncEngine","Cannot apply mutation batch with id: "+e)}),Vd.apply(this,arguments)}function Jg(){return Jg=(0,Fe.Z)(function*(a,e){const n=Cn(a);if(wv(n),nm(n),!0===e&&!0!==n.wc){const c=n.sharedClientState.getAllActiveQueryTargets(),p=yield Sv(n,c.toArray());n.wc=!0,yield Bu(n.remoteStore,!0);for(const _ of p)Wg(n.remoteStore,_)}else if(!1===e&&!1!==n.wc){const c=[];let p=Promise.resolve();n.uc.forEach((_,w)=>{n.sharedClientState.isLocalQueryTarget(w)?c.push(w):p=p.then(()=>(Vu(n,w),Ec(n.localStore,w,!0))),Lp(n.remoteStore,w)}),yield p,yield Sv(n,c),function(_){const w=Cn(_);w.hc.forEach((N,te)=>{Lp(w.remoteStore,te)}),w.lc._s(),w.hc=new Map,w.ac=new ho(Mn.comparator)}(n),n.wc=!1,yield Bu(n.remoteStore,!1)}}),Jg.apply(this,arguments)}function Sv(a,e,n){return Hd.apply(this,arguments)}function Hd(){return Hd=(0,Fe.Z)(function*(a,e,n){const c=Cn(a),p=[],_=[];for(const w of e){let N;const te=c.uc.get(w);if(te&&0!==te.length){N=yield Ah(c.localStore,Ja(te[0]));for(const ce of te){const Ae=c.oc.get(ce),rt=yield $f(c,Ae);rt.snapshot&&_.push(rt.snapshot)}}else{const ce=yield Mp(c.localStore,w);N=yield Ah(c.localStore,ce),yield Hp(c,Fh(ce),w,!1,N.resumeToken)}p.push(N)}return c.rc.Ho(_),p}),Hd.apply(this,arguments)}function Fh(a){return Uc(a.path,a.collectionGroup,a.orderBy,a.filters,a.limit,"F",a.startAt,a.endAt)}function jy(a){const e=Cn(a);return Cn(Cn(e.localStore).persistence).Si()}function jh(a,e,n,c){return em.apply(this,arguments)}function em(){return em=(0,Fe.Z)(function*(a,e,n,c){const p=Cn(a);if(p.wc)return void Kt("SyncEngine","Ignoring unexpected query state notification.");const _=p.uc.get(e);if(_&&_.length>0)switch(n){case"current":case"not-current":{const w=yield Jl(p.localStore,ap(_[0])),N=Nl.createSynthesizedRemoteEventForCurrentChange(e,"current"===n,B.EMPTY_BYTE_STRING);yield wa(p,w,N);break}case"rejected":yield Ec(p.localStore,e,!0),Vu(p,e,c);break;default:Fn()}}),em.apply(this,arguments)}function tm(a,e,n){return Wf.apply(this,arguments)}function Wf(){return Wf=(0,Fe.Z)(function*(a,e,n){const c=wv(a);if(c.wc){for(const p of e){if(c.uc.has(p)){Kt("SyncEngine","Adding an already active target "+p);continue}const _=yield Mp(c.localStore,p),w=yield Ah(c.localStore,_);yield Hp(c,Fh(_),w.targetId,!1,w.resumeToken),Wg(c.remoteStore,w)}for(const p of n)c.uc.has(p)&&(yield Ec(c.localStore,p,!1).then(()=>{Lp(c.remoteStore,p),Vu(c,p)}).catch(Ka))}}),Wf.apply(this,arguments)}function wv(a){const e=Cn(a);return e.remoteStore.remoteSyncer.applyRemoteEvent=Ry.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Lh.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Ny.bind(null,e),e.rc.Ho=Py.bind(null,e.eventManager),e.rc.gc=U_.bind(null,e.eventManager),e}function nm(a){const e=Cn(a);return e.remoteStore.remoteSyncer.applySuccessfulWrite=g0.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=m0.bind(null,e),e}class rm{constructor(){this.synchronizeTabs=!1}initialize(e){var n=this;return(0,Fe.Z)(function*(){n.Tt=ec(e.databaseInfo.databaseId),n.sharedClientState=n.Ic(e),n.persistence=n.Tc(e),yield n.persistence.start(),n.localStore=n.Ec(e),n.gcScheduler=n.Ac(e,n.localStore),n.indexBackfillerScheduler=n.Rc(e,n.localStore)})()}Ac(e,n){return null}Rc(e,n){return null}Ec(e){return O_(this.persistence,new py,e.initialUser,this.Tt)}Tc(e){return new fy(Fg.qs,this.Tt)}Ic(e){return new yy}terminate(){var e=this;return(0,Fe.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class im extends rm{constructor(e,n,c){super(),this.bc=e,this.cacheSizeBytes=n,this.forceOwnership=c,this.synchronizeTabs=!1}initialize(e){var n=()=>super.initialize,c=this;return(0,Fe.Z)(function*(){yield n().call(c,e),yield c.bc.initialize(c,e),yield nm(c.bc.syncEngine),yield jf(c.bc.remoteStore),yield c.persistence.di(()=>(c.gcScheduler&&!c.gcScheduler.started&&c.gcScheduler.start(),c.indexBackfillerScheduler&&!c.indexBackfillerScheduler.started&&c.indexBackfillerScheduler.start(),Promise.resolve()))})()}Ec(e){return O_(this.persistence,new py,e.initialUser,this.Tt)}Ac(e,n){return new zm(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,n)}Rc(e,n){const c=new ka(n,this.persistence);return new Ds(e.asyncQueue,c)}Tc(e){const n=Mf(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),c=void 0!==this.cacheSizeBytes?ju.withCacheSize(this.cacheSizeBytes):ju.DEFAULT;return new Ap(this.synchronizeTabs,n,e.clientId,c,e.asyncQueue,Mh(),td(),this.Tt,this.sharedClientState,!!this.forceOwnership)}Ic(e){return new yy}}class sm extends im{constructor(e,n){super(e,n,!1),this.bc=e,this.cacheSizeBytes=n,this.synchronizeTabs=!0}initialize(e){var n=()=>super.initialize,c=this;return(0,Fe.Z)(function*(){yield n().call(c,e);const p=c.bc.syncEngine;c.sharedClientState instanceof Gg&&(c.sharedClientState.syncEngine={Br:Ic.bind(null,p),Lr:jh.bind(null,p),qr:tm.bind(null,p),Si:jy.bind(null,p),$r:zf.bind(null,p)},yield c.sharedClientState.start()),yield c.persistence.di(function(){var _=(0,Fe.Z)(function*(w){yield function Fy(a,e){return Jg.apply(this,arguments)}(c.bc.syncEngine,w),c.gcScheduler&&(w&&!c.gcScheduler.started?c.gcScheduler.start():w||c.gcScheduler.stop()),c.indexBackfillerScheduler&&(w&&!c.indexBackfillerScheduler.started?c.indexBackfillerScheduler.start():w||c.indexBackfillerScheduler.stop())});return function(w){return _.apply(this,arguments)}}())})()}Ic(e){const n=Mh();if(!Gg.C(n))throw new un(Bt.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const c=Mf(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Gg(n,e.asyncQueue,c,e.clientId,e.initialUser)}}class Cv{initialize(e,n){var c=this;return(0,Fe.Z)(function*(){c.localStore||(c.localStore=e.localStore,c.sharedClientState=e.sharedClientState,c.datastore=c.createDatastore(n),c.remoteStore=c.createRemoteStore(n),c.eventManager=c.createEventManager(n),c.syncEngine=c.createSyncEngine(n,!e.synchronizeTabs),c.sharedClientState.onlineStateHandler=p=>Tv(c.syncEngine,p,1),c.remoteStore.remoteSyncer.handleCredentialChange=Gf.bind(null,c.syncEngine),yield Bu(c.remoteStore,c.syncEngine.isPrimaryClient))})()}createEventManager(e){return new Zg}createDatastore(e){const n=ec(e.databaseInfo.databaseId),c=new kf(e.databaseInfo);return new Np(e.authCredentials,e.appCheckCredentials,c,n)}createRemoteStore(e){return n=this.localStore,c=this.datastore,p=e.asyncQueue,_=N=>Tv(this.syncEngine,N,0),w=Ty.C()?new Ty:new _y,new F_(n,c,p,_,w);var n,c,p,_,w}createSyncEngine(e,n){return function(c,p,_,w,N,te,ce){const Ae=new ky(c,p,_,w,N,te);return ce&&(Ae.wc=!0),Ae}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}terminate(){return(e=(0,Fe.Z)(function*(n){const c=Cn(n);Kt("RemoteStore","RemoteStore shutting down."),c.mu.add(5),yield Oh(c),c.yu.shutdown(),c.pu.set("Unknown")}),function(n){return e.apply(this,arguments)})(this.remoteStore);var e}}function zp(a,e=10240){let n=0;return{read:()=>(0,Fe.Z)(function*(){if(n<a.byteLength){const c={value:a.slice(n,n+e),done:!1};return n+=e,c}return{done:!0}})(),cancel:()=>(0,Fe.Z)(function*(){})(),releaseLock(){},closed:Promise.resolve()}}class Uh{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.vc(this.observer.next,e)}error(e){this.observer.error?this.vc(this.observer.error,e):si("Uncaught Error in snapshot listener:",e.toString())}Pc(){this.muted=!0}vc(e,n){this.muted||setTimeout(()=>{this.muted||e(n)},0)}}class Iv{constructor(e,n){this.Vc=e,this.Tt=n,this.metadata=new Oi,this.buffer=new Uint8Array,this.Sc=new TextDecoder("utf-8"),this.Dc().then(c=>{c&&c.Fu()?this.metadata.resolve(c.Mu.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(c?.Mu)}`))},c=>this.metadata.reject(c))}close(){return this.Vc.cancel()}getMetadata(){var e=this;return(0,Fe.Z)(function*(){return e.metadata.promise})()}yc(){var e=this;return(0,Fe.Z)(function*(){return yield e.getMetadata(),e.Dc()})()}Dc(){var e=this;return(0,Fe.Z)(function*(){const n=yield e.Cc();if(null===n)return null;const c=e.Sc.decode(n),p=Number(c);isNaN(p)&&e.xc(`length string (${c}) is not valid number`);const _=yield e.Nc(p);return new hv(JSON.parse(_),n.length+p)})()}kc(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}Cc(){var e=this;return(0,Fe.Z)(function*(){for(;e.kc()<0&&!(yield e.Oc()););if(0===e.buffer.length)return null;const n=e.kc();n<0&&e.xc("Reached the end of bundle when a length string is expected.");const c=e.buffer.slice(0,n);return e.buffer=e.buffer.slice(n),c})()}Nc(e){var n=this;return(0,Fe.Z)(function*(){for(;n.buffer.length<e;)(yield n.Oc())&&n.xc("Reached the end of bundle when more is expected.");const c=n.Sc.decode(n.buffer.slice(0,e));return n.buffer=n.buffer.slice(e),c})()}xc(e){throw this.Vc.cancel(),new Error(`Invalid bundle format: ${e}`)}Oc(){var e=this;return(0,Fe.Z)(function*(){const n=yield e.Vc.read();if(!n.done){const c=new Uint8Array(e.buffer.length+n.value.length);c.set(e.buffer),c.set(n.value,e.buffer.length),e.buffer=c}return n.done})()}}class z_{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var n=this;return(0,Fe.Z)(function*(){if(n.ensureCommitNotCalled(),n.mutations.length>0)throw new un(Bt.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const c=yield(p=(0,Fe.Z)(function*(_,w){const N=Cn(_),te=Ce(N.Tt)+"/documents",ce={documents:w.map(on=>y(N.Tt,on))},Ae=yield N.mo("BatchGetDocuments",te,ce,w.length),rt=new Map;Ae.forEach(on=>{const gn=function lr(a,e){return"found"in e?function(n,c){Vn(!!c.found);const p=T(n,c.found.name),_=Ro(c.found.updateTime),w=c.found.createTime?Ro(c.found.createTime):ur.min(),N=new fo({mapValue:{fields:c.found.fields}});return js.newFoundDocument(p,_,w,N)}(a,e):"missing"in e?function(n,c){Vn(!!c.missing),Vn(!!c.readTime);const p=T(n,c.missing),_=Ro(c.readTime);return js.newNoDocument(p,_)}(a,e):Fn()}(N.Tt,on);rt.set(gn.key.toString(),gn)});const kt=[];return w.forEach(on=>{const gn=rt.get(on.toString());Vn(!!gn),kt.push(gn)}),kt}),function(_,w){return p.apply(this,arguments)})(n.datastore,e);var p;return c.forEach(p=>n.recordVersion(p)),c})()}set(e,n){this.write(n.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,n){try{this.write(n.toMutation(e,this.preconditionForUpdate(e)))}catch(c){this.lastWriteError=c}this.writtenDocs.add(e.toString())}delete(e){this.write(new Rl(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,Fe.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const n=e.readVersions;var c;e.mutations.forEach(c=>{n.delete(c.key.toString())}),n.forEach((c,p)=>{const _=Mn.fromPath(p);e.mutations.push(new dp(_,e.precondition(_)))}),yield(c=(0,Fe.Z)(function*(p,_){const w=Cn(p),N=Ce(w.Tt)+"/documents",te={writes:_.map(ce=>Er(w.Tt,ce))};yield w.lo("Commit",N,te)}),function(p,_){return c.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let n;if(e.isFoundDocument())n=e.version;else{if(!e.isNoDocument())throw Fn();n=ur.min()}const c=this.readVersions.get(e.key.toString());if(c){if(!n.isEqual(c))throw new un(Bt.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),n)}precondition(e){const n=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&n?n.isEqual(ur.min())?As.exists(!1):As.updateTime(n):As.none()}preconditionForUpdate(e){const n=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&n){if(n.isEqual(ur.min()))throw new un(Bt.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return As.updateTime(n)}return As.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class om{constructor(e,n,c,p,_){this.asyncQueue=e,this.datastore=n,this.options=c,this.updateFunction=p,this.deferred=_,this.Mc=c.maxAttempts,this.ko=new nd(this.asyncQueue,"transaction_retry")}run(){this.Mc-=1,this.Fc()}Fc(){var e=this;this.ko.vo((0,Fe.Z)(function*(){const n=new z_(e.datastore),c=e.$c(n);c&&c.then(p=>{e.asyncQueue.enqueueAndForget(()=>n.commit().then(()=>{e.deferred.resolve(p)}).catch(_=>{e.Bc(_)}))}).catch(p=>{e.Bc(p)})}))}$c(e){try{const n=this.updateFunction(e);return!du(n)&&n.catch&&n.then?n:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(n){return this.deferred.reject(n),null}}Bc(e){this.Mc>0&&this.Lc(e)?(this.Mc-=1,this.asyncQueue.enqueueAndForget(()=>(this.Fc(),Promise.resolve()))):this.deferred.reject(e)}Lc(e){if("FirebaseError"===e.name){const n=e.code;return"aborted"===n||"failed-precondition"===n||"already-exists"===n||!Gl(n)}return!1}}class Wp{constructor(e,n,c,p){var _=this;this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=c,this.databaseInfo=p,this.user=qt.UNAUTHENTICATED,this.clientId=ku.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(c,function(){var w=(0,Fe.Z)(function*(N){Kt("FirestoreClient","Received user=",N.uid),yield _.authCredentialListener(N),_.user=N});return function(N){return w.apply(this,arguments)}}()),this.appCheckCredentials.start(c,w=>(Kt("FirestoreClient","Received new app check token=",w),this.appCheckCredentialListener(w,this.user)))}getConfiguration(){var e=this;return(0,Fe.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new un(Bt.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const n=new Oi;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,Fe.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),n.resolve()}catch(c){const p=Rd(c,"Failed to shutdown persistence");n.reject(p)}})),n.promise}}function xv(a,e){return am.apply(this,arguments)}function am(){return am=(0,Fe.Z)(function*(a,e){a.asyncQueue.verifyOperationInProgress(),Kt("FirestoreClient","Initializing OfflineComponentProvider");const n=yield a.getConfiguration();yield e.initialize(n);let c=n.initialUser;a.setCredentialChangeListener(function(){var p=(0,Fe.Z)(function*(_){c.isEqual(_)||(yield k_(e.localStore,_),c=_)});return function(_){return p.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>a.terminate()),a.offlineComponents=e}),am.apply(this,arguments)}function um(a,e){return lm.apply(this,arguments)}function lm(){return lm=(0,Fe.Z)(function*(a,e){a.asyncQueue.verifyOperationInProgress();const n=yield cm(a);Kt("FirestoreClient","Initializing OnlineComponentProvider");const c=yield a.getConfiguration();yield e.initialize(n,c),a.setCredentialChangeListener(p=>Nh(e.remoteStore,p)),a.setAppCheckTokenChangeListener((p,_)=>Nh(e.remoteStore,_)),a.onlineComponents=e}),lm.apply(this,arguments)}function cm(a){return qp.apply(this,arguments)}function qp(){return qp=(0,Fe.Z)(function*(a){return a.offlineComponents||(Kt("FirestoreClient","Using default OfflineComponentProvider"),yield xv(a,new rm)),a.offlineComponents}),qp.apply(this,arguments)}function Kp(a){return Dv.apply(this,arguments)}function Dv(){return Dv=(0,Fe.Z)(function*(a){return a.onlineComponents||(Kt("FirestoreClient","Using default OnlineComponentProvider"),yield um(a,new Cv)),a.onlineComponents}),Dv.apply(this,arguments)}function xc(a){return cm(a).then(e=>e.persistence)}function qf(a){return cm(a).then(e=>e.localStore)}function dm(a){return Kp(a).then(e=>e.remoteStore)}function hm(a){return Kp(a).then(e=>e.syncEngine)}function Vh(a){return fm.apply(this,arguments)}function fm(){return fm=(0,Fe.Z)(function*(a){const e=yield Kp(a),n=e.eventManager;return n.onListen=pv.bind(null,e.syncEngine),n.onUnlisten=id.bind(null,e.syncEngine),n}),fm.apply(this,arguments)}function ns(a,e,n={}){const c=new Oi;return a.asyncQueue.enqueueAndForget((0,Fe.Z)(function*(){return function(p,_,w,N,te){const ce=new Uh({next:rt=>{_.enqueueAndForget(()=>cv(p,Ae));const kt=rt.docs.has(w);!kt&&rt.fromCache?te.reject(new un(Bt.UNAVAILABLE,"Failed to get document because the client is offline.")):kt&&rt.fromCache&&N&&"server"===N.source?te.reject(new un(Bt.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):te.resolve(rt)},error:rt=>te.reject(rt)}),Ae=new wc(dc(w.path),ce,{includeMetadataChanges:!0,Ou:!0});return Bf(p,Ae)}(yield Vh(a),a.asyncQueue,e,n,c)})),c.promise}function Pv(a,e,n={}){const c=new Oi;return a.asyncQueue.enqueueAndForget((0,Fe.Z)(function*(){return function(p,_,w,N,te){const ce=new Uh({next:rt=>{_.enqueueAndForget(()=>cv(p,Ae)),rt.fromCache&&"server"===N.source?te.reject(new un(Bt.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):te.resolve(rt)},error:rt=>te.reject(rt)}),Ae=new wc(w,ce,{includeMetadataChanges:!0,Ou:!0});return Bf(p,Ae)}(yield Vh(a),a.asyncQueue,e,n,c)})),c.promise}const Gd=new Map;function Zf(a,e,n){if(!n)throw new un(Bt.INVALID_ARGUMENT,`Function ${a}() cannot be called with an empty ${e}.`)}function sd(a,e,n,c){if(!0===e&&!0===c)throw new un(Bt.INVALID_ARGUMENT,`${a} and ${n} cannot be used together.`)}function Yf(a){if(!Mn.isDocumentKey(a))throw new un(Bt.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${a} has ${a.length}.`)}function Qf(a){if(Mn.isDocumentKey(a))throw new un(Bt.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${a} has ${a.length}.`)}function Xf(a){if(void 0===a)return"undefined";if(null===a)return"null";if("string"==typeof a)return a.length>20&&(a=`${a.substring(0,20)}...`),JSON.stringify(a);if("number"==typeof a||"boolean"==typeof a)return""+a;if("object"==typeof a){if(a instanceof Array)return"an array";{const e=(n=a).constructor?n.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var n;return"function"==typeof a?"a function":Fn()}function bi(a,e){if("_delegate"in a&&(a=a._delegate),!(a instanceof e)){if(e.name===a.constructor.name)throw new un(Bt.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Xf(a);throw new un(Bt.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return a}function pm(a,e){if(e<=0)throw new un(Bt.INVALID_ARGUMENT,`Function ${a}() requires a positive number, but it was: ${e}.`)}class $y{constructor(e){var n;if(void 0===e.host){if(void 0!==e.ssl)throw new un(Bt.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(n=e.ssl)||void 0===n||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new un(Bt.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,sd("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class rc{constructor(e,n,c,p){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=c,this._app=p,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new $y({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new un(Bt.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new un(Bt.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new $y(e),void 0!==e.credentials&&(this._authCredentials=function(n){if(!n)return new Dl;switch(n.type){case"gapi":return new lu(n.client,n.sessionIndex||"0",n.iamToken||null,n.authTokenFactory||null);case"provider":return n.client;default:throw new un(Bt.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const n=Gd.get(e);n&&(Kt("ComponentProvider","Removing Datastore"),Gd.delete(e),n.terminate())}(this),Promise.resolve()}}class Ys{constructor(e,n,c){this.converter=n,this._key=c,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Hu(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Ys(this.firestore,e,this._key)}}class pu{constructor(e,n,c){this.converter=n,this._query=c,this.type="query",this.firestore=e}withConverter(e){return new pu(this.firestore,e,this._query)}}class Hu extends pu{constructor(e,n,c){super(e,n,dc(c)),this._path=c,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Ys(this.firestore,null,new Mn(e))}withConverter(e){return new Hu(this.firestore,e,this._path)}}function $d(a,e,...n){if(a=(0,St.m9)(a),Zf("collection","path",e),a instanceof rc){const c=Ur.fromString(e,...n);return Qf(c),new Hu(a,null,c)}{if(!(a instanceof Ys||a instanceof Hu))throw new un(Bt.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const c=a._path.child(Ur.fromString(e,...n));return Qf(c),new Hu(a.firestore,null,c)}}function aa(a,e,...n){if(a=(0,St.m9)(a),1===arguments.length&&(e=ku.R()),Zf("doc","path",e),a instanceof rc){const c=Ur.fromString(e,...n);return Yf(c),new Ys(a,null,new Mn(c))}{if(!(a instanceof Ys||a instanceof Hu))throw new un(Bt.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const c=a._path.child(Ur.fromString(e,...n));return Yf(c),new Ys(a.firestore,a instanceof Hu?a.converter:null,new Mn(c))}}function gm(a,e){return a=(0,St.m9)(a),e=(0,St.m9)(e),(a instanceof Ys||a instanceof Hu)&&(e instanceof Ys||e instanceof Hu)&&a.firestore===e.firestore&&a.path===e.path&&a.converter===e.converter}function g(a,e){return a=(0,St.m9)(a),e=(0,St.m9)(e),a instanceof pu&&e instanceof pu&&a.firestore===e.firestore&&Qu(a._query,e._query)&&a.converter===e.converter}class i{constructor(){this.qc=Promise.resolve(),this.Uc=[],this.Kc=!1,this.Gc=[],this.Qc=null,this.jc=!1,this.zc=!1,this.Wc=[],this.ko=new nd(this,"async_queue_retry"),this.Hc=()=>{const n=td();n&&Kt("AsyncQueue","Visibility state changed to "+n.visibilityState),this.ko.Vo()};const e=td();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Hc)}get isShuttingDown(){return this.Kc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Jc(),this.Yc(e)}enterRestrictedMode(e){if(!this.Kc){this.Kc=!0,this.zc=e||!1;const n=td();n&&"function"==typeof n.removeEventListener&&n.removeEventListener("visibilitychange",this.Hc)}}enqueue(e){if(this.Jc(),this.Kc)return new Promise(()=>{});const n=new Oi;return this.Yc(()=>this.Kc&&this.zc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Uc.push(e),this.Zc()))}Zc(){var e=this;return(0,Fe.Z)(function*(){if(0!==e.Uc.length){try{yield e.Uc[0](),e.Uc.shift(),e.ko.reset()}catch(n){if(!Ya(n))throw n;Kt("AsyncQueue","Operation failed with retryable error: "+n)}e.Uc.length>0&&e.ko.vo(()=>e.Zc())}})()}Yc(e){const n=this.qc.then(()=>(this.jc=!0,e().catch(c=>{throw this.Qc=c,this.jc=!1,si("INTERNAL UNHANDLED ERROR: ",function(_){let w=_.message||"";return _.stack&&(w=_.stack.includes(_.message)?_.stack:_.message+"\n"+_.stack),w}(c)),c}).then(c=>(this.jc=!1,c))));return this.qc=n,n}enqueueAfterDelay(e,n,c){this.Jc(),this.Wc.indexOf(e)>-1&&(n=0);const p=Bp.createAndSchedule(this,e,n,c,_=>this.Xc(_));return this.Gc.push(p),p}Jc(){this.Qc&&Fn()}verifyOperationInProgress(){}ta(){var e=this;return(0,Fe.Z)(function*(){let n;do{n=e.qc,yield n}while(n!==e.qc)})()}ea(e){for(const n of this.Gc)if(n.timerId===e)return!0;return!1}na(e){return this.ta().then(()=>{this.Gc.sort((n,c)=>n.targetTimeMs-c.targetTimeMs);for(const n of this.Gc)if(n.skipDelay(),"all"!==e&&n.timerId===e)break;return this.ta()})}sa(e){this.Wc.push(e)}Xc(e){const n=this.Gc.indexOf(e);this.Gc.splice(n,1)}}function u(a){return function(e,n){if("object"!=typeof e||null===e)return!1;const c=e;for(const p of["next","error","complete"])if(p in c&&"function"==typeof c[p])return!0;return!1}(a)}class l{constructor(){this._progressObserver={},this._taskCompletionResolver=new Oi,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,n,c){this._progressObserver={next:e,error:n,complete:c}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,n){return this._taskCompletionResolver.promise.then(e,n)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class s extends rc{constructor(e,n,c,p){super(e,n,c,p),this.type="firestore",this._queue=new i,this._persistenceKey=p?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||D(this),this._firestoreClient.terminate()}}function S(a){return a._firestoreClient||D(a),a._firestoreClient.verifyNotTerminated(),a._firestoreClient}function D(a){var e;const n=a._freezeSettings(),c=(_=(null===(e=a._app)||void 0===e?void 0:e.options.appId)||"",new Ra(a._databaseId,_,a._persistenceKey,(N=n).host,N.ssl,N.experimentalForceLongPolling,N.experimentalAutoDetectLongPolling,N.useFetchStreams));var _,N;a._firestoreClient=new Wp(a._authCredentials,a._appCheckCredentials,a._queue,c)}function Y(a,e,n){const c=new Oi;return a.asyncQueue.enqueue((0,Fe.Z)(function*(){try{yield xv(a,n),yield um(a,e),c.resolve()}catch(p){const _=p;if(!("FirebaseError"===(w=_).name?w.code===Bt.FAILED_PRECONDITION||w.code===Bt.UNIMPLEMENTED:!(typeof DOMException<"u"&&w instanceof DOMException)||22===w.code||20===w.code||11===w.code))throw _;gr("Error enabling offline persistence. Falling back to persistence disabled: "+_),c.reject(_)}var w})).then(()=>c.promise)}function Yt(a){if(a._initialized||a._terminated)throw new un(Bt.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class nn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new nn(B.fromBase64String(e))}catch(n){throw new un(Bt.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new nn(B.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class tn{constructor(...e){for(let n=0;n<e.length;++n)if(0===e[n].length)throw new un(Bt.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new _s(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class cn{constructor(e){this._methodName=e}}class wr{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new un(Bt.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new un(Bt.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Mr(this._lat,e._lat)||Mr(this._long,e._long)}}const Gn=/^__.*__$/;class ni{constructor(e,n,c){this.data=e,this.fieldMask=n,this.fieldTransforms=c}toMutation(e,n){return null!==this.fieldMask?new fu(e,this.data,this.fieldMask,n,this.fieldTransforms):new hu(e,this.data,n,this.fieldTransforms)}}class Qs{constructor(e,n,c){this.data=e,this.fieldMask=n,this.fieldTransforms=c}toMutation(e,n){return new fu(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function po(a){switch(a){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Fn()}}class Co{constructor(e,n,c,p,_,w){this.settings=e,this.databaseId=n,this.Tt=c,this.ignoreUndefinedProperties=p,void 0===_&&this.ia(),this.fieldTransforms=_||[],this.fieldMask=w||[]}get path(){return this.settings.path}get ra(){return this.settings.ra}oa(e){return new Co(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.Tt,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ua(e){var n;const c=null===(n=this.path)||void 0===n?void 0:n.child(e),p=this.oa({path:c,ca:!1});return p.aa(e),p}ha(e){var n;const c=null===(n=this.path)||void 0===n?void 0:n.child(e),p=this.oa({path:c,ca:!1});return p.ia(),p}la(e){return this.oa({path:void 0,ca:!0})}fa(e){return qd(e,this.settings.methodName,this.settings.da||!1,this.path,this.settings._a)}contains(e){return void 0!==this.fieldMask.find(n=>e.isPrefixOf(n))||void 0!==this.fieldTransforms.find(n=>e.isPrefixOf(n.field))}ia(){if(this.path)for(let e=0;e<this.path.length;e++)this.aa(this.path.get(e))}aa(e){if(0===e.length)throw this.fa("Document fields must not be empty");if(po(this.ra)&&Gn.test(e))throw this.fa('Document fields cannot begin and end with "__"')}}class ua{constructor(e,n,c){this.databaseId=e,this.ignoreUndefinedProperties=n,this.Tt=c||ec(e)}wa(e,n,c,p=!1){return new Co({ra:e,methodName:n,_a:c,path:_s.emptyPath(),ca:!1,da:p},this.databaseId,this.Tt,this.ignoreUndefinedProperties)}}function ms(a){const e=a._freezeSettings(),n=ec(a._databaseId);return new ua(a._databaseId,!!e.ignoreUndefinedProperties,n)}function Ua(a,e,n,c,p,_={}){const w=a.wa(_.merge||_.mergeFields?2:0,e,n,p);Ov("Data must be an object, but it was:",w,c);const N=Mv(c,w);let te,ce;if(_.merge)te=new Zr(w.fieldMask),ce=w.fieldTransforms;else if(_.mergeFields){const Ae=[];for(const rt of _.mergeFields){const kt=Zp(e,rt,n);if(!w.contains(kt))throw new un(Bt.INVALID_ARGUMENT,`Field '${kt}' is specified in your field mask but missing from your input data.`);ad(Ae,kt)||Ae.push(kt)}te=new Zr(Ae),ce=w.fieldTransforms.filter(rt=>te.covers(rt.field))}else te=null,ce=w.fieldTransforms;return new ni(new fo(N),te,ce)}class ls extends cn{_toFieldTransform(e){if(2!==e.ra)throw e.fa(1===e.ra?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof ls}}function Jf(a,e,n){return new Co({ra:3,_a:e.settings._a,methodName:a._methodName,ca:n},e.databaseId,e.Tt,e.ignoreUndefinedProperties)}class xu extends cn{_toFieldTransform(e){return new Bc(e.path,new Xu)}isEqual(e){return e instanceof xu}}class jl extends cn{constructor(e,n){super(e),this.ma=n}_toFieldTransform(e){const n=Jf(this,e,!0),c=this.ma.map(_=>Sl(_,n)),p=new cl(c);return new Bc(e.path,p)}isEqual(e){return this===e}}class Dc extends cn{constructor(e,n){super(e),this.ma=n}_toFieldTransform(e){const n=Jf(this,e,!0),c=this.ma.map(_=>Sl(_,n)),p=new fc(c);return new Bc(e.path,p)}isEqual(e){return this===e}}class zd extends cn{constructor(e,n){super(e),this.ga=n}_toFieldTransform(e){const n=new hl(e.Tt,vg(e.Tt,this.ga));return new Bc(e.path,n)}isEqual(e){return this===e}}function El(a,e,n,c){const p=a.wa(1,e,n);Ov("Data must be an object, but it was:",p,c);const _=[],w=fo.empty();co(c,(te,ce)=>{const Ae=vm(e,te,n);ce=(0,St.m9)(ce);const rt=p.ha(Ae);if(ce instanceof ls)_.push(Ae);else{const kt=Sl(ce,rt);null!=kt&&(_.push(Ae),w.set(Ae,kt))}});const N=new Zr(_);return new Qs(w,N,p.fieldTransforms)}function od(a,e,n,c,p,_){const w=a.wa(1,e,n),N=[Zp(e,c,n)],te=[p];if(_.length%2!=0)throw new un(Bt.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let kt=0;kt<_.length;kt+=2)N.push(Zp(e,_[kt])),te.push(_[kt+1]);const ce=[],Ae=fo.empty();for(let kt=N.length-1;kt>=0;--kt)if(!ad(ce,N[kt])){const on=N[kt];let gn=te[kt];gn=(0,St.m9)(gn);const Yn=w.ha(on);if(gn instanceof ls)ce.push(on);else{const br=Sl(gn,Yn);null!=br&&(ce.push(on),Ae.set(on,br))}}const rt=new Zr(ce);return new Qs(Ae,rt,w.fieldTransforms)}function Wd(a,e,n,c=!1){return Sl(n,a.wa(c?4:3,e))}function Sl(a,e){if(mm(a=(0,St.m9)(a)))return Ov("Unsupported field value:",e,a),Mv(a,e);if(a instanceof cn)return function(n,c){if(!po(c.ra))throw c.fa(`${n._methodName}() can only be used with update() and set()`);if(!c.path)throw c.fa(`${n._methodName}() is not currently supported inside arrays`);const p=n._toFieldTransform(c);p&&c.fieldTransforms.push(p)}(a,e),null;if(void 0===a&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),a instanceof Array){if(e.settings.ca&&4!==e.ra)throw e.fa("Nested arrays are not supported");return function(n,c){const p=[];let _=0;for(const w of n){let N=Sl(w,c.la(_));null==N&&(N={nullValue:"NULL_VALUE"}),p.push(N),_++}return{arrayValue:{values:p}}}(a,e)}return function(n,c){if(null===(n=(0,St.m9)(n)))return{nullValue:"NULL_VALUE"};if("number"==typeof n)return vg(c.Tt,n);if("boolean"==typeof n)return{booleanValue:n};if("string"==typeof n)return{stringValue:n};if(n instanceof Date){const p=zi.fromDate(n);return{timestampValue:vl(c.Tt,p)}}if(n instanceof zi){const p=new zi(n.seconds,1e3*Math.floor(n.nanoseconds/1e3));return{timestampValue:vl(c.Tt,p)}}if(n instanceof wr)return{geoPointValue:{latitude:n.latitude,longitude:n.longitude}};if(n instanceof nn)return{bytesValue:Sf(c.Tt,n._byteString)};if(n instanceof Ys){const p=c.databaseId,_=n.firestore._databaseId;if(!_.isEqual(p))throw c.fa(`Document reference is for database ${_.projectId}/${_.database} but should be for database ${p.projectId}/${p.database}`);return{referenceValue:wf(n.firestore._databaseId||c.databaseId,n._key.path)}}throw c.fa(`Unsupported field value: ${Xf(n)}`)}(a,e)}function Mv(a,e){const n={};return Yu(a)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):co(a,(c,p)=>{const _=Sl(p,e.ua(c));null!=_&&(n[c]=_)}),{mapValue:{fields:n}}}function mm(a){return!("object"!=typeof a||null===a||a instanceof Array||a instanceof Date||a instanceof zi||a instanceof wr||a instanceof nn||a instanceof Ys||a instanceof cn)}function Ov(a,e,n){if(!mm(n)||"object"!=typeof(c=n)||null===c||Object.getPrototypeOf(c)!==Object.prototype&&null!==Object.getPrototypeOf(c)){const c=Xf(n);throw e.fa("an object"===c?a+" a custom object":a+" "+c)}var c}function Zp(a,e,n){if((e=(0,St.m9)(e))instanceof tn)return e._internalPath;if("string"==typeof e)return vm(a,e);throw qd("Field path arguments must be of type string or ",a,!1,void 0,n)}const q_=new RegExp("[~\\*/\\[\\]]");function vm(a,e,n){if(e.search(q_)>=0)throw qd(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,a,!1,void 0,n);try{return new tn(...e.split("."))._internalPath}catch{throw qd(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,a,!1,void 0,n)}}function qd(a,e,n,c,p){const _=c&&!c.isEmpty(),w=void 0!==p;let N=`Function ${e}() called with invalid data`;n&&(N+=" (via `toFirestore()`)"),N+=". ";let te="";return(_||w)&&(te+=" (found",_&&(te+=` in field ${c}`),w&&(te+=` in document ${p}`),te+=")"),new un(Bt.INVALID_ARGUMENT,N+a+te)}function ad(a,e){return a.some(n=>n.isEqual(e))}class Gh{constructor(e,n,c,p,_){this._firestore=e,this._userDataWriter=n,this._key=c,this._document=p,this._converter=_}get id(){return this._key.path.lastSegment()}get ref(){return new Ys(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new zs(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(ym("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n)}}}class zs extends Gh{data(){return super.data()}}function ym(a,e){return"string"==typeof e?vm(a,e):e instanceof tn?e._internalPath:e._delegate._internalPath}function _m(a){if("L"===a.limitType&&0===a.explicitOrderBy.length)throw new un(Bt.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class kv{}class $h extends kv{}function Ac(a,e,...n){let c=[];e instanceof kv&&c.push(e),c=c.concat(n),function(p){const _=p.filter(N=>N instanceof Kd).length,w=p.filter(N=>N instanceof zh).length;if(_>1||_>0&&w>0)throw new un(Bt.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(c);for(const p of c)a=p._apply(a);return a}class zh extends $h{constructor(e,n,c){super(),this._field=e,this._op=n,this._value=c,this.type="where"}static _create(e,n,c){return new zh(e,n,c)}_apply(e){const n=this._parse(e);return Wh(e._query,n),new pu(e.firestore,e.converter,df(e._query,n))}_parse(e){const n=ms(e.firestore);return function(p,_,w,N,te,ce,Ae){let rt;if(te.isKeyField()){if("array-contains"===ce||"array-contains-any"===ce)throw new un(Bt.INVALID_ARGUMENT,`Invalid Query. You can't perform '${ce}' queries on documentId().`);if("in"===ce||"not-in"===ce){Rv(Ae,ce);const kt=[];for(const on of Ae)kt.push(Ul(N,p,on));rt={arrayValue:{values:kt}}}else rt=Ul(N,p,Ae)}else"in"!==ce&&"not-in"!==ce&&"array-contains-any"!==ce||Rv(Ae,ce),rt=Wd(w,"where",Ae,"in"===ce||"not-in"===ce);return ei.create(te,ce,rt)}(e._query,0,n,e.firestore._databaseId,this._field,this._op,this._value)}}class Kd extends kv{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Kd(e,n)}_parse(e){const n=this._queryConstraints.map(c=>c._parse(e)).filter(c=>c.getFilters().length>0);return 1===n.length?n[0]:Si.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return 0===n.getFilters().length?e:(function(c,p){let _=c;const w=p.getFlattenedFilters();for(const N of w)Wh(_,N),_=df(_,N)}(e._query,n),new pu(e.firestore,e.converter,df(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class Yp extends $h{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new Yp(e,n)}_apply(e){const n=function(c,p,_){if(null!==c.startAt)throw new un(Bt.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==c.endAt)throw new un(Bt.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const w=new oh(p,_);return function(N,te){if(null===Ta(N)){const ce=Eu(N);null!==ce&&Y_(0,ce,te.field)}}(c,w),w}(e._query,this._field,this._direction);return new pu(e.firestore,e.converter,function(c,p){const _=c.explicitOrderBy.concat([p]);return new wo(c.path,c.collectionGroup,_,c.filters.slice(),c.limit,c.limitType,c.startAt,c.endAt)}(e._query,n))}}class Qp extends $h{constructor(e,n,c){super(),this.type=e,this._limit=n,this._limitType=c}static _create(e,n,c){return new Qp(e,n,c)}_apply(e){return new pu(e.firestore,e.converter,hf(e._query,this._limit,this._limitType))}}class Xp extends $h{constructor(e,n,c){super(),this.type=e,this._docOrFields=n,this._inclusive=c}static _create(e,n,c){return new Xp(e,n,c)}_apply(e){const n=Zd(e,this.type,this._docOrFields,this._inclusive);return new pu(e.firestore,e.converter,(p=n,new wo((c=e._query).path,c.collectionGroup,c.explicitOrderBy.slice(),c.filters.slice(),c.limit,c.limitType,p,c.endAt)));var c,p}}class eg extends $h{constructor(e,n,c){super(),this.type=e,this._docOrFields=n,this._inclusive=c}static _create(e,n,c){return new eg(e,n,c)}_apply(e){const n=Zd(e,this.type,this._docOrFields,this._inclusive);return new pu(e.firestore,e.converter,(p=n,new wo((c=e._query).path,c.collectionGroup,c.explicitOrderBy.slice(),c.filters.slice(),c.limit,c.limitType,c.startAt,p)));var c,p}}function Zd(a,e,n,c){if(n[0]=(0,St.m9)(n[0]),n[0]instanceof Gh)return function(p,_,w,N,te){if(!N)throw new un(Bt.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${w}().`);const ce=[];for(const Ae of ll(p))if(Ae.field.isKeyField())ce.push(X(_,N.key));else{const rt=N.data.field(Ae.field);if(Wt(rt))throw new un(Bt.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+Ae.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===rt){const kt=Ae.field.canonicalString();throw new un(Bt.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${kt}' (used as the orderBy) does not exist.`)}ce.push(rt)}return new $s(ce,te)}(a._query,a.firestore._databaseId,e,n[0]._document,c);{const p=ms(a.firestore);return function(_,w,N,te,ce,Ae){const rt=_.explicitOrderBy;if(ce.length>rt.length)throw new un(Bt.INVALID_ARGUMENT,`Too many arguments provided to ${te}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const kt=[];for(let on=0;on<ce.length;on++){const gn=ce[on];if(rt[on].field.isKeyField()){if("string"!=typeof gn)throw new un(Bt.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${te}(), but got a ${typeof gn}`);if(!cf(_)&&-1!==gn.indexOf("/"))throw new un(Bt.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${te}() must be a plain document ID, but '${gn}' contains a slash.`);const Yn=_.path.child(Ur.fromString(gn));if(!Mn.isDocumentKey(Yn))throw new un(Bt.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${te}() must result in a valid document path, but '${Yn}' is not because it contains an odd number of segments.`);const br=new Mn(Yn);kt.push(X(w,br))}else{const Yn=Wd(N,te,gn);kt.push(Yn)}}return new $s(kt,Ae)}(a._query,a.firestore._databaseId,p,e,n,c)}}function Ul(a,e,n){if("string"==typeof(n=(0,St.m9)(n))){if(""===n)throw new un(Bt.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!cf(e)&&-1!==n.indexOf("/"))throw new un(Bt.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const c=e.path.child(Ur.fromString(n));if(!Mn.isDocumentKey(c))throw new un(Bt.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${c}' is not because it has an odd number of segments (${c.length}).`);return X(a,new Mn(c))}if(n instanceof Ys)return X(a,n._key);throw new un(Bt.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Xf(n)}.`)}function Rv(a,e){if(!Array.isArray(a)||0===a.length)throw new un(Bt.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function Wh(a,e){if(e.isInequality()){const c=Eu(a),p=e.field;if(null!==c&&!c.isEqual(p))throw new un(Bt.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${c.toString()}' and '${p.toString()}'`);const _=Ta(a);null!==_&&Y_(0,p,_)}const n=function(c,p){for(const _ of c)for(const w of _.getFlattenedFilters())if(p.indexOf(w.op)>=0)return w.op;return null}(a.filters,function(c){switch(c){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==n)throw new un(Bt.INVALID_ARGUMENT,n===e.op?`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`:`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}function Y_(a,e,n){if(!n.isEqual(e))throw new un(Bt.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${n.toString()}' instead.`)}class Qy{convertValue(e,n="none"){switch(dn(e)){case 0:return null;case 1:return e.booleanValue;case 2:return ve(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(_t(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 10:return this.convertObject(e.mapValue,n);default:throw Fn()}}convertObject(e,n){const c={};return co(e.fields,(p,_)=>{c[p]=this.convertValue(_,n)}),c}convertGeoPoint(e){return new wr(ve(e.latitude),ve(e.longitude))}convertArray(e,n){return(e.values||[]).map(c=>this.convertValue(c,n))}convertServerTimestamp(e,n){switch(n){case"previous":const c=zn(e);return null==c?null:this.convertValue(c,n);case"estimate":return this.convertTimestamp(jn(e));default:return null}}convertTimestamp(e){const n=pe(e);return new zi(n.seconds,n.nanos)}convertDocumentKey(e,n){const c=Ur.fromString(e);Vn(gh(c));const p=new Tu(c.get(1),c.get(3)),_=new Mn(c.popFirst(5));return p.isEqual(n)||si(`Document ${_} contains a document reference within a different database (${p.projectId}/${p.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),_}}function tg(a,e,n){let c;return c=a?n&&(n.merge||n.mergeFields)?a.toFirestore(e,n):a.toFirestore(e):e,c}class ep extends Qy{constructor(e){super(),this.firestore=e}convertBytes(e){return new nn(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Ys(this.firestore,null,n)}}class Gu{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class cs extends Gh{constructor(e,n,c,p,_,w){super(e,n,c,p,w),this._firestore=e,this._firestoreImpl=e,this.metadata=_}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Qd(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const c=this._document.data.field(ym("DocumentSnapshot.get",e));if(null!==c)return this._userDataWriter.convertValue(c,n.serverTimestamps)}}}class Qd extends cs{data(e={}){return super.data(e)}}class nl{constructor(e,n,c,p){this._firestore=e,this._userDataWriter=n,this._snapshot=p,this.metadata=new Gu(p.hasPendingWrites,p.fromCache),this.query=c}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,n){this._snapshot.docs.forEach(c=>{e.call(n,new Qd(this._firestore,this._userDataWriter,c.key,c,new Gu(this._snapshot.mutatedKeys.has(c.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new un(Bt.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(c,p){if(c._snapshot.oldDocs.isEmpty()){let _=0;return c._snapshot.docChanges.map(w=>({type:"added",doc:new Qd(c._firestore,c._userDataWriter,w.doc.key,w.doc,new Gu(c._snapshot.mutatedKeys.has(w.doc.key),c._snapshot.fromCache),c.query.converter),oldIndex:-1,newIndex:_++}))}{let _=c._snapshot.oldDocs;return c._snapshot.docChanges.filter(w=>p||3!==w.type).map(w=>{const N=new Qd(c._firestore,c._userDataWriter,w.doc.key,w.doc,new Gu(c._snapshot.mutatedKeys.has(w.doc.key),c._snapshot.fromCache),c.query.converter);let te=-1,ce=-1;return 0!==w.type&&(te=_.indexOf(w.doc.key),_=_.delete(w.doc.key)),1!==w.type&&(_=_.add(w.doc),ce=_.indexOf(w.doc.key)),{type:Io(w.type),doc:N,oldIndex:te,newIndex:ce}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function Io(a){switch(a){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Fn()}}function X_(a,e){return a instanceof cs&&e instanceof cs?a._firestore===e._firestore&&a._key.isEqual(e._key)&&(null===a._document?null===e._document:a._document.isEqual(e._document))&&a._converter===e._converter:a instanceof nl&&e instanceof nl&&a._firestore===e._firestore&&g(a.query,e.query)&&a.metadata.isEqual(e.metadata)&&a._snapshot.isEqual(e._snapshot)}class Ps extends Qy{constructor(e){super(),this.firestore=e}convertBytes(e){return new nn(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Ys(this.firestore,null,n)}}function Sm(a,e,n){a=bi(a,Ys);const c=bi(a.firestore,s),p=tg(a.converter,e,n);return ud(c,[Ua(ms(c),"setDoc",a._key,p,null!==a.converter,n).toMutation(a._key,As.none())])}function Fv(a,e,n,...c){a=bi(a,Ys);const p=bi(a.firestore,s),_=ms(p);let w;return w="string"==typeof(e=(0,St.m9)(e))||e instanceof tn?od(_,"updateDoc",a._key,e,n,c):El(_,"updateDoc",a._key,e),ud(p,[w.toMutation(a._key,As.exists(!0))])}function ng(a,...e){var n,c,p;a=(0,St.m9)(a);let _={includeMetadataChanges:!1},w=0;"object"!=typeof e[w]||u(e[w])||(_=e[w],w++);const N={includeMetadataChanges:_.includeMetadataChanges};if(u(e[w])){const rt=e[w];e[w]=null===(n=rt.next)||void 0===n?void 0:n.bind(rt),e[w+1]=null===(c=rt.error)||void 0===c?void 0:c.bind(rt),e[w+2]=null===(p=rt.complete)||void 0===p?void 0:p.bind(rt)}let te,ce,Ae;if(a instanceof Ys)ce=bi(a.firestore,s),Ae=dc(a._key.path),te={next:rt=>{e[w]&&e[w](qh(ce,a,rt))},error:e[w+1],complete:e[w+2]};else{const rt=bi(a,pu);ce=bi(rt.firestore,s),Ae=rt._query;const kt=new Ps(ce);te={next:on=>{e[w]&&e[w](new nl(ce,kt,rt,on))},error:e[w+1],complete:e[w+2]},_m(a._query)}return function(rt,kt,on,gn){const Yn=new Uh(gn),br=new wc(kt,Yn,on);return rt.asyncQueue.enqueueAndForget((0,Fe.Z)(function*(){return Bf(yield Vh(rt),br)})),()=>{Yn.Pc(),rt.asyncQueue.enqueueAndForget((0,Fe.Z)(function*(){return cv(yield Vh(rt),br)}))}}(S(ce),Ae,N,te)}function ud(a,e){return function(n,c){const p=new Oi;return n.asyncQueue.enqueueAndForget((0,Fe.Z)(function*(){return function $_(a,e,n){return yv.apply(this,arguments)}(yield hm(n),c,p)})),p.promise}(S(a),e)}function qh(a,e,n){const c=n.docs.get(e._key),p=new Ps(a);return new cs(a,p,e._key,c,new Gu(n.hasPendingWrites,n.fromCache),e.converter)}const n_={maxAttempts:5};class rg{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=ms(e)}set(e,n,c){this._verifyNotCommitted();const p=Du(e,this._firestore),_=tg(p.converter,n,c),w=Ua(this._dataReader,"WriteBatch.set",p._key,_,null!==p.converter,c);return this._mutations.push(w.toMutation(p._key,As.none())),this}update(e,n,c,...p){this._verifyNotCommitted();const _=Du(e,this._firestore);let w;return w="string"==typeof(n=(0,St.m9)(n))||n instanceof tn?od(this._dataReader,"WriteBatch.update",_._key,n,c,p):El(this._dataReader,"WriteBatch.update",_._key,n),this._mutations.push(w.toMutation(_._key,As.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=Du(e,this._firestore);return this._mutations=this._mutations.concat(new Rl(n._key,As.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new un(Bt.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Du(a,e){if((a=(0,St.m9)(a)).firestore!==e)throw new un(Bt.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return a}class Jd extends class{constructor(e,n){this._firestore=e,this._transaction=n,this._dataReader=ms(e)}get(e){const n=Du(e,this._firestore),c=new ep(this._firestore);return this._transaction.lookup([n._key]).then(p=>{if(!p||1!==p.length)return Fn();const _=p[0];if(_.isFoundDocument())return new Gh(this._firestore,c,_.key,_,n.converter);if(_.isNoDocument())return new Gh(this._firestore,c,n._key,null,n.converter);throw Fn()})}set(e,n,c){const p=Du(e,this._firestore),_=tg(p.converter,n,c),w=Ua(this._dataReader,"Transaction.set",p._key,_,null!==p.converter,c);return this._transaction.set(p._key,w),this}update(e,n,c,...p){const _=Du(e,this._firestore);let w;return w="string"==typeof(n=(0,St.m9)(n))||n instanceof tn?od(this._dataReader,"Transaction.update",_._key,n,c,p):El(this._dataReader,"Transaction.update",_._key,n),this._transaction.update(_._key,w),this}delete(e){const n=Du(e,this._firestore);return this._transaction.delete(n._key),this}}{constructor(e,n){super(e,n),this._firestore=e}get(e){const n=Du(e,this._firestore),c=new Ps(this._firestore);return super.get(e).then(p=>new cs(this._firestore,c,n._key,p._document,new Gu(!1,!1),n.converter))}}!function(a,e=!0){Rn=Me.SDK_VERSION,(0,Me._registerComponent)(new Et.wA("firestore",(n,{instanceIdentifier:c,options:p})=>{const _=n.getProvider("app").getImmediate(),w=new s(new Oa(n.getProvider("auth-internal")),new uc(n.getProvider("app-check-internal")),function(N,te){if(!Object.prototype.hasOwnProperty.apply(N.options,["projectId"]))throw new un(Bt.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Tu(N.options.projectId,te)}(_,c),_);return p=Object.assign({useFetchStreams:e},p),w._setSettings(p),w},"PUBLIC").setMultipleInstances(!0)),(0,Me.registerVersion)(Ft,"3.8.4",a),(0,Me.registerVersion)(Ft,"3.8.4","esm2017")}();function ig(a,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new un("invalid-argument",`Invalid options passed to function ${a}(): You cannot specify both "merge" and "mergeFields".`);return e}function sg(){if(typeof Uint8Array>"u")throw new un("unimplemented","Uint8Arrays are not available in this environment.")}function a_(){if(!function C(){return typeof atob<"u"}())throw new un("unimplemented","Blobs are unavailable in Firestore in this environment.")}class rp{constructor(e){this._delegate=e}static fromBase64String(e){return a_(),new rp(nn.fromBase64String(e))}static fromUint8Array(e){return sg(),new rp(nn.fromUint8Array(e))}toBase64(){return a_(),this._delegate.toBase64()}toUint8Array(){return sg(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function ip(a){return function u_(a,e){if("object"!=typeof a||null===a)return!1;const n=a;for(const c of e)if(c in n&&"function"==typeof n[c])return!0;return!1}(a,["next","error","complete"])}class e0{enableIndexedDbPersistence(e,n){return function F(a,e){Yt(a=bi(a,s));const n=S(a),c=a._freezeSettings(),p=new Cv;return Y(n,p,new im(p,c.cacheSizeBytes,e?.forceOwnership))}(e._delegate,{forceOwnership:n})}enableMultiTabIndexedDbPersistence(e){return function ee(a){Yt(a=bi(a,s));const e=S(a),n=a._freezeSettings(),c=new Cv;return Y(e,c,new sm(c,n.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function me(a){if(a._initialized&&!a._terminated)throw new un(Bt.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Oi;return a._queue.enqueueAndForgetEvenWhileRestricted((0,Fe.Z)(function*(){try{yield(n=(0,Fe.Z)(function*(c){if(!Za.C())return Promise.resolve();const p=c+"main";yield Za.delete(p)}),function(c){return n.apply(this,arguments)})(Mf(a._databaseId,a._persistenceKey)),e.resolve()}catch(n){e.reject(n)}var n})),e.promise}(e._delegate)}}class Vv{constructor(e,n,c){this._delegate=n,this._persistenceProvider=c,this.INTERNAL={delete:()=>this.terminate()},e instanceof Tu||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const n=this._delegate._getSettings();!e.merge&&n.host!==e.host&&gr("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},n),e)).merge,this._delegate._setSettings(e)}useEmulator(e,n,c={}){!function W_(a,e,n,c={}){var p;const _=(a=bi(a,rc))._getSettings();if("firestore.googleapis.com"!==_.host&&_.host!==e&&gr("Host has been set in both settings() and useEmulator(), emulator host will be used"),a._setSettings(Object.assign(Object.assign({},_),{host:`${e}:${n}`,ssl:!1})),c.mockUserToken){let w,N;if("string"==typeof c.mockUserToken)w=c.mockUserToken,N=qt.MOCK_USER;else{w=(0,St.Sg)(c.mockUserToken,null===(p=a._app)||void 0===p?void 0:p.options.projectId);const te=c.mockUserToken.sub||c.mockUserToken.user_id;if(!te)throw new un(Bt.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");N=new qt(te)}a._authCredentials=new ol(new Ma(w,N))}}(this._delegate,e,n,c)}enableNetwork(){return function Be(a){return function By(a){return a.asyncQueue.enqueue((0,Fe.Z)(function*(){const e=yield xc(a),n=yield dm(a);return e.setNetworkEnabled(!0),function(c){const p=Cn(c);return p.mu.delete(0),Lf(p)}(n)}))}(S(a=bi(a,s)))}(this._delegate)}disableNetwork(){return function Ue(a){return function Hh(a){return a.asyncQueue.enqueue((0,Fe.Z)(function*(){const e=yield xc(a),n=yield dm(a);return e.setNetworkEnabled(!1),(c=(0,Fe.Z)(function*(p){const _=Cn(p);_.mu.add(0),yield Oh(_),_.pu.set("Offline")}),function(p){return c.apply(this,arguments)})(n);var c}))}(S(a=bi(a,s)))}(this._delegate)}enablePersistence(e){let n=!1,c=!1;return e&&(n=!!e.synchronizeTabs,c=!!e.experimentalForceOwningTab,sd("synchronizeTabs",n,"experimentalForceOwningTab",c)),n?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,c)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function Le(a){return function(e){const n=new Oi;return e.asyncQueue.enqueueAndForget((0,Fe.Z)(function*(){return function Ly(a,e){return bv.apply(this,arguments)}(yield hm(e),n)})),n.promise}(S(a=bi(a,s)))}(this._delegate)}onSnapshotsInSync(e){return function J_(a,e){return function Hy(a,e){const n=new Uh(e);return a.asyncQueue.enqueueAndForget((0,Fe.Z)(function*(){return c=yield Vh(a),p=n,Cn(c).vu.add(p),void p.next();var c,p})),()=>{n.Pc(),a.asyncQueue.enqueueAndForget((0,Fe.Z)(function*(){return c=yield Vh(a),p=n,void Cn(c).vu.delete(p);var c,p}))}}(S(a=bi(a,s)),u(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new un("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new Zh(this,$d(this._delegate,e))}catch(n){throw $u(n,"collection()","Firestore.collection()")}}doc(e){try{return new sc(this,aa(this._delegate,e))}catch(n){throw $u(n,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new gu(this,function zy(a,e){if(a=bi(a,rc),Zf("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new un(Bt.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new pu(a,null,(n=e,new wo(Ur.emptyPath(),n)));var n}(this._delegate,e))}catch(n){throw $u(n,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function np(a,e,n){a=bi(a,s);const c=Object.assign(Object.assign({},n_),n);return function(p){if(p.maxAttempts<1)throw new un(Bt.INVALID_ARGUMENT,"Max attempts must be at least 1")}(c),function(p,_,w){const N=new Oi;return p.asyncQueue.enqueueAndForget((0,Fe.Z)(function*(){const te=yield function Bh(a){return Kp(a).then(e=>e.datastore)}(p);new om(p.asyncQueue,te,w,_,N).run()})),N.promise}(S(a),p=>e(new Jd(a,p)),c)}(this._delegate,n=>e(new l_(this,n)))}batch(){return S(this._delegate),new c_(new rg(this._delegate,e=>ud(this._delegate,e)))}loadBundle(e){return function ln(a,e){const n=S(a=bi(a,s)),c=new l;return function Kf(a,e,n,c){const p=function(_,w){let N;return N="string"==typeof _?(new TextEncoder).encode(_):_,te=function(te,ce){if(te instanceof Uint8Array)return zp(te,void 0);if(te instanceof ArrayBuffer)return zp(new Uint8Array(te),void 0);if(te instanceof ReadableStream)return te.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(N),new Iv(te,w);var te}(n,ec(e));a.asyncQueue.enqueueAndForget((0,Fe.Z)(function*(){!function Uy(a,e,n){const c=Cn(a);var p;(p=(0,Fe.Z)(function*(_,w,N){try{const te=yield w.getMetadata();if(yield function(kt,on){const gn=Cn(kt),Yn=Ro(on.createTime);return gn.persistence.runTransaction("hasNewerBundle","readonly",br=>gn.Os.getBundleMetadata(br,on.id)).then(br=>!!br&&br.createTime.compareTo(Yn)>=0)}(_.localStore,te))return yield w.close(),N._completeWith({taskState:"Success",documentsLoaded:(kt=te).totalDocuments,bytesLoaded:kt.totalBytes,totalDocuments:kt.totalDocuments,totalBytes:kt.totalBytes}),Promise.resolve(new Set);N._updateProgress(My(te));const ce=new V_(te,_.localStore,w.Tt);let Ae=yield w.yc();for(;Ae;){const kt=yield ce.Bu(Ae);kt&&N._updateProgress(kt),Ae=yield w.yc()}const rt=yield ce.complete();return yield wa(_,rt.Uu,void 0),yield function(kt,on){const gn=Cn(kt);return gn.persistence.runTransaction("Save bundle","readwrite",Yn=>gn.Os.saveBundleMetadata(Yn,on))}(_.localStore,te),N._completeWith(rt.progress),Promise.resolve(rt.qu)}catch(te){return gr("SyncEngine",`Loading bundle failed with ${te}`),N._failWith(te),Promise.resolve(new Set)}var kt}),function(_,w,N){return p.apply(this,arguments)})(c,e,n).then(p=>{c.sharedClientState.notifyBundleLoaded(p)})}(yield hm(a),p,c)}))}(n,a._databaseId,e,c),c}(this._delegate,e)}namedQuery(e){return function On(a,e){return function Gy(a,e){return a.asyncQueue.enqueue((0,Fe.Z)(function*(){return function(n,c){const p=Cn(n);return p.persistence.runTransaction("Get named query","readonly",_=>p.Os.getNamedQuery(_,c))}(yield qf(a),e)}))}(S(a=bi(a,s)),e).then(n=>n?new pu(a,null,n.query):null)}(this._delegate,e).then(n=>n?new gu(this,n):null)}}class ld extends Qy{constructor(e){super(),this.firestore=e}convertBytes(e){return new rp(new nn(e))}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return sc.forKey(n,this.firestore,null)}}class l_{constructor(e,n){this._firestore=e,this._delegate=n,this._userDataWriter=new ld(e)}get(e){const n=Yh(e);return this._delegate.get(n).then(c=>new ag(this._firestore,new cs(this._firestore._delegate,this._userDataWriter,c._key,c._document,c.metadata,n.converter)))}set(e,n,c){const p=Yh(e);return c?(ig("Transaction.set",c),this._delegate.set(p,n,c)):this._delegate.set(p,n),this}update(e,n,c,...p){const _=Yh(e);return 2===arguments.length?this._delegate.update(_,n):this._delegate.update(_,n,c,...p),this}delete(e){const n=Yh(e);return this._delegate.delete(n),this}}class c_{constructor(e){this._delegate=e}set(e,n,c){const p=Yh(e);return c?(ig("WriteBatch.set",c),this._delegate.set(p,n,c)):this._delegate.set(p,n),this}update(e,n,c,...p){const _=Yh(e);return 2===arguments.length?this._delegate.update(_,n):this._delegate.update(_,n,c,...p),this}delete(e){const n=Yh(e);return this._delegate.delete(n),this}commit(){return this._delegate.commit()}}class Kh{constructor(e,n,c){this._firestore=e,this._userDataWriter=n,this._delegate=c}fromFirestore(e,n){const c=new Qd(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new cd(this._firestore,c),n??{})}toFirestore(e,n){return n?this._delegate.toFirestore(e,n):this._delegate.toFirestore(e)}static getInstance(e,n){const c=Kh.INSTANCES;let p=c.get(e);p||(p=new WeakMap,c.set(e,p));let _=p.get(n);return _||(_=new Kh(e,new ld(e),n),p.set(n,_)),_}}Kh.INSTANCES=new WeakMap;class sc{constructor(e,n){this.firestore=e,this._delegate=n,this._userDataWriter=new ld(e)}static forPath(e,n,c){if(e.length%2!=0)throw new un("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new sc(n,new Ys(n._delegate,c,new Mn(e)))}static forKey(e,n,c){return new sc(n,new Ys(n._delegate,c,e))}get id(){return this._delegate.id}get parent(){return new Zh(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new Zh(this.firestore,$d(this._delegate,e))}catch(n){throw $u(n,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,St.m9)(e))instanceof Ys&&gm(this._delegate,e)}set(e,n){n=ig("DocumentReference.set",n);try{return n?Sm(this._delegate,e,n):Sm(this._delegate,e)}catch(c){throw $u(c,"setDoc()","DocumentReference.set()")}}update(e,n,...c){try{return 1===arguments.length?Fv(this._delegate,e):Fv(this._delegate,e,n,...c)}catch(p){throw $u(p,"updateDoc()","DocumentReference.update()")}}delete(){return function e_(a){return ud(bi(a.firestore,s),[new Rl(a._key,As.none())])}(this._delegate)}onSnapshot(...e){const n=sp(e),c=og(e,p=>new ag(this.firestore,new cs(this.firestore._delegate,this._userDataWriter,p._key,p._document,p.metadata,this._delegate.converter)));return ng(this._delegate,n,c)}get(e){let n;return n="cache"===e?.source?function Em(a){a=bi(a,Ys);const e=bi(a.firestore,s),n=S(e),c=new Ps(e);return function Av(a,e){const n=new Oi;return a.asyncQueue.enqueueAndForget((0,Fe.Z)(function*(){return(c=(0,Fe.Z)(function*(p,_,w){try{const N=yield function(te,ce){const Ae=Cn(te);return Ae.persistence.runTransaction("read document","readonly",rt=>Ae.localDocuments.getDocument(rt,ce))}(p,_);N.isFoundDocument()?w.resolve(N):N.isNoDocument()?w.resolve(null):w.reject(new un(Bt.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(N){const te=Rd(N,`Failed to get document '${_} from cache`);w.reject(te)}}),function(p,_,w){return c.apply(this,arguments)})(yield qf(a),e,n);var c})),n.promise}(n,a._key).then(p=>new cs(e,c,a._key,p,new Gu(null!==p&&p.hasLocalMutations,!0),a.converter))}(this._delegate):"server"===e?.source?function nu(a){a=bi(a,Ys);const e=bi(a.firestore,s);return ns(S(e),a._key,{source:"server"}).then(n=>qh(e,a,n))}(this._delegate):function Xd(a){a=bi(a,Ys);const e=bi(a.firestore,s);return ns(S(e),a._key).then(n=>qh(e,a,n))}(this._delegate),n.then(c=>new ag(this.firestore,new cs(this.firestore._delegate,this._userDataWriter,c._key,c._document,c.metadata,this._delegate.converter)))}withConverter(e){return new sc(this.firestore,this._delegate.withConverter(e?Kh.getInstance(this.firestore,e):null))}}function $u(a,e,n){return a.message=a.message.replace(e,n),a}function sp(a){for(const e of a)if("object"==typeof e&&!ip(e))return e;return{}}function og(a,e){var n,c;let p;return p=ip(a[0])?a[0]:ip(a[1])?a[1]:"function"==typeof a[0]?{next:a[0],error:a[1],complete:a[2]}:{next:a[1],error:a[2],complete:a[3]},{next:_=>{p.next&&p.next(e(_))},error:null===(n=p.error)||void 0===n?void 0:n.bind(p),complete:null===(c=p.complete)||void 0===c?void 0:c.bind(p)}}class ag{constructor(e,n){this._firestore=e,this._delegate=n}get ref(){return new sc(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,n){return this._delegate.get(e,n)}isEqual(e){return X_(this._delegate,e._delegate)}}class cd extends ag{data(e){const n=this._delegate.data(e);return function Kr(a,e){a||Fn()}(void 0!==n),n}}class gu{constructor(e,n){this.firestore=e,this._delegate=n,this._userDataWriter=new ld(e)}where(e,n,c){try{return new gu(this.firestore,Ac(this._delegate,function Tm(a,e,n){const c=e,p=ym("where",a);return zh._create(p,c,n)}(e,n,c)))}catch(p){throw $u(p,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,n){try{return new gu(this.firestore,Ac(this._delegate,function bs(a,e="asc"){const n=e,c=ym("orderBy",a);return Yp._create(c,n)}(e,n)))}catch(c){throw $u(c,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new gu(this.firestore,Ac(this._delegate,function Wy(a){return pm("limit",a),Qp._create("limit",a,"F")}(e)))}catch(n){throw $u(n,"limit()","Query.limit()")}}limitToLast(e){try{return new gu(this.firestore,Ac(this._delegate,function qy(a){return pm("limitToLast",a),Qp._create("limitToLast",a,"L")}(e)))}catch(n){throw $u(n,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new gu(this.firestore,Ac(this._delegate,function Ky(...a){return Xp._create("startAt",a,!0)}(...e)))}catch(n){throw $u(n,"startAt()","Query.startAt()")}}startAfter(...e){try{return new gu(this.firestore,Ac(this._delegate,function Jp(...a){return Xp._create("startAfter",a,!1)}(...e)))}catch(n){throw $u(n,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new gu(this.firestore,Ac(this._delegate,function Zy(...a){return eg._create("endBefore",a,!1)}(...e)))}catch(n){throw $u(n,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new gu(this.firestore,Ac(this._delegate,function Yy(...a){return eg._create("endAt",a,!0)}(...e)))}catch(n){throw $u(n,"endAt()","Query.endAt()")}}isEqual(e){return g(this._delegate,e._delegate)}get(e){let n;return n="cache"===e?.source?function Jy(a){a=bi(a,pu);const e=bi(a.firestore,s),n=S(e),c=new Ps(e);return function Vy(a,e){const n=new Oi;return a.asyncQueue.enqueueAndForget((0,Fe.Z)(function*(){return(c=(0,Fe.Z)(function*(p,_,w){try{const N=yield Ph(p,_,!0),te=new Oy(_,N.Yi),ce=te.Hu(N.documents),Ae=te.applyChanges(ce,!1);w.resolve(Ae.snapshot)}catch(N){const te=Rd(N,`Failed to execute query '${_} against cache`);w.reject(te)}}),function(p,_,w){return c.apply(this,arguments)})(yield qf(a),e,n);var c})),n.promise}(n,a._query).then(p=>new nl(e,c,a,p))}(this._delegate):"server"===e?.source?function Lv(a){a=bi(a,pu);const e=bi(a.firestore,s),n=S(e),c=new Ps(e);return Pv(n,a._query,{source:"server"}).then(p=>new nl(e,c,a,p))}(this._delegate):function Xy(a){a=bi(a,pu);const e=bi(a.firestore,s),n=S(e),c=new Ps(e);return _m(a._query),Pv(n,a._query).then(p=>new nl(e,c,a,p))}(this._delegate),n.then(c=>new ug(this.firestore,new nl(this.firestore._delegate,this._userDataWriter,this._delegate,c._snapshot)))}onSnapshot(...e){const n=sp(e),c=og(e,p=>new ug(this.firestore,new nl(this.firestore._delegate,this._userDataWriter,this._delegate,p._snapshot)));return ng(this._delegate,n,c)}withConverter(e){return new gu(this.firestore,this._delegate.withConverter(e?Kh.getInstance(this.firestore,e):null))}}class d_{constructor(e,n){this._firestore=e,this._delegate=n}get type(){return this._delegate.type}get doc(){return new cd(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class ug{constructor(e,n){this._firestore=e,this._delegate=n}get query(){return new gu(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new cd(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(n=>new d_(this._firestore,n))}forEach(e,n){this._delegate.forEach(c=>{e.call(n,new cd(this._firestore,c))})}isEqual(e){return X_(this._delegate,e._delegate)}}class Zh extends gu{constructor(e,n){super(e,n),this.firestore=e,this._delegate=n}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new sc(this.firestore,e):null}doc(e){try{return new sc(this.firestore,void 0===e?aa(this._delegate):aa(this._delegate,e))}catch(n){throw $u(n,"doc()","CollectionReference.doc()")}}add(e){return function tp(a,e){const n=bi(a.firestore,s),c=aa(a),p=tg(a.converter,e);return ud(n,[Ua(ms(a.firestore),"addDoc",c._key,p,null!==a.converter,{}).toMutation(c._key,As.exists(!1))]).then(()=>c)}(this._delegate,e).then(n=>new sc(this.firestore,n))}isEqual(e){return gm(this._delegate,e._delegate)}withConverter(e){return new Zh(this.firestore,this._delegate.withConverter(e?Kh.getInstance(this.firestore,e):null))}}function Yh(a){return bi(a,Ys)}class Im{constructor(...e){this._delegate=new tn(...e)}static documentId(){return new Im(_s.keyField().canonicalString())}isEqual(e){return(e=(0,St.m9)(e))instanceof tn&&this._delegate._internalPath.isEqual(e._internalPath)}}class oc{constructor(e){this._delegate=e}static serverTimestamp(){const e=function r_(){return new xu("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new oc(e)}static delete(){const e=function jv(){return new ls("deleteField")}();return e._methodName="FieldValue.delete",new oc(e)}static arrayUnion(...e){const n=function Cm(...a){return new jl("arrayUnion",a)}(...e);return n._methodName="FieldValue.arrayUnion",new oc(n)}static arrayRemove(...e){const n=function Pc(...a){return new Dc("arrayRemove",a)}(...e);return n._methodName="FieldValue.arrayRemove",new oc(n)}static increment(e){const n=function i_(a){return new zd("increment",a)}(e);return n._methodName="FieldValue.increment",new oc(n)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const eh={Firestore:Vv,GeoPoint:wr,Timestamp:zi,Blob:rp,Transaction:l_,WriteBatch:c_,DocumentReference:sc,DocumentSnapshot:ag,Query:gu,QueryDocumentSnapshot:cd,QuerySnapshot:ug,CollectionReference:Zh,FieldPath:Im,FieldValue:oc,setLogLevel:function t0(a){!function Bi(a){Nr.setLogLevel(a)}(a)},CACHE_SIZE_UNLIMITED:-1};!function th(a){(function xm(a,e){a.INTERNAL.registerComponent(new Et.wA("firestore-compat",n=>{const c=n.getProvider("app-compat").getImmediate(),p=n.getProvider("firestore").getImmediate();return e(c,p)},"PUBLIC").setServiceProps(Object.assign({},eh)))})(a,(e,n)=>new Vv(e,n,new e0)),a.registerVersion("@firebase/firestore-compat","0.3.4")}(dt.Z);var dd=K(1205),h_=K(6217);function Dm(a,e){return function Hv(a,e=M.z){return new re.y(n=>{let c;return null!=e?e.schedule(()=>{c=a.onSnapshot({includeMetadataChanges:!0},n)}):c=a.onSnapshot({includeMetadataChanges:!0},n),()=>{c?.()}})}(a,e)}function Am(a,e){return Dm(a,e).pipe((0,Pe.U)(n=>({payload:n,type:"query"})))}function Qh(a,e){return Am(a,e).pipe((0,Ge.O)(void 0),Ie(),(0,Pe.U)(([n,c])=>{const p=c.payload.docChanges(),_=p.map(w=>({type:w.type,payload:w}));return n&&JSON.stringify(n.payload.metadata)!==JSON.stringify(c.payload.metadata)&&c.payload.docs.forEach((w,N)=>{const te=p.find(Ae=>Ae.doc.ref.isEqual(w.ref)),ce=n?.payload.docs.find(Ae=>Ae.ref.isEqual(w.ref));te&&JSON.stringify(te.doc.metadata)===JSON.stringify(w.metadata)||!te&&ce&&JSON.stringify(ce.metadata)===JSON.stringify(w.metadata)||_.push({type:"modified",payload:{oldIndex:N,newIndex:N,type:"modified",doc:w}})}),_}))}function f_(a,e,n){return Qh(a,n).pipe((0,Re.R)((c,p)=>function Xh(a,e,n){return e.forEach(c=>{n.indexOf(c.type)>-1&&(a=function s0(a,e){switch(e.type){case"added":if(!a[e.newIndex]||!a[e.newIndex].doc.ref.isEqual(e.doc.ref))return Gv(a,e.newIndex,0,e);break;case"modified":if(null==a[e.oldIndex]||a[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const n=a.slice();return n.splice(e.oldIndex,1),n.splice(e.newIndex,0,e),n}return Gv(a,e.newIndex,1,e)}break;case"removed":if(a[e.oldIndex]&&a[e.oldIndex].doc.ref.isEqual(e.doc.ref))return Gv(a,e.oldIndex,1)}return a}(a,c))}),a}(c,p.map(_=>_.payload),e),[]),function ae(a,e=yt.y){return a=a??Pt,(0,He.e)((n,c)=>{let p,_=!0;n.subscribe((0,Ke.x)(c,w=>{const N=e(w);(_||!a(p,N))&&(_=!1,p=N,c.next(w))}))})}(),(0,Pe.U)(c=>c.map(p=>({type:p.type,payload:p}))))}function Gv(a,e,n,...c){const p=a.slice();return p.splice(e,n,...c),p}function go(a){return(!a||0===a.length)&&(a=["added","removed","modified"]),a}K(9260);class p_{constructor(e,n,c){this.ref=e,this.query=n,this.afs=c}stateChanges(e){let n=Qh(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(n=n.pipe((0,Pe.U)(c=>c.filter(p=>e.indexOf(p.type)>-1)))),n.pipe((0,Ge.O)(void 0),Ie(),(0,et.h)(([c,p])=>p.length>0||!c),(0,Pe.U)(([c,p])=>p),ke.iC)}auditTrail(e){return this.stateChanges(e).pipe((0,Re.R)((n,c)=>[...n,...c],[]))}snapshotChanges(e){const n=go(e);return f_(this.query,n,this.afs.schedulers.outsideAngular).pipe(ke.iC)}valueChanges(e={}){return Am(this.query,this.afs.schedulers.outsideAngular).pipe((0,Pe.U)(n=>n.payload.docs.map(c=>e.idField?Object.assign(Object.assign({},c.data()),{[e.idField]:c.id}):c.data())),ke.iC)}get(e){return(0,Oe.D)(this.query.get(e)).pipe(ke.iC)}add(e){return this.ref.add(e)}doc(e){return new g_(this.ref.doc(e),this.afs)}}class g_{constructor(e,n){this.ref=e,this.afs=n}set(e,n){return this.ref.set(e,n)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,n){const c=this.ref.collection(e),{ref:p,query:_}=zv(c,n);return new p_(p,_,this.afs)}snapshotChanges(){return function r0(a,e){return Dm(a,e).pipe((0,Ge.O)(void 0),Ie(),(0,Pe.U)(([n,c])=>c.exists?n?.exists?{payload:c,type:"modified"}:{payload:c,type:"added"}:{payload:c,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(ke.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,Pe.U)(({payload:n})=>e.idField?Object.assign(Object.assign({},n.data()),{[e.idField]:n.id}):n.data()))}get(e){return(0,Oe.D)(this.ref.get(e)).pipe(ke.iC)}}class m_{constructor(e,n){this.query=e,this.afs=n}stateChanges(e){return e&&0!==e.length?Qh(this.query,this.afs.schedulers.outsideAngular).pipe((0,Pe.U)(n=>n.filter(c=>e.indexOf(c.type)>-1)),(0,et.h)(n=>n.length>0),ke.iC):Qh(this.query,this.afs.schedulers.outsideAngular).pipe(ke.iC)}auditTrail(e){return this.stateChanges(e).pipe((0,Re.R)((n,c)=>[...n,...c],[]))}snapshotChanges(e){const n=go(e);return f_(this.query,n,this.afs.schedulers.outsideAngular).pipe(ke.iC)}valueChanges(e={}){return Am(this.query,this.afs.schedulers.outsideAngular).pipe((0,Pe.U)(c=>c.payload.docs.map(p=>e.idField?Object.assign({[e.idField]:p.id},p.data()):p.data())),ke.iC)}get(e){return(0,Oe.D)(this.query.get(e)).pipe(ke.iC)}}const $v=new E.OlP("angularfire2.enableFirestorePersistence"),o0=new E.OlP("angularfire2.firestore.persistenceSettings"),v_=new E.OlP("angularfire2.firestore.settings"),y_=new E.OlP("angularfire2.firestore.use-emulator");function zv(a,e=(n=>n)){return{query:e(a),ref:a}}let a0=(()=>{class a{constructor(n,c,p,_,w,N,te,ce,Ae,rt,kt,on,gn,Yn,br,Ws,mo){this.schedulers=te;const qi=(0,at.on)(n,N,c),xo=Ae;rt&&(0,dd.nw)(qi,N,kt,gn,Yn,br,on,Ws),[this.firestore,this.persistenceEnabled$]=(0,at.cc)(`${qi.name}.firestore`,"AngularFirestore",qi.name,()=>{const rs=N.runOutsideAngular(()=>qi.firestore());if(_&&rs.settings(_),xo&&rs.useEmulator(...xo),p&&!(0,nt.PM)(w)){const ds=()=>{try{return(0,Oe.D)(rs.enablePersistence(ce||void 0).then(()=>!0,()=>!1))}catch(qo){return typeof console<"u"&&console.warn(qo),(0,De.of)(!1)}};return[rs,N.runOutsideAngular(ds)]}return[rs,(0,De.of)(!1)]},[_,xo,p])}collection(n,c){let p;p="string"==typeof n?this.firestore.collection(n):n;const{ref:_,query:w}=zv(p,c),N=this.schedulers.ngZone.run(()=>_);return new p_(N,w,this)}collectionGroup(n,c){const p=c||(w=>w),_=this.firestore.collectionGroup(n);return new m_(p(_),this)}doc(n){let c;c="string"==typeof n?this.firestore.doc(n):n;const p=this.schedulers.ngZone.run(()=>c);return new g_(p,this)}createId(){return this.firestore.collection("_").doc().id}}return a.\u0275fac=function(n){return new(n||a)(E.LFG(at.Dh),E.LFG(at.xv,8),E.LFG($v,8),E.LFG(v_,8),E.LFG(E.Lbi),E.LFG(E.R0b),E.LFG(ke.HU),E.LFG(o0,8),E.LFG(y_,8),E.LFG(dd.zQ,8),E.LFG(dd.Qv,8),E.LFG(dd.L6,8),E.LFG(dd._Q,8),E.LFG(dd.rT,8),E.LFG(dd.lh,8),E.LFG(dd.f7,8),E.LFG(h_.nm,8))},a.\u0275prov=E.Yz7({token:a,factory:a.\u0275fac,providedIn:"any"}),a})()},377:(Qt,it,K)=>{"use strict";K.d(it,{Q1:()=>ra,TE:()=>q});var E=K(9751),M=K(9646),re=K(8996),Oe=K(4986),De=K(4482),ke=K(5403),He=K(4004),Ke=K(3900),Ie=K(2122),Pe=K(4650),Re=K(2011),yt=K(3942),ae=K(5861),Pt=K(9681),et=K(2090),at=K(4859);const nt="firebasestorage.googleapis.com",We="storageBucket";class Et extends et.ZR{constructor(H,be,Ve=0){super(St(H),`Firebase Storage: ${be} (${St(H)})`),this.status_=Ve,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Et.prototype)}get status(){return this.status_}set status(H){this.status_=H}_codeEquals(H){return St(H)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(H){this.customData.serverResponse=H,this.message=this.customData.serverResponse?`${this._baseMessage}\n${this.customData.serverResponse}`:this._baseMessage}}var Mt=(()=>{return(O=Mt||(Mt={})).UNKNOWN="unknown",O.OBJECT_NOT_FOUND="object-not-found",O.BUCKET_NOT_FOUND="bucket-not-found",O.PROJECT_NOT_FOUND="project-not-found",O.QUOTA_EXCEEDED="quota-exceeded",O.UNAUTHENTICATED="unauthenticated",O.UNAUTHORIZED="unauthorized",O.UNAUTHORIZED_APP="unauthorized-app",O.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",O.INVALID_CHECKSUM="invalid-checksum",O.CANCELED="canceled",O.INVALID_EVENT_NAME="invalid-event-name",O.INVALID_URL="invalid-url",O.INVALID_DEFAULT_BUCKET="invalid-default-bucket",O.NO_DEFAULT_BUCKET="no-default-bucket",O.CANNOT_SLICE_BLOB="cannot-slice-blob",O.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",O.NO_DOWNLOAD_URL="no-download-url",O.INVALID_ARGUMENT="invalid-argument",O.INVALID_ARGUMENT_COUNT="invalid-argument-count",O.APP_DELETED="app-deleted",O.INVALID_ROOT_OPERATION="invalid-root-operation",O.INVALID_FORMAT="invalid-format",O.INTERNAL_ERROR="internal-error",O.UNSUPPORTED_ENVIRONMENT="unsupported-environment",Mt;var O})();function St(O){return"storage/"+O}function J(){return new Et(Mt.UNKNOWN,"An unknown error occurred, please check the error payload for server response.")}function Xe(){return new Et(Mt.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function ut(){return new Et(Mt.CANCELED,"User canceled the upload/download.")}function gt(){return new Et(Mt.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function Ot(O){return new Et(Mt.INVALID_ARGUMENT,O)}function rn(){return new Et(Mt.APP_DELETED,"The Firebase app was deleted.")}function zt(O){return new Et(Mt.INVALID_ROOT_OPERATION,"The operation '"+O+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function bn(O,H){return new Et(Mt.INVALID_FORMAT,"String does not match format '"+O+"': "+H)}function dr(O){throw new Et(Mt.INTERNAL_ERROR,"Internal error: "+O)}class Hn{constructor(H,be){this.bucket=H,this.path_=be}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const H=encodeURIComponent;return"/b/"+H(this.bucket)+"/o/"+H(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(H,be){let Ve;try{Ve=Hn.makeFromUrl(H,be)}catch{return new Hn(H,"")}if(""===Ve.path)return Ve;throw function ot(O){return new Et(Mt.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+O+"'.")}(H)}static makeFromUrl(H,be){let Ve=null;const xe="([A-Za-z0-9.\\-_]+)",wn=new RegExp("^gs://"+xe+"(/(.*))?$","i");function yr(Gi){Gi.path_=decodeURIComponent(Gi.path)}const Ti=be.replace(/[.]/g,"\\."),as=[{regex:wn,indices:{bucket:1,path:3},postModify:function wt(Gi){"/"===Gi.path.charAt(Gi.path.length-1)&&(Gi.path_=Gi.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${Ti}/v[A-Za-z0-9_]+/b/${xe}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:yr},{regex:new RegExp(`^https?://${be===nt?"(?:storage.googleapis.com|storage.cloud.google.com)":be}/${xe}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:yr}];for(let Gi=0;Gi<as.length;Gi++){const Ns=as[Gi],Ho=Ns.regex.exec(H);if(Ho){let pa=Ho[Ns.indices.path];pa||(pa=""),Ve=new Hn(Ho[Ns.indices.bucket],pa),Ns.postModify(Ve);break}}if(null==Ve)throw function Je(O){return new Et(Mt.INVALID_URL,"Invalid URL '"+O+"'.")}(H);return Ve}}class Zn{constructor(H){this.promise_=Promise.reject(H)}getPromise(){return this.promise_}cancel(H=!1){}}function fr(O){return"string"==typeof O||O instanceof String}function Bn(O){return Ar()&&O instanceof Blob}function Ar(){return typeof Blob<"u"&&!(0,et.UG)()}function Tn(O,H,be,Ve){if(Ve<H)throw Ot(`Invalid value for '${O}'. Expected ${H} or greater.`);if(Ve>be)throw Ot(`Invalid value for '${O}'. Expected ${be} or less.`)}function ci(O,H,be){let Ve=H;return null==be&&(Ve=`https://${H}`),`${be}://${Ve}/v0${O}`}function Hr(O){const H=encodeURIComponent;let be="?";for(const Ve in O)O.hasOwnProperty(Ve)&&(be=be+(H(Ve)+"=")+H(O[Ve])+"&");return be=be.slice(0,-1),be}var pr=(()=>{return(O=pr||(pr={}))[O.NO_ERROR=0]="NO_ERROR",O[O.NETWORK_ERROR=1]="NETWORK_ERROR",O[O.ABORT=2]="ABORT",pr;var O})();function gi(O,H){const be=O>=500&&O<600,xe=-1!==[408,429].indexOf(O),wt=-1!==H.indexOf(O);return be||xe||wt}class Ri{constructor(H,be,Ve,xe,wt,Jt,wn,xn,yr,zr,Ti,Ai=!0){this.url_=H,this.method_=be,this.headers_=Ve,this.body_=xe,this.successCodes_=wt,this.additionalRetryCodes_=Jt,this.callback_=wn,this.errorCallback_=xn,this.timeout_=yr,this.progressCallback_=zr,this.connectionFactory_=Ti,this.retry=Ai,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((Ui,ps)=>{this.resolve_=Ui,this.reject_=ps,this.start_()})}start_(){const be=(Ve,xe)=>{const wt=this.resolve_,Jt=this.reject_,wn=xe.connection;if(xe.wasSuccessCode)try{const xn=this.callback_(wn,wn.getResponse());!function qn(O){return void 0!==O}(xn)?wt():wt(xn)}catch(xn){Jt(xn)}else if(null!==wn){const xn=J();xn.serverResponse=wn.getErrorText(),Jt(this.errorCallback_?this.errorCallback_(wn,xn):xn)}else Jt(xe.canceled?this.appDelete_?rn():ut():Xe())};this.canceled_?be(0,new er(!1,null,!0)):this.backoffId_=function Vr(O,H,be){let Ve=1,xe=null,wt=null,Jt=!1,wn=0;function xn(){return 2===wn}let yr=!1;function zr(...ts){yr||(yr=!0,H.apply(null,ts))}function Ti(ts){xe=setTimeout(()=>{xe=null,O(Ui,xn())},ts)}function Ai(){wt&&clearTimeout(wt)}function Ui(ts,...Wr){if(yr)return void Ai();if(ts)return Ai(),void zr.call(null,ts,...Wr);if(xn()||Jt)return Ai(),void zr.call(null,ts,...Wr);let as;Ve<64&&(Ve*=2),1===wn?(wn=2,as=0):as=1e3*(Ve+Math.random()),Ti(as)}let ps=!1;function Hs(ts){ps||(ps=!0,Ai(),!yr&&(null!==xe?(ts||(wn=2),clearTimeout(xe),Ti(0)):ts||(wn=1)))}return Ti(0),wt=setTimeout(()=>{Jt=!0,Hs(!0)},be),Hs}((Ve,xe)=>{if(xe)return void Ve(!1,new er(!1,null,!0));const wt=this.connectionFactory_();this.pendingConnection_=wt;const Jt=wn=>{null!==this.progressCallback_&&this.progressCallback_(wn.loaded,wn.lengthComputable?wn.total:-1)};null!==this.progressCallback_&&wt.addUploadProgressListener(Jt),wt.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&wt.removeUploadProgressListener(Jt),this.pendingConnection_=null;const wn=wt.getErrorCode()===pr.NO_ERROR,xn=wt.getStatus();if(!wn||gi(xn,this.additionalRetryCodes_)&&this.retry){const zr=wt.getErrorCode()===pr.ABORT;return void Ve(!1,new er(!1,null,zr))}const yr=-1!==this.successCodes_.indexOf(xn);Ve(!0,new er(yr,wt))})},be,this.timeout_)}getPromise(){return this.promise_}cancel(H){this.canceled_=!0,this.appDelete_=H||!1,null!==this.backoffId_&&function mr(O){O(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}}class er{constructor(H,be,Ve){this.wasSuccessCode=H,this.connection=be,this.canceled=!!Ve}}function Vi(...O){const H=function ti(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}();if(void 0!==H){const be=new H;for(let Ve=0;Ve<O.length;Ve++)be.append(O[Ve]);return be.getBlob()}if(Ar())return new Blob(O);throw new Et(Mt.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}const Rr={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class Ir{constructor(H,be){this.data=H,this.contentType=be||null}}function di(O,H){switch(O){case Rr.RAW:return new Ir(kn(H));case Rr.BASE64:case Rr.BASE64URL:return new Ir(Xt(O,H));case Rr.DATA_URL:return new Ir(function tr(O){const H=new yn(O);return H.base64?Xt(Rr.BASE64,H.rest):function mn(O){let H;try{H=decodeURIComponent(O)}catch{throw bn(Rr.DATA_URL,"Malformed data URL.")}return kn(H)}(H.rest)}(H),function nr(O){return new yn(O).contentType}(H))}throw J()}function kn(O){const H=[];for(let be=0;be<O.length;be++){let Ve=O.charCodeAt(be);Ve<=127?H.push(Ve):Ve<=2047?H.push(192|Ve>>6,128|63&Ve):55296==(64512&Ve)?be<O.length-1&&56320==(64512&O.charCodeAt(be+1))?(Ve=65536|(1023&Ve)<<10|1023&O.charCodeAt(++be),H.push(240|Ve>>18,128|Ve>>12&63,128|Ve>>6&63,128|63&Ve)):H.push(239,191,189):56320==(64512&Ve)?H.push(239,191,189):H.push(224|Ve>>12,128|Ve>>6&63,128|63&Ve)}return new Uint8Array(H)}function Xt(O,H){switch(O){case Rr.BASE64:{const xe=-1!==H.indexOf("-"),wt=-1!==H.indexOf("_");if(xe||wt)throw bn(O,"Invalid character '"+(xe?"-":"_")+"' found: is it base64url encoded?");break}case Rr.BASE64URL:{const xe=-1!==H.indexOf("+"),wt=-1!==H.indexOf("/");if(xe||wt)throw bn(O,"Invalid character '"+(xe?"+":"/")+"' found: is it base64 encoded?");H=H.replace(/-/g,"+").replace(/_/g,"/");break}}let be;try{be=function Fr(O){if(typeof atob>"u")throw function _n(O){return new Et(Mt.UNSUPPORTED_ENVIRONMENT,`${O} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}("base-64");return atob(O)}(H)}catch(xe){throw xe.message.includes("polyfill")?xe:bn(O,"Invalid character found")}const Ve=new Uint8Array(be.length);for(let xe=0;xe<be.length;xe++)Ve[xe]=be.charCodeAt(xe);return Ve}class yn{constructor(H){this.base64=!1,this.contentType=null;const be=H.match(/^data:([^,]+)?,/);if(null===be)throw bn(Rr.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const Ve=be[1]||null;null!=Ve&&(this.base64=function vr(O,H){return O.length>=H.length&&O.substring(O.length-H.length)===H}(Ve,";base64"),this.contentType=this.base64?Ve.substring(0,Ve.length-7):Ve),this.rest=H.substring(H.indexOf(",")+1)}}class Jr{constructor(H,be){let Ve=0,xe="";Bn(H)?(this.data_=H,Ve=H.size,xe=H.type):H instanceof ArrayBuffer?(be?this.data_=new Uint8Array(H):(this.data_=new Uint8Array(H.byteLength),this.data_.set(new Uint8Array(H))),Ve=this.data_.length):H instanceof Uint8Array&&(be?this.data_=H:(this.data_=new Uint8Array(H.length),this.data_.set(H)),Ve=H.length),this.size_=Ve,this.type_=xe}size(){return this.size_}type(){return this.type_}slice(H,be){if(Bn(this.data_)){const xe=function Ki(O,H,be){return O.webkitSlice?O.webkitSlice(H,be):O.mozSlice?O.mozSlice(H,be):O.slice?O.slice(H,be):null}(this.data_,H,be);return null===xe?null:new Jr(xe)}{const Ve=new Uint8Array(this.data_.buffer,H,be-H);return new Jr(Ve,!0)}}static getBlob(...H){if(Ar()){const be=H.map(Ve=>Ve instanceof Jr?Ve.data_:Ve);return new Jr(Vi.apply(null,be))}{const be=H.map(Jt=>fr(Jt)?di(Rr.RAW,Jt).data:Jt.data_);let Ve=0;be.forEach(Jt=>{Ve+=Jt.byteLength});const xe=new Uint8Array(Ve);let wt=0;return be.forEach(Jt=>{for(let wn=0;wn<Jt.length;wn++)xe[wt++]=Jt[wn]}),new Jr(xe,!0)}}uploadData(){return this.data_}}function tt(O){let H;try{H=JSON.parse(O)}catch{return null}return function ii(O){return"object"==typeof O&&!Array.isArray(O)}(H)?H:null}function $t(O){const H=O.lastIndexOf("/",O.length-2);return-1===H?O:O.slice(H+1)}function Rt(O,H){return H}class fn{constructor(H,be,Ve,xe){this.server=H,this.local=be||H,this.writable=!!Ve,this.xform=xe||Rt}}let Xn=null;function de(){if(Xn)return Xn;const O=[];O.push(new fn("bucket")),O.push(new fn("generation")),O.push(new fn("metageneration")),O.push(new fn("name","fullPath",!0));const be=new fn("name");be.xform=function H(wt,Jt){return function oi(O){return!fr(O)||O.length<2?O:$t(O)}(Jt)},O.push(be);const xe=new fn("size");return xe.xform=function Ve(wt,Jt){return void 0!==Jt?Number(Jt):Jt},O.push(xe),O.push(new fn("timeCreated")),O.push(new fn("updated")),O.push(new fn("md5Hash",null,!0)),O.push(new fn("cacheControl",null,!0)),O.push(new fn("contentDisposition",null,!0)),O.push(new fn("contentEncoding",null,!0)),O.push(new fn("contentLanguage",null,!0)),O.push(new fn("contentType",null,!0)),O.push(new fn("metadata","customMetadata",!0)),Xn=O,Xn}function Te(O,H,be){const Ve=tt(H);return null===Ve?null:function fe(O,H,be){const Ve={type:"file"},xe=be.length;for(let wt=0;wt<xe;wt++){const Jt=be[wt];Ve[Jt.local]=Jt.xform(Ve,H[Jt.server])}return function we(O,H){Object.defineProperty(O,"ref",{get:function be(){const wt=new Hn(O.bucket,O.fullPath);return H._makeStorageReference(wt)}})}(Ve,O),Ve}(O,Ve,be)}function Ye(O,H){const be={},Ve=H.length;for(let xe=0;xe<Ve;xe++){const wt=H[xe];wt.writable&&(be[wt.server]=O[wt.local])}return JSON.stringify(be)}const Ht="prefixes",pn="items";class Or{constructor(H,be,Ve,xe){this.url=H,this.method=be,this.handler=Ve,this.timeout=xe,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function wi(O){if(!O)throw J()}function xr(O,H){return function be(Ve,xe){const wt=Te(O,xe,H);return wi(null!==wt),wt}}function is(O){return function H(be,Ve){let xe;return xe=401===be.getStatus()?be.getErrorText().includes("Firebase App Check token is invalid")?function st(){return new Et(Mt.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}():function mt(){return new Et(Mt.UNAUTHENTICATED,"User is not authenticated, please authenticate using Firebase Authentication and try again.")}():402===be.getStatus()?function Ne(O){return new Et(Mt.QUOTA_EXCEEDED,"Quota for bucket '"+O+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}(O.bucket):403===be.getStatus()?function xt(O){return new Et(Mt.UNAUTHORIZED,"User does not have permission to access '"+O+"'.")}(O.path):Ve,xe.status=be.getStatus(),xe.serverResponse=Ve.serverResponse,xe}}function vs(O){const H=is(O);return function be(Ve,xe){let wt=H(Ve,xe);return 404===Ve.getStatus()&&(wt=function he(O){return new Et(Mt.OBJECT_NOT_FOUND,"Object '"+O+"' does not exist.")}(O.path)),wt.serverResponse=xe.serverResponse,wt}}function rr(O,H,be){const xe=ci(H.fullServerUrl(),O.host,O._protocol),Jt=O.maxOperationRetryTime,wn=new Or(xe,"GET",xr(O,be),Jt);return wn.errorHandler=vs(H),wn}function Yi(O,H,be,Ve,xe){const wt={};wt.prefix=H.isRoot?"":H.path+"/",be&&be.length>0&&(wt.delimiter=be),Ve&&(wt.pageToken=Ve),xe&&(wt.maxResults=xe);const wn=ci(H.bucketOnlyServerUrl(),O.host,O._protocol),yr=O.maxOperationRetryTime,zr=new Or(wn,"GET",function Zi(O,H){return function be(Ve,xe){const wt=function jr(O,H,be){const Ve=tt(be);return null===Ve?null:function Nn(O,H,be){const Ve={prefixes:[],items:[],nextPageToken:be.nextPageToken};if(be[Ht])for(const xe of be[Ht]){const wt=xe.replace(/\/$/,""),Jt=O._makeStorageReference(new Hn(H,wt));Ve.prefixes.push(Jt)}if(be[pn])for(const xe of be[pn]){const wt=O._makeStorageReference(new Hn(H,xe.name));Ve.items.push(wt)}return Ve}(O,H,Ve)}(O,H,xe);return wi(null!==wt),wt}}(O,H.bucket),yr);return zr.urlParams=wt,zr.errorHandler=is(H),zr}function Sr(O,H,be){const Ve=Object.assign({},be);return Ve.fullPath=O.path,Ve.size=H.size(),Ve.contentType||(Ve.contentType=function Pn(O,H){return O&&O.contentType||H&&H.type()||"application/octet-stream"}(null,H)),Ve}class hs{constructor(H,be,Ve,xe){this.current=H,this.total=be,this.finalized=!!Ve,this.metadata=xe||null}}function Qi(O,H){let be=null;try{be=O.getResponseHeader("X-Goog-Upload-Status")}catch{wi(!1)}return wi(!!be&&-1!==(H||["active"]).indexOf(be)),be}const Xs={STATE_CHANGED:"state_changed"},ar={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function Ks(O){switch(O){case"running":case"pausing":case"canceling":return ar.RUNNING;case"paused":return ar.PAUSED;case"success":return ar.SUCCESS;case"canceled":return ar.CANCELED;default:return ar.ERROR}}class Fo{constructor(H,be,Ve){if(function kr(O){return"function"==typeof O}(H)||null!=be||null!=Ve)this.next=H,this.error=be??void 0,this.complete=Ve??void 0;else{const wt=H;this.next=wt.next,this.error=wt.error,this.complete=wt.complete}}}function la(O){return(...H)=>{Promise.resolve().then(()=>O(...H))}}let Os=null;class Bs{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=pr.NO_ERROR,this.sendPromise_=new Promise(H=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=pr.ABORT,H()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=pr.NETWORK_ERROR,H()}),this.xhr_.addEventListener("load",()=>{H()})})}send(H,be,Ve,xe){if(this.sent_)throw dr("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(be,H,!0),void 0!==xe)for(const wt in xe)xe.hasOwnProperty(wt)&&this.xhr_.setRequestHeader(wt,xe[wt].toString());return void 0!==Ve?this.xhr_.send(Ve):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw dr("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw dr("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw dr("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw dr("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(H){return this.xhr_.getResponseHeader(H)}addUploadProgressListener(H){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",H)}removeUploadProgressListener(H){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",H)}}class Ko extends Bs{initXhr(){this.xhr_.responseType="text"}}function ys(){return Os?Os():new Ko}class ft{constructor(H,be,Ve=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=H,this._blob=be,this._metadata=Ve,this._mappings=de(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=xe=>{if(this._request=void 0,this._chunkMultiplier=1,xe._codeEquals(Mt.CANCELED))this._needToFetchStatus=!0,this.completeTransitions_();else{const wt=this.isExponentialBackoffExpired();if(gi(xe.status,[])){if(!wt)return this.sleepTime=Math.max(2*this.sleepTime,1e3),this._needToFetchStatus=!0,void this.completeTransitions_();xe=Xe()}this._error=xe,this._transition("error")}},this._metadataErrorHandler=xe=>{this._request=void 0,xe._codeEquals(Mt.CANCELED)?this.completeTransitions_():(this._error=xe,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((xe,wt)=>{this._resolve=xe,this._reject=wt,this._start()}),this._promise.then(null,()=>{})}isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}_makeProgressCallback(){const H=this._transferred;return be=>this._updateProgress(H+be)}_shouldDoResumable(H){return H.size()>262144}_start(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(H){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([be,Ve])=>{switch(this._state){case"running":H(be,Ve);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused")}})}_createResumable(){this._resolveToken((H,be)=>{const Ve=function Ni(O,H,be,Ve,xe){const wt=H.bucketOnlyServerUrl(),Jt=Sr(H,Ve,xe),wn={name:Jt.fullPath},xn=ci(wt,O.host,O._protocol),zr={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${Ve.size()}`,"X-Goog-Upload-Header-Content-Type":Jt.contentType,"Content-Type":"application/json; charset=utf-8"},Ti=Ye(Jt,be),ps=new Or(xn,"POST",function Ui(Hs){let ts;Qi(Hs);try{ts=Hs.getResponseHeader("X-Goog-Upload-URL")}catch{wi(!1)}return wi(fr(ts)),ts},O.maxUploadRetryTime);return ps.urlParams=wn,ps.headers=zr,ps.body=Ti,ps.errorHandler=is(H),ps}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),xe=this._ref.storage._makeRequest(Ve,ys,H,be);this._request=xe,xe.getPromise().then(wt=>{this._request=void 0,this._uploadUrl=wt,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const H=this._uploadUrl;this._resolveToken((be,Ve)=>{const xe=function fs(O,H,be,Ve){const xn=new Or(be,"POST",function wt(yr){const zr=Qi(yr,["active","final"]);let Ti=null;try{Ti=yr.getResponseHeader("X-Goog-Upload-Size-Received")}catch{wi(!1)}Ti||wi(!1);const Ai=Number(Ti);return wi(!isNaN(Ai)),new hs(Ai,Ve.size(),"final"===zr)},O.maxUploadRetryTime);return xn.headers={"X-Goog-Upload-Command":"query"},xn.errorHandler=is(H),xn}(this._ref.storage,this._ref._location,H,this._blob),wt=this._ref.storage._makeRequest(xe,ys,be,Ve);this._request=wt,wt.getPromise().then(Jt=>{this._request=void 0,this._updateProgress(Jt.current),this._needToFetchStatus=!1,Jt.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const H=262144*this._chunkMultiplier,be=new hs(this._transferred,this._blob.size()),Ve=this._uploadUrl;this._resolveToken((xe,wt)=>{let Jt;try{Jt=function qs(O,H,be,Ve,xe,wt,Jt,wn){const xn=new hs(0,0);if(Jt?(xn.current=Jt.current,xn.total=Jt.total):(xn.current=0,xn.total=Ve.size()),Ve.size()!==xn.total)throw function Nt(){return new Et(Mt.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.")}();const yr=xn.total-xn.current;let zr=yr;xe>0&&(zr=Math.min(zr,xe));const Ti=xn.current;let Ui="";Ui=0===zr?"finalize":yr===zr?"upload, finalize":"upload";const ps={"X-Goog-Upload-Command":Ui,"X-Goog-Upload-Offset":`${xn.current}`},Hs=Ve.slice(Ti,Ti+zr);if(null===Hs)throw gt();const as=new Or(be,"POST",function ts(Gi,Ns){const Ho=Qi(Gi,["active","final"]),To=xn.current+zr,pa=Ve.size();let ga;return ga="final"===Ho?xr(H,wt)(Gi,Ns):null,new hs(To,pa,"final"===Ho,ga)},H.maxUploadRetryTime);return as.headers=ps,as.body=Hs.uploadData(),as.progressCallback=wn||null,as.errorHandler=is(O),as}(this._ref._location,this._ref.storage,Ve,this._blob,H,this._mappings,be,this._makeProgressCallback())}catch(xn){return this._error=xn,void this._transition("error")}const wn=this._ref.storage._makeRequest(Jt,ys,xe,wt,!1);this._request=wn,wn.getPromise().then(xn=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(xn.current),xn.finalized?(this._metadata=xn.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){262144*this._chunkMultiplier*2<33554432&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((H,be)=>{const Ve=rr(this._ref.storage,this._ref._location,this._mappings),xe=this._ref.storage._makeRequest(Ve,ys,H,be);this._request=xe,xe.getPromise().then(wt=>{this._request=void 0,this._metadata=wt,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((H,be)=>{const Ve=function Ei(O,H,be,Ve,xe){const wt=H.bucketOnlyServerUrl(),Jt={"X-Goog-Upload-Protocol":"multipart"},xn=function wn(){let as="";for(let Gi=0;Gi<2;Gi++)as+=Math.random().toString().slice(2);return as}();Jt["Content-Type"]="multipart/related; boundary="+xn;const yr=Sr(H,Ve,xe),zr=Ye(yr,be),Ui=Jr.getBlob("--"+xn+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+zr+"\r\n--"+xn+"\r\nContent-Type: "+yr.contentType+"\r\n\r\n",Ve,"\r\n--"+xn+"--");if(null===Ui)throw gt();const ps={name:yr.fullPath},Hs=ci(wt,O.host,O._protocol),Wr=O.maxUploadRetryTime,Pi=new Or(Hs,"POST",xr(O,be),Wr);return Pi.urlParams=ps,Pi.headers=Jt,Pi.body=Ui.uploadData(),Pi.errorHandler=is(H),Pi}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),xe=this._ref.storage._makeRequest(Ve,ys,H,be);this._request=xe,xe.getPromise().then(wt=>{this._request=void 0,this._metadata=wt,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(H){const be=this._transferred;this._transferred=H,this._transferred!==be&&this._notifyObservers()}_transition(H){if(this._state!==H)switch(H){case"canceling":case"pausing":this._state=H,void 0!==this._request?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const be="paused"===this._state;this._state=H,be&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=H,this._notifyObservers();break;case"canceled":this._error=ut(),this._state=H,this._notifyObservers()}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}get snapshot(){const H=Ks(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:H,metadata:this._metadata,task:this,ref:this._ref}}on(H,be,Ve,xe){const wt=new Fo(be||void 0,Ve||void 0,xe||void 0);return this._addObserver(wt),()=>{this._removeObserver(wt)}}then(H,be){return this._promise.then(H,be)}catch(H){return this.then(null,H)}_addObserver(H){this._observers.push(H),this._notifyObserver(H)}_removeObserver(H){const be=this._observers.indexOf(H);-1!==be&&this._observers.splice(be,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(be=>{this._notifyObserver(be)})}_finishPromise(){if(void 0!==this._resolve){let H=!0;switch(Ks(this._state)){case ar.SUCCESS:la(this._resolve.bind(null,this.snapshot))();break;case ar.CANCELED:case ar.ERROR:la(this._reject.bind(null,this._error))();break;default:H=!1}H&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(H){switch(Ks(this._state)){case ar.RUNNING:case ar.PAUSED:H.next&&la(H.next.bind(H,this.snapshot))();break;case ar.SUCCESS:H.complete&&la(H.complete.bind(H))();break;default:H.error&&la(H.error.bind(H,this._error))()}}resume(){const H="paused"===this._state||"pausing"===this._state;return H&&this._transition("running"),H}pause(){const H="running"===this._state;return H&&this._transition("pausing"),H}cancel(){const H="running"===this._state||"pausing"===this._state;return H&&this._transition("canceling"),H}}class Ct{constructor(H,be){this._service=H,this._location=be instanceof Hn?be:Hn.makeFromUrl(be,H.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(H,be){return new Ct(H,be)}get root(){const H=new Hn(this._location.bucket,"");return this._newRef(this._service,H)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return $t(this._location.path)}get storage(){return this._service}get parent(){const H=function Ze(O){if(0===O.length)return null;const H=O.lastIndexOf("/");return-1===H?"":O.slice(0,H)}(this._location.path);if(null===H)return null;const be=new Hn(this._location.bucket,H);return new Ct(this._service,be)}_throwIfRoot(H){if(""===this._location.path)throw zt(H)}}function Xi(O,H,be){return ss.apply(this,arguments)}function ss(){return(ss=(0,ae.Z)(function*(O,H,be){const xe=yield os(O,{pageToken:be});H.prefixes.push(...xe.prefixes),H.items.push(...xe.items),null!=xe.nextPageToken&&(yield Xi(O,H,xe.nextPageToken))})).apply(this,arguments)}function os(O,H){null!=H&&"number"==typeof H.maxResults&&Tn("options.maxResults",1,1e3,H.maxResults);const be=H||{},Ve=Yi(O.storage,O._location,"/",be.pageToken,be.maxResults);return O.storage.makeRequestWithTokens(Ve,ys)}function ks(O){O._throwIfRoot("getDownloadURL");const H=function Ci(O,H,be){const xe=ci(H.fullServerUrl(),O.host,O._protocol),Jt=O.maxOperationRetryTime,wn=new Or(xe,"GET",function Ms(O,H){return function be(Ve,xe){const wt=Te(O,xe,H);return wi(null!==wt),function ge(O,H,be,Ve){const xe=tt(H);if(null===xe||!fr(xe.downloadTokens))return null;const wt=xe.downloadTokens;if(0===wt.length)return null;const Jt=encodeURIComponent;return wt.split(",").map(yr=>{const Ti=O.fullPath;return ci("/b/"+Jt(O.bucket)+"/o/"+Jt(Ti),be,Ve)+Hr({alt:"media",token:yr})})[0]}(wt,xe,O.host,O._protocol)}}(O,be),Jt);return wn.errorHandler=vs(H),wn}(O.storage,O._location,de());return O.storage.makeRequestWithTokens(H,ys).then(be=>{if(null===be)throw function jt(){return new Et(Mt.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}();return be})}function Da(O,H){const be=function ht(O,H){const be=H.split("/").filter(Ve=>Ve.length>0).join("/");return 0===O.length?be:O+"/"+be}(O._location.path,H),Ve=new Hn(O._location.bucket,be);return new Ct(O.storage,Ve)}function Jo(O,H){if(O instanceof Pa){const be=O;if(null==be._bucket)throw function lt(){return new Et(Mt.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+We+"' property when initializing the app?")}();const Ve=new Ct(be,be._bucket);return null!=H?Jo(Ve,H):Ve}return void 0!==H?Da(O,H):O}function Ao(O,H){if(H&&function Do(O){return/^[A-Za-z]+:\/\//.test(O)}(H)){if(O instanceof Pa)return function Di(O,H){return new Ct(O,H)}(O,H);throw Ot("To use ref(service, url), the first argument must be a Storage instance.")}return Jo(O,H)}function ca(O,H){const be=H?.[We];return null==be?null:Hn.makeFromBucketSpec(be,O)}class Pa{constructor(H,be,Ve,xe,wt){this.app=H,this._authProvider=be,this._appCheckProvider=Ve,this._url=xe,this._firebaseVersion=wt,this._bucket=null,this._host=nt,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=xe?Hn.makeFromBucketSpec(xe,this._host):ca(this._host,this.app.options)}get host(){return this._host}set host(H){this._host=H,this._bucket=null!=this._url?Hn.makeFromBucketSpec(this._url,H):ca(H,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(H){Tn("time",0,Number.POSITIVE_INFINITY,H),this._maxUploadRetryTime=H}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(H){Tn("time",0,Number.POSITIVE_INFINITY,H),this._maxOperationRetryTime=H}_getAuthToken(){var H=this;return(0,ae.Z)(function*(){if(H._overrideAuthToken)return H._overrideAuthToken;const be=H._authProvider.getImmediate({optional:!0});if(be){const Ve=yield be.getToken();if(null!==Ve)return Ve.accessToken}return null})()}_getAppCheckToken(){var H=this;return(0,ae.Z)(function*(){const be=H._appCheckProvider.getImmediate({optional:!0});return be?(yield be.getToken()).token:null})()}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(H=>H.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(H){return new Ct(this,H)}_makeRequest(H,be,Ve,xe,wt=!0){if(this._deleted)return new Zn(rn());{const Jt=function Qn(O,H,be,Ve,xe,wt,Jt=!0){const wn=Hr(O.urlParams),xn=O.url+wn,yr=Object.assign({},O.headers);return function Us(O,H){H&&(O["X-Firebase-GMPID"]=H)}(yr,H),function Wn(O,H){null!==H&&H.length>0&&(O.Authorization="Firebase "+H)}(yr,be),function or(O,H){O["X-Firebase-Storage-Version"]="webjs/"+(H??"AppManager")}(yr,wt),function Lr(O,H){null!==H&&(O["X-Firebase-AppCheck"]=H)}(yr,Ve),new Ri(xn,O.method,yr,O.body,O.successCodes,O.additionalRetryCodes,O.handler,O.errorHandler,O.timeout,O.progressCallback,xe,Jt)}(H,this._appId,Ve,xe,be,this._firebaseVersion,wt);return this._requests.add(Jt),Jt.getPromise().then(()=>this._requests.delete(Jt),()=>this._requests.delete(Jt)),Jt}}makeRequestWithTokens(H,be){var Ve=this;return(0,ae.Z)(function*(){const[xe,wt]=yield Promise.all([Ve._getAuthToken(),Ve._getAppCheckToken()]);return Ve._makeRequest(H,be,xe,wt).getPromise()})()}}const Ba="@firebase/storage";function yo(O,H){return Ao(O=(0,et.m9)(O),H)}function su(O,{instanceIdentifier:H}){const be=O.getProvider("app").getImmediate(),Ve=O.getProvider("auth-internal"),xe=O.getProvider("app-check-internal");return new Pa(be,Ve,xe,H,Pt.SDK_VERSION)}!function Cl(){(0,Pt._registerComponent)(new at.wA("storage",su,"PUBLIC").setMultipleInstances(!0)),(0,Pt.registerVersion)(Ba,"0.11.2",""),(0,Pt.registerVersion)(Ba,"0.11.2","esm2017")}();class Vo{constructor(H,be,Ve){this._delegate=H,this.task=be,this.ref=Ve}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}class Va{constructor(H,be){this._delegate=H,this._ref=be,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new Vo(this._delegate.snapshot,this,this._ref)}then(H,be){return this._delegate.then(Ve=>{if(H)return H(new Vo(Ve,this,this._ref))},be)}on(H,be,Ve,xe){let wt;return be&&(wt="function"==typeof be?Jt=>be(new Vo(Jt,this,this._ref)):{next:be.next?Jt=>be.next(new Vo(Jt,this,this._ref)):void 0,complete:be.complete||void 0,error:be.error||void 0}),this._delegate.on(H,wt,Ve||void 0,xe||void 0)}}class ws{constructor(H,be){this._delegate=H,this._service=be}get prefixes(){return this._delegate.prefixes.map(H=>new ai(H,this._service))}get items(){return this._delegate.items.map(H=>new ai(H,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}}class ai{constructor(H,be){this._delegate=H,this.storage=be}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(H){const be=function hi(O,H){return Da(O,H)}(this._delegate,H);return new ai(be,this.storage)}get root(){return new ai(this._delegate.root,this.storage)}get parent(){const H=this._delegate.parent;return null==H?null:new ai(H,this.storage)}put(H,be){return this._throwIfRoot("put"),new Va(function ru(O,H,be){return function Tr(O,H,be){return O._throwIfRoot("uploadBytesResumable"),new ft(O,new Jr(H),be)}(O=(0,et.m9)(O),H,be)}(this._delegate,H,be),this)}putString(H,be=Rr.RAW,Ve){this._throwIfRoot("putString");const xe=di(be,H),wt=Object.assign({},Ve);return null==wt.contentType&&null!=xe.contentType&&(wt.contentType=xe.contentType),new Va(new ft(this._delegate,new Jr(xe.data,!0),wt),this)}listAll(){return function Bo(O){return function mi(O){const H={prefixes:[],items:[]};return Xi(O,H).then(()=>H)}(O=(0,et.m9)(O))}(this._delegate).then(H=>new ws(H,this.storage))}list(H){return function Zo(O,H){return os(O=(0,et.m9)(O),H)}(this._delegate,H||void 0).then(be=>new ws(be,this.storage))}getMetadata(){return function Vs(O){return function Pr(O){O._throwIfRoot("getMetadata");const H=rr(O.storage,O._location,de());return O.storage.makeRequestWithTokens(H,ys)}(O=(0,et.m9)(O))}(this._delegate)}updateMetadata(H){return function iu(O,H){return function Uo(O,H){O._throwIfRoot("updateMetadata");const be=function Es(O,H,be,Ve){const wt=ci(H.fullServerUrl(),O.host,O._protocol),wn=Ye(be,Ve),yr=O.maxOperationRetryTime,zr=new Or(wt,"PATCH",xr(O,Ve),yr);return zr.headers={"Content-Type":"application/json; charset=utf-8"},zr.body=wn,zr.errorHandler=vs(H),zr}(O.storage,O._location,H,de());return O.storage.makeRequestWithTokens(be,ys)}(O=(0,et.m9)(O),H)}(this._delegate,H)}getDownloadURL(){return function Po(O){return ks(O=(0,et.m9)(O))}(this._delegate)}delete(){return this._throwIfRoot("delete"),function uo(O){return function vo(O){O._throwIfRoot("deleteObject");const H=function Ss(O,H){const Ve=ci(H.fullServerUrl(),O.host,O._protocol),wn=new Or(Ve,"DELETE",function Jt(xn,yr){},O.maxOperationRetryTime);return wn.successCodes=[200,204],wn.errorHandler=vs(H),wn}(O.storage,O._location);return O.storage.makeRequestWithTokens(H,ys)}(O=(0,et.m9)(O))}(this._delegate)}_throwIfRoot(H){if(""===this._delegate._location.path)throw zt(H)}}class Hi{constructor(H,be){this.app=H,this._delegate=be}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(H){if(Fi(H))throw Ot("ref() expected a child path but got a URL, use refFromURL instead.");return new ai(yo(this._delegate,H),this)}refFromURL(H){if(!Fi(H))throw Ot("refFromURL() expected a full URL but got a child path, use ref() instead.");try{Hn.makeFromUrl(H,this._delegate.host)}catch{throw Ot("refFromUrl() expected a valid full URL but got an invalid one.")}return new ai(yo(this._delegate,H),this)}setMaxUploadRetryTime(H){this._delegate.maxUploadRetryTime=H}setMaxOperationRetryTime(H){this._delegate.maxOperationRetryTime=H}useEmulator(H,be,Ve={}){!function ha(O,H,be,Ve={}){!function Aa(O,H,be,Ve={}){O.host=`${H}:${be}`,O._protocol="http";const{mockUserToken:xe}=Ve;xe&&(O._overrideAuthToken="string"==typeof xe?xe:(0,et.Sg)(xe,O.app.options.projectId))}(O,H,be,Ve)}(this._delegate,H,be,Ve)}}function Fi(O){return/^[A-Za-z]+:\/\//.test(O)}function ou(O,{instanceIdentifier:H}){const be=O.getProvider("app-compat").getImmediate(),Ve=O.getProvider("storage").getImmediate({identifier:H});return new Hi(be,Ve)}!function Ha(O){const H={TaskState:ar,TaskEvent:Xs,StringFormat:Rr,Storage:Hi,Reference:ai};O.INTERNAL.registerComponent(new at.wA("storage-compat",ou,"PUBLIC").setServiceProps(H).setMultipleInstances(!0)),O.registerVersion("@firebase/storage-compat","0.3.2")}(yt.Z);var vi=K(6217),Cs=K(9260);function _o(O){const H=function fa(O){return new E.y(H=>{const be=Jt=>H.next(Jt);be(O.snapshot);const wt=O.on("state_changed",be);return O.then(Jt=>{be(Jt),H.complete()},Jt=>{be(O.snapshot),(Jt=>{H.error(Jt)})(Jt)}),function(){wt()}}).pipe(function Ge(O,H=Oe.z){return(0,De.e)((be,Ve)=>{let xe=null,wt=null,Jt=null;const wn=()=>{if(xe){xe.unsubscribe(),xe=null;const yr=wt;wt=null,Ve.next(yr)}};function xn(){const yr=Jt+O,zr=H.now();if(zr<yr)return xe=this.schedule(void 0,yr-zr),void Ve.add(xe);wn()}be.subscribe((0,ke.x)(Ve,yr=>{wt=yr,Jt=H.now(),xe||(xe=H.schedule(xn,O),Ve.add(xe))},()=>{wn(),Ve.complete()},void 0,()=>{wt=xe=null}))})}(0))}(O);return{task:O,then:O.then.bind(O),catch:O.catch.bind(O),pause:O.pause.bind(O),cancel:O.cancel.bind(O),resume:O.resume.bind(O),snapshotChanges:()=>H,percentageChanges:()=>H.pipe((0,He.U)(be=>be.bytesTransferred/be.totalBytes*100))}}function ta(O){return{getDownloadURL:()=>(0,M.of)(void 0).pipe(Ie.fc,(0,Ke.w)(()=>O.getDownloadURL()),Ie.iC),getMetadata:()=>(0,M.of)(void 0).pipe(Ie.fc,(0,Ke.w)(()=>O.getMetadata()),Ie.iC),delete:()=>(0,re.D)(O.delete()),child:H=>ta(O.child(H)),updateMetadata:H=>(0,re.D)(O.updateMetadata(H)),put:(H,be)=>_o(O.put(H,be)),putString:(H,be,Ve)=>_o(O.putString(H,be,Ve)),list:H=>(0,re.D)(O.list(H)),listAll:()=>(0,re.D)(O.listAll())}}const ro=new Pe.OlP("angularfire2.storageBucket"),na=new Pe.OlP("angularfire2.storage.maxUploadRetryTime"),ji=new Pe.OlP("angularfire2.storage.maxOperationRetryTime"),Dr=new Pe.OlP("angularfire2.storage.use-emulator");let ra=(()=>{class O{constructor(be,Ve,xe,wt,Jt,wn,xn,yr,zr,Ti){const Ai=(0,Re.on)(be,Jt,Ve);this.storage=(0,Re.cc)(`${Ai.name}.storage.${xe}`,"AngularFireStorage",Ai.name,()=>{const Ui=Jt.runOutsideAngular(()=>Ai.storage(xe||void 0)),ps=zr;return ps&&Ui.useEmulator(...ps),xn&&Ui.setMaxUploadRetryTime(xn),yr&&Ui.setMaxOperationRetryTime(yr),Ui},[xn,yr])}ref(be){return ta(this.storage.ref(be))}refFromURL(be){return ta(this.storage.refFromURL(be))}upload(be,Ve,xe){return ta(this.storage.ref(be)).put(Ve,xe)}}return O.\u0275fac=function(be){return new(be||O)(Pe.LFG(Re.Dh),Pe.LFG(Re.xv,8),Pe.LFG(ro,8),Pe.LFG(Pe.Lbi),Pe.LFG(Pe.R0b),Pe.LFG(Ie.HU),Pe.LFG(na,8),Pe.LFG(ji,8),Pe.LFG(Dr,8),Pe.LFG(vi.nm,8))},O.\u0275prov=Pe.Yz7({token:O,factory:O.\u0275fac,providedIn:"any"}),O})(),Z=(()=>{class O{}return O.\u0275fac=function(be){return new(be||O)},O.\u0275mod=Pe.oAB({type:O}),O.\u0275inj=Pe.cJS({}),O})(),q=(()=>{class O{constructor(){Cs.Z.registerVersion("angularfire",Ie.q4.full,"gcs-compat")}}return O.\u0275fac=function(be){return new(be||O)},O.\u0275mod=Pe.oAB({type:O}),O.\u0275inj=Pe.cJS({providers:[ra],imports:[Z]}),O})()},2011:(Qt,it,K)=>{"use strict";K.d(it,{Dh:()=>He,GT:()=>ke,cc:()=>ae,hO:()=>yt,on:()=>Ie,pX:()=>De,xv:()=>Ke});var E=K(4650),M=K(9260),re=K(2122);Qt=K.hmd(Qt);const Oe=["ngOnDestroy"],De=(nt,We,dt,Fe={})=>new Proxy(nt,{get:(Me,Et)=>dt.runOutsideAngular(()=>{var Mt;if(nt[Et])return!(null===(Mt=Fe?.spy)||void 0===Mt)&&Mt.get&&Fe.spy.get(Et,nt[Et]),nt[Et];if(Oe.indexOf(Et)>-1)return()=>{};const St=We.toPromise().then(J=>{const he=J&&J[Et];return"function"==typeof he?he.bind(J):he&&he.then?he.then(Ne=>dt.run(()=>Ne)):dt.run(()=>he)});return new Proxy(()=>{},{get:(J,he)=>St[he],apply:(J,he,Ne)=>St.then(mt=>{var st;const xt=mt&&mt(...Ne);return!(null===(st=Fe?.spy)||void 0===st)&&st.apply&&Fe.spy.apply(Et,Ne,xt),xt})})})}),ke=(nt,We)=>{We.forEach(dt=>{Object.getOwnPropertyNames(dt.prototype||dt).forEach(Fe=>{Object.defineProperty(nt.prototype,Fe,Object.getOwnPropertyDescriptor(dt.prototype||dt,Fe))})})};class Ge{constructor(We){return We}}const He=new E.OlP("angularfire2.app.options"),Ke=new E.OlP("angularfire2.app.name");function Ie(nt,We,dt){const Me="object"==typeof dt&&dt||{};Me.name=Me.name||"string"==typeof dt&&dt||"[DEFAULT]";const Mt=M.Z.apps.filter(St=>St&&St.name===Me.name)[0]||We.runOutsideAngular(()=>M.Z.initializeApp(nt,Me));try{JSON.stringify(nt)!==JSON.stringify(Mt.options)&&Pe("error",`${Mt.name} Firebase App already initialized with different options${Qt.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch{}return new Ge(Mt)}const Pe=(nt,...We)=>{(0,E.X6Q)()&&typeof console<"u"&&console[nt](...We)},Re={provide:Ge,useFactory:Ie,deps:[He,E.R0b,[new E.FiY,Ke]]};let yt=(()=>{class nt{constructor(dt){M.Z.registerVersion("angularfire",re.q4.full,"core"),M.Z.registerVersion("angularfire",re.q4.full,"app-compat"),M.Z.registerVersion("angular",E.q4F.full,dt.toString())}static initializeApp(dt,Fe){return{ngModule:nt,providers:[{provide:He,useValue:dt},{provide:Ke,useValue:Fe}]}}}return nt.\u0275fac=function(dt){return new(dt||nt)(E.LFG(E.Lbi))},nt.\u0275mod=E.oAB({type:nt}),nt.\u0275inj=E.cJS({providers:[Re]}),nt})();function ae(nt,We,dt,Fe,Me){const[,Et,Mt]=globalThis.\u0275AngularfireInstanceCache.find(St=>St[0]===nt)||[];if(Et)return function Pt(nt,We){try{return nt.toString()===We.toString()}catch{return nt===We}}(Me,Mt)||(at("error",`${We} was already initialized on the ${dt} Firebase App with different settings.${et?" You may need to reload as Firebase is not HMR aware.":""}`),at("warn",{is:Me,was:Mt})),Et;{const St=Fe();return globalThis.\u0275AngularfireInstanceCache.push([nt,St,Me]),St}}const et=!!Qt.hot,at=(nt,...We)=>{(0,E.X6Q)()&&typeof console<"u"&&console[nt](...We)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},2122:(Qt,it,K)=>{"use strict";K.d(it,{q4:()=>Ra,iC:()=>Qo,fc:()=>dn,HU:()=>zn,vb:()=>pe,JM:()=>Q});var E=K(4650),M=K(259),re=K(5861),Oe=K(9681),De=K(2090),ke=K(4859),Ge=K(1877),He=K(8766);const Ke="@firebase/installations",Ie="0.6.4",Pe=1e4,Re=`w:${Ie}`,yt="FIS_v2",ae="https://firebaseinstallations.googleapis.com/v1",Pt=36e5,We=new De.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function dt(z){return z instanceof De.ZR&&z.code.includes("request-failed")}function Fe({projectId:z}){return`${ae}/projects/${z}/installations`}function Me(z){return{token:z.token,requestStatus:2,expiresIn:mt(z.expiresIn),creationTime:Date.now()}}function Et(z,X){return Mt.apply(this,arguments)}function Mt(){return(Mt=(0,re.Z)(function*(z,X){const $e=(yield X.json()).error;return We.create("request-failed",{requestName:z,serverCode:$e.code,serverMessage:$e.message,serverStatus:$e.status})})).apply(this,arguments)}function St({apiKey:z}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":z})}function he(z){return Ne.apply(this,arguments)}function Ne(){return(Ne=(0,re.Z)(function*(z){const X=yield z();return X.status>=500&&X.status<600?z():X})).apply(this,arguments)}function mt(z){return Number(z.replace("s","000"))}function Xe(){return(Xe=(0,re.Z)(function*({appConfig:z,heartbeatServiceProvider:X},{fid:_e}){const $e=Fe(z),It=St(z),Vt=X.getImmediate({optional:!0});if(Vt){const hr=yield Vt.getHeartbeatsHeader();hr&&It.append("x-firebase-client",hr)}const ir={method:"POST",headers:It,body:JSON.stringify({fid:_e,authVersion:yt,appId:z.appId,sdkVersion:Re})},_r=yield he(()=>fetch($e,ir));if(_r.ok){const hr=yield _r.json();return{fid:hr.fid||_e,registrationStatus:2,refreshToken:hr.refreshToken,authToken:Me(hr.authToken)}}throw yield Et("Create Installation",_r)})).apply(this,arguments)}function ut(z){return new Promise(X=>{setTimeout(X,z)})}const ot=/^[cdef][\w-]{21}$/,lt="";function gt(){try{const z=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(z),z[0]=112+z[0]%16;const _e=function Nt(z){return function Je(z){return btoa(String.fromCharCode(...z)).replace(/\+/g,"-").replace(/\//g,"_")}(z).substr(0,22)}(z);return ot.test(_e)?_e:lt}catch{return lt}}function jt(z){return`${z.appName}!${z.appId}`}const _n=new Map;function Ot(z,X){const _e=jt(z);bn(_e,X),function dr(z,X){const _e=function Zn(){return!Hn&&"BroadcastChannel"in self&&(Hn=new BroadcastChannel("[Firebase] FID Change"),Hn.onmessage=z=>{bn(z.data.key,z.data.fid)}),Hn}();_e&&_e.postMessage({key:z,fid:X}),function Vr(){0===_n.size&&Hn&&(Hn.close(),Hn=null)}()}(_e,X)}function bn(z,X){const _e=_n.get(z);if(_e)for(const $e of _e)$e(X)}let Hn=null;const mr="firebase-installations-database",qn=1,kr="firebase-installations-store";let ii=null;function fr(){return ii||(ii=(0,He.X3)(mr,qn,{upgrade:(z,X)=>{0===X&&z.createObjectStore(kr)}})),ii}function Bn(z,X){return Ar.apply(this,arguments)}function Ar(){return(Ar=(0,re.Z)(function*(z,X){const _e=jt(z),It=(yield fr()).transaction(kr,"readwrite"),Vt=It.objectStore(kr),vn=yield Vt.get(_e);return yield Vt.put(X,_e),yield It.done,(!vn||vn.fid!==X.fid)&&Ot(z,X.fid),X})).apply(this,arguments)}function Tn(z){return ci.apply(this,arguments)}function ci(){return(ci=(0,re.Z)(function*(z){const X=jt(z),$e=(yield fr()).transaction(kr,"readwrite");yield $e.objectStore(kr).delete(X),yield $e.done})).apply(this,arguments)}function Hr(z,X){return pr.apply(this,arguments)}function pr(){return(pr=(0,re.Z)(function*(z,X){const _e=jt(z),It=(yield fr()).transaction(kr,"readwrite"),Vt=It.objectStore(kr),vn=yield Vt.get(_e),ir=X(vn);return void 0===ir?yield Vt.delete(_e):yield Vt.put(ir,_e),yield It.done,ir&&(!vn||vn.fid!==ir.fid)&&Ot(z,ir.fid),ir})).apply(this,arguments)}function gi(z){return Ri.apply(this,arguments)}function Ri(){return Ri=(0,re.Z)(function*(z){let X;const _e=yield Hr(z.appConfig,$e=>{const It=function er(z){return Vi(z||{fid:gt(),registrationStatus:0})}($e),Vt=function Wn(z,X){if(0===X.registrationStatus){if(!navigator.onLine)return{installationEntry:X,registrationPromise:Promise.reject(We.create("app-offline"))};const _e={fid:X.fid,registrationStatus:1,registrationTime:Date.now()},$e=function or(z,X){return Us.apply(this,arguments)}(z,_e);return{installationEntry:_e,registrationPromise:$e}}return 1===X.registrationStatus?{installationEntry:X,registrationPromise:Lr(z)}:{installationEntry:X}}(z,It);return X=Vt.registrationPromise,Vt.installationEntry});return _e.fid===lt?{installationEntry:yield X}:{installationEntry:_e,registrationPromise:X}}),Ri.apply(this,arguments)}function Us(){return Us=(0,re.Z)(function*(z,X){try{const _e=yield function xt(z,X){return Xe.apply(this,arguments)}(z,X);return Bn(z.appConfig,_e)}catch(_e){throw dt(_e)&&409===_e.customData.serverCode?yield Tn(z.appConfig):yield Bn(z.appConfig,{fid:X.fid,registrationStatus:0}),_e}}),Us.apply(this,arguments)}function Lr(z){return Qn.apply(this,arguments)}function Qn(){return(Qn=(0,re.Z)(function*(z){let X=yield ti(z.appConfig);for(;1===X.registrationStatus;)yield ut(100),X=yield ti(z.appConfig);if(0===X.registrationStatus){const{installationEntry:_e,registrationPromise:$e}=yield gi(z);return $e||_e}return X})).apply(this,arguments)}function ti(z){return Hr(z,X=>{if(!X)throw We.create("installation-not-found");return Vi(X)})}function Vi(z){return function Ki(z){return 1===z.registrationStatus&&z.registrationTime+Pe<Date.now()}(z)?{fid:z.fid,registrationStatus:0}:z}function Rr(){return(Rr=(0,re.Z)(function*({appConfig:z,heartbeatServiceProvider:X},_e){const $e=function Ir(z,{fid:X}){return`${Fe(z)}/${X}/authTokens:generate`}(z,_e),It=function J(z,{refreshToken:X}){const _e=St(z);return _e.append("Authorization",function st(z){return`${yt} ${z}`}(X)),_e}(z,_e),Vt=X.getImmediate({optional:!0});if(Vt){const hr=yield Vt.getHeartbeatsHeader();hr&&It.append("x-firebase-client",hr)}const ir={method:"POST",headers:It,body:JSON.stringify({installation:{sdkVersion:Re,appId:z.appId}})},_r=yield he(()=>fetch($e,ir));if(_r.ok)return Me(yield _r.json());throw yield Et("Generate Auth Token",_r)})).apply(this,arguments)}function di(z){return kn.apply(this,arguments)}function kn(){return kn=(0,re.Z)(function*(z,X=!1){let _e;const $e=yield Hr(z.appConfig,Vt=>{if(!vr(Vt))throw We.create("not-registered");const vn=Vt.authToken;if(!X&&function Jr(z){return 2===z.requestStatus&&!function tt(z){const X=Date.now();return X<z.creationTime||z.creationTime+z.expiresIn<X+Pt}(z)}(vn))return Vt;if(1===vn.requestStatus)return _e=function mn(z,X){return Xt.apply(this,arguments)}(z,X),Vt;{if(!navigator.onLine)throw We.create("app-offline");const ir=function Ze(z){const X={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},z),{authToken:X})}(Vt);return _e=function tr(z,X){return nr.apply(this,arguments)}(z,ir),ir}});return _e?yield _e:$e.authToken}),kn.apply(this,arguments)}function Xt(){return(Xt=(0,re.Z)(function*(z,X){let _e=yield yn(z.appConfig);for(;1===_e.authToken.requestStatus;)yield ut(100),_e=yield yn(z.appConfig);const $e=_e.authToken;return 0===$e.requestStatus?di(z,X):$e})).apply(this,arguments)}function yn(z){return Hr(z,X=>{if(!vr(X))throw We.create("not-registered");return function ht(z){return 1===z.requestStatus&&z.requestTime+Pe<Date.now()}(X.authToken)?Object.assign(Object.assign({},X),{authToken:{requestStatus:0}}):X})}function nr(){return nr=(0,re.Z)(function*(z,X){try{const _e=yield function Fr(z,X){return Rr.apply(this,arguments)}(z,X),$e=Object.assign(Object.assign({},X),{authToken:_e});return yield Bn(z.appConfig,$e),_e}catch(_e){if(!dt(_e)||401!==_e.customData.serverCode&&404!==_e.customData.serverCode){const $e=Object.assign(Object.assign({},X),{authToken:{requestStatus:0}});yield Bn(z.appConfig,$e)}else yield Tn(z.appConfig);throw _e}}),nr.apply(this,arguments)}function vr(z){return void 0!==z&&2===z.registrationStatus}function Rt(){return(Rt=(0,re.Z)(function*(z){const X=z,{installationEntry:_e,registrationPromise:$e}=yield gi(X);return $e?$e.catch(console.error):di(X).catch(console.error),_e.fid})).apply(this,arguments)}function Xn(){return Xn=(0,re.Z)(function*(z,X=!1){const _e=z;return yield function oi(z){return de.apply(this,arguments)}(_e),(yield di(_e,X)).token}),Xn.apply(this,arguments)}function de(){return(de=(0,re.Z)(function*(z){const{registrationPromise:X}=yield gi(z);X&&(yield X)})).apply(this,arguments)}function jr(z){return We.create("missing-app-config-values",{valueName:z})}const Or="installations",xr=z=>{const X=z.getProvider("app").getImmediate(),_e=function Nn(z){if(!z||!z.options)throw jr("App Configuration");if(!z.name)throw jr("App Name");const X=["projectId","apiKey","appId"];for(const _e of X)if(!z.options[_e])throw jr(_e);return{appName:z.name,projectId:z.options.projectId,apiKey:z.options.apiKey,appId:z.options.appId}}(X);return{app:X,appConfig:_e,heartbeatServiceProvider:(0,Oe._getProvider)(X,"heartbeat"),_delete:()=>Promise.resolve()}},Zi=z=>{const X=z.getProvider("app").getImmediate(),_e=(0,Oe._getProvider)(X,Or).getImmediate();return{getId:()=>function $t(z){return Rt.apply(this,arguments)}(_e),getToken:It=>function fn(z){return Xn.apply(this,arguments)}(_e,It)}};(function Ms(){(0,Oe._registerComponent)(new ke.wA(Or,xr,"PUBLIC")),(0,Oe._registerComponent)(new ke.wA("installations-internal",Zi,"PRIVATE"))})(),(0,Oe.registerVersion)(Ke,Ie),(0,Oe.registerVersion)(Ke,Ie,"esm2017");const is="@firebase/remote-config",Ci=new De.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class ys{constructor(X,_e,$e,It){this.client=X,this.storage=_e,this.storageCache=$e,this.logger=It}isCachedDataFresh(X,_e){if(!_e)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const $e=Date.now()-_e,It=$e<=X;return this.logger.debug(`Config fetch cache check. Cache age millis: ${$e}. Cache max age millis (minimumFetchIntervalMillis setting): ${X}. Is cache hit: ${It}.`),It}fetch(X){var _e=this;return(0,re.Z)(function*(){const[$e,It]=yield Promise.all([_e.storage.getLastSuccessfulFetchTimestampMillis(),_e.storage.getLastSuccessfulFetchResponse()]);if(It&&_e.isCachedDataFresh(X.cacheMaxAgeMillis,$e))return It;X.eTag=It&&It.eTag;const Vt=yield _e.client.fetch(X),vn=[_e.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===Vt.status&&vn.push(_e.storage.setLastSuccessfulFetchResponse(Vt)),yield Promise.all(vn),Vt})()}}function Zs(z=navigator){return z.languages&&z.languages[0]||z.language}class jo{constructor(X,_e,$e,It,Vt,vn){this.firebaseInstallations=X,this.sdkVersion=_e,this.namespace=$e,this.projectId=It,this.apiKey=Vt,this.appId=vn}fetch(X){var _e=this;return(0,re.Z)(function*(){const[$e,It]=yield Promise.all([_e.firebaseInstallations.getId(),_e.firebaseInstallations.getToken()]),vn=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${_e.projectId}/namespaces/${_e.namespace}:fetch?key=${_e.apiKey}`,ir={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":X.eTag||"*"},_r={sdk_version:_e.sdkVersion,app_instance_id:$e,app_instance_id_token:It,app_id:_e.appId,language_code:Zs()},hr={method:"POST",headers:ir,body:JSON.stringify(_r)},Yr=fetch(vn,hr),Qr=new Promise((ei,Si)=>{X.signal.addEventListener(()=>{const bu=new Error("The operation was aborted.");bu.name="AbortError",Si(bu)})});let _a;try{yield Promise.race([Yr,Qr]),_a=yield Yr}catch(ei){let Si="fetch-client-network";throw"AbortError"===ei?.name&&(Si="fetch-timeout"),Ci.create(Si,{originalErrorMessage:ei?.message})}let $s=_a.status;const Ml=_a.headers.get("ETag")||void 0;let pd,Ol;if(200===_a.status){let ei;try{ei=yield _a.json()}catch(Si){throw Ci.create("fetch-client-parse",{originalErrorMessage:Si?.message})}pd=ei.entries,Ol=ei.state}if("INSTANCE_STATE_UNSPECIFIED"===Ol?$s=500:"NO_CHANGE"===Ol?$s=304:("NO_TEMPLATE"===Ol||"EMPTY_CONFIG"===Ol)&&(pd={}),304!==$s&&200!==$s)throw Ci.create("fetch-status",{httpStatus:$s});return{status:$s,eTag:Ml,config:pd}})()}}class ft{constructor(X,_e){this.client=X,this.storage=_e}fetch(X){var _e=this;return(0,re.Z)(function*(){const $e=(yield _e.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return _e.attemptFetch(X,$e)})()}attemptFetch(X,{throttleEndTimeMillis:_e,backoffCount:$e}){var It=this;return(0,re.Z)(function*(){yield function Li(z,X){return new Promise((_e,$e)=>{const It=Math.max(X-Date.now(),0),Vt=setTimeout(_e,It);z.addEventListener(()=>{clearTimeout(Vt),$e(Ci.create("fetch-throttle",{throttleEndTimeMillis:X}))})})}(X.signal,_e);try{const Vt=yield It.client.fetch(X);return yield It.storage.deleteThrottleMetadata(),Vt}catch(Vt){if(!function pt(z){if(!(z instanceof De.ZR&&z.customData))return!1;const X=Number(z.customData.httpStatus);return 429===X||500===X||503===X||504===X}(Vt))throw Vt;const vn={throttleEndTimeMillis:Date.now()+(0,De.$s)($e),backoffCount:$e+1};return yield It.storage.setThrottleMetadata(vn),It.attemptFetch(X,vn)}})()}}class Sn{constructor(X,_e,$e,It,Vt){this.app=X,this._client=_e,this._storageCache=$e,this._storage=It,this._logger=Vt,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function Jn(z,X){const _e=z.target.error||void 0;return Ci.create(X,{originalErrorMessage:_e&&_e?.message})}const Tr="app_namespace_store";class ss{constructor(X,_e,$e,It=function Xi(){return new Promise((z,X)=>{try{const _e=indexedDB.open("firebase_remote_config",1);_e.onerror=$e=>{X(Jn($e,"storage-open"))},_e.onsuccess=$e=>{z($e.target.result)},_e.onupgradeneeded=$e=>{0===$e.oldVersion&&$e.target.result.createObjectStore(Tr,{keyPath:"compositeKey"})}}catch(_e){X(Ci.create("storage-open",{originalErrorMessage:_e?.message}))}})}()){this.appId=X,this.appName=_e,this.namespace=$e,this.openDbPromise=It}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(X){return this.set("last_fetch_status",X)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(X){return this.set("last_successful_fetch_timestamp_millis",X)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(X){return this.set("last_successful_fetch_response",X)}getActiveConfig(){return this.get("active_config")}setActiveConfig(X){return this.set("active_config",X)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(X){return this.set("active_config_etag",X)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(X){return this.set("throttle_metadata",X)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(X){var _e=this;return(0,re.Z)(function*(){const $e=yield _e.openDbPromise;return new Promise((It,Vt)=>{const ir=$e.transaction([Tr],"readonly").objectStore(Tr),_r=_e.createCompositeKey(X);try{const hr=ir.get(_r);hr.onerror=Yr=>{Vt(Jn(Yr,"storage-get"))},hr.onsuccess=Yr=>{const Qr=Yr.target.result;It(Qr?Qr.value:void 0)}}catch(hr){Vt(Ci.create("storage-get",{originalErrorMessage:hr?.message}))}})})()}set(X,_e){var $e=this;return(0,re.Z)(function*(){const It=yield $e.openDbPromise;return new Promise((Vt,vn)=>{const _r=It.transaction([Tr],"readwrite").objectStore(Tr),hr=$e.createCompositeKey(X);try{const Yr=_r.put({compositeKey:hr,value:_e});Yr.onerror=Qr=>{vn(Jn(Qr,"storage-set"))},Yr.onsuccess=()=>{Vt()}}catch(Yr){vn(Ci.create("storage-set",{originalErrorMessage:Yr?.message}))}})})()}delete(X){var _e=this;return(0,re.Z)(function*(){const $e=yield _e.openDbPromise;return new Promise((It,Vt)=>{const ir=$e.transaction([Tr],"readwrite").objectStore(Tr),_r=_e.createCompositeKey(X);try{const hr=ir.delete(_r);hr.onerror=Yr=>{Vt(Jn(Yr,"storage-delete"))},hr.onsuccess=()=>{It()}}catch(hr){Vt(Ci.create("storage-delete",{originalErrorMessage:hr?.message}))}})})()}createCompositeKey(X){return[this.appId,this.appName,this.namespace,X].join()}}class os{constructor(X){this.storage=X}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var X=this;return(0,re.Z)(function*(){const _e=X.storage.getLastFetchStatus(),$e=X.storage.getLastSuccessfulFetchTimestampMillis(),It=X.storage.getActiveConfig(),Vt=yield _e;Vt&&(X.lastFetchStatus=Vt);const vn=yield $e;vn&&(X.lastSuccessfulFetchTimestampMillis=vn);const ir=yield It;ir&&(X.activeConfig=ir)})()}setLastFetchStatus(X){return this.lastFetchStatus=X,this.storage.setLastFetchStatus(X)}setLastSuccessfulFetchTimestampMillis(X){return this.lastSuccessfulFetchTimestampMillis=X,this.storage.setLastSuccessfulFetchTimestampMillis(X)}setActiveConfig(X){return this.activeConfig=X,this.storage.setActiveConfig(X)}}function vo(){return Da.apply(this,arguments)}function Da(){return(Da=(0,re.Z)(function*(){if(!(0,De.hl)())return!1;try{return yield(0,De.eu)()}catch{return!1}})).apply(this,arguments)}!function Pr(){(0,Oe._registerComponent)(new ke.wA("remote-config",function z(X,{instanceIdentifier:_e}){const $e=X.getProvider("app").getImmediate(),It=X.getProvider("installations-internal").getImmediate();if(typeof window>"u")throw Ci.create("registration-window");if(!(0,De.hl)())throw Ci.create("indexed-db-unavailable");const{projectId:Vt,apiKey:vn,appId:ir}=$e.options;if(!Vt)throw Ci.create("registration-project-id");if(!vn)throw Ci.create("registration-api-key");if(!ir)throw Ci.create("registration-app-id");const _r=new ss(ir,$e.name,_e=_e||"firebase"),hr=new os(_r),Yr=new Ge.Yd(is);Yr.logLevel=Ge.in.ERROR;const Qr=new jo(It,Oe.SDK_VERSION,_e,Vt,vn,ir),_a=new ft(Qr,_r),$s=new ys(_a,_r,hr,Yr),Ml=new Sn($e,$s,hr,_r,Yr);return function Gr(z){const X=(0,De.m9)(z);X._initializePromise||(X._initializePromise=X._storageCache.loadFromStorage().then(()=>{X._isInitializationComplete=!0}))}(Ml),Ml},"PUBLIC").setMultipleInstances(!0)),(0,Oe.registerVersion)(is,"0.4.4"),(0,Oe.registerVersion)(is,"0.4.4","esm2017")}();const Do="/firebase-messaging-sw.js",Di="/firebase-cloud-messaging-push-scope",Jo="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",Ao="https://fcmregistrations.googleapis.com/v1",ca="google.c.a.c_id",Aa="google.c.a.c_l",Pa="google.c.a.ts",Ba="google.c.a.e";var eo=(()=>{return(z=eo||(eo={})).PUSH_RECEIVED="push-received",z.NOTIFICATION_CLICKED="notification-clicked",eo;var z})();function to(z){const X=new Uint8Array(z);return btoa(String.fromCharCode(...X)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function wl(z){const _e=(z+"=".repeat((4-z.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),$e=atob(_e),It=new Uint8Array($e.length);for(let Vt=0;Vt<$e.length;++Vt)It[Vt]=$e.charCodeAt(Vt);return It}const Au="fcm_token_details_db",ru=5,Vs="fcm_token_object_Store";function Zo(){return Zo=(0,re.Z)(function*(z){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(Vt=>Vt.name).includes(Au))return null;let X=null;return(yield(0,He.X3)(Au,ru,{upgrade:($e=(0,re.Z)(function*(It,Vt,vn,ir){var _r;if(Vt<2||!It.objectStoreNames.contains(Vs))return;const hr=ir.objectStore(Vs),Yr=yield hr.index("fcmSenderId").get(z);if(yield hr.clear(),Yr)if(2===Vt){const Qr=Yr;if(!Qr.auth||!Qr.p256dh||!Qr.endpoint)return;X={token:Qr.fcmToken,createTime:null!==(_r=Qr.createTime)&&void 0!==_r?_r:Date.now(),subscriptionOptions:{auth:Qr.auth,p256dh:Qr.p256dh,endpoint:Qr.endpoint,swScope:Qr.swScope,vapidKey:"string"==typeof Qr.vapidKey?Qr.vapidKey:to(Qr.vapidKey)}}}else if(3===Vt){const Qr=Yr;X={token:Qr.fcmToken,createTime:Qr.createTime,subscriptionOptions:{auth:to(Qr.auth),p256dh:to(Qr.p256dh),endpoint:Qr.endpoint,swScope:Qr.swScope,vapidKey:to(Qr.vapidKey)}}}else if(4===Vt){const Qr=Yr;X={token:Qr.fcmToken,createTime:Qr.createTime,subscriptionOptions:{auth:to(Qr.auth),p256dh:to(Qr.p256dh),endpoint:Qr.endpoint,swScope:Qr.swScope,vapidKey:to(Qr.vapidKey)}}}}),function(Vt,vn,ir,_r){return $e.apply(this,arguments)})})).close(),yield(0,He.Lj)(Au),yield(0,He.Lj)("fcm_vapid_details_db"),yield(0,He.Lj)("undefined"),function Bo(z){if(!z||!z.subscriptionOptions)return!1;const{subscriptionOptions:X}=z;return"number"==typeof z.createTime&&z.createTime>0&&"string"==typeof z.token&&z.token.length>0&&"string"==typeof X.auth&&X.auth.length>0&&"string"==typeof X.p256dh&&X.p256dh.length>0&&"string"==typeof X.endpoint&&X.endpoint.length>0&&"string"==typeof X.swScope&&X.swScope.length>0&&"string"==typeof X.vapidKey&&X.vapidKey.length>0}(X)?X:null;var $e}),Zo.apply(this,arguments)}const Po="firebase-messaging-database",uo=1,yo="firebase-messaging-store";let hi=null;function da(){return hi||(hi=(0,He.X3)(Po,uo,{upgrade:(z,X)=>{0===X&&z.createObjectStore(yo)}})),hi}function ha(z){return Yo.apply(this,arguments)}function Yo(){return Yo=(0,re.Z)(function*(z){const X=Va(z),$e=yield(yield da()).transaction(yo).objectStore(yo).get(X);if($e)return $e;{const It=yield function iu(z){return Zo.apply(this,arguments)}(z.appConfig.senderId);if(It)return yield ea(z,It),It}}),Yo.apply(this,arguments)}function ea(z,X){return su.apply(this,arguments)}function su(){return(su=(0,re.Z)(function*(z,X){const _e=Va(z),It=(yield da()).transaction(yo,"readwrite");return yield It.objectStore(yo).put(X,_e),yield It.done,X})).apply(this,arguments)}function Vo(){return(Vo=(0,re.Z)(function*(z){const X=Va(z),$e=(yield da()).transaction(yo,"readwrite");yield $e.objectStore(yo).delete(X),yield $e.done})).apply(this,arguments)}function Va({appConfig:z}){return z.appId}const ai=new De.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function Hi(z,X){return Fi.apply(this,arguments)}function Fi(){return(Fi=(0,re.Z)(function*(z,X){const _e=yield vi(z),$e=fa(X),It={method:"POST",headers:_e,body:JSON.stringify($e)};let Vt;try{Vt=yield(yield fetch(Ha(z.appConfig),It)).json()}catch(vn){throw ai.create("token-subscribe-failed",{errorInfo:vn?.toString()})}if(Vt.error)throw ai.create("token-subscribe-failed",{errorInfo:Vt.error.message});if(!Vt.token)throw ai.create("token-subscribe-no-token");return Vt.token})).apply(this,arguments)}function Rs(){return(Rs=(0,re.Z)(function*(z,X){const _e=yield vi(z),$e=fa(X.subscriptionOptions),It={method:"PATCH",headers:_e,body:JSON.stringify($e)};let Vt;try{Vt=yield(yield fetch(`${Ha(z.appConfig)}/${X.token}`,It)).json()}catch(vn){throw ai.create("token-update-failed",{errorInfo:vn?.toString()})}if(Vt.error)throw ai.create("token-update-failed",{errorInfo:Vt.error.message});if(!Vt.token)throw ai.create("token-update-no-token");return Vt.token})).apply(this,arguments)}function Ji(z,X){return ou.apply(this,arguments)}function ou(){return(ou=(0,re.Z)(function*(z,X){const $e={method:"DELETE",headers:yield vi(z)};try{const Vt=yield(yield fetch(`${Ha(z.appConfig)}/${X}`,$e)).json();if(Vt.error)throw ai.create("token-unsubscribe-failed",{errorInfo:Vt.error.message})}catch(It){throw ai.create("token-unsubscribe-failed",{errorInfo:It?.toString()})}})).apply(this,arguments)}function Ha({projectId:z}){return`${Ao}/projects/${z}/registrations`}function vi(z){return Cs.apply(this,arguments)}function Cs(){return(Cs=(0,re.Z)(function*({appConfig:z,installations:X}){const _e=yield X.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":z.apiKey,"x-goog-firebase-installations-auth":`FIS ${_e}`})})).apply(this,arguments)}function fa({p256dh:z,auth:X,endpoint:_e,vapidKey:$e}){const It={web:{endpoint:_e,auth:X,p256dh:z}};return $e!==Jo&&(It.web.applicationPubKey=$e),It}const _o=6048e5;function ro(){return ro=(0,re.Z)(function*(z){const X=yield function q(z,X){return O.apply(this,arguments)}(z.swRegistration,z.vapidKey),_e={vapidKey:z.vapidKey,swScope:z.swRegistration.scope,endpoint:X.endpoint,auth:to(X.getKey("auth")),p256dh:to(X.getKey("p256dh"))},$e=yield ha(z.firebaseDependencies);if($e){if(function H(z,X){return X.vapidKey===z.vapidKey&&X.endpoint===z.endpoint&&X.auth===z.auth&&X.p256dh===z.p256dh}($e.subscriptionOptions,_e))return Date.now()>=$e.createTime+_o?function Dr(z,X){return ra.apply(this,arguments)}(z,{token:$e.token,createTime:Date.now(),subscriptionOptions:_e}):$e.token;try{yield Ji(z.firebaseDependencies,$e.token)}catch(It){console.warn(It)}return ne(z.firebaseDependencies,_e)}return ne(z.firebaseDependencies,_e)}),ro.apply(this,arguments)}function ji(){return ji=(0,re.Z)(function*(z){const X=yield ha(z.firebaseDependencies);X&&(yield Ji(z.firebaseDependencies,X.token),yield function Cl(z){return Vo.apply(this,arguments)}(z.firebaseDependencies));const _e=yield z.swRegistration.pushManager.getSubscription();return!_e||_e.unsubscribe()}),ji.apply(this,arguments)}function ra(){return ra=(0,re.Z)(function*(z,X){try{const _e=yield function no(z,X){return Rs.apply(this,arguments)}(z.firebaseDependencies,X),$e=Object.assign(Object.assign({},X),{token:_e,createTime:Date.now()});return yield ea(z.firebaseDependencies,$e),_e}catch(_e){throw yield function na(z){return ji.apply(this,arguments)}(z),_e}}),ra.apply(this,arguments)}function ne(z,X){return Z.apply(this,arguments)}function Z(){return(Z=(0,re.Z)(function*(z,X){const $e={token:yield Hi(z,X),createTime:Date.now(),subscriptionOptions:X};return yield ea(z,$e),$e.token})).apply(this,arguments)}function O(){return(O=(0,re.Z)(function*(z,X){return(yield z.pushManager.getSubscription())||z.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:wl(X)})})).apply(this,arguments)}function be(z){const X={from:z.from,collapseKey:z.collapse_key,messageId:z.fcmMessageId};return function Ve(z,X){if(!X.notification)return;z.notification={};const _e=X.notification.title;_e&&(z.notification.title=_e);const $e=X.notification.body;$e&&(z.notification.body=$e);const It=X.notification.image;It&&(z.notification.image=It);const Vt=X.notification.icon;Vt&&(z.notification.icon=Vt)}(X,z),function xe(z,X){X.data&&(z.data=X.data)}(X,z),function wt(z,X){var _e,$e,It,Vt,vn;if(!(X.fcmOptions||null!==(_e=X.notification)&&void 0!==_e&&_e.click_action))return;z.fcmOptions={};const ir=null!==(It=null===($e=X.fcmOptions)||void 0===$e?void 0:$e.link)&&void 0!==It?It:null===(Vt=X.notification)||void 0===Vt?void 0:Vt.click_action;ir&&(z.fcmOptions.link=ir);const _r=null===(vn=X.fcmOptions)||void 0===vn?void 0:vn.analytics_label;_r&&(z.fcmOptions.analyticsLabel=_r)}(X,z),X}function wn(z,X){const _e=[];for(let $e=0;$e<z.length;$e++)_e.push(z.charAt($e)),$e<X.length&&_e.push(X.charAt($e));return _e.join("")}function yr(z){return ai.create("missing-app-config-values",{valueName:z})}wn("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),wn("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class zr{constructor(X,_e,$e){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const It=function xn(z){if(!z||!z.options)throw yr("App Configuration Object");if(!z.name)throw yr("App Name");const X=["projectId","apiKey","appId","messagingSenderId"],{options:_e}=z;for(const $e of X)if(!_e[$e])throw yr($e);return{appName:z.name,projectId:_e.projectId,apiKey:_e.apiKey,appId:_e.appId,senderId:_e.messagingSenderId}}(X);this.firebaseDependencies={app:X,appConfig:It,installations:_e,analyticsProvider:$e}}_delete(){return Promise.resolve()}}function Ti(z){return Ai.apply(this,arguments)}function Ai(){return(Ai=(0,re.Z)(function*(z){try{z.swRegistration=yield navigator.serviceWorker.register(Do,{scope:Di}),z.swRegistration.update().catch(()=>{})}catch(X){throw ai.create("failed-service-worker-registration",{browserErrorMessage:X?.message})}})).apply(this,arguments)}function ps(){return(ps=(0,re.Z)(function*(z,X){if(!X&&!z.swRegistration&&(yield Ti(z)),X||!z.swRegistration){if(!(X instanceof ServiceWorkerRegistration))throw ai.create("invalid-sw-registration");z.swRegistration=X}})).apply(this,arguments)}function ts(){return(ts=(0,re.Z)(function*(z,X){X?z.vapidKey=X:z.vapidKey||(z.vapidKey=Jo)})).apply(this,arguments)}function Pi(){return Pi=(0,re.Z)(function*(z,X){if(!navigator)throw ai.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw ai.create("permission-blocked");return yield function Hs(z,X){return ts.apply(this,arguments)}(z,X?.vapidKey),yield function Ui(z,X){return ps.apply(this,arguments)}(z,X?.serviceWorkerRegistration),function ta(z){return ro.apply(this,arguments)}(z)}),Pi.apply(this,arguments)}function Gi(){return(Gi=(0,re.Z)(function*(z,X,_e){const $e=function Ns(z){switch(z){case eo.NOTIFICATION_CLICKED:return"notification_open";case eo.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}(X);(yield z.firebaseDependencies.analyticsProvider.get()).logEvent($e,{message_id:_e[ca],message_name:_e[Aa],message_time:_e[Pa],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function To(){return To=(0,re.Z)(function*(z,X){const _e=X.data;if(!_e.isFirebaseMessaging)return;z.onMessageHandler&&_e.messageType===eo.PUSH_RECEIVED&&("function"==typeof z.onMessageHandler?z.onMessageHandler(be(_e)):z.onMessageHandler.next(be(_e)));const $e=_e.data;(function Jt(z){return"object"==typeof z&&!!z&&ca in z})($e)&&"1"===$e[Ba]&&(yield function as(z,X,_e){return Gi.apply(this,arguments)}(z,_e.messageType,$e))}),To.apply(this,arguments)}const pa="@firebase/messaging",au=z=>{const X=new zr(z.getProvider("app").getImmediate(),z.getProvider("installations-internal").getImmediate(),z.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",_e=>function Ho(z,X){return To.apply(this,arguments)}(X,_e)),X},ma=z=>{const X=z.getProvider("messaging").getImmediate();return{getToken:$e=>function Wr(z,X){return Pi.apply(this,arguments)}(X,$e)}};function yu(){return il.apply(this,arguments)}function il(){return(il=(0,re.Z)(function*(){try{yield(0,De.eu)()}catch{return!1}return typeof window<"u"&&(0,De.hl)()&&(0,De.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function io(){(0,Oe._registerComponent)(new ke.wA("messaging",au,"PUBLIC")),(0,Oe._registerComponent)(new ke.wA("messaging-internal",ma,"PRIVATE")),(0,Oe.registerVersion)(pa,"0.12.4"),(0,Oe.registerVersion)(pa,"0.12.4","esm2017")}();const Pu="analytics",so="firebase_id",gs="origin",us=6e4,$a="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Mo="https://www.googletagmanager.com/gtag/js",lo=new Ge.Yd("@firebase/analytics");function za(z){return Promise.all(z.map(X=>X.catch(_e=>_e)))}function sa(){return(sa=(0,re.Z)(function*(z,X,_e,$e,It,Vt){const vn=$e[It];try{if(vn)yield X[vn];else{const _r=(yield za(_e)).find(hr=>hr.measurementId===It);_r&&(yield X[_r.appId])}}catch(ir){lo.error(ir)}z("config",It,Vt)})).apply(this,arguments)}function V(){return(V=(0,re.Z)(function*(z,X,_e,$e,It){try{let Vt=[];if(It&&It.send_to){let vn=It.send_to;Array.isArray(vn)||(vn=[vn]);const ir=yield za(_e);for(const _r of vn){const hr=ir.find(Qr=>Qr.measurementId===_r),Yr=hr&&X[hr.appId];if(!Yr){Vt=[];break}Vt.push(Yr)}}0===Vt.length&&(Vt=Object.values(X)),yield Promise.all(Vt),z("event",$e,It||{})}catch(Vt){lo.error(Vt)}})).apply(this,arguments)}const Ft=new De.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),qt=30,Ii=new class Nr{constructor(X={},_e=1e3){this.throttleMetadata=X,this.intervalMillis=_e}getThrottleMetadata(X){return this.throttleMetadata[X]}setThrottleMetadata(X,_e){this.throttleMetadata[X]=_e}deleteThrottleMetadata(X){delete this.throttleMetadata[X]}};function Bi(z){return new Headers({Accept:"application/json","x-goog-api-key":z})}function si(){return(si=(0,re.Z)(function*(z){var X;const{appId:_e,apiKey:$e}=z,It={method:"GET",headers:Bi($e)},Vt=$a.replace("{app-id}",_e),vn=yield fetch(Vt,It);if(200!==vn.status&&304!==vn.status){let ir="";try{const _r=yield vn.json();null!==(X=_r.error)&&void 0!==X&&X.message&&(ir=_r.error.message)}catch{}throw Ft.create("config-fetch-failed",{httpStatus:vn.status,responseMessage:ir})}return vn.json()})).apply(this,arguments)}function Mi(){return(Mi=(0,re.Z)(function*(z,X=Ii,_e){const{appId:$e,apiKey:It,measurementId:Vt}=z.options;if(!$e)throw Ft.create("no-app-id");if(!It){if(Vt)return{measurementId:Vt,appId:$e};throw Ft.create("no-api-key")}const vn=X.getThrottleMetadata($e)||{backoffCount:0,throttleEndTimeMillis:Date.now()},ir=new Bt;return setTimeout((0,re.Z)(function*(){ir.abort()}),void 0!==_e?_e:us),Fn({appId:$e,apiKey:It,measurementId:Vt},vn,ir,X)})).apply(this,arguments)}function Fn(z,X,_e){return Vn.apply(this,arguments)}function Vn(){return Vn=(0,re.Z)(function*(z,{throttleEndTimeMillis:X,backoffCount:_e},$e,It=Ii){var Vt;const{appId:vn,measurementId:ir}=z;try{yield function Kr(z,X){return new Promise((_e,$e)=>{const It=Math.max(X-Date.now(),0),Vt=setTimeout(_e,It);z.addEventListener(()=>{clearTimeout(Vt),$e(Ft.create("fetch-throttle",{throttleEndTimeMillis:X}))})})}($e,X)}catch(_r){if(ir)return lo.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${ir} provided in the "measurementId" field in the local Firebase config. [${_r?.message}]`),{appId:vn,measurementId:ir};throw _r}try{const _r=yield function Kt(z){return si.apply(this,arguments)}(z);return It.deleteThrottleMetadata(vn),_r}catch(_r){const hr=_r;if(!function Cn(z){if(!(z instanceof De.ZR&&z.customData))return!1;const X=Number(z.customData.httpStatus);return 429===X||500===X||503===X||504===X}(hr)){if(It.deleteThrottleMetadata(vn),ir)return lo.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${ir} provided in the "measurementId" field in the local Firebase config. [${hr?.message}]`),{appId:vn,measurementId:ir};throw _r}const Yr=503===Number(null===(Vt=hr?.customData)||void 0===Vt?void 0:Vt.httpStatus)?(0,De.$s)(_e,It.intervalMillis,qt):(0,De.$s)(_e,It.intervalMillis),Qr={throttleEndTimeMillis:Date.now()+Yr,backoffCount:_e+1};return It.setThrottleMetadata(vn,Qr),lo.debug(`Calling attemptFetch again in ${Yr} millis`),Fn(z,Qr,$e,It)}}),Vn.apply(this,arguments)}class Bt{constructor(){this.listeners=[]}addEventListener(X){this.listeners.push(X)}abort(){this.listeners.forEach(X=>X())}}let un,Wa;function Ma(){return(Ma=(0,re.Z)(function*(z,X,_e,$e,It){if(It&&It.global)z("event",_e,$e);else{const Vt=yield X;z("event",_e,Object.assign(Object.assign({},$e),{send_to:Vt}))}})).apply(this,arguments)}function Oo(){return(Oo=(0,re.Z)(function*(){if(!(0,De.hl)())return lo.warn(Ft.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,De.eu)()}catch(z){return lo.warn(Ft.create("indexeddb-unavailable",{errorInfo:z?.toString()}).message),!1}return!0})).apply(this,arguments)}function ur(){return ur=(0,re.Z)(function*(z,X,_e,$e,It,Vt,vn){var ir;const _r=function gr(z){return Mi.apply(this,arguments)}(z);_r.then($s=>{_e[$s.measurementId]=$s.appId,z.options.measurementId&&$s.measurementId!==z.options.measurementId&&lo.warn(`The measurement ID in the local Firebase config (${z.options.measurementId}) does not match the measurement ID fetched from the server (${$s.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch($s=>lo.error($s)),X.push(_r);const hr=function Ru(){return Oo.apply(this,arguments)}().then($s=>{if($s)return $e.getId()}),[Yr,Qr]=yield Promise.all([_r,hr]);(function Ee(z){const X=window.document.getElementsByTagName("script");for(const _e of Object.values(X))if(_e.src&&_e.src.includes(Mo)&&_e.src.includes(z))return _e;return null})(Vt)||function Mu(z,X){const _e=document.createElement("script");_e.src=`${Mo}?l=${z}&id=${X}`,_e.async=!0,document.head.appendChild(_e)}(Vt,Yr.measurementId),Wa&&(It("consent","default",Wa),function ku(z){Wa=z}(void 0)),It("js",new Date);const _a=null!==(ir=vn?.config)&&void 0!==ir?ir:{};return _a[gs]="firebase",_a.update=!0,null!=Qr&&(_a[so]=Qr),It("config",Yr.measurementId,_a),un&&(It("set",un),function Mr(z){un=z}(void 0)),Yr.measurementId}),ur.apply(this,arguments)}class Wu{constructor(X){this.app=X}_delete(){return delete Ur[this.app.options.appId],Promise.resolve()}}let Ur={},qa=[];const _s={};let Nu,$o,Mn="dataLayer",al="gtag",Is=!1;function ul(z,X,_e){!function qu(){const z=[];if((0,De.ru)()&&z.push("This is a browser extension environment."),(0,De.zI)()||z.push("Cookies are not available."),z.length>0){const X=z.map(($e,It)=>`(${It+1}) ${$e}`).join(" "),_e=Ft.create("invalid-analytics-context",{errorInfo:X});lo.warn(_e.message)}}();const $e=z.options.appId;if(!$e)throw Ft.create("no-app-id");if(!z.options.apiKey){if(!z.options.measurementId)throw Ft.create("no-api-key");lo.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${z.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=Ur[$e])throw Ft.create("already-exists",{id:$e});if(!Is){!function Mc(z){let X=[];Array.isArray(window[z])?X=window[z]:window[z]=X}(Mn);const{wrappedGtag:Vt,gtagCore:vn}=function W(z,X,_e,$e,It){let Vt=function(...vn){window[$e].push(arguments)};return window[It]&&"function"==typeof window[It]&&(Vt=window[It]),window[It]=function oe(z,X,_e,$e){function Vt(){return Vt=(0,re.Z)(function*(vn,ir,_r){try{"event"===vn?yield function va(z,X,_e,$e,It){return V.apply(this,arguments)}(z,X,_e,ir,_r):"config"===vn?yield function Ou(z,X,_e,$e,It,Vt){return sa.apply(this,arguments)}(z,X,_e,$e,ir,_r):"consent"===vn?z("consent","update",_r):z("set",ir)}catch(hr){lo.error(hr)}}),Vt.apply(this,arguments)}return function It(vn,ir,_r){return Vt.apply(this,arguments)}}(Vt,z,X,_e),{gtagCore:Vt,wrappedGtag:window[It]}}(Ur,qa,_s,Mn,al);$o=Vt,Nu=vn,Is=!0}return Ur[$e]=function zi(z,X,_e,$e,It,Vt,vn){return ur.apply(this,arguments)}(z,qa,_s,X,Nu,Mn,_e),new Wu(z)}function xs(){return cu.apply(this,arguments)}function cu(){return(cu=(0,re.Z)(function*(){if((0,De.ru)()||!(0,De.zI)()||!(0,De.hl)())return!1;try{return yield(0,De.eu)()}catch{return!1}})).apply(this,arguments)}const fi="@firebase/analytics";!function Ya(){(0,Oe._registerComponent)(new ke.wA(Pu,(X,{options:_e})=>ul(X.getProvider("app").getImmediate(),X.getProvider("installations-internal").getImmediate(),_e),"PUBLIC")),(0,Oe._registerComponent)(new ke.wA("analytics-internal",function z(X){try{const _e=X.getProvider(Pu).getImmediate();return{logEvent:($e,It,Vt)=>function Oc(z,X,_e,$e){z=(0,De.m9)(z),function Oi(z,X,_e,$e,It){return Ma.apply(this,arguments)}($o,Ur[z.app.options.appId],X,_e,$e).catch(It=>lo.error(It))}(_e,$e,It,Vt)}}catch(_e){throw Ft.create("interop-component-reg-failed",{reason:_e})}},"PRIVATE")),(0,Oe.registerVersion)(fi,"0.9.4"),(0,Oe.registerVersion)(fi,"0.9.4","esm2017")}();var cc=K(4408),fd=K(7565);const Ds=new class Eo extends fd.v{}(class Pl extends cc.o{constructor(X,_e){super(X,_e),this.scheduler=X,this.work=_e}schedule(X,_e=0){return _e>0?super.schedule(X,_e):(this.delay=_e,this.state=X,this.scheduler.flush(this),this)}execute(X,_e){return _e>0||this.closed?super.execute(X,_e):this._execute(X,_e)}requestAsyncId(X,_e,$e=0){return null!=$e&&$e>0||null==$e&&this.delay>0?super.requestAsyncId(X,_e,$e):(X.flush(this),0)}});var ya=K(4986),oo=K(8505),$i=K(5363),Zu=K(9468);const Ra=new E.GfV("7.5.0"),Tu="__angularfire_symbol__analyticsIsSupportedValue",zo="__angularfire_symbol__analyticsIsSupported",co="__angularfire_symbol__remoteConfigIsSupportedValue",Yu="__angularfire_symbol__remoteConfigIsSupported",du="__angularfire_symbol__messagingIsSupportedValue",Qa="__angularfire_symbol__messagingIsSupported";function Q(z,X,_e){if(X){if(1===X.length)return X[0];const Vt=X.filter(vn=>vn.app===_e);if(1===Vt.length)return Vt[0]}return _e.container.getProvider(z).getImmediate({optional:!0})}globalThis[zo]||(globalThis[zo]=xs().then(z=>globalThis[Tu]=z).catch(()=>globalThis[Tu]=!1)),globalThis[Qa]||(globalThis[Qa]=yu().then(z=>globalThis[du]=z).catch(()=>globalThis[du]=!1)),globalThis[Yu]||(globalThis[Yu]=vo().then(z=>globalThis[co]=z).catch(()=>globalThis[co]=!1));const pe=(z,X)=>{const _e=X?[X]:(0,M.C6)(),$e=[];return _e.forEach(It=>{It.container.getProvider(z).instances.forEach(vn=>{$e.includes(vn)||$e.push(vn)})}),$e};function ve(){}class _t{constructor(X,_e=Ds){this.zone=X,this.delegate=_e}now(){return this.delegate.now()}schedule(X,_e,$e){const It=this.zone;return this.delegate.schedule(function(vn){It.runGuarded(()=>{X.apply(this,[vn])})},_e,$e)}}class Wt{constructor(X){this.zone=X,this.task=null}call(X,_e){const $e=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",ve,{},ve,ve)),_e.pipe((0,oo.b)({next:$e,complete:$e,error:$e})).subscribe(X).add($e)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let zn=(()=>{class z{constructor(_e){this.ngZone=_e,this.outsideAngular=_e.runOutsideAngular(()=>new _t(Zone.current)),this.insideAngular=_e.run(()=>new _t(Zone.current,ya.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return z.\u0275fac=function(_e){return new(_e||z)(E.LFG(E.R0b))},z.\u0275prov=E.Yz7({token:z,factory:z.\u0275fac,providedIn:"root"}),z})();function jn(){const z=globalThis.\u0275AngularFireScheduler;if(!z)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return z}function dn(z){return z.pipe((0,$i.Q)(jn().outsideAngular))}function Qo(z){return jn(),function Fs(z){return function(_e){return(_e=_e.lift(new Wt(z.ngZone))).pipe((0,Zu.R)(z.outsideAngular),(0,$i.Q)(z.insideAngular))}}(jn())(z)}},2090:(Qt,it,K)=>{"use strict";K.d(it,{$s:()=>tr,BH:()=>Et,G6:()=>ot,L:()=>Ke,LL:()=>Ot,Pz:()=>Me,Sg:()=>Mt,UG:()=>he,US:()=>ke,ZB:()=>Re,ZR:()=>_n,aH:()=>Fe,b$:()=>st,eu:()=>gt,hl:()=>lt,jU:()=>Ne,m9:()=>Jr,ne:()=>er,pd:()=>gi,r3:()=>kr,ru:()=>mt,tV:()=>Ie,uI:()=>J,vZ:()=>Ar,w1:()=>Xe,xO:()=>Hr,xb:()=>fr,z$:()=>St,zI:()=>Nt,zd:()=>pr});const Oe=function(tt){const Ze=[];let ht=0;for(let $t=0;$t<tt.length;$t++){let Rt=tt.charCodeAt($t);Rt<128?Ze[ht++]=Rt:Rt<2048?(Ze[ht++]=Rt>>6|192,Ze[ht++]=63&Rt|128):55296==(64512&Rt)&&$t+1<tt.length&&56320==(64512&tt.charCodeAt($t+1))?(Rt=65536+((1023&Rt)<<10)+(1023&tt.charCodeAt(++$t)),Ze[ht++]=Rt>>18|240,Ze[ht++]=Rt>>12&63|128,Ze[ht++]=Rt>>6&63|128,Ze[ht++]=63&Rt|128):(Ze[ht++]=Rt>>12|224,Ze[ht++]=Rt>>6&63|128,Ze[ht++]=63&Rt|128)}return Ze},ke={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(tt,Ze){if(!Array.isArray(tt))throw Error("encodeByteArray takes an array as a parameter");this.init_();const ht=Ze?this.byteToCharMapWebSafe_:this.byteToCharMap_,$t=[];for(let Rt=0;Rt<tt.length;Rt+=3){const fn=tt[Rt],Xn=Rt+1<tt.length,oi=Xn?tt[Rt+1]:0,de=Rt+2<tt.length,we=de?tt[Rt+2]:0;let ge=(15&oi)<<2|we>>6,Ye=63&we;de||(Ye=64,Xn||(ge=64)),$t.push(ht[fn>>2],ht[(3&fn)<<4|oi>>4],ht[ge],ht[Ye])}return $t.join("")},encodeString(tt,Ze){return this.HAS_NATIVE_SUPPORT&&!Ze?btoa(tt):this.encodeByteArray(Oe(tt),Ze)},decodeString(tt,Ze){return this.HAS_NATIVE_SUPPORT&&!Ze?atob(tt):function(tt){const Ze=[];let ht=0,$t=0;for(;ht<tt.length;){const Rt=tt[ht++];if(Rt<128)Ze[$t++]=String.fromCharCode(Rt);else if(Rt>191&&Rt<224){const fn=tt[ht++];Ze[$t++]=String.fromCharCode((31&Rt)<<6|63&fn)}else if(Rt>239&&Rt<365){const de=((7&Rt)<<18|(63&tt[ht++])<<12|(63&tt[ht++])<<6|63&tt[ht++])-65536;Ze[$t++]=String.fromCharCode(55296+(de>>10)),Ze[$t++]=String.fromCharCode(56320+(1023&de))}else{const fn=tt[ht++],Xn=tt[ht++];Ze[$t++]=String.fromCharCode((15&Rt)<<12|(63&fn)<<6|63&Xn)}}return Ze.join("")}(this.decodeStringToByteArray(tt,Ze))},decodeStringToByteArray(tt,Ze){this.init_();const ht=Ze?this.charToByteMapWebSafe_:this.charToByteMap_,$t=[];for(let Rt=0;Rt<tt.length;){const fn=ht[tt.charAt(Rt++)],oi=Rt<tt.length?ht[tt.charAt(Rt)]:0;++Rt;const we=Rt<tt.length?ht[tt.charAt(Rt)]:64;++Rt;const Te=Rt<tt.length?ht[tt.charAt(Rt)]:64;if(++Rt,null==fn||null==oi||null==we||null==Te)throw new Ge;$t.push(fn<<2|oi>>4),64!==we&&($t.push(oi<<4&240|we>>2),64!==Te&&$t.push(we<<6&192|Te))}return $t},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let tt=0;tt<this.ENCODED_VALS.length;tt++)this.byteToCharMap_[tt]=this.ENCODED_VALS.charAt(tt),this.charToByteMap_[this.byteToCharMap_[tt]]=tt,this.byteToCharMapWebSafe_[tt]=this.ENCODED_VALS_WEBSAFE.charAt(tt),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[tt]]=tt,tt>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(tt)]=tt,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(tt)]=tt)}}};class Ge extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Ke=function(tt){return function(tt){const Ze=Oe(tt);return ke.encodeByteArray(Ze,!0)}(tt).replace(/\./g,"")},Ie=function(tt){try{return ke.decodeString(tt,!0)}catch(Ze){console.error("base64Decode failed: ",Ze)}return null};function Re(tt,Ze){if(!(Ze instanceof Object))return Ze;switch(Ze.constructor){case Date:return new Date(Ze.getTime());case Object:void 0===tt&&(tt={});break;case Array:tt=[];break;default:return Ze}for(const ht in Ze)!Ze.hasOwnProperty(ht)||!yt(ht)||(tt[ht]=Re(tt[ht],Ze[ht]));return tt}function yt(tt){return"__proto__"!==tt}const nt=()=>{try{return function ae(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const tt=process.env.__FIREBASE_DEFAULTS__;return tt?JSON.parse(tt):void 0})()||(()=>{if(typeof document>"u")return;let tt;try{tt=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const Ze=tt&&Ie(tt[1]);return Ze&&JSON.parse(Ze)})()}catch(tt){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${tt}`)}},Fe=()=>{var tt;return null===(tt=nt())||void 0===tt?void 0:tt.config},Me=tt=>{var Ze;return null===(Ze=nt())||void 0===Ze?void 0:Ze[`_${tt}`]};class Et{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((Ze,ht)=>{this.resolve=Ze,this.reject=ht})}wrapCallback(Ze){return(ht,$t)=>{ht?this.reject(ht):this.resolve($t),"function"==typeof Ze&&(this.promise.catch(()=>{}),1===Ze.length?Ze(ht):Ze(ht,$t))}}}function Mt(tt,Ze){if(tt.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const $t=Ze||"demo-project",Rt=tt.iat||0,fn=tt.sub||tt.user_id;if(!fn)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const Xn=Object.assign({iss:`https://securetoken.google.com/${$t}`,aud:$t,iat:Rt,exp:Rt+3600,auth_time:Rt,sub:fn,user_id:fn,firebase:{sign_in_provider:"custom",identities:{}}},tt);return[Ke(JSON.stringify({alg:"none",type:"JWT"})),Ke(JSON.stringify(Xn)),""].join(".")}function St(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function J(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(St())}function he(){var tt;const Ze=null===(tt=nt())||void 0===tt?void 0:tt.forceEnvironment;if("node"===Ze)return!0;if("browser"===Ze)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function Ne(){return"object"==typeof self&&self.self===self}function mt(){const tt="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof tt&&void 0!==tt.id}function st(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function Xe(){const tt=St();return tt.indexOf("MSIE ")>=0||tt.indexOf("Trident/")>=0}function ot(){return!he()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function lt(){try{return"object"==typeof indexedDB}catch{return!1}}function gt(){return new Promise((tt,Ze)=>{try{let ht=!0;const $t="validate-browser-context-for-indexeddb-analytics-module",Rt=self.indexedDB.open($t);Rt.onsuccess=()=>{Rt.result.close(),ht||self.indexedDB.deleteDatabase($t),tt(!0)},Rt.onupgradeneeded=()=>{ht=!1},Rt.onerror=()=>{var fn;Ze((null===(fn=Rt.error)||void 0===fn?void 0:fn.message)||"")}}catch(ht){Ze(ht)}})}function Nt(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}class _n extends Error{constructor(Ze,ht,$t){super(ht),this.code=Ze,this.customData=$t,this.name="FirebaseError",Object.setPrototypeOf(this,_n.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ot.prototype.create)}}class Ot{constructor(Ze,ht,$t){this.service=Ze,this.serviceName=ht,this.errors=$t}create(Ze,...ht){const $t=ht[0]||{},Rt=`${this.service}/${Ze}`,fn=this.errors[Ze],Xn=fn?function rn(tt,Ze){return tt.replace(zt,(ht,$t)=>{const Rt=Ze[$t];return null!=Rt?String(Rt):`<${$t}?>`})}(fn,$t):"Error";return new _n(Rt,`${this.serviceName}: ${Xn} (${Rt}).`,$t)}}const zt=/\{\$([^}]+)}/g;function kr(tt,Ze){return Object.prototype.hasOwnProperty.call(tt,Ze)}function fr(tt){for(const Ze in tt)if(Object.prototype.hasOwnProperty.call(tt,Ze))return!1;return!0}function Ar(tt,Ze){if(tt===Ze)return!0;const ht=Object.keys(tt),$t=Object.keys(Ze);for(const Rt of ht){if(!$t.includes(Rt))return!1;const fn=tt[Rt],Xn=Ze[Rt];if(Tn(fn)&&Tn(Xn)){if(!Ar(fn,Xn))return!1}else if(fn!==Xn)return!1}for(const Rt of $t)if(!ht.includes(Rt))return!1;return!0}function Tn(tt){return null!==tt&&"object"==typeof tt}function Hr(tt){const Ze=[];for(const[ht,$t]of Object.entries(tt))Array.isArray($t)?$t.forEach(Rt=>{Ze.push(encodeURIComponent(ht)+"="+encodeURIComponent(Rt))}):Ze.push(encodeURIComponent(ht)+"="+encodeURIComponent($t));return Ze.length?"&"+Ze.join("&"):""}function pr(tt){const Ze={};return tt.replace(/^\?/,"").split("&").forEach($t=>{if($t){const[Rt,fn]=$t.split("=");Ze[decodeURIComponent(Rt)]=decodeURIComponent(fn)}}),Ze}function gi(tt){const Ze=tt.indexOf("?");if(!Ze)return"";const ht=tt.indexOf("#",Ze);return tt.substring(Ze,ht>0?ht:void 0)}function er(tt,Ze){const ht=new Wn(tt,Ze);return ht.subscribe.bind(ht)}class Wn{constructor(Ze,ht){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=ht,this.task.then(()=>{Ze(this)}).catch($t=>{this.error($t)})}next(Ze){this.forEachObserver(ht=>{ht.next(Ze)})}error(Ze){this.forEachObserver(ht=>{ht.error(Ze)}),this.close(Ze)}complete(){this.forEachObserver(Ze=>{Ze.complete()}),this.close()}subscribe(Ze,ht,$t){let Rt;if(void 0===Ze&&void 0===ht&&void 0===$t)throw new Error("Missing Observer.");Rt=function Us(tt,Ze){if("object"!=typeof tt||null===tt)return!1;for(const ht of Ze)if(ht in tt&&"function"==typeof tt[ht])return!0;return!1}(Ze,["next","error","complete"])?Ze:{next:Ze,error:ht,complete:$t},void 0===Rt.next&&(Rt.next=Lr),void 0===Rt.error&&(Rt.error=Lr),void 0===Rt.complete&&(Rt.complete=Lr);const fn=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?Rt.error(this.finalError):Rt.complete()}catch{}}),this.observers.push(Rt),fn}unsubscribeOne(Ze){void 0===this.observers||void 0===this.observers[Ze]||(delete this.observers[Ze],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(Ze){if(!this.finalized)for(let ht=0;ht<this.observers.length;ht++)this.sendOne(ht,Ze)}sendOne(Ze,ht){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[Ze])try{ht(this.observers[Ze])}catch($t){typeof console<"u"&&console.error&&console.error($t)}})}close(Ze){this.finalized||(this.finalized=!0,void 0!==Ze&&(this.finalError=Ze),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Lr(){}const kn=1e3,mn=2,Xt=144e5,yn=.5;function tr(tt,Ze=kn,ht=mn){const $t=Ze*Math.pow(ht,tt),Rt=Math.round(yn*$t*(Math.random()-.5)*2);return Math.min(Xt,$t+Rt)}function Jr(tt){return tt&&tt._delegate?tt._delegate:tt}},4411:(Qt,it,K)=>{"use strict";K.d(it,{Y:()=>Pe});var E=K(5861),M=K(3900),re=K(4004),Oe=K(9841),De=K(9646),ke=K(4650),Ge=K(2095),He=K(1205),Ke=K(377),Ie=K(9062);class Pe{constructor(yt,ae,Pt,et){this.db=yt,this.auth=ae,this.storage=Pt,this.router=et,this.pageClips=[],this.pendingReq=!1,this.clipsCollection=yt.collection("clipz")}createClip(yt){return console.log(yt,"data"),this.clipsCollection.add(yt)}getUserClips(yt){return(0,Oe.a)([this.auth.user,yt]).pipe((0,M.w)(ae=>{const[Pt,et]=ae;return Pt?this.clipsCollection.ref.where("uid","==",Pt.uid).orderBy("timestamp","1"===et?"desc":"asc").get():(0,De.of)([])}),(0,re.U)(ae=>ae.docs))}updateClip(yt,ae){return this.clipsCollection.doc(yt).update({title:ae})}deleteClip(yt){var ae=this;return(0,E.Z)(function*(){const Pt=ae.storage.ref(`clipz/${yt.fileName}`),et=ae.storage.ref(`screenshots/${yt.screenshotFileName}`);yield Pt.delete(),yield et.delete(),ae.clipsCollection.doc(yt.docID).delete()})()}getClips(){var yt=this;return(0,E.Z)(function*(){if(yt.pendingReq)return;yt.pendingReq=!0;let ae=yt.clipsCollection.ref.orderBy("timestamp","desc").limit(6);const{length:Pt}=yt.pageClips;if(Pt){const at=yt.pageClips[Pt-1].docID,nt=yield yt.clipsCollection.doc(at).get().toPromise();ae=ae.startAfter(nt)}(yield ae.get()).forEach(at=>{yt.pageClips.push({docID:at.id,...at.data()})}),yt.pendingReq=!1})()}resolve(yt,ae){return this.clipsCollection.doc(yt.params.id).get().pipe((0,re.U)(Pt=>Pt.data()||(this.router.navigate(["/"]),null)))}}Pe.\u0275fac=function(yt){return new(yt||Pe)(ke.LFG(Ge.ST),ke.LFG(He.zQ),ke.LFG(Ke.Q1),ke.LFG(Ie.F0))},Pe.\u0275prov=ke.Yz7({token:Pe,factory:Pe.\u0275fac,providedIn:"root"})},1609:(Qt,it,K)=>{"use strict";K.d(it,{Z:()=>M});var E=K(4650);class M{constructor(){this.modals=[]}register(Oe){this.modals.push({id:Oe,visible:!1})}unregister(Oe){this.modals=this.modals.filter(De=>De.id!==Oe)}isModalOpen(Oe){return!!this.modals.find(De=>De.id===Oe)?.visible}toggleModal(Oe){const De=this.modals.find(ke=>ke.id===Oe);De&&(De.visible=!De.visible)}}M.\u0275fac=function(Oe){return new(Oe||M)},M.\u0275prov=E.Yz7({token:M,factory:M.\u0275fac,providedIn:"root"})},8549:(Qt,it,K)=>{"use strict";K.d(it,{w:()=>Oe});var E=K(4650),M=K(6895);class Oe{constructor(){this.color="blue"}get bgColor(){return`bg-${this.color}-400`}}Oe.\u0275fac=function(ke){return new(ke||Oe)},Oe.\u0275cmp=E.Xpm({type:Oe,selectors:[["app-alert"]],inputs:{color:"color"},ngContentSelectors:["*"],decls:2,vars:1,consts:[[1,"text-white","text-center","font-bold","p-4","mb-4","rounded-mb",3,"ngClass"]],template:function(ke,Ge){1&ke&&(E.F$t(),E.TgZ(0,"div",0),E.Hsn(1),E.qZA()),2&ke&&E.Q6J("ngClass",Ge.bgColor)},dependencies:[M.mk]})},235:(Qt,it,K)=>{"use strict";K.d(it,{a:()=>ae});var E=K(4006),M=K(4650),re=K(6895);function Oe(Pt,et){1&Pt&&(M.TgZ(0,"p",3),M._uU(1," Password must be at least 8 characters long, have 1 uppercase letter, 1 lowercase letter, and 1 numbaer. "),M.qZA())}function De(Pt,et){1&Pt&&(M.TgZ(0,"p",3),M._uU(1," required. "),M.qZA())}function ke(Pt,et){if(1&Pt&&(M.TgZ(0,"p",3),M._uU(1),M.qZA()),2&Pt){const at=M.oxw(2);M.xp6(1),M.AsE(" The value you inputted is ",null==at.control.errors?null:at.control.errors.minlength.actualLength," characters long. It must be at least ",null==at.control.errors?null:at.control.errors.minlength.requiredLength," characters.long. ")}}function Ge(Pt,et){1&Pt&&(M.TgZ(0,"p",3),M._uU(1," You must enter a valid email. "),M.qZA())}function He(Pt,et){1&Pt&&(M.TgZ(0,"p",3),M._uU(1," Age cannot be less than 18. "),M.qZA())}function Ke(Pt,et){1&Pt&&(M.TgZ(0,"p",3),M._uU(1," Age cannot be greater than 99. "),M.qZA())}function Ie(Pt,et){1&Pt&&(M.TgZ(0,"p",3),M._uU(1," You must enter a valid phoneNumber. "),M.qZA())}function Pe(Pt,et){1&Pt&&(M.TgZ(0,"p",3),M._uU(1," Passwords do not match. "),M.qZA())}function Re(Pt,et){1&Pt&&(M.TgZ(0,"p",3),M._uU(1," Email taken. Please try another email. "),M.qZA())}function yt(Pt,et){if(1&Pt&&(M.ynx(0),M.YNc(1,Oe,2,0,"p",2),M.YNc(2,De,2,0,"p",2),M.YNc(3,ke,2,2,"p",2),M.YNc(4,Ge,2,0,"p",2),M.YNc(5,He,2,0,"p",2),M.YNc(6,Ke,2,0,"p",2),M.YNc(7,Ie,2,0,"p",2),M.YNc(8,Pe,2,0,"p",2),M.YNc(9,Re,2,0,"p",2),M.BQk()),2&Pt){const at=M.oxw();M.xp6(1),M.Q6J("ngIf",null==at.control.errors?null:at.control.errors.pattern),M.xp6(1),M.Q6J("ngIf",null==at.control.errors?null:at.control.errors.required),M.xp6(1),M.Q6J("ngIf",null==at.control.errors?null:at.control.errors.minlength),M.xp6(1),M.Q6J("ngIf",null==at.control.errors?null:at.control.errors.email),M.xp6(1),M.Q6J("ngIf",null==at.control.errors?null:at.control.errors.min),M.xp6(1),M.Q6J("ngIf",null==at.control.errors?null:at.control.errors.max),M.xp6(1),M.Q6J("ngIf",null==at.control.errors?null:at.control.errors.maxlength),M.xp6(1),M.Q6J("ngIf",null==at.control.errors?null:at.control.errors.noMatch),M.xp6(1),M.Q6J("ngIf",null==at.control.errors?null:at.control.errors.emailTaken)}}class ae{constructor(){this.control=new E.NI,this.type="text",this.placeholder=""}}ae.\u0275fac=function(et){return new(et||ae)},ae.\u0275cmp=M.Xpm({type:ae,selectors:[["app-input"]],inputs:{control:"control",type:"type",placeholder:"placeholder"},decls:2,vars:4,consts:[[1,"block","w-full","py-1.5","px-3","text-gray-200","border","border-gray-400","transition","duration-500","focus:outline-none","rounded","bg-transparent","focus:border-indigo-400",3,"type","formControl","placeholder"],[4,"ngIf"],["class","text-red-400",4,"ngIf"],[1,"text-red-400"]],template:function(et,at){1&et&&(M._UZ(0,"input",0),M.YNc(1,yt,10,9,"ng-container",1)),2&et&&(M.Q6J("type",at.type)("formControl",at.control)("placeholder",at.placeholder),M.xp6(1),M.Q6J("ngIf",at.control.touched&&at.control.dirty))},dependencies:[re.O5,E.Fj,E.JJ,E.oH]})},3446:(Qt,it,K)=>{"use strict";K.d(it,{z:()=>Ge});var E=K(4650),M=K(1609),re=K(6895);const Oe=[[["","heading",""]],"*"],De=function(He){return{hidden:He}};class Ge{constructor(Ke,Ie){this.modal=Ke,this.el=Ie,this.modalId=""}ngOnInit(){document.body.appendChild(this.el.nativeElement)}ngOnDestroy(){document.body.removeChild(this.el.nativeElement)}closeModal(){this.modal.toggleModal(this.modalId)}}Ge.\u0275fac=function(Ke){return new(Ke||Ge)(E.Y36(M.Z),E.Y36(E.SBq))},Ge.\u0275cmp=E.Xpm({type:Ge,selectors:[["app-modal"]],inputs:{modalId:"modalId"},ngContentSelectors:["[heading]","*"],decls:13,vars:3,consts:[["id","modal",1,"fixed","z-50","inset-0","overflow-y-auto",3,"ngClass"],[1,"flex","items-end","justify-center","min-h-screen","pt-4","px-4","pb-20","text-center","sm:block","sm:p-0"],[1,"fixed","inset-0","transition-opacity",3,"click"],[1,"absolute","inset-0","bg-gray-800","opacity-75"],[1,"hidden","sm:inline-block","sm:align-middle","sm:h-screen"],[1,"inline-block","align-bottom","bg-secondary","rounded-lg","text-left","overflow-hidden","shadow-xl","transform","transition-all","sm:my-8","sm:align-middle","sm:max-w-lg","sm:w-full"],[1,"py-4","text-left","px-6"],[1,"flex","justify-between","items-center","pb-4"],[1,"modal-close","cursor-pointer","z-50",3,"click"]],template:function(Ke,Ie){1&Ke&&(E.F$t(Oe),E.TgZ(0,"div",0)(1,"div",1)(2,"div",2),E.NdJ("click",function(){return Ie.closeModal()}),E._UZ(3,"div",3),E.qZA(),E.TgZ(4,"span",4),E._uU(5,"\u200b"),E.qZA(),E.TgZ(6,"div",5)(7,"div",6)(8,"div",7),E.Hsn(9),E.TgZ(10,"div",8),E.NdJ("click",function(){return Ie.closeModal()}),E._uU(11," \u2715 "),E.qZA()(),E.Hsn(12,1),E.qZA()()()()),2&Ke&&E.Q6J("ngClass",E.VKq(1,De,!Ie.modal.isModalOpen(Ie.modalId)))},dependencies:[re.mk]})},4466:(Qt,it,K)=>{"use strict";K.d(it,{m:()=>Oe});var E=K(6895),M=K(4006),re=K(4650);class Oe{}Oe.\u0275fac=function(ke){return new(ke||Oe)},Oe.\u0275mod=re.oAB({type:Oe}),Oe.\u0275inj=re.cJS({imports:[E.ez,M.UX]})},7666:(Qt,it,K)=>{"use strict";var E=K(1481),M=K(4650),re=K(5861),Oe=K(9062),De=K(6895),ke=K(4411);class Ge{constructor(i){this.datePipe=i}transform(i){if(!i)return"";const u=i.toDate();return this.datePipe.transform(u,"mediumDate")}}Ge.\u0275fac=function(i){return new(i||Ge)(M.Y36(De.uU,16))},Ge.\u0275pipe=M.Yjl({name:"fbTimestamp",type:Ge,pure:!0});const He=function(g){return["/","clip",g]};function Ke(g,i){if(1&g&&(M.TgZ(0,"a",2),M._UZ(1,"img",3),M.TgZ(2,"div",4)(3,"div",5)(4,"div",6),M.O4$(),M.TgZ(5,"svg",7),M._UZ(6,"path",8),M.qZA()()()(),M.kcU(),M.TgZ(7,"div",9)(8,"h2",10),M._uU(9),M.qZA(),M.TgZ(10,"p",11),M._uU(11),M.TgZ(12,"span",12),M._uU(13),M.ALo(14,"fbTimestamp"),M.qZA()()()()),2&g){const u=i.$implicit;M.Q6J("routerLink",M.VKq(7,He,u.docID)),M.xp6(1),M.Q6J("src",u.screenshotURL,M.LSH),M.xp6(8),M.hij(" ",u.title," "),M.xp6(2),M.hij(" ",u.displayName," \xb7 "),M.xp6(2),M.hij(" ",M.lcZ(14,5,u.timestamp)," ")}}class Ie{constructor(i){this.clipService=i,this.scrollable=!0,this.handleScroll=()=>{const{scrollTop:u,offsetHeight:l}=document.documentElement,{innerHeight:t}=window;Math.round(u)+t===l&&console.log("bottom of window")},this.clipService.getClips()}ngOnInit(){this.scrollable&&window.addEventListener("scroll",this.handleScroll)}ngOnDestroy(){this.scrollable&&window.removeEventListener("scroll",this.handleScroll),this.clipService.pageClips=[]}}Ie.\u0275fac=function(i){return new(i||Ie)(M.Y36(ke.Y))},Ie.\u0275cmp=M.Xpm({type:Ie,selectors:[["app-clips-list"]],inputs:{scrollable:"scrollable"},features:[M._Bn([De.uU])],decls:2,vars:1,consts:[[1,"grid","grid-cols-1","lg:grid-cols-3","gap-4"],["class","mt-6 rounded-tl-2xl rounded-br-2xl shadow-xl bg-secondary transform hover:-translate-y-2 hover:shadow-2xl transition duration-300",3,"routerLink",4,"ngFor","ngForOf"],[1,"mt-6","rounded-tl-2xl","rounded-br-2xl","shadow-xl","bg-secondary","transform","hover:-translate-y-2","hover:shadow-2xl","transition","duration-300",3,"routerLink"],["crossorigin","",1,"card-img-top","rounded-tl-2xl","w-full",3,"src"],[1,"relative"],[1,"absolute","pointer-events-none","bottom-full","w-full","bg-secondary","text-white"],[1,"absolute","bottom-full","w-full","pb-5","overflow-hidden"],["viewBox","0 0 100 50","preserveAspectRatio","none",1,"absolute","bottom-0","w-full","h-full","tranform",2,"transform-origin","top center","transform","scale(2)"],["d","M0 25h25L75 0h25v50H0z","fill","#283046"],[1,"p-8"],[1,"text-3xl","mb-2"],[1,"mb-0"],[1,"text-gray-400"]],template:function(i,u){1&i&&(M.TgZ(0,"div",0),M.YNc(1,Ke,15,9,"a",1),M.qZA()),2&i&&(M.xp6(1),M.Q6J("ngForOf",u.clipService.pageClips))},dependencies:[De.sg,Oe.rH,Ge]});class Pe{}Pe.\u0275fac=function(i){return new(i||Pe)},Pe.\u0275cmp=M.Xpm({type:Pe,selectors:[["app-home"]],decls:20,vars:0,consts:[[1,"relative","overflow-hidden","mb-2"],["autoplay","","muted","","loop","",1,"w-full","h-full","object-cover","absolute","z-0"],["src","assets/video/hero.webm","type","video/webm"],[1,"bg-gradient","absolute","w-full","h-full","z-40","opacity-60"],[1,"w-full","h-full","absolute","z-40"],[1,"cube"],[1,"container","mx-auto","relative","z-50"],[1,"text-center","px-20","py-60","w-full","md:w-8/12","mx-auto"],[1,"text-7xl","font-bold","uppercase","mb-2"],[1,"container","mx-auto"],[1,"uppercase","text-center","text-4xl","grid","mt-20","mb-12","items-center","gap-8","tracking-widest","latest"]],template:function(i,u){1&i&&(M.TgZ(0,"section",0)(1,"video",1),M._UZ(2,"source",2),M.qZA(),M._UZ(3,"div",3),M.TgZ(4,"div",4),M._UZ(5,"div",5)(6,"div",5)(7,"div",5)(8,"div",5)(9,"div",5),M.qZA(),M.TgZ(10,"div",6)(11,"div",7)(12,"h1",8),M._uU(13,"Clip it and ship it!"),M.qZA(),M.TgZ(14,"p"),M._uU(15," The #1 app to watch, clip, and share your awesome gaming moments with your friends and the world! With our world-class tools, we make it incredibly easy to share your videos. Get started today! "),M.qZA()()()(),M.TgZ(16,"section",9)(17,"h1",10),M._uU(18,"Latest"),M.qZA(),M._UZ(19,"app-clips-list"),M.qZA())},dependencies:[Ie]});class Re{}Re.\u0275fac=function(i){return new(i||Re)},Re.\u0275cmp=M.Xpm({type:Re,selectors:[["app-about"]],decls:4,vars:0,consts:[[1,"container","mx-auto","mt-4"]],template:function(i,u){1&i&&(M.TgZ(0,"p",0),M._uU(1," This is a basic about page to demonstrate basic routing capabilities.\n"),M.qZA(),M.TgZ(2,"p"),M._uU(3,"Lorem ipsum dolor sit amet consectetur adipisicing elit. Iure rem nisi blanditiis pariatur laboriosam facilis at aut doloremque voluptatibus, perferendis soluta eveniet laudantium recusandae nobis voluptate dignissimos itaque nostrum quam omnis. Iure, totam accusantium."),M.qZA())}});var yt=K(9226),ae=K.n(yt),Pt=K(1421),et=K.n(Pt);function at(){return at=Object.assign?Object.assign.bind():function(g){for(var i=1;i<arguments.length;i++){var u=arguments[i];for(var l in u)Object.prototype.hasOwnProperty.call(u,l)&&(g[l]=u[l])}return g},at.apply(this,arguments)}var nt=K(1234),We=K.n(nt);function dt(g){if(void 0===g)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return g}function Fe(g,i){return(Fe=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(l,t){return l.__proto__=t,l})(g,i)}function Me(g,i){g.prototype=Object.create(i.prototype),g.prototype.constructor=g,Fe(g,i)}var Et=K(8099),Mt=K.n(Et),St=K(745),J=K.n(St),he=K(3629),Ne=K.n(he);function st(g,i,u){return(st=function mt(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}()?Reflect.construct.bind():function(t,s,h){var v=[null];v.push.apply(v,s);var D=new(Function.bind.apply(t,v));return h&&Fe(D,h.prototype),D}).apply(null,arguments)}var Xe=K(3871),ut=K.n(Xe),Je="http://example.com";const lt=function(i,u){if(/^[a-z]+:/i.test(u))return u;/^data:/.test(i)&&(i=ae().location&&ae().location.href||"");var l="function"==typeof ae().URL,t=/^\/\//.test(i),s=!ae().location&&!/\/\//i.test(i);if(l?i=new(ae().URL)(i,ae().location||Je):/\/\//i.test(i)||(i=ut().buildAbsoluteURL(ae().location&&ae().location.href||"",i)),l){var h=new URL(u,i);return s?h.href.slice(Je.length):t?h.href.slice(h.protocol.length):h.href}return ut().buildAbsoluteURL(i,u)};var gt=function(){function g(){this.listeners={}}var i=g.prototype;return i.on=function(l,t){this.listeners[l]||(this.listeners[l]=[]),this.listeners[l].push(t)},i.off=function(l,t){if(!this.listeners[l])return!1;var s=this.listeners[l].indexOf(t);return this.listeners[l]=this.listeners[l].slice(0),this.listeners[l].splice(s,1),s>-1},i.trigger=function(l){var t=this.listeners[l];if(t)if(2===arguments.length)for(var s=t.length,h=0;h<s;++h)t[h].call(this,arguments[1]);else for(var v=Array.prototype.slice.call(arguments,1),S=t.length,D=0;D<S;++D)t[D].apply(this,v)},i.dispose=function(){this.listeners={}},i.pipe=function(l){this.on("data",function(t){l.push(t)})},g}(),Nt=function(i){return ae().atob?ae().atob(i):Buffer.from(i,"base64").toString("binary")};function jt(g){for(var i=Nt(g),u=new Uint8Array(i.length),l=0;l<i.length;l++)u[l]=i.charCodeAt(l);return u}var g,ws,_n=function(g){function i(){var l;return(l=g.call(this)||this).buffer="",l}return Me(i,g),i.prototype.push=function(t){var s;for(this.buffer+=t,s=this.buffer.indexOf("\n");s>-1;s=this.buffer.indexOf("\n"))this.trigger("data",this.buffer.substring(0,s)),this.buffer=this.buffer.substring(s+1)},i}(gt),Ot=String.fromCharCode(9),rn=function(i){var u=/([0-9.]*)?@?([0-9.]*)?/.exec(i||""),l={};return u[1]&&(l.length=parseInt(u[1],10)),u[2]&&(l.offset=parseInt(u[2],10)),l},bn=function(i){for(var s,u=i.split(new RegExp('(?:^|,)((?:[^=]*)=(?:"[^"]*"|[^,]*))')),l={},t=u.length;t--;)""!==u[t]&&((s=/([^=]*)=(.*)/.exec(u[t]).slice(1))[0]=s[0].replace(/^\s+|\s+$/g,""),s[1]=s[1].replace(/^\s+|\s+$/g,""),s[1]=s[1].replace(/^['"](.*)['"]$/g,"$1"),l[s[0]]=s[1]);return l},dr=function(g){function i(){var l;return(l=g.call(this)||this).customParsers=[],l.tagMappers=[],l}Me(i,g);var u=i.prototype;return u.push=function(t){var h,v,s=this;if(0!==(t=t.trim()).length){if("#"!==t[0])return void this.trigger("data",{type:"uri",uri:t});this.tagMappers.reduce(function(D,F){var ee=F(t);return ee===t?D:D.concat([ee])},[t]).forEach(function(D){for(var F=0;F<s.customParsers.length;F++)if(s.customParsers[F].call(s,D))return;if(0===D.indexOf("#EXT"))if(D=D.replace("\r",""),h=/^#EXTM3U/.exec(D))s.trigger("data",{type:"tag",tagType:"m3u"});else{if(h=/^#EXTINF:?([0-9\.]*)?,?(.*)?$/.exec(D))return v={type:"tag",tagType:"inf"},h[1]&&(v.duration=parseFloat(h[1])),h[2]&&(v.title=h[2]),void s.trigger("data",v);if(h=/^#EXT-X-TARGETDURATION:?([0-9.]*)?/.exec(D))return v={type:"tag",tagType:"targetduration"},h[1]&&(v.duration=parseInt(h[1],10)),void s.trigger("data",v);if(h=/^#EXT-X-VERSION:?([0-9.]*)?/.exec(D))return v={type:"tag",tagType:"version"},h[1]&&(v.version=parseInt(h[1],10)),void s.trigger("data",v);if(h=/^#EXT-X-MEDIA-SEQUENCE:?(\-?[0-9.]*)?/.exec(D))return v={type:"tag",tagType:"media-sequence"},h[1]&&(v.number=parseInt(h[1],10)),void s.trigger("data",v);if(h=/^#EXT-X-DISCONTINUITY-SEQUENCE:?(\-?[0-9.]*)?/.exec(D))return v={type:"tag",tagType:"discontinuity-sequence"},h[1]&&(v.number=parseInt(h[1],10)),void s.trigger("data",v);if(h=/^#EXT-X-PLAYLIST-TYPE:?(.*)?$/.exec(D))return v={type:"tag",tagType:"playlist-type"},h[1]&&(v.playlistType=h[1]),void s.trigger("data",v);if(h=/^#EXT-X-BYTERANGE:?(.*)?$/.exec(D))return v=at(rn(h[1]),{type:"tag",tagType:"byterange"}),void s.trigger("data",v);if(h=/^#EXT-X-ALLOW-CACHE:?(YES|NO)?/.exec(D))return v={type:"tag",tagType:"allow-cache"},h[1]&&(v.allowed=!/NO/.test(h[1])),void s.trigger("data",v);if(h=/^#EXT-X-MAP:?(.*)$/.exec(D)){if(v={type:"tag",tagType:"map"},h[1]){var ee=bn(h[1]);ee.URI&&(v.uri=ee.URI),ee.BYTERANGE&&(v.byterange=rn(ee.BYTERANGE))}s.trigger("data",v)}else if(h=/^#EXT-X-STREAM-INF:?(.*)$/.exec(D)){if(v={type:"tag",tagType:"stream-inf"},h[1]){if(v.attributes=bn(h[1]),v.attributes.RESOLUTION){var Y=v.attributes.RESOLUTION.split("x"),me={};Y[0]&&(me.width=parseInt(Y[0],10)),Y[1]&&(me.height=parseInt(Y[1],10)),v.attributes.RESOLUTION=me}v.attributes.BANDWIDTH&&(v.attributes.BANDWIDTH=parseInt(v.attributes.BANDWIDTH,10)),v.attributes["FRAME-RATE"]&&(v.attributes["FRAME-RATE"]=parseFloat(v.attributes["FRAME-RATE"])),v.attributes["PROGRAM-ID"]&&(v.attributes["PROGRAM-ID"]=parseInt(v.attributes["PROGRAM-ID"],10))}s.trigger("data",v)}else{if(h=/^#EXT-X-MEDIA:?(.*)$/.exec(D))return v={type:"tag",tagType:"media"},h[1]&&(v.attributes=bn(h[1])),void s.trigger("data",v);if(h=/^#EXT-X-ENDLIST/.exec(D))s.trigger("data",{type:"tag",tagType:"endlist"});else{if(!(h=/^#EXT-X-DISCONTINUITY/.exec(D)))return(h=/^#EXT-X-PROGRAM-DATE-TIME:?(.*)$/.exec(D))?(v={type:"tag",tagType:"program-date-time"},h[1]&&(v.dateTimeString=h[1],v.dateTimeObject=new Date(h[1])),void s.trigger("data",v)):(h=/^#EXT-X-KEY:?(.*)$/.exec(D))?(v={type:"tag",tagType:"key"},h[1]&&(v.attributes=bn(h[1]),v.attributes.IV&&("0x"===v.attributes.IV.substring(0,2).toLowerCase()&&(v.attributes.IV=v.attributes.IV.substring(2)),v.attributes.IV=v.attributes.IV.match(/.{8}/g),v.attributes.IV[0]=parseInt(v.attributes.IV[0],16),v.attributes.IV[1]=parseInt(v.attributes.IV[1],16),v.attributes.IV[2]=parseInt(v.attributes.IV[2],16),v.attributes.IV[3]=parseInt(v.attributes.IV[3],16),v.attributes.IV=new Uint32Array(v.attributes.IV))),void s.trigger("data",v)):(h=/^#EXT-X-START:?(.*)$/.exec(D))?(v={type:"tag",tagType:"start"},h[1]&&(v.attributes=bn(h[1]),v.attributes["TIME-OFFSET"]=parseFloat(v.attributes["TIME-OFFSET"]),v.attributes.PRECISE=/YES/.test(v.attributes.PRECISE)),void s.trigger("data",v)):(h=/^#EXT-X-CUE-OUT-CONT:?(.*)?$/.exec(D))?((v={type:"tag",tagType:"cue-out-cont"}).data=h[1]?h[1]:"",void s.trigger("data",v)):(h=/^#EXT-X-CUE-OUT:?(.*)?$/.exec(D))?((v={type:"tag",tagType:"cue-out"}).data=h[1]?h[1]:"",void s.trigger("data",v)):(h=/^#EXT-X-CUE-IN:?(.*)?$/.exec(D))?((v={type:"tag",tagType:"cue-in"}).data=h[1]?h[1]:"",void s.trigger("data",v)):(h=/^#EXT-X-SKIP:(.*)$/.exec(D))&&h[1]?((v={type:"tag",tagType:"skip"}).attributes=bn(h[1]),v.attributes.hasOwnProperty("SKIPPED-SEGMENTS")&&(v.attributes["SKIPPED-SEGMENTS"]=parseInt(v.attributes["SKIPPED-SEGMENTS"],10)),v.attributes.hasOwnProperty("RECENTLY-REMOVED-DATERANGES")&&(v.attributes["RECENTLY-REMOVED-DATERANGES"]=v.attributes["RECENTLY-REMOVED-DATERANGES"].split(Ot)),void s.trigger("data",v)):(h=/^#EXT-X-PART:(.*)$/.exec(D))&&h[1]?((v={type:"tag",tagType:"part"}).attributes=bn(h[1]),["DURATION"].forEach(function(Le){v.attributes.hasOwnProperty(Le)&&(v.attributes[Le]=parseFloat(v.attributes[Le]))}),["INDEPENDENT","GAP"].forEach(function(Le){v.attributes.hasOwnProperty(Le)&&(v.attributes[Le]=/YES/.test(v.attributes[Le]))}),v.attributes.hasOwnProperty("BYTERANGE")&&(v.attributes.byterange=rn(v.attributes.BYTERANGE)),void s.trigger("data",v)):(h=/^#EXT-X-SERVER-CONTROL:(.*)$/.exec(D))&&h[1]?((v={type:"tag",tagType:"server-control"}).attributes=bn(h[1]),["CAN-SKIP-UNTIL","PART-HOLD-BACK","HOLD-BACK"].forEach(function(Le){v.attributes.hasOwnProperty(Le)&&(v.attributes[Le]=parseFloat(v.attributes[Le]))}),["CAN-SKIP-DATERANGES","CAN-BLOCK-RELOAD"].forEach(function(Le){v.attributes.hasOwnProperty(Le)&&(v.attributes[Le]=/YES/.test(v.attributes[Le]))}),void s.trigger("data",v)):(h=/^#EXT-X-PART-INF:(.*)$/.exec(D))&&h[1]?((v={type:"tag",tagType:"part-inf"}).attributes=bn(h[1]),["PART-TARGET"].forEach(function(Le){v.attributes.hasOwnProperty(Le)&&(v.attributes[Le]=parseFloat(v.attributes[Le]))}),void s.trigger("data",v)):(h=/^#EXT-X-PRELOAD-HINT:(.*)$/.exec(D))&&h[1]?((v={type:"tag",tagType:"preload-hint"}).attributes=bn(h[1]),["BYTERANGE-START","BYTERANGE-LENGTH"].forEach(function(Le){if(v.attributes.hasOwnProperty(Le)){v.attributes[Le]=parseInt(v.attributes[Le],10);var Be="BYTERANGE-LENGTH"===Le?"length":"offset";v.attributes.byterange=v.attributes.byterange||{},v.attributes.byterange[Be]=v.attributes[Le],delete v.attributes[Le]}}),void s.trigger("data",v)):(h=/^#EXT-X-RENDITION-REPORT:(.*)$/.exec(D))&&h[1]?((v={type:"tag",tagType:"rendition-report"}).attributes=bn(h[1]),["LAST-MSN","LAST-PART"].forEach(function(Le){v.attributes.hasOwnProperty(Le)&&(v.attributes[Le]=parseInt(v.attributes[Le],10))}),void s.trigger("data",v)):void s.trigger("data",{type:"tag",data:D.slice(4)});s.trigger("data",{type:"tag",tagType:"discontinuity"})}}}else s.trigger("data",{type:"comment",text:D.slice(1)})})}},u.addParser=function(t){var s=this,h=t.expression,v=t.customType,S=t.dataParser,D=t.segment;"function"!=typeof S&&(S=function(ee){return ee}),this.customParsers.push(function(F){if(h.exec(F))return s.trigger("data",{type:"custom",data:S(F),customType:v,segment:D}),!0})},u.addTagMapper=function(t){var s=t.expression,h=t.map;this.tagMappers.push(function(D){return s.test(D)?h(D):D})},i}(gt),Zn=function(i){var u={};return Object.keys(i).forEach(function(l){u[function(i){return i.toLowerCase().replace(/-(\w)/g,function(u){return u[1].toUpperCase()})}(l)]=i[l]}),u},Vr=function(i){var u=i.serverControl,l=i.targetDuration,t=i.partTargetDuration;if(u){var s="#EXT-X-SERVER-CONTROL",h="holdBack",v="partHoldBack",S=l&&3*l,D=t&&2*t;l&&!u.hasOwnProperty(h)&&(u[h]=S,this.trigger("info",{message:s+" defaulting HOLD-BACK to targetDuration * 3 ("+S+")."})),S&&u[h]<S&&(this.trigger("warn",{message:s+" clamping HOLD-BACK ("+u[h]+") to targetDuration * 3 ("+S+")"}),u[h]=S),t&&!u.hasOwnProperty(v)&&(u[v]=3*t,this.trigger("info",{message:s+" defaulting PART-HOLD-BACK to partTargetDuration * 3 ("+u[v]+")."})),t&&u[v]<D&&(this.trigger("warn",{message:s+" clamping PART-HOLD-BACK ("+u[v]+") to partTargetDuration * 2 ("+D+")."}),u[v]=D)}},mr=function(g){function i(){var l;(l=g.call(this)||this).lineStream=new _n,l.parseStream=new dr,l.lineStream.pipe(l.parseStream);var v,S,t=dt(l),s=[],h={},D=!1,F=function(){},ee={AUDIO:{},VIDEO:{},"CLOSED-CAPTIONS":{},SUBTITLES:{}},me=0;l.manifest={allowCache:!0,discontinuityStarts:[],segments:[]};var Le=0,Be=0;return l.on("end",function(){h.uri||!h.parts&&!h.preloadHints||(!h.map&&v&&(h.map=v),!h.key&&S&&(h.key=S),!h.timeline&&"number"==typeof me&&(h.timeline=me),l.manifest.preloadSegment=h)}),l.parseStream.on("data",function(Ue){var Gt,ln;({tag:function(){({version:function(){Ue.version&&(this.manifest.version=Ue.version)},"allow-cache":function(){this.manifest.allowCache=Ue.allowed,"allowed"in Ue||(this.trigger("info",{message:"defaulting allowCache to YES"}),this.manifest.allowCache=!0)},byterange:function(){var en={};"length"in Ue&&(h.byterange=en,en.length=Ue.length,"offset"in Ue||(Ue.offset=Le)),"offset"in Ue&&(h.byterange=en,en.offset=Ue.offset),Le=en.offset+en.length},endlist:function(){this.manifest.endList=!0},inf:function(){"mediaSequence"in this.manifest||(this.manifest.mediaSequence=0,this.trigger("info",{message:"defaulting media sequence to zero"})),"discontinuitySequence"in this.manifest||(this.manifest.discontinuitySequence=0,this.trigger("info",{message:"defaulting discontinuity sequence to zero"})),Ue.duration>0&&(h.duration=Ue.duration),0===Ue.duration&&(h.duration=.01,this.trigger("info",{message:"updating zero segment duration to a small value"})),this.manifest.segments=s},key:function(){if(Ue.attributes)if("NONE"!==Ue.attributes.METHOD)if(Ue.attributes.URI){if("com.apple.streamingkeydelivery"===Ue.attributes.KEYFORMAT)return this.manifest.contentProtection=this.manifest.contentProtection||{},void(this.manifest.contentProtection["com.apple.fps.1_0"]={attributes:Ue.attributes});if("com.microsoft.playready"===Ue.attributes.KEYFORMAT)return this.manifest.contentProtection=this.manifest.contentProtection||{},void(this.manifest.contentProtection["com.microsoft.playready"]={uri:Ue.attributes.URI});if("urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed"===Ue.attributes.KEYFORMAT)return-1===["SAMPLE-AES","SAMPLE-AES-CTR","SAMPLE-AES-CENC"].indexOf(Ue.attributes.METHOD)?void this.trigger("warn",{message:"invalid key method provided for Widevine"}):("SAMPLE-AES-CENC"===Ue.attributes.METHOD&&this.trigger("warn",{message:"SAMPLE-AES-CENC is deprecated, please use SAMPLE-AES-CTR instead"}),"data:text/plain;base64,"!==Ue.attributes.URI.substring(0,23)?void this.trigger("warn",{message:"invalid key URI provided for Widevine"}):Ue.attributes.KEYID&&"0x"===Ue.attributes.KEYID.substring(0,2)?(this.manifest.contentProtection=this.manifest.contentProtection||{},void(this.manifest.contentProtection["com.widevine.alpha"]={attributes:{schemeIdUri:Ue.attributes.KEYFORMAT,keyId:Ue.attributes.KEYID.substring(2)},pssh:jt(Ue.attributes.URI.split(",")[1])})):void this.trigger("warn",{message:"invalid key ID provided for Widevine"}));Ue.attributes.METHOD||this.trigger("warn",{message:"defaulting key method to AES-128"}),S={method:Ue.attributes.METHOD||"AES-128",uri:Ue.attributes.URI},typeof Ue.attributes.IV<"u"&&(S.iv=Ue.attributes.IV)}else this.trigger("warn",{message:"ignoring key declaration without URI"});else S=null;else this.trigger("warn",{message:"ignoring key declaration without attribute list"})},"media-sequence":function(){isFinite(Ue.number)?this.manifest.mediaSequence=Ue.number:this.trigger("warn",{message:"ignoring invalid media sequence: "+Ue.number})},"discontinuity-sequence":function(){isFinite(Ue.number)?(this.manifest.discontinuitySequence=Ue.number,me=Ue.number):this.trigger("warn",{message:"ignoring invalid discontinuity sequence: "+Ue.number})},"playlist-type":function(){/VOD|EVENT/.test(Ue.playlistType)?this.manifest.playlistType=Ue.playlistType:this.trigger("warn",{message:"ignoring unknown playlist type: "+Ue.playlist})},map:function(){v={},Ue.uri&&(v.uri=Ue.uri),Ue.byterange&&(v.byterange=Ue.byterange),S&&(v.key=S)},"stream-inf":function(){this.manifest.playlists=s,this.manifest.mediaGroups=this.manifest.mediaGroups||ee,Ue.attributes?(h.attributes||(h.attributes={}),at(h.attributes,Ue.attributes)):this.trigger("warn",{message:"ignoring empty stream-inf attributes"})},media:function(){if(this.manifest.mediaGroups=this.manifest.mediaGroups||ee,Ue.attributes&&Ue.attributes.TYPE&&Ue.attributes["GROUP-ID"]&&Ue.attributes.NAME){var en=this.manifest.mediaGroups[Ue.attributes.TYPE];en[Ue.attributes["GROUP-ID"]]=en[Ue.attributes["GROUP-ID"]]||{},Gt=en[Ue.attributes["GROUP-ID"]],(ln={default:/yes/i.test(Ue.attributes.DEFAULT)}).autoselect=!!ln.default||/yes/i.test(Ue.attributes.AUTOSELECT),Ue.attributes.LANGUAGE&&(ln.language=Ue.attributes.LANGUAGE),Ue.attributes.URI&&(ln.uri=Ue.attributes.URI),Ue.attributes["INSTREAM-ID"]&&(ln.instreamId=Ue.attributes["INSTREAM-ID"]),Ue.attributes.CHARACTERISTICS&&(ln.characteristics=Ue.attributes.CHARACTERISTICS),Ue.attributes.FORCED&&(ln.forced=/yes/i.test(Ue.attributes.FORCED)),Gt[Ue.attributes.NAME]=ln}else this.trigger("warn",{message:"ignoring incomplete or missing media group"})},discontinuity:function(){me+=1,h.discontinuity=!0,this.manifest.discontinuityStarts.push(s.length)},"program-date-time":function(){typeof this.manifest.dateTimeString>"u"&&(this.manifest.dateTimeString=Ue.dateTimeString,this.manifest.dateTimeObject=Ue.dateTimeObject),h.dateTimeString=Ue.dateTimeString,h.dateTimeObject=Ue.dateTimeObject},targetduration:function(){!isFinite(Ue.duration)||Ue.duration<0?this.trigger("warn",{message:"ignoring invalid target duration: "+Ue.duration}):(this.manifest.targetDuration=Ue.duration,Vr.call(this,this.manifest))},start:function(){Ue.attributes&&!isNaN(Ue.attributes["TIME-OFFSET"])?this.manifest.start={timeOffset:Ue.attributes["TIME-OFFSET"],precise:Ue.attributes.PRECISE}:this.trigger("warn",{message:"ignoring start declaration without appropriate attribute list"})},"cue-out":function(){h.cueOut=Ue.data},"cue-out-cont":function(){h.cueOutCont=Ue.data},"cue-in":function(){h.cueIn=Ue.data},skip:function(){this.manifest.skip=Zn(Ue.attributes),this.warnOnMissingAttributes_("#EXT-X-SKIP",Ue.attributes,["SKIPPED-SEGMENTS"])},part:function(){var en=this;D=!0;var In=this.manifest.segments.length,nn=Zn(Ue.attributes);h.parts=h.parts||[],h.parts.push(nn),nn.byterange&&(nn.byterange.hasOwnProperty("offset")||(nn.byterange.offset=Be),Be=nn.byterange.offset+nn.byterange.length),this.warnOnMissingAttributes_("#EXT-X-PART #"+(h.parts.length-1)+" for segment #"+In,Ue.attributes,["URI","DURATION"]),this.manifest.renditionReports&&this.manifest.renditionReports.forEach(function(En,cn){En.hasOwnProperty("lastPart")||en.trigger("warn",{message:"#EXT-X-RENDITION-REPORT #"+cn+" lacks required attribute(s): LAST-PART"})})},"server-control":function(){var en=this.manifest.serverControl=Zn(Ue.attributes);en.hasOwnProperty("canBlockReload")||(en.canBlockReload=!1,this.trigger("info",{message:"#EXT-X-SERVER-CONTROL defaulting CAN-BLOCK-RELOAD to false"})),Vr.call(this,this.manifest),en.canSkipDateranges&&!en.hasOwnProperty("canSkipUntil")&&this.trigger("warn",{message:"#EXT-X-SERVER-CONTROL lacks required attribute CAN-SKIP-UNTIL which is required when CAN-SKIP-DATERANGES is set"})},"preload-hint":function(){var en=this.manifest.segments.length,In=Zn(Ue.attributes),nn=In.type&&"PART"===In.type;h.preloadHints=h.preloadHints||[],h.preloadHints.push(In),In.byterange&&(In.byterange.hasOwnProperty("offset")||(In.byterange.offset=nn?Be:0,nn&&(Be=In.byterange.offset+In.byterange.length)));var tn=h.preloadHints.length-1;if(this.warnOnMissingAttributes_("#EXT-X-PRELOAD-HINT #"+tn+" for segment #"+en,Ue.attributes,["TYPE","URI"]),In.type)for(var En=0;En<h.preloadHints.length-1;En++){var cn=h.preloadHints[En];cn.type&&cn.type===In.type&&this.trigger("warn",{message:"#EXT-X-PRELOAD-HINT #"+tn+" for segment #"+en+" has the same TYPE "+In.type+" as preload hint #"+En})}},"rendition-report":function(){var en=Zn(Ue.attributes);this.manifest.renditionReports=this.manifest.renditionReports||[],this.manifest.renditionReports.push(en);var In=this.manifest.renditionReports.length-1,nn=["LAST-MSN","URI"];D&&nn.push("LAST-PART"),this.warnOnMissingAttributes_("#EXT-X-RENDITION-REPORT #"+In,Ue.attributes,nn)},"part-inf":function(){this.manifest.partInf=Zn(Ue.attributes),this.warnOnMissingAttributes_("#EXT-X-PART-INF",Ue.attributes,["PART-TARGET"]),this.manifest.partInf.partTarget&&(this.manifest.partTargetDuration=this.manifest.partInf.partTarget),Vr.call(this,this.manifest)}}[Ue.tagType]||F).call(t)},uri:function(){h.uri=Ue.uri,s.push(h),this.manifest.targetDuration&&!("duration"in h)&&(this.trigger("warn",{message:"defaulting segment duration to the target duration"}),h.duration=this.manifest.targetDuration),S&&(h.key=S),h.timeline=me,v&&(h.map=v),Be=0,h={}},comment:function(){},custom:function(){Ue.segment?(h.custom=h.custom||{},h.custom[Ue.customType]=Ue.data):(this.manifest.custom=this.manifest.custom||{},this.manifest.custom[Ue.customType]=Ue.data)}})[Ue.type].call(t)}),l}Me(i,g);var u=i.prototype;return u.warnOnMissingAttributes_=function(t,s,h){var v=[];h.forEach(function(S){s.hasOwnProperty(S)||v.push(S)}),v.length&&this.trigger("warn",{message:t+" lacks required attribute(s): "+v.join(", ")})},u.push=function(t){this.lineStream.push(t)},u.end=function(){this.lineStream.push("\n"),this.trigger("end")},u.addParser=function(t){this.parseStream.addParser(t)},u.addTagMapper=function(t){this.parseStream.addTagMapper(t)},i}(gt),qn={mp4:/^(av0?1|avc0?[1234]|vp0?9|flac|opus|mp3|mp4a|mp4v|stpp.ttml.im1t)/,webm:/^(vp0?[89]|av0?1|opus|vorbis)/,ogg:/^(vp0?[89]|theora|flac|opus|vorbis)/,video:/^(av0?1|avc0?[1234]|vp0?[89]|hvc1|hev1|theora|mp4v)/,audio:/^(mp4a|flac|vorbis|opus|ac-[34]|ec-3|alac|mp3|speex|aac)/,text:/^(stpp.ttml.im1t)/,muxerVideo:/^(avc0?1)/,muxerAudio:/^(mp4a)/,muxerText:/a^/},kr=["video","audio","text"],ii=["Video","Audio","Text"],fr=function(i){return i&&i.replace(/avc1\.(\d+)\.(\d+)/i,function(u,l,t){return"avc1."+("00"+Number(l).toString(16)).slice(-2)+"00"+("00"+Number(t).toString(16)).slice(-2)})},Tn=function(i){void 0===i&&(i="");var u=i.split(","),l=[];return u.forEach(function(t){var s;t=t.trim(),kr.forEach(function(h){var v=qn[h].exec(t.toLowerCase());if(v&&!(v.length<=1)){s=h;var S=t.substring(0,v[1].length),D=t.replace(S,"");l.push({type:S,details:D,mediaType:h})}}),s||l.push({type:t,details:"",mediaType:"unknown"})}),l},pr=function(i){return void 0===i&&(i=""),qn.audio.test(i.trim().toLowerCase())},Ri=function(i){if(i&&"string"==typeof i){var u=i.toLowerCase().split(",").map(function(s){return fr(s.trim())}),l="video";1===u.length&&pr(u[0])?l="audio":1===u.length&&function(i){return void 0===i&&(i=""),qn.text.test(i.trim().toLowerCase())}(u[0])&&(l="application");var t="mp4";return u.every(function(s){return qn.mp4.test(s)})?t="mp4":u.every(function(s){return qn.webm.test(s)})?t="webm":u.every(function(s){return qn.ogg.test(s)})&&(t="ogg"),l+"/"+t+';codecs="'+i+'"'}},er=function(i){return void 0===i&&(i=""),ae().MediaSource&&ae().MediaSource.isTypeSupported&&ae().MediaSource.isTypeSupported(Ri(i))||!1},Wn=function(i){return void 0===i&&(i=""),i.toLowerCase().split(",").every(function(u){u=u.trim();for(var l=0;l<ii.length;l++)if(qn["muxer"+ii[l]].test(u))return!0;return!1})},or="mp4a.40.2",Lr=/^(audio|video|application)\/(x-|vnd\.apple\.)?mpegurl/i,Qn=/^application\/dash\+xml/i,ti=function(i){return Lr.test(i)?"hls":Qn.test(i)?"dash":"application/vnd.videojs.vhs+json"===i?"vhs-json":null},Ir=function(i){return"function"===ArrayBuffer.isView?ArrayBuffer.isView(i):i&&i.buffer instanceof ArrayBuffer},kn=function(i){return i instanceof Uint8Array?i:(!Array.isArray(i)&&!function(i){return Ir(i)}(i)&&!(i instanceof ArrayBuffer)&&(i="number"!=typeof i||"number"==typeof i&&i!=i?0:[i]),new Uint8Array(i&&i.buffer||i,i&&i.byteOffset||0,i&&i.byteLength||0))},yn=ae().BigInt||Number,tr=[yn("0x1"),yn("0x100"),yn("0x10000"),yn("0x1000000"),yn("0x100000000"),yn("0x10000000000"),yn("0x1000000000000"),yn("0x100000000000000"),yn("0x10000000000000000")],tt=(g=new Uint16Array([65484]),new Uint8Array(g.buffer,g.byteOffset,g.byteLength),function(i,u){var l=void 0===u?{}:u,t=l.signed,s=void 0!==t&&t,h=l.le,v=void 0!==h&&h;i=kn(i);var S=v?"reduce":"reduceRight",F=(i[S]?i[S]:Array.prototype[S]).call(i,function(Y,me,Le){var Be=v?Le:Math.abs(Le+1-i.length);return Y+yn(me)*tr[Be]},yn(0));if(s){var ee=tr[i.length]/yn(2)-yn(1);(F=yn(F))>ee&&(F-=ee,F-=ee,F-=yn(2))}return Number(F)}),$t=function(i,u){if("string"!=typeof i&&i&&"function"==typeof i.toString&&(i=i.toString()),"string"!=typeof i)return new Uint8Array;u||(i=unescape(encodeURIComponent(i)));for(var l=new Uint8Array(i.length),t=0;t<i.length;t++)l[t]=i.charCodeAt(t);return l},fn=function(i,u,l){var t=void 0===l?{}:l,s=t.offset,h=void 0===s?0:s,v=t.mask,S=void 0===v?[]:v;return i=kn(i),(u=kn(u)).length&&i.length-h>=u.length&&(u.every?u.every:Array.prototype.every).call(u,function(F,ee){return F===(S[ee]?S[ee]&i[h+ee]:i[h+ee])})},we=K(978),Te=function(i){return!!i&&"object"==typeof i},ge=function g(){for(var i=arguments.length,u=new Array(i),l=0;l<i;l++)u[l]=arguments[l];return u.reduce(function(t,s){return"object"!=typeof s||Object.keys(s).forEach(function(h){t[h]=Array.isArray(t[h])&&Array.isArray(s[h])?t[h].concat(s[h]):Te(t[h])&&Te(s[h])?g(t[h],s[h]):s[h]}),t},{})},Ye=function(i){return Object.keys(i).map(function(u){return i[u]})},pn=function(i){return i.reduce(function(u,l){return u.concat(l)},[])},Nn=function(i){if(!i.length)return[];for(var u=[],l=0;l<i.length;l++)u.push(i[l]);return u},Or=function(i,u){for(var l=0;l<i.length;l++)if(u(i[l]))return l;return-1},Zi=function(i){var u=i.baseUrl,t=i.source,s=void 0===t?"":t,h=i.range,v=void 0===h?"":h,S=i.indexRange,D=void 0===S?"":S,F={uri:s,resolvedUri:lt((void 0===u?"":u)||"",s)};if(v||D){var Be,Y=(v||D).split("-"),me=ae().BigInt?ae().BigInt(Y[0]):parseInt(Y[0],10),Le=ae().BigInt?ae().BigInt(Y[1]):parseInt(Y[1],10);me<Number.MAX_SAFE_INTEGER&&"bigint"==typeof me&&(me=Number(me)),Le<Number.MAX_SAFE_INTEGER&&"bigint"==typeof Le&&(Le=Number(Le)),"bigint"==typeof(Be="bigint"==typeof Le||"bigint"==typeof me?ae().BigInt(Le)-ae().BigInt(me)+ae().BigInt(1):Le-me+1)&&Be<Number.MAX_SAFE_INTEGER&&(Be=Number(Be)),F.byterange={length:Be,offset:me}}return F},is=function(i){return i&&"number"!=typeof i&&(i=parseInt(i,10)),isNaN(i)?null:i},vs={static:function(i){var u=i.duration,l=i.timescale,t=void 0===l?1:l,s=i.sourceDuration,h=i.periodDuration,v=is(i.endNumber),S=u/t;return"number"==typeof v?{start:0,end:v}:"number"==typeof h?{start:0,end:h/S}:{start:0,end:s/S}},dynamic:function(i){var u=i.NOW,l=i.clientOffset,t=i.availabilityStartTime,s=i.timescale,h=void 0===s?1:s,v=i.duration,S=i.periodStart,D=void 0===S?0:S,F=i.minimumUpdatePeriod,ee=void 0===F?0:F,Y=i.timeShiftBufferDepth,me=void 0===Y?1/0:Y,Le=is(i.endNumber),Be=(u+l)/1e3,Ue=t+D,On=Math.ceil((Be+ee-Ue)*h/v),Yt=Math.floor((Be-Ue-me)*h/v),en=Math.floor((Be-Ue)*h/v);return{start:Math.max(0,Yt),end:"number"==typeof Le?Le:Math.min(On,en)}}},Yi=function(i){var u=i.type,l=i.duration,t=i.timescale,s=void 0===t?1:t,h=i.periodDuration,v=i.sourceDuration,S=vs[u](i),ee=function(i,u){for(var l=[],t=i;t<u;t++)l.push(t);return l}(S.start,S.end).map(function(i){return function(u){var l=i.duration,t=i.timescale,v=i.startNumber;return{number:(void 0===v?1:v)+u,duration:l/(void 0===t?1:t),timeline:i.periodStart,time:u*l}}}(i));if("static"===u){var Y=ee.length-1;ee[Y].duration=("number"==typeof h?h:v)-l/s*Y}return ee},_i=function(i){var u=i.baseUrl,l=i.initialization,t=void 0===l?{}:l,s=i.sourceDuration,h=i.indexRange,v=void 0===h?"":h,S=i.periodStart,D=i.presentationTime,F=i.number,ee=void 0===F?0:F,Y=i.duration;if(!u)throw new Error("NO_BASE_URL");var me=Zi({baseUrl:u,source:t.sourceURL,range:t.range}),Le=Zi({baseUrl:u,source:u,indexRange:v});if(Le.map=me,Y){var Be=Yi(i);Be.length&&(Le.duration=Be[0].duration,Le.timeline=Be[0].timeline)}else s&&(Le.duration=s,Le.timeline=S);return Le.presentationTime=D||S,Le.number=ee,[Le]},Ci=function(i,u,l){var Ue,t=i.sidx.map?i.sidx.map:null,s=i.sidx.duration,h=i.timeline||0,v=i.sidx.byterange,S=v.offset+v.length,D=u.timescale,F=u.references.filter(function(En){return 1!==En.referenceType}),ee=[],Y=i.endList?"static":"dynamic",me=i.sidx.timeline,Le=me,Be=i.mediaSequence||0;Ue="bigint"==typeof u.firstOffset?ae().BigInt(S)+u.firstOffset:S+u.firstOffset;for(var Gt=0;Gt<F.length;Gt++){var en,ln=u.references[Gt],On=ln.referencedSize,Yt=ln.subsegmentDuration;en="bigint"==typeof Ue?Ue+ae().BigInt(On)-ae().BigInt(1):Ue+On-1;var tn=_i({baseUrl:l,timescale:D,timeline:h,periodStart:me,presentationTime:Le,number:Be,duration:Yt,sourceDuration:s,indexRange:Ue+"-"+en,type:Y})[0];t&&(tn.map=t),ee.push(tn),Ue+="bigint"==typeof Ue?ae().BigInt(On):On,Le+=Yt/D,Be++}return i.segments=ee,i},Es=["AUDIO","SUBTITLES"],Pn=function(i){return function(i,u){return Ye(i.reduce(function(l,t){return t.forEach(function(s){l[function(u){return u.timeline}(s)]=s}),l},{}))}(i).sort(function(u,l){return u.timeline>l.timeline?1:-1})},Ei=function(i){var u=[];return function(i,u,l){u.forEach(function(t){for(var s in i.mediaGroups[t])for(var h in i.mediaGroups[t][s])l(i.mediaGroups[t][s][h])})}(i,Es,function(l,t,s,h){u=u.concat(l.playlists||[])}),u},hs=function(i){var u=i.playlist;u.mediaSequence=i.mediaSequence,u.segments.forEach(function(t,s){t.number=u.mediaSequence+s})},fs=function(i){return i&&i.uri+"-"+function(i){var u;return u="bigint"==typeof i.offset||"bigint"==typeof i.length?ae().BigInt(i.offset)+ae().BigInt(i.length)-ae().BigInt(1):i.offset+i.length-1,i.offset+"-"+u}(i.byterange)},Gr=function(i){return Ye(i.reduce(function(l,t){var h,s=t.attributes.id+(t.attributes.lang||"");l[s]?(t.segments&&(t.segments[0]&&(t.segments[0].discontinuity=!0),(h=l[s].segments).push.apply(h,t.segments)),t.attributes.contentProtection&&(l[s].attributes.contentProtection=t.attributes.contentProtection)):(l[s]=t,l[s].attributes.timelineStarts=[]);return l[s].attributes.timelineStarts.push({start:t.attributes.periodStart,timeline:t.attributes.periodStart}),l},{})).map(function(l){return l.discontinuityStarts=function(i,u){return i.reduce(function(l,t,s){return t.discontinuity&&l.push(s),l},[])}(l.segments||[]),l})},qs=function(i,u){var l=fs(i.sidx),t=l&&u[l]&&u[l].sidx;return t&&Ci(i,t,i.sidx.resolvedUri),i},Xs=function(i,u){if(void 0===u&&(u={}),!Object.keys(u).length)return i;for(var l in i)i[l]=qs(i[l],u);return i},Bs=function(i){var u,l=i.attributes,t=i.segments,s=i.sidx,h=i.discontinuityStarts,v={attributes:(u={NAME:l.id,AUDIO:"audio",SUBTITLES:"subs",RESOLUTION:{width:l.width,height:l.height},CODECS:l.codecs,BANDWIDTH:l.bandwidth},u["PROGRAM-ID"]=1,u),uri:"",endList:"static"===l.type,timeline:l.periodStart,resolvedUri:"",targetDuration:l.duration,discontinuityStarts:h,timelineStarts:l.timelineStarts,segments:t};return l.frameRate&&(v.attributes["FRAME-RATE"]=l.frameRate),l.contentProtection&&(v.contentProtection=l.contentProtection),s&&(v.sidx=s),v},Ko=function(i){var u=i.attributes;return"video/mp4"===u.mimeType||"video/webm"===u.mimeType||"video"===u.contentType},ys=function(i){var u=i.attributes;return"audio/mp4"===u.mimeType||"audio/webm"===u.mimeType||"audio"===u.contentType},Zs=function(i){var u=i.attributes;return"text/vtt"===u.mimeType||"text"===u.contentType},Li=function(i){return i?Object.keys(i).reduce(function(u,l){return u.concat(i[l].playlists)},[]):[]},pt=function(i){var u,l=i.dashPlaylists,t=i.locations,s=i.sidxMapping,h=void 0===s?{}:s,v=i.previousManifest;if(!l.length)return{};var S=l[0].attributes,D=S.sourceDuration,F=S.type,ee=S.suggestedPresentationDelay,Y=S.minimumUpdatePeriod,me=Gr(l.filter(Ko)).map(Bs),Le=Gr(l.filter(ys)),Be=Gr(l.filter(Zs)),Ue=l.map(function(nn){return nn.attributes.captionServices}).filter(Boolean),Gt={allowCache:!0,discontinuityStarts:[],segments:[],endList:!0,mediaGroups:(u={AUDIO:{},VIDEO:{}},u["CLOSED-CAPTIONS"]={},u.SUBTITLES={},u),uri:"",duration:D,playlists:Xs(me,h)};Y>=0&&(Gt.minimumUpdatePeriod=1e3*Y),t&&(Gt.locations=t),"dynamic"===F&&(Gt.suggestedPresentationDelay=ee);var On=Le.length?function(i,u,l){void 0===u&&(u={}),void 0===l&&(l=!1);var t,s=i.reduce(function(v,S){var D=S.attributes.role&&S.attributes.role.value||"",F=S.attributes.lang||"",ee=S.attributes.label||"main";F&&!S.attributes.label&&(ee=S.attributes.lang+(D?" ("+D+")":"")),v[ee]||(v[ee]={language:F,autoselect:!0,default:"main"===D,playlists:[],uri:""});var me=qs(function(i,u){var l,t=i.attributes,s=i.segments,h=i.sidx,v=i.mediaSequence,S=i.discontinuitySequence,D=i.discontinuityStarts,F={attributes:(l={NAME:t.id,BANDWIDTH:t.bandwidth,CODECS:t.codecs},l["PROGRAM-ID"]=1,l),uri:"",endList:"static"===t.type,timeline:t.periodStart,resolvedUri:"",targetDuration:t.duration,discontinuitySequence:S,discontinuityStarts:D,timelineStarts:t.timelineStarts,mediaSequence:v,segments:s};return t.contentProtection&&(F.contentProtection=t.contentProtection),h&&(F.sidx=h),u&&(F.attributes.AUDIO="audio",F.attributes.SUBTITLES="subs"),F}(S,l),u);return v[ee].playlists.push(me),typeof t>"u"&&"main"===D&&((t=S).default=!0),v},{});return t||(s[Object.keys(s)[0]].default=!0),s}(Le,h,0===Gt.playlists.length):null,Yt=Be.length?function(i,u){return void 0===u&&(u={}),i.reduce(function(l,t){var s=t.attributes.lang||"text";return l[s]||(l[s]={language:s,default:!1,autoselect:!1,playlists:[],uri:""}),l[s].playlists.push(qs(function(i){var u,l=i.attributes,t=i.segments,s=i.mediaSequence,h=i.discontinuityStarts,v=i.discontinuitySequence;typeof t>"u"&&(t=[{uri:l.baseUrl,timeline:l.periodStart,resolvedUri:l.baseUrl||"",duration:l.sourceDuration,number:0}],l.duration=l.sourceDuration);var S=((u={NAME:l.id,BANDWIDTH:l.bandwidth})["PROGRAM-ID"]=1,u);return l.codecs&&(S.CODECS=l.codecs),{attributes:S,uri:"",endList:"static"===l.type,timeline:l.periodStart,resolvedUri:l.baseUrl||"",targetDuration:l.duration,timelineStarts:l.timelineStarts,discontinuityStarts:h,discontinuitySequence:v,mediaSequence:s,segments:t}}(t),u)),l},{})}(Be,h):null,en=me.concat(Li(On),Li(Yt)),In=en.map(function(nn){return nn.timelineStarts});return Gt.timelineStarts=Pn(In),function(i,u){i.forEach(function(l){l.mediaSequence=0,l.discontinuitySequence=Or(u,function(t){return t.timeline===l.timeline}),l.segments&&l.segments.forEach(function(t,s){t.number=s})})}(en,Gt.timelineStarts),On&&(Gt.mediaGroups.AUDIO.audio=On),Yt&&(Gt.mediaGroups.SUBTITLES.subs=Yt),Ue.length&&(Gt.mediaGroups["CLOSED-CAPTIONS"].cc=function(i){return i.reduce(function(u,l){return l&&l.forEach(function(t){var h=t.language;u[h]={autoselect:!1,default:!1,instreamId:t.channel,language:h},t.hasOwnProperty("aspectRatio")&&(u[h].aspectRatio=t.aspectRatio),t.hasOwnProperty("easyReader")&&(u[h].easyReader=t.easyReader),t.hasOwnProperty("3D")&&(u[h]["3D"]=t["3D"])}),u},{})}(Ue)),v?function(i){var u=i.oldManifest,l=i.newManifest,t=u.playlists.concat(Ei(u)),s=l.playlists.concat(Ei(l));return l.timelineStarts=Pn([u.timelineStarts,l.timelineStarts]),function(i){var u=i.oldPlaylists,t=i.timelineStarts;i.newPlaylists.forEach(function(s){s.discontinuitySequence=Or(t,function(F){return F.timeline===s.timeline});var h=function(i,u){for(var l=0;l<i.length;l++)if(i[l].attributes.NAME===u)return i[l];return null}(u,s.attributes.NAME);if(h&&!s.sidx){var v=s.segments[0],S=Or(h.segments,function(F){return Math.abs(F.presentationTime-v.presentationTime)<.016666666666666666});if(-1===S)return hs({playlist:s,mediaSequence:h.mediaSequence+h.segments.length}),s.segments[0].discontinuity=!0,s.discontinuityStarts.unshift(0),void((!h.segments.length&&s.timeline>h.timeline||h.segments.length&&s.timeline>h.segments[h.segments.length-1].timeline)&&s.discontinuitySequence--);h.segments[S].discontinuity&&!v.discontinuity&&(v.discontinuity=!0,s.discontinuityStarts.unshift(0),s.discontinuitySequence--),hs({playlist:s,mediaSequence:h.segments[S].number})}})}({oldPlaylists:t,newPlaylists:s,timelineStarts:l.timelineStarts}),l}({oldManifest:v,newManifest:Gt}):Gt},ft=function(i,u,l){var v=i.timescale,D=i.periodStart,ee=i.minimumUpdatePeriod;return Math.ceil((((i.NOW+i.clientOffset)/1e3+(void 0===ee?0:ee)-(i.availabilityStartTime+(void 0===D?0:D)))*(void 0===v?1:v)-u)/l)},Ct=function(i,u){for(var l=i.type,t=i.minimumUpdatePeriod,s=void 0===t?0:t,h=i.media,v=void 0===h?"":h,S=i.sourceDuration,D=i.timescale,F=void 0===D?1:D,ee=i.startNumber,Y=void 0===ee?1:ee,me=i.periodStart,Le=[],Be=-1,Ue=0;Ue<u.length;Ue++){var Gt=u[Ue],ln=Gt.d,On=Gt.r||0,Yt=Gt.t||0;Be<0&&(Be=Yt),Yt&&Yt>Be&&(Be=Yt);var en=void 0;if(On<0){var In=Ue+1;en=In===u.length?"dynamic"===l&&s>0&&v.indexOf("$Number$")>0?ft(i,Be,ln):(S*F-Be)/ln:(u[In].t-Be)/ln}else en=On+1;for(var nn=Y+Le.length+en,tn=Y+Le.length;tn<nn;)Le.push({number:tn,duration:ln/F,time:Be,timeline:me}),Be+=ln,tn++}return Le},sn=/\$([A-z]*)(?:(%0)([0-9]+)d)?\$/g,Jn=function(i,u){return i.replace(sn,function(i){return function(u,l,t,s){if("$$"===u)return"$";if(typeof i[l]>"u")return u;var h=""+i[l];return"RepresentationID"===l||(s=t?parseInt(s,10):1,h.length>=s)?h:""+new Array(s-h.length+1).join("0")+h}}(u))},$r=function(i,u){var l={RepresentationID:i.id,Bandwidth:i.bandwidth||0},t=i.initialization,s=void 0===t?{sourceURL:"",range:""}:t,h=Zi({baseUrl:i.baseUrl,source:Jn(s.sourceURL,l),range:s.range}),v=function(i,u){return i.duration||u?i.duration?Yi(i):Ct(i,u):[{number:i.startNumber||1,duration:i.sourceDuration,time:0,timeline:i.periodStart}]}(i,u);return v.map(function(S){l.Number=S.number,l.Time=S.time;var D=Jn(i.media||"",l),Y=i.periodStart+(S.time-(i.presentationTimeOffset||0))/(i.timescale||1);return{uri:D,timeline:S.timeline,duration:S.duration,resolvedUri:lt(i.baseUrl||"",D),map:h,number:S.number,presentationTime:Y}})},Xi=function(i,u){var l=i.duration,t=i.segmentUrls,s=void 0===t?[]:t,h=i.periodStart;if(!l&&!u||l&&u)throw new Error("SEGMENT_TIME_UNSPECIFIED");var S,v=s.map(function(F){return function(i,u){var l=i.baseUrl,t=i.initialization,s=void 0===t?{}:t,h=Zi({baseUrl:l,source:s.sourceURL,range:s.range}),v=Zi({baseUrl:l,source:u.media,range:u.mediaRange});return v.map=h,v}(i,F)});return l&&(S=Yi(i)),u&&(S=Ct(i,u)),S.map(function(F,ee){if(v[ee]){var Y=v[ee],me=i.timescale||1,Le=i.presentationTimeOffset||0;return Y.timeline=F.timeline,Y.duration=F.duration,Y.number=F.number,Y.presentationTime=h+(F.time-Le)/me,Y}}).filter(function(F){return F})},ss=function(i){var t,s,u=i.attributes,l=i.segmentInfo;l.template?(s=$r,t=ge(u,l.template)):l.base?(s=_i,t=ge(u,l.base)):l.list&&(s=Xi,t=ge(u,l.list));var h={attributes:u};if(!s)return h;var v=s(t,l.segmentTimeline);if(t.duration){var F=t.timescale;t.duration=t.duration/(void 0===F?1:F)}else t.duration=v.length?v.reduce(function(Y,me){return Math.max(Y,Math.ceil(me.duration))},0):0;return h.attributes=t,h.segments=v,l.base&&t.indexRange&&(h.sidx=v[0],h.segments=[]),h},Pr=function(i,u){return Nn(i.childNodes).filter(function(l){return l.tagName===u})},Uo=function(i){return i.textContent.trim()},vo=function(i){var S=/P(?:(\d*)Y)?(?:(\d*)M)?(?:(\d*)D)?(?:T(?:(\d*)H)?(?:(\d*)M)?(?:([\d.]*)S)?)?/.exec(i);if(!S)return 0;var D=S.slice(1),ee=D[1],Y=D[2],me=D[3],Le=D[4],Be=D[5];return 31536e3*parseFloat(D[0]||0)+2592e3*parseFloat(ee||0)+86400*parseFloat(Y||0)+3600*parseFloat(me||0)+60*parseFloat(Le||0)+parseFloat(Be||0)},Do={mediaPresentationDuration:function(i){return vo(i)},availabilityStartTime:function(i){return function(i){return/^\d+-\d+-\d+T\d+:\d+:\d+(\.\d+)?$/.test(i)&&(i+="Z"),Date.parse(i)}(i)/1e3},minimumUpdatePeriod:function(i){return vo(i)},suggestedPresentationDelay:function(i){return vo(i)},type:function(i){return i},timeShiftBufferDepth:function(i){return vo(i)},start:function(i){return vo(i)},width:function(i){return parseInt(i,10)},height:function(i){return parseInt(i,10)},bandwidth:function(i){return parseInt(i,10)},frameRate:function(i){return function(i){return parseFloat(i.split("/").reduce(function(u,l){return u/l}))}(i)},startNumber:function(i){return parseInt(i,10)},timescale:function(i){return parseInt(i,10)},presentationTimeOffset:function(i){return parseInt(i,10)},duration:function(i){var u=parseInt(i,10);return isNaN(u)?vo(i):u},d:function(i){return parseInt(i,10)},t:function(i){return parseInt(i,10)},r:function(i){return parseInt(i,10)},DEFAULT:function(i){return i}},Di=function(i){return i&&i.attributes?Nn(i.attributes).reduce(function(u,l){return u[l.name]=(Do[l.name]||Do.DEFAULT)(l.value),u},{}):{}},Jo={"urn:uuid:1077efec-c0b2-4d02-ace3-3c1e52e2fb4b":"org.w3.clearkey","urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed":"com.widevine.alpha","urn:uuid:9a04f079-9840-4286-ab92-e65be0885f95":"com.microsoft.playready","urn:uuid:f239e769-efa3-4850-9c16-a903c6932efb":"com.adobe.primetime"},Ao=function(i,u){return u.length?pn(i.map(function(l){return u.map(function(t){return lt(l,Uo(t))})})):i},ca=function(i){var u=Pr(i,"SegmentTemplate")[0],l=Pr(i,"SegmentList")[0],t=l&&Pr(l,"SegmentURL").map(function(Y){return ge({tag:"SegmentURL"},Di(Y))}),s=Pr(i,"SegmentBase")[0],h=l||u,v=h&&Pr(h,"SegmentTimeline")[0],S=l||s||u,D=S&&Pr(S,"Initialization")[0],F=u&&Di(u);F&&D?F.initialization=D&&Di(D):F&&F.initialization&&(F.initialization={sourceURL:F.initialization});var ee={template:F,segmentTimeline:v&&Pr(v,"S").map(function(Y){return Di(Y)}),list:l&&ge(Di(l),{segmentUrls:t,initialization:Di(D)}),base:s&&ge(Di(s),{initialization:Di(D)})};return Object.keys(ee).forEach(function(Y){ee[Y]||delete ee[Y]}),ee},eo=function(i,u){return function(l,t){var s=Ao(u,Pr(l.node,"BaseURL")),h=ge(i,{periodStart:l.attributes.start});"number"==typeof l.attributes.duration&&(h.periodDuration=l.attributes.duration);var v=Pr(l.node,"AdaptationSet"),S=ca(l.node);return pn(v.map(function(i,u,l){return function(t){var s=Di(t),h=Ao(u,Pr(t,"BaseURL")),v=Pr(t,"Role")[0],S={role:Di(v)},D=ge(i,s,S),F=Pr(t,"Accessibility")[0],ee=function(i){return"urn:scte:dash:cc:cea-608:2015"===i.schemeIdUri?("string"!=typeof i.value?[]:i.value.split(";")).map(function(t){var s,h;if(h=t,/^CC\d=/.test(t)){var v=t.split("=");s=v[0],h=v[1]}else/^CC\d$/.test(t)&&(s=t);return{channel:s,language:h}}):"urn:scte:dash:cc:cea-708:2015"===i.schemeIdUri?("string"!=typeof i.value?[]:i.value.split(";")).map(function(t){var s={channel:void 0,language:void 0,aspectRatio:1,easyReader:0,"3D":0};if(/=/.test(t)){var h=t.split("="),S=h[1],D=void 0===S?"":S;s.channel=h[0],s.language=t,D.split(",").forEach(function(F){var ee=F.split(":"),Y=ee[0],me=ee[1];"lang"===Y?s.language=me:"er"===Y?s.easyReader=Number(me):"war"===Y?s.aspectRatio=Number(me):"3D"===Y&&(s["3D"]=Number(me))})}else s.language=t;return s.channel&&(s.channel="SERVICE"+s.channel),s}):void 0}(Di(F));ee&&(D=ge(D,{captionServices:ee}));var Y=Pr(t,"Label")[0];if(Y&&Y.childNodes.length){var me=Y.childNodes[0].nodeValue.trim();D=ge(D,{label:me})}var Le=function(i){return i.reduce(function(u,l){var t=Di(l);t.schemeIdUri&&(t.schemeIdUri=t.schemeIdUri.toLowerCase());var s=Jo[t.schemeIdUri];if(s){u[s]={attributes:t};var h=Pr(l,"cenc:pssh")[0];if(h){var v=Uo(h);u[s].pssh=v&&jt(v)}}return u},{})}(Pr(t,"ContentProtection"));Object.keys(Le).length&&(D=ge(D,{contentProtection:Le}));var Be=ca(t),Ue=Pr(t,"Representation"),Gt=ge(l,Be);return pn(Ue.map(function(i,u,l){return function(t){var s=Pr(t,"BaseURL"),h=Ao(u,s),v=ge(i,Di(t)),S=ca(t);return h.map(function(D){return{segmentInfo:ge(l,S),attributes:ge(v,{baseUrl:D})}})}}(D,h,Gt)))}}(h,s,S)))}},Au=function(i){if(""===i)throw new Error("DASH_EMPTY_MANIFEST");var l,t,u=new we.DOMParser;try{t=(l=u.parseFromString(i,"application/xml"))&&"MPD"===l.documentElement.tagName?l.documentElement:null}catch{}if(!t||t&&t.getElementsByTagName("parsererror").length>0)throw new Error("DASH_INVALID_XML");return t},Bo=K(7459),Po=K.n(Bo),uo=kn([73,68,51]),hi=function g(i,u){return void 0===u&&(u=0),(i=kn(i)).length-u<10||!fn(i,uo,{offset:u})?u:(u+=function(i,u){void 0===u&&(u=0);var t=(i=kn(i))[u+6]<<21|i[u+7]<<14|i[u+8]<<7|i[u+9];return(16&i[u+5])>>4?t+20:t+10}(i,u),g(i,u))},Vo=(new Uint8Array([79,112,117,115,72,101,97,100]),function(i){return"string"==typeof i?$t(i):i}),ai=function(i){i=kn(i);for(var u=[],l=0;i.length>l;){var t=i[l],s=0,h=0,v=i[++h];for(h++;128&v;)s=(127&v)<<7,v=i[h],h++;s+=127&v;for(var S=0;S<ws.length;S++){var D=ws[S];if(t===D.id){u.push((0,D.parser)(i.subarray(h,h+s)));break}}l+=s+h}return u};ws=[{id:3,parser:function(i){var u={tag:3,id:i[0]<<8|i[1],flags:i[2],size:3,dependsOnEsId:0,ocrEsId:0,descriptors:[],url:""};if(128&u.flags&&(u.dependsOnEsId=i[u.size]<<8|i[u.size+1],u.size+=2),64&u.flags){var l=i[u.size];u.url=function(i){if(!i)return"";i=Array.prototype.slice.call(i);var u=String.fromCharCode.apply(null,kn(i));try{return decodeURIComponent(escape(u))}catch{}return u}(i.subarray(u.size+1,u.size+1+l)),u.size+=l}return 32&u.flags&&(u.ocrEsId=i[u.size]<<8|i[u.size+1],u.size+=2),u.descriptors=ai(i.subarray(u.size))||[],u}},{id:4,parser:function(i){return{tag:4,oti:i[0],streamType:i[1],bufferSize:i[2]<<16|i[3]<<8|i[4],maxBitrate:i[5]<<24|i[6]<<16|i[7]<<8|i[8],avgBitrate:i[9]<<24|i[10]<<16|i[11]<<8|i[12],descriptors:ai(i.subarray(13))}}},{id:5,parser:function(i){return{tag:5,bytes:i}}},{id:6,parser:function(i){return{tag:6,bytes:i}}}];var Hi=function g(i,u,l){void 0===l&&(l=!1),u=function(i){return Array.isArray(i)?i.map(function(u){return Vo(u)}):[Vo(i)]}(u),i=kn(i);var t=[];if(!u.length)return t;for(var s=0;s<i.length;){var h=(i[s]<<24|i[s+1]<<16|i[s+2]<<8|i[s+3])>>>0,v=i.subarray(s+4,s+8);if(0===h)break;var S=s+h;if(S>i.length){if(l)break;S=i.length}var D=i.subarray(s+8,S);fn(v,u[0])&&(1===u.length?t.push(D):t.push.apply(t,g(D,u.slice(1),l))),s=S}return t},vi={EBML:kn([26,69,223,163]),DocType:kn([66,130]),Segment:kn([24,83,128,103]),SegmentInfo:kn([21,73,169,102]),Tracks:kn([22,84,174,107]),Track:kn([174]),TrackNumber:kn([215]),DefaultDuration:kn([35,227,131]),TrackEntry:kn([174]),TrackType:kn([131]),FlagDefault:kn([136]),CodecID:kn([134]),CodecPrivate:kn([99,162]),VideoTrack:kn([224]),AudioTrack:kn([225]),Cluster:kn([31,67,182,117]),Timestamp:kn([231]),TimestampScale:kn([42,215,177]),BlockGroup:kn([160]),BlockDuration:kn([155]),Block:kn([161]),SimpleBlock:kn([163])},Cs=[128,64,32,16,8,4,2,1],_o=function(i,u,l,t){void 0===l&&(l=!0),void 0===t&&(t=!1);var s=function(i){for(var u=1,l=0;l<Cs.length&&!(i&Cs[l]);l++)u++;return u}(i[u]),h=i.subarray(u,u+s);return l&&((h=Array.prototype.slice.call(i,u,u+s))[0]^=Cs[s-1]),{length:s,value:tt(h,{signed:t}),bytes:h}},ta=function g(i){return"string"==typeof i?i.match(/.{1,2}/g).map(function(u){return g(u)}):"number"==typeof i?function(i,u){var t=(void 0===u?{}:u).le,s=void 0!==t&&t;("bigint"!=typeof i&&"number"!=typeof i||"number"==typeof i&&i!=i)&&(i=0);for(var h=function(i){return Math.ceil(function(i){return i.toString(2).length}(i)/8)}(i=yn(i)),v=new Uint8Array(new ArrayBuffer(h)),S=0;S<h;S++){var D=s?S:Math.abs(S+1-v.length);v[D]=Number(i/tr[S]&yn(255)),i<0&&(v[D]=Math.abs(~v[D]),v[D]-=0===S?1:2)}return v}(i):i},na=function g(i,u,l){if(l>=u.length)return u.length;var t=_o(u,l,!1);if(fn(i.bytes,t.bytes))return l;var s=_o(u,l+t.length);return g(i,u,l+s.length+s.value+t.length)},ji=function g(i,u){u=function(i){return Array.isArray(i)?i.map(function(u){return ta(u)}):[ta(i)]}(u),i=kn(i);var l=[];if(!u.length)return l;for(var t=0;t<i.length;){var s=_o(i,t,!1),h=_o(i,t+s.length),v=t+s.length+h.length;127===h.value&&(h.value=na(s,i,v),h.value!==i.length&&(h.value-=v));var D=i.subarray(v,v+h.value>i.length?i.length:v+h.value);fn(u[0],s.bytes)&&(1===u.length?l.push(D):l=l.concat(g(D,u.slice(1)))),t+=s.length+h.length+D.length}return l},q=kn([0,0,0,1]),O=kn([0,0,1]),H=kn([0,0,3]),be=function(i){for(var u=[],l=1;l<i.length-2;)fn(i.subarray(l,l+3),H)&&(u.push(l+2),l++),l++;if(0===u.length)return i;var t=i.length-u.length,s=new Uint8Array(t),h=0;for(l=0;l<t;h++,l++)h===u[0]&&(h++,u.shift()),s[l]=i[h];return s},Ve=function(i,u,l,t){void 0===t&&(t=1/0),i=kn(i),l=[].concat(l);for(var h,s=0,v=0;s<i.length&&(v<t||h);){var S=void 0;if(fn(i.subarray(s),q)?S=4:fn(i.subarray(s),O)&&(S=3),S){if(v++,h)return be(i.subarray(h,s));var D=void 0;"h264"===u?D=31&i[s+S]:"h265"===u&&(D=i[s+S]>>1&63),-1!==l.indexOf(D)&&(h=s+S),s+=S+("h264"===u?1:2)}else s++}return i.subarray(0,0)},Jt={webm:kn([119,101,98,109]),matroska:kn([109,97,116,114,111,115,107,97]),flac:kn([102,76,97,67]),ogg:kn([79,103,103,83]),ac3:kn([11,119]),riff:kn([82,73,70,70]),avi:kn([65,86,73]),wav:kn([87,65,86,69]),"3gp":kn([102,116,121,112,51,103]),mp4:kn([102,116,121,112]),fmp4:kn([115,116,121,112]),mov:kn([102,116,121,112,113,116]),moov:kn([109,111,111,118]),moof:kn([109,111,111,102])},wn={aac:function(i){var u=hi(i);return fn(i,[255,16],{offset:u,mask:[255,22]})},mp3:function(i){var u=hi(i);return fn(i,[255,2],{offset:u,mask:[255,6]})},webm:function(i){var u=ji(i,[vi.EBML,vi.DocType])[0];return fn(u,Jt.webm)},mkv:function(i){var u=ji(i,[vi.EBML,vi.DocType])[0];return fn(u,Jt.matroska)},mp4:function(i){return!wn["3gp"](i)&&!wn.mov(i)&&(!!(fn(i,Jt.mp4,{offset:4})||fn(i,Jt.fmp4,{offset:4})||fn(i,Jt.moof,{offset:4})||fn(i,Jt.moov,{offset:4}))||void 0)},mov:function(i){return fn(i,Jt.mov,{offset:4})},"3gp":function(i){return fn(i,Jt["3gp"],{offset:4})},ac3:function(i){var u=hi(i);return fn(i,Jt.ac3,{offset:u})},ts:function(i){if(i.length<189&&i.length>=1)return 71===i[0];for(var u=0;u+188<i.length&&u<188;){if(71===i[u]&&71===i[u+188])return!0;u+=1}return!1},flac:function(i){var u=hi(i);return fn(i,Jt.flac,{offset:u})},ogg:function(i){return fn(i,Jt.ogg)},avi:function(i){return fn(i,Jt.riff)&&fn(i,Jt.avi,{offset:8})},wav:function(i){return fn(i,Jt.riff)&&fn(i,Jt.wav,{offset:8})},h264:function(i){return function(i,u,l){return Ve(i,"h264",7,3)}(i).length},h265:function(i){return function(i,u,l){return Ve(i,"h265",[32,33],3)}(i).length}},xn=Object.keys(wn).filter(function(g){return"ts"!==g&&"h264"!==g&&"h265"!==g}).concat(["ts","h264","h265"]);xn.forEach(function(g){var i=wn[g];wn[g]=function(u){return i(kn(u))}});var yr=wn,zr=function(i){i=kn(i);for(var u=0;u<xn.length;u++){var l=xn[u];if(yr[l](i))return l}return""},Ai=K(6277);function Ui(g){return(Ui=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(u){return u.__proto__||Object.getPrototypeOf(u)})(g)}function Hs(g){var i="function"==typeof Map?new Map:void 0;return Hs=function(l){if(null===l||!function ps(g){return-1!==Function.toString.call(g).indexOf("[native code]")}(l))return l;if("function"!=typeof l)throw new TypeError("Super expression must either be null or a function");if(typeof i<"u"){if(i.has(l))return i.get(l);i.set(l,t)}function t(){return st(l,arguments,Ui(this).constructor)}return t.prototype=Object.create(l.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),Fe(t,l)},Hs(g)}for(var ga,ts="7.21.4",Wr={},Pi=function(i,u){return Wr[i]=Wr[i]||[],u&&(Wr[i]=Wr[i].concat(u)),Wr[i]},Gi=function(i,u){var l=Pi(i).indexOf(u);return!(l<=-1||(Wr[i]=Wr[i].slice(),Wr[i].splice(l,1),0))},Ho={prefixed:!0},To=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror","fullscreen"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror","-webkit-full-screen"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror","-moz-full-screen"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError","-ms-fullscreen"]],pa=To[0],au=0;au<To.length;au++)if(To[au][1]in et()){ga=To[au];break}if(ga){for(var ma=0;ma<ga.length;ma++)Ho[pa[ma]]=ga[ma];Ho.prefixed=ga[0]!==pa[0]}var io=[],qr=function il(g){var u,i="info",l=function(){for(var s=arguments.length,h=new Array(s),v=0;v<s;v++)h[v]=arguments[v];u("log",i,h)};return u=function(i,u){return function(l,t,s){var h=u.levels[t],v=new RegExp("^("+h+")$");if("log"!==l&&s.unshift(l.toUpperCase()+":"),s.unshift(i+":"),io){io.push([].concat(s));var S=io.length-1e3;io.splice(0,S>0?S:0)}if(ae().console){var D=ae().console[l];!D&&"debug"===l&&(D=ae().console.info||ae().console.log),D&&h&&v.test(l)&&D[Array.isArray(s)?"apply":"call"](ae().console,s)}}}(g,l),l.createLogger=function(t){return il(g+": "+t)},l.levels={all:"debug|log|warn|error",off:"",debug:"debug|log|warn|error",info:"log|warn|error",warn:"warn|error",error:"error",DEFAULT:i},l.level=function(t){if("string"==typeof t){if(!l.levels.hasOwnProperty(t))throw new Error('"'+t+'" in not a valid log level');i=t}return i},(l.history=function(){return io?[].concat(io):[]}).filter=function(t){return(io||[]).filter(function(s){return new RegExp(".*"+t+".*").test(s[0])})},l.history.clear=function(){io&&(io.length=0)},l.history.disable=function(){null!==io&&(io.length=0,io=null)},l.history.enable=function(){null===io&&(io=[])},l.error=function(){for(var t=arguments.length,s=new Array(t),h=0;h<t;h++)s[h]=arguments[h];return u("error",i,s)},l.warn=function(){for(var t=arguments.length,s=new Array(t),h=0;h<t;h++)s[h]=arguments[h];return u("warn",i,s)},l.debug=function(){for(var t=arguments.length,s=new Array(t),h=0;h<t;h++)s[h]=arguments[h];return u("debug",i,s)},l}("VIDEOJS"),Ga=qr.createLogger,Il=Object.prototype.toString,sl=function(i){return ia(i)?Object.keys(i):[]};function uu(g,i){sl(g).forEach(function(u){return i(g[u],u)})}function Ls(g){for(var i=arguments.length,u=new Array(i>1?i-1:0),l=1;l<i;l++)u[l-1]=arguments[l];return Object.assign?at.apply(void 0,[g].concat(u)):(u.forEach(function(t){t&&uu(t,function(s,h){g[h]=s})}),g)}function ia(g){return!!g&&"object"==typeof g}function Pu(g){return ia(g)&&"[object Object]"===Il.call(g)&&g.constructor===Object}function so(g,i){if(!g||!i)return"";if("function"==typeof ae().getComputedStyle){var u;try{u=ae().getComputedStyle(g)}catch{return""}return u?u.getPropertyValue(i)||u[i]:""}return""}var gs=ae().navigator&&ae().navigator.userAgent||"",us=/AppleWebKit\/([\d.]+)/i.exec(gs),$a=us?parseFloat(us.pop()):null,Mo=/iPod/i.test(gs),lo=function(){var g=gs.match(/OS (\d+)_/i);return g&&g[1]?g[1]:null}(),za=/Android/i.test(gs),Mu=function(){var g=gs.match(/Android (\d+)(?:\.(\d+))?(?:\.(\d+))*/i);if(!g)return null;var i=g[1]&&parseFloat(g[1]),u=g[2]&&parseFloat(g[2]);return i&&u?parseFloat(g[1]+"."+g[2]):i||null}(),Mc=za&&Mu<5&&$a<537,Ou=/Firefox/i.test(gs),sa=/Edg/i.test(gs),va=!sa&&(/Chrome/i.test(gs)||/CriOS/i.test(gs)),V=function(){var g=gs.match(/(Chrome|CriOS)\/(\d+)/);return g&&g[2]?parseFloat(g[2]):null}(),oe=function(){var g=/MSIE\s(\d+)\.\d/.exec(gs),i=g&&parseFloat(g[1]);return!i&&/Trident\/7.0/i.test(gs)&&/rv:11.0/.test(gs)&&(i=11),i}(),W=/Safari/i.test(gs)&&!va&&!za&&!sa,Ee=/Windows/i.test(gs),Qe=Boolean(gr()&&("ontouchstart"in ae()||ae().navigator.maxTouchPoints||ae().DocumentTouch&&ae().document instanceof ae().DocumentTouch)),Ft=/iPad/i.test(gs)||W&&Qe&&!/iPhone/i.test(gs),qt=/iPhone/i.test(gs)&&!Ft,Rn=qt||Ft||Mo,Nr=(W||Rn)&&!va,Ii=Object.freeze({__proto__:null,IS_IPOD:Mo,IOS_VERSION:lo,IS_ANDROID:za,ANDROID_VERSION:Mu,IS_NATIVE_ANDROID:Mc,IS_FIREFOX:Ou,IS_EDGE:sa,IS_CHROME:va,CHROME_VERSION:V,IE_VERSION:oe,IS_SAFARI:W,IS_WINDOWS:Ee,TOUCH_ENABLED:Qe,IS_IPAD:Ft,IS_IPHONE:qt,IS_IOS:Rn,IS_ANY_SAFARI:Nr});function Bi(g){return"string"==typeof g&&Boolean(g.trim())}function Kt(g){if(g.indexOf(" ")>=0)throw new Error("class has illegal whitespace characters")}function gr(){return et()===ae().document}function Mi(g){return ia(g)&&1===g.nodeType}function Fn(){try{return ae().parent!==ae().self}catch{return!0}}function Vn(g){return function(i,u){if(!Bi(i))return et()[g](null);Bi(u)&&(u=et().querySelector(u));var l=Mi(u)?u:et();return l[g]&&l[g](i)}}function Kr(g,i,u,l){void 0===g&&(g="div"),void 0===i&&(i={}),void 0===u&&(u={});var t=et().createElement(g);return Object.getOwnPropertyNames(i).forEach(function(s){var h=i[s];-1!==s.indexOf("aria-")||"role"===s||"type"===s?(qr.warn("Setting attributes in the second argument of createEl()\nhas been deprecated. Use the third argument instead.\ncreateEl(type, properties, attributes). Attempting to set "+s+" to "+h+"."),t.setAttribute(s,h)):"textContent"===s?Cn(t,h):(t[s]!==h||"tabIndex"===s)&&(t[s]=h)}),Object.getOwnPropertyNames(u).forEach(function(s){t.setAttribute(s,u[s])}),l&&ur(t,l),t}function Cn(g,i){return typeof g.textContent>"u"?g.innerText=i:g.textContent=i,g}function Bt(g,i){i.firstChild?i.insertBefore(g,i.firstChild):i.appendChild(g)}function un(g,i){return Kt(i),g.classList?g.classList.contains(i):function si(g){return new RegExp("(^|\\s)"+g+"($|\\s)")}(i).test(g.className)}function Oi(g,i){return g.classList?g.classList.add(i):un(g,i)||(g.className=(g.className+" "+i).trim()),g}function Ma(g,i){return g?(g.classList?g.classList.remove(i):(Kt(i),g.className=g.className.split(/\s+/).filter(function(u){return u!==i}).join(" ")),g):(qr.warn("removeClass was called with an element that doesn't exist"),null)}function Dl(g,i,u){var l=un(g,i);if("function"==typeof u&&(u=u(g,i)),"boolean"!=typeof u&&(u=!l),u!==l)return u?Oi(g,i):Ma(g,i),g}function ol(g,i){Object.getOwnPropertyNames(i).forEach(function(u){var l=i[u];null===l||typeof l>"u"||!1===l?g.removeAttribute(u):g.setAttribute(u,!0===l?"":l)})}function Oa(g){var i={};if(g&&g.attributes&&g.attributes.length>0)for(var l=g.attributes,t=l.length-1;t>=0;t--){var s=l[t].name,h=l[t].value;("boolean"==typeof g[s]||-1!==",autoplay,controls,playsinline,loop,muted,default,defaultMuted,".indexOf(","+s+","))&&(h=null!==h),i[s]=h}return i}function Bl(g,i){return g.getAttribute(i)}function lu(g,i,u){g.setAttribute(i,u)}function Go(g,i){g.removeAttribute(i)}function uc(){et().body.focus(),et().onselectstart=function(){return!1}}function zu(){et().onselectstart=function(){return!0}}function Wa(g){if(g&&g.getBoundingClientRect&&g.parentNode){var i=g.getBoundingClientRect(),u={};return["bottom","height","left","right","top","width"].forEach(function(l){void 0!==i[l]&&(u[l]=i[l])}),u.height||(u.height=parseFloat(so(g,"height"))),u.width||(u.width=parseFloat(so(g,"width"))),u}}function ku(g){if(!g||g&&!g.offsetParent)return{left:0,top:0,width:0,height:0};for(var i=g.offsetWidth,u=g.offsetHeight,l=0,t=0;g.offsetParent&&g!==et()[Ho.fullscreenElement];)l+=g.offsetLeft,t+=g.offsetTop,g=g.offsetParent;return{left:l,top:t,width:i,height:u}}function Mr(g,i){var u={x:0,y:0};if(Rn)for(var l=g;l&&"html"!==l.nodeName.toLowerCase();){var t=so(l,"transform");if(/^matrix/.test(t)){var s=t.slice(7,-1).split(/,\s/).map(Number);u.x+=s[4],u.y+=s[5]}else if(/^matrix3d/.test(t)){var h=t.slice(9,-1).split(/,\s/).map(Number);u.x+=h[12],u.y+=h[13]}l=l.parentNode}var v={},S=ku(i.target),D=ku(g),F=D.width,Y=i.offsetY-(D.top-S.top),me=i.offsetX-(D.left-S.left);return i.changedTouches&&(me=i.changedTouches[0].pageX-D.left,Y=i.changedTouches[0].pageY+D.top,Rn&&(me-=u.x,Y-=u.y)),v.y=1-Math.max(0,Math.min(1,Y/D.height)),v.x=Math.max(0,Math.min(1,me/F)),v}function Ru(g){return ia(g)&&3===g.nodeType}function Oo(g){for(;g.firstChild;)g.removeChild(g.firstChild);return g}function zi(g){return"function"==typeof g&&(g=g()),(Array.isArray(g)?g:[g]).map(function(i){return"function"==typeof i&&(i=i()),Mi(i)||Ru(i)?i:"string"==typeof i&&/\S/.test(i)?et().createTextNode(i):void 0}).filter(function(i){return i})}function ur(g,i){return zi(i).forEach(function(u){return g.appendChild(u)}),g}function Wu(g,i){return ur(Oo(g),i)}function Ur(g){return void 0===g.button&&void 0===g.buttons||0===g.button&&void 0===g.buttons||"mouseup"===g.type&&0===g.button&&0===g.buttons||!(0!==g.button||1!==g.buttons)}var Nu,qa=Vn("querySelector"),_s=Vn("querySelectorAll"),Mn=Object.freeze({__proto__:null,isReal:gr,isEl:Mi,isInFrame:Fn,createEl:Kr,textContent:Cn,prependTo:Bt,hasClass:un,addClass:Oi,removeClass:Ma,toggleClass:Dl,setAttributes:ol,getAttributes:Oa,getAttribute:Bl,setAttribute:lu,removeAttribute:Go,blockTextSelection:uc,unblockTextSelection:zu,getBoundingClientRect:Wa,findPosition:ku,getPointerPosition:Mr,isTextNode:Ru,emptyEl:Oo,normalizeContent:zi,appendContent:ur,insertContent:Wu,isSingleLeftClick:Ur,$:qa,$$:_s}),al=!1,$o=function(){if(!1!==Nu.options.autoSetup){var i=Array.prototype.slice.call(et().getElementsByTagName("video")),u=Array.prototype.slice.call(et().getElementsByTagName("audio")),l=Array.prototype.slice.call(et().getElementsByTagName("video-js")),t=i.concat(u,l);if(t&&t.length>0)for(var s=0,h=t.length;s<h;s++){var v=t[s];if(!v||!v.getAttribute){Is(1);break}void 0===v.player&&null!==v.getAttribute("data-setup")&&Nu(v)}else al||Is(1)}};function Is(g,i){gr()&&(i&&(Nu=i),ae().setTimeout($o,g))}function Vl(){al=!0,ae().removeEventListener("load",Vl)}gr()&&("complete"===et().readyState?Vl():ae().addEventListener("load",Vl));var cu,qu=function(i){var u=et().createElement("style");return u.className=i,u},ul=function(i,u){i.styleSheet?i.styleSheet.cssText=u:i.textContent=u},_u=3;function xs(){return _u++}ae().WeakMap||(cu=function(){function g(){this.vdata="vdata"+Math.floor(ae().performance&&ae().performance.now()||Date.now()),this.data={}}var i=g.prototype;return i.set=function(l,t){var s=l[this.vdata]||xs();return l[this.vdata]||(l[this.vdata]=s),this.data[s]=t,this},i.get=function(l){var t=l[this.vdata];if(t)return this.data[t];qr("We have no data for this element",l)},i.has=function(l){return l[this.vdata]in this.data},i.delete=function(l){var t=l[this.vdata];t&&(delete this.data[t],delete l[this.vdata])},g}());var bo=ae().WeakMap?new WeakMap:new cu;function Al(g,i){if(bo.has(g)){var u=bo.get(g);0===u.handlers[i].length&&(delete u.handlers[i],g.removeEventListener?g.removeEventListener(i,u.dispatcher,!1):g.detachEvent&&g.detachEvent("on"+i,u.dispatcher)),Object.getOwnPropertyNames(u.handlers).length<=0&&(delete u.handlers,delete u.dispatcher,delete u.disabled),0===Object.getOwnPropertyNames(u).length&&bo.delete(g)}}function Ka(g,i,u,l){u.forEach(function(t){g(i,t,l)})}function Ku(g){if(g.fixed_)return g;function i(){return!0}function u(){return!1}if(!g||!g.isPropagationStopped||!g.isImmediatePropagationStopped){var l=g||ae().event;for(var t in g={},l)"layerX"!==t&&"layerY"!==t&&"keyLocation"!==t&&"webkitMovementX"!==t&&"webkitMovementY"!==t&&"path"!==t&&("returnValue"===t&&l.preventDefault||(g[t]=l[t]));if(g.target||(g.target=g.srcElement||et()),g.relatedTarget||(g.relatedTarget=g.fromElement===g.target?g.toElement:g.fromElement),g.preventDefault=function(){l.preventDefault&&l.preventDefault(),g.returnValue=!1,l.returnValue=!1,g.defaultPrevented=!0},g.defaultPrevented=!1,g.stopPropagation=function(){l.stopPropagation&&l.stopPropagation(),g.cancelBubble=!0,l.cancelBubble=!0,g.isPropagationStopped=i},g.isPropagationStopped=u,g.stopImmediatePropagation=function(){l.stopImmediatePropagation&&l.stopImmediatePropagation(),g.isImmediatePropagationStopped=i,g.stopPropagation()},g.isImmediatePropagationStopped=u,null!=g.clientX){var s=et().documentElement,h=et().body;g.pageX=g.clientX+(s&&s.scrollLeft||h&&h.scrollLeft||0)-(s&&s.clientLeft||h&&h.clientLeft||0),g.pageY=g.clientY+(s&&s.scrollTop||h&&h.scrollTop||0)-(s&&s.clientTop||h&&h.clientTop||0)}g.which=g.charCode||g.keyCode,null!=g.button&&(g.button=1&g.button?0:4&g.button?1:2&g.button?2:0)}return g.fixed_=!0,g}var Lt,Oc=function(){if("boolean"!=typeof Lt){Lt=!1;try{var i=Object.defineProperty({},"passive",{get:function(){Lt=!0}});ae().addEventListener("test",null,i),ae().removeEventListener("test",null,i)}catch{}}return Lt},Za=["touchstart","touchmove"];function fi(g,i,u){if(Array.isArray(i))return Ka(fi,g,i,u);bo.has(g)||bo.set(g,{});var l=bo.get(g);if(l.handlers||(l.handlers={}),l.handlers[i]||(l.handlers[i]=[]),u.guid||(u.guid=xs()),l.handlers[i].push(u),l.dispatcher||(l.disabled=!1,l.dispatcher=function(s,h){if(!l.disabled){s=Ku(s);var v=l.handlers[s.type];if(v)for(var S=v.slice(0),D=0,F=S.length;D<F&&!s.isImmediatePropagationStopped();D++)try{S[D].call(g,s,h)}catch(ee){qr.error(ee)}}}),1===l.handlers[i].length)if(g.addEventListener){var t=!1;Oc()&&Za.indexOf(i)>-1&&(t={passive:!0}),g.addEventListener(i,l.dispatcher,t)}else g.attachEvent&&g.attachEvent("on"+i,l.dispatcher)}function Gs(g,i,u){if(bo.has(g)){var l=bo.get(g);if(l.handlers){if(Array.isArray(i))return Ka(Gs,g,i,u);var t=function(D,F){l.handlers[F]=[],Al(D,F)};if(void 0===i){for(var s in l.handlers)Object.prototype.hasOwnProperty.call(l.handlers||{},s)&&t(g,s);return}var h=l.handlers[i];if(h){if(!u)return void t(g,i);if(u.guid)for(var v=0;v<h.length;v++)h[v].guid===u.guid&&h.splice(v--,1);Al(g,i)}}}}function Ya(g,i,u){var l=bo.has(g)?bo.get(g):{},t=g.parentNode||g.ownerDocument;if("string"==typeof i?i={type:i,target:g}:i.target||(i.target=g),i=Ku(i),l.dispatcher&&l.dispatcher.call(g,i,u),t&&!i.isPropagationStopped()&&!0===i.bubbles)Ya.call(null,t,i,u);else if(!t&&!i.defaultPrevented&&i.target&&i.target[i.type]){bo.has(i.target)||bo.set(i.target,{});var s=bo.get(i.target);i.target[i.type]&&(s.disabled=!0,"function"==typeof i.target[i.type]&&i.target[i.type](),s.disabled=!1)}return!i.defaultPrevented}function cc(g,i,u){if(Array.isArray(i))return Ka(cc,g,i,u);var l=function t(){Gs(g,i,t),u.apply(this,arguments)};l.guid=u.guid=u.guid||xs(),fi(g,i,l)}function Pl(g,i,u){var l=function t(){Gs(g,i,t),u.apply(this,arguments)};l.guid=u.guid=u.guid||xs(),fi(g,i,l)}var $i,fd=Object.freeze({__proto__:null,fixEvent:Ku,on:fi,off:Gs,trigger:Ya,one:cc,any:Pl}),Eo=30,Ds=function(i,u,l){u.guid||(u.guid=xs());var t=u.bind(i);return t.guid=l?l+"_"+u.guid:u.guid,t},ka=function(i,u){var l=ae().performance.now();return function(){var h=ae().performance.now();h-l>=u&&(i.apply(void 0,arguments),l=h)}},ya=function(i,u,l,t){void 0===t&&(t=ae());var s,v=function(){var D=this,F=arguments,ee=function(){s=null,ee=null,l||i.apply(D,F)};!s&&l&&i.apply(D,F),t.clearTimeout(s),s=t.setTimeout(ee,u)};return v.cancel=function(){t.clearTimeout(s),s=null},v},oo=function(){};oo.prototype.allowedEvents_={},oo.prototype.on=function(g,i){var u=this.addEventListener;this.addEventListener=function(){},fi(this,g,i),this.addEventListener=u},oo.prototype.addEventListener=oo.prototype.on,oo.prototype.off=function(g,i){Gs(this,g,i)},oo.prototype.removeEventListener=oo.prototype.off,oo.prototype.one=function(g,i){var u=this.addEventListener;this.addEventListener=function(){},cc(this,g,i),this.addEventListener=u},oo.prototype.any=function(g,i){var u=this.addEventListener;this.addEventListener=function(){},Pl(this,g,i),this.addEventListener=u},oo.prototype.trigger=function(g){var i=g.type||g;"string"==typeof g&&(g={type:i}),g=Ku(g),this.allowedEvents_[i]&&this["on"+i]&&this["on"+i](g),Ya(this,g)},oo.prototype.dispatchEvent=oo.prototype.trigger,oo.prototype.queueTrigger=function(g){var i=this;$i||($i=new Map);var u=g.type||g,l=$i.get(this);l||$i.set(this,l=new Map);var t=l.get(u);l.delete(u),ae().clearTimeout(t);var s=ae().setTimeout(function(){l.delete(u),0===l.size&&(l=null,$i.delete(i)),i.trigger(g)},0);l.set(u,s)};var Zu=function(i){return"function"==typeof i.name?i.name():"string"==typeof i.name?i.name:i.name_?i.name_:i.constructor&&i.constructor.name?i.constructor.name:typeof i},Ra=function(i){return i instanceof oo||!!i.eventBusEl_&&["on","one","off","trigger"].every(function(u){return"function"==typeof i[u]})},zo=function(i){return"string"==typeof i&&/\S/.test(i)||Array.isArray(i)&&!!i.length},co=function(i,u,l){if(!i||!i.nodeName&&!Ra(i))throw new Error("Invalid target for "+Zu(u)+"#"+l+"; must be a DOM node or evented object.")},Yu=function(i,u,l){if(!zo(i))throw new Error("Invalid event type for "+Zu(u)+"#"+l+"; must be a non-empty string or array.")},du=function(i,u,l){if("function"!=typeof i)throw new Error("Invalid listener for "+Zu(u)+"#"+l+"; must be a function.")},Qa=function(i,u,l){var s,h,v,t=u.length<3||u[0]===i||u[0]===i.eventBusEl_;return t?(s=i.eventBusEl_,u.length>=3&&u.shift(),h=u[0],v=u[1]):(s=u[0],h=u[1],v=u[2]),co(s,i,l),Yu(h,i,l),du(v,i,l),{isTargetingSelf:t,target:s,type:h,listener:v=Ds(i,v)}},P=function(i,u,l,t){co(i,i,u),i.nodeName?fd[u](i,l,t):i[u](l,t)},R={on:function(){for(var i=this,u=arguments.length,l=new Array(u),t=0;t<u;t++)l[t]=arguments[t];var s=Qa(this,l,"on"),h=s.isTargetingSelf,v=s.target,S=s.type,D=s.listener;if(P(v,"on",S,D),!h){var F=function(){return i.off(v,S,D)};F.guid=D.guid;var ee=function(){return i.off("dispose",F)};ee.guid=D.guid,P(this,"on","dispose",F),P(v,"on","dispose",ee)}},one:function(){for(var i=this,u=arguments.length,l=new Array(u),t=0;t<u;t++)l[t]=arguments[t];var s=Qa(this,l,"one"),v=s.target,S=s.type,D=s.listener;if(s.isTargetingSelf)P(v,"one",S,D);else{var F=function ee(){i.off(v,S,ee);for(var Y=arguments.length,me=new Array(Y),Le=0;Le<Y;Le++)me[Le]=arguments[Le];D.apply(null,me)};F.guid=D.guid,P(v,"one",S,F)}},any:function(){for(var i=this,u=arguments.length,l=new Array(u),t=0;t<u;t++)l[t]=arguments[t];var s=Qa(this,l,"any"),v=s.target,S=s.type,D=s.listener;if(s.isTargetingSelf)P(v,"any",S,D);else{var F=function ee(){i.off(v,S,ee);for(var Y=arguments.length,me=new Array(Y),Le=0;Le<Y;Le++)me[Le]=arguments[Le];D.apply(null,me)};F.guid=D.guid,P(v,"any",S,F)}},off:function(i,u,l){if(!i||zo(i))Gs(this.eventBusEl_,i,u);else{var t=i,s=u;co(t,this,"off"),Yu(s,this,"off"),du(l,this,"off"),l=Ds(this,l),this.off("dispose",l),t.nodeName?(Gs(t,s,l),Gs(t,"dispose",l)):Ra(t)&&(t.off(s,l),t.off("dispose",l))}},trigger:function(i,u){if(co(this.eventBusEl_,this,"trigger"),!zo(i&&"string"!=typeof i?i.type:i)){var t="Invalid event type for "+Zu(this)+"#trigger; must be a non-empty string or object with a type key that has a non-empty value.";if(!i)throw new Error(t);(this.log||qr).error(t)}return Ya(this.eventBusEl_,i,u)}};function C(g,i){void 0===i&&(i={});var l=i.eventBusKey;if(l){if(!g[l].nodeName)throw new Error('The eventBusKey "'+l+'" does not refer to an element.');g.eventBusEl_=g[l]}else g.eventBusEl_=Kr("span",{className:"vjs-event-bus"});return Ls(g,R),g.eventedCallbacks&&g.eventedCallbacks.forEach(function(t){t()}),g.on("dispose",function(){g.off(),[g,g.el_,g.eventBusEl_].forEach(function(t){t&&bo.has(t)&&bo.delete(t)}),ae().setTimeout(function(){g.eventBusEl_=null},0)}),g}var B={state:{},setState:function(i){var l,u=this;return"function"==typeof i&&(i=i()),uu(i,function(t,s){u.state[s]!==t&&((l=l||{})[s]={from:u.state[s],to:t}),u.state[s]=t}),l&&Ra(this)&&this.trigger({changes:l,type:"statechanged"}),l}};function Q(g,i){return Ls(g,B),g.state=Ls({},g.state,i),"function"==typeof g.handleStateChanged&&Ra(g)&&g.on("statechanged",g.handleStateChanged),g}var pe=function(i){return"string"!=typeof i?i:i.replace(/./,function(u){return u.toLowerCase()})},ve=function(i){return"string"!=typeof i?i:i.replace(/./,function(u){return u.toUpperCase()})};function Wt(){for(var g={},i=arguments.length,u=new Array(i),l=0;l<i;l++)u[l]=arguments[l];return u.forEach(function(t){t&&uu(t,function(s,h){Pu(s)?(Pu(g[h])||(g[h]={}),g[h]=Wt(g[h],s)):g[h]=s})}),g}var zn=function(){function g(){this.map_={}}var i=g.prototype;return i.has=function(l){return l in this.map_},i.delete=function(l){var t=this.has(l);return delete this.map_[l],t},i.set=function(l,t){return this.map_[l]=t,this},i.forEach=function(l,t){for(var s in this.map_)l.call(t,this.map_[s],s,this)},g}(),jn=ae().Map?ae().Map:zn,ui=function(){function g(){this.set_={}}var i=g.prototype;return i.has=function(l){return l in this.set_},i.delete=function(l){var t=this.has(l);return delete this.set_[l],t},i.add=function(l){return this.set_[l]=1,this},i.forEach=function(l,t){for(var s in this.set_)l.call(t,s,s,this)},g}(),Wi=ae().Set?ae().Set:ui,dn=function(){function g(u,l,t){var s=this;if(this.player_=!u&&this.play?u=this:u,this.isDisposed_=!1,this.parentComponent_=null,this.options_=Wt({},this.options_),l=this.options_=Wt(this.options_,l),this.id_=l.id||l.el&&l.el.id,!this.id_){var h=u&&u.id&&u.id()||"no_player";this.id_=h+"_component_"+xs()}this.name_=l.name||null,l.el?this.el_=l.el:!1!==l.createEl&&(this.el_=this.createEl()),l.className&&this.el_&&l.className.split(" ").forEach(function(v){return s.addClass(v)}),!1!==l.evented&&(C(this,{eventBusKey:this.el_?"el_":null}),this.handleLanguagechange=this.handleLanguagechange.bind(this),this.on(this.player_,"languagechange",this.handleLanguagechange)),Q(this,this.constructor.defaultState),this.children_=[],this.childIndex_={},this.childNameIndex_={},this.setTimeoutIds_=new Wi,this.setIntervalIds_=new Wi,this.rafIds_=new Wi,this.namedRafs_=new jn,this.clearingTimersOnDispose_=!1,!1!==l.initChildren&&this.initChildren(),this.ready(t),!1!==l.reportTouchActivity&&this.enableTouchActivity()}var i=g.prototype;return i.dispose=function(l){if(void 0===l&&(l={}),!this.isDisposed_){if(this.readyQueue_&&(this.readyQueue_.length=0),this.trigger({type:"dispose",bubbles:!1}),this.isDisposed_=!0,this.children_)for(var t=this.children_.length-1;t>=0;t--)this.children_[t].dispose&&this.children_[t].dispose();this.children_=null,this.childIndex_=null,this.childNameIndex_=null,this.parentComponent_=null,this.el_&&(this.el_.parentNode&&(l.restoreEl?this.el_.parentNode.replaceChild(l.restoreEl,this.el_):this.el_.parentNode.removeChild(this.el_)),this.el_=null),this.player_=null}},i.isDisposed=function(){return Boolean(this.isDisposed_)},i.player=function(){return this.player_},i.options=function(l){return l?(this.options_=Wt(this.options_,l),this.options_):this.options_},i.el=function(){return this.el_},i.createEl=function(l,t,s){return Kr(l,t,s)},i.localize=function(l,t,s){void 0===s&&(s=l);var h=this.player_.language&&this.player_.language(),v=this.player_.languages&&this.player_.languages(),S=v&&v[h],D=h&&h.split("-")[0],F=v&&v[D],ee=s;return S&&S[l]?ee=S[l]:F&&F[l]&&(ee=F[l]),t&&(ee=ee.replace(/\{(\d+)\}/g,function(Y,me){var Le=t[me-1],Be=Le;return typeof Le>"u"&&(Be=Y),Be})),ee},i.handleLanguagechange=function(){},i.contentEl=function(){return this.contentEl_||this.el_},i.id=function(){return this.id_},i.name=function(){return this.name_},i.children=function(){return this.children_},i.getChildById=function(l){return this.childIndex_[l]},i.getChild=function(l){if(l)return this.childNameIndex_[l]},i.getDescendant=function(){for(var l=arguments.length,t=new Array(l),s=0;s<l;s++)t[s]=arguments[s];t=t.reduce(function(S,D){return S.concat(D)},[]);for(var h=this,v=0;v<t.length;v++)if(!(h=h.getChild(t[v]))||!h.getChild)return;return h},i.addChild=function(l,t,s){var h,v;if(void 0===t&&(t={}),void 0===s&&(s=this.children_.length),"string"==typeof l){v=ve(l);var S=t.componentClass||v;t.name=v;var D=g.getComponent(S);if(!D)throw new Error("Component "+S+" does not exist");if("function"!=typeof D)return null;h=new D(this.player_||this,t)}else h=l;if(h.parentComponent_&&h.parentComponent_.removeChild(h),this.children_.splice(s,0,h),h.parentComponent_=this,"function"==typeof h.id&&(this.childIndex_[h.id()]=h),(v=v||h.name&&ve(h.name()))&&(this.childNameIndex_[v]=h,this.childNameIndex_[pe(v)]=h),"function"==typeof h.el&&h.el()){var F=null;this.children_[s+1]&&(this.children_[s+1].el_?F=this.children_[s+1].el_:Mi(this.children_[s+1])&&(F=this.children_[s+1])),this.contentEl().insertBefore(h.el(),F)}return h},i.removeChild=function(l){if("string"==typeof l&&(l=this.getChild(l)),l&&this.children_){for(var t=!1,s=this.children_.length-1;s>=0;s--)if(this.children_[s]===l){t=!0,this.children_.splice(s,1);break}if(t){l.parentComponent_=null,this.childIndex_[l.id()]=null,this.childNameIndex_[ve(l.name())]=null,this.childNameIndex_[pe(l.name())]=null;var h=l.el();h&&h.parentNode===this.contentEl()&&this.contentEl().removeChild(l.el())}}},i.initChildren=function(){var l=this,t=this.options_.children;if(t){var v,s=this.options_,S=g.getComponent("Tech");(v=Array.isArray(t)?t:Object.keys(t)).concat(Object.keys(this.options_).filter(function(D){return!v.some(function(F){return"string"==typeof F?D===F:D===F.name})})).map(function(D){var F,ee;return"string"==typeof D?ee=t[F=D]||l.options_[F]||{}:(F=D.name,ee=D),{name:F,opts:ee}}).filter(function(D){var F=g.getComponent(D.opts.componentClass||ve(D.name));return F&&!S.isTech(F)}).forEach(function(F){var ee=F.name,Y=F.opts;if(void 0!==s[ee]&&(Y=s[ee]),!1!==Y){!0===Y&&(Y={}),Y.playerOptions=l.options_.playerOptions;var me=l.addChild(ee,Y);me&&(l[ee]=me)}})}},i.buildCSSClass=function(){return""},i.ready=function(l,t){if(void 0===t&&(t=!1),l){if(!this.isReady_)return this.readyQueue_=this.readyQueue_||[],void this.readyQueue_.push(l);t?l.call(this):this.setTimeout(l,1)}},i.triggerReady=function(){this.isReady_=!0,this.setTimeout(function(){var l=this.readyQueue_;this.readyQueue_=[],l&&l.length>0&&l.forEach(function(t){t.call(this)},this),this.trigger("ready")},1)},i.$=function(l,t){return qa(l,t||this.contentEl())},i.$$=function(l,t){return _s(l,t||this.contentEl())},i.hasClass=function(l){return un(this.el_,l)},i.addClass=function(l){Oi(this.el_,l)},i.removeClass=function(l){Ma(this.el_,l)},i.toggleClass=function(l,t){Dl(this.el_,l,t)},i.show=function(){this.removeClass("vjs-hidden")},i.hide=function(){this.addClass("vjs-hidden")},i.lockShowing=function(){this.addClass("vjs-lock-showing")},i.unlockShowing=function(){this.removeClass("vjs-lock-showing")},i.getAttribute=function(l){return Bl(this.el_,l)},i.setAttribute=function(l,t){lu(this.el_,l,t)},i.removeAttribute=function(l){Go(this.el_,l)},i.width=function(l,t){return this.dimension("width",l,t)},i.height=function(l,t){return this.dimension("height",l,t)},i.dimensions=function(l,t){this.width(l,!0),this.height(t)},i.dimension=function(l,t,s){if(void 0!==t)return(null===t||t!=t)&&(t=0),this.el_.style[l]=-1!==(""+t).indexOf("%")||-1!==(""+t).indexOf("px")?t:"auto"===t?"":t+"px",void(s||this.trigger("componentresize"));if(!this.el_)return 0;var h=this.el_.style[l],v=h.indexOf("px");return parseInt(-1!==v?h.slice(0,v):this.el_["offset"+ve(l)],10)},i.currentDimension=function(l){var t=0;if("width"!==l&&"height"!==l)throw new Error("currentDimension only accepts width or height value");if(t=so(this.el_,l),0===(t=parseFloat(t))||isNaN(t)){var s="offset"+ve(l);t=this.el_[s]}return t},i.currentDimensions=function(){return{width:this.currentDimension("width"),height:this.currentDimension("height")}},i.currentWidth=function(){return this.currentDimension("width")},i.currentHeight=function(){return this.currentDimension("height")},i.focus=function(){this.el_.focus()},i.blur=function(){this.el_.blur()},i.handleKeyDown=function(l){this.player_&&(We().isEventKey(l,"Tab")||l.stopPropagation(),this.player_.handleKeyDown(l))},i.handleKeyPress=function(l){this.handleKeyDown(l)},i.emitTapEvents=function(){var v,l=0,t=null;this.on("touchstart",function(D){1===D.touches.length&&(t={pageX:D.touches[0].pageX,pageY:D.touches[0].pageY},l=ae().performance.now(),v=!0)}),this.on("touchmove",function(D){if(D.touches.length>1)v=!1;else if(t){var F=D.touches[0].pageX-t.pageX,ee=D.touches[0].pageY-t.pageY;Math.sqrt(F*F+ee*ee)>10&&(v=!1)}});var S=function(){v=!1};this.on("touchleave",S),this.on("touchcancel",S),this.on("touchend",function(D){t=null,!0===v&&ae().performance.now()-l<200&&(D.preventDefault(),this.trigger("tap"))})},i.enableTouchActivity=function(){if(this.player()&&this.player().reportUserActivity){var t,l=Ds(this.player(),this.player().reportUserActivity);this.on("touchstart",function(){l(),this.clearInterval(t),t=this.setInterval(l,250)});var s=function(v){l(),this.clearInterval(t)};this.on("touchmove",l),this.on("touchend",s),this.on("touchcancel",s)}},i.setTimeout=function(l,t){var h,s=this;return l=Ds(this,l),this.clearTimersOnDispose_(),h=ae().setTimeout(function(){s.setTimeoutIds_.has(h)&&s.setTimeoutIds_.delete(h),l()},t),this.setTimeoutIds_.add(h),h},i.clearTimeout=function(l){return this.setTimeoutIds_.has(l)&&(this.setTimeoutIds_.delete(l),ae().clearTimeout(l)),l},i.setInterval=function(l,t){l=Ds(this,l),this.clearTimersOnDispose_();var s=ae().setInterval(l,t);return this.setIntervalIds_.add(s),s},i.clearInterval=function(l){return this.setIntervalIds_.has(l)&&(this.setIntervalIds_.delete(l),ae().clearInterval(l)),l},i.requestAnimationFrame=function(l){var s,t=this;return this.supportsRaf_?(this.clearTimersOnDispose_(),l=Ds(this,l),s=ae().requestAnimationFrame(function(){t.rafIds_.has(s)&&t.rafIds_.delete(s),l()}),this.rafIds_.add(s),s):this.setTimeout(l,1e3/60)},i.requestNamedAnimationFrame=function(l,t){var s=this;if(!this.namedRafs_.has(l)){this.clearTimersOnDispose_(),t=Ds(this,t);var h=this.requestAnimationFrame(function(){t(),s.namedRafs_.has(l)&&s.namedRafs_.delete(l)});return this.namedRafs_.set(l,h),l}},i.cancelNamedAnimationFrame=function(l){this.namedRafs_.has(l)&&(this.cancelAnimationFrame(this.namedRafs_.get(l)),this.namedRafs_.delete(l))},i.cancelAnimationFrame=function(l){return this.supportsRaf_?(this.rafIds_.has(l)&&(this.rafIds_.delete(l),ae().cancelAnimationFrame(l)),l):this.clearTimeout(l)},i.clearTimersOnDispose_=function(){var l=this;this.clearingTimersOnDispose_||(this.clearingTimersOnDispose_=!0,this.one("dispose",function(){[["namedRafs_","cancelNamedAnimationFrame"],["rafIds_","cancelAnimationFrame"],["setTimeoutIds_","clearTimeout"],["setIntervalIds_","clearInterval"]].forEach(function(t){var h=t[1];l[t[0]].forEach(function(v,S){return l[h](S)})}),l.clearingTimersOnDispose_=!1}))},g.registerComponent=function(l,t){if("string"!=typeof l||!l)throw new Error('Illegal component name, "'+l+'"; must be a non-empty string.');var s=g.getComponent("Tech"),h=s&&s.isTech(t),v=g===t||g.prototype.isPrototypeOf(t.prototype);if(h||!v)throw new Error('Illegal component, "'+l+'"; '+(h?"techs must be registered using Tech.registerTech()":"must be a Component subclass")+".");l=ve(l),g.components_||(g.components_={});var D=g.getComponent("Player");if("Player"===l&&D&&D.players){var F=D.players,ee=Object.keys(F);if(F&&ee.length>0&&ee.map(function(Y){return F[Y]}).every(Boolean))throw new Error("Can not register Player component after player has been created.")}return g.components_[l]=t,g.components_[pe(l)]=t,t},g.getComponent=function(l){if(l&&g.components_)return g.components_[l]},g}();function Qo(g,i,u,l){return function So(g,i,u){if("number"!=typeof i||i<0||i>u)throw new Error("Failed to execute '"+g+"' on 'TimeRanges': The index provided ("+i+") is non-numeric or out of bounds (0-"+u+").")}(g,l,u.length-1),u[l][i]}function Fs(g){var i;return i=void 0===g||0===g.length?{length:0,start:function(){throw new Error("This TimeRanges object is empty")},end:function(){throw new Error("This TimeRanges object is empty")}}:{length:g.length,start:Qo.bind(null,"start",0,g),end:Qo.bind(null,"end",1,g)},ae().Symbol&&ae().Symbol.iterator&&(i[ae().Symbol.iterator]=function(){return(g||[]).values()}),i}function Lu(g,i){return Array.isArray(g)?Fs(g):void 0===g||void 0===i?Fs():Fs([[g,i]])}function Xa(g,i){var l,t,u=0;if(!i)return 0;(!g||!g.length)&&(g=Lu(0,0));for(var s=0;s<g.length;s++)l=g.start(s),(t=g.end(s))>i&&(t=i),u+=t-l;return u/i}function z(g){if(g instanceof z)return g;"number"==typeof g?this.code=g:"string"==typeof g?this.message=g:ia(g)&&("number"==typeof g.code&&(this.code=g.code),Ls(this,g)),this.message||(this.message=z.defaultMessages[this.code]||"")}dn.prototype.supportsRaf_="function"==typeof ae().requestAnimationFrame&&"function"==typeof ae().cancelAnimationFrame,dn.registerComponent("Component",dn),z.prototype.code=0,z.prototype.message="",z.prototype.status=null,z.errorTypes=["MEDIA_ERR_CUSTOM","MEDIA_ERR_ABORTED","MEDIA_ERR_NETWORK","MEDIA_ERR_DECODE","MEDIA_ERR_SRC_NOT_SUPPORTED","MEDIA_ERR_ENCRYPTED"],z.defaultMessages={1:"You aborted the media playback",2:"A network error caused the media download to fail part-way.",3:"The media playback was aborted due to a corruption problem or because the media used features your browser did not support.",4:"The media could not be loaded, either because the server or network failed or because the format is not supported.",5:"The media is encrypted and we do not have the keys to decrypt it."};for(var X=0;X<z.errorTypes.length;X++)z[z.errorTypes[X]]=X,z.prototype[z.errorTypes[X]]=X;function _e(g){return null!=g&&"function"==typeof g.then}function $e(g){_e(g)&&g.then(null,function(i){})}var It=function(i){return["kind","label","language","id","inBandMetadataTrackDispatchType","mode","src"].reduce(function(l,t,s){return i[t]&&(l[t]=i[t]),l},{cues:i.cues&&Array.prototype.map.call(i.cues,function(l){return{startTime:l.startTime,endTime:l.endTime,text:l.text,id:l.id}})})},_r="vjs-modal-dialog",hr=function(g){function i(l,t){var s;return(s=g.call(this,l,t)||this).handleKeyDown_=function(h){return s.handleKeyDown(h)},s.close_=function(h){return s.close(h)},s.opened_=s.hasBeenOpened_=s.hasBeenFilled_=!1,s.closeable(!s.options_.uncloseable),s.content(s.options_.content),s.contentEl_=Kr("div",{className:_r+"-content"},{role:"document"}),s.descEl_=Kr("p",{className:_r+"-description vjs-control-text",id:s.el().getAttribute("aria-describedby")}),Cn(s.descEl_,s.description()),s.el_.appendChild(s.descEl_),s.el_.appendChild(s.contentEl_),s}Me(i,g);var u=i.prototype;return u.createEl=function(){return g.prototype.createEl.call(this,"div",{className:this.buildCSSClass(),tabIndex:-1},{"aria-describedby":this.id()+"_description","aria-hidden":"true","aria-label":this.label(),role:"dialog"})},u.dispose=function(){this.contentEl_=null,this.descEl_=null,this.previouslyActiveEl_=null,g.prototype.dispose.call(this)},u.buildCSSClass=function(){return _r+" vjs-hidden "+g.prototype.buildCSSClass.call(this)},u.label=function(){return this.localize(this.options_.label||"Modal Window")},u.description=function(){var t=this.options_.description||this.localize("This is a modal window.");return this.closeable()&&(t+=" "+this.localize("This modal can be closed by pressing the Escape key or activating the close button.")),t},u.open=function(){if(!this.opened_){var t=this.player();this.trigger("beforemodalopen"),this.opened_=!0,(this.options_.fillAlways||!this.hasBeenOpened_&&!this.hasBeenFilled_)&&this.fill(),this.wasPlaying_=!t.paused(),this.options_.pauseOnOpen&&this.wasPlaying_&&t.pause(),this.on("keydown",this.handleKeyDown_),this.hadControls_=t.controls(),t.controls(!1),this.show(),this.conditionalFocus_(),this.el().setAttribute("aria-hidden","false"),this.trigger("modalopen"),this.hasBeenOpened_=!0}},u.opened=function(t){return"boolean"==typeof t&&this[t?"open":"close"](),this.opened_},u.close=function(){if(this.opened_){var t=this.player();this.trigger("beforemodalclose"),this.opened_=!1,this.wasPlaying_&&this.options_.pauseOnOpen&&t.play(),this.off("keydown",this.handleKeyDown_),this.hadControls_&&t.controls(!0),this.hide(),this.el().setAttribute("aria-hidden","true"),this.trigger("modalclose"),this.conditionalBlur_(),this.options_.temporary&&this.dispose()}},u.closeable=function(t){if("boolean"==typeof t){var s=this.closeable_=!!t,h=this.getChild("closeButton");if(s&&!h){var v=this.contentEl_;this.contentEl_=this.el_,h=this.addChild("closeButton",{controlText:"Close Modal Dialog"}),this.contentEl_=v,this.on(h,"close",this.close_)}!s&&h&&(this.off(h,"close",this.close_),this.removeChild(h),h.dispose())}return this.closeable_},u.fill=function(){this.fillWith(this.content())},u.fillWith=function(t){var s=this.contentEl(),h=s.parentNode,v=s.nextSibling;this.trigger("beforemodalfill"),this.hasBeenFilled_=!0,h.removeChild(s),this.empty(),Wu(s,t),this.trigger("modalfill"),v?h.insertBefore(s,v):h.appendChild(s);var S=this.getChild("closeButton");S&&h.appendChild(S.el_)},u.empty=function(){this.trigger("beforemodalempty"),Oo(this.contentEl()),this.trigger("modalempty")},u.content=function(t){return typeof t<"u"&&(this.content_=t),this.content_},u.conditionalFocus_=function(){var t=et().activeElement,s=this.player_.el_;this.previouslyActiveEl_=null,(s.contains(t)||s===t)&&(this.previouslyActiveEl_=t,this.focus())},u.conditionalBlur_=function(){this.previouslyActiveEl_&&(this.previouslyActiveEl_.focus(),this.previouslyActiveEl_=null)},u.handleKeyDown=function(t){if(t.stopPropagation(),We().isEventKey(t,"Escape")&&this.closeable())return t.preventDefault(),void this.close();if(We().isEventKey(t,"Tab")){for(var v,s=this.focusableEls_(),h=this.el_.querySelector(":focus"),S=0;S<s.length;S++)if(h===s[S]){v=S;break}et().activeElement===this.el_&&(v=0),t.shiftKey&&0===v?(s[s.length-1].focus(),t.preventDefault()):!t.shiftKey&&v===s.length-1&&(s[0].focus(),t.preventDefault())}},u.focusableEls_=function(){var t=this.el_.querySelectorAll("*");return Array.prototype.filter.call(t,function(s){return(s instanceof ae().HTMLAnchorElement||s instanceof ae().HTMLAreaElement)&&s.hasAttribute("href")||(s instanceof ae().HTMLInputElement||s instanceof ae().HTMLSelectElement||s instanceof ae().HTMLTextAreaElement||s instanceof ae().HTMLButtonElement)&&!s.hasAttribute("disabled")||s instanceof ae().HTMLIFrameElement||s instanceof ae().HTMLObjectElement||s instanceof ae().HTMLEmbedElement||s.hasAttribute("tabindex")&&-1!==s.getAttribute("tabindex")||s.hasAttribute("contenteditable")})},i}(dn);hr.prototype.options_={pauseOnOpen:!0,temporary:!0},dn.registerComponent("ModalDialog",hr);var Yr=function(g){function i(l){var t;void 0===l&&(l=[]),(t=g.call(this)||this).tracks_=[],Object.defineProperty(dt(t),"length",{get:function(){return this.tracks_.length}});for(var s=0;s<l.length;s++)t.addTrack(l[s]);return t}Me(i,g);var u=i.prototype;return u.addTrack=function(t){var s=this,h=this.tracks_.length;""+h in this||Object.defineProperty(this,h,{get:function(){return this.tracks_[h]}}),-1===this.tracks_.indexOf(t)&&(this.tracks_.push(t),this.trigger({track:t,type:"addtrack",target:this})),t.labelchange_=function(){s.trigger({track:t,type:"labelchange",target:s})},Ra(t)&&t.addEventListener("labelchange",t.labelchange_)},u.removeTrack=function(t){for(var s,h=0,v=this.length;h<v;h++)if(this[h]===t){(s=this[h]).off&&s.off(),this.tracks_.splice(h,1);break}s&&this.trigger({track:s,type:"removetrack",target:this})},u.getTrackById=function(t){for(var s=null,h=0,v=this.length;h<v;h++){var S=this[h];if(S.id===t){s=S;break}}return s},i}(oo);for(var Qr in Yr.prototype.allowedEvents_={change:"change",addtrack:"addtrack",removetrack:"removetrack",labelchange:"labelchange"},Yr.prototype.allowedEvents_)Yr.prototype["on"+Qr]=null;var _a=function(i,u){for(var l=0;l<i.length;l++)!Object.keys(i[l]).length||u.id===i[l].id||(i[l].enabled=!1)},$s=function(g){function i(l){var t;void 0===l&&(l=[]);for(var s=l.length-1;s>=0;s--)if(l[s].enabled){_a(l,l[s]);break}return(t=g.call(this,l)||this).changing_=!1,t}Me(i,g);var u=i.prototype;return u.addTrack=function(t){var s=this;t.enabled&&_a(this,t),g.prototype.addTrack.call(this,t),t.addEventListener&&(t.enabledChange_=function(){s.changing_||(s.changing_=!0,_a(s,t),s.changing_=!1,s.trigger("change"))},t.addEventListener("enabledchange",t.enabledChange_))},u.removeTrack=function(t){g.prototype.removeTrack.call(this,t),t.removeEventListener&&t.enabledChange_&&(t.removeEventListener("enabledchange",t.enabledChange_),t.enabledChange_=null)},i}(Yr),Ml=function(i,u){for(var l=0;l<i.length;l++)!Object.keys(i[l]).length||u.id===i[l].id||(i[l].selected=!1)},pd=function(g){function i(l){var t;void 0===l&&(l=[]);for(var s=l.length-1;s>=0;s--)if(l[s].selected){Ml(l,l[s]);break}return(t=g.call(this,l)||this).changing_=!1,Object.defineProperty(dt(t),"selectedIndex",{get:function(){for(var v=0;v<this.length;v++)if(this[v].selected)return v;return-1},set:function(){}}),t}Me(i,g);var u=i.prototype;return u.addTrack=function(t){var s=this;t.selected&&Ml(this,t),g.prototype.addTrack.call(this,t),t.addEventListener&&(t.selectedChange_=function(){s.changing_||(s.changing_=!0,Ml(s,t),s.changing_=!1,s.trigger("change"))},t.addEventListener("selectedchange",t.selectedChange_))},u.removeTrack=function(t){g.prototype.removeTrack.call(this,t),t.removeEventListener&&t.selectedChange_&&(t.removeEventListener("selectedchange",t.selectedChange_),t.selectedChange_=null)},i}(Yr),Ol=function(g){function i(){return g.apply(this,arguments)||this}Me(i,g);var u=i.prototype;return u.addTrack=function(t){var s=this;g.prototype.addTrack.call(this,t),this.queueChange_||(this.queueChange_=function(){return s.queueTrigger("change")}),this.triggerSelectedlanguagechange||(this.triggerSelectedlanguagechange_=function(){return s.trigger("selectedlanguagechange")}),t.addEventListener("modechange",this.queueChange_),-1===["metadata","chapters"].indexOf(t.kind)&&t.addEventListener("modechange",this.triggerSelectedlanguagechange_)},u.removeTrack=function(t){g.prototype.removeTrack.call(this,t),t.removeEventListener&&(this.queueChange_&&t.removeEventListener("modechange",this.queueChange_),this.selectedlanguagechange_&&t.removeEventListener("modechange",this.triggerSelectedlanguagechange_))},i}(Yr),ei=function(){function g(u){void 0===u&&(u=[]),this.trackElements_=[],Object.defineProperty(this,"length",{get:function(){return this.trackElements_.length}});for(var l=0,t=u.length;l<t;l++)this.addTrackElement_(u[l])}var i=g.prototype;return i.addTrackElement_=function(l){var t=this.trackElements_.length;""+t in this||Object.defineProperty(this,t,{get:function(){return this.trackElements_[t]}}),-1===this.trackElements_.indexOf(l)&&this.trackElements_.push(l)},i.getTrackElementByTrack_=function(l){for(var t,s=0,h=this.trackElements_.length;s<h;s++)if(l===this.trackElements_[s].track){t=this.trackElements_[s];break}return t},i.removeTrackElement_=function(l){for(var t=0,s=this.trackElements_.length;t<s;t++)if(l===this.trackElements_[t]){this.trackElements_[t].track&&"function"==typeof this.trackElements_[t].track.off&&this.trackElements_[t].track.off(),"function"==typeof this.trackElements_[t].off&&this.trackElements_[t].off(),this.trackElements_.splice(t,1);break}},g}(),Si=function(){function g(u){g.prototype.setCues_.call(this,u),Object.defineProperty(this,"length",{get:function(){return this.length_}})}var i=g.prototype;return i.setCues_=function(l){var t=this.length||0,s=0,h=l.length;this.cues_=l,this.length_=l.length;var v=function(D){""+D in this||Object.defineProperty(this,""+D,{get:function(){return this.cues_[D]}})};if(t<h)for(s=t;s<h;s++)v.call(this,s)},i.getCueById=function(l){for(var t=null,s=0,h=this.length;s<h;s++){var v=this[s];if(v.id===l){t=v;break}}return t},g}(),bu={alternative:"alternative",captions:"captions",main:"main",sign:"sign",subtitles:"subtitles",commentary:"commentary"},tf={alternative:"alternative",descriptions:"descriptions",main:"main","main-desc":"main-desc",translation:"translation",commentary:"commentary"},op={subtitles:"subtitles",captions:"captions",descriptions:"descriptions",chapters:"chapters",metadata:"metadata"},nf={disabled:"disabled",hidden:"hidden",showing:"showing"},gd=function(g){function i(u){var l;void 0===u&&(u={}),l=g.call(this)||this;var t={id:u.id||"vjs_track_"+xs(),kind:u.kind||"",language:u.language||""},s=u.label||"",h=function(D){Object.defineProperty(dt(l),D,{get:function(){return t[D]},set:function(){}})};for(var v in t)h(v);return Object.defineProperty(dt(l),"label",{get:function(){return s},set:function(D){D!==s&&(s=D,this.trigger("labelchange"))}}),l}return Me(i,g),i}(oo),ih=function(i){var u=["protocol","hostname","port","pathname","search","hash","host"],l=et().createElement("a");l.href=i;for(var t={},s=0;s<u.length;s++)t[u[s]]=l[u[s]];return"http:"===t.protocol&&(t.host=t.host.replace(/:80$/,"")),"https:"===t.protocol&&(t.host=t.host.replace(/:443$/,"")),t.protocol||(t.protocol=ae().location.protocol),t.host||(t.host=ae().location.host),t},hg=function(i){if(!i.match(/^https?:\/\//)){var u=et().createElement("a");u.href=i,i=u.href}return i},sh=function(i){if("string"==typeof i){var l=/^(\/?)([\s\S]*?)((?:\.{1,2}|[^\/]+?)(\.([^\.\/\?]+)))(?:[\/]*|[\?].*)$/.exec(i);if(l)return l.pop().toLowerCase()}return""},rf=function(i,u){void 0===u&&(u=ae().location);var l=ih(i);return(":"===l.protocol?u.protocol:l.protocol)+l.host!==u.protocol+u.host},md=Object.freeze({__proto__:null,parseUrl:ih,getAbsoluteURL:hg,getFileExtension:sh,isCrossOrigin:rf}),Mm=function(i,u){var l=new(ae().WebVTT.Parser)(ae(),ae().vttjs,ae().WebVTT.StringDecoder()),t=[];l.oncue=function(s){u.addCue(s)},l.onparsingerror=function(s){t.push(s)},l.onflush=function(){u.trigger({type:"loadeddata",target:u})},l.parse(i),t.length>0&&(ae().console&&ae().console.groupCollapsed&&ae().console.groupCollapsed("Text Track parsing errors for "+u.src),t.forEach(function(s){return qr.error(s)}),ae().console&&ae().console.groupEnd&&ae().console.groupEnd()),l.flush()},fg=function(i,u){var l={uri:i},t=rf(i);t&&(l.cors=t);var s="use-credentials"===u.tech_.crossOrigin();s&&(l.withCredentials=s),J()(l,Ds(this,function(h,v,S){if(h)return qr.error(h,v);u.loaded_=!0,"function"!=typeof ae().WebVTT?u.tech_&&u.tech_.any(["vttjsloaded","vttjserror"],function(D){if("vttjserror"!==D.type)return Mm(S,u);qr.error("vttjs failed to load, stopping trying to process "+u.src)}):Mm(S,u)}))},kc=function(g){function i(l){var t;if(void 0===l&&(l={}),!l.tech)throw new Error("A tech was not provided.");var s=Wt(l,{kind:op[l.kind]||"subtitles",language:l.language||l.srclang||""}),h=nf[s.mode]||"disabled",v=s.default;("metadata"===s.kind||"chapters"===s.kind)&&(h="hidden"),(t=g.call(this,s)||this).tech_=s.tech,t.cues_=[],t.activeCues_=[],t.preload_=!1!==t.tech_.preloadTextTracks;var S=new Si(t.cues_),D=new Si(t.activeCues_),F=!1;return t.timeupdateHandler=Ds(dt(t),function(Y){if(void 0===Y&&(Y={}),!this.tech_.isDisposed()){if(!this.tech_.isReady_)return void("timeupdate"!==Y.type&&(this.rvf_=this.tech_.requestVideoFrameCallback(this.timeupdateHandler)));this.activeCues=this.activeCues,F&&(this.trigger("cuechange"),F=!1),"timeupdate"!==Y.type&&(this.rvf_=this.tech_.requestVideoFrameCallback(this.timeupdateHandler))}}),t.tech_.one("dispose",function(){t.stopTracking()}),"disabled"!==h&&t.startTracking(),Object.defineProperties(dt(t),{default:{get:function(){return v},set:function(){}},mode:{get:function(){return h},set:function(me){nf[me]&&h!==me&&(h=me,!this.preload_&&"disabled"!==h&&0===this.cues.length&&fg(this.src,this),this.stopTracking(),"disabled"!==h&&this.startTracking(),this.trigger("modechange"))}},cues:{get:function(){return this.loaded_?S:null},set:function(){}},activeCues:{get:function(){if(!this.loaded_)return null;if(0===this.cues.length)return D;for(var me=this.tech_.currentTime(),Le=[],Be=0,Ue=this.cues.length;Be<Ue;Be++){var Gt=this.cues[Be];(Gt.startTime<=me&&Gt.endTime>=me||Gt.startTime===Gt.endTime&&Gt.startTime<=me&&Gt.startTime+.5>=me)&&Le.push(Gt)}if(F=!1,Le.length!==this.activeCues_.length)F=!0;else for(var ln=0;ln<Le.length;ln++)-1===this.activeCues_.indexOf(Le[ln])&&(F=!0);return this.activeCues_=Le,D.setCues_(this.activeCues_),D},set:function(){}}}),s.src?(t.src=s.src,t.preload_||(t.loaded_=!0),(t.preload_||"subtitles"!==s.kind&&"captions"!==s.kind)&&fg(t.src,dt(t))):t.loaded_=!0,t}Me(i,g);var u=i.prototype;return u.startTracking=function(){this.rvf_=this.tech_.requestVideoFrameCallback(this.timeupdateHandler),this.tech_.on("timeupdate",this.timeupdateHandler)},u.stopTracking=function(){this.rvf_&&(this.tech_.cancelVideoFrameCallback(this.rvf_),this.rvf_=void 0),this.tech_.off("timeupdate",this.timeupdateHandler)},u.addCue=function(t){var s=t;if(ae().vttjs&&!(t instanceof ae().vttjs.VTTCue)){for(var h in s=new(ae().vttjs.VTTCue)(t.startTime,t.endTime,t.text),t)h in s||(s[h]=t[h]);s.id=t.id,s.originalCue_=t}for(var v=this.tech_.textTracks(),S=0;S<v.length;S++)v[S]!==this&&v[S].removeCue(s);this.cues_.push(s),this.cues.setCues_(this.cues_)},u.removeCue=function(t){for(var s=this.cues_.length;s--;){var h=this.cues_[s];if(h===t||h.originalCue_&&h.originalCue_===t){this.cues_.splice(s,1),this.cues.setCues_(this.cues_);break}}},i}(gd);kc.prototype.allowedEvents_={cuechange:"cuechange"};var pg=function(g){function i(u){var l;void 0===u&&(u={});var t=Wt(u,{kind:tf[u.kind]||""});l=g.call(this,t)||this;var s=!1;return Object.defineProperty(dt(l),"enabled",{get:function(){return s},set:function(v){"boolean"!=typeof v||v===s||(s=v,this.trigger("enabledchange"))}}),t.enabled&&(l.enabled=t.enabled),l.loaded_=!0,l}return Me(i,g),i}(gd),Om=function(g){function i(u){var l;void 0===u&&(u={});var t=Wt(u,{kind:bu[u.kind]||""});l=g.call(this,t)||this;var s=!1;return Object.defineProperty(dt(l),"selected",{get:function(){return s},set:function(v){"boolean"!=typeof v||v===s||(s=v,this.trigger("selectedchange"))}}),t.selected&&(l.selected=t.selected),l}return Me(i,g),i}(gd),km=0,Rm=2,kl=function(g){function i(u){var l;void 0===u&&(u={}),l=g.call(this)||this;var t,s=new kc(u);return l.kind=s.kind,l.src=s.src,l.srclang=s.language,l.label=s.label,l.default=s.default,Object.defineProperties(dt(l),{readyState:{get:function(){return t}},track:{get:function(){return s}}}),t=km,s.addEventListener("loadeddata",function(){t=Rm,l.trigger({type:"load",target:dt(l)})}),l}return Me(i,g),i}(oo);kl.prototype.allowedEvents_={load:"load"},kl.NONE=km,kl.LOADING=1,kl.LOADED=Rm,kl.ERROR=3;var Ts={audio:{ListClass:$s,TrackClass:pg,capitalName:"Audio"},video:{ListClass:pd,TrackClass:Om,capitalName:"Video"},text:{ListClass:Ol,TrackClass:kc,capitalName:"Text"}};Object.keys(Ts).forEach(function(g){Ts[g].getterName=g+"Tracks",Ts[g].privateName=g+"Tracks_"});var es={remoteText:{ListClass:Ol,TrackClass:kc,capitalName:"RemoteText",getterName:"remoteTextTracks",privateName:"remoteTextTracks_"},remoteTextEl:{ListClass:ei,TrackClass:kl,capitalName:"RemoteTextTrackEls",getterName:"remoteTextTrackEls",privateName:"remoteTextTrackEls_"}},Na=at({},Ts,es);es.names=Object.keys(es),Ts.names=Object.keys(Ts),Na.names=[].concat(es.names).concat(Ts.names);var Zr=function(g){function i(l,t){var s;return void 0===l&&(l={}),void 0===t&&(t=function(){}),l.reportTouchActivity=!1,(s=g.call(this,null,l,t)||this).onDurationChange_=function(h){return s.onDurationChange(h)},s.trackProgress_=function(h){return s.trackProgress(h)},s.trackCurrentTime_=function(h){return s.trackCurrentTime(h)},s.stopTrackingCurrentTime_=function(h){return s.stopTrackingCurrentTime(h)},s.disposeSourceHandler_=function(h){return s.disposeSourceHandler(h)},s.queuedHanders_=new Set,s.hasStarted_=!1,s.on("playing",function(){this.hasStarted_=!0}),s.on("loadstart",function(){this.hasStarted_=!1}),Na.names.forEach(function(h){var v=Na[h];l&&l[v.getterName]&&(s[v.privateName]=l[v.getterName])}),s.featuresProgressEvents||s.manualProgressOn(),s.featuresTimeupdateEvents||s.manualTimeUpdatesOn(),["Text","Audio","Video"].forEach(function(h){!1===l["native"+h+"Tracks"]&&(s["featuresNative"+h+"Tracks"]=!1)}),!1===l.nativeCaptions||!1===l.nativeTextTracks?s.featuresNativeTextTracks=!1:(!0===l.nativeCaptions||!0===l.nativeTextTracks)&&(s.featuresNativeTextTracks=!0),s.featuresNativeTextTracks||s.emulateTextTracks(),s.preloadTextTracks=!1!==l.preloadTextTracks,s.autoRemoteTextTracks_=new Na.text.ListClass,s.initTrackListeners(),l.nativeControlsForTouch||s.emitTapEvents(),s.constructor&&(s.name_=s.constructor.name||"Unknown Tech"),s}Me(i,g);var u=i.prototype;return u.triggerSourceset=function(t){var s=this;this.isReady_||this.one("ready",function(){return s.setTimeout(function(){return s.triggerSourceset(t)},1)}),this.trigger({src:t,type:"sourceset"})},u.manualProgressOn=function(){this.on("durationchange",this.onDurationChange_),this.manualProgress=!0,this.one("ready",this.trackProgress_)},u.manualProgressOff=function(){this.manualProgress=!1,this.stopTrackingProgress(),this.off("durationchange",this.onDurationChange_)},u.trackProgress=function(t){this.stopTrackingProgress(),this.progressInterval=this.setInterval(Ds(this,function(){var s=this.bufferedPercent();this.bufferedPercent_!==s&&this.trigger("progress"),this.bufferedPercent_=s,1===s&&this.stopTrackingProgress()}),500)},u.onDurationChange=function(t){this.duration_=this.duration()},u.buffered=function(){return Lu(0,0)},u.bufferedPercent=function(){return Xa(this.buffered(),this.duration_)},u.stopTrackingProgress=function(){this.clearInterval(this.progressInterval)},u.manualTimeUpdatesOn=function(){this.manualTimeUpdates=!0,this.on("play",this.trackCurrentTime_),this.on("pause",this.stopTrackingCurrentTime_)},u.manualTimeUpdatesOff=function(){this.manualTimeUpdates=!1,this.stopTrackingCurrentTime(),this.off("play",this.trackCurrentTime_),this.off("pause",this.stopTrackingCurrentTime_)},u.trackCurrentTime=function(){this.currentTimeInterval&&this.stopTrackingCurrentTime(),this.currentTimeInterval=this.setInterval(function(){this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})},250)},u.stopTrackingCurrentTime=function(){this.clearInterval(this.currentTimeInterval),this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})},u.dispose=function(){this.clearTracks(Ts.names),this.manualProgress&&this.manualProgressOff(),this.manualTimeUpdates&&this.manualTimeUpdatesOff(),g.prototype.dispose.call(this)},u.clearTracks=function(t){var s=this;(t=[].concat(t)).forEach(function(h){for(var v=s[h+"Tracks"]()||[],S=v.length;S--;){var D=v[S];"text"===h&&s.removeRemoteTextTrack(D),v.removeTrack(D)}})},u.cleanupAutoTextTracks=function(){for(var t=this.autoRemoteTextTracks_||[],s=t.length;s--;)this.removeRemoteTextTrack(t[s])},u.reset=function(){},u.crossOrigin=function(){},u.setCrossOrigin=function(){},u.error=function(t){return void 0!==t&&(this.error_=new z(t),this.trigger("error")),this.error_},u.played=function(){return this.hasStarted_?Lu(0,0):Lu()},u.play=function(){},u.setScrubbing=function(){},u.scrubbing=function(){},u.setCurrentTime=function(){this.manualTimeUpdates&&this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})},u.initTrackListeners=function(){var t=this;Ts.names.forEach(function(s){var v=function(){t.trigger(s+"trackchange")},S=t[Ts[s].getterName]();S.addEventListener("removetrack",v),S.addEventListener("addtrack",v),t.on("dispose",function(){S.removeEventListener("removetrack",v),S.removeEventListener("addtrack",v)})})},u.addWebVttScript_=function(){var t=this;if(!ae().WebVTT)if(et().body.contains(this.el())){if(!this.options_["vtt.js"]&&Pu(Ne())&&Object.keys(Ne()).length>0)return void this.trigger("vttjsloaded");var s=et().createElement("script");s.src=this.options_["vtt.js"]||"https://vjs.zencdn.net/vttjs/0.14.1/vtt.min.js",s.onload=function(){t.trigger("vttjsloaded")},s.onerror=function(){t.trigger("vttjserror")},this.on("dispose",function(){s.onload=null,s.onerror=null}),ae().WebVTT=!0,this.el().parentNode.appendChild(s)}else this.ready(this.addWebVttScript_)},u.emulateTextTracks=function(){var t=this,s=this.textTracks(),h=this.remoteTextTracks(),v=function(Y){return s.addTrack(Y.track)},S=function(Y){return s.removeTrack(Y.track)};h.on("addtrack",v),h.on("removetrack",S),this.addWebVttScript_();var D=function(){return t.trigger("texttrackchange")},F=function(){D();for(var Y=0;Y<s.length;Y++){var me=s[Y];me.removeEventListener("cuechange",D),"showing"===me.mode&&me.addEventListener("cuechange",D)}};F(),s.addEventListener("change",F),s.addEventListener("addtrack",F),s.addEventListener("removetrack",F),this.on("dispose",function(){h.off("addtrack",v),h.off("removetrack",S),s.removeEventListener("change",F),s.removeEventListener("addtrack",F),s.removeEventListener("removetrack",F);for(var ee=0;ee<s.length;ee++)s[ee].removeEventListener("cuechange",D)})},u.addTextTrack=function(t,s,h){if(!t)throw new Error("TextTrack kind is required but was not provided");return function Rc(g,i,u,l,t){void 0===t&&(t={});var s=g.textTracks();t.kind=i,u&&(t.label=u),l&&(t.language=l),t.tech=g;var h=new Na.text.TrackClass(t);return s.addTrack(h),h}(this,t,s,h)},u.createRemoteTextTrack=function(t){var s=Wt(t,{tech:this});return new es.remoteTextEl.TrackClass(s)},u.addRemoteTextTrack=function(t,s){var h=this;void 0===t&&(t={});var v=this.createRemoteTextTrack(t);return!0!==s&&!1!==s&&(qr.warn('Calling addRemoteTextTrack without explicitly setting the "manualCleanup" parameter to `true` is deprecated and default to `false` in future version of video.js'),s=!0),this.remoteTextTrackEls().addTrackElement_(v),this.remoteTextTracks().addTrack(v.track),!0!==s&&this.ready(function(){return h.autoRemoteTextTracks_.addTrack(v.track)}),v},u.removeRemoteTextTrack=function(t){var s=this.remoteTextTrackEls().getTrackElementByTrack_(t);this.remoteTextTrackEls().removeTrackElement_(s),this.remoteTextTracks().removeTrack(t),this.autoRemoteTextTracks_.removeTrack(t)},u.getVideoPlaybackQuality=function(){return{}},u.requestPictureInPicture=function(){var t=this.options_.Promise||ae().Promise;if(t)return t.reject()},u.disablePictureInPicture=function(){return!0},u.setDisablePictureInPicture=function(){},u.requestVideoFrameCallback=function(t){var s=this,h=xs();return!this.isReady_||this.paused()?(this.queuedHanders_.add(h),this.one("playing",function(){s.queuedHanders_.has(h)&&(s.queuedHanders_.delete(h),t())})):this.requestNamedAnimationFrame(h,t),h},u.cancelVideoFrameCallback=function(t){this.queuedHanders_.has(t)?this.queuedHanders_.delete(t):this.cancelNamedAnimationFrame(t)},u.setPoster=function(){},u.playsinline=function(){},u.setPlaysinline=function(){},u.overrideNativeAudioTracks=function(){},u.overrideNativeVideoTracks=function(){},u.canPlayType=function(){return""},i.canPlayType=function(){return""},i.canPlaySource=function(t,s){return i.canPlayType(t.type)},i.isTech=function(t){return t.prototype instanceof i||t instanceof i||t===i},i.registerTech=function(t,s){if(i.techs_||(i.techs_={}),!i.isTech(s))throw new Error("Tech "+t+" must be a Tech");if(!i.canPlayType)throw new Error("Techs must have a static canPlayType method on them");if(!i.canPlaySource)throw new Error("Techs must have a static canPlaySource method on them");return t=ve(t),i.techs_[t]=s,i.techs_[pe(t)]=s,"Tech"!==t&&i.defaultTechOrder_.push(t),s},i.getTech=function(t){if(t){if(i.techs_&&i.techs_[t])return i.techs_[t];if(t=ve(t),ae()&&ae().videojs&&ae().videojs[t])return qr.warn("The "+t+" tech was added to the videojs object when it should be registered using videojs.registerTech(name, tech)"),ae().videojs[t]}},i}(dn);Na.names.forEach(function(g){var i=Na[g];Zr.prototype[i.getterName]=function(){return this[i.privateName]=this[i.privateName]||new i.ListClass,this[i.privateName]}}),Zr.prototype.featuresVolumeControl=!0,Zr.prototype.featuresMuteControl=!0,Zr.prototype.featuresFullscreenResize=!1,Zr.prototype.featuresPlaybackRate=!1,Zr.prototype.featuresProgressEvents=!1,Zr.prototype.featuresSourceset=!1,Zr.prototype.featuresTimeupdateEvents=!1,Zr.prototype.featuresNativeTextTracks=!1,Zr.prototype.featuresVideoFrameCallback=!1,Zr.withSourceHandlers=function(g){g.registerSourceHandler=function(u,l){var t=g.sourceHandlers;t||(t=g.sourceHandlers=[]),void 0===l&&(l=t.length),t.splice(l,0,u)},g.canPlayType=function(u){for(var t,l=g.sourceHandlers||[],s=0;s<l.length;s++)if(t=l[s].canPlayType(u))return t;return""},g.selectSourceHandler=function(u,l){for(var t=g.sourceHandlers||[],h=0;h<t.length;h++)if(t[h].canHandleSource(u,l))return t[h];return null},g.canPlaySource=function(u,l){var t=g.selectSourceHandler(u,l);return t?t.canHandleSource(u,l):""},["seekable","seeking","duration"].forEach(function(u){var l=this[u];"function"==typeof l&&(this[u]=function(){return this.sourceHandler_&&this.sourceHandler_[u]?this.sourceHandler_[u].apply(this.sourceHandler_,arguments):l.apply(this,arguments)})},g.prototype),g.prototype.setSource=function(u){var l=g.selectSourceHandler(u,this.options_);l||(g.nativeSourceHandler?l=g.nativeSourceHandler:qr.error("No source handler found for the current source.")),this.disposeSourceHandler(),this.off("dispose",this.disposeSourceHandler_),l!==g.nativeSourceHandler&&(this.currentSource_=u),this.sourceHandler_=l.handleSource(u,this,this.options_),this.one("dispose",this.disposeSourceHandler_)},g.prototype.disposeSourceHandler=function(){this.currentSource_&&(this.clearTracks(["audio","video"]),this.currentSource_=null),this.cleanupAutoTextTracks(),this.sourceHandler_&&(this.sourceHandler_.dispose&&this.sourceHandler_.dispose(),this.sourceHandler_=null)}},dn.registerComponent("Tech",Zr),Zr.registerTech("Tech",Zr),Zr.defaultTechOrder_=[];var fo={},sf={},js={};function Nc(g,i,u){g.setTimeout(function(){return Eu(i,fo[i.type],u,g)},1)}function jc(g,i,u,l){void 0===l&&(l=null);var t="call"+ve(u),s=g.reduce(Uc(t),l),h=s===js,v=h?null:i[u](s);return function dc(g,i,u,l){for(var t=g.length-1;t>=0;t--){var s=g[t];s[i]&&s[i](l,u)}}(g,u,v,h),v}var mg={buffered:1,currentTime:1,duration:1,muted:1,played:1,paused:1,seekable:1,volume:1,ended:1},uf={setCurrentTime:1,setMuted:1,setVolume:1},wo={play:1,pause:1};function Uc(g){return function(i,u){return i===js?js:u[g]?u[g](i):i}}function Eu(g,i,u,l,t,s){void 0===g&&(g={}),void 0===i&&(i=[]),void 0===t&&(t=[]),void 0===s&&(s=!1);var v=i[0],S=i.slice(1);if("string"==typeof v)Eu(g,fo[v],u,l,t,s);else if(v){var D=function Ta(g,i){var u=sf[g.id()],l=null;if(null==u)return l=i(g),sf[g.id()]=[[i,l]],l;for(var t=0;t<u.length;t++){var s=u[t];s[0]===i&&(l=s[1])}return null===l&&(l=i(g),u.push([i,l])),l}(l,v);if(!D.setSource)return t.push(D),Eu(g,S,u,l,t,s);D.setSource(Ls({},g),function(F,ee){if(F)return Eu(g,S,u,l,t,s);t.push(D),Eu(ee,g.type===ee.type?S:fo[ee.type],u,l,t,s)})}else S.length?Eu(g,S,u,l,t,s):s?u(g,t):Eu(g,fo["*"],u,l,t,!0)}var cf={opus:"video/ogg",ogv:"video/ogg",mp4:"video/mp4",mov:"video/mp4",m4v:"video/mp4",mkv:"video/x-matroska",m4a:"audio/mp4",mp3:"audio/mpeg",aac:"audio/aac",caf:"audio/x-caf",flac:"audio/flac",oga:"audio/ogg",wav:"audio/wav",m3u8:"application/x-mpegURL",mpd:"application/dash+xml",jpg:"image/jpeg",jpeg:"image/jpeg",gif:"image/gif",png:"image/png",svg:"image/svg+xml",webp:"image/webp"},ll=function(i){void 0===i&&(i="");var u=sh(i);return cf[u.toLowerCase()]||""},df=function g(i){if(Array.isArray(i)){var u=[];i.forEach(function(l){l=g(l),Array.isArray(l)?u=u.concat(l):ia(l)&&u.push(l)}),i=u}else i="string"==typeof i&&i.trim()?[hf({src:i})]:ia(i)&&"string"==typeof i.src&&i.src&&i.src.trim()?[hf(i)]:[];return i};function hf(g){if(!g.type){var i=ll(g.src);i&&(g.type=i)}return g}var Qu=function(g){function i(u,l,t){var s,h=Wt({createEl:!1},l);if(s=g.call(this,u,h,t)||this,l.playerOptions.sources&&0!==l.playerOptions.sources.length)u.src(l.playerOptions.sources);else for(var v=0,S=l.playerOptions.techOrder;v<S.length;v++){var D=ve(S[v]),F=Zr.getTech(D);if(D||(F=dn.getComponent(D)),F&&F.isSupported()){u.loadTech_(D);break}}return s}return Me(i,g),i}(dn);dn.registerComponent("MediaLoader",Qu);var ah=function(g){function i(l,t){var s;return(s=g.call(this,l,t)||this).options_.controlText&&s.controlText(s.options_.controlText),s.handleMouseOver_=function(h){return s.handleMouseOver(h)},s.handleMouseOut_=function(h){return s.handleMouseOut(h)},s.handleClick_=function(h){return s.handleClick(h)},s.handleKeyDown_=function(h){return s.handleKeyDown(h)},s.emitTapEvents(),s.enable(),s}Me(i,g);var u=i.prototype;return u.createEl=function(t,s,h){void 0===t&&(t="div"),void 0===s&&(s={}),void 0===h&&(h={}),s=Ls({className:this.buildCSSClass(),tabIndex:0},s),"button"===t&&qr.error("Creating a ClickableComponent with an HTML element of "+t+" is not supported; use a Button instead."),h=Ls({role:"button"},h),this.tabIndex_=s.tabIndex;var v=Kr(t,s,h);return v.appendChild(Kr("span",{className:"vjs-icon-placeholder"},{"aria-hidden":!0})),this.createControlTextEl(v),v},u.dispose=function(){this.controlTextEl_=null,g.prototype.dispose.call(this)},u.createControlTextEl=function(t){return this.controlTextEl_=Kr("span",{className:"vjs-control-text"},{"aria-live":"polite"}),t&&t.appendChild(this.controlTextEl_),this.controlText(this.controlText_,t),this.controlTextEl_},u.controlText=function(t,s){if(void 0===s&&(s=this.el()),void 0===t)return this.controlText_||"Need Text";var h=this.localize(t);this.controlText_=t,Cn(this.controlTextEl_,h),!this.nonIconControl&&!this.player_.options_.noUITitleAttributes&&s.setAttribute("title",h)},u.buildCSSClass=function(){return"vjs-control vjs-button "+g.prototype.buildCSSClass.call(this)},u.enable=function(){this.enabled_||(this.enabled_=!0,this.removeClass("vjs-disabled"),this.el_.setAttribute("aria-disabled","false"),typeof this.tabIndex_<"u"&&this.el_.setAttribute("tabIndex",this.tabIndex_),this.on(["tap","click"],this.handleClick_),this.on("keydown",this.handleKeyDown_))},u.disable=function(){this.enabled_=!1,this.addClass("vjs-disabled"),this.el_.setAttribute("aria-disabled","true"),typeof this.tabIndex_<"u"&&this.el_.removeAttribute("tabIndex"),this.off("mouseover",this.handleMouseOver_),this.off("mouseout",this.handleMouseOut_),this.off(["tap","click"],this.handleClick_),this.off("keydown",this.handleKeyDown_)},u.handleLanguagechange=function(){this.controlText(this.controlText_)},u.handleClick=function(t){this.options_.clickHandler&&this.options_.clickHandler.call(this,arguments)},u.handleKeyDown=function(t){We().isEventKey(t,"Space")||We().isEventKey(t,"Enter")?(t.preventDefault(),t.stopPropagation(),this.trigger("click")):g.prototype.handleKeyDown.call(this,t)},i}(dn);dn.registerComponent("ClickableComponent",ah);var ff=function(g){function i(l,t){var s;return(s=g.call(this,l,t)||this).update(),s.update_=function(h){return s.update(h)},l.on("posterchange",s.update_),s}Me(i,g);var u=i.prototype;return u.dispose=function(){this.player().off("posterchange",this.update_),g.prototype.dispose.call(this)},u.createEl=function(){return Kr("div",{className:"vjs-poster",tabIndex:-1})},u.update=function(t){var s=this.player().poster();this.setSrc(s),s?this.show():this.hide()},u.setSrc=function(t){var s="";t&&(s='url("'+t+'")'),this.el_.style.backgroundImage=s},u.handleClick=function(t){if(this.player_.controls()){var s=this.player_.usingPlugin("eme")&&this.player_.eme.sessions&&this.player_.eme.sessions.length>0;this.player_.tech(!0)&&!((oe||sa)&&s)&&this.player_.tech(!0).focus(),this.player_.paused()?$e(this.player_.play()):this.player_.pause()}},i}(ah);dn.registerComponent("PosterImage",ff);var ba="#222",vd={monospace:"monospace",sansSerif:"sans-serif",serif:"serif",monospaceSansSerif:'"Andale Mono", "Lucida Console", monospace',monospaceSerif:'"Courier New", monospace',proportionalSansSerif:"sans-serif",proportionalSerif:"serif",casual:'"Comic Sans MS", Impact, fantasy',script:'"Monotype Corsiva", cursive',smallcaps:'"Andale Mono", "Lucida Console", monospace, sans-serif'};function uh(g,i){var u;if(4===g.length)u=g[1]+g[1]+g[2]+g[2]+g[3]+g[3];else{if(7!==g.length)throw new Error("Invalid color code provided, "+g+"; must be formatted as e.g. #f0e or #f604e2.");u=g.slice(1)}return"rgba("+parseInt(u.slice(0,2),16)+","+parseInt(u.slice(2,4),16)+","+parseInt(u.slice(4,6),16)+","+i+")"}function pf(g,i,u){try{g.style[i]=u}catch{return}}var hc=function(g){function i(l,t,s){var h;h=g.call(this,l,t,s)||this;var v=function(D){return h.updateDisplay(D)};return l.on("loadstart",function(S){return h.toggleDisplay(S)}),l.on("texttrackchange",v),l.on("loadedmetadata",function(S){return h.preselectTrack(S)}),l.ready(Ds(dt(h),function(){if(l.tech_&&l.tech_.featuresNativeTextTracks)this.hide();else{l.on("fullscreenchange",v),l.on("playerresize",v),ae().addEventListener("orientationchange",v),l.on("dispose",function(){return ae().removeEventListener("orientationchange",v)});for(var S=this.options_.playerOptions.tracks||[],D=0;D<S.length;D++)this.player_.addRemoteTextTrack(S[D],!0);this.preselectTrack()}})),h}Me(i,g);var u=i.prototype;return u.preselectTrack=function(){for(var v,S,D,t={captions:1,subtitles:1},s=this.player_.textTracks(),h=this.player_.cache_.selectedLanguage,F=0;F<s.length;F++){var ee=s[F];h&&h.enabled&&h.language&&h.language===ee.language&&ee.kind in t?ee.kind===h.kind?D=ee:D||(D=ee):h&&!h.enabled?(D=null,v=null,S=null):ee.default&&("descriptions"!==ee.kind||v?ee.kind in t&&!S&&(S=ee):v=ee)}D?D.mode="showing":S?S.mode="showing":v&&(v.mode="showing")},u.toggleDisplay=function(){this.player_.tech_&&this.player_.tech_.featuresNativeTextTracks?this.hide():this.show()},u.createEl=function(){return g.prototype.createEl.call(this,"div",{className:"vjs-text-track-display"},{translate:"yes","aria-live":"off","aria-atomic":"true"})},u.clearDisplay=function(){"function"==typeof ae().WebVTT&&ae().WebVTT.processCues(ae(),[],this.el_)},u.updateDisplay=function(){var t=this.player_.textTracks(),s=this.options_.allowMultipleShowingTracks;if(this.clearDisplay(),s){for(var h=[],v=0;v<t.length;++v){var S=t[v];"showing"===S.mode&&h.push(S)}this.updateForTrack(h)}else{for(var D=null,F=null,ee=t.length;ee--;){var Y=t[ee];"showing"===Y.mode&&("descriptions"===Y.kind?D=Y:F=Y)}F?("off"!==this.getAttribute("aria-live")&&this.setAttribute("aria-live","off"),this.updateForTrack(F)):D&&("assertive"!==this.getAttribute("aria-live")&&this.setAttribute("aria-live","assertive"),this.updateForTrack(D))}},u.updateDisplayState=function(t){for(var s=this.player_.textTrackSettings.getValues(),h=t.activeCues,v=h.length;v--;){var S=h[v];if(S){var D=S.displayState;if(s.color&&(D.firstChild.style.color=s.color),s.textOpacity&&pf(D.firstChild,"color",uh(s.color||"#fff",s.textOpacity)),s.backgroundColor&&(D.firstChild.style.backgroundColor=s.backgroundColor),s.backgroundOpacity&&pf(D.firstChild,"backgroundColor",uh(s.backgroundColor||"#000",s.backgroundOpacity)),s.windowColor&&(s.windowOpacity?pf(D,"backgroundColor",uh(s.windowColor,s.windowOpacity)):D.style.backgroundColor=s.windowColor),s.edgeStyle&&("dropshadow"===s.edgeStyle?D.firstChild.style.textShadow="2px 2px 3px #222, 2px 2px 4px #222, 2px 2px 5px "+ba:"raised"===s.edgeStyle?D.firstChild.style.textShadow="1px 1px #222, 2px 2px #222, 3px 3px "+ba:"depressed"===s.edgeStyle?D.firstChild.style.textShadow="1px 1px #ccc, 0 1px #ccc, -1px -1px #222, 0 -1px "+ba:"uniform"===s.edgeStyle&&(D.firstChild.style.textShadow="0 0 4px #222, 0 0 4px #222, 0 0 4px #222, 0 0 4px "+ba)),s.fontPercent&&1!==s.fontPercent){var F=ae().parseFloat(D.style.fontSize);D.style.fontSize=F*s.fontPercent+"px",D.style.height="auto",D.style.top="auto"}s.fontFamily&&"default"!==s.fontFamily&&("small-caps"===s.fontFamily?D.firstChild.style.fontVariant="small-caps":D.firstChild.style.fontFamily=vd[s.fontFamily])}}},u.updateForTrack=function(t){if(Array.isArray(t)||(t=[t]),"function"==typeof ae().WebVTT&&!t.every(function(me){return!me.activeCues})){for(var s=[],h=0;h<t.length;++h)for(var v=t[h],S=0;S<v.activeCues.length;++S)s.push(v.activeCues[S]);ae().WebVTT.processCues(ae(),s,this.el_);for(var D=0;D<t.length;++D){for(var F=t[D],ee=0;ee<F.activeCues.length;++ee){var Y=F.activeCues[ee].displayState;Oi(Y,"vjs-text-track-cue"),Oi(Y,"vjs-text-track-cue-"+(F.language?F.language:D)),F.language&&lu(Y,"lang",F.language)}this.player_.textTrackSettings&&this.updateDisplayState(F)}}},i}(dn);dn.registerComponent("TextTrackDisplay",hc);var vg=function(g){function i(){return g.apply(this,arguments)||this}return Me(i,g),i.prototype.createEl=function(){var t=this.player_.isAudio(),s=this.localize(t?"Audio Player":"Video Player"),h=Kr("span",{className:"vjs-control-text",textContent:this.localize("{1} is loading.",[s])}),v=g.prototype.createEl.call(this,"div",{className:"vjs-loading-spinner",dir:"ltr"});return v.appendChild(h),v},i}(dn);dn.registerComponent("LoadingSpinner",vg);var Su=function(g){function i(){return g.apply(this,arguments)||this}Me(i,g);var u=i.prototype;return u.createEl=function(t,s,h){void 0===s&&(s={}),void 0===h&&(h={});var v=Kr("button",s=Ls({className:this.buildCSSClass()},s),h=Ls({type:"button"},h));return v.appendChild(Kr("span",{className:"vjs-icon-placeholder"},{"aria-hidden":!0})),this.createControlTextEl(v),v},u.addChild=function(t,s){return void 0===s&&(s={}),qr.warn("Adding an actionable (user controllable) child to a Button ("+this.constructor.name+") is not supported; use a ClickableComponent instead."),dn.prototype.addChild.call(this,t,s)},u.enable=function(){g.prototype.enable.call(this),this.el_.removeAttribute("disabled")},u.disable=function(){g.prototype.disable.call(this),this.el_.setAttribute("disabled","disabled")},u.handleKeyDown=function(t){We().isEventKey(t,"Space")||We().isEventKey(t,"Enter")?t.stopPropagation():g.prototype.handleKeyDown.call(this,t)},i}(ah);dn.registerComponent("Button",Su);var yd=function(g){function i(l,t){var s;return(s=g.call(this,l,t)||this).mouseused_=!1,s.on("mousedown",function(h){return s.handleMouseDown(h)}),s}Me(i,g);var u=i.prototype;return u.buildCSSClass=function(){return"vjs-big-play-button"},u.handleClick=function(t){var s=this.player_.play();if(this.mouseused_&&t.clientX&&t.clientY){var h=this.player_.usingPlugin("eme")&&this.player_.eme.sessions&&this.player_.eme.sessions.length>0;return $e(s),void(this.player_.tech(!0)&&(!oe&&!sa||!h)&&this.player_.tech(!0).focus())}var v=this.player_.getChild("controlBar"),S=v&&v.getChild("playToggle");if(S){var D=function(){return S.focus()};_e(s)?s.then(D,function(){}):this.setTimeout(D,1)}else this.player_.tech(!0).focus()},u.handleKeyDown=function(t){this.mouseused_=!1,g.prototype.handleKeyDown.call(this,t)},u.handleMouseDown=function(t){this.mouseused_=!0},i}(Su);yd.prototype.controlText_="Play Video",dn.registerComponent("BigPlayButton",yd);var up=function(g){function i(l,t){var s;return(s=g.call(this,l,t)||this).controlText(t&&t.controlText||s.localize("Close")),s}Me(i,g);var u=i.prototype;return u.buildCSSClass=function(){return"vjs-close-button "+g.prototype.buildCSSClass.call(this)},u.handleClick=function(t){this.trigger({type:"close",bubbles:!1})},u.handleKeyDown=function(t){We().isEventKey(t,"Esc")?(t.preventDefault(),t.stopPropagation(),this.trigger("click")):g.prototype.handleKeyDown.call(this,t)},i}(Su);dn.registerComponent("CloseButton",up);var gf=function(g){function i(l,t){var s;return void 0===t&&(t={}),s=g.call(this,l,t)||this,t.replay=void 0===t.replay||t.replay,s.on(l,"play",function(h){return s.handlePlay(h)}),s.on(l,"pause",function(h){return s.handlePause(h)}),t.replay&&s.on(l,"ended",function(h){return s.handleEnded(h)}),s}Me(i,g);var u=i.prototype;return u.buildCSSClass=function(){return"vjs-play-control "+g.prototype.buildCSSClass.call(this)},u.handleClick=function(t){this.player_.paused()?$e(this.player_.play()):this.player_.pause()},u.handleSeeked=function(t){this.removeClass("vjs-ended"),this.player_.paused()?this.handlePause(t):this.handlePlay(t)},u.handlePlay=function(t){this.removeClass("vjs-ended"),this.removeClass("vjs-paused"),this.addClass("vjs-playing"),this.controlText("Pause")},u.handlePause=function(t){this.removeClass("vjs-playing"),this.addClass("vjs-paused"),this.controlText("Play")},u.handleEnded=function(t){var s=this;this.removeClass("vjs-playing"),this.addClass("vjs-ended"),this.controlText("Replay"),this.one(this.player_,"seeked",function(h){return s.handleSeeked(h)})},i}(Su);gf.prototype.controlText_="Play",dn.registerComponent("PlayToggle",gf);var Xu=function(i,u){i=i<0?0:i;var l=Math.floor(i%60),t=Math.floor(i/60%60),s=Math.floor(i/3600),h=Math.floor(u/60%60),v=Math.floor(u/3600);return(isNaN(i)||i===1/0)&&(s=t=l="-"),(s=s>0||v>0?s+":":"")+(t=((s||h>=10)&&t<10?"0"+t:t)+":")+(l<10?"0"+l:l)},cl=Xu;function dl(g,i){return void 0===i&&(i=g),cl(g,i)}var hl=function(g){function i(l,t){var s;return(s=g.call(this,l,t)||this).on(l,["timeupdate","ended"],function(h){return s.updateContent(h)}),s.updateTextNode_(),s}Me(i,g);var u=i.prototype;return u.createEl=function(){var t=this.buildCSSClass(),s=g.prototype.createEl.call(this,"div",{className:t+" vjs-time-control vjs-control"}),h=Kr("span",{className:"vjs-control-text",textContent:this.localize(this.labelText_)+"\xa0"},{role:"presentation"});return s.appendChild(h),this.contentEl_=Kr("span",{className:t+"-display"},{"aria-live":"off",role:"presentation"}),s.appendChild(this.contentEl_),s},u.dispose=function(){this.contentEl_=null,this.textNode_=null,g.prototype.dispose.call(this)},u.updateTextNode_=function(t){var s=this;void 0===t&&(t=0),t=dl(t),this.formattedTime_!==t&&(this.formattedTime_=t,this.requestNamedAnimationFrame("TimeDisplay#updateTextNode_",function(){if(s.contentEl_){var h=s.textNode_;h&&s.contentEl_.firstChild!==h&&(h=null,qr.warn("TimeDisplay#updateTextnode_: Prevented replacement of text node element since it was no longer a child of this node. Appending a new node instead.")),s.textNode_=et().createTextNode(s.formattedTime_),s.textNode_&&(h?s.contentEl_.replaceChild(s.textNode_,h):s.contentEl_.appendChild(s.textNode_))}}))},u.updateContent=function(t){},i}(dn);hl.prototype.labelText_="Time",hl.prototype.controlText_="Time",dn.registerComponent("TimeDisplay",hl);var mf=function(g){function i(){return g.apply(this,arguments)||this}Me(i,g);var u=i.prototype;return u.buildCSSClass=function(){return"vjs-current-time"},u.updateContent=function(t){var s;s=this.player_.ended()?this.player_.duration():this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime(),this.updateTextNode_(s)},i}(hl);mf.prototype.labelText_="Current Time",mf.prototype.controlText_="Current Time",dn.registerComponent("CurrentTimeDisplay",mf);var _d=function(g){function i(l,t){var s,h=function(S){return s.updateContent(S)};return(s=g.call(this,l,t)||this).on(l,"durationchange",h),s.on(l,"loadstart",h),s.on(l,"loadedmetadata",h),s}Me(i,g);var u=i.prototype;return u.buildCSSClass=function(){return"vjs-duration"},u.updateContent=function(t){var s=this.player_.duration();this.updateTextNode_(s)},i}(hl);_d.prototype.labelText_="Duration",_d.prototype.controlText_="Duration",dn.registerComponent("DurationDisplay",_d);var Bc=function(g){function i(){return g.apply(this,arguments)||this}return Me(i,g),i.prototype.createEl=function(){var t=g.prototype.createEl.call(this,"div",{className:"vjs-time-control vjs-time-divider"},{"aria-hidden":!0}),s=g.prototype.createEl.call(this,"div"),h=g.prototype.createEl.call(this,"span",{textContent:"/"});return s.appendChild(h),t.appendChild(s),t},i}(dn);dn.registerComponent("TimeDivider",Bc);var cp=function(g){function i(l,t){var s;return(s=g.call(this,l,t)||this).on(l,"durationchange",function(h){return s.updateContent(h)}),s}Me(i,g);var u=i.prototype;return u.buildCSSClass=function(){return"vjs-remaining-time"},u.createEl=function(){var t=g.prototype.createEl.call(this);return!1!==this.options_.displayNegative&&t.insertBefore(Kr("span",{},{"aria-hidden":!0},"-"),this.contentEl_),t},u.updateContent=function(t){var s;"number"==typeof this.player_.duration()&&(s=this.player_.ended()?0:this.player_.remainingTimeDisplay?this.player_.remainingTimeDisplay():this.player_.remainingTime(),this.updateTextNode_(s))},i}(hl);cp.prototype.labelText_="Remaining Time",cp.prototype.controlText_="Remaining Time",dn.registerComponent("RemainingTimeDisplay",cp);var Nm=function(g){function i(l,t){var s;return(s=g.call(this,l,t)||this).updateShowing(),s.on(s.player(),"durationchange",function(h){return s.updateShowing(h)}),s}Me(i,g);var u=i.prototype;return u.createEl=function(){var t=g.prototype.createEl.call(this,"div",{className:"vjs-live-control vjs-control"});return this.contentEl_=Kr("div",{className:"vjs-live-display"},{"aria-live":"off"}),this.contentEl_.appendChild(Kr("span",{className:"vjs-control-text",textContent:this.localize("Stream Type")+"\xa0"})),this.contentEl_.appendChild(et().createTextNode(this.localize("LIVE"))),t.appendChild(this.contentEl_),t},u.dispose=function(){this.contentEl_=null,g.prototype.dispose.call(this)},u.updateShowing=function(t){this.player().duration()===1/0?this.show():this.hide()},i}(dn);dn.registerComponent("LiveDisplay",Nm);var As=function(g){function i(l,t){var s;return(s=g.call(this,l,t)||this).updateLiveEdgeStatus(),s.player_.liveTracker&&(s.updateLiveEdgeStatusHandler_=function(h){return s.updateLiveEdgeStatus(h)},s.on(s.player_.liveTracker,"liveedgechange",s.updateLiveEdgeStatusHandler_)),s}Me(i,g);var u=i.prototype;return u.createEl=function(){var t=g.prototype.createEl.call(this,"button",{className:"vjs-seek-to-live-control vjs-control"});return this.textEl_=Kr("span",{className:"vjs-seek-to-live-text",textContent:this.localize("LIVE")},{"aria-hidden":"true"}),t.appendChild(this.textEl_),t},u.updateLiveEdgeStatus=function(){!this.player_.liveTracker||this.player_.liveTracker.atLiveEdge()?(this.setAttribute("aria-disabled",!0),this.addClass("vjs-at-live-edge"),this.controlText("Seek to live, currently playing live")):(this.setAttribute("aria-disabled",!1),this.removeClass("vjs-at-live-edge"),this.controlText("Seek to live, currently behind live"))},u.handleClick=function(){this.player_.liveTracker.seekToLiveEdge()},u.dispose=function(){this.player_.liveTracker&&this.off(this.player_.liveTracker,"liveedgechange",this.updateLiveEdgeStatusHandler_),this.textEl_=null,g.prototype.dispose.call(this)},i}(Su);As.prototype.controlText_="Seek to live, currently playing live",dn.registerComponent("SeekToLive",As);var Hl=function(i,u,l){return i=Number(i),Math.min(l,Math.max(u,isNaN(i)?u:i))},Vc=function(g){function i(l,t){var s;return(s=g.call(this,l,t)||this).handleMouseDown_=function(h){return s.handleMouseDown(h)},s.handleMouseUp_=function(h){return s.handleMouseUp(h)},s.handleKeyDown_=function(h){return s.handleKeyDown(h)},s.handleClick_=function(h){return s.handleClick(h)},s.handleMouseMove_=function(h){return s.handleMouseMove(h)},s.update_=function(h){return s.update(h)},s.bar=s.getChild(s.options_.barName),s.vertical(!!s.options_.vertical),s.enable(),s}Me(i,g);var u=i.prototype;return u.enabled=function(){return this.enabled_},u.enable=function(){this.enabled()||(this.on("mousedown",this.handleMouseDown_),this.on("touchstart",this.handleMouseDown_),this.on("keydown",this.handleKeyDown_),this.on("click",this.handleClick_),this.on(this.player_,"controlsvisible",this.update),this.playerEvent&&this.on(this.player_,this.playerEvent,this.update),this.removeClass("disabled"),this.setAttribute("tabindex",0),this.enabled_=!0)},u.disable=function(){if(this.enabled()){var t=this.bar.el_.ownerDocument;this.off("mousedown",this.handleMouseDown_),this.off("touchstart",this.handleMouseDown_),this.off("keydown",this.handleKeyDown_),this.off("click",this.handleClick_),this.off(this.player_,"controlsvisible",this.update_),this.off(t,"mousemove",this.handleMouseMove_),this.off(t,"mouseup",this.handleMouseUp_),this.off(t,"touchmove",this.handleMouseMove_),this.off(t,"touchend",this.handleMouseUp_),this.removeAttribute("tabindex"),this.addClass("disabled"),this.playerEvent&&this.off(this.player_,this.playerEvent,this.update),this.enabled_=!1}},u.createEl=function(t,s,h){return void 0===s&&(s={}),void 0===h&&(h={}),s.className=s.className+" vjs-slider",s=Ls({tabIndex:0},s),h=Ls({role:"slider","aria-valuenow":0,"aria-valuemin":0,"aria-valuemax":100,tabIndex:0},h),g.prototype.createEl.call(this,t,s,h)},u.handleMouseDown=function(t){var s=this.bar.el_.ownerDocument;"mousedown"===t.type&&t.preventDefault(),"touchstart"===t.type&&!va&&t.preventDefault(),uc(),this.addClass("vjs-sliding"),this.trigger("slideractive"),this.on(s,"mousemove",this.handleMouseMove_),this.on(s,"mouseup",this.handleMouseUp_),this.on(s,"touchmove",this.handleMouseMove_),this.on(s,"touchend",this.handleMouseUp_),this.handleMouseMove(t,!0)},u.handleMouseMove=function(t){},u.handleMouseUp=function(){var t=this.bar.el_.ownerDocument;zu(),this.removeClass("vjs-sliding"),this.trigger("sliderinactive"),this.off(t,"mousemove",this.handleMouseMove_),this.off(t,"mouseup",this.handleMouseUp_),this.off(t,"touchmove",this.handleMouseMove_),this.off(t,"touchend",this.handleMouseUp_),this.update()},u.update=function(){var t=this;if(this.el_&&this.bar){var s=this.getProgress();return s===this.progress_||(this.progress_=s,this.requestNamedAnimationFrame("Slider#update",function(){var h=t.vertical()?"height":"width";t.bar.el().style[h]=(100*s).toFixed(2)+"%"})),s}},u.getProgress=function(){return Number(Hl(this.getPercent(),0,1).toFixed(4))},u.calculateDistance=function(t){var s=Mr(this.el_,t);return this.vertical()?s.y:s.x},u.handleKeyDown=function(t){We().isEventKey(t,"Left")||We().isEventKey(t,"Down")?(t.preventDefault(),t.stopPropagation(),this.stepBack()):We().isEventKey(t,"Right")||We().isEventKey(t,"Up")?(t.preventDefault(),t.stopPropagation(),this.stepForward()):g.prototype.handleKeyDown.call(this,t)},u.handleClick=function(t){t.stopPropagation(),t.preventDefault()},u.vertical=function(t){if(void 0===t)return this.vertical_||!1;this.vertical_=!!t,this.addClass(this.vertical_?"vjs-slider-vertical":"vjs-slider-horizontal")},i}(dn);dn.registerComponent("Slider",Vc);var Td=function(i,u){return Hl(i/u*100,0,100).toFixed(2)+"%"},yg=function(g){function i(l,t){var s;return(s=g.call(this,l,t)||this).partEls_=[],s.on(l,"progress",function(h){return s.update(h)}),s}Me(i,g);var u=i.prototype;return u.createEl=function(){var t=g.prototype.createEl.call(this,"div",{className:"vjs-load-progress"}),s=Kr("span",{className:"vjs-control-text"}),h=Kr("span",{textContent:this.localize("Loaded")}),v=et().createTextNode(": ");return this.percentageEl_=Kr("span",{className:"vjs-control-text-loaded-percentage",textContent:"0%"}),t.appendChild(s),s.appendChild(h),s.appendChild(v),s.appendChild(this.percentageEl_),t},u.dispose=function(){this.partEls_=null,this.percentageEl_=null,g.prototype.dispose.call(this)},u.update=function(t){var s=this;this.requestNamedAnimationFrame("LoadProgressBar#update",function(){var h=s.player_.liveTracker,v=s.player_.buffered(),S=h&&h.isLive()?h.seekableEnd():s.player_.duration(),D=s.player_.bufferedEnd(),F=s.partEls_,ee=Td(D,S);s.percent_!==ee&&(s.el_.style.width=ee,Cn(s.percentageEl_,ee),s.percent_=ee);for(var Y=0;Y<v.length;Y++){var me=v.start(Y),Le=v.end(Y),Be=F[Y];Be||(Be=s.el_.appendChild(Kr()),F[Y]=Be),(Be.dataset.start!==me||Be.dataset.end!==Le)&&(Be.dataset.start=me,Be.dataset.end=Le,Be.style.left=Td(me,D),Be.style.width=Td(Le-me,D))}for(var Ue=F.length;Ue>v.length;Ue--)s.el_.removeChild(F[Ue-1]);F.length=v.length})},i}(dn);dn.registerComponent("LoadProgressBar",yg);var lh=function(g){function i(l,t){var s;return(s=g.call(this,l,t)||this).update=ka(Ds(dt(s),s.update),Eo),s}Me(i,g);var u=i.prototype;return u.createEl=function(){return g.prototype.createEl.call(this,"div",{className:"vjs-time-tooltip"},{"aria-hidden":"true"})},u.update=function(t,s,h){var v=ku(this.el_),S=Wa(this.player_.el()),D=t.width*s;if(S&&v){var F=t.left-S.left+D,ee=t.width-D+(S.right-t.right),Y=v.width/2;F<Y?Y+=Y-F:ee<Y&&(Y=ee),Y<0?Y=0:Y>v.width&&(Y=v.width),Y=Math.round(Y),this.el_.style.right="-"+Y+"px",this.write(h)}},u.write=function(t){Cn(this.el_,t)},u.updateTime=function(t,s,h,v){var S=this;this.requestNamedAnimationFrame("TimeTooltip#updateTime",function(){var D,F=S.player_.duration();if(S.player_.liveTracker&&S.player_.liveTracker.isLive()){var ee=S.player_.liveTracker.liveWindow(),Y=ee-s*ee;D=(Y<1?"":"-")+dl(Y,ee)}else D=dl(h,F);S.update(t,s,D),v&&v()})},i}(dn);dn.registerComponent("TimeTooltip",lh);var vf=function(g){function i(l,t){var s;return(s=g.call(this,l,t)||this).update=ka(Ds(dt(s),s.update),Eo),s}Me(i,g);var u=i.prototype;return u.createEl=function(){return g.prototype.createEl.call(this,"div",{className:"vjs-play-progress vjs-slider-bar"},{"aria-hidden":"true"})},u.update=function(t,s){var h=this.getChild("timeTooltip");if(h){var v=this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime();h.updateTime(t,s,v)}},i}(dn);vf.prototype.options_={children:[]},!Rn&&!za&&vf.prototype.options_.children.push("timeTooltip"),dn.registerComponent("PlayProgressBar",vf);var yf=function(g){function i(l,t){var s;return(s=g.call(this,l,t)||this).update=ka(Ds(dt(s),s.update),Eo),s}Me(i,g);var u=i.prototype;return u.createEl=function(){return g.prototype.createEl.call(this,"div",{className:"vjs-mouse-display"})},u.update=function(t,s){var h=this,v=s*this.player_.duration();this.getChild("timeTooltip").updateTime(t,s,v,function(){h.el_.style.left=t.width*s+"px"})},i}(dn);yf.prototype.options_={children:["timeTooltip"]},dn.registerComponent("MouseTimeDisplay",yf);var ch=function(g){function i(l,t){var s;return(s=g.call(this,l,t)||this).setEventHandlers_(),s}Me(i,g);var u=i.prototype;return u.setEventHandlers_=function(){var t=this;this.update_=Ds(this,this.update),this.update=ka(this.update_,Eo),this.on(this.player_,["ended","durationchange","timeupdate"],this.update),this.player_.liveTracker&&this.on(this.player_.liveTracker,"liveedgechange",this.update),this.updateInterval=null,this.enableIntervalHandler_=function(s){return t.enableInterval_(s)},this.disableIntervalHandler_=function(s){return t.disableInterval_(s)},this.on(this.player_,["playing"],this.enableIntervalHandler_),this.on(this.player_,["ended","pause","waiting"],this.disableIntervalHandler_),"hidden"in et()&&"visibilityState"in et()&&this.on(et(),"visibilitychange",this.toggleVisibility_)},u.toggleVisibility_=function(t){"hidden"===et().visibilityState?(this.cancelNamedAnimationFrame("SeekBar#update"),this.cancelNamedAnimationFrame("Slider#update"),this.disableInterval_(t)):(!this.player_.ended()&&!this.player_.paused()&&this.enableInterval_(),this.update())},u.enableInterval_=function(){this.updateInterval||(this.updateInterval=this.setInterval(this.update,Eo))},u.disableInterval_=function(t){this.player_.liveTracker&&this.player_.liveTracker.isLive()&&t&&"ended"!==t.type||this.updateInterval&&(this.clearInterval(this.updateInterval),this.updateInterval=null)},u.createEl=function(){return g.prototype.createEl.call(this,"div",{className:"vjs-progress-holder"},{"aria-label":this.localize("Progress Bar")})},u.update=function(t){var s=this;if("hidden"!==et().visibilityState){var h=g.prototype.update.call(this);return this.requestNamedAnimationFrame("SeekBar#update",function(){var v=s.player_.ended()?s.player_.duration():s.getCurrentTime_(),S=s.player_.liveTracker,D=s.player_.duration();S&&S.isLive()&&(D=s.player_.liveTracker.liveCurrentTime()),s.percent_!==h&&(s.el_.setAttribute("aria-valuenow",(100*h).toFixed(2)),s.percent_=h),(s.currentTime_!==v||s.duration_!==D)&&(s.el_.setAttribute("aria-valuetext",s.localize("progress bar timing: currentTime={1} duration={2}",[dl(v,D),dl(D,D)],"{1} of {2}")),s.currentTime_=v,s.duration_=D),s.bar&&s.bar.update(Wa(s.el()),s.getProgress())}),h}},u.userSeek_=function(t){this.player_.liveTracker&&this.player_.liveTracker.isLive()&&this.player_.liveTracker.nextSeekedFromUser(),this.player_.currentTime(t)},u.getCurrentTime_=function(){return this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime()},u.getPercent=function(){var s,t=this.getCurrentTime_(),h=this.player_.liveTracker;return h&&h.isLive()?(s=(t-h.seekableStart())/h.liveWindow(),h.atLiveEdge()&&(s=1)):s=t/this.player_.duration(),s},u.handleMouseDown=function(t){Ur(t)&&(t.stopPropagation(),this.videoWasPlaying=!this.player_.paused(),this.player_.pause(),g.prototype.handleMouseDown.call(this,t))},u.handleMouseMove=function(t,s){if(void 0===s&&(s=!1),Ur(t)){!s&&!this.player_.scrubbing()&&this.player_.scrubbing(!0);var h,v=this.calculateDistance(t),S=this.player_.liveTracker;if(S&&S.isLive()){if(v>=.99)return void S.seekToLiveEdge();var D=S.seekableStart(),F=S.liveCurrentTime();if((h=D+v*S.liveWindow())>=F&&(h=F),h<=D&&(h=D+.1),h===1/0)return}else(h=v*this.player_.duration())===this.player_.duration()&&(h-=.1);this.userSeek_(h)}},u.enable=function(){g.prototype.enable.call(this);var t=this.getChild("mouseTimeDisplay");t&&t.show()},u.disable=function(){g.prototype.disable.call(this);var t=this.getChild("mouseTimeDisplay");t&&t.hide()},u.handleMouseUp=function(t){g.prototype.handleMouseUp.call(this,t),t&&t.stopPropagation(),this.player_.scrubbing(!1),this.player_.trigger({type:"timeupdate",target:this,manuallyTriggered:!0}),this.videoWasPlaying?$e(this.player_.play()):this.update_()},u.stepForward=function(){this.userSeek_(this.player_.currentTime()+5)},u.stepBack=function(){this.userSeek_(this.player_.currentTime()-5)},u.handleAction=function(t){this.player_.paused()?this.player_.play():this.player_.pause()},u.handleKeyDown=function(t){var s=this.player_.liveTracker;if(We().isEventKey(t,"Space")||We().isEventKey(t,"Enter"))t.preventDefault(),t.stopPropagation(),this.handleAction(t);else if(We().isEventKey(t,"Home"))t.preventDefault(),t.stopPropagation(),this.userSeek_(0);else if(We().isEventKey(t,"End"))t.preventDefault(),t.stopPropagation(),s&&s.isLive()?this.userSeek_(s.liveCurrentTime()):this.userSeek_(this.player_.duration());else if(/^[0-9]$/.test(We()(t))){t.preventDefault(),t.stopPropagation();var h=10*(We().codes[We()(t)]-We().codes[0])/100;s&&s.isLive()?this.userSeek_(s.seekableStart()+s.liveWindow()*h):this.userSeek_(this.player_.duration()*h)}else We().isEventKey(t,"PgDn")?(t.preventDefault(),t.stopPropagation(),this.userSeek_(this.player_.currentTime()-60)):We().isEventKey(t,"PgUp")?(t.preventDefault(),t.stopPropagation(),this.userSeek_(this.player_.currentTime()+60)):g.prototype.handleKeyDown.call(this,t)},u.dispose=function(){this.disableInterval_(),this.off(this.player_,["ended","durationchange","timeupdate"],this.update),this.player_.liveTracker&&this.off(this.player_.liveTracker,"liveedgechange",this.update),this.off(this.player_,["playing"],this.enableIntervalHandler_),this.off(this.player_,["ended","pause","waiting"],this.disableIntervalHandler_),"hidden"in et()&&"visibilityState"in et()&&this.off(et(),"visibilitychange",this.toggleVisibility_),g.prototype.dispose.call(this)},i}(Vc);ch.prototype.options_={children:["loadProgressBar","playProgressBar"],barName:"playProgressBar"},!Rn&&!za&&ch.prototype.options_.children.splice(1,0,"mouseTimeDisplay"),dn.registerComponent("SeekBar",ch);var _f=function(g){function i(l,t){var s;return(s=g.call(this,l,t)||this).handleMouseMove=ka(Ds(dt(s),s.handleMouseMove),Eo),s.throttledHandleMouseSeek=ka(Ds(dt(s),s.handleMouseSeek),Eo),s.handleMouseUpHandler_=function(h){return s.handleMouseUp(h)},s.handleMouseDownHandler_=function(h){return s.handleMouseDown(h)},s.enable(),s}Me(i,g);var u=i.prototype;return u.createEl=function(){return g.prototype.createEl.call(this,"div",{className:"vjs-progress-control vjs-control"})},u.handleMouseMove=function(t){var s=this.getChild("seekBar");if(s){var h=s.getChild("playProgressBar"),v=s.getChild("mouseTimeDisplay");if(h||v){var S=s.el(),D=ku(S),F=Mr(S,t).x;F=Hl(F,0,1),v&&v.update(D,F),h&&h.update(D,s.getProgress())}}},u.handleMouseSeek=function(t){var s=this.getChild("seekBar");s&&s.handleMouseMove(t)},u.enabled=function(){return this.enabled_},u.disable=function(){if(this.children().forEach(function(s){return s.disable&&s.disable()}),this.enabled()&&(this.off(["mousedown","touchstart"],this.handleMouseDownHandler_),this.off(this.el_,"mousemove",this.handleMouseMove),this.removeListenersAddedOnMousedownAndTouchstart(),this.addClass("disabled"),this.enabled_=!1,this.player_.scrubbing())){var t=this.getChild("seekBar");this.player_.scrubbing(!1),t.videoWasPlaying&&$e(this.player_.play())}},u.enable=function(){this.children().forEach(function(t){return t.enable&&t.enable()}),!this.enabled()&&(this.on(["mousedown","touchstart"],this.handleMouseDownHandler_),this.on(this.el_,"mousemove",this.handleMouseMove),this.removeClass("disabled"),this.enabled_=!0)},u.removeListenersAddedOnMousedownAndTouchstart=function(){var t=this.el_.ownerDocument;this.off(t,"mousemove",this.throttledHandleMouseSeek),this.off(t,"touchmove",this.throttledHandleMouseSeek),this.off(t,"mouseup",this.handleMouseUpHandler_),this.off(t,"touchend",this.handleMouseUpHandler_)},u.handleMouseDown=function(t){var s=this.el_.ownerDocument,h=this.getChild("seekBar");h&&h.handleMouseDown(t),this.on(s,"mousemove",this.throttledHandleMouseSeek),this.on(s,"touchmove",this.throttledHandleMouseSeek),this.on(s,"mouseup",this.handleMouseUpHandler_),this.on(s,"touchend",this.handleMouseUpHandler_)},u.handleMouseUp=function(t){var s=this.getChild("seekBar");s&&s.handleMouseUp(t),this.removeListenersAddedOnMousedownAndTouchstart()},i}(dn);_f.prototype.options_={children:["seekBar"]},dn.registerComponent("ProgressControl",_f);var _g=function(g){function i(l,t){var s;return(s=g.call(this,l,t)||this).on(l,["enterpictureinpicture","leavepictureinpicture"],function(h){return s.handlePictureInPictureChange(h)}),s.on(l,["disablepictureinpicturechanged","loadedmetadata"],function(h){return s.handlePictureInPictureEnabledChange(h)}),s.on(l,["loadedmetadata","audioonlymodechange","audiopostermodechange"],function(){"audio"===l.currentType().substring(0,5)||l.audioPosterMode()||l.audioOnlyMode()?(l.isInPictureInPicture()&&l.exitPictureInPicture(),s.hide()):s.show()}),s.disable(),s}Me(i,g);var u=i.prototype;return u.buildCSSClass=function(){return"vjs-picture-in-picture-control "+g.prototype.buildCSSClass.call(this)},u.handlePictureInPictureEnabledChange=function(){et().pictureInPictureEnabled&&!1===this.player_.disablePictureInPicture()?this.enable():this.disable()},u.handlePictureInPictureChange=function(t){this.player_.isInPictureInPicture()?this.controlText("Exit Picture-in-Picture"):this.controlText("Picture-in-Picture"),this.handlePictureInPictureEnabledChange()},u.handleClick=function(t){this.player_.isInPictureInPicture()?this.player_.exitPictureInPicture():this.player_.requestPictureInPicture()},i}(Su);_g.prototype.controlText_="Picture-in-Picture",dn.registerComponent("PictureInPictureToggle",_g);var Rl=function(g){function i(l,t){var s;return(s=g.call(this,l,t)||this).on(l,"fullscreenchange",function(h){return s.handleFullscreenChange(h)}),!1===et()[l.fsApi_.fullscreenEnabled]&&s.disable(),s}Me(i,g);var u=i.prototype;return u.buildCSSClass=function(){return"vjs-fullscreen-control "+g.prototype.buildCSSClass.call(this)},u.handleFullscreenChange=function(t){this.player_.isFullscreen()?this.controlText("Non-Fullscreen"):this.controlText("Fullscreen")},u.handleClick=function(t){this.player_.isFullscreen()?this.player_.exitFullscreen():this.player_.requestFullscreen()},i}(Su);Rl.prototype.controlText_="Fullscreen",dn.registerComponent("FullscreenToggle",Rl);var dp=function(i,u){u.tech_&&!u.tech_.featuresVolumeControl&&i.addClass("vjs-hidden"),i.on(u,"loadstart",function(){u.tech_.featuresVolumeControl?i.removeClass("vjs-hidden"):i.addClass("vjs-hidden")})},Tg=function(g){function i(){return g.apply(this,arguments)||this}return Me(i,g),i.prototype.createEl=function(){var t=g.prototype.createEl.call(this,"div",{className:"vjs-volume-level"});return t.appendChild(g.prototype.createEl.call(this,"span",{className:"vjs-control-text"})),t},i}(dn);dn.registerComponent("VolumeLevel",Tg);var ko=function(g){function i(l,t){var s;return(s=g.call(this,l,t)||this).update=ka(Ds(dt(s),s.update),Eo),s}Me(i,g);var u=i.prototype;return u.createEl=function(){return g.prototype.createEl.call(this,"div",{className:"vjs-volume-tooltip"},{"aria-hidden":"true"})},u.update=function(t,s,h,v){if(!h){var S=Wa(this.el_),D=Wa(this.player_.el()),F=t.width*s;if(!D||!S)return;var ee=t.left-D.left+F,Y=t.width-F+(D.right-t.right),me=S.width/2;ee<me?me+=me-ee:Y<me&&(me=Y),me<0?me=0:me>S.width&&(me=S.width),this.el_.style.right="-"+me+"px"}this.write(v+"%")},u.write=function(t){Cn(this.el_,t)},u.updateVolume=function(t,s,h,v,S){var D=this;this.requestNamedAnimationFrame("VolumeLevelTooltip#updateVolume",function(){D.update(t,s,h,v.toFixed(0)),S&&S()})},i}(dn);dn.registerComponent("VolumeLevelTooltip",ko);var ki=function(g){function i(l,t){var s;return(s=g.call(this,l,t)||this).update=ka(Ds(dt(s),s.update),Eo),s}Me(i,g);var u=i.prototype;return u.createEl=function(){return g.prototype.createEl.call(this,"div",{className:"vjs-mouse-display"})},u.update=function(t,s,h){var v=this,S=100*s;this.getChild("volumeLevelTooltip").updateVolume(t,s,h,S,function(){h?v.el_.style.bottom=t.height*s+"px":v.el_.style.left=t.width*s+"px"})},i}(dn);ki.prototype.options_={children:["volumeLevelTooltip"]},dn.registerComponent("MouseVolumeLevelDisplay",ki);var Gl=function(g){function i(l,t){var s;return(s=g.call(this,l,t)||this).on("slideractive",function(h){return s.updateLastVolume_(h)}),s.on(l,"volumechange",function(h){return s.updateARIAAttributes(h)}),l.ready(function(){return s.updateARIAAttributes()}),s}Me(i,g);var u=i.prototype;return u.createEl=function(){return g.prototype.createEl.call(this,"div",{className:"vjs-volume-bar vjs-slider-bar"},{"aria-label":this.localize("Volume Level"),"aria-live":"polite"})},u.handleMouseDown=function(t){Ur(t)&&g.prototype.handleMouseDown.call(this,t)},u.handleMouseMove=function(t){var s=this.getChild("mouseVolumeLevelDisplay");if(s){var h=this.el(),v=Wa(h),S=this.vertical(),D=Mr(h,t);D=Hl(D=S?D.y:D.x,0,1),s.update(v,D,S)}Ur(t)&&(this.checkMuted(),this.player_.volume(this.calculateDistance(t)))},u.checkMuted=function(){this.player_.muted()&&this.player_.muted(!1)},u.getPercent=function(){return this.player_.muted()?0:this.player_.volume()},u.stepForward=function(){this.checkMuted(),this.player_.volume(this.player_.volume()+.1)},u.stepBack=function(){this.checkMuted(),this.player_.volume(this.player_.volume()-.1)},u.updateARIAAttributes=function(t){var s=this.player_.muted()?0:this.volumeAsPercentage_();this.el_.setAttribute("aria-valuenow",s),this.el_.setAttribute("aria-valuetext",s+"%")},u.volumeAsPercentage_=function(){return Math.round(100*this.player_.volume())},u.updateLastVolume_=function(){var t=this,s=this.player_.volume();this.one("sliderinactive",function(){0===t.player_.volume()&&t.player_.lastVolume_(s)})},i}(Vc);Gl.prototype.options_={children:["volumeLevel"],barName:"volumeLevel"},!Rn&&!za&&Gl.prototype.options_.children.splice(0,0,"mouseVolumeLevelDisplay"),Gl.prototype.playerEvent="volumechange",dn.registerComponent("VolumeBar",Gl);var dh=function(g){function i(l,t){var s;return void 0===t&&(t={}),t.vertical=t.vertical||!1,(typeof t.volumeBar>"u"||Pu(t.volumeBar))&&(t.volumeBar=t.volumeBar||{},t.volumeBar.vertical=t.vertical),s=g.call(this,l,t)||this,dp(dt(s),l),s.throttledHandleMouseMove=ka(Ds(dt(s),s.handleMouseMove),Eo),s.handleMouseUpHandler_=function(h){return s.handleMouseUp(h)},s.on("mousedown",function(h){return s.handleMouseDown(h)}),s.on("touchstart",function(h){return s.handleMouseDown(h)}),s.on("mousemove",function(h){return s.handleMouseMove(h)}),s.on(s.volumeBar,["focus","slideractive"],function(){s.volumeBar.addClass("vjs-slider-active"),s.addClass("vjs-slider-active"),s.trigger("slideractive")}),s.on(s.volumeBar,["blur","sliderinactive"],function(){s.volumeBar.removeClass("vjs-slider-active"),s.removeClass("vjs-slider-active"),s.trigger("sliderinactive")}),s}Me(i,g);var u=i.prototype;return u.createEl=function(){var t="vjs-volume-horizontal";return this.options_.vertical&&(t="vjs-volume-vertical"),g.prototype.createEl.call(this,"div",{className:"vjs-volume-control vjs-control "+t})},u.handleMouseDown=function(t){var s=this.el_.ownerDocument;this.on(s,"mousemove",this.throttledHandleMouseMove),this.on(s,"touchmove",this.throttledHandleMouseMove),this.on(s,"mouseup",this.handleMouseUpHandler_),this.on(s,"touchend",this.handleMouseUpHandler_)},u.handleMouseUp=function(t){var s=this.el_.ownerDocument;this.off(s,"mousemove",this.throttledHandleMouseMove),this.off(s,"touchmove",this.throttledHandleMouseMove),this.off(s,"mouseup",this.handleMouseUpHandler_),this.off(s,"touchend",this.handleMouseUpHandler_)},u.handleMouseMove=function(t){this.volumeBar.handleMouseMove(t)},i}(dn);dh.prototype.options_={children:["volumeBar"]},dn.registerComponent("VolumeControl",dh);var fl=function(i,u){u.tech_&&!u.tech_.featuresMuteControl&&i.addClass("vjs-hidden"),i.on(u,"loadstart",function(){u.tech_.featuresMuteControl?i.removeClass("vjs-hidden"):i.addClass("vjs-hidden")})},Hc=function(g){function i(l,t){var s;return s=g.call(this,l,t)||this,fl(dt(s),l),s.on(l,["loadstart","volumechange"],function(h){return s.update(h)}),s}Me(i,g);var u=i.prototype;return u.buildCSSClass=function(){return"vjs-mute-control "+g.prototype.buildCSSClass.call(this)},u.handleClick=function(t){var s=this.player_.volume(),h=this.player_.lastVolume_();0===s?(this.player_.volume(h<.1?.1:h),this.player_.muted(!1)):this.player_.muted(!this.player_.muted())},u.update=function(t){this.updateIcon_(),this.updateControlText_()},u.updateIcon_=function(){var t=this.player_.volume(),s=3;Rn&&this.player_.tech_&&this.player_.tech_.el_&&this.player_.muted(this.player_.tech_.el_.muted),0===t||this.player_.muted()?s=0:t<.33?s=1:t<.67&&(s=2);for(var h=0;h<4;h++)Ma(this.el_,"vjs-vol-"+h);Oi(this.el_,"vjs-vol-"+s)},u.updateControlText_=function(){var s=this.player_.muted()||0===this.player_.volume()?"Unmute":"Mute";this.controlText()!==s&&this.controlText(s)},i}(Su);Hc.prototype.controlText_="Mute",dn.registerComponent("MuteToggle",Hc);var eu=function(g){function i(l,t){var s;return void 0===t&&(t={}),t.inline=!(typeof t.inline<"u")||t.inline,(typeof t.volumeControl>"u"||Pu(t.volumeControl))&&(t.volumeControl=t.volumeControl||{},t.volumeControl.vertical=!t.inline),(s=g.call(this,l,t)||this).handleKeyPressHandler_=function(h){return s.handleKeyPress(h)},s.on(l,["loadstart"],function(h){return s.volumePanelState_(h)}),s.on(s.muteToggle,"keyup",function(h){return s.handleKeyPress(h)}),s.on(s.volumeControl,"keyup",function(h){return s.handleVolumeControlKeyUp(h)}),s.on("keydown",function(h){return s.handleKeyPress(h)}),s.on("mouseover",function(h){return s.handleMouseOver(h)}),s.on("mouseout",function(h){return s.handleMouseOut(h)}),s.on(s.volumeControl,["slideractive"],s.sliderActive_),s.on(s.volumeControl,["sliderinactive"],s.sliderInactive_),s}Me(i,g);var u=i.prototype;return u.sliderActive_=function(){this.addClass("vjs-slider-active")},u.sliderInactive_=function(){this.removeClass("vjs-slider-active")},u.volumePanelState_=function(){this.volumeControl.hasClass("vjs-hidden")&&this.muteToggle.hasClass("vjs-hidden")&&this.addClass("vjs-hidden"),this.volumeControl.hasClass("vjs-hidden")&&!this.muteToggle.hasClass("vjs-hidden")&&this.addClass("vjs-mute-toggle-only")},u.createEl=function(){var t="vjs-volume-panel-horizontal";return this.options_.inline||(t="vjs-volume-panel-vertical"),g.prototype.createEl.call(this,"div",{className:"vjs-volume-panel vjs-control "+t})},u.dispose=function(){this.handleMouseOut(),g.prototype.dispose.call(this)},u.handleVolumeControlKeyUp=function(t){We().isEventKey(t,"Esc")&&this.muteToggle.focus()},u.handleMouseOver=function(t){this.addClass("vjs-hover"),fi(et(),"keyup",this.handleKeyPressHandler_)},u.handleMouseOut=function(t){this.removeClass("vjs-hover"),Gs(et(),"keyup",this.handleKeyPressHandler_)},u.handleKeyPress=function(t){We().isEventKey(t,"Esc")&&this.handleMouseOut()},i}(dn);eu.prototype.options_={children:["muteToggle","volumeControl"]},dn.registerComponent("VolumePanel",eu);var La=function(g){function i(l,t){var s;return s=g.call(this,l,t)||this,t&&(s.menuButton_=t.menuButton),s.focusedChild_=-1,s.on("keydown",function(h){return s.handleKeyDown(h)}),s.boundHandleBlur_=function(h){return s.handleBlur(h)},s.boundHandleTapClick_=function(h){return s.handleTapClick(h)},s}Me(i,g);var u=i.prototype;return u.addEventListenerForItem=function(t){t instanceof dn&&(this.on(t,"blur",this.boundHandleBlur_),this.on(t,["tap","click"],this.boundHandleTapClick_))},u.removeEventListenerForItem=function(t){t instanceof dn&&(this.off(t,"blur",this.boundHandleBlur_),this.off(t,["tap","click"],this.boundHandleTapClick_))},u.removeChild=function(t){"string"==typeof t&&(t=this.getChild(t)),this.removeEventListenerForItem(t),g.prototype.removeChild.call(this,t)},u.addItem=function(t){var s=this.addChild(t);s&&this.addEventListenerForItem(s)},u.createEl=function(){this.contentEl_=Kr(this.options_.contentElType||"ul",{className:"vjs-menu-content"}),this.contentEl_.setAttribute("role","menu");var s=g.prototype.createEl.call(this,"div",{append:this.contentEl_,className:"vjs-menu"});return s.appendChild(this.contentEl_),fi(s,"click",function(h){h.preventDefault(),h.stopImmediatePropagation()}),s},u.dispose=function(){this.contentEl_=null,this.boundHandleBlur_=null,this.boundHandleTapClick_=null,g.prototype.dispose.call(this)},u.handleBlur=function(t){var s=t.relatedTarget||et().activeElement;if(!this.children().some(function(v){return v.el()===s})){var h=this.menuButton_;h&&h.buttonPressed_&&s!==h.el().firstChild&&h.unpressButton()}},u.handleTapClick=function(t){if(this.menuButton_){this.menuButton_.unpressButton();var s=this.children();if(!Array.isArray(s))return;var h=s.filter(function(v){return v.el()===t.target})[0];if(!h)return;"CaptionSettingsMenuItem"!==h.name()&&this.menuButton_.focus()}},u.handleKeyDown=function(t){We().isEventKey(t,"Left")||We().isEventKey(t,"Down")?(t.preventDefault(),t.stopPropagation(),this.stepForward()):(We().isEventKey(t,"Right")||We().isEventKey(t,"Up"))&&(t.preventDefault(),t.stopPropagation(),this.stepBack())},u.stepForward=function(){var t=0;void 0!==this.focusedChild_&&(t=this.focusedChild_+1),this.focus(t)},u.stepBack=function(){var t=0;void 0!==this.focusedChild_&&(t=this.focusedChild_-1),this.focus(t)},u.focus=function(t){void 0===t&&(t=0);var s=this.children().slice();s.length&&s[0].hasClass("vjs-menu-title")&&s.shift(),s.length>0&&(t<0?t=0:t>=s.length&&(t=s.length-1),this.focusedChild_=t,s[t].el_.focus())},i}(dn);dn.registerComponent("Menu",La);var Fu=function(g){function i(l,t){var s;void 0===t&&(t={}),(s=g.call(this,l,t)||this).menuButton_=new Su(l,t),s.menuButton_.controlText(s.controlText_),s.menuButton_.el_.setAttribute("aria-haspopup","true");var h=Su.prototype.buildCSSClass();s.menuButton_.el_.className=s.buildCSSClass()+" "+h,s.menuButton_.removeClass("vjs-control"),s.addChild(s.menuButton_),s.update(),s.enabled_=!0;var v=function(D){return s.handleClick(D)};return s.handleMenuKeyUp_=function(S){return s.handleMenuKeyUp(S)},s.on(s.menuButton_,"tap",v),s.on(s.menuButton_,"click",v),s.on(s.menuButton_,"keydown",function(S){return s.handleKeyDown(S)}),s.on(s.menuButton_,"mouseenter",function(){s.addClass("vjs-hover"),s.menu.show(),fi(et(),"keyup",s.handleMenuKeyUp_)}),s.on("mouseleave",function(S){return s.handleMouseLeave(S)}),s.on("keydown",function(S){return s.handleSubmenuKeyDown(S)}),s}Me(i,g);var u=i.prototype;return u.update=function(){var t=this.createMenu();this.menu&&(this.menu.dispose(),this.removeChild(this.menu)),this.menu=t,this.addChild(t),this.buttonPressed_=!1,this.menuButton_.el_.setAttribute("aria-expanded","false"),this.items&&this.items.length<=this.hideThreshold_?(this.hide(),this.menu.contentEl_.removeAttribute("role")):(this.show(),this.menu.contentEl_.setAttribute("role","menu"))},u.createMenu=function(){var t=new La(this.player_,{menuButton:this});if(this.hideThreshold_=0,this.options_.title){var s=Kr("li",{className:"vjs-menu-title",textContent:ve(this.options_.title),tabIndex:-1}),h=new dn(this.player_,{el:s});t.addItem(h)}if(this.items=this.createItems(),this.items)for(var v=0;v<this.items.length;v++)t.addItem(this.items[v]);return t},u.createItems=function(){},u.createEl=function(){return g.prototype.createEl.call(this,"div",{className:this.buildWrapperCSSClass()},{})},u.buildWrapperCSSClass=function(){var t="vjs-menu-button";return"vjs-menu-button "+(t+=!0===this.options_.inline?"-inline":"-popup")+" "+Su.prototype.buildCSSClass()+" "+g.prototype.buildCSSClass.call(this)},u.buildCSSClass=function(){var t="vjs-menu-button";return"vjs-menu-button "+(t+=!0===this.options_.inline?"-inline":"-popup")+" "+g.prototype.buildCSSClass.call(this)},u.controlText=function(t,s){return void 0===s&&(s=this.menuButton_.el()),this.menuButton_.controlText(t,s)},u.dispose=function(){this.handleMouseLeave(),g.prototype.dispose.call(this)},u.handleClick=function(t){this.buttonPressed_?this.unpressButton():this.pressButton()},u.handleMouseLeave=function(t){this.removeClass("vjs-hover"),Gs(et(),"keyup",this.handleMenuKeyUp_)},u.focus=function(){this.menuButton_.focus()},u.blur=function(){this.menuButton_.blur()},u.handleKeyDown=function(t){We().isEventKey(t,"Esc")||We().isEventKey(t,"Tab")?(this.buttonPressed_&&this.unpressButton(),We().isEventKey(t,"Tab")||(t.preventDefault(),this.menuButton_.focus())):(We().isEventKey(t,"Up")||We().isEventKey(t,"Down"))&&(this.buttonPressed_||(t.preventDefault(),this.pressButton()))},u.handleMenuKeyUp=function(t){(We().isEventKey(t,"Esc")||We().isEventKey(t,"Tab"))&&this.removeClass("vjs-hover")},u.handleSubmenuKeyPress=function(t){this.handleSubmenuKeyDown(t)},u.handleSubmenuKeyDown=function(t){(We().isEventKey(t,"Esc")||We().isEventKey(t,"Tab"))&&(this.buttonPressed_&&this.unpressButton(),We().isEventKey(t,"Tab")||(t.preventDefault(),this.menuButton_.focus()))},u.pressButton=function(){if(this.enabled_){if(this.buttonPressed_=!0,this.menu.show(),this.menu.lockShowing(),this.menuButton_.el_.setAttribute("aria-expanded","true"),Rn&&Fn())return;this.menu.focus()}},u.unpressButton=function(){this.enabled_&&(this.buttonPressed_=!1,this.menu.unlockShowing(),this.menu.hide(),this.menuButton_.el_.setAttribute("aria-expanded","false"))},u.disable=function(){this.unpressButton(),this.enabled_=!1,this.addClass("vjs-disabled"),this.menuButton_.disable()},u.enable=function(){this.enabled_=!0,this.removeClass("vjs-disabled"),this.menuButton_.enable()},i}(dn);dn.registerComponent("MenuButton",Fu);var Gc=function(g){function i(u,l){var t,s=l.tracks;if((t=g.call(this,u,l)||this).items.length<=1&&t.hide(),!s)return dt(t);var h=Ds(dt(t),t.update);return s.addEventListener("removetrack",h),s.addEventListener("addtrack",h),s.addEventListener("labelchange",h),t.player_.on("ready",h),t.player_.on("dispose",function(){s.removeEventListener("removetrack",h),s.removeEventListener("addtrack",h),s.removeEventListener("labelchange",h)}),t}return Me(i,g),i}(Fu);dn.registerComponent("TrackButton",Gc);var wu=["Tab","Esc","Up","Down","Right","Left"],pc=function(g){function i(l,t){var s;return(s=g.call(this,l,t)||this).selectable=t.selectable,s.isSelected_=t.selected||!1,s.multiSelectable=t.multiSelectable,s.selected(s.isSelected_),s.el_.setAttribute("role",s.selectable?s.multiSelectable?"menuitemcheckbox":"menuitemradio":"menuitem"),s}Me(i,g);var u=i.prototype;return u.createEl=function(t,s,h){this.nonIconControl=!0;var v=g.prototype.createEl.call(this,"li",Ls({className:"vjs-menu-item",tabIndex:-1},s),h);return v.replaceChild(Kr("span",{className:"vjs-menu-item-text",textContent:this.localize(this.options_.label)}),v.querySelector(".vjs-icon-placeholder")),v},u.handleKeyDown=function(t){wu.some(function(s){return We().isEventKey(t,s)})||g.prototype.handleKeyDown.call(this,t)},u.handleClick=function(t){this.selected(!0)},u.selected=function(t){this.selectable&&(t?(this.addClass("vjs-selected"),this.el_.setAttribute("aria-checked","true"),this.controlText(", selected"),this.isSelected_=!0):(this.removeClass("vjs-selected"),this.el_.setAttribute("aria-checked","false"),this.controlText(""),this.isSelected_=!1))},i}(ah);dn.registerComponent("MenuItem",pc);var Ju=function(g){function i(l,t){var s,h=t.track,v=l.textTracks();t.label=h.label||h.language||"Unknown",t.selected="showing"===h.mode,(s=g.call(this,l,t)||this).track=h,s.kinds=(t.kinds||[t.kind||s.track.kind]).filter(Boolean);var F,S=function(){for(var Y=arguments.length,me=new Array(Y),Le=0;Le<Y;Le++)me[Le]=arguments[Le];s.handleTracksChange.apply(dt(s),me)},D=function(){for(var Y=arguments.length,me=new Array(Y),Le=0;Le<Y;Le++)me[Le]=arguments[Le];s.handleSelectedLanguageChange.apply(dt(s),me)};return l.on(["loadstart","texttrackchange"],S),v.addEventListener("change",S),v.addEventListener("selectedlanguagechange",D),s.on("dispose",function(){l.off(["loadstart","texttrackchange"],S),v.removeEventListener("change",S),v.removeEventListener("selectedlanguagechange",D)}),void 0===v.onchange&&s.on(["tap","click"],function(){if("object"!=typeof ae().Event)try{F=new(ae().Event)("change")}catch{}F||(F=et().createEvent("Event")).initEvent("change",!0,!0),v.dispatchEvent(F)}),s.handleTracksChange(),s}Me(i,g);var u=i.prototype;return u.handleClick=function(t){var s=this.track,h=this.player_.textTracks();if(g.prototype.handleClick.call(this,t),h)for(var v=0;v<h.length;v++){var S=h[v];-1!==this.kinds.indexOf(S.kind)&&(S===s?"showing"!==S.mode&&(S.mode="showing"):"disabled"!==S.mode&&(S.mode="disabled"))}},u.handleTracksChange=function(t){var s="showing"===this.track.mode;s!==this.isSelected_&&this.selected(s)},u.handleSelectedLanguageChange=function(t){if("showing"===this.track.mode){var s=this.player_.cache_.selectedLanguage;if(s&&s.enabled&&s.language===this.track.language&&s.kind!==this.track.kind)return;this.player_.cache_.selectedLanguage={enabled:!0,language:this.track.language,kind:this.track.kind}}},u.dispose=function(){this.track=null,g.prototype.dispose.call(this)},i}(pc);dn.registerComponent("TextTrackMenuItem",Ju);var bg=function(g){function i(l,t){return t.track={player:l,kind:t.kind,kinds:t.kinds,default:!1,mode:"disabled"},t.kinds||(t.kinds=[t.kind]),t.track.label=t.label?t.label:t.kinds.join(" and ")+" off",t.selectable=!0,t.multiSelectable=!1,g.call(this,l,t)||this}Me(i,g);var u=i.prototype;return u.handleTracksChange=function(t){for(var s=this.player().textTracks(),h=!0,v=0,S=s.length;v<S;v++){var D=s[v];if(this.options_.kinds.indexOf(D.kind)>-1&&"showing"===D.mode){h=!1;break}}h!==this.isSelected_&&this.selected(h)},u.handleSelectedLanguageChange=function(t){for(var s=this.player().textTracks(),h=!0,v=0,S=s.length;v<S;v++){var D=s[v];if(["captions","descriptions","subtitles"].indexOf(D.kind)>-1&&"showing"===D.mode){h=!1;break}}h&&(this.player_.cache_.selectedLanguage={enabled:!1})},i}(Ju);dn.registerComponent("OffTextTrackMenuItem",bg);var $c=function(g){function i(l,t){return void 0===t&&(t={}),t.tracks=l.textTracks(),g.call(this,l,t)||this}return Me(i,g),i.prototype.createItems=function(t,s){var h;void 0===t&&(t=[]),void 0===s&&(s=Ju),this.label_&&(h=this.label_+" off"),t.push(new bg(this.player_,{kinds:this.kinds_,kind:this.kind_,label:h})),this.hideThreshold_+=1;var v=this.player_.textTracks();Array.isArray(this.kinds_)||(this.kinds_=[this.kind_]);for(var S=0;S<v.length;S++){var D=v[S];if(this.kinds_.indexOf(D.kind)>-1){var F=new s(this.player_,{track:D,kinds:this.kinds_,kind:this.kind_,selectable:!0,multiSelectable:!1});F.addClass("vjs-"+D.kind+"-menu-item"),t.push(F)}}return t},i}(Gc);dn.registerComponent("TextTrackButton",$c);var pi=function(g){function i(l,t){var s,h=t.track,v=t.cue,S=l.currentTime();return t.selectable=!0,t.multiSelectable=!1,t.label=v.text,t.selected=v.startTime<=S&&S<v.endTime,(s=g.call(this,l,t)||this).track=h,s.cue=v,s}return Me(i,g),i.prototype.handleClick=function(t){g.prototype.handleClick.call(this),this.player_.currentTime(this.cue.startTime)},i}(pc);dn.registerComponent("ChaptersTrackMenuItem",pi);var pl=function(g){function i(l,t,s){var h;return(h=g.call(this,l,t,s)||this).selectCurrentItem_=function(){h.items.forEach(function(v){v.selected(h.track_.activeCues[0]===v.cue)})},h}Me(i,g);var u=i.prototype;return u.buildCSSClass=function(){return"vjs-chapters-button "+g.prototype.buildCSSClass.call(this)},u.buildWrapperCSSClass=function(){return"vjs-chapters-button "+g.prototype.buildWrapperCSSClass.call(this)},u.update=function(t){if(!t||!t.track||"chapters"===t.track.kind){var s=this.findChaptersTrack();s!==this.track_?(this.setTrack(s),g.prototype.update.call(this)):(!this.items||s&&s.cues&&s.cues.length!==this.items.length)&&g.prototype.update.call(this)}},u.setTrack=function(t){if(this.track_!==t){if(this.updateHandler_||(this.updateHandler_=this.update.bind(this)),this.track_){var s=this.player_.remoteTextTrackEls().getTrackElementByTrack_(this.track_);s&&s.removeEventListener("load",this.updateHandler_),this.track_.removeEventListener("cuechange",this.selectCurrentItem_),this.track_=null}if(this.track_=t,this.track_){this.track_.mode="hidden";var h=this.player_.remoteTextTrackEls().getTrackElementByTrack_(this.track_);h&&h.addEventListener("load",this.updateHandler_),this.track_.addEventListener("cuechange",this.selectCurrentItem_)}}},u.findChaptersTrack=function(){for(var t=this.player_.textTracks()||[],s=t.length-1;s>=0;s--){var h=t[s];if(h.kind===this.kind_)return h}},u.getMenuCaption=function(){return this.track_&&this.track_.label?this.track_.label:this.localize(ve(this.kind_))},u.createMenu=function(){return this.options_.title=this.getMenuCaption(),g.prototype.createMenu.call(this)},u.createItems=function(){var t=[];if(!this.track_)return t;var s=this.track_.cues;if(!s)return t;for(var h=0,v=s.length;h<v;h++){var D=new pi(this.player_,{track:this.track_,cue:s[h]});t.push(D)}return t},i}($c);pl.prototype.kind_="chapters",pl.prototype.controlText_="Chapters",dn.registerComponent("ChaptersButton",pl);var gc=function(g){function i(l,t,s){var h;h=g.call(this,l,t,s)||this;var v=l.textTracks(),S=Ds(dt(h),h.handleTracksChange);return v.addEventListener("change",S),h.on("dispose",function(){v.removeEventListener("change",S)}),h}Me(i,g);var u=i.prototype;return u.handleTracksChange=function(t){for(var s=this.player().textTracks(),h=!1,v=0,S=s.length;v<S;v++){var D=s[v];if(D.kind!==this.kind_&&"showing"===D.mode){h=!0;break}}h?this.disable():this.enable()},u.buildCSSClass=function(){return"vjs-descriptions-button "+g.prototype.buildCSSClass.call(this)},u.buildWrapperCSSClass=function(){return"vjs-descriptions-button "+g.prototype.buildWrapperCSSClass.call(this)},i}($c);gc.prototype.kind_="descriptions",gc.prototype.controlText_="Descriptions",dn.registerComponent("DescriptionsButton",gc);var Nl=function(g){function i(l,t,s){return g.call(this,l,t,s)||this}Me(i,g);var u=i.prototype;return u.buildCSSClass=function(){return"vjs-subtitles-button "+g.prototype.buildCSSClass.call(this)},u.buildWrapperCSSClass=function(){return"vjs-subtitles-button "+g.prototype.buildWrapperCSSClass.call(this)},i}($c);Nl.prototype.kind_="subtitles",Nl.prototype.controlText_="Subtitles",dn.registerComponent("SubtitlesButton",Nl);var $l=function(g){function i(l,t){var s;return t.track={player:l,kind:t.kind,label:t.kind+" settings",selectable:!1,default:!1,mode:"disabled"},t.selectable=!1,t.name="CaptionSettingsMenuItem",(s=g.call(this,l,t)||this).addClass("vjs-texttrack-settings"),s.controlText(", opens "+t.kind+" settings dialog"),s}return Me(i,g),i.prototype.handleClick=function(t){this.player().getChild("textTrackSettings").open()},i}(Ju);dn.registerComponent("CaptionSettingsMenuItem",$l);var gl=function(g){function i(l,t,s){return g.call(this,l,t,s)||this}Me(i,g);var u=i.prototype;return u.buildCSSClass=function(){return"vjs-captions-button "+g.prototype.buildCSSClass.call(this)},u.buildWrapperCSSClass=function(){return"vjs-captions-button "+g.prototype.buildWrapperCSSClass.call(this)},u.createItems=function(){var t=[];return!(this.player().tech_&&this.player().tech_.featuresNativeTextTracks)&&this.player().getChild("textTrackSettings")&&(t.push(new $l(this.player_,{kind:this.kind_})),this.hideThreshold_+=1),g.prototype.createItems.call(this,t)},i}($c);gl.prototype.kind_="captions",gl.prototype.controlText_="Captions",dn.registerComponent("CaptionsButton",gl);var Tf=function(g){function i(){return g.apply(this,arguments)||this}return Me(i,g),i.prototype.createEl=function(t,s,h){var v=g.prototype.createEl.call(this,t,s,h),S=v.querySelector(".vjs-menu-item-text");return"captions"===this.options_.track.kind&&(S.appendChild(Kr("span",{className:"vjs-icon-placeholder"},{"aria-hidden":!0})),S.appendChild(Kr("span",{className:"vjs-control-text",textContent:" "+this.localize("Captions")}))),v},i}(Ju);dn.registerComponent("SubsCapsMenuItem",Tf);var Fa=function(g){function i(l,t){var s;return void 0===t&&(t={}),(s=g.call(this,l,t)||this).label_="subtitles",["en","en-us","en-ca","fr-ca"].indexOf(s.player_.language_)>-1&&(s.label_="captions"),s.menuButton_.controlText(ve(s.label_)),s}Me(i,g);var u=i.prototype;return u.buildCSSClass=function(){return"vjs-subs-caps-button "+g.prototype.buildCSSClass.call(this)},u.buildWrapperCSSClass=function(){return"vjs-subs-caps-button "+g.prototype.buildWrapperCSSClass.call(this)},u.createItems=function(){var t=[];return!(this.player().tech_&&this.player().tech_.featuresNativeTextTracks)&&this.player().getChild("textTrackSettings")&&(t.push(new $l(this.player_,{kind:this.label_})),this.hideThreshold_+=1),g.prototype.createItems.call(this,t,Tf)},i}($c);Fa.prototype.kinds_=["captions","subtitles"],Fa.prototype.controlText_="Subtitles",dn.registerComponent("SubsCapsButton",Fa);var bf=function(g){function i(l,t){var s,h=t.track,v=l.audioTracks();t.label=h.label||h.language||"Unknown",t.selected=h.enabled,(s=g.call(this,l,t)||this).track=h,s.addClass("vjs-"+h.kind+"-menu-item");var S=function(){for(var F=arguments.length,ee=new Array(F),Y=0;Y<F;Y++)ee[Y]=arguments[Y];s.handleTracksChange.apply(dt(s),ee)};return v.addEventListener("change",S),s.on("dispose",function(){v.removeEventListener("change",S)}),s}Me(i,g);var u=i.prototype;return u.createEl=function(t,s,h){var v=g.prototype.createEl.call(this,t,s,h),S=v.querySelector(".vjs-menu-item-text");return"main-desc"===this.options_.track.kind&&(S.appendChild(Kr("span",{className:"vjs-icon-placeholder"},{"aria-hidden":!0})),S.appendChild(Kr("span",{className:"vjs-control-text",textContent:" "+this.localize("Descriptions")}))),v},u.handleClick=function(t){if(g.prototype.handleClick.call(this,t),this.track.enabled=!0,this.player_.tech_.featuresNativeAudioTracks)for(var s=this.player_.audioTracks(),h=0;h<s.length;h++){var v=s[h];v!==this.track&&(v.enabled=v===this.track)}},u.handleTracksChange=function(t){this.selected(this.track.enabled)},i}(pc);dn.registerComponent("AudioTrackMenuItem",bf);var Ef=function(g){function i(l,t){return void 0===t&&(t={}),t.tracks=l.audioTracks(),g.call(this,l,t)||this}Me(i,g);var u=i.prototype;return u.buildCSSClass=function(){return"vjs-audio-button "+g.prototype.buildCSSClass.call(this)},u.buildWrapperCSSClass=function(){return"vjs-audio-button "+g.prototype.buildWrapperCSSClass.call(this)},u.createItems=function(t){void 0===t&&(t=[]),this.hideThreshold_=1;for(var s=this.player_.audioTracks(),h=0;h<s.length;h++)t.push(new bf(this.player_,{track:s[h],selectable:!0,multiSelectable:!1}));return t},i}(Gc);Ef.prototype.controlText_="Audio Track",dn.registerComponent("AudioTrackButton",Ef);var bd=function(g){function i(l,t){var s,h=t.rate,v=parseFloat(h,10);return t.label=h,t.selected=v===l.playbackRate(),t.selectable=!0,t.multiSelectable=!1,(s=g.call(this,l,t)||this).label=h,s.rate=v,s.on(l,"ratechange",function(S){return s.update(S)}),s}Me(i,g);var u=i.prototype;return u.handleClick=function(t){g.prototype.handleClick.call(this),this.player().playbackRate(this.rate)},u.update=function(t){this.selected(this.player().playbackRate()===this.rate)},i}(pc);bd.prototype.contentElType="button",dn.registerComponent("PlaybackRateMenuItem",bd);var ml=function(g){function i(l,t){var s;return(s=g.call(this,l,t)||this).menuButton_.el_.setAttribute("aria-describedby",s.labelElId_),s.updateVisibility(),s.updateLabel(),s.on(l,"loadstart",function(h){return s.updateVisibility(h)}),s.on(l,"ratechange",function(h){return s.updateLabel(h)}),s.on(l,"playbackrateschange",function(h){return s.handlePlaybackRateschange(h)}),s}Me(i,g);var u=i.prototype;return u.createEl=function(){var t=g.prototype.createEl.call(this);return this.labelElId_="vjs-playback-rate-value-label-"+this.id_,this.labelEl_=Kr("div",{className:"vjs-playback-rate-value",id:this.labelElId_,textContent:"1x"}),t.appendChild(this.labelEl_),t},u.dispose=function(){this.labelEl_=null,g.prototype.dispose.call(this)},u.buildCSSClass=function(){return"vjs-playback-rate "+g.prototype.buildCSSClass.call(this)},u.buildWrapperCSSClass=function(){return"vjs-playback-rate "+g.prototype.buildWrapperCSSClass.call(this)},u.createItems=function(){for(var t=this.playbackRates(),s=[],h=t.length-1;h>=0;h--)s.push(new bd(this.player(),{rate:t[h]+"x"}));return s},u.updateARIAAttributes=function(){this.el().setAttribute("aria-valuenow",this.player().playbackRate())},u.handleClick=function(t){var s=this.player().playbackRate(),h=this.playbackRates(),S=(h.indexOf(s)+1)%h.length;this.player().playbackRate(h[S])},u.handlePlaybackRateschange=function(t){this.update()},u.playbackRates=function(){var t=this.player();return t.playbackRates&&t.playbackRates()||[]},u.playbackRateSupported=function(){return this.player().tech_&&this.player().tech_.featuresPlaybackRate&&this.playbackRates()&&this.playbackRates().length>0},u.updateVisibility=function(t){this.playbackRateSupported()?this.removeClass("vjs-hidden"):this.addClass("vjs-hidden")},u.updateLabel=function(t){this.playbackRateSupported()&&(this.labelEl_.textContent=this.player().playbackRate()+"x")},i}(Fu);ml.prototype.controlText_="Playback Rate",dn.registerComponent("PlaybackRateMenuButton",ml);var zc=function(g){function i(){return g.apply(this,arguments)||this}Me(i,g);var u=i.prototype;return u.buildCSSClass=function(){return"vjs-spacer "+g.prototype.buildCSSClass.call(this)},u.createEl=function(t,s,h){return void 0===t&&(t="div"),void 0===s&&(s={}),void 0===h&&(h={}),s.className||(s.className=this.buildCSSClass()),g.prototype.createEl.call(this,t,s,h)},i}(dn);dn.registerComponent("Spacer",zc);var hh=function(g){function i(){return g.apply(this,arguments)||this}Me(i,g);var u=i.prototype;return u.buildCSSClass=function(){return"vjs-custom-control-spacer "+g.prototype.buildCSSClass.call(this)},u.createEl=function(){return g.prototype.createEl.call(this,"div",{className:this.buildCSSClass(),textContent:"\xa0"})},i}(zc);dn.registerComponent("CustomControlSpacer",hh);var Wc=function(g){function i(){return g.apply(this,arguments)||this}return Me(i,g),i.prototype.createEl=function(){return g.prototype.createEl.call(this,"div",{className:"vjs-control-bar",dir:"ltr"})},i}(dn);Wc.prototype.options_={children:["playToggle","volumePanel","currentTimeDisplay","timeDivider","durationDisplay","progressControl","liveDisplay","seekToLive","remainingTimeDisplay","customControlSpacer","playbackRateMenuButton","chaptersButton","descriptionsButton","subsCapsButton","audioTrackButton","fullscreenToggle"]},"exitPictureInPicture"in et()&&Wc.prototype.options_.children.splice(Wc.prototype.options_.children.length-1,0,"pictureInPictureToggle"),dn.registerComponent("ControlBar",Wc);var hp=function(g){function i(l,t){var s;return(s=g.call(this,l,t)||this).on(l,"error",function(h){return s.open(h)}),s}Me(i,g);var u=i.prototype;return u.buildCSSClass=function(){return"vjs-error-display "+g.prototype.buildCSSClass.call(this)},u.content=function(){var t=this.player().error();return t?this.localize(t.message):""},i}(hr);hp.prototype.options_=at({},hr.prototype.options_,{pauseOnOpen:!1,fillAlways:!0,temporary:!1,uncloseable:!0}),dn.registerComponent("ErrorDisplay",hp);var vl="vjs-text-track-settings",Sf=["#000","Black"],mc=["#00F","Blue"],Ro=["#0FF","Cyan"],wf=["#0F0","Green"],I=["#F0F","Magenta"],y=["#F00","Red"],T=["#FFF","White"],k=["#FF0","Yellow"],se=["1","Opaque"],Ce=["0.5","Semi-Transparent"],Tt=["0","Transparent"],Zt={backgroundColor:{selector:".vjs-bg-color > select",id:"captions-background-color-%s",label:"Color",options:[Sf,T,y,wf,mc,k,I,Ro]},backgroundOpacity:{selector:".vjs-bg-opacity > select",id:"captions-background-opacity-%s",label:"Transparency",options:[se,Ce,Tt]},color:{selector:".vjs-fg-color > select",id:"captions-foreground-color-%s",label:"Color",options:[T,Sf,y,wf,mc,k,I,Ro]},edgeStyle:{selector:".vjs-edge-style > select",id:"%s",label:"Text Edge Style",options:[["none","None"],["raised","Raised"],["depressed","Depressed"],["uniform","Uniform"],["dropshadow","Dropshadow"]]},fontFamily:{selector:".vjs-font-family > select",id:"captions-font-family-%s",label:"Font Family",options:[["proportionalSansSerif","Proportional Sans-Serif"],["monospaceSansSerif","Monospace Sans-Serif"],["proportionalSerif","Proportional Serif"],["monospaceSerif","Monospace Serif"],["casual","Casual"],["script","Script"],["small-caps","Small Caps"]]},fontPercent:{selector:".vjs-font-percent > select",id:"captions-font-size-%s",label:"Font Size",options:[["0.50","50%"],["0.75","75%"],["1.00","100%"],["1.25","125%"],["1.50","150%"],["1.75","175%"],["2.00","200%"],["3.00","300%"],["4.00","400%"]],default:2,parser:function(i){return"1.00"===i?null:Number(i)}},textOpacity:{selector:".vjs-text-opacity > select",id:"captions-foreground-opacity-%s",label:"Transparency",options:[se,Ce]},windowColor:{selector:".vjs-window-color > select",id:"captions-window-color-%s",label:"Color"},windowOpacity:{selector:".vjs-window-opacity > select",id:"captions-window-opacity-%s",label:"Transparency",options:[Tt,Ce,se]}};function Ln(g,i){if(i&&(g=i(g)),g&&"none"!==g)return g}Zt.windowColor.options=Zt.backgroundColor.options;var Er=function(g){function i(l,t){var s;return t.temporary=!1,(s=g.call(this,l,t)||this).updateDisplay=s.updateDisplay.bind(dt(s)),s.fill(),s.hasBeenOpened_=s.hasBeenFilled_=!0,s.endDialog=Kr("p",{className:"vjs-control-text",textContent:s.localize("End of dialog window.")}),s.el().appendChild(s.endDialog),s.setDefaults(),void 0===t.persistTextTrackSettings&&(s.options_.persistTextTrackSettings=s.options_.playerOptions.persistTextTrackSettings),s.on(s.$(".vjs-done-button"),"click",function(){s.saveSettings(),s.close()}),s.on(s.$(".vjs-default-button"),"click",function(){s.setDefaults(),s.updateDisplay()}),uu(Zt,function(h){s.on(s.$(h.selector),"change",s.updateDisplay)}),s.options_.persistTextTrackSettings&&s.restoreSettings(),s}Me(i,g);var u=i.prototype;return u.dispose=function(){this.endDialog=null,g.prototype.dispose.call(this)},u.createElSelect_=function(t,s,h){var v=this;void 0===s&&(s=""),void 0===h&&(h="label");var S=Zt[t],D=S.id.replace("%s",this.id_),F=[s,D].join(" ").trim();return["<"+h+' id="'+D+'" class="'+("label"===h?"vjs-label":"")+'">',this.localize(S.label),"</"+h+">",'<select aria-labelledby="'+F+'">'].concat(S.options.map(function(ee){var Y=D+"-"+ee[1].replace(/\W+/g,"");return['<option id="'+Y+'" value="'+ee[0]+'" ','aria-labelledby="'+F+" "+Y+'">',v.localize(ee[1]),"</option>"].join("")})).concat("</select>").join("")},u.createElFgColor_=function(){var t="captions-text-legend-"+this.id_;return['<fieldset class="vjs-fg-color vjs-track-setting">','<legend id="'+t+'">',this.localize("Text"),"</legend>",this.createElSelect_("color",t),'<span class="vjs-text-opacity vjs-opacity">',this.createElSelect_("textOpacity",t),"</span>","</fieldset>"].join("")},u.createElBgColor_=function(){var t="captions-background-"+this.id_;return['<fieldset class="vjs-bg-color vjs-track-setting">','<legend id="'+t+'">',this.localize("Background"),"</legend>",this.createElSelect_("backgroundColor",t),'<span class="vjs-bg-opacity vjs-opacity">',this.createElSelect_("backgroundOpacity",t),"</span>","</fieldset>"].join("")},u.createElWinColor_=function(){var t="captions-window-"+this.id_;return['<fieldset class="vjs-window-color vjs-track-setting">','<legend id="'+t+'">',this.localize("Window"),"</legend>",this.createElSelect_("windowColor",t),'<span class="vjs-window-opacity vjs-opacity">',this.createElSelect_("windowOpacity",t),"</span>","</fieldset>"].join("")},u.createElColors_=function(){return Kr("div",{className:"vjs-track-settings-colors",innerHTML:[this.createElFgColor_(),this.createElBgColor_(),this.createElWinColor_()].join("")})},u.createElFont_=function(){return Kr("div",{className:"vjs-track-settings-font",innerHTML:['<fieldset class="vjs-font-percent vjs-track-setting">',this.createElSelect_("fontPercent","","legend"),"</fieldset>",'<fieldset class="vjs-edge-style vjs-track-setting">',this.createElSelect_("edgeStyle","","legend"),"</fieldset>",'<fieldset class="vjs-font-family vjs-track-setting">',this.createElSelect_("fontFamily","","legend"),"</fieldset>"].join("")})},u.createElControls_=function(){var t=this.localize("restore all settings to the default values");return Kr("div",{className:"vjs-track-settings-controls",innerHTML:['<button type="button" class="vjs-default-button" title="'+t+'">',this.localize("Reset"),'<span class="vjs-control-text"> '+t+"</span>","</button>",'<button type="button" class="vjs-done-button">'+this.localize("Done")+"</button>"].join("")})},u.content=function(){return[this.createElColors_(),this.createElFont_(),this.createElControls_()]},u.label=function(){return this.localize("Caption Settings Dialog")},u.description=function(){return this.localize("Beginning of dialog window. Escape will cancel and close the window.")},u.buildCSSClass=function(){return g.prototype.buildCSSClass.call(this)+" vjs-text-track-settings"},u.getValues=function(){var t=this;return function xl(g,i,u){return void 0===u&&(u=0),sl(g).reduce(function(l,t){return i(l,g[t],t)},u)}(Zt,function(s,h,v){var S=function lr(g,i){return Ln(g.options[g.options.selectedIndex].value,i)}(t.$(h.selector),h.parser);return void 0!==S&&(s[v]=S),s},{})},u.setValues=function(t){var s=this;uu(Zt,function(h,v){!function Br(g,i,u){if(i)for(var l=0;l<g.options.length;l++)if(Ln(g.options[l].value,u)===i){g.selectedIndex=l;break}}(s.$(h.selector),t[v],h.parser)})},u.setDefaults=function(){var t=this;uu(Zt,function(s){var h=s.hasOwnProperty("default")?s.default:0;t.$(s.selector).selectedIndex=h})},u.restoreSettings=function(){var t;try{t=JSON.parse(ae().localStorage.getItem(vl))}catch(s){qr.warn(s)}t&&this.setValues(t)},u.saveSettings=function(){if(this.options_.persistTextTrackSettings){var t=this.getValues();try{Object.keys(t).length?ae().localStorage.setItem(vl,JSON.stringify(t)):ae().localStorage.removeItem(vl)}catch(s){qr.warn(s)}}},u.updateDisplay=function(){var t=this.player_.getChild("textTrackDisplay");t&&t.updateDisplay()},u.conditionalBlur_=function(){this.previouslyActiveEl_=null;var t=this.player_.controlBar,s=t&&t.subsCapsButton,h=t&&t.captionsButton;s?s.focus():h&&h.focus()},i}(hr);dn.registerComponent("TextTrackSettings",Er);var Wo=function(g){function i(l,t){var s,h=t.ResizeObserver||ae().ResizeObserver;null===t.ResizeObserver&&(h=!1);var v=Wt({createEl:!h,reportTouchActivity:!1},t);return(s=g.call(this,l,v)||this).ResizeObserver=t.ResizeObserver||ae().ResizeObserver,s.loadListener_=null,s.resizeObserver_=null,s.debouncedHandler_=ya(function(){s.resizeHandler()},100,!1,dt(s)),h?(s.resizeObserver_=new s.ResizeObserver(s.debouncedHandler_),s.resizeObserver_.observe(l.el())):(s.loadListener_=function(){if(s.el_&&s.el_.contentWindow){var S=s.debouncedHandler_,D=s.unloadListener_=function(){Gs(this,"resize",S),Gs(this,"unload",D),D=null};fi(s.el_.contentWindow,"unload",D),fi(s.el_.contentWindow,"resize",S)}},s.one("load",s.loadListener_)),s}Me(i,g);var u=i.prototype;return u.createEl=function(){return g.prototype.createEl.call(this,"iframe",{className:"vjs-resize-manager",tabIndex:-1,title:this.localize("No content")},{"aria-hidden":"true"})},u.resizeHandler=function(){!this.player_||!this.player_.trigger||this.player_.trigger("playerresize")},u.dispose=function(){this.debouncedHandler_&&this.debouncedHandler_.cancel(),this.resizeObserver_&&(this.player_.el()&&this.resizeObserver_.unobserve(this.player_.el()),this.resizeObserver_.disconnect()),this.loadListener_&&this.off("load",this.loadListener_),this.el_&&this.el_.contentWindow&&this.unloadListener_&&this.unloadListener_.call(this.el_.contentWindow),this.ResizeObserver=null,this.resizeObserver=null,this.debouncedHandler_=null,this.loadListener_=null,g.prototype.dispose.call(this)},i}(dn);dn.registerComponent("ResizeManager",Wo);var yl={trackingThreshold:20,liveTolerance:15},fh=function(g){function i(l,t){var s,h=Wt(yl,t,{createEl:!1});return(s=g.call(this,l,h)||this).handleVisibilityChange_=function(v){return s.handleVisibilityChange(v)},s.trackLiveHandler_=function(){return s.trackLive_()},s.handlePlay_=function(v){return s.handlePlay(v)},s.handleFirstTimeupdate_=function(v){return s.handleFirstTimeupdate(v)},s.handleSeeked_=function(v){return s.handleSeeked(v)},s.seekToLiveEdge_=function(v){return s.seekToLiveEdge(v)},s.reset_(),s.on(s.player_,"durationchange",function(v){return s.handleDurationchange(v)}),s.on(s.player_,"canplay",function(){return s.toggleTracking()}),oe&&"hidden"in et()&&"visibilityState"in et()&&s.on(et(),"visibilitychange",s.handleVisibilityChange_),s}Me(i,g);var u=i.prototype;return u.handleVisibilityChange=function(){this.player_.duration()===1/0&&(et().hidden?this.stopTracking():this.startTracking())},u.trackLive_=function(){var t=this.player_.seekable();if(t&&t.length){var s=Number(ae().performance.now().toFixed(4)),h=-1===this.lastTime_?0:(s-this.lastTime_)/1e3;this.lastTime_=s,this.pastSeekEnd_=this.pastSeekEnd()+h;var v=this.liveCurrentTime(),S=this.player_.currentTime(),D=this.player_.paused()||this.seekedBehindLive_||Math.abs(v-S)>this.options_.liveTolerance;(!this.timeupdateSeen_||v===1/0)&&(D=!1),D!==this.behindLiveEdge_&&(this.behindLiveEdge_=D,this.trigger("liveedgechange"))}},u.handleDurationchange=function(){this.toggleTracking()},u.toggleTracking=function(){this.player_.duration()===1/0&&this.liveWindow()>=this.options_.trackingThreshold?(this.player_.options_.liveui&&this.player_.addClass("vjs-liveui"),this.startTracking()):(this.player_.removeClass("vjs-liveui"),this.stopTracking())},u.startTracking=function(){this.isTracking()||(this.timeupdateSeen_||(this.timeupdateSeen_=this.player_.hasStarted()),this.trackingInterval_=this.setInterval(this.trackLiveHandler_,Eo),this.trackLive_(),this.on(this.player_,["play","pause"],this.trackLiveHandler_),this.timeupdateSeen_?this.on(this.player_,"seeked",this.handleSeeked_):(this.one(this.player_,"play",this.handlePlay_),this.one(this.player_,"timeupdate",this.handleFirstTimeupdate_)))},u.handleFirstTimeupdate=function(){this.timeupdateSeen_=!0,this.on(this.player_,"seeked",this.handleSeeked_)},u.handleSeeked=function(){var t=Math.abs(this.liveCurrentTime()-this.player_.currentTime());this.seekedBehindLive_=this.nextSeekedFromUser_&&t>2,this.nextSeekedFromUser_=!1,this.trackLive_()},u.handlePlay=function(){this.one(this.player_,"timeupdate",this.seekToLiveEdge_)},u.reset_=function(){this.lastTime_=-1,this.pastSeekEnd_=0,this.lastSeekEnd_=-1,this.behindLiveEdge_=!0,this.timeupdateSeen_=!1,this.seekedBehindLive_=!1,this.nextSeekedFromUser_=!1,this.clearInterval(this.trackingInterval_),this.trackingInterval_=null,this.off(this.player_,["play","pause"],this.trackLiveHandler_),this.off(this.player_,"seeked",this.handleSeeked_),this.off(this.player_,"play",this.handlePlay_),this.off(this.player_,"timeupdate",this.handleFirstTimeupdate_),this.off(this.player_,"timeupdate",this.seekToLiveEdge_)},u.nextSeekedFromUser=function(){this.nextSeekedFromUser_=!0},u.stopTracking=function(){this.isTracking()&&(this.reset_(),this.trigger("liveedgechange"))},u.seekableEnd=function(){for(var t=this.player_.seekable(),s=[],h=t?t.length:0;h--;)s.push(t.end(h));return s.length?s.sort()[s.length-1]:1/0},u.seekableStart=function(){for(var t=this.player_.seekable(),s=[],h=t?t.length:0;h--;)s.push(t.start(h));return s.length?s.sort()[0]:0},u.liveWindow=function(){var t=this.liveCurrentTime();return t===1/0?0:t-this.seekableStart()},u.isLive=function(){return this.isTracking()},u.atLiveEdge=function(){return!this.behindLiveEdge()},u.liveCurrentTime=function(){return this.pastSeekEnd()+this.seekableEnd()},u.pastSeekEnd=function(){var t=this.seekableEnd();return-1!==this.lastSeekEnd_&&t!==this.lastSeekEnd_&&(this.pastSeekEnd_=0),this.lastSeekEnd_=t,this.pastSeekEnd_},u.behindLiveEdge=function(){return this.behindLiveEdge_},u.isTracking=function(){return"number"==typeof this.trackingInterval_},u.seekToLiveEdge=function(){this.seekedBehindLive_=!1,!this.atLiveEdge()&&(this.nextSeekedFromUser_=!1,this.player_.currentTime(this.liveCurrentTime()))},u.dispose=function(){this.off(et(),"visibilitychange",this.handleVisibilityChange_),this.stopTracking(),g.prototype.dispose.call(this)},i}(dn);dn.registerComponent("LiveTracker",fh);var yc,Ed=function(i){var u=i.el();if(u.hasAttribute("src"))return i.triggerSourceset(u.src),!0;var l=i.$$("source"),t=[],s="";if(!l.length)return!1;for(var h=0;h<l.length;h++){var v=l[h].src;v&&-1===t.indexOf(v)&&t.push(v)}return!!t.length&&(1===t.length&&(s=t[0]),i.triggerSourceset(s),!0)},qc=Object.defineProperty({},"innerHTML",{get:function(){return this.cloneNode(!0).innerHTML},set:function(i){var u=et().createElement(this.nodeName.toLowerCase());u.innerHTML=i;for(var l=et().createDocumentFragment();u.childNodes.length;)l.appendChild(u.childNodes[0]);return this.innerText="",ae().Element.prototype.appendChild.call(this,l),this.innerHTML}}),_l=function(i,u){for(var l={},t=0;t<i.length&&!((l=Object.getOwnPropertyDescriptor(i[t],u))&&l.set&&l.get);t++);return l.enumerable=!0,l.configurable=!0,l},ph=function(i){var u=i.el();if(!u.resetSourceWatch_){var l={},t=function(i){return _l([i.el(),ae().HTMLMediaElement.prototype,ae().Element.prototype,qc],"innerHTML")}(i),s=function(v){return function(){for(var S=arguments.length,D=new Array(S),F=0;F<S;F++)D[F]=arguments[F];var ee=v.apply(u,D);return Ed(i),ee}};["append","appendChild","insertAdjacentHTML"].forEach(function(h){u[h]&&(l[h]=u[h],u[h]=s(l[h]))}),Object.defineProperty(u,"innerHTML",Wt(t,{set:s(t.set)})),u.resetSourceWatch_=function(){u.resetSourceWatch_=null,Object.keys(l).forEach(function(h){u[h]=l[h]}),Object.defineProperty(u,"innerHTML",t)},i.one("sourceset",u.resetSourceWatch_)}},fp=Object.defineProperty({},"src",{get:function(){return this.hasAttribute("src")?hg(ae().Element.prototype.getAttribute.call(this,"src")):""},set:function(i){return ae().Element.prototype.setAttribute.call(this,"src",i),i}}),vc=function(i,u,l,t){void 0===t&&(t=!0);var s=function(S){return Object.defineProperty(i,u,{value:S,enumerable:!0,writable:!0})},h={configurable:!0,enumerable:!0,get:function(){var S=l();return s(S),S}};return t&&(h.set=s),Object.defineProperty(i,u,h)},Kn=function(g){function i(l,t){var s;s=g.call(this,l,t)||this;var h=l.source,v=!1;if(s.featuresVideoFrameCallback=s.featuresVideoFrameCallback&&"VIDEO"===s.el_.tagName,h&&(s.el_.currentSrc!==h.src||l.tag&&3===l.tag.initNetworkState_)?s.setSource(h):s.handleLateInit_(s.el_),l.enableSourceset&&s.setupSourcesetHandling_(),s.isScrubbing_=!1,s.el_.hasChildNodes()){for(var S=s.el_.childNodes,D=S.length,F=[];D--;){var ee=S[D];"track"===ee.nodeName.toLowerCase()&&(s.featuresNativeTextTracks?(s.remoteTextTrackEls().addTrackElement_(ee),s.remoteTextTracks().addTrack(ee.track),s.textTracks().addTrack(ee.track),!v&&!s.el_.hasAttribute("crossorigin")&&rf(ee.src)&&(v=!0)):F.push(ee))}for(var me=0;me<F.length;me++)s.el_.removeChild(F[me])}return s.proxyNativeTracks_(),s.featuresNativeTextTracks&&v&&qr.warn("Text Tracks are being loaded from another origin but the crossorigin attribute isn't used.\nThis may prevent text tracks from loading."),s.restoreMetadataTracksInIOSNativePlayer_(),(Qe||qt||Mc)&&!0===l.nativeControlsForTouch&&s.setControls(!0),s.proxyWebkitFullscreen_(),s.triggerReady(),s}Me(i,g);var u=i.prototype;return u.dispose=function(){this.el_&&this.el_.resetSourceset_&&this.el_.resetSourceset_(),i.disposeMediaElement(this.el_),this.options_=null,g.prototype.dispose.call(this)},u.setupSourcesetHandling_=function(){!function(i){if(i.featuresSourceset){var u=i.el();if(!u.resetSourceset_){var l=function(i){return _l([i.el(),ae().HTMLMediaElement.prototype,fp],"src")}(i),t=u.setAttribute,s=u.load;Object.defineProperty(u,"src",Wt(l,{set:function(v){var S=l.set.call(u,v);return i.triggerSourceset(u.src),S}})),u.setAttribute=function(h,v){var S=t.call(u,h,v);return/src/i.test(h)&&i.triggerSourceset(u.src),S},u.load=function(){var h=s.call(u);return Ed(i)||(i.triggerSourceset(""),ph(i)),h},u.currentSrc?i.triggerSourceset(u.currentSrc):Ed(i)||ph(i),u.resetSourceset_=function(){u.resetSourceset_=null,u.load=s,u.setAttribute=t,Object.defineProperty(u,"src",l),u.resetSourceWatch_&&u.resetSourceWatch_()}}}}(this)},u.restoreMetadataTracksInIOSNativePlayer_=function(){var s,t=this.textTracks(),h=function(){s=[];for(var D=0;D<t.length;D++){var F=t[D];"metadata"===F.kind&&s.push({track:F,storedMode:F.mode})}};h(),t.addEventListener("change",h),this.on("dispose",function(){return t.removeEventListener("change",h)});var v=function S(){for(var D=0;D<s.length;D++){var F=s[D];"disabled"===F.track.mode&&F.track.mode!==F.storedMode&&(F.track.mode=F.storedMode)}t.removeEventListener("change",S)};this.on("webkitbeginfullscreen",function(){t.removeEventListener("change",h),t.removeEventListener("change",v),t.addEventListener("change",v)}),this.on("webkitendfullscreen",function(){t.removeEventListener("change",h),t.addEventListener("change",h),t.removeEventListener("change",v)})},u.overrideNative_=function(t,s){var h=this;if(s===this["featuresNative"+t+"Tracks"]){var v=t.toLowerCase();this[v+"TracksListeners_"]&&Object.keys(this[v+"TracksListeners_"]).forEach(function(S){h.el()[v+"Tracks"].removeEventListener(S,h[v+"TracksListeners_"][S])}),this["featuresNative"+t+"Tracks"]=!s,this[v+"TracksListeners_"]=null,this.proxyNativeTracksForType_(v)}},u.overrideNativeAudioTracks=function(t){this.overrideNative_("Audio",t)},u.overrideNativeVideoTracks=function(t){this.overrideNative_("Video",t)},u.proxyNativeTracksForType_=function(t){var s=this,h=Ts[t],v=this.el()[h.getterName],S=this[h.getterName]();if(this["featuresNative"+h.capitalName+"Tracks"]&&v&&v.addEventListener){var D={change:function(Y){var me={type:"change",target:S,currentTarget:S,srcElement:S};S.trigger(me),"text"===t&&s[es.remoteText.getterName]().trigger(me)},addtrack:function(Y){S.addTrack(Y.track)},removetrack:function(Y){S.removeTrack(Y.track)}},F=function(){for(var Y=[],me=0;me<S.length;me++){for(var Le=!1,Be=0;Be<v.length;Be++)if(v[Be]===S[me]){Le=!0;break}Le||Y.push(S[me])}for(;Y.length;)S.removeTrack(Y.shift())};this[h.getterName+"Listeners_"]=D,Object.keys(D).forEach(function(ee){var Y=D[ee];v.addEventListener(ee,Y),s.on("dispose",function(me){return v.removeEventListener(ee,Y)})}),this.on("loadstart",F),this.on("dispose",function(ee){return s.off("loadstart",F)})}},u.proxyNativeTracks_=function(){var t=this;Ts.names.forEach(function(s){t.proxyNativeTracksForType_(s)})},u.createEl=function(){var t=this.options_.tag;if(!t||!this.options_.playerElIngest&&!this.movingMediaElementInDOM){if(t){var s=t.cloneNode(!0);t.parentNode&&t.parentNode.insertBefore(s,t),i.disposeMediaElement(t),t=s}else{t=et().createElement("video");var v=Wt({},this.options_.tag&&Oa(this.options_.tag));(!Qe||!0!==this.options_.nativeControlsForTouch)&&delete v.controls,ol(t,Ls(v,{id:this.options_.techId,class:"vjs-tech"}))}t.playerId=this.options_.playerId}typeof this.options_.preload<"u"&&lu(t,"preload",this.options_.preload),void 0!==this.options_.disablePictureInPicture&&(t.disablePictureInPicture=this.options_.disablePictureInPicture);for(var S=["loop","muted","playsinline","autoplay"],D=0;D<S.length;D++){var F=S[D],ee=this.options_[F];typeof ee<"u"&&(ee?lu(t,F,F):Go(t,F),t[F]=ee)}return t},u.handleLateInit_=function(t){if(0!==t.networkState&&3!==t.networkState){if(0===t.readyState){var s=!1,h=function(){s=!0};this.on("loadstart",h);var v=function(){s||this.trigger("loadstart")};return this.on("loadedmetadata",v),void this.ready(function(){this.off("loadstart",h),this.off("loadedmetadata",v),s||this.trigger("loadstart")})}var S=["loadstart"];S.push("loadedmetadata"),t.readyState>=2&&S.push("loadeddata"),t.readyState>=3&&S.push("canplay"),t.readyState>=4&&S.push("canplaythrough"),this.ready(function(){S.forEach(function(D){this.trigger(D)},this)})}},u.setScrubbing=function(t){this.isScrubbing_=t},u.scrubbing=function(){return this.isScrubbing_},u.setCurrentTime=function(t){try{this.isScrubbing_&&this.el_.fastSeek&&Nr?this.el_.fastSeek(t):this.el_.currentTime=t}catch(s){qr(s,"Video is not ready. (Video.js)")}},u.duration=function(){var t=this;return this.el_.duration===1/0&&za&&va&&0===this.el_.currentTime?(this.on("timeupdate",function h(){t.el_.currentTime>0&&(t.el_.duration===1/0&&t.trigger("durationchange"),t.off("timeupdate",h))}),NaN):this.el_.duration||NaN},u.width=function(){return this.el_.offsetWidth},u.height=function(){return this.el_.offsetHeight},u.proxyWebkitFullscreen_=function(){var t=this;if("webkitDisplayingFullscreen"in this.el_){var s=function(){this.trigger("fullscreenchange",{isFullscreen:!1}),this.el_.controls&&!this.options_.nativeControlsForTouch&&this.controls()&&(this.el_.controls=!1)},h=function(){"webkitPresentationMode"in this.el_&&"picture-in-picture"!==this.el_.webkitPresentationMode&&(this.one("webkitendfullscreen",s),this.trigger("fullscreenchange",{isFullscreen:!0,nativeIOSFullscreen:!0}))};this.on("webkitbeginfullscreen",h),this.on("dispose",function(){t.off("webkitbeginfullscreen",h),t.off("webkitendfullscreen",s)})}},u.supportsFullScreen=function(){if("function"==typeof this.el_.webkitEnterFullScreen){var t=ae().navigator&&ae().navigator.userAgent||"";if(/Android/.test(t)||!/Chrome|Mac OS X 10.5/.test(t))return!0}return!1},u.enterFullScreen=function(){var t=this.el_;if(t.paused&&t.networkState<=t.HAVE_METADATA)$e(this.el_.play()),this.setTimeout(function(){t.pause();try{t.webkitEnterFullScreen()}catch(s){this.trigger("fullscreenerror",s)}},0);else try{t.webkitEnterFullScreen()}catch(s){this.trigger("fullscreenerror",s)}},u.exitFullScreen=function(){this.el_.webkitDisplayingFullscreen?this.el_.webkitExitFullScreen():this.trigger("fullscreenerror",new Error("The video is not fullscreen"))},u.requestPictureInPicture=function(){return this.el_.requestPictureInPicture()},u.requestVideoFrameCallback=function(t){return this.featuresVideoFrameCallback&&!this.el_.webkitKeys?this.el_.requestVideoFrameCallback(t):g.prototype.requestVideoFrameCallback.call(this,t)},u.cancelVideoFrameCallback=function(t){this.featuresVideoFrameCallback&&!this.el_.webkitKeys?this.el_.cancelVideoFrameCallback(t):g.prototype.cancelVideoFrameCallback.call(this,t)},u.src=function(t){if(void 0===t)return this.el_.src;this.setSrc(t)},u.reset=function(){i.resetMediaElement(this.el_)},u.currentSrc=function(){return this.currentSource_?this.currentSource_.src:this.el_.currentSrc},u.setControls=function(t){this.el_.controls=!!t},u.addTextTrack=function(t,s,h){return this.featuresNativeTextTracks?this.el_.addTextTrack(t,s,h):g.prototype.addTextTrack.call(this,t,s,h)},u.createRemoteTextTrack=function(t){if(!this.featuresNativeTextTracks)return g.prototype.createRemoteTextTrack.call(this,t);var s=et().createElement("track");return t.kind&&(s.kind=t.kind),t.label&&(s.label=t.label),(t.language||t.srclang)&&(s.srclang=t.language||t.srclang),t.default&&(s.default=t.default),t.id&&(s.id=t.id),t.src&&(s.src=t.src),s},u.addRemoteTextTrack=function(t,s){var h=g.prototype.addRemoteTextTrack.call(this,t,s);return this.featuresNativeTextTracks&&this.el().appendChild(h),h},u.removeRemoteTextTrack=function(t){if(g.prototype.removeRemoteTextTrack.call(this,t),this.featuresNativeTextTracks)for(var s=this.$$("track"),h=s.length;h--;)(t===s[h]||t===s[h].track)&&this.el().removeChild(s[h])},u.getVideoPlaybackQuality=function(){if("function"==typeof this.el().getVideoPlaybackQuality)return this.el().getVideoPlaybackQuality();var t={};return typeof this.el().webkitDroppedFrameCount<"u"&&typeof this.el().webkitDecodedFrameCount<"u"&&(t.droppedVideoFrames=this.el().webkitDroppedFrameCount,t.totalVideoFrames=this.el().webkitDecodedFrameCount),ae().performance&&"function"==typeof ae().performance.now?t.creationTime=ae().performance.now():ae().performance&&ae().performance.timing&&"number"==typeof ae().performance.timing.navigationStart&&(t.creationTime=ae().Date.now()-ae().performance.timing.navigationStart),t},i}(Zr);vc(Kn,"TEST_VID",function(){if(gr()){var g=et().createElement("video"),i=et().createElement("track");return i.kind="captions",i.srclang="en",i.label="English",g.appendChild(i),g}}),Kn.isSupported=function(){try{Kn.TEST_VID.volume=.5}catch{return!1}return!(!Kn.TEST_VID||!Kn.TEST_VID.canPlayType)},Kn.canPlayType=function(g){return Kn.TEST_VID.canPlayType(g)},Kn.canPlaySource=function(g,i){return Kn.canPlayType(g.type)},Kn.canControlVolume=function(){try{var g=Kn.TEST_VID.volume;Kn.TEST_VID.volume=g/2+.1;var i=g!==Kn.TEST_VID.volume;return i&&Rn?(ae().setTimeout(function(){Kn&&Kn.prototype&&(Kn.prototype.featuresVolumeControl=g!==Kn.TEST_VID.volume)}),!1):i}catch{return!1}},Kn.canMuteVolume=function(){try{var g=Kn.TEST_VID.muted;return Kn.TEST_VID.muted=!g,Kn.TEST_VID.muted?lu(Kn.TEST_VID,"muted","muted"):Go(Kn.TEST_VID,"muted"),g!==Kn.TEST_VID.muted}catch{return!1}},Kn.canControlPlaybackRate=function(){if(za&&va&&V<58)return!1;try{var g=Kn.TEST_VID.playbackRate;return Kn.TEST_VID.playbackRate=g/2+.1,g!==Kn.TEST_VID.playbackRate}catch{return!1}},Kn.canOverrideAttributes=function(){try{var g=function(){};Object.defineProperty(et().createElement("video"),"src",{get:g,set:g}),Object.defineProperty(et().createElement("audio"),"src",{get:g,set:g}),Object.defineProperty(et().createElement("video"),"innerHTML",{get:g,set:g}),Object.defineProperty(et().createElement("audio"),"innerHTML",{get:g,set:g})}catch{return!1}return!0},Kn.supportsNativeTextTracks=function(){return Nr||Rn&&va},Kn.supportsNativeVideoTracks=function(){return!(!Kn.TEST_VID||!Kn.TEST_VID.videoTracks)},Kn.supportsNativeAudioTracks=function(){return!(!Kn.TEST_VID||!Kn.TEST_VID.audioTracks)},Kn.Events=["loadstart","suspend","abort","error","emptied","stalled","loadedmetadata","loadeddata","canplay","canplaythrough","playing","waiting","seeking","seeked","ended","durationchange","timeupdate","progress","play","pause","ratechange","resize","volumechange"],[["featuresMuteControl","canMuteVolume"],["featuresPlaybackRate","canControlPlaybackRate"],["featuresSourceset","canOverrideAttributes"],["featuresNativeTextTracks","supportsNativeTextTracks"],["featuresNativeVideoTracks","supportsNativeVideoTracks"],["featuresNativeAudioTracks","supportsNativeAudioTracks"]].forEach(function(g){var u=g[1];vc(Kn.prototype,g[0],function(){return Kn[u]()},!0)}),Kn.prototype.featuresVolumeControl=Kn.canControlVolume(),Kn.prototype.movingMediaElementInDOM=!Rn,Kn.prototype.featuresFullscreenResize=!0,Kn.prototype.featuresProgressEvents=!0,Kn.prototype.featuresTimeupdateEvents=!0,Kn.prototype.featuresVideoFrameCallback=!(!Kn.TEST_VID||!Kn.TEST_VID.requestVideoFrameCallback),Kn.patchCanPlayType=function(){Mu>=4&&!Ou&&!va&&(yc=Kn.TEST_VID&&Kn.TEST_VID.constructor.prototype.canPlayType,Kn.TEST_VID.constructor.prototype.canPlayType=function(g){return g&&/^application\/(?:x-|vnd\.apple\.)mpegurl/i.test(g)?"maybe":yc.call(this,g)})},Kn.unpatchCanPlayType=function(){var g=Kn.TEST_VID.constructor.prototype.canPlayType;return yc&&(Kn.TEST_VID.constructor.prototype.canPlayType=yc),g},Kn.patchCanPlayType(),Kn.disposeMediaElement=function(g){if(g){for(g.parentNode&&g.parentNode.removeChild(g);g.hasChildNodes();)g.removeChild(g.firstChild);g.removeAttribute("src"),"function"==typeof g.load&&function(){try{g.load()}catch{}}()}},Kn.resetMediaElement=function(g){if(g){for(var i=g.querySelectorAll("source"),u=i.length;u--;)g.removeChild(i[u]);g.removeAttribute("src"),"function"==typeof g.load&&function(){try{g.load()}catch{}}()}},["muted","defaultMuted","autoplay","controls","loop","playsinline"].forEach(function(g){Kn.prototype[g]=function(){return this.el_[g]||this.el_.hasAttribute(g)}}),["muted","defaultMuted","autoplay","loop","playsinline"].forEach(function(g){Kn.prototype["set"+ve(g)]=function(i){this.el_[g]=i,i?this.el_.setAttribute(g,g):this.el_.removeAttribute(g)}}),["paused","currentTime","buffered","volume","poster","preload","error","seeking","seekable","ended","playbackRate","defaultPlaybackRate","disablePictureInPicture","played","networkState","readyState","videoWidth","videoHeight","crossOrigin"].forEach(function(g){Kn.prototype[g]=function(){return this.el_[g]}}),["volume","src","poster","preload","playbackRate","defaultPlaybackRate","disablePictureInPicture","crossOrigin"].forEach(function(g){Kn.prototype["set"+ve(g)]=function(i){this.el_[g]=i}}),["pause","load","play"].forEach(function(g){Kn.prototype[g]=function(){return this.el_[g]()}}),Zr.withSourceHandlers(Kn),Kn.nativeSourceHandler={},Kn.nativeSourceHandler.canPlayType=function(g){try{return Kn.TEST_VID.canPlayType(g)}catch{return""}},Kn.nativeSourceHandler.canHandleSource=function(g,i){if(g.type)return Kn.nativeSourceHandler.canPlayType(g.type);if(g.src){var u=sh(g.src);return Kn.nativeSourceHandler.canPlayType("video/"+u)}return""},Kn.nativeSourceHandler.handleSource=function(g,i,u){i.setSrc(g.src)},Kn.nativeSourceHandler.dispose=function(){},Kn.registerSourceHandler(Kn.nativeSourceHandler),Zr.registerTech("Html5",Kn);var gh=["progress","abort","suspend","emptied","stalled","loadedmetadata","loadeddata","timeupdate","resize","volumechange","texttrackchange"],Cu={canplay:"CanPlay",canplaythrough:"CanPlayThrough",playing:"Playing",seeked:"Seeked"},Qv=["tiny","xsmall","small","medium","large","xlarge","huge"],Cf={};Qv.forEach(function(g){var i="x"===g.charAt(0)?"x-"+g.substring(1):g;Cf[g]="vjs-layout-"+i});var _c={tiny:210,xsmall:320,small:425,medium:768,large:1440,xlarge:2560,huge:1/0},oa=function(g){function i(l,t,s){var h;if(l.id=l.id||t.id||"vjs_video_"+xs(),(t=Ls(i.getTagSettings(l),t)).initChildren=!1,t.createEl=!1,t.evented=!1,t.reportTouchActivity=!1,!t.language)if("function"==typeof l.closest){var v=l.closest("[lang]");v&&v.getAttribute&&(t.language=v.getAttribute("lang"))}else for(var S=l;S&&1===S.nodeType;){if(Oa(S).hasOwnProperty("lang")){t.language=S.getAttribute("lang");break}S=S.parentNode}if((h=g.call(this,null,t,s)||this).boundDocumentFullscreenChange_=function(Y){return h.documentFullscreenChange_(Y)},h.boundFullWindowOnEscKey_=function(Y){return h.fullWindowOnEscKey(Y)},h.boundUpdateStyleEl_=function(Y){return h.updateStyleEl_(Y)},h.boundApplyInitTime_=function(Y){return h.applyInitTime_(Y)},h.boundUpdateCurrentBreakpoint_=function(Y){return h.updateCurrentBreakpoint_(Y)},h.boundHandleTechClick_=function(Y){return h.handleTechClick_(Y)},h.boundHandleTechDoubleClick_=function(Y){return h.handleTechDoubleClick_(Y)},h.boundHandleTechTouchStart_=function(Y){return h.handleTechTouchStart_(Y)},h.boundHandleTechTouchMove_=function(Y){return h.handleTechTouchMove_(Y)},h.boundHandleTechTouchEnd_=function(Y){return h.handleTechTouchEnd_(Y)},h.boundHandleTechTap_=function(Y){return h.handleTechTap_(Y)},h.isFullscreen_=!1,h.log=Ga(h.id_),h.fsApi_=Ho,h.isPosterFromTech_=!1,h.queuedCallbacks_=[],h.isReady_=!1,h.hasStarted_=!1,h.userActive_=!1,h.debugEnabled_=!1,h.audioOnlyMode_=!1,h.audioPosterMode_=!1,h.audioOnlyCache_={playerHeight:null,hiddenChildren:[]},!h.options_||!h.options_.techOrder||!h.options_.techOrder.length)throw new Error("No techOrder specified. Did you overwrite videojs.options instead of just changing the properties you want to override?");if(h.tag=l,h.tagAttributes=l&&Oa(l),h.language(h.options_.language),t.languages){var D={};Object.getOwnPropertyNames(t.languages).forEach(function(Y){D[Y.toLowerCase()]=t.languages[Y]}),h.languages_=D}else h.languages_=i.prototype.options_.languages;h.resetCache_(),h.poster_=t.poster||"",h.controls_=!!t.controls,l.controls=!1,l.removeAttribute("controls"),h.changingSrc_=!1,h.playCallbacks_=[],h.playTerminatedQueue_=[],l.hasAttribute("autoplay")?h.autoplay(!0):h.autoplay(h.options_.autoplay),t.plugins&&Object.keys(t.plugins).forEach(function(Y){if("function"!=typeof h[Y])throw new Error('plugin "'+Y+'" does not exist')}),h.scrubbing_=!1,h.el_=h.createEl(),C(dt(h),{eventBusKey:"el_"}),h.fsApi_.requestFullscreen&&(fi(et(),h.fsApi_.fullscreenchange,h.boundDocumentFullscreenChange_),h.on(h.fsApi_.fullscreenchange,h.boundDocumentFullscreenChange_)),h.fluid_&&h.on(["playerreset","resize"],h.boundUpdateStyleEl_);var F=Wt(h.options_);t.plugins&&Object.keys(t.plugins).forEach(function(Y){h[Y](t.plugins[Y])}),t.debug&&h.debug(!0),h.options_.playerOptions=F,h.middleware_=[],h.playbackRates(t.playbackRates),h.initChildren(),h.isAudio("audio"===l.nodeName.toLowerCase()),h.controls()?h.addClass("vjs-controls-enabled"):h.addClass("vjs-controls-disabled"),h.el_.setAttribute("role","region"),h.isAudio()?h.el_.setAttribute("aria-label",h.localize("Audio Player")):h.el_.setAttribute("aria-label",h.localize("Video Player")),h.isAudio()&&h.addClass("vjs-audio"),h.flexNotSupported_()&&h.addClass("vjs-no-flex"),Qe&&h.addClass("vjs-touch-enabled"),Rn||h.addClass("vjs-workinghover"),i.players[h.id_]=dt(h);var ee=ts.split(".")[0];return h.addClass("vjs-v"+ee),h.userActive(!0),h.reportUserActivity(),h.one("play",function(Y){return h.listenForUserActivity_(Y)}),h.on("stageclick",function(Y){return h.handleStageClick_(Y)}),h.on("keydown",function(Y){return h.handleKeyDown(Y)}),h.on("languagechange",function(Y){return h.handleLanguagechange(Y)}),h.breakpoints(h.options_.breakpoints),h.responsive(h.options_.responsive),h.on("ready",function(){h.audioPosterMode(h.options_.audioPosterMode),h.audioOnlyMode(h.options_.audioOnlyMode)}),h}Me(i,g);var u=i.prototype;return u.dispose=function(){var t=this;this.trigger("dispose"),this.off("dispose"),Gs(et(),this.fsApi_.fullscreenchange,this.boundDocumentFullscreenChange_),Gs(et(),"keydown",this.boundFullWindowOnEscKey_),this.styleEl_&&this.styleEl_.parentNode&&(this.styleEl_.parentNode.removeChild(this.styleEl_),this.styleEl_=null),i.players[this.id_]=null,this.tag&&this.tag.player&&(this.tag.player=null),this.el_&&this.el_.player&&(this.el_.player=null),this.tech_&&(this.tech_.dispose(),this.isPosterFromTech_=!1,this.poster_=""),this.playerElIngest_&&(this.playerElIngest_=null),this.tag&&(this.tag=null),function lf(g){sf[g.id()]=null}(this),Na.names.forEach(function(s){var v=t[Na[s].getterName]();v&&v.off&&v.off()}),g.prototype.dispose.call(this,{restoreEl:this.options_.restoreEl})},u.createEl=function(){var s,t=this.tag,h=this.playerElIngest_=t.parentNode&&t.parentNode.hasAttribute&&t.parentNode.hasAttribute("data-vjs-player"),v="video-js"===this.tag.tagName.toLowerCase();h?s=this.el_=t.parentNode:v||(s=this.el_=g.prototype.createEl.call(this,"div"));var S=Oa(t);if(v){for(s=this.el_=t,t=this.tag=et().createElement("video");s.children.length;)t.appendChild(s.firstChild);un(s,"video-js")||Oi(s,"video-js"),s.appendChild(t),h=this.playerElIngest_=s,Object.keys(s).forEach(function(Le){try{t[Le]=s[Le]}catch{}})}if(t.setAttribute("tabindex","-1"),S.tabindex="-1",(oe||va&&Ee)&&(t.setAttribute("role","application"),S.role="application"),t.removeAttribute("width"),t.removeAttribute("height"),"width"in S&&delete S.width,"height"in S&&delete S.height,Object.getOwnPropertyNames(S).forEach(function(Le){v&&"class"===Le||s.setAttribute(Le,S[Le]),v&&t.setAttribute(Le,S[Le])}),t.playerId=t.id,t.id+="_html5_api",t.className="vjs-tech",t.player=s.player=this,this.addClass("vjs-paused"),!0!==ae().VIDEOJS_NO_DYNAMIC_STYLE){this.styleEl_=qu("vjs-styles-dimensions");var D=qa(".vjs-styles-defaults"),F=qa("head");F.insertBefore(this.styleEl_,D?D.nextSibling:F.firstChild)}this.fill_=!1,this.fluid_=!1,this.width(this.options_.width),this.height(this.options_.height),this.fill(this.options_.fill),this.fluid(this.options_.fluid),this.aspectRatio(this.options_.aspectRatio),this.crossOrigin(this.options_.crossOrigin||this.options_.crossorigin);for(var ee=t.getElementsByTagName("a"),Y=0;Y<ee.length;Y++){var me=ee.item(Y);Oi(me,"vjs-hidden"),me.setAttribute("hidden","hidden")}return t.initNetworkState_=t.networkState,t.parentNode&&!h&&t.parentNode.insertBefore(s,t),Bt(t,s),this.children_.unshift(t),this.el_.setAttribute("lang",this.language_),this.el_.setAttribute("translate","no"),this.el_=s,s},u.crossOrigin=function(t){if(!t)return this.techGet_("crossOrigin");"anonymous"===t||"use-credentials"===t?this.techCall_("setCrossOrigin",t):qr.warn('crossOrigin must be "anonymous" or "use-credentials", given "'+t+'"')},u.width=function(t){return this.dimension("width",t)},u.height=function(t){return this.dimension("height",t)},u.dimension=function(t,s){var h=t+"_";if(void 0===s)return this[h]||0;if(""===s||"auto"===s)return this[h]=void 0,void this.updateStyleEl_();var v=parseFloat(s);isNaN(v)?qr.error('Improper value "'+s+'" supplied for for '+t):(this[h]=v,this.updateStyleEl_())},u.fluid=function(t){var s=this;if(void 0===t)return!!this.fluid_;this.fluid_=!!t,Ra(this)&&this.off(["playerreset","resize"],this.boundUpdateStyleEl_),t?(this.addClass("vjs-fluid"),this.fill(!1),function(i,u){Ra(i)?u():(i.eventedCallbacks||(i.eventedCallbacks=[]),i.eventedCallbacks.push(u))}(this,function(){s.on(["playerreset","resize"],s.boundUpdateStyleEl_)})):this.removeClass("vjs-fluid"),this.updateStyleEl_()},u.fill=function(t){if(void 0===t)return!!this.fill_;this.fill_=!!t,t?(this.addClass("vjs-fill"),this.fluid(!1)):this.removeClass("vjs-fill")},u.aspectRatio=function(t){if(void 0===t)return this.aspectRatio_;if(!/^\d+\:\d+$/.test(t))throw new Error("Improper value supplied for aspect ratio. The format should be width:height, for example 16:9.");this.aspectRatio_=t,this.fluid(!0),this.updateStyleEl_()},u.updateStyleEl_=function(){if(!0!==ae().VIDEOJS_NO_DYNAMIC_STYLE){var v,S,F,ee=(void 0!==this.aspectRatio_&&"auto"!==this.aspectRatio_?this.aspectRatio_:this.videoWidth()>0?this.videoWidth()+":"+this.videoHeight():"16:9").split(":"),Y=ee[1]/ee[0];v=void 0!==this.width_?this.width_:void 0!==this.height_?this.height_/Y:this.videoWidth()||300,S=void 0!==this.height_?this.height_:v*Y,F=/^[^a-zA-Z]/.test(this.id())?"dimensions-"+this.id():this.id()+"-dimensions",this.addClass(F),ul(this.styleEl_,"\n      ."+F+" {\n        width: "+v+"px;\n        height: "+S+"px;\n      }\n\n      ."+F+".vjs-fluid:not(.vjs-audio-only-mode) {\n        padding-top: "+100*Y+"%;\n      }\n    ")}else{var t="number"==typeof this.width_?this.width_:this.options_.width,s="number"==typeof this.height_?this.height_:this.options_.height,h=this.tech_&&this.tech_.el();h&&(t>=0&&(h.width=t),s>=0&&(h.height=s))}},u.loadTech_=function(t,s){var h=this;this.tech_&&this.unloadTech_();var v=ve(t),S=t.charAt(0).toLowerCase()+t.slice(1);"Html5"!==v&&this.tag&&(Zr.getTech("Html5").disposeMediaElement(this.tag),this.tag.player=null,this.tag=null),this.techName_=v,this.isReady_=!1;var D=this.autoplay();("string"==typeof this.autoplay()||!0===this.autoplay()&&this.options_.normalizeAutoplay)&&(D=!1);var F={source:s,autoplay:D,nativeControlsForTouch:this.options_.nativeControlsForTouch,playerId:this.id(),techId:this.id()+"_"+S+"_api",playsinline:this.options_.playsinline,preload:this.options_.preload,loop:this.options_.loop,disablePictureInPicture:this.options_.disablePictureInPicture,muted:this.options_.muted,poster:this.poster(),language:this.language(),playerElIngest:this.playerElIngest_||!1,"vtt.js":this.options_["vtt.js"],canOverridePoster:!!this.options_.techCanOverridePoster,enableSourceset:this.options_.enableSourceset,Promise:this.options_.Promise};Na.names.forEach(function(Y){var me=Na[Y];F[me.getterName]=h[me.privateName]}),Ls(F,this.options_[v]),Ls(F,this.options_[S]),Ls(F,this.options_[t.toLowerCase()]),this.tag&&(F.tag=this.tag),s&&s.src===this.cache_.src&&this.cache_.currentTime>0&&(F.startTime=this.cache_.currentTime);var ee=Zr.getTech(t);if(!ee)throw new Error("No Tech named '"+v+"' exists! '"+v+"' should be registered using videojs.registerTech()'");this.tech_=new ee(F),this.tech_.ready(Ds(this,this.handleTechReady_),!0),function(i,u){i.forEach(function(l){var t=u.addRemoteTextTrack(l).track;!l.src&&l.cues&&l.cues.forEach(function(s){return t.addCue(s)})}),u.textTracks()}(this.textTracksJson_||[],this.tech_),gh.forEach(function(Y){h.on(h.tech_,Y,function(me){return h["handleTech"+ve(Y)+"_"](me)})}),Object.keys(Cu).forEach(function(Y){h.on(h.tech_,Y,function(me){0===h.tech_.playbackRate()&&h.tech_.seeking()?h.queuedCallbacks_.push({callback:h["handleTech"+Cu[Y]+"_"].bind(h),event:me}):h["handleTech"+Cu[Y]+"_"](me)})}),this.on(this.tech_,"loadstart",function(Y){return h.handleTechLoadStart_(Y)}),this.on(this.tech_,"sourceset",function(Y){return h.handleTechSourceset_(Y)}),this.on(this.tech_,"waiting",function(Y){return h.handleTechWaiting_(Y)}),this.on(this.tech_,"ended",function(Y){return h.handleTechEnded_(Y)}),this.on(this.tech_,"seeking",function(Y){return h.handleTechSeeking_(Y)}),this.on(this.tech_,"play",function(Y){return h.handleTechPlay_(Y)}),this.on(this.tech_,"firstplay",function(Y){return h.handleTechFirstPlay_(Y)}),this.on(this.tech_,"pause",function(Y){return h.handleTechPause_(Y)}),this.on(this.tech_,"durationchange",function(Y){return h.handleTechDurationChange_(Y)}),this.on(this.tech_,"fullscreenchange",function(Y,me){return h.handleTechFullscreenChange_(Y,me)}),this.on(this.tech_,"fullscreenerror",function(Y,me){return h.handleTechFullscreenError_(Y,me)}),this.on(this.tech_,"enterpictureinpicture",function(Y){return h.handleTechEnterPictureInPicture_(Y)}),this.on(this.tech_,"leavepictureinpicture",function(Y){return h.handleTechLeavePictureInPicture_(Y)}),this.on(this.tech_,"error",function(Y){return h.handleTechError_(Y)}),this.on(this.tech_,"posterchange",function(Y){return h.handleTechPosterChange_(Y)}),this.on(this.tech_,"textdata",function(Y){return h.handleTechTextData_(Y)}),this.on(this.tech_,"ratechange",function(Y){return h.handleTechRateChange_(Y)}),this.on(this.tech_,"loadedmetadata",this.boundUpdateStyleEl_),this.usingNativeControls(this.techGet_("controls")),this.controls()&&!this.usingNativeControls()&&this.addTechControlsListeners_(),this.tech_.el().parentNode!==this.el()&&("Html5"!==v||!this.tag)&&Bt(this.tech_.el(),this.el()),this.tag&&(this.tag.player=null,this.tag=null)},u.unloadTech_=function(){var t=this;Na.names.forEach(function(s){var h=Na[s];t[h.privateName]=t[h.getterName]()}),this.textTracksJson_=function(i){var u=i.$$("track"),l=Array.prototype.map.call(u,function(s){return s.track});return Array.prototype.map.call(u,function(s){var h=It(s.track);return s.src&&(h.src=s.src),h}).concat(Array.prototype.filter.call(i.textTracks(),function(s){return-1===l.indexOf(s)}).map(It))}(this.tech_),this.isReady_=!1,this.tech_.dispose(),this.tech_=!1,this.isPosterFromTech_&&(this.poster_="",this.trigger("posterchange")),this.isPosterFromTech_=!1},u.tech=function(t){return void 0===t&&qr.warn("Using the tech directly can be dangerous. I hope you know what you're doing.\nSee https://github.com/videojs/video.js/issues/2617 for more info.\n"),this.tech_},u.addTechControlsListeners_=function(){this.removeTechControlsListeners_(),this.on(this.tech_,"click",this.boundHandleTechClick_),this.on(this.tech_,"dblclick",this.boundHandleTechDoubleClick_),this.on(this.tech_,"touchstart",this.boundHandleTechTouchStart_),this.on(this.tech_,"touchmove",this.boundHandleTechTouchMove_),this.on(this.tech_,"touchend",this.boundHandleTechTouchEnd_),this.on(this.tech_,"tap",this.boundHandleTechTap_)},u.removeTechControlsListeners_=function(){this.off(this.tech_,"tap",this.boundHandleTechTap_),this.off(this.tech_,"touchstart",this.boundHandleTechTouchStart_),this.off(this.tech_,"touchmove",this.boundHandleTechTouchMove_),this.off(this.tech_,"touchend",this.boundHandleTechTouchEnd_),this.off(this.tech_,"click",this.boundHandleTechClick_),this.off(this.tech_,"dblclick",this.boundHandleTechDoubleClick_)},u.handleTechReady_=function(){this.triggerReady(),this.cache_.volume&&this.techCall_("setVolume",this.cache_.volume),this.handleTechPosterChange_(),this.handleTechDurationChange_()},u.handleTechLoadStart_=function(){this.removeClass("vjs-ended"),this.removeClass("vjs-seeking"),this.error(null),this.handleTechDurationChange_(),this.paused()?(this.hasStarted(!1),this.trigger("loadstart")):(this.trigger("loadstart"),this.trigger("firstplay")),this.manualAutoplay_(!0===this.autoplay()&&this.options_.normalizeAutoplay?"play":this.autoplay())},u.manualAutoplay_=function(t){var s=this;if(this.tech_&&"string"==typeof t){var v,h=function(){var D=s.muted();s.muted(!0);var F=function(){s.muted(D)};s.playTerminatedQueue_.push(F);var ee=s.play();if(_e(ee))return ee.catch(function(Y){throw F(),new Error("Rejection at manualAutoplay. Restoring muted value. "+(Y||""))})};if("any"!==t||this.muted()?v="muted"!==t||this.muted()?this.play():h():_e(v=this.play())&&(v=v.catch(h)),_e(v))return v.then(function(){s.trigger({type:"autoplay-success",autoplay:t})}).catch(function(){s.trigger({type:"autoplay-failure",autoplay:t})})}},u.updateSourceCaches_=function(t){void 0===t&&(t="");var s=t,h="";"string"!=typeof s&&(s=t.src,h=t.type),this.cache_.source=this.cache_.source||{},this.cache_.sources=this.cache_.sources||[],s&&!h&&(h=function(i,u){if(!u)return"";if(i.cache_.source.src===u&&i.cache_.source.type)return i.cache_.source.type;var l=i.cache_.sources.filter(function(v){return v.src===u});if(l.length)return l[0].type;for(var t=i.$$("source"),s=0;s<t.length;s++){var h=t[s];if(h.type&&h.src&&h.src===u)return h.type}return ll(u)}(this,s)),this.cache_.source=Wt({},t,{src:s,type:h});for(var v=this.cache_.sources.filter(function(me){return me.src&&me.src===s}),S=[],D=this.$$("source"),F=[],ee=0;ee<D.length;ee++){var Y=Oa(D[ee]);S.push(Y),Y.src&&Y.src===s&&F.push(Y.src)}F.length&&!v.length?this.cache_.sources=S:v.length||(this.cache_.sources=[this.cache_.source]),this.cache_.src=s},u.handleTechSourceset_=function(t){var s=this;if(!this.changingSrc_){var h=function(F){return s.updateSourceCaches_(F)},v=this.currentSource().src,S=t.src;v&&!/^blob:/.test(v)&&/^blob:/.test(S)&&(!this.lastSource_||this.lastSource_.tech!==S&&this.lastSource_.player!==v)&&(h=function(){}),h(S),t.src||this.tech_.any(["sourceset","loadstart"],function(D){if("sourceset"!==D.type){var F=s.techGet("currentSrc");s.lastSource_.tech=F,s.updateSourceCaches_(F)}})}this.lastSource_={player:this.currentSource().src,tech:t.src},this.trigger({src:t.src,type:"sourceset"})},u.hasStarted=function(t){if(void 0===t)return this.hasStarted_;t!==this.hasStarted_&&(this.hasStarted_=t,this.hasStarted_?(this.addClass("vjs-has-started"),this.trigger("firstplay")):this.removeClass("vjs-has-started"))},u.handleTechPlay_=function(){this.removeClass("vjs-ended"),this.removeClass("vjs-paused"),this.addClass("vjs-playing"),this.hasStarted(!0),this.trigger("play")},u.handleTechRateChange_=function(){this.tech_.playbackRate()>0&&0===this.cache_.lastPlaybackRate&&(this.queuedCallbacks_.forEach(function(t){return t.callback(t.event)}),this.queuedCallbacks_=[]),this.cache_.lastPlaybackRate=this.tech_.playbackRate(),this.trigger("ratechange")},u.handleTechWaiting_=function(){var t=this;this.addClass("vjs-waiting"),this.trigger("waiting");var s=this.currentTime();this.on("timeupdate",function v(){s!==t.currentTime()&&(t.removeClass("vjs-waiting"),t.off("timeupdate",v))})},u.handleTechCanPlay_=function(){this.removeClass("vjs-waiting"),this.trigger("canplay")},u.handleTechCanPlayThrough_=function(){this.removeClass("vjs-waiting"),this.trigger("canplaythrough")},u.handleTechPlaying_=function(){this.removeClass("vjs-waiting"),this.trigger("playing")},u.handleTechSeeking_=function(){this.addClass("vjs-seeking"),this.trigger("seeking")},u.handleTechSeeked_=function(){this.removeClass("vjs-seeking"),this.removeClass("vjs-ended"),this.trigger("seeked")},u.handleTechFirstPlay_=function(){this.options_.starttime&&(qr.warn("Passing the `starttime` option to the player will be deprecated in 6.0"),this.currentTime(this.options_.starttime)),this.addClass("vjs-has-started"),this.trigger("firstplay")},u.handleTechPause_=function(){this.removeClass("vjs-playing"),this.addClass("vjs-paused"),this.trigger("pause")},u.handleTechEnded_=function(){this.addClass("vjs-ended"),this.removeClass("vjs-waiting"),this.options_.loop?(this.currentTime(0),this.play()):this.paused()||this.pause(),this.trigger("ended")},u.handleTechDurationChange_=function(){this.duration(this.techGet_("duration"))},u.handleTechClick_=function(t){this.controls_&&(void 0===this.options_||void 0===this.options_.userActions||void 0===this.options_.userActions.click||!1!==this.options_.userActions.click)&&(void 0!==this.options_&&void 0!==this.options_.userActions&&"function"==typeof this.options_.userActions.click?this.options_.userActions.click.call(this,t):this.paused()?$e(this.play()):this.pause())},u.handleTechDoubleClick_=function(t){this.controls_&&(Array.prototype.some.call(this.$$(".vjs-control-bar, .vjs-modal-dialog"),function(h){return h.contains(t.target)})||(void 0===this.options_||void 0===this.options_.userActions||void 0===this.options_.userActions.doubleClick||!1!==this.options_.userActions.doubleClick)&&(void 0!==this.options_&&void 0!==this.options_.userActions&&"function"==typeof this.options_.userActions.doubleClick?this.options_.userActions.doubleClick.call(this,t):this.isFullscreen()?this.exitFullscreen():this.requestFullscreen()))},u.handleTechTap_=function(){this.userActive(!this.userActive())},u.handleTechTouchStart_=function(){this.userWasActive=this.userActive()},u.handleTechTouchMove_=function(){this.userWasActive&&this.reportUserActivity()},u.handleTechTouchEnd_=function(t){t.cancelable&&t.preventDefault()},u.handleStageClick_=function(){this.reportUserActivity()},u.toggleFullscreenClass_=function(){this.isFullscreen()?this.addClass("vjs-fullscreen"):this.removeClass("vjs-fullscreen")},u.documentFullscreenChange_=function(t){var s=t.target.player;if(!s||s===this){var h=this.el(),v=et()[this.fsApi_.fullscreenElement]===h;!v&&h.matches?v=h.matches(":"+this.fsApi_.fullscreen):!v&&h.msMatchesSelector&&(v=h.msMatchesSelector(":"+this.fsApi_.fullscreen)),this.isFullscreen(v)}},u.handleTechFullscreenChange_=function(t,s){var h=this;s&&(s.nativeIOSFullscreen&&(this.addClass("vjs-ios-native-fs"),this.tech_.one("webkitendfullscreen",function(){h.removeClass("vjs-ios-native-fs")})),this.isFullscreen(s.isFullscreen))},u.handleTechFullscreenError_=function(t,s){this.trigger("fullscreenerror",s)},u.togglePictureInPictureClass_=function(){this.isInPictureInPicture()?this.addClass("vjs-picture-in-picture"):this.removeClass("vjs-picture-in-picture")},u.handleTechEnterPictureInPicture_=function(t){this.isInPictureInPicture(!0)},u.handleTechLeavePictureInPicture_=function(t){this.isInPictureInPicture(!1)},u.handleTechError_=function(){var t=this.tech_.error();this.error(t)},u.handleTechTextData_=function(){var t=null;arguments.length>1&&(t=arguments[1]),this.trigger("textdata",t)},u.getCache=function(){return this.cache_},u.resetCache_=function(){this.cache_={currentTime:0,initTime:0,inactivityTimeout:this.options_.inactivityTimeout,duration:NaN,lastVolume:1,lastPlaybackRate:this.defaultPlaybackRate(),media:null,src:"",source:{},sources:[],playbackRates:[],volume:1}},u.techCall_=function(t,s){this.ready(function(){if(t in uf)return function af(g,i,u,l){return i[u](g.reduce(Uc(u),l))}(this.middleware_,this.tech_,t,s);if(t in wo)return jc(this.middleware_,this.tech_,t,s);try{this.tech_&&this.tech_[t](s)}catch(h){throw qr(h),h}},!0)},u.techGet_=function(t){if(this.tech_&&this.tech_.isReady_){if(t in mg)return function Fc(g,i,u){return g.reduceRight(Uc(u),i[u]())}(this.middleware_,this.tech_,t);if(t in wo)return jc(this.middleware_,this.tech_,t);try{return this.tech_[t]()}catch(s){throw void 0===this.tech_[t]?(qr("Video.js: "+t+" method not defined for "+this.techName_+" playback technology.",s),s):"TypeError"===s.name?(qr("Video.js: "+t+" unavailable on "+this.techName_+" playback technology element.",s),this.tech_.isReady_=!1,s):(qr(s),s)}}},u.play=function(){var t=this,s=this.options_.Promise||ae().Promise;return s?new s(function(h){t.play_(h)}):this.play_()},u.play_=function(t){var s=this;void 0===t&&(t=$e),this.playCallbacks_.push(t);var h=Boolean(!this.changingSrc_&&(this.src()||this.currentSrc())),v=Boolean(Nr||Rn);if(this.waitToPlay_&&(this.off(["ready","loadstart"],this.waitToPlay_),this.waitToPlay_=null),!this.isReady_||!h)return this.waitToPlay_=function(F){s.play_()},this.one(["ready","loadstart"],this.waitToPlay_),void(!h&&v&&this.load());var S=this.techGet_("play");v&&this.hasClass("vjs-ended")&&this.resetProgressBar_(),null===S?this.runPlayTerminatedQueue_():this.runPlayCallbacks_(S)},u.runPlayTerminatedQueue_=function(){var t=this.playTerminatedQueue_.slice(0);this.playTerminatedQueue_=[],t.forEach(function(s){s()})},u.runPlayCallbacks_=function(t){var s=this.playCallbacks_.slice(0);this.playCallbacks_=[],this.playTerminatedQueue_=[],s.forEach(function(h){h(t)})},u.pause=function(){this.techCall_("pause")},u.paused=function(){return!1!==this.techGet_("paused")},u.played=function(){return this.techGet_("played")||Lu(0,0)},u.scrubbing=function(t){if(typeof t>"u")return this.scrubbing_;this.scrubbing_=!!t,this.techCall_("setScrubbing",this.scrubbing_),t?this.addClass("vjs-scrubbing"):this.removeClass("vjs-scrubbing")},u.currentTime=function(t){return typeof t<"u"?(t<0&&(t=0),this.isReady_&&!this.changingSrc_&&this.tech_&&this.tech_.isReady_?(this.techCall_("setCurrentTime",t),void(this.cache_.initTime=0)):(this.cache_.initTime=t,this.off("canplay",this.boundApplyInitTime_),void this.one("canplay",this.boundApplyInitTime_))):(this.cache_.currentTime=this.techGet_("currentTime")||0,this.cache_.currentTime)},u.applyInitTime_=function(){this.currentTime(this.cache_.initTime)},u.duration=function(t){if(void 0===t)return void 0!==this.cache_.duration?this.cache_.duration:NaN;(t=parseFloat(t))<0&&(t=1/0),t!==this.cache_.duration&&(this.cache_.duration=t,t===1/0?this.addClass("vjs-live"):this.removeClass("vjs-live"),isNaN(t)||this.trigger("durationchange"))},u.remainingTime=function(){return this.duration()-this.currentTime()},u.remainingTimeDisplay=function(){return Math.floor(this.duration())-Math.floor(this.currentTime())},u.buffered=function(){var t=this.techGet_("buffered");return(!t||!t.length)&&(t=Lu(0,0)),t},u.bufferedPercent=function(){return Xa(this.buffered(),this.duration())},u.bufferedEnd=function(){var t=this.buffered(),s=this.duration(),h=t.end(t.length-1);return h>s&&(h=s),h},u.volume=function(t){var s;return void 0!==t?(s=Math.max(0,Math.min(1,parseFloat(t))),this.cache_.volume=s,this.techCall_("setVolume",s),void(s>0&&this.lastVolume_(s))):(s=parseFloat(this.techGet_("volume")),isNaN(s)?1:s)},u.muted=function(t){if(void 0===t)return this.techGet_("muted")||!1;this.techCall_("setMuted",t)},u.defaultMuted=function(t){return void 0!==t?this.techCall_("setDefaultMuted",t):this.techGet_("defaultMuted")||!1},u.lastVolume_=function(t){if(void 0===t||0===t)return this.cache_.lastVolume;this.cache_.lastVolume=t},u.supportsFullScreen=function(){return this.techGet_("supportsFullScreen")||!1},u.isFullscreen=function(t){if(void 0!==t){var s=this.isFullscreen_;return this.isFullscreen_=Boolean(t),this.isFullscreen_!==s&&this.fsApi_.prefixed&&this.trigger("fullscreenchange"),void this.toggleFullscreenClass_()}return this.isFullscreen_},u.requestFullscreen=function(t){var s=this.options_.Promise||ae().Promise;if(s){var h=this;return new s(function(v,S){function D(){h.off("fullscreenerror",ee),h.off("fullscreenchange",F)}function F(){D(),v()}function ee(me,Le){D(),S(Le)}h.one("fullscreenchange",F),h.one("fullscreenerror",ee);var Y=h.requestFullscreenHelper_(t);Y&&(Y.then(D,D),Y.then(v,S))})}return this.requestFullscreenHelper_()},u.requestFullscreenHelper_=function(t){var h,s=this;if(this.fsApi_.prefixed||(h=this.options_.fullscreen&&this.options_.fullscreen.options||{},void 0!==t&&(h=t)),this.fsApi_.requestFullscreen){var v=this.el_[this.fsApi_.requestFullscreen](h);return v&&v.then(function(){return s.isFullscreen(!0)},function(){return s.isFullscreen(!1)}),v}this.tech_.supportsFullScreen()&&!this.options_.preferFullWindow?this.techCall_("enterFullScreen"):this.enterFullWindow()},u.exitFullscreen=function(){var t=this.options_.Promise||ae().Promise;if(t){var s=this;return new t(function(h,v){function S(){s.off("fullscreenerror",F),s.off("fullscreenchange",D)}function D(){S(),h()}function F(Y,me){S(),v(me)}s.one("fullscreenchange",D),s.one("fullscreenerror",F);var ee=s.exitFullscreenHelper_();ee&&(ee.then(S,S),ee.then(h,v))})}return this.exitFullscreenHelper_()},u.exitFullscreenHelper_=function(){var t=this;if(this.fsApi_.requestFullscreen){var s=et()[this.fsApi_.exitFullscreen]();return s&&$e(s.then(function(){return t.isFullscreen(!1)})),s}this.tech_.supportsFullScreen()&&!this.options_.preferFullWindow?this.techCall_("exitFullScreen"):this.exitFullWindow()},u.enterFullWindow=function(){this.isFullscreen(!0),this.isFullWindow=!0,this.docOrigOverflow=et().documentElement.style.overflow,fi(et(),"keydown",this.boundFullWindowOnEscKey_),et().documentElement.style.overflow="hidden",Oi(et().body,"vjs-full-window"),this.trigger("enterFullWindow")},u.fullWindowOnEscKey=function(t){We().isEventKey(t,"Esc")&&!0===this.isFullscreen()&&(this.isFullWindow?this.exitFullWindow():this.exitFullscreen())},u.exitFullWindow=function(){this.isFullscreen(!1),this.isFullWindow=!1,Gs(et(),"keydown",this.boundFullWindowOnEscKey_),et().documentElement.style.overflow=this.docOrigOverflow,Ma(et().body,"vjs-full-window"),this.trigger("exitFullWindow")},u.disablePictureInPicture=function(t){if(void 0===t)return this.techGet_("disablePictureInPicture");this.techCall_("setDisablePictureInPicture",t),this.options_.disablePictureInPicture=t,this.trigger("disablepictureinpicturechanged")},u.isInPictureInPicture=function(t){return void 0!==t?(this.isInPictureInPicture_=!!t,void this.togglePictureInPictureClass_()):!!this.isInPictureInPicture_},u.requestPictureInPicture=function(){if("pictureInPictureEnabled"in et()&&!1===this.disablePictureInPicture())return this.techGet_("requestPictureInPicture")},u.exitPictureInPicture=function(){if("pictureInPictureEnabled"in et())return et().exitPictureInPicture()},u.handleKeyDown=function(t){var S,D,s=this.options_.userActions;s&&s.hotkeys&&(D=(S=this.el_.ownerDocument.activeElement).tagName.toLowerCase(),S.isContentEditable||("input"===D?-1===["button","checkbox","hidden","radio","reset","submit"].indexOf(S.type):-1!==["textarea"].indexOf(D))||("function"==typeof s.hotkeys?s.hotkeys.call(this,t):this.handleHotkeys(t)))},u.handleHotkeys=function(t){var s=this.options_.userActions?this.options_.userActions.hotkeys:{},h=s.fullscreenKey,S=s.muteKey,D=void 0===S?function(Be){return We().isEventKey(Be,"m")}:S,F=s.playPauseKey,ee=void 0===F?function(Be){return We().isEventKey(Be,"k")||We().isEventKey(Be,"Space")}:F;if((void 0===h?function(Be){return We().isEventKey(Be,"f")}:h).call(this,t)){t.preventDefault(),t.stopPropagation();var Y=dn.getComponent("FullscreenToggle");!1!==et()[this.fsApi_.fullscreenEnabled]&&Y.prototype.handleClick.call(this,t)}else D.call(this,t)?(t.preventDefault(),t.stopPropagation(),dn.getComponent("MuteToggle").prototype.handleClick.call(this,t)):ee.call(this,t)&&(t.preventDefault(),t.stopPropagation(),dn.getComponent("PlayToggle").prototype.handleClick.call(this,t))},u.canPlayType=function(t){for(var s,h=0,v=this.options_.techOrder;h<v.length;h++){var S=v[h],D=Zr.getTech(S);if(D||(D=dn.getComponent(S)),D){if(D.isSupported()&&(s=D.canPlayType(t)))return s}else qr.error('The "'+S+'" tech is undefined. Skipped browser support check for that tech.')}return""},u.selectSource=function(t){var Y,s=this,h=this.options_.techOrder.map(function(ee){return[ee,Zr.getTech(ee)]}).filter(function(ee){var Y=ee[0],me=ee[1];return me?me.isSupported():(qr.error('The "'+Y+'" tech is undefined. Skipped browser support check for that tech.'),!1)}),v=function(Y,me,Le){var Be;return Y.some(function(Ue){return me.some(function(Gt){if(Be=Le(Ue,Gt))return!0})}),Be},F=function(Y,me){var Le=Y[0];if(Y[1].canPlaySource(me,s.options_[Le.toLowerCase()]))return{source:me,tech:Le}};return(this.options_.sourceOrder?v(t,h,(Y=F,function(me,Le){return Y(Le,me)})):v(h,t,F))||!1},u.handleSrc_=function(t,s){var h=this;if(typeof t>"u")return this.cache_.src||"";this.resetRetryOnError_&&this.resetRetryOnError_();var v=df(t);if(v.length){if(this.changingSrc_=!0,s||(this.cache_.sources=v),this.updateSourceCaches_(v[0]),Nc(this,v[0],function(F,ee){if(h.middleware_=ee,s||(h.cache_.sources=v),h.updateSourceCaches_(F),h.src_(F))return v.length>1?h.handleSrc_(v.slice(1)):(h.changingSrc_=!1,h.setTimeout(function(){this.error({code:4,message:this.options_.notSupportedMessage})},0),void h.triggerReady());!function Lc(g,i){g.forEach(function(u){return u.setTech&&u.setTech(i)})}(ee,h.tech_)}),this.options_.retryOnError&&v.length>1){var S=function(){h.error(null),h.handleSrc_(v.slice(1),!0)},D=function(){h.off("error",S)};this.one("error",S),this.one("playing",D),this.resetRetryOnError_=function(){h.off("error",S),h.off("playing",D)}}}else this.setTimeout(function(){this.error({code:4,message:this.options_.notSupportedMessage})},0)},u.src=function(t){return this.handleSrc_(t,!1)},u.src_=function(t){var s=this,h=this.selectSource([t]);return!h||(function(i,u){return ve(i)===ve(u)}(h.tech,this.techName_)?(this.ready(function(){this.tech_.constructor.prototype.hasOwnProperty("setSource")?this.techCall_("setSource",t):this.techCall_("src",t.src),this.changingSrc_=!1},!0),!1):(this.changingSrc_=!0,this.loadTech_(h.tech,h.source),this.tech_.ready(function(){s.changingSrc_=!1}),!1))},u.load=function(){this.techCall_("load")},u.reset=function(){var t=this,s=this.options_.Promise||ae().Promise;this.paused()||!s?this.doReset_():$e(this.play().then(function(){return t.doReset_()}))},u.doReset_=function(){this.tech_&&this.tech_.clearTracks("text"),this.resetCache_(),this.poster(""),this.loadTech_(this.options_.techOrder[0],null),this.techCall_("reset"),this.resetControlBarUI_(),Ra(this)&&this.trigger("playerreset")},u.resetControlBarUI_=function(){this.resetProgressBar_(),this.resetPlaybackRate_(),this.resetVolumeBar_()},u.resetProgressBar_=function(){this.currentTime(0);var t=this.controlBar||{},s=t.durationDisplay,h=t.remainingTimeDisplay;s&&s.updateContent(),h&&h.updateContent()},u.resetPlaybackRate_=function(){this.playbackRate(this.defaultPlaybackRate()),this.handleTechRateChange_()},u.resetVolumeBar_=function(){this.volume(1),this.trigger("volumechange")},u.currentSources=function(){var t=this.currentSource(),s=[];return 0!==Object.keys(t).length&&s.push(t),this.cache_.sources||s},u.currentSource=function(){return this.cache_.source||{}},u.currentSrc=function(){return this.currentSource()&&this.currentSource().src||""},u.currentType=function(){return this.currentSource()&&this.currentSource().type||""},u.preload=function(t){return void 0!==t?(this.techCall_("setPreload",t),void(this.options_.preload=t)):this.techGet_("preload")},u.autoplay=function(t){if(void 0===t)return this.options_.autoplay||!1;var s;"string"==typeof t&&/(any|play|muted)/.test(t)||!0===t&&this.options_.normalizeAutoplay?(this.options_.autoplay=t,this.manualAutoplay_("string"==typeof t?t:"play"),s=!1):this.options_.autoplay=!!t,s=typeof s>"u"?this.options_.autoplay:s,this.tech_&&this.techCall_("setAutoplay",s)},u.playsinline=function(t){return void 0!==t?(this.techCall_("setPlaysinline",t),this.options_.playsinline=t,this):this.techGet_("playsinline")},u.loop=function(t){return void 0!==t?(this.techCall_("setLoop",t),void(this.options_.loop=t)):this.techGet_("loop")},u.poster=function(t){if(void 0===t)return this.poster_;t||(t=""),t!==this.poster_&&(this.poster_=t,this.techCall_("setPoster",t),this.isPosterFromTech_=!1,this.trigger("posterchange"))},u.handleTechPosterChange_=function(){if((!this.poster_||this.options_.techCanOverridePoster)&&this.tech_&&this.tech_.poster){var t=this.tech_.poster()||"";t!==this.poster_&&(this.poster_=t,this.isPosterFromTech_=!0,this.trigger("posterchange"))}},u.controls=function(t){if(void 0===t)return!!this.controls_;this.controls_!==(t=!!t)&&(this.controls_=t,this.usingNativeControls()&&this.techCall_("setControls",t),this.controls_?(this.removeClass("vjs-controls-disabled"),this.addClass("vjs-controls-enabled"),this.trigger("controlsenabled"),this.usingNativeControls()||this.addTechControlsListeners_()):(this.removeClass("vjs-controls-enabled"),this.addClass("vjs-controls-disabled"),this.trigger("controlsdisabled"),this.usingNativeControls()||this.removeTechControlsListeners_()))},u.usingNativeControls=function(t){if(void 0===t)return!!this.usingNativeControls_;this.usingNativeControls_!==(t=!!t)&&(this.usingNativeControls_=t,this.usingNativeControls_?(this.addClass("vjs-using-native-controls"),this.trigger("usingnativecontrols")):(this.removeClass("vjs-using-native-controls"),this.trigger("usingcustomcontrols")))},u.error=function(t){var s=this;if(void 0===t)return this.error_||null;if(Pi("beforeerror").forEach(function(v){var S=v(s,t);ia(S)&&!Array.isArray(S)||"string"==typeof S||"number"==typeof S||null===S?t=S:s.log.error("please return a value that MediaError expects in beforeerror hooks")}),this.options_.suppressNotSupportedError&&t&&4===t.code){var h=function(){this.error(t)};return this.options_.suppressNotSupportedError=!1,this.any(["click","touchstart"],h),void this.one("loadstart",function(){this.off(["click","touchstart"],h)})}if(null===t)return this.error_=t,this.removeClass("vjs-error"),void(this.errorDisplay&&this.errorDisplay.close());this.error_=new z(t),this.addClass("vjs-error"),qr.error("(CODE:"+this.error_.code+" "+z.errorTypes[this.error_.code]+")",this.error_.message,this.error_),this.trigger("error"),Pi("error").forEach(function(v){return v(s,s.error_)})},u.reportUserActivity=function(t){this.userActivity_=!0},u.userActive=function(t){if(void 0===t)return this.userActive_;if((t=!!t)!==this.userActive_){if(this.userActive_=t,this.userActive_)return this.userActivity_=!0,this.removeClass("vjs-user-inactive"),this.addClass("vjs-user-active"),void this.trigger("useractive");this.tech_&&this.tech_.one("mousemove",function(s){s.stopPropagation(),s.preventDefault()}),this.userActivity_=!1,this.removeClass("vjs-user-active"),this.addClass("vjs-user-inactive"),this.trigger("userinactive")}},u.listenForUserActivity_=function(){var t,s,h,v=Ds(this,this.reportUserActivity),F=function(Le){v(),this.clearInterval(t)};this.on("mousedown",function(){v(),this.clearInterval(t),t=this.setInterval(v,250)}),this.on("mousemove",function(Le){(Le.screenX!==s||Le.screenY!==h)&&(s=Le.screenX,h=Le.screenY,v())}),this.on("mouseup",F),this.on("mouseleave",F);var Y,ee=this.getChild("controlBar");ee&&!Rn&&!za&&(ee.on("mouseenter",function(me){0!==this.player().options_.inactivityTimeout&&(this.player().cache_.inactivityTimeout=this.player().options_.inactivityTimeout),this.player().options_.inactivityTimeout=0}),ee.on("mouseleave",function(me){this.player().options_.inactivityTimeout=this.player().cache_.inactivityTimeout})),this.on("keydown",v),this.on("keyup",v),this.setInterval(function(){if(this.userActivity_){this.userActivity_=!1,this.userActive(!0),this.clearTimeout(Y);var me=this.options_.inactivityTimeout;me<=0||(Y=this.setTimeout(function(){this.userActivity_||this.userActive(!1)},me))}},250)},u.playbackRate=function(t){if(void 0===t)return this.tech_&&this.tech_.featuresPlaybackRate?this.cache_.lastPlaybackRate||this.techGet_("playbackRate"):1;this.techCall_("setPlaybackRate",t)},u.defaultPlaybackRate=function(t){return void 0!==t?this.techCall_("setDefaultPlaybackRate",t):this.tech_&&this.tech_.featuresPlaybackRate?this.techGet_("defaultPlaybackRate"):1},u.isAudio=function(t){if(void 0===t)return!!this.isAudio_;this.isAudio_=!!t},u.enableAudioOnlyUI_=function(){var t=this;this.addClass("vjs-audio-only-mode");var s=this.children(),h=this.getChild("ControlBar"),v=h&&h.currentHeight();s.forEach(function(S){S!==h&&S.el_&&!S.hasClass("vjs-hidden")&&(S.hide(),t.audioOnlyCache_.hiddenChildren.push(S))}),this.audioOnlyCache_.playerHeight=this.currentHeight(),this.height(v),this.trigger("audioonlymodechange")},u.disableAudioOnlyUI_=function(){this.removeClass("vjs-audio-only-mode"),this.audioOnlyCache_.hiddenChildren.forEach(function(t){return t.show()}),this.height(this.audioOnlyCache_.playerHeight),this.trigger("audioonlymodechange")},u.audioOnlyMode=function(t){var s=this;if("boolean"!=typeof t||t===this.audioOnlyMode_)return this.audioOnlyMode_;this.audioOnlyMode_=t;var h=this.options_.Promise||ae().Promise;if(h){if(t){var v=[];return this.isInPictureInPicture()&&v.push(this.exitPictureInPicture()),this.isFullscreen()&&v.push(this.exitFullscreen()),this.audioPosterMode()&&v.push(this.audioPosterMode(!1)),h.all(v).then(function(){return s.enableAudioOnlyUI_()})}return h.resolve().then(function(){return s.disableAudioOnlyUI_()})}t?(this.isInPictureInPicture()&&this.exitPictureInPicture(),this.isFullscreen()&&this.exitFullscreen(),this.enableAudioOnlyUI_()):this.disableAudioOnlyUI_()},u.enablePosterModeUI_=function(){(this.tech_&&this.tech_).hide(),this.addClass("vjs-audio-poster-mode"),this.trigger("audiopostermodechange")},u.disablePosterModeUI_=function(){(this.tech_&&this.tech_).show(),this.removeClass("vjs-audio-poster-mode"),this.trigger("audiopostermodechange")},u.audioPosterMode=function(t){var s=this;if("boolean"!=typeof t||t===this.audioPosterMode_)return this.audioPosterMode_;this.audioPosterMode_=t;var h=this.options_.Promise||ae().Promise;return h?t?this.audioOnlyMode()?this.audioOnlyMode(!1).then(function(){s.enablePosterModeUI_()}):h.resolve().then(function(){s.enablePosterModeUI_()}):h.resolve().then(function(){s.disablePosterModeUI_()}):t?(this.audioOnlyMode()&&this.audioOnlyMode(!1),void this.enablePosterModeUI_()):void this.disablePosterModeUI_()},u.addTextTrack=function(t,s,h){if(this.tech_)return this.tech_.addTextTrack(t,s,h)},u.addRemoteTextTrack=function(t,s){if(this.tech_)return this.tech_.addRemoteTextTrack(t,s)},u.removeRemoteTextTrack=function(t){void 0===t&&(t={});var h=t.track;if(h||(h=t),this.tech_)return this.tech_.removeRemoteTextTrack(h)},u.getVideoPlaybackQuality=function(){return this.techGet_("getVideoPlaybackQuality")},u.videoWidth=function(){return this.tech_&&this.tech_.videoWidth&&this.tech_.videoWidth()||0},u.videoHeight=function(){return this.tech_&&this.tech_.videoHeight&&this.tech_.videoHeight()||0},u.language=function(t){if(void 0===t)return this.language_;this.language_!==String(t).toLowerCase()&&(this.language_=String(t).toLowerCase(),Ra(this)&&this.trigger("languagechange"))},u.languages=function(){return Wt(i.prototype.options_.languages,this.languages_)},u.toJSON=function(){var t=Wt(this.options_),s=t.tracks;t.tracks=[];for(var h=0;h<s.length;h++){var v=s[h];(v=Wt(v)).player=void 0,t.tracks[h]=v}return t},u.createModal=function(t,s){var h=this;(s=s||{}).content=t||"";var v=new hr(this,s);return this.addChild(v),v.on("dispose",function(){h.removeChild(v)}),v.open(),v},u.updateCurrentBreakpoint_=function(){if(this.responsive())for(var t=this.currentBreakpoint(),s=this.currentWidth(),h=0;h<Qv.length;h++){var v=Qv[h];if(s<=this.breakpoints_[v]){if(t===v)return;t&&this.removeClass(Cf[t]),this.addClass(Cf[v]),this.breakpoint_=v;break}}},u.removeCurrentBreakpoint_=function(){var t=this.currentBreakpointClass();this.breakpoint_="",t&&this.removeClass(t)},u.breakpoints=function(t){return void 0===t||(this.breakpoint_="",this.breakpoints_=Ls({},_c,t),this.updateCurrentBreakpoint_()),Ls(this.breakpoints_)},u.responsive=function(t){return void 0===t?this.responsive_:(t=Boolean(t))!==this.responsive_?(this.responsive_=t,t?(this.on("playerresize",this.boundUpdateCurrentBreakpoint_),this.updateCurrentBreakpoint_()):(this.off("playerresize",this.boundUpdateCurrentBreakpoint_),this.removeCurrentBreakpoint_()),t):void 0},u.currentBreakpoint=function(){return this.breakpoint_},u.currentBreakpointClass=function(){return Cf[this.breakpoint_]||""},u.loadMedia=function(t,s){var h=this;if(t&&"object"==typeof t){this.reset(),this.cache_.media=Wt(t);var v=this.cache_.media,D=v.poster,F=v.src,ee=v.textTracks;!v.artwork&&D&&(this.cache_.media.artwork=[{src:D,type:ll(D)}]),F&&this.src(F),D&&this.poster(D),Array.isArray(ee)&&ee.forEach(function(Y){return h.addRemoteTextTrack(Y,!1)}),this.ready(s)}},u.getMedia=function(){if(!this.cache_.media){var t=this.poster(),v={src:this.currentSources(),textTracks:Array.prototype.map.call(this.remoteTextTracks(),function(S){return{kind:S.kind,label:S.label,language:S.language,src:S.src}})};return t&&(v.poster=t,v.artwork=[{src:v.poster,type:ll(v.poster)}]),v}return Wt(this.cache_.media)},i.getTagSettings=function(t){var s={sources:[],tracks:[]},h=Oa(t),v=h["data-setup"];if(un(t,"vjs-fill")&&(h.fill=!0),un(t,"vjs-fluid")&&(h.fluid=!0),null!==v){var S=Mt()(v||"{}"),D=S[0],F=S[1];D&&qr.error(D),Ls(h,F)}if(Ls(s,h),t.hasChildNodes())for(var ee=t.childNodes,Y=0,me=ee.length;Y<me;Y++){var Le=ee[Y],Be=Le.nodeName.toLowerCase();"source"===Be?s.sources.push(Oa(Le)):"track"===Be&&s.tracks.push(Oa(Le))}return s},u.flexNotSupported_=function(){var t=et().createElement("i");return!("flexBasis"in t.style||"webkitFlexBasis"in t.style||"mozFlexBasis"in t.style||"msFlexBasis"in t.style||"msFlexOrder"in t.style)},u.debug=function(t){if(void 0===t)return this.debugEnabled_;t?(this.trigger("debugon"),this.previousLogLevel_=this.log.level,this.log.level("debug"),this.debugEnabled_=!0):(this.trigger("debugoff"),this.log.level(this.previousLogLevel_),this.previousLogLevel_=void 0,this.debugEnabled_=!1)},u.playbackRates=function(t){if(void 0===t)return this.cache_.playbackRates;Array.isArray(t)&&t.every(function(s){return"number"==typeof s})&&(this.cache_.playbackRates=t,this.trigger("playbackrateschange"))},i}(dn);Na.names.forEach(function(g){var i=Na[g];oa.prototype[i.getterName]=function(){return this.tech_?this.tech_[i.getterName]():(this[i.privateName]=this[i.privateName]||new i.ListClass,this[i.privateName])}}),oa.prototype.crossorigin=oa.prototype.crossOrigin,oa.players={};var Sd=ae().navigator;oa.prototype.options_={techOrder:Zr.defaultTechOrder_,html5:{},inactivityTimeout:2e3,playbackRates:[],liveui:!1,children:["mediaLoader","posterImage","textTrackDisplay","loadingSpinner","bigPlayButton","liveTracker","controlBar","errorDisplay","textTrackSettings","resizeManager"],language:Sd&&(Sd.languages&&Sd.languages[0]||Sd.userLanguage||Sd.language)||"en",languages:{},notSupportedMessage:"No compatible source was found for this media.",normalizeAutoplay:!1,fullscreen:{options:{navigationUI:"hide"}},breakpoints:{},responsive:!1,audioOnlyMode:!1,audioPosterMode:!1},["ended","seeking","seekable","networkState","readyState"].forEach(function(g){oa.prototype[g]=function(){return this.techGet_(g)}}),gh.forEach(function(g){oa.prototype["handleTech"+ve(g)+"_"]=function(){return this.trigger(g)}}),dn.registerComponent("Player",oa);var gp="plugin",mh="activePlugins_",Zc={},mp=function(i){return Zc.hasOwnProperty(i)},If=function(i){return mp(i)?Zc[i]:void 0},Xv=function(i,u){i[mh]=i[mh]||{},i[mh][u]=!0},No=function(i,u,l){var t=(l?"before":"")+"pluginsetup";i.trigger(t,u),i.trigger(t+":"+u.name,u)},Jv=function(i,u){return u.prototype.name=i,function(){No(this,{name:i,plugin:u,instance:null},!0);for(var l=arguments.length,t=new Array(l),s=0;s<l;s++)t[s]=arguments[s];var h=st(u,[this].concat(t));return this[i]=function(){return h},No(this,h.getEventHash()),h}},Ll=function(){function g(u){if(this.constructor===g)throw new Error("Plugin must be sub-classed; not directly instantiated.");this.player=u,this.log||(this.log=this.player.log.createLogger(this.name)),C(this),delete this.trigger,Q(this,this.constructor.defaultState),Xv(u,this.name),this.dispose=this.dispose.bind(this),u.on("dispose",this.dispose)}var i=g.prototype;return i.version=function(){return this.constructor.VERSION},i.getEventHash=function(l){return void 0===l&&(l={}),l.name=this.name,l.plugin=this.constructor,l.instance=this,l},i.trigger=function(l,t){return void 0===t&&(t={}),Ya(this.eventBusEl_,l,this.getEventHash(t))},i.handleStateChanged=function(l){},i.dispose=function(){var l=this.name,t=this.player;this.trigger("dispose"),this.off(),t.off("dispose",this.dispose),t[mh][l]=!1,this.player=this.state=null,t[l]=Jv(l,Zc[l])},g.isBasic=function(l){var t="string"==typeof l?If(l):l;return"function"==typeof t&&!g.prototype.isPrototypeOf(t.prototype)},g.registerPlugin=function(l,t){if("string"!=typeof l)throw new Error('Illegal plugin name, "'+l+'", must be a string, was '+typeof l+".");if(mp(l))qr.warn('A plugin named "'+l+'" already exists. You may want to avoid re-registering plugins!');else if(oa.prototype.hasOwnProperty(l))throw new Error('Illegal plugin name, "'+l+'", cannot share a name with an existing player method!');if("function"!=typeof t)throw new Error('Illegal plugin for "'+l+'", must be a function, was '+typeof t+".");return Zc[l]=t,l!==gp&&(oa.prototype[l]=g.isBasic(t)?function(i,u){var l=function(){No(this,{name:i,plugin:u,instance:null},!0);var s=u.apply(this,arguments);return Xv(this,i),No(this,{name:i,plugin:u,instance:s}),s};return Object.keys(u).forEach(function(t){l[t]=u[t]}),l}(l,t):Jv(l,t)),t},g.deregisterPlugin=function(l){if(l===gp)throw new Error("Cannot de-register base plugin.");mp(l)&&(delete Zc[l],delete oa.prototype[l])},g.getPlugins=function(l){var t;return void 0===l&&(l=Object.keys(Zc)),l.forEach(function(s){var h=If(s);h&&((t=t||{})[s]=h)}),t},g.getPluginVersion=function(l){var t=If(l);return t&&t.VERSION||""},g}();Ll.getPlugin=If,Ll.BASE_PLUGIN_NAME=gp,Ll.registerPlugin(gp,Ll),oa.prototype.usingPlugin=function(g){return!!this[mh]&&!0===this[mh][g]},oa.prototype.hasPlugin=function(g){return!!mp(g)};var Lm=!1,ey=function(i){return 0===i.indexOf("#")?i.slice(1):i};function At(g,i,u){var l=At.getPlayer(g);if(l)return i&&qr.warn('Player "'+g+'" is already initialised. Options will not be applied.'),u&&l.ready(u),l;var t="string"==typeof g?qa("#"+ey(g)):g;if(!Mi(t))throw new TypeError("The element or ID supplied is not valid. (videojs)");(!t.ownerDocument.defaultView||!t.ownerDocument.body.contains(t))&&qr.warn("The element supplied is not included in the DOM"),!0===(i=i||{}).restoreEl&&(i.restoreEl=(t.parentNode&&t.parentNode.hasAttribute("data-vjs-player")?t.parentNode:t).cloneNode(!0)),Pi("beforesetup").forEach(function(h){var v=h(t,Wt(i));ia(v)&&!Array.isArray(v)?i=Wt(i,v):qr.error("please return an object in beforesetup hooks")});var s=dn.getComponent("Player");return l=new s(t,i,u),Pi("setup").forEach(function(h){return h(l)}),l}if(At.hooks_=Wr,At.hooks=Pi,At.hook=function(i,u){Pi(i,u)},At.hookOnce=function(i,u){Pi(i,[].concat(u).map(function(l){return function s(){return Gi(i,s),l.apply(void 0,arguments)}}))},At.removeHook=Gi,!0!==ae().VIDEOJS_NO_DYNAMIC_STYLE&&gr()){var Eg=qa(".vjs-styles-defaults");if(!Eg){Eg=qu("vjs-styles-defaults");var Sg=qa("head");Sg&&Sg.insertBefore(Eg,Sg.firstChild),ul(Eg,"\n      .video-js {\n        width: 300px;\n        height: 150px;\n      }\n\n      .vjs-fluid:not(.vjs-audio-only-mode) {\n        padding-top: 56.25%\n      }\n    ")}}Is(1,At),At.VERSION=ts,At.options=oa.prototype.options_,At.getPlayers=function(){return oa.players},At.getPlayer=function(g){var u,i=oa.players;if("string"==typeof g){var l=ey(g),t=i[l];if(t)return t;u=qa("#"+l)}else u=g;if(Mi(u)){var h=u.player,v=u.playerId;if(h||i[v])return h||i[v]}},At.getAllPlayers=function(){return Object.keys(oa.players).map(function(g){return oa.players[g]}).filter(Boolean)},At.players=oa.players,At.getComponent=dn.getComponent,At.registerComponent=function(g,i){Zr.isTech(i)&&qr.warn("The "+g+" tech was registered as a component. It should instead be registered using videojs.registerTech(name, tech)"),dn.registerComponent.call(dn,g,i)},At.getTech=Zr.getTech,At.registerTech=Zr.registerTech,At.use=function gg(g,i){fo[g]=fo[g]||[],fo[g].push(i)},Object.defineProperty(At,"middleware",{value:{},writeable:!1,enumerable:!0}),Object.defineProperty(At.middleware,"TERMINATOR",{value:js,writeable:!1,enumerable:!0}),At.browser=Ii,At.TOUCH_ENABLED=Qe,At.extend=function(i,u){void 0===u&&(u={}),Lm||(qr.warn("videojs.extend is deprecated as of Video.js 7.22.0 and will be removed in Video.js 8.0.0"),Lm=!0);var l=function(){i.apply(this,arguments)},t={};for(var s in"object"==typeof u?(u.constructor!==Object.prototype.constructor&&(l=u.constructor),t=u):"function"==typeof u&&(l=u),function xt(g,i){if("function"!=typeof i&&null!==i)throw new TypeError("Super expression must either be null or a function");g.prototype=Object.create(i&&i.prototype,{constructor:{value:g,writable:!0,configurable:!0}}),Object.defineProperty(g,"prototype",{writable:!1}),i&&Fe(g,i)}(l,i),i&&(l.super_=i),t)t.hasOwnProperty(s)&&(l.prototype[s]=t[s]);return l},At.mergeOptions=Wt,At.bind=Ds,At.registerPlugin=Ll.registerPlugin,At.deregisterPlugin=Ll.deregisterPlugin,At.plugin=function(g,i){return qr.warn("videojs.plugin() is deprecated; use videojs.registerPlugin() instead"),Ll.registerPlugin(g,i)},At.getPlugins=Ll.getPlugins,At.getPlugin=Ll.getPlugin,At.getPluginVersion=Ll.getPluginVersion,At.addLanguage=function(g,i){var u;return g=(""+g).toLowerCase(),(At.options.languages=Wt(At.options.languages,((u={})[g]=i,u)))[g]},At.log=qr,At.createLogger=Ga,At.createTimeRange=At.createTimeRanges=Lu,At.formatTime=dl,At.setFormatTime=function lp(g){cl=g},At.resetFormatTime=function fc(){cl=Xu},At.parseUrl=ih,At.isCrossOrigin=rf,At.EventTarget=oo,At.on=fi,At.one=cc,At.off=Gs,At.trigger=Ya,At.xhr=J(),At.TextTrack=kc,At.AudioTrack=pg,At.VideoTrack=Om,["isEl","isTextNode","createEl","hasClass","addClass","removeClass","toggleClass","setAttributes","getAttributes","emptyEl","appendContent","insertContent"].forEach(function(g){At[g]=function(){return qr.warn("videojs."+g+"() is deprecated; use videojs.dom."+g+"() instead"),Mn[g].apply(null,arguments)}}),At.computedStyle=so,At.dom=Mn,At.url=md,At.defineLazyProperty=vc,At.addLanguage("en",{"Non-Fullscreen":"Exit Fullscreen"});var Wl=lt,Fm=function(i,u,l){return i&&l&&l.responseURL&&u!==l.responseURL?l.responseURL:u},Iu=function(i){return At.log.debug?At.log.debug.bind(At,"VHS:",i+" >"):function(){}},ql=1/30,Kl=.1,vp=function(i,u){var t,l=[];if(i&&i.length)for(t=0;t<i.length;t++)u(i.start(t),i.end(t))&&l.push([i.start(t),i.end(t)]);return At.createTimeRanges(l)},Lo=function(i,u){return vp(i,function(l,t){return l-Kl<=u&&t+Kl>=u})},yp=function(i,u){return vp(i,function(l){return l-ql>=u})},Tc=function(i){var u=[];if(!i||!i.length)return"";for(var l=0;l<i.length;l++)u.push(i.start(l)+" => "+i.end(l));return u.join(", ")},xf=function(i){for(var u=[],l=0;l<i.length;l++)u.push({start:i.start(l),end:i.end(l)});return u},_p=function(i){if(i&&i.length&&i.end)return i.end(i.length-1)},Zl=function(i,u){var l=0;if(!i||!i.length)return l;for(var t=0;t<i.length;t++){var s=i.start(t),h=i.end(t);if(!(u>h)){if(u>s&&u<=h){l+=h-u;continue}l+=h-s}}return l},Yc=At.createTimeRange,bc=function(i,u){if(!u.preload)return u.duration;var l=0;return(u.parts||[]).forEach(function(t){l+=t.duration}),(u.preloadHints||[]).forEach(function(t){"PART"===t.type&&(l+=i.partTargetDuration)}),l},Tl=function(i){return(i.segments||[]).reduce(function(u,l,t){return l.parts?l.parts.forEach(function(s,h){u.push({duration:s.duration,segmentIndex:t,partIndex:h,part:s,segment:l})}):u.push({duration:l.duration,segmentIndex:t,partIndex:null,segment:l,part:null}),u},[])},Um=function(i){var u=i.segments&&i.segments.length&&i.segments[i.segments.length-1];return u&&u.parts||[]},Df=function(i){var u=i.preloadSegment;if(u){var l=u.parts;return(u.preloadHints||[]).reduce(function(h,v){return h+("PART"===v.type?1:0)},0)+(l&&l.length?l.length:0)}},vh=function(i,u){if(u.endList)return 0;if(i&&i.suggestedPresentationDelay)return i.suggestedPresentationDelay;var l=Um(u).length>0;return l&&u.serverControl&&u.serverControl.partHoldBack?u.serverControl.partHoldBack:l&&u.partTargetDuration?3*u.partTargetDuration:u.serverControl&&u.serverControl.holdBack?u.serverControl.holdBack:u.targetDuration?3*u.targetDuration:0},Tp=function(i,u,l){if(typeof u>"u"&&(u=i.mediaSequence+i.segments.length),u<i.mediaSequence)return 0;var t=function(i,u){var l=0,t=u-i.mediaSequence,s=i.segments[t];if(s){if(typeof s.start<"u")return{result:s.start,precise:!0};if(typeof s.end<"u")return{result:s.end-s.duration,precise:!0}}for(;t--;){if(typeof(s=i.segments[t]).end<"u")return{result:l+s.end,precise:!0};if(l+=bc(i,s),typeof s.start<"u")return{result:l+s.start,precise:!0}}return{result:l,precise:!1}}(i,u);if(t.precise)return t.result;var s=function(i,u){for(var t,l=0,s=u-i.mediaSequence;s<i.segments.length;s++){if(typeof(t=i.segments[s]).start<"u")return{result:t.start-l,precise:!0};if(l+=bc(i,t),typeof t.end<"u")return{result:t.end-l,precise:!0}}return{result:-1,precise:!1}}(i,u);return s.precise?s.result:t.result+l},Qc=function(i,u,l){if(!i)return 0;if("number"!=typeof l&&(l=0),typeof u>"u"){if(i.totalDuration)return i.totalDuration;if(!i.endList)return ae()[1/0]}return Tp(i,u,l)},yh=function(i){var u=i.defaultDuration,l=i.durationList,t=i.startIndex,s=i.endIndex,h=0;if(t>s){var v=[s,t];t=v[0],s=v[1]}if(t<0){for(var S=t;S<Math.min(0,s);S++)h+=u;t=0}for(var D=t;D<s;D++)h+=l[D].duration;return h},_h=function(i,u,l,t){if(!i||!i.segments)return null;if(i.endList)return Qc(i);if(null===u)return null;var s=Tp(i,i.mediaSequence+i.segments.length,u=u||0);return l&&(s-=t="number"==typeof t?t:vh(null,i)),Math.max(0,s)},Bm=function(i){return i.excludeUntil&&i.excludeUntil>Date.now()},Xc=function(i){return i.excludeUntil&&i.excludeUntil===1/0},Dg=function(i){var u=Bm(i);return!i.disabled&&!u},wd=function(i,u){return u.attributes&&u.attributes[i]},Yl=function(i,u){if(1===i.playlists.length)return!0;var l=u.attributes.BANDWIDTH||Number.MAX_VALUE;return 0===i.playlists.filter(function(t){return!!Dg(t)&&(t.attributes.BANDWIDTH||0)<l}).length},Ag=function(i,u){return!(!i&&!u||!i&&u||i&&!u||!(i===u||i.id&&u.id&&i.id===u.id||i.resolvedUri&&u.resolvedUri&&i.resolvedUri===u.resolvedUri||i.uri&&u.uri&&i.uri===u.uri))},Vm=function(i,u){var l=i&&i.mediaGroups&&i.mediaGroups.AUDIO||{},t=!1;for(var s in l){for(var h in l[s])if(t=u(l[s][h]))break;if(t)break}return!!t},Ep=function(i){if(!i||!i.playlists||!i.playlists.length)return Vm(i,function(h){return h.playlists&&h.playlists.length||h.uri});for(var l=function(v){var S=i.playlists[v],D=S.attributes&&S.attributes.CODECS;return D&&D.split(",").every(function(ee){return pr(ee)})||Vm(i,function(ee){return Ag(S,ee)})?"continue":{v:!1}},t=0;t<i.playlists.length;t++){var s=l(t);if("continue"!==s&&"object"==typeof s)return s.v}return!0},el={liveEdgeDelay:vh,duration:Qc,seekable:function(i,u,l){var s=u||0,h=_h(i,u,!0,l);return null===h?Yc():Yc(s,h)},getMediaInfoForTime:function(i){for(var u=i.playlist,l=i.currentTime,t=i.startingSegmentIndex,s=i.startingPartIndex,h=i.startTime,v=i.experimentalExactManifestTimings,S=l-h,D=Tl(u),F=0,ee=0;ee<D.length;ee++){var Y=D[ee];if(t===Y.segmentIndex&&("number"!=typeof s||"number"!=typeof Y.partIndex||s===Y.partIndex)){F=ee;break}}if(S<0){if(F>0)for(var me=F-1;me>=0;me--){var Le=D[me];if(S+=Le.duration,v){if(S<0)continue}else if(S+ql<=0)continue;return{partIndex:Le.partIndex,segmentIndex:Le.segmentIndex,startTime:h-yh({defaultDuration:u.targetDuration,durationList:D,startIndex:F,endIndex:me})}}return{partIndex:D[0]&&D[0].partIndex||null,segmentIndex:D[0]&&D[0].segmentIndex||0,startTime:l}}if(F<0){for(var Be=F;Be<0;Be++)if((S-=u.targetDuration)<0)return{partIndex:D[0]&&D[0].partIndex||null,segmentIndex:D[0]&&D[0].segmentIndex||0,startTime:l};F=0}for(var Ue=F;Ue<D.length;Ue++){var Gt=D[Ue];if(S-=Gt.duration,v){if(S>0)continue}else if(S-ql>=0)continue;return{partIndex:Gt.partIndex,segmentIndex:Gt.segmentIndex,startTime:h+yh({defaultDuration:u.targetDuration,durationList:D,startIndex:F,endIndex:Ue})}}return{segmentIndex:D[D.length-1].segmentIndex,partIndex:D[D.length-1].partIndex,startTime:l}},isEnabled:Dg,isDisabled:function(i){return i.disabled},isBlacklisted:Bm,isIncompatible:Xc,playlistEnd:_h,isAes:function(i){for(var u=0;u<i.segments.length;u++)if(i.segments[u].key)return!0;return!1},hasAttribute:wd,estimateSegmentRequestTime:function(i,u,l,t){return void 0===t&&(t=0),wd("BANDWIDTH",l)?(i*l.attributes.BANDWIDTH-8*t)/u:NaN},isLowestEnabledRendition:Yl,isAudioOnly:Ep,playlistMatch:Ag,segmentDurationWithParts:bc},Cd=At.log,Sp=function(i,u){return i+"-"+u},Eh=function(i,u,l){return"placeholder-uri-"+i+"-"+u+"-"+l},Id=function(i,u){i.mediaGroups&&["AUDIO","SUBTITLES"].forEach(function(l){if(i.mediaGroups[l])for(var t in i.mediaGroups[l])for(var s in i.mediaGroups[l][t])u(i.mediaGroups[l][t][s],l,t,s)})},Pg=function(i){var u=i.playlist,l=i.uri;u.id=i.id,u.playlistErrors_=0,l&&(u.uri=l),u.attributes=u.attributes||{}},Af=function(i,u,l){void 0===l&&(l=Eh),i.uri=u;for(var t=0;t<i.playlists.length;t++)i.playlists[t].uri||(i.playlists[t].uri="placeholder-uri-"+t);var h=Ep(i);Id(i,function(v,S,D,F){if(!v.playlists||!v.playlists.length){if(h&&"AUDIO"===S&&!v.uri)for(var ee=0;ee<i.playlists.length;ee++){var Y=i.playlists[ee];if(Y.attributes&&Y.attributes.AUDIO&&Y.attributes.AUDIO===D)return}v.playlists=[at({},v)]}v.playlists.forEach(function(me,Le){var Be=l(S,D,F,me),Ue=Sp(Le,Be);me.uri?me.resolvedUri=me.resolvedUri||Wl(i.uri,me.uri):(me.uri=0===Le?Be:Ue,me.resolvedUri=me.uri),me.id=me.id||Ue,me.attributes=me.attributes||{},i.playlists[me.id]=me,i.playlists[me.uri]=me})}),function(i){for(var u=i.playlists.length;u--;){var l=i.playlists[u];Pg({playlist:l,id:Sp(u,l.uri)}),l.resolvedUri=Wl(i.uri,l.uri),i.playlists[l.id]=l,i.playlists[l.uri]=l,l.attributes.BANDWIDTH||Cd.warn("Invalid playlist STREAM-INF detected. Missing BANDWIDTH attribute.")}}(i),function(i){Id(i,function(u){u.uri&&(u.resolvedUri=Wl(i.uri,u.uri))})}(i)},wp=At.mergeOptions,kg=function(i,u){if(!i)return u;var l=wp(i,u);if(i.preloadHints&&!u.preloadHints&&delete l.preloadHints,i.parts&&!u.parts)delete l.parts;else if(i.parts&&u.parts)for(var t=0;t<u.parts.length;t++)i.parts&&i.parts[t]&&(l.parts[t]=wp(i.parts[t],u.parts[t]));return!i.skipped&&u.skipped&&(l.skipped=!1),i.preload&&!u.preload&&(l.preload=!1),l},Ih=function(i,u){!i.resolvedUri&&i.uri&&(i.resolvedUri=Wl(u,i.uri)),i.key&&!i.key.resolvedUri&&(i.key.resolvedUri=Wl(u,i.key.uri)),i.map&&!i.map.resolvedUri&&(i.map.resolvedUri=Wl(u,i.map.uri)),i.map&&i.map.key&&!i.map.key.resolvedUri&&(i.map.key.resolvedUri=Wl(u,i.map.key.uri)),i.parts&&i.parts.length&&i.parts.forEach(function(l){l.resolvedUri||(l.resolvedUri=Wl(u,l.uri))}),i.preloadHints&&i.preloadHints.length&&i.preloadHints.forEach(function(l){l.resolvedUri||(l.resolvedUri=Wl(u,l.uri))})},Gm=function(i){var u=i.segments||[],l=i.preloadSegment;if(l&&l.parts&&l.parts.length){if(l.preloadHints)for(var t=0;t<l.preloadHints.length;t++)if("MAP"===l.preloadHints[t].type)return u;l.duration=i.targetDuration,l.preload=!0,u.push(l)}return u},ju=function(i,u){return i===u||i.segments&&u.segments&&i.segments.length===u.segments.length&&i.endList===u.endList&&i.mediaSequence===u.mediaSequence&&i.preloadSegment===u.preloadSegment},Rg=function(i,u,l){void 0===l&&(l=ju);var t=wp(i,{}),s=t.playlists[u.id];if(!s||l(s,u))return null;u.segments=Gm(u);var h=wp(s,u);if(h.preloadSegment&&!u.preloadSegment&&delete h.preloadSegment,s.segments){if(u.skip){u.segments=u.segments||[];for(var v=0;v<u.skip.skippedSegments;v++)u.segments.unshift({skipped:!0})}h.segments=function(i,u,l){var t=i.slice(),s=u.slice();l=l||0;for(var v,h=[],S=0;S<s.length;S++){var D=t[S+l],F=s[S];D?(v=D.map||v,h.push(kg(D,F))):(v&&!F.map&&(F.map=v),h.push(F))}return h}(s.segments,u.segments,u.mediaSequence-s.mediaSequence)}h.segments.forEach(function(D){Ih(D,h.resolvedUri)});for(var S=0;S<t.playlists.length;S++)t.playlists[S].id===u.id&&(t.playlists[S]=h);return t.playlists[u.id]=h,t.playlists[u.uri]=h,Id(i,function(D,F,ee,Y){if(D.playlists)for(var me=0;me<D.playlists.length;me++)u.id===D.playlists[me].id&&(D.playlists[me]=h)}),t},Pf=function(i,u){var l=i.segments||[],t=l[l.length-1],s=t&&t.parts&&t.parts[t.parts.length-1],h=s&&s.duration||t&&t.duration;return u&&h?1e3*h:500*(i.partTargetDuration||i.targetDuration||10)},Jc=function(g){function i(l,t,s){var h;if(void 0===s&&(s={}),h=g.call(this)||this,!l)throw new Error("A non-empty playlist URL or object is required");h.logger_=Iu("PlaylistLoader");var S=s.withCredentials,D=void 0!==S&&S,F=s.handleManifestRedirects,ee=void 0!==F&&F;h.src=l,h.vhs_=t,h.withCredentials=D,h.handleManifestRedirects=ee;var Y=t.options_;return h.customTagParsers=Y&&Y.customTagParsers||[],h.customTagMappers=Y&&Y.customTagMappers||[],h.experimentalLLHLS=Y&&Y.experimentalLLHLS||!1,At.browser.IE_VERSION&&(h.experimentalLLHLS=!1),h.state="HAVE_NOTHING",h.handleMediaupdatetimeout_=h.handleMediaupdatetimeout_.bind(dt(h)),h.on("mediaupdatetimeout",h.handleMediaupdatetimeout_),h}Me(i,g);var u=i.prototype;return u.handleMediaupdatetimeout_=function(){var t=this;if("HAVE_METADATA"===this.state){var s=this.media(),h=Wl(this.master.uri,s.uri);this.experimentalLLHLS&&(h=function(i,u){if(u.endList||!u.serverControl)return i;var l={};if(u.serverControl.canBlockReload){var t=u.preloadSegment,s=u.mediaSequence+u.segments.length;if(t){var h=t.parts||[],v=Df(u)-1;v>-1&&v!==h.length-1&&(l._HLS_part=v),(v>-1||h.length)&&s--}l._HLS_msn=s}if(u.serverControl&&u.serverControl.canSkipUntil&&(l._HLS_skip=u.serverControl.canSkipDateranges?"v2":"YES"),Object.keys(l).length){var S=new(ae().URL)(i);["_HLS_skip","_HLS_msn","_HLS_part"].forEach(function(D){l.hasOwnProperty(D)&&S.searchParams.set(D,l[D])}),i=S.toString()}return i}(h,s)),this.state="HAVE_CURRENT_METADATA",this.request=this.vhs_.xhr({uri:h,withCredentials:this.withCredentials},function(v,S){if(t.request){if(v)return t.playlistRequestError(t.request,t.media(),"HAVE_METADATA");t.haveMetadata({playlistString:t.request.responseText,url:t.media().uri,id:t.media().id})}})}},u.playlistRequestError=function(t,s,h){var v=s.uri,S=s.id;this.request=null,h&&(this.state=h),this.error={playlist:this.master.playlists[S],status:t.status,message:"HLS playlist request error at URL: "+v+".",responseText:t.responseText,code:t.status>=500?4:2},this.trigger("error")},u.parseManifest_=function(t){var s=this,h=t.url;return function(i){var u=i.onwarn,l=i.oninfo,t=i.manifestString,s=i.customTagParsers,h=void 0===s?[]:s,v=i.customTagMappers,S=void 0===v?[]:v,D=i.experimentalLLHLS,F=new mr;u&&F.on("warn",u),l&&F.on("info",l),h.forEach(function(Be){return F.addParser(Be)}),S.forEach(function(Be){return F.addTagMapper(Be)}),F.push(t),F.end();var ee=F.manifest;if(D||(["preloadSegment","skip","serverControl","renditionReports","partInf","partTargetDuration"].forEach(function(Be){ee.hasOwnProperty(Be)&&delete ee[Be]}),ee.segments&&ee.segments.forEach(function(Be){["parts","preloadHints"].forEach(function(Ue){Be.hasOwnProperty(Ue)&&delete Be[Ue]})})),!ee.targetDuration){var Y=10;ee.segments&&ee.segments.length&&(Y=ee.segments.reduce(function(Be,Ue){return Math.max(Be,Ue.duration)},0)),u&&u("manifest has no targetDuration defaulting to "+Y),ee.targetDuration=Y}var me=Um(ee);if(me.length&&!ee.partTargetDuration){var Le=me.reduce(function(Be,Ue){return Math.max(Be,Ue.duration)},0);u&&(u("manifest has no partTargetDuration defaulting to "+Le),Cd.error("LL-HLS manifest has parts but lacks required #EXT-X-PART-INF:PART-TARGET value. See https://datatracker.ietf.org/doc/html/draft-pantos-hls-rfc8216bis-09#section-4.4.3.7. Playback is not guaranteed.")),ee.partTargetDuration=Le}return ee}({onwarn:function(D){return s.logger_("m3u8-parser warn for "+h+": "+D.message)},oninfo:function(D){return s.logger_("m3u8-parser info for "+h+": "+D.message)},manifestString:t.manifestString,customTagParsers:this.customTagParsers,customTagMappers:this.customTagMappers,experimentalLLHLS:this.experimentalLLHLS})},u.haveMetadata=function(t){var s=t.playlistString,h=t.playlistObject,v=t.url,S=t.id;this.request=null,this.state="HAVE_METADATA";var D=h||this.parseManifest_({url:v,manifestString:s});D.lastRequest=Date.now(),Pg({playlist:D,uri:v,id:S});var F=Rg(this.master,D);this.targetDuration=D.partTargetDuration||D.targetDuration,this.pendingMedia_=null,F?(this.master=F,this.media_=this.master.playlists[S]):this.trigger("playlistunchanged"),this.updateMediaUpdateTimeout_(Pf(this.media(),!!F)),this.trigger("loadedplaylist")},u.dispose=function(){this.trigger("dispose"),this.stopRequest(),ae().clearTimeout(this.mediaUpdateTimeout),ae().clearTimeout(this.finalRenditionTimeout),this.off()},u.stopRequest=function(){if(this.request){var t=this.request;this.request=null,t.onreadystatechange=null,t.abort()}},u.media=function(t,s){var h=this;if(!t)return this.media_;if("HAVE_NOTHING"===this.state)throw new Error("Cannot switch media playlist from "+this.state);if("string"==typeof t){if(!this.master.playlists[t])throw new Error("Unknown playlist URI: "+t);t=this.master.playlists[t]}if(ae().clearTimeout(this.finalRenditionTimeout),s){var v=(t.partTargetDuration||t.targetDuration)/2*1e3||5e3;this.finalRenditionTimeout=ae().setTimeout(this.media.bind(this,t,!1),v)}else{var S=this.state,D=!this.media_||t.id!==this.media_.id,F=this.master.playlists[t.id];if(F&&F.endList||t.endList&&t.segments.length)return this.request&&(this.request.onreadystatechange=null,this.request.abort(),this.request=null),this.state="HAVE_METADATA",this.media_=t,void(D&&(this.trigger("mediachanging"),this.trigger("HAVE_MASTER"===S?"loadedmetadata":"mediachange")));if(this.updateMediaUpdateTimeout_(Pf(t,!0)),D){if(this.state="SWITCHING_MEDIA",this.request){if(t.resolvedUri===this.request.url)return;this.request.onreadystatechange=null,this.request.abort(),this.request=null}this.media_&&this.trigger("mediachanging"),this.pendingMedia_=t,this.request=this.vhs_.xhr({uri:t.resolvedUri,withCredentials:this.withCredentials},function(ee,Y){if(h.request){if(t.lastRequest=Date.now(),t.resolvedUri=Fm(h.handleManifestRedirects,t.resolvedUri,Y),ee)return h.playlistRequestError(h.request,t,S);h.haveMetadata({playlistString:Y.responseText,url:t.uri,id:t.id}),h.trigger("HAVE_MASTER"===S?"loadedmetadata":"mediachange")}})}}},u.pause=function(){this.mediaUpdateTimeout&&(ae().clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null),this.stopRequest(),"HAVE_NOTHING"===this.state&&(this.started=!1),"SWITCHING_MEDIA"===this.state?this.state=this.media_?"HAVE_METADATA":"HAVE_MASTER":"HAVE_CURRENT_METADATA"===this.state&&(this.state="HAVE_METADATA")},u.load=function(t){var s=this;this.mediaUpdateTimeout&&(ae().clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null);var h=this.media();if(t){var v=h?(h.partTargetDuration||h.targetDuration)/2*1e3:5e3;this.mediaUpdateTimeout=ae().setTimeout(function(){s.mediaUpdateTimeout=null,s.load()},v)}else this.started?this.trigger(h&&!h.endList?"mediaupdatetimeout":"loadedplaylist"):this.start()},u.updateMediaUpdateTimeout_=function(t){var s=this;this.mediaUpdateTimeout&&(ae().clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null),this.media()&&!this.media().endList&&(this.mediaUpdateTimeout=ae().setTimeout(function(){s.mediaUpdateTimeout=null,s.trigger("mediaupdatetimeout"),s.updateMediaUpdateTimeout_(t)},t))},u.start=function(){var t=this;if(this.started=!0,"object"==typeof this.src)return this.src.uri||(this.src.uri=ae().location.href),this.src.resolvedUri=this.src.uri,void setTimeout(function(){t.setupInitialPlaylist(t.src)},0);this.request=this.vhs_.xhr({uri:this.src,withCredentials:this.withCredentials},function(s,h){if(t.request){if(t.request=null,s)return t.error={status:h.status,message:"HLS playlist request error at URL: "+t.src+".",responseText:h.responseText,code:2},"HAVE_NOTHING"===t.state&&(t.started=!1),t.trigger("error");t.src=Fm(t.handleManifestRedirects,t.src,h);var v=t.parseManifest_({manifestString:h.responseText,url:t.src});t.setupInitialPlaylist(v)}})},u.srcUri=function(){return"string"==typeof this.src?this.src:this.src.uri},u.setupInitialPlaylist=function(t){if(this.state="HAVE_MASTER",t.playlists)return this.master=t,Af(this.master,this.srcUri()),t.playlists.forEach(function(h){h.segments=Gm(h),h.segments.forEach(function(v){Ih(v,h.resolvedUri)})}),this.trigger("loadedplaylist"),void(this.request||this.media(this.master.playlists[0]));var s=this.srcUri()||ae().location.href;this.master=function(i,u){var l=Sp(0,u),t={mediaGroups:{AUDIO:{},VIDEO:{},"CLOSED-CAPTIONS":{},SUBTITLES:{}},uri:ae().location.href,resolvedUri:ae().location.href,playlists:[{uri:u,id:l,resolvedUri:u,attributes:{}}]};return t.playlists[l]=t.playlists[0],t.playlists[u]=t.playlists[0],t}(0,s),this.haveMetadata({playlistObject:t,url:s,id:this.master.playlists[0].id}),this.trigger("loadedmetadata")},i}(At.EventTarget),ny=At.xhr,xd=At.mergeOptions,bl=function(i,u,l,t){var s="arraybuffer"===i.responseType?i.response:i.responseText;!u&&s&&(i.responseTime=Date.now(),i.roundTripTime=i.responseTime-i.requestTime,i.bytesReceived=s.byteLength||s.length,i.bandwidth||(i.bandwidth=Math.floor(i.bytesReceived/i.roundTripTime*8*1e3))),l.headers&&(i.responseHeaders=l.headers),u&&"ETIMEDOUT"===u.code&&(i.timedout=!0),!u&&!i.aborted&&200!==l.statusCode&&206!==l.statusCode&&0!==l.statusCode&&(u=new Error("XHR Failed with a response of: "+(i&&(s||i.responseText)))),t(u,i)},Ql=function(){var i=function u(l,t){l=xd({timeout:45e3},l);var s=u.beforeRequest||At.Vhs.xhr.beforeRequest;if(s&&"function"==typeof s){var h=s(l);h&&(l=h)}var S=(!0===At.Vhs.xhr.original?ny:At.Vhs.xhr)(l,function(F,ee){return bl(S,F,ee,t)}),D=S.abort;return S.abort=function(){return S.aborted=!0,D.apply(S,arguments)},S.uri=l.uri,S.requestTime=Date.now(),S};return i.original=!0,i},$m=function(i){var u={};return i.byterange&&(u.Range=function(i){return"bytes="+i.offset+"-"+("bigint"==typeof i.offset||"bigint"==typeof i.length?ae().BigInt(i.offset)+ae().BigInt(i.length)-ae().BigInt(1):i.offset+i.length-1)}(i.byterange)),u},Cp=function(i,u){return i.start(u)+"-"+i.end(u)},x_=function(i,u){var l=i.toString(16);return"00".substring(0,2-l.length)+l+(u%2?" ":"")},ed=function(i){return i>=32&&i<126?String.fromCharCode(i):"."},ry=function(i){var u={};return Object.keys(i).forEach(function(l){var t=i[l];u[l]=Ir(t)?{bytes:t.buffer,byteOffset:t.byteOffset,byteLength:t.byteLength}:t}),u},Ip=function(i){var u=i.byterange||{length:1/0,offset:0};return[u.length,u.offset,i.resolvedUri].join(",")},zm=function(i){return i.resolvedUri},iy=function(i){for(var u=Array.prototype.slice.call(i),l=16,t="",v=0;v<u.length/l;v++)t+=u.slice(v*l,v*l+l).map(x_).join("")+" "+u.slice(v*l,v*l+l).map(ed).join("")+"\n";return t},oy=Object.freeze({__proto__:null,createTransferableMessage:ry,initSegmentId:Ip,segmentKeyId:zm,hexDump:iy,tagDump:function(i){return iy(i.bytes)},textRanges:function(i){var l,u="";for(l=0;l<i.length;l++)u+=Cp(i,l)+" ";return u}}),D_=function g(i){var u=i.programTime,l=i.playlist,t=i.retryCount,s=void 0===t?2:t,h=i.seekTo,v=i.pauseAfterSeek,S=void 0===v||v,D=i.tech,F=i.callback;if(!F)throw new Error("seekToProgramTime: callback must be provided");if(typeof u>"u"||!l||!h)return F({message:"seekToProgramTime: programTime, seekTo and playlist must be provided"});if(!l.endList&&!D.hasStarted_)return F({message:"player must be playing a live stream to start buffering"});if(!function(i){if(!i.segments||0===i.segments.length)return!1;for(var u=0;u<i.segments.length;u++)if(!i.segments[u].dateTimeObject)return!1;return!0}(l))return F({message:"programDateTime tags must be provided in the manifest "+l.resolvedUri});var ee=function(i,u){var l;try{l=new Date(i)}catch{return null}if(!u||!u.segments||0===u.segments.length)return null;var t=u.segments[0];if(l<t.dateTimeObject)return null;for(var s=0;s<u.segments.length-1&&(t=u.segments[s],!(l<u.segments[s+1].dateTimeObject));s++);var v=u.segments[u.segments.length-1],S=v.dateTimeObject,D=v.videoTimingInfo?function(i){return i.transmuxedPresentationEnd-i.transmuxedPresentationStart-i.transmuxerPrependedSeconds}(v.videoTimingInfo):v.duration+.25*v.duration;return l>new Date(S.getTime()+1e3*D)?null:(l>S&&(t=v),{segment:t,estimatedStart:t.videoTimingInfo?t.videoTimingInfo.transmuxedPresentationStart:el.duration(u,u.mediaSequence+u.segments.indexOf(t)),type:t.videoTimingInfo?"accurate":"estimate"})}(u,l);if(!ee)return F({message:u+" was not found in the stream"});var Y=ee.segment,me=function(i,u){var l,t;try{l=new Date(i),t=new Date(u)}catch{}var s=l.getTime();return(t.getTime()-s)/1e3}(Y.dateTimeObject,u);if("estimate"===ee.type)return 0===s?F({message:u+" is not buffered yet. Try again"}):(h(ee.estimatedStart+me),void D.one("seeked",function(){g({programTime:u,playlist:l,retryCount:s-1,seekTo:h,pauseAfterSeek:S,tech:D,callback:F})}));var Le=Y.start+me;D.one("seeked",function(){return F(null,D.currentTime())}),S&&D.pause(),h(Le)},Lg=function(i,u){if(4===i.readyState)return u()},Dp=At.mergeOptions,Ea=function(i,u){if(!ju(i,u)||i.sidx&&u.sidx&&(i.sidx.offset!==u.sidx.offset||i.sidx.length!==u.sidx.length))return!1;if(!i.sidx&&u.sidx||i.sidx&&!u.sidx||i.segments&&!u.segments||!i.segments&&u.segments)return!1;if(!i.segments&&!u.segments)return!0;for(var l=0;l<i.segments.length;l++){var t=i.segments[l],s=u.segments[l];if(t.uri!==s.uri)return!1;if(t.byterange||s.byterange){var h=t.byterange,v=s.byterange;if(h&&!v||!h&&v||h.offset!==v.offset||h.length!==v.length)return!1}}return!0},dy=function(i,u,l,t){return"placeholder-uri-"+i+"-"+u+"-"+(t.attributes.NAME||l)},fy=function(i,u){return(Boolean(!i.map&&!u.map)||Boolean(i.map&&u.map&&i.map.byterange.offset===u.map.byterange.offset&&i.map.byterange.length===u.map.byterange.length))&&i.uri===u.uri&&i.byterange.offset===u.byterange.offset&&i.byterange.length===u.byterange.length},qm=function(i,u){var l={};for(var t in i){var h=i[t].sidx;if(h){var v=fs(h);if(!u[v])break;fy(u[v].sidxInfo,h)&&(l[v]=u[v])}}return l},Km=function(g){function i(l,t,s,h){var v;void 0===s&&(s={}),(v=g.call(this)||this).masterPlaylistLoader_=h||dt(v),h||(v.isMaster_=!0);var D=s.withCredentials,F=void 0!==D&&D,ee=s.handleManifestRedirects,Y=void 0!==ee&&ee;if(v.vhs_=t,v.withCredentials=F,v.handleManifestRedirects=Y,!l)throw new Error("A non-empty playlist URL or object is required");return v.on("minimumUpdatePeriod",function(){v.refreshXml_()}),v.on("mediaupdatetimeout",function(){v.refreshMedia_(v.media().id)}),v.state="HAVE_NOTHING",v.loadedPlaylists_={},v.logger_=Iu("DashPlaylistLoader"),v.isMaster_?(v.masterPlaylistLoader_.srcUrl=l,v.masterPlaylistLoader_.sidxMapping_={}):v.childPlaylist_=l,v}Me(i,g);var u=i.prototype;return u.requestErrored_=function(t,s,h){return!this.request||(this.request=null,t?(this.error="object"!=typeof t||t instanceof Error?{status:s.status,message:"DASH request error at URL: "+s.uri,response:s.response,code:2}:t,h&&(this.state=h),this.trigger("error"),!0):void 0)},u.addSidxSegments_=function(t,s,h){var v=this,S=t.sidx&&fs(t.sidx);if(t.sidx&&S&&!this.masterPlaylistLoader_.sidxMapping_[S]){var D=Fm(this.handleManifestRedirects,t.sidx.resolvedUri),F=function(Y,me){if(!v.requestErrored_(Y,me,s)){var Be,Le=v.masterPlaylistLoader_.sidxMapping_;try{Be=Po()(kn(me.response).subarray(8))}catch(Ue){return void v.requestErrored_(Ue,me,s)}return Le[S]={sidxInfo:t.sidx,sidx:Be},Ci(t,Be,t.sidx.resolvedUri),h(!0)}};this.request=function(i,u,l){var s,t=[],h=!1,v=function(Y,me,Le,Be){return me.abort(),h=!0,l(Y,me,Le,Be)},S=function(Y,me){if(!h){if(Y)return v(Y,me,"",t);var Le=me.responseText.substring(t&&t.byteLength||0,me.responseText.length);if(t=function(){for(var i=arguments.length,u=new Array(i),l=0;l<i;l++)u[l]=arguments[l];if((u=u.filter(function(v){return v&&(v.byteLength||v.length)&&"string"!=typeof v})).length<=1)return kn(u[0]);var t=u.reduce(function(v,S,D){return v+(S.byteLength||S.length)},0),s=new Uint8Array(t),h=0;return u.forEach(function(v){v=kn(v),s.set(v,h),h+=v.byteLength}),s}(t,$t(Le,!0)),s=s||hi(t),t.length<10||s&&t.length<s+2)return Lg(me,function(){return v(Y,me,"",t)});var Be=zr(t);return"ts"===Be&&t.length<188||!Be&&t.length<376?Lg(me,function(){return v(Y,me,"",t)}):v(null,me,Be,t)}},F=u({uri:i,beforeSend:function(Y){Y.overrideMimeType("text/plain; charset=x-user-defined"),Y.addEventListener("progress",function(me){return bl(Y,null,{statusCode:Y.status},S)})}},function(ee,Y){return bl(F,ee,Y,S)});return F}(D,this.vhs_.xhr,function(ee,Y,me,Le){if(ee)return F(ee,Y);if(!me||"mp4"!==me)return F({status:Y.status,message:"Unsupported "+(me||"unknown")+" container type for sidx segment at URL: "+D,response:"",playlist:t,internal:!0,blacklistDuration:1/0,code:2},Y);var Be=t.sidx.byterange,Ue=Be.offset,Gt=Be.length;if(Le.length>=Gt+Ue)return F(ee,{response:Le.subarray(Ue,Ue+Gt),status:Y.status,uri:Y.uri});v.request=v.vhs_.xhr({uri:D,responseType:"arraybuffer",headers:$m({byterange:t.sidx.byterange})},F)})}else this.mediaRequest_=ae().setTimeout(function(){return h(!1)},0)},u.dispose=function(){this.trigger("dispose"),this.stopRequest(),this.loadedPlaylists_={},ae().clearTimeout(this.minimumUpdatePeriodTimeout_),ae().clearTimeout(this.mediaRequest_),ae().clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null,this.mediaRequest_=null,this.minimumUpdatePeriodTimeout_=null,this.masterPlaylistLoader_.createMupOnMedia_&&(this.off("loadedmetadata",this.masterPlaylistLoader_.createMupOnMedia_),this.masterPlaylistLoader_.createMupOnMedia_=null),this.off()},u.hasPendingRequest=function(){return this.request||this.mediaRequest_},u.stopRequest=function(){if(this.request){var t=this.request;this.request=null,t.onreadystatechange=null,t.abort()}},u.media=function(t){var s=this;if(!t)return this.media_;if("HAVE_NOTHING"===this.state)throw new Error("Cannot switch media playlist from "+this.state);var h=this.state;if("string"==typeof t){if(!this.masterPlaylistLoader_.master.playlists[t])throw new Error("Unknown playlist URI: "+t);t=this.masterPlaylistLoader_.master.playlists[t]}var v=!this.media_||t.id!==this.media_.id;if(v&&this.loadedPlaylists_[t.id]&&this.loadedPlaylists_[t.id].endList)return this.state="HAVE_METADATA",this.media_=t,void(v&&(this.trigger("mediachanging"),this.trigger("mediachange")));v&&(this.media_&&this.trigger("mediachanging"),this.addSidxSegments_(t,h,function(S){s.haveMetadata({startingState:h,playlist:t})}))},u.haveMetadata=function(t){var s=t.startingState,h=t.playlist;this.state="HAVE_METADATA",this.loadedPlaylists_[h.id]=h,this.mediaRequest_=null,this.refreshMedia_(h.id),this.trigger("HAVE_MASTER"===s?"loadedmetadata":"mediachange")},u.pause=function(){this.masterPlaylistLoader_.createMupOnMedia_&&(this.off("loadedmetadata",this.masterPlaylistLoader_.createMupOnMedia_),this.masterPlaylistLoader_.createMupOnMedia_=null),this.stopRequest(),ae().clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null,this.isMaster_&&(ae().clearTimeout(this.masterPlaylistLoader_.minimumUpdatePeriodTimeout_),this.masterPlaylistLoader_.minimumUpdatePeriodTimeout_=null),"HAVE_NOTHING"===this.state&&(this.started=!1)},u.load=function(t){var s=this;ae().clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null;var h=this.media();if(t){var v=h?h.targetDuration/2*1e3:5e3;this.mediaUpdateTimeout=ae().setTimeout(function(){return s.load()},v)}else this.started?h&&!h.endList?(this.isMaster_&&!this.minimumUpdatePeriodTimeout_&&(this.trigger("minimumUpdatePeriod"),this.updateMinimumUpdatePeriodTimeout_()),this.trigger("mediaupdatetimeout")):this.trigger("loadedplaylist"):this.start()},u.start=function(){var t=this;this.started=!0,this.isMaster_?this.requestMaster_(function(s,h){t.haveMaster_(),!t.hasPendingRequest()&&!t.media_&&t.media(t.masterPlaylistLoader_.master.playlists[0])}):this.mediaRequest_=ae().setTimeout(function(){return t.haveMaster_()},0)},u.requestMaster_=function(t){var s=this;this.request=this.vhs_.xhr({uri:this.masterPlaylistLoader_.srcUrl,withCredentials:this.withCredentials},function(h,v){if(!s.requestErrored_(h,v)){var S=v.responseText!==s.masterPlaylistLoader_.masterXml_;return s.masterPlaylistLoader_.masterXml_=v.responseText,s.masterLoaded_=v.responseHeaders&&v.responseHeaders.date?Date.parse(v.responseHeaders.date):Date.now(),s.masterPlaylistLoader_.srcUrl=Fm(s.handleManifestRedirects,s.masterPlaylistLoader_.srcUrl,v),S?(s.handleMaster_(),void s.syncClientServerClock_(function(){return t(v,S)})):t(v,S)}"HAVE_NOTHING"===s.state&&(s.started=!1)})},u.syncClientServerClock_=function(t){var s=this,h=function(i){return function(i){var u=Pr(i,"UTCTiming")[0];if(!u)return null;var l=Di(u);switch(l.schemeIdUri){case"urn:mpeg:dash:utc:http-head:2014":case"urn:mpeg:dash:utc:http-head:2012":l.method="HEAD";break;case"urn:mpeg:dash:utc:http-xsdate:2014":case"urn:mpeg:dash:utc:http-iso:2014":case"urn:mpeg:dash:utc:http-xsdate:2012":case"urn:mpeg:dash:utc:http-iso:2012":l.method="GET";break;case"urn:mpeg:dash:utc:direct:2014":case"urn:mpeg:dash:utc:direct:2012":l.method="DIRECT",l.value=Date.parse(l.value);break;default:throw new Error("UNSUPPORTED_UTC_TIMING_SCHEME")}return l}(Au(i))}(this.masterPlaylistLoader_.masterXml_);return null===h?(this.masterPlaylistLoader_.clientOffset_=this.masterLoaded_-Date.now(),t()):"DIRECT"===h.method?(this.masterPlaylistLoader_.clientOffset_=h.value-Date.now(),t()):void(this.request=this.vhs_.xhr({uri:Wl(this.masterPlaylistLoader_.srcUrl,h.value),method:h.method,withCredentials:this.withCredentials},function(v,S){if(s.request){if(v)return s.masterPlaylistLoader_.clientOffset_=s.masterLoaded_-Date.now(),t();var D;D="HEAD"===h.method?S.responseHeaders&&S.responseHeaders.date?Date.parse(S.responseHeaders.date):s.masterLoaded_:Date.parse(S.responseText),s.masterPlaylistLoader_.clientOffset_=D-Date.now(),t()}}))},u.haveMaster_=function(){this.state="HAVE_MASTER",this.isMaster_?this.trigger("loadedplaylist"):this.media_||this.media(this.childPlaylist_)},u.handleMaster_=function(){this.mediaRequest_=null;var t=this.masterPlaylistLoader_.master,s=function(i){var l=i.srcUrl,v=function(i,u){void 0===u&&(u={});var l=function(i,u){void 0===u&&(u={});var l=u,t=l.manifestUri,s=void 0===t?"":t,h=l.NOW,v=void 0===h?Date.now():h,S=l.clientOffset,D=void 0===S?0:S,F=Pr(i,"Period");if(!F.length)throw new Error("INVALID_NUMBER_OF_PERIOD");var ee=Pr(i,"Location"),Y=Di(i),me=Ao([s],Pr(i,"BaseURL"));Y.type=Y.type||"static",Y.sourceDuration=Y.mediaPresentationDuration||0,Y.NOW=v,Y.clientOffset=D,ee.length&&(Y.locations=ee.map(Uo));var Le=[];return F.forEach(function(Be,Ue){var Gt=Di(Be),ln=Le[Ue-1];Gt.start=function(i){var u=i.attributes,l=i.priorPeriodAttributes;return"number"==typeof u.start?u.start:l&&"number"==typeof l.start&&"number"==typeof l.duration?l.start+l.duration:l||"static"!==i.mpdType?null:0}({attributes:Gt,priorPeriodAttributes:ln?ln.attributes:null,mpdType:Y.type}),Le.push({node:Be,attributes:Gt})}),{locations:Y.locations,representationInfo:pn(Le.map(eo(Y,me)))}}(Au(i),u),t=function(i){return i.map(ss)}(l.representationInfo);return pt({dashPlaylists:t,locations:l.locations,sidxMapping:u.sidxMapping,previousManifest:u.previousManifest})}(i.masterXml,{manifestUri:l,clientOffset:i.clientOffset,sidxMapping:i.sidxMapping,previousManifest:i.previousManifest});return Af(v,l,dy),v}({masterXml:this.masterPlaylistLoader_.masterXml_,srcUrl:this.masterPlaylistLoader_.srcUrl,clientOffset:this.masterPlaylistLoader_.clientOffset_,sidxMapping:this.masterPlaylistLoader_.sidxMapping_,previousManifest:t});t&&(s=function(i,u,l){for(var t=!0,s=Dp(i,{duration:u.duration,minimumUpdatePeriod:u.minimumUpdatePeriod,timelineStarts:u.timelineStarts}),h=0;h<u.playlists.length;h++){var v=u.playlists[h];if(v.sidx){var S=fs(v.sidx);l&&l[S]&&l[S].sidx&&Ci(v,l[S].sidx,v.sidx.resolvedUri)}var D=Rg(s,v,Ea);D&&(s=D,t=!1)}return Id(u,function(F,ee,Y,me){if(F.playlists&&F.playlists.length){var Le=F.playlists[0].id,Be=Rg(s,F.playlists[0],Ea);Be&&(me in(s=Be).mediaGroups[ee][Y]||(s.mediaGroups[ee][Y][me]=F),s.mediaGroups[ee][Y][me].playlists[0]=s.playlists[Le],t=!1)}}),function(i,u){Id(i,function(l,t,s,h){h in u.mediaGroups[t][s]||delete i.mediaGroups[t][s][h]})}(s,u),u.minimumUpdatePeriod!==i.minimumUpdatePeriod&&(t=!1),t?null:s}(t,s,this.masterPlaylistLoader_.sidxMapping_)),this.masterPlaylistLoader_.master=s||t;var h=this.masterPlaylistLoader_.master.locations&&this.masterPlaylistLoader_.master.locations[0];return h&&h!==this.masterPlaylistLoader_.srcUrl&&(this.masterPlaylistLoader_.srcUrl=h),(!t||s&&s.minimumUpdatePeriod!==t.minimumUpdatePeriod)&&this.updateMinimumUpdatePeriodTimeout_(),Boolean(s)},u.updateMinimumUpdatePeriodTimeout_=function(){var t=this.masterPlaylistLoader_;t.createMupOnMedia_&&(t.off("loadedmetadata",t.createMupOnMedia_),t.createMupOnMedia_=null),t.minimumUpdatePeriodTimeout_&&(ae().clearTimeout(t.minimumUpdatePeriodTimeout_),t.minimumUpdatePeriodTimeout_=null);var s=t.master&&t.master.minimumUpdatePeriod;0===s&&(t.media()?s=1e3*t.media().targetDuration:(t.createMupOnMedia_=t.updateMinimumUpdatePeriodTimeout_,t.one("loadedmetadata",t.createMupOnMedia_))),"number"!=typeof s||s<=0?s<0&&this.logger_("found invalid minimumUpdatePeriod of "+s+", not setting a timeout"):this.createMUPTimeout_(s)},u.createMUPTimeout_=function(t){var s=this.masterPlaylistLoader_;s.minimumUpdatePeriodTimeout_=ae().setTimeout(function(){s.minimumUpdatePeriodTimeout_=null,s.trigger("minimumUpdatePeriod"),s.createMUPTimeout_(t)},t)},u.refreshXml_=function(){var t=this;this.requestMaster_(function(s,h){h&&(t.media_&&(t.media_=t.masterPlaylistLoader_.master.playlists[t.media_.id]),t.masterPlaylistLoader_.sidxMapping_=function(i,u){var t=qm(i.playlists,u);return Id(i,function(s,h,v,S){s.playlists&&s.playlists.length&&(t=Dp(t,qm(s.playlists,u)))}),t}(t.masterPlaylistLoader_.master,t.masterPlaylistLoader_.sidxMapping_),t.addSidxSegments_(t.media(),t.state,function(v){t.refreshMedia_(t.media().id)}))})},u.refreshMedia_=function(t){var s=this;if(!t)throw new Error("refreshMedia_ must take a media id");this.media_&&this.isMaster_&&this.handleMaster_();var h=this.masterPlaylistLoader_.master.playlists,v=!this.media_||this.media_!==h[t];v?this.media_=h[t]:this.trigger("playlistunchanged"),this.mediaUpdateTimeout||function D(){s.media().endList||(s.mediaUpdateTimeout=ae().setTimeout(function(){s.trigger("mediaupdatetimeout"),D()},Pf(s.media(),Boolean(v))))}(),this.trigger("loadedplaylist")},i}(At.EventTarget),tu={GOAL_BUFFER_LENGTH:30,MAX_GOAL_BUFFER_LENGTH:60,BACK_BUFFER_LENGTH:30,GOAL_BUFFER_LENGTH_RATE:1,INITIAL_BANDWIDTH:4194304,BANDWIDTH_VARIANCE:1.2,BUFFER_LOW_WATER_LINE:0,MAX_BUFFER_LOW_WATER_LINE:30,EXPERIMENTAL_MAX_BUFFER_LOW_WATER_LINE:16,BUFFER_LOW_WATER_LINE_RATE:1,BUFFER_HIGH_WATER_LINE:30},Ap=function(i){return i.on=i.addEventListener,i.off=i.removeEventListener,i},Pp=function(i){return function(){var u=function(i){try{return URL.createObjectURL(new Blob([i],{type:"application/javascript"}))}catch{var u=new BlobBuilder;return u.append(i),URL.createObjectURL(u.getBlob())}}(i),l=Ap(new Worker(u));l.objURL=u;var t=l.terminate;return l.on=l.addEventListener,l.off=l.removeEventListener,l.terminate=function(){return URL.revokeObjectURL(u),t.call(this)},l}},Mf=function(i){return"var browserWorkerPolyFill = "+Ap.toString()+";\nbrowserWorkerPolyFill(self);\n"+i},Of=function(i){return i.toString().replace(/^function.+?{/,"").slice(0,-1)},py=Mf(Of(function(){var g=function(){this.init=function(){var A={};this.on=function(U,j){A[U]||(A[U]=[]),A[U]=A[U].concat(j)},this.off=function(U,j){var G;return!!A[U]&&(G=A[U].indexOf(j),A[U]=A[U].slice(),A[U].splice(G,1),G>-1)},this.trigger=function(U){var j,G,ie,le;if(j=A[U])if(2===arguments.length)for(ie=j.length,G=0;G<ie;++G)j[G].call(this,arguments[1]);else{for(le=[],G=arguments.length,G=1;G<arguments.length;++G)le.push(arguments[G]);for(ie=j.length,G=0;G<ie;++G)j[G].apply(this,le)}},this.dispose=function(){A={}}}};g.prototype.pipe=function(ye){return this.on("data",function(A){ye.push(A)}),this.on("done",function(A){ye.flush(A)}),this.on("partialdone",function(A){ye.partialFlush(A)}),this.on("endedtimeline",function(A){ye.endTimeline(A)}),this.on("reset",function(A){ye.reset(A)}),ye},g.prototype.push=function(ye){this.trigger("data",ye)},g.prototype.flush=function(ye){this.trigger("done",ye)},g.prototype.partialFlush=function(ye){this.trigger("partialdone",ye)},g.prototype.endTimeline=function(ye){this.trigger("endedtimeline",ye)},g.prototype.reset=function(ye){this.trigger("reset",ye)};var h,v,S,D,F,ee,Y,me,Le,Be,Ue,Gt,ln,On,Yt,en,In,nn,tn,En,cn,wr,Gn,ni,Qs,po,Co,ua,ms,Ua,ls,Jf,xu,jl,Dc,zd,ye,A,i=g,u=Math.pow(2,32),t={getUint64:function(A){var j,U=new DataView(A.buffer,A.byteOffset,A.byteLength);return U.getBigUint64?(j=U.getBigUint64(0))<Number.MAX_SAFE_INTEGER?Number(j):j:U.getUint32(0)*u+U.getUint32(4)},MAX_UINT32:u},s=t.MAX_UINT32;(function(){var ye;if(Gn={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],mvex:[],mvhd:[],pasp:[],sdtp:[],smhd:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],styp:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[]},!(typeof Uint8Array>"u")){for(ye in Gn)Gn.hasOwnProperty(ye)&&(Gn[ye]=[ye.charCodeAt(0),ye.charCodeAt(1),ye.charCodeAt(2),ye.charCodeAt(3)]);ni=new Uint8Array(["i".charCodeAt(0),"s".charCodeAt(0),"o".charCodeAt(0),"m".charCodeAt(0)]),po=new Uint8Array(["a".charCodeAt(0),"v".charCodeAt(0),"c".charCodeAt(0),"1".charCodeAt(0)]),Qs=new Uint8Array([0,0,0,1]),Co=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),ua=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]),ms={video:Co,audio:ua},Jf=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),ls=new Uint8Array([0,0,0,0,0,0,0,0]),xu=new Uint8Array([0,0,0,0,0,0,0,0]),jl=xu,Dc=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),zd=xu,Ua=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0])}})(),h=function(A){var G,ie,U=[],j=0;for(G=1;G<arguments.length;G++)U.push(arguments[G]);for(G=U.length;G--;)j+=U[G].byteLength;for(ie=new Uint8Array(j+8),new DataView(ie.buffer,ie.byteOffset,ie.byteLength).setUint32(0,ie.byteLength),ie.set(A,4),G=0,j=8;G<U.length;G++)ie.set(U[G],j),j+=U[G].byteLength;return ie},v=function(){return h(Gn.dinf,h(Gn.dref,Jf))},S=function(A){return h(Gn.esds,new Uint8Array([0,0,0,0,3,25,0,0,0,4,17,64,21,0,6,0,0,0,218,192,0,0,218,192,5,2,A.audioobjecttype<<3|A.samplingfrequencyindex>>>1,A.samplingfrequencyindex<<7|A.channelcount<<3,6,1,2]))},D=function(){return h(Gn.ftyp,ni,Qs,ni,po)},en=function(A){return h(Gn.hdlr,ms[A])},F=function(A){return h(Gn.mdat,A)},Yt=function(A){var U=new Uint8Array([0,0,0,0,0,0,0,2,0,0,0,3,0,1,95,144,A.duration>>>24&255,A.duration>>>16&255,A.duration>>>8&255,255&A.duration,85,196,0,0]);return A.samplerate&&(U[12]=A.samplerate>>>24&255,U[13]=A.samplerate>>>16&255,U[14]=A.samplerate>>>8&255,U[15]=255&A.samplerate),h(Gn.mdhd,U)},On=function(A){return h(Gn.mdia,Yt(A),en(A.type),Y(A))},ee=function(A){return h(Gn.mfhd,new Uint8Array([0,0,0,0,(4278190080&A)>>24,(16711680&A)>>16,(65280&A)>>8,255&A]))},Y=function(A){return h(Gn.minf,"video"===A.type?h(Gn.vmhd,Ua):h(Gn.smhd,ls),v(),nn(A))},me=function(A,U){for(var j=[],G=U.length;G--;)j[G]=En(U[G]);return h.apply(null,[Gn.moof,ee(A)].concat(j))},Le=function(A){for(var U=A.length,j=[];U--;)j[U]=Gt(A[U]);return h.apply(null,[Gn.moov,Ue(4294967295)].concat(j).concat(Be(A)))},Be=function(A){for(var U=A.length,j=[];U--;)j[U]=cn(A[U]);return h.apply(null,[Gn.mvex].concat(j))},Ue=function(A){var U=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,2,0,1,95,144,(4278190080&A)>>24,(16711680&A)>>16,(65280&A)>>8,255&A,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return h(Gn.mvhd,U)},In=function(A){var G,ie,U=A.samples||[],j=new Uint8Array(4+U.length);for(ie=0;ie<U.length;ie++)j[ie+4]=(G=U[ie].flags).dependsOn<<4|G.isDependedOn<<2|G.hasRedundancy;return h(Gn.sdtp,j)},nn=function(A){return h(Gn.stbl,tn(A),h(Gn.stts,zd),h(Gn.stsc,jl),h(Gn.stsz,Dc),h(Gn.stco,xu))},tn=function(j){return h(Gn.stsd,new Uint8Array([0,0,0,0,0,0,0,1]),"video"===j.type?ye(j):A(j))},ye=function(j){var qe,vt,G=j.sps||[],ie=j.pps||[],le=[],je=[];for(qe=0;qe<G.length;qe++)le.push((65280&G[qe].byteLength)>>>8),le.push(255&G[qe].byteLength),le=le.concat(Array.prototype.slice.call(G[qe]));for(qe=0;qe<ie.length;qe++)je.push((65280&ie[qe].byteLength)>>>8),je.push(255&ie[qe].byteLength),je=je.concat(Array.prototype.slice.call(ie[qe]));if(vt=[Gn.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,(65280&j.width)>>8,255&j.width,(65280&j.height)>>8,255&j.height,0,72,0,0,0,72,0,0,0,0,0,0,0,1,19,118,105,100,101,111,106,115,45,99,111,110,116,114,105,98,45,104,108,115,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),h(Gn.avcC,new Uint8Array([1,j.profileIdc,j.profileCompatibility,j.levelIdc,255].concat([G.length],le,[ie.length],je))),h(Gn.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192]))],j.sarRatio){var ct=j.sarRatio[0],Dt=j.sarRatio[1];vt.push(h(Gn.pasp,new Uint8Array([(4278190080&ct)>>24,(16711680&ct)>>16,(65280&ct)>>8,255&ct,(4278190080&Dt)>>24,(16711680&Dt)>>16,(65280&Dt)>>8,255&Dt])))}return h.apply(null,vt)},A=function(j){return h(Gn.mp4a,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,(65280&j.channelcount)>>8,255&j.channelcount,(65280&j.samplesize)>>8,255&j.samplesize,0,0,0,0,(65280&j.samplerate)>>8,255&j.samplerate,0,0]),S(j))},ln=function(A){var U=new Uint8Array([0,0,0,7,0,0,0,0,0,0,0,0,(4278190080&A.id)>>24,(16711680&A.id)>>16,(65280&A.id)>>8,255&A.id,0,0,0,0,(4278190080&A.duration)>>24,(16711680&A.duration)>>16,(65280&A.duration)>>8,255&A.duration,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,(65280&A.width)>>8,255&A.width,0,0,(65280&A.height)>>8,255&A.height,0,0]);return h(Gn.tkhd,U)},En=function(A){var U,j,G,ie,je,qe;return U=h(Gn.tfhd,new Uint8Array([0,0,0,58,(4278190080&A.id)>>24,(16711680&A.id)>>16,(65280&A.id)>>8,255&A.id,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0])),je=Math.floor(A.baseMediaDecodeTime/s),qe=Math.floor(A.baseMediaDecodeTime%s),j=h(Gn.tfdt,new Uint8Array([1,0,0,0,je>>>24&255,je>>>16&255,je>>>8&255,255&je,qe>>>24&255,qe>>>16&255,qe>>>8&255,255&qe])),"audio"===A.type?(G=wr(A,92),h(Gn.traf,U,j,G)):(ie=In(A),G=wr(A,ie.length+92),h(Gn.traf,U,j,G,ie))},Gt=function(A){return A.duration=A.duration||4294967295,h(Gn.trak,ln(A),On(A))},cn=function(A){var U=new Uint8Array([0,0,0,0,(4278190080&A.id)>>24,(16711680&A.id)>>16,(65280&A.id)>>8,255&A.id,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]);return"video"!==A.type&&(U[U.length-1]=0),h(Gn.trex,U)},function(){var ye,A,U;U=function(G,ie){var le=0,je=0,qe=0,vt=0;return G.length&&(void 0!==G[0].duration&&(le=1),void 0!==G[0].size&&(je=2),void 0!==G[0].flags&&(qe=4),void 0!==G[0].compositionTimeOffset&&(vt=8)),[0,0,le|je|qe|vt,1,(4278190080&G.length)>>>24,(16711680&G.length)>>>16,(65280&G.length)>>>8,255&G.length,(4278190080&ie)>>>24,(16711680&ie)>>>16,(65280&ie)>>>8,255&ie]},A=function(G,ie){var le,je,qe,vt,ct,Dt;for(qe=U(vt=G.samples||[],ie+=20+16*vt.length),(je=new Uint8Array(qe.length+16*vt.length)).set(qe),le=qe.length,Dt=0;Dt<vt.length;Dt++)je[le++]=(4278190080&(ct=vt[Dt]).duration)>>>24,je[le++]=(16711680&ct.duration)>>>16,je[le++]=(65280&ct.duration)>>>8,je[le++]=255&ct.duration,je[le++]=(4278190080&ct.size)>>>24,je[le++]=(16711680&ct.size)>>>16,je[le++]=(65280&ct.size)>>>8,je[le++]=255&ct.size,je[le++]=ct.flags.isLeading<<2|ct.flags.dependsOn,je[le++]=ct.flags.isDependedOn<<6|ct.flags.hasRedundancy<<4|ct.flags.paddingValue<<1|ct.flags.isNonSyncSample,je[le++]=61440&ct.flags.degradationPriority,je[le++]=15&ct.flags.degradationPriority,je[le++]=(4278190080&ct.compositionTimeOffset)>>>24,je[le++]=(16711680&ct.compositionTimeOffset)>>>16,je[le++]=(65280&ct.compositionTimeOffset)>>>8,je[le++]=255&ct.compositionTimeOffset;return h(Gn.trun,je)},ye=function(G,ie){var le,je,qe,vt,ct,Dt;for(qe=U(vt=G.samples||[],ie+=20+8*vt.length),(le=new Uint8Array(qe.length+8*vt.length)).set(qe),je=qe.length,Dt=0;Dt<vt.length;Dt++)le[je++]=(4278190080&(ct=vt[Dt]).duration)>>>24,le[je++]=(16711680&ct.duration)>>>16,le[je++]=(65280&ct.duration)>>>8,le[je++]=255&ct.duration,le[je++]=(4278190080&ct.size)>>>24,le[je++]=(16711680&ct.size)>>>16,le[je++]=(65280&ct.size)>>>8,le[je++]=255&ct.size;return h(Gn.trun,le)},wr=function(G,ie){return"audio"===G.type?ye(G,ie):A(G,ie)}}();var _m,Ac,zh,Tm,Kd,K_,Z_,Yp,El_mdat=F,El_moof=me,mm=function(A,U){var j={size:0,flags:{isLeading:0,dependsOn:1,isDependedOn:0,hasRedundancy:0,degradationPriority:0,isNonSyncSample:1}};return j.dataOffset=U,j.compositionTimeOffset=A.pts-A.dts,j.duration=A.duration,j.size=4*A.length,j.size+=A.byteLength,A.keyFrame&&(j.flags.dependsOn=2,j.flags.isNonSyncSample=0),j},ad=[33,16,5,32,164,27],Gh=[33,65,108,84,1,2,4,8,168,2,4,8,17,191,252],zs=function(A){for(var U=[];A--;)U.push(0);return U};Ac=function(A){return 9e4*A},zh=function(A,U){return A*U},Tm=function(A){return A/9e4},Kd=function(A,U){return A/U},K_=function(A,U){return Ac(Kd(A,U))},Z_=function(A,U){return zh(Tm(A),U)},Yp=function(A,U,j){return Tm(j?A:A-U)};var bs_secondsToVideoTs=Ac,bs_videoTsToSeconds=Tm,bs_audioTsToVideoTs=K_,bs_videoTsToAudioTs=Z_,bs_metadataTsToSeconds=Yp,Jp_prefixWithSilence=function(A,U,j,G){var ie,ct,Dt,an,le=0,je=0,qe=0,vt=0;if(U.length&&(ie=bs_audioTsToVideoTs(A.baseMediaDecodeTime,A.samplerate),le=Math.ceil(9e4/(A.samplerate/1024)),j&&G&&(je=ie-Math.max(j,G),vt=(qe=Math.floor(je/le))*le),!(qe<1||vt>45e3))){for((ct=function(){if(!_m){var A={96e3:[ad,[227,64],zs(154),[56]],88200:[ad,[231],zs(170),[56]],64e3:[ad,[248,192],zs(240),[56]],48e3:[ad,[255,192],zs(268),[55,148,128],zs(54),[112]],44100:[ad,[255,192],zs(268),[55,163,128],zs(84),[112]],32e3:[ad,[255,192],zs(268),[55,234],zs(226),[112]],24e3:[ad,[255,192],zs(268),[55,255,128],zs(268),[111,112],zs(126),[224]],16e3:[ad,[255,192],zs(268),[55,255,128],zs(268),[111,255],zs(269),[223,108],zs(195),[1,192]],12e3:[Gh,zs(268),[3,127,248],zs(268),[6,255,240],zs(268),[13,255,224],zs(268),[27,253,128],zs(259),[56]],11025:[Gh,zs(268),[3,127,248],zs(268),[6,255,240],zs(268),[13,255,224],zs(268),[27,255,192],zs(268),[55,175,128],zs(108),[112]],8e3:[Gh,zs(268),[3,121,16],zs(47),[7]]};_m=function(A){return Object.keys(A).reduce(function(U,j){return U[j]=new Uint8Array(A[j].reduce(function(G,ie){return G.concat(ie)},[])),U},{})}(A)}return _m}()[A.samplerate])||(ct=U[0].data),Dt=0;Dt<qe;Dt++)U.splice(0,0,{data:ct,dts:(an=U[0]).dts-le,pts:an.pts-le});return A.baseMediaDecodeTime-=Math.floor(bs_videoTsToAudioTs(vt,A.samplerate)),vt}},Ul_clearDtsInfo=function(A){delete A.minSegmentDts,delete A.maxSegmentDts,delete A.minSegmentPts,delete A.maxSegmentPts},Ul_calculateTrackBaseMediaDecodeTime=function(A,U){var j,ie=A.minSegmentDts;return U||(ie-=A.timelineStartInfo.dts),j=A.timelineStartInfo.baseMediaDecodeTime,j+=ie,j=Math.max(0,j),"audio"===A.type&&(j*=A.samplerate/9e4,j=Math.floor(j)),j},Ul_collectDtsInfo=function(A,U){"number"==typeof U.pts&&(void 0===A.timelineStartInfo.pts&&(A.timelineStartInfo.pts=U.pts),A.minSegmentPts=void 0===A.minSegmentPts?U.pts:Math.min(A.minSegmentPts,U.pts),A.maxSegmentPts=void 0===A.maxSegmentPts?U.pts:Math.max(A.maxSegmentPts,U.pts)),"number"==typeof U.dts&&(void 0===A.timelineStartInfo.dts&&(A.timelineStartInfo.dts=U.dts),A.minSegmentDts=void 0===A.minSegmentDts?U.dts:Math.min(A.minSegmentDts,U.dts),A.maxSegmentDts=void 0===A.maxSegmentDts?U.dts:Math.max(A.maxSegmentDts,U.dts))},ic=function ye(A){A=A||{},ye.prototype.init.call(this),this.parse708captions_="boolean"!=typeof A.parse708captions||A.parse708captions,this.captionPackets_=[],this.ccStreams_=[new Ps(0,0),new Ps(0,1),new Ps(1,0),new Ps(1,1)],this.parse708captions_&&(this.cc708Stream_=new cs({captionServices:A.captionServices})),this.reset(),this.ccStreams_.forEach(function(U){U.on("data",this.trigger.bind(this,"data")),U.on("partialdone",this.trigger.bind(this,"partialdone")),U.on("done",this.trigger.bind(this,"done"))},this),this.parse708captions_&&(this.cc708Stream_.on("data",this.trigger.bind(this,"data")),this.cc708Stream_.on("partialdone",this.trigger.bind(this,"partialdone")),this.cc708Stream_.on("done",this.trigger.bind(this,"done")))};(ic.prototype=new i).push=function(ye){var A,U,j;if("sei_rbsp"===ye.nalUnitType&&(A=function(A){for(var U=0,j={payloadType:-1,payloadSize:0},G=0,ie=0;U<A.byteLength&&128!==A[U];){for(;255===A[U];)G+=255,U++;for(G+=A[U++];255===A[U];)ie+=255,U++;if(ie+=A[U++],!j.payload&&4===G){if("GA94"===String.fromCharCode(A[U+3],A[U+4],A[U+5],A[U+6])){j.payloadType=G,j.payloadSize=ie,j.payload=A.subarray(U,U+ie);break}j.payload=void 0}U+=ie,G=0,ie=0}return j}(ye.escapedRBSP)).payload&&4===A.payloadType&&(U=function(A){return 181!==A.payload[0]||49!=(A.payload[1]<<8|A.payload[2])||"GA94"!==String.fromCharCode(A.payload[3],A.payload[4],A.payload[5],A.payload[6])||3!==A.payload[7]?null:A.payload.subarray(8,A.payload.length-1)}(A))){if(ye.dts<this.latestDts_)return void(this.ignoreNextEqualDts_=!0);if(ye.dts===this.latestDts_&&this.ignoreNextEqualDts_)return this.numSameDts_--,void(this.numSameDts_||(this.ignoreNextEqualDts_=!1));j=function(A,U){var G,ie,le,je,j=[];if(!(64&U[0]))return j;for(ie=31&U[0],G=0;G<ie;G++)je={type:3&U[2+(le=3*G)],pts:A},4&U[le+2]&&(je.ccData=U[le+3]<<8|U[le+4],j.push(je));return j}(ye.pts,U),this.captionPackets_=this.captionPackets_.concat(j),this.latestDts_!==ye.dts&&(this.numSameDts_=0),this.numSameDts_++,this.latestDts_=ye.dts}},ic.prototype.flushCCStreams=function(ye){this.ccStreams_.forEach(function(A){return"flush"===ye?A.flush():A.partialFlush()},this)},ic.prototype.flushStream=function(ye){this.captionPackets_.length?(this.captionPackets_.forEach(function(A,U){A.presortIndex=U}),this.captionPackets_.sort(function(A,U){return A.pts===U.pts?A.presortIndex-U.presortIndex:A.pts-U.pts}),this.captionPackets_.forEach(function(A){A.type<2?this.dispatchCea608Packet(A):this.dispatchCea708Packet(A)},this),this.captionPackets_.length=0,this.flushCCStreams(ye)):this.flushCCStreams(ye)},ic.prototype.flush=function(){return this.flushStream("flush")},ic.prototype.partialFlush=function(){return this.flushStream("partialFlush")},ic.prototype.reset=function(){this.latestDts_=null,this.ignoreNextEqualDts_=!1,this.numSameDts_=0,this.activeCea608Channel_=[null,null],this.ccStreams_.forEach(function(ye){ye.reset()})},ic.prototype.dispatchCea608Packet=function(ye){this.setsTextOrXDSActive(ye)?this.activeCea608Channel_[ye.type]=null:this.setsChannel1Active(ye)?this.activeCea608Channel_[ye.type]=0:this.setsChannel2Active(ye)&&(this.activeCea608Channel_[ye.type]=1),null!==this.activeCea608Channel_[ye.type]&&this.ccStreams_[(ye.type<<1)+this.activeCea608Channel_[ye.type]].push(ye)},ic.prototype.setsChannel1Active=function(ye){return 4096==(30720&ye.ccData)},ic.prototype.setsChannel2Active=function(ye){return 6144==(30720&ye.ccData)},ic.prototype.setsTextOrXDSActive=function(ye){return 256==(28928&ye.ccData)||4138==(30974&ye.ccData)||6186==(30974&ye.ccData)},ic.prototype.dispatchCea708Packet=function(ye){this.parse708captions_&&this.cc708Stream_.push(ye)};var Xr={127:9834,4128:32,4129:160,4133:8230,4138:352,4140:338,4144:9608,4145:8216,4146:8217,4147:8220,4148:8221,4149:8226,4153:8482,4154:353,4156:339,4157:8480,4159:376,4214:8539,4215:8540,4216:8541,4217:8542,4218:9168,4219:9124,4220:9123,4221:9135,4222:9126,4223:9121,4256:12600},Nv=function(A){return 32<=A&&A<=127||160<=A&&A<=255},Yd=function(A){this.windowNum=A,this.reset()};Yd.prototype.reset=function(){this.clearText(),this.pendingNewLine=!1,this.winAttr={},this.penAttr={},this.penLoc={},this.penColor={},this.visible=0,this.rowLock=0,this.columnLock=0,this.priority=0,this.relativePositioning=0,this.anchorVertical=0,this.anchorHorizontal=0,this.anchorPoint=0,this.rowCount=1,this.virtualRowCount=this.rowCount+1,this.columnCount=41,this.windowStyle=0,this.penStyle=0},Yd.prototype.getText=function(){return this.rows.join("\n")},Yd.prototype.clearText=function(){this.rows=[""],this.rowIdx=0},Yd.prototype.newLine=function(ye){for(this.rows.length>=this.virtualRowCount&&"function"==typeof this.beforeRowOverflow&&this.beforeRowOverflow(ye),this.rows.length>0&&(this.rows.push(""),this.rowIdx++);this.rows.length>this.virtualRowCount;)this.rows.shift(),this.rowIdx--},Yd.prototype.isEmpty=function(){return 0===this.rows.length||1===this.rows.length&&""===this.rows[0]},Yd.prototype.addText=function(ye){this.rows[this.rowIdx]+=ye},Yd.prototype.backspace=function(){if(!this.isEmpty()){var ye=this.rows[this.rowIdx];this.rows[this.rowIdx]=ye.substr(0,ye.length-1)}};var Gu=function(A,U,j){this.serviceNum=A,this.text="",this.currentWindow=new Yd(-1),this.windows=[],this.stream=j,"string"==typeof U&&this.createTextDecoder(U)};Gu.prototype.init=function(ye,A){this.startPts=ye;for(var U=0;U<8;U++)this.windows[U]=new Yd(U),"function"==typeof A&&(this.windows[U].beforeRowOverflow=A)},Gu.prototype.setCurrentWindow=function(ye){this.currentWindow=this.windows[ye]},Gu.prototype.createTextDecoder=function(ye){if(typeof TextDecoder>"u")this.stream.trigger("log",{level:"warn",message:"The `encoding` option is unsupported without TextDecoder support"});else try{this.textDecoder_=new TextDecoder(ye)}catch(A){this.stream.trigger("log",{level:"warn",message:"TextDecoder could not be created with "+ye+" encoding. "+A})}};var cs=function ye(A){A=A||{},ye.prototype.init.call(this);var ie,U=this,j=A.captionServices||{},G={};Object.keys(j).forEach(function(le){ie=j[le],/^SERVICE/.test(le)&&(G[le]=ie.encoding)}),this.serviceEncodings=G,this.current708Packet=null,this.services={},this.push=function(le){3===le.type?(U.new708Packet(),U.add708Bytes(le)):(null===U.current708Packet&&U.new708Packet(),U.add708Bytes(le))}};cs.prototype=new i,cs.prototype.new708Packet=function(){null!==this.current708Packet&&this.push708Packet(),this.current708Packet={data:[],ptsVals:[]}},cs.prototype.add708Bytes=function(ye){var A=ye.ccData,U=A>>>8,j=255&A;this.current708Packet.ptsVals.push(ye.pts),this.current708Packet.data.push(U),this.current708Packet.data.push(j)},cs.prototype.push708Packet=function(){var ye=this.current708Packet,A=ye.data,U=null,j=null,G=0,ie=A[G++];for(ye.seq=ie>>6,ye.sizeCode=63&ie;G<A.length;G++)j=31&(ie=A[G++]),7==(U=ie>>5)&&j>0&&(U=ie=A[G++]),this.pushServiceBlock(U,G,j),j>0&&(G+=j-1)},cs.prototype.pushServiceBlock=function(ye,A,U){var j,G=A,ie=this.current708Packet.data,le=this.services[ye];for(le||(le=this.initService(ye,G));G<A+U&&G<ie.length;G++)Nv(j=ie[G])?G=this.handleText(G,le):24===j?G=this.multiByteCharacter(G,le):16===j?G=this.extendedCommands(G,le):128<=j&&j<=135?G=this.setCurrentWindow(G,le):152<=j&&j<=159?G=this.defineWindow(G,le):136===j?G=this.clearWindows(G,le):140===j?G=this.deleteWindows(G,le):137===j?G=this.displayWindows(G,le):138===j?G=this.hideWindows(G,le):139===j?G=this.toggleWindows(G,le):151===j?G=this.setWindowAttributes(G,le):144===j?G=this.setPenAttributes(G,le):145===j?G=this.setPenColor(G,le):146===j?G=this.setPenLocation(G,le):143===j?le=this.reset(G,le):8===j?le.currentWindow.backspace():12===j?le.currentWindow.clearText():13===j?le.currentWindow.pendingNewLine=!0:14===j?le.currentWindow.clearText():141===j&&G++},cs.prototype.extendedCommands=function(ye,A){var j=this.current708Packet.data[++ye];return Nv(j)&&(ye=this.handleText(ye,A,{isExtended:!0})),ye},cs.prototype.getPts=function(ye){return this.current708Packet.ptsVals[Math.floor(ye/2)]},cs.prototype.initService=function(ye,A){var j,G,U=this;return(j="SERVICE"+ye)in this.serviceEncodings&&(G=this.serviceEncodings[j]),this.services[ye]=new Gu(ye,G,U),this.services[ye].init(this.getPts(A),function(ie){U.flushDisplayed(ie,U.services[ye])}),this.services[ye]},cs.prototype.handleText=function(ye,A,U){var ct,Dt,j=U&&U.isExtended,ie=this.current708Packet.data,le=j?4096:0,je=ie[ye],vt=A.currentWindow;return A.textDecoder_&&!j?(U&&U.isMultiByte?(Dt=[je,ie[ye+1]],ye++):Dt=[je],ct=A.textDecoder_.decode(new Uint8Array(Dt))):ct=function(A){var U=Xr[A]||A;return 4096&A&&A===U?"":String.fromCharCode(U)}(le|je),vt.pendingNewLine&&!vt.isEmpty()&&vt.newLine(this.getPts(ye)),vt.pendingNewLine=!1,vt.addText(ct),ye},cs.prototype.multiByteCharacter=function(ye,A){var U=this.current708Packet.data,G=U[ye+2];return Nv(U[ye+1])&&Nv(G)&&(ye=this.handleText(++ye,A,{isMultiByte:!0})),ye},cs.prototype.setCurrentWindow=function(ye,A){return A.setCurrentWindow(7&this.current708Packet.data[ye]),ye},cs.prototype.defineWindow=function(ye,A){var U=this.current708Packet.data,j=U[ye];A.setCurrentWindow(7&j);var ie=A.currentWindow;return j=U[++ye],ie.visible=(32&j)>>5,ie.rowLock=(16&j)>>4,ie.columnLock=(8&j)>>3,ie.priority=7&j,j=U[++ye],ie.relativePositioning=(128&j)>>7,ie.anchorVertical=127&j,j=U[++ye],ie.anchorHorizontal=j,j=U[++ye],ie.anchorPoint=(240&j)>>4,ie.rowCount=15&j,j=U[++ye],ie.columnCount=63&j,j=U[++ye],ie.windowStyle=(56&j)>>3,ie.penStyle=7&j,ie.virtualRowCount=ie.rowCount+1,ye},cs.prototype.setWindowAttributes=function(ye,A){var U=this.current708Packet.data,j=U[ye],G=A.currentWindow.winAttr;return j=U[++ye],G.fillOpacity=(192&j)>>6,G.fillRed=(48&j)>>4,G.fillGreen=(12&j)>>2,G.fillBlue=3&j,j=U[++ye],G.borderType=(192&j)>>6,G.borderRed=(48&j)>>4,G.borderGreen=(12&j)>>2,G.borderBlue=3&j,j=U[++ye],G.borderType+=(128&j)>>5,G.wordWrap=(64&j)>>6,G.printDirection=(48&j)>>4,G.scrollDirection=(12&j)>>2,G.justify=3&j,j=U[++ye],G.effectSpeed=(240&j)>>4,G.effectDirection=(12&j)>>2,G.displayEffect=3&j,ye},cs.prototype.flushDisplayed=function(ye,A){for(var U=[],j=0;j<8;j++)A.windows[j].visible&&!A.windows[j].isEmpty()&&U.push(A.windows[j].getText());A.endPts=ye,A.text=U.join("\n\n"),this.pushCaption(A),A.startPts=ye},cs.prototype.pushCaption=function(ye){""!==ye.text&&(this.trigger("data",{startPts:ye.startPts,endPts:ye.endPts,text:ye.text,stream:"cc708_"+ye.serviceNum}),ye.text="",ye.startPts=ye.endPts)},cs.prototype.displayWindows=function(ye,A){var j=this.current708Packet.data[++ye],G=this.getPts(ye);this.flushDisplayed(G,A);for(var ie=0;ie<8;ie++)j&1<<ie&&(A.windows[ie].visible=1);return ye},cs.prototype.hideWindows=function(ye,A){var j=this.current708Packet.data[++ye],G=this.getPts(ye);this.flushDisplayed(G,A);for(var ie=0;ie<8;ie++)j&1<<ie&&(A.windows[ie].visible=0);return ye},cs.prototype.toggleWindows=function(ye,A){var j=this.current708Packet.data[++ye],G=this.getPts(ye);this.flushDisplayed(G,A);for(var ie=0;ie<8;ie++)j&1<<ie&&(A.windows[ie].visible^=1);return ye},cs.prototype.clearWindows=function(ye,A){var j=this.current708Packet.data[++ye],G=this.getPts(ye);this.flushDisplayed(G,A);for(var ie=0;ie<8;ie++)j&1<<ie&&A.windows[ie].clearText();return ye},cs.prototype.deleteWindows=function(ye,A){var j=this.current708Packet.data[++ye],G=this.getPts(ye);this.flushDisplayed(G,A);for(var ie=0;ie<8;ie++)j&1<<ie&&A.windows[ie].reset();return ye},cs.prototype.setPenAttributes=function(ye,A){var U=this.current708Packet.data,j=U[ye],G=A.currentWindow.penAttr;return j=U[++ye],G.textTag=(240&j)>>4,G.offset=(12&j)>>2,G.penSize=3&j,j=U[++ye],G.italics=(128&j)>>7,G.underline=(64&j)>>6,G.edgeType=(56&j)>>3,G.fontStyle=7&j,ye},cs.prototype.setPenColor=function(ye,A){var U=this.current708Packet.data,j=U[ye],G=A.currentWindow.penColor;return j=U[++ye],G.fgOpacity=(192&j)>>6,G.fgRed=(48&j)>>4,G.fgGreen=(12&j)>>2,G.fgBlue=3&j,j=U[++ye],G.bgOpacity=(192&j)>>6,G.bgRed=(48&j)>>4,G.bgGreen=(12&j)>>2,G.bgBlue=3&j,j=U[++ye],G.edgeRed=(48&j)>>4,G.edgeGreen=(12&j)>>2,G.edgeBlue=3&j,ye},cs.prototype.setPenLocation=function(ye,A){var U=this.current708Packet.data,j=U[ye],G=A.currentWindow.penLoc;return A.currentWindow.pendingNewLine=!0,j=U[++ye],G.row=15&j,j=U[++ye],G.column=63&j,ye},cs.prototype.reset=function(ye,A){var U=this.getPts(ye);return this.flushDisplayed(U,A),this.initService(A.serviceNum,ye)};var Qd={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,304:174,305:176,306:189,307:191,308:8482,309:162,310:163,311:9834,312:224,313:160,314:232,315:226,316:234,317:238,318:244,319:251,544:193,545:201,546:211,547:218,548:220,549:252,550:8216,551:161,552:42,553:39,554:8212,555:169,556:8480,557:8226,558:8220,559:8221,560:192,561:194,562:199,563:200,564:202,565:203,566:235,567:206,568:207,569:239,570:212,571:217,572:249,573:219,574:171,575:187,800:195,801:227,802:205,803:204,804:236,805:210,806:242,807:213,808:245,809:123,810:125,811:92,812:94,813:95,814:124,815:126,816:196,817:228,818:214,819:246,820:223,821:165,822:164,823:9474,824:197,825:229,826:216,827:248,828:9484,829:9488,830:9492,831:9496},nl=function(A){return null===A?"":(A=Qd[A]||A,String.fromCharCode(A))},X_=[4352,4384,4608,4640,5376,5408,5632,5664,5888,5920,4096,4864,4896,5120,5152],Xd=function(){for(var A=[],U=15;U--;)A.push("");return A},Ps=function ye(A,U){ye.prototype.init.call(this),this.field_=A||0,this.dataChannel_=U||0,this.name_="CC"+(1+(this.field_<<1|this.dataChannel_)),this.setConstants(),this.reset(),this.push=function(j){var G,ie,le,je,qe;if((G=32639&j.ccData)!==this.lastControlCode_){if(4096==(61440&G)?this.lastControlCode_=G:G!==this.PADDING_&&(this.lastControlCode_=null),le=G>>>8,je=255&G,G!==this.PADDING_)if(G===this.RESUME_CAPTION_LOADING_)this.mode_="popOn";else if(G===this.END_OF_CAPTION_)this.mode_="popOn",this.clearFormatting(j.pts),this.flushDisplayed(j.pts),ie=this.displayed_,this.displayed_=this.nonDisplayed_,this.nonDisplayed_=ie,this.startPts_=j.pts;else if(G===this.ROLL_UP_2_ROWS_)this.rollUpRows_=2,this.setRollUp(j.pts);else if(G===this.ROLL_UP_3_ROWS_)this.rollUpRows_=3,this.setRollUp(j.pts);else if(G===this.ROLL_UP_4_ROWS_)this.rollUpRows_=4,this.setRollUp(j.pts);else if(G===this.CARRIAGE_RETURN_)this.clearFormatting(j.pts),this.flushDisplayed(j.pts),this.shiftRowsUp_(),this.startPts_=j.pts;else if(G===this.BACKSPACE_)"popOn"===this.mode_?this.nonDisplayed_[this.row_]=this.nonDisplayed_[this.row_].slice(0,-1):this.displayed_[this.row_]=this.displayed_[this.row_].slice(0,-1);else if(G===this.ERASE_DISPLAYED_MEMORY_)this.flushDisplayed(j.pts),this.displayed_=Xd();else if(G===this.ERASE_NON_DISPLAYED_MEMORY_)this.nonDisplayed_=Xd();else if(G===this.RESUME_DIRECT_CAPTIONING_)"paintOn"!==this.mode_&&(this.flushDisplayed(j.pts),this.displayed_=Xd()),this.mode_="paintOn",this.startPts_=j.pts;else if(this.isSpecialCharacter(le,je))qe=nl((le=(3&le)<<8)|je),this[this.mode_](j.pts,qe),this.column_++;else if(this.isExtCharacter(le,je))"popOn"===this.mode_?this.nonDisplayed_[this.row_]=this.nonDisplayed_[this.row_].slice(0,-1):this.displayed_[this.row_]=this.displayed_[this.row_].slice(0,-1),qe=nl((le=(3&le)<<8)|je),this[this.mode_](j.pts,qe),this.column_++;else if(this.isMidRowCode(le,je))this.clearFormatting(j.pts),this[this.mode_](j.pts," "),this.column_++,14==(14&je)&&this.addFormatting(j.pts,["i"]),1==(1&je)&&this.addFormatting(j.pts,["u"]);else if(this.isOffsetControlCode(le,je))this.column_+=3&je;else if(this.isPAC(le,je)){var vt=X_.indexOf(7968&G);"rollUp"===this.mode_&&(vt-this.rollUpRows_+1<0&&(vt=this.rollUpRows_-1),this.setRollUp(j.pts,vt)),vt!==this.row_&&(this.clearFormatting(j.pts),this.row_=vt),1&je&&-1===this.formatting_.indexOf("u")&&this.addFormatting(j.pts,["u"]),16==(16&G)&&(this.column_=4*((14&G)>>1)),this.isColorPAC(je)&&14==(14&je)&&this.addFormatting(j.pts,["i"])}else this.isNormalChar(le)&&(0===je&&(je=null),qe=nl(le),qe+=nl(je),this[this.mode_](j.pts,qe),this.column_+=qe.length)}else this.lastControlCode_=null}};Ps.prototype=new i,Ps.prototype.flushDisplayed=function(ye){var A=this.displayed_.map(function(U,j){try{return U.trim()}catch{return this.trigger("log",{level:"warn",message:"Skipping a malformed 608 caption at index "+j+"."}),""}},this).join("\n").replace(/^\n+|\n+$/g,"");A.length&&this.trigger("data",{startPts:this.startPts_,endPts:ye,text:A,stream:this.name_})},Ps.prototype.reset=function(){this.mode_="popOn",this.topRow_=0,this.startPts_=0,this.displayed_=Xd(),this.nonDisplayed_=Xd(),this.lastControlCode_=null,this.column_=0,this.row_=14,this.rollUpRows_=2,this.formatting_=[]},Ps.prototype.setConstants=function(){0===this.dataChannel_?(this.BASE_=16,this.EXT_=17,this.CONTROL_=(20|this.field_)<<8,this.OFFSET_=23):1===this.dataChannel_&&(this.BASE_=24,this.EXT_=25,this.CONTROL_=(28|this.field_)<<8,this.OFFSET_=31),this.PADDING_=0,this.RESUME_CAPTION_LOADING_=32|this.CONTROL_,this.END_OF_CAPTION_=47|this.CONTROL_,this.ROLL_UP_2_ROWS_=37|this.CONTROL_,this.ROLL_UP_3_ROWS_=38|this.CONTROL_,this.ROLL_UP_4_ROWS_=39|this.CONTROL_,this.CARRIAGE_RETURN_=45|this.CONTROL_,this.RESUME_DIRECT_CAPTIONING_=41|this.CONTROL_,this.BACKSPACE_=33|this.CONTROL_,this.ERASE_DISPLAYED_MEMORY_=44|this.CONTROL_,this.ERASE_NON_DISPLAYED_MEMORY_=46|this.CONTROL_},Ps.prototype.isSpecialCharacter=function(ye,A){return ye===this.EXT_&&A>=48&&A<=63},Ps.prototype.isExtCharacter=function(ye,A){return(ye===this.EXT_+1||ye===this.EXT_+2)&&A>=32&&A<=63},Ps.prototype.isMidRowCode=function(ye,A){return ye===this.EXT_&&A>=32&&A<=47},Ps.prototype.isOffsetControlCode=function(ye,A){return ye===this.OFFSET_&&A>=33&&A<=35},Ps.prototype.isPAC=function(ye,A){return ye>=this.BASE_&&ye<this.BASE_+8&&A>=64&&A<=127},Ps.prototype.isColorPAC=function(ye){return ye>=64&&ye<=79||ye>=96&&ye<=127},Ps.prototype.isNormalChar=function(ye){return ye>=32&&ye<=127},Ps.prototype.setRollUp=function(ye,A){if("rollUp"!==this.mode_&&(this.row_=14,this.mode_="rollUp",this.flushDisplayed(ye),this.nonDisplayed_=Xd(),this.displayed_=Xd()),void 0!==A&&A!==this.row_)for(var U=0;U<this.rollUpRows_;U++)this.displayed_[A-U]=this.displayed_[this.row_-U],this.displayed_[this.row_-U]="";void 0===A&&(A=this.row_),this.topRow_=A-this.rollUpRows_+1},Ps.prototype.addFormatting=function(ye,A){this.formatting_=this.formatting_.concat(A);var U=A.reduce(function(j,G){return j+"<"+G+">"},"");this[this.mode_](ye,U)},Ps.prototype.clearFormatting=function(ye){if(this.formatting_.length){var A=this.formatting_.reverse().reduce(function(U,j){return U+"</"+j+">"},"");this.formatting_=[],this[this.mode_](ye,A)}},Ps.prototype.popOn=function(ye,A){var U=this.nonDisplayed_[this.row_];this.nonDisplayed_[this.row_]=U+=A},Ps.prototype.rollUp=function(ye,A){var U=this.displayed_[this.row_];this.displayed_[this.row_]=U+=A},Ps.prototype.shiftRowsUp_=function(){var ye;for(ye=0;ye<this.topRow_;ye++)this.displayed_[ye]="";for(ye=this.row_+1;ye<15;ye++)this.displayed_[ye]="";for(ye=this.topRow_;ye<this.row_;ye++)this.displayed_[ye]=this.displayed_[ye+1];this.displayed_[this.row_]=""},Ps.prototype.paintOn=function(ye,A){var U=this.displayed_[this.row_];this.displayed_[this.row_]=U+=A};var Em={CaptionStream:ic,Cea608Stream:Ps,Cea708Stream:cs},nu={H264_STREAM_TYPE:27,ADTS_STREAM_TYPE:15,METADATA_STREAM_TYPE:21},Sm=function(A,U){var j=1;for(A>U&&(j=-1);Math.abs(U-A)>4294967296;)A+=8589934592*j;return A},Fv=function ye(A){var U,j;ye.prototype.init.call(this),this.type_=A||"shared",this.push=function(G){"shared"!==this.type_&&G.type!==this.type_||(void 0===j&&(j=G.dts),G.dts=Sm(G.dts,j),G.pts=Sm(G.pts,j),U=G.dts,this.trigger("data",G))},this.flush=function(){j=U,this.trigger("done")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline")},this.discontinuity=function(){j=void 0,U=void 0},this.reset=function(){this.discontinuity(),this.trigger("reset")}};Fv.prototype=new i;var wm,e__TimestampRolloverStream=Fv,e__handleRollover=Sm,tp=function(A,U,j){var G,ie="";for(G=U;G<j;G++)ie+="%"+("00"+A[G].toString(16)).slice(-2);return ie},ng=function(A,U,j){return decodeURIComponent(tp(A,U,j))},J_=function(A,U,j){return unescape(tp(A,U,j))},ud=function(A){return A[0]<<21|A[1]<<14|A[2]<<7|A[3]},qh={TXXX:function(A){var U;if(3===A.data[0]){for(U=1;U<A.data.length;U++)if(0===A.data[U]){A.description=ng(A.data,1,U),A.value=ng(A.data,U+1,A.data.length).replace(/\0*$/,"");break}A.data=A.value}},WXXX:function(A){var U;if(3===A.data[0])for(U=1;U<A.data.length;U++)if(0===A.data[U]){A.description=ng(A.data,1,U),A.url=ng(A.data,U+1,A.data.length);break}},PRIV:function(A){var U;for(U=0;U<A.data.length;U++)if(0===A.data[U]){A.owner=J_(A.data,0,U);break}A.privateData=A.data.subarray(U+1),A.data=A.privateData}};wm=function(A){var le,U={descriptor:A&&A.descriptor},j=0,G=[],ie=0;if(wm.prototype.init.call(this),this.dispatchType=nu.METADATA_STREAM_TYPE.toString(16),U.descriptor)for(le=0;le<U.descriptor.length;le++)this.dispatchType+=("00"+U.descriptor[le].toString(16)).slice(-2);this.push=function(je){var qe,vt,ct,Dt,an;if("timed-metadata"===je.type){if(je.dataAlignmentIndicator&&(ie=0,G.length=0),0===G.length&&(je.data.length<10||je.data[0]!=="I".charCodeAt(0)||je.data[1]!=="D".charCodeAt(0)||je.data[2]!=="3".charCodeAt(0)))return void this.trigger("log",{level:"warn",message:"Skipping unrecognized metadata packet"});if(G.push(je),ie+=je.data.byteLength,1===G.length&&(j=ud(je.data.subarray(6,10)),j+=10),!(ie<j)){for(qe={data:new Uint8Array(j),frames:[],pts:G[0].pts,dts:G[0].dts},an=0;an<j;)qe.data.set(G[0].data.subarray(0,j-an),an),an+=G[0].data.byteLength,ie-=G[0].data.byteLength,G.shift();vt=10,64&qe.data[5]&&(vt+=4,vt+=ud(qe.data.subarray(10,14)),j-=ud(qe.data.subarray(16,20)));do{if((ct=ud(qe.data.subarray(vt+4,vt+8)))<1)return void this.trigger("log",{level:"warn",message:"Malformed ID3 frame encountered. Skipping metadata parsing."});if((Dt={id:String.fromCharCode(qe.data[vt],qe.data[vt+1],qe.data[vt+2],qe.data[vt+3]),data:qe.data.subarray(vt+10,vt+ct+10)}).key=Dt.id,qh[Dt.id]&&(qh[Dt.id](Dt),"com.apple.streaming.transportStreamTimestamp"===Dt.owner)){var cr=Dt.data,An=(1&cr[3])<<30|cr[4]<<22|cr[5]<<14|cr[6]<<6|cr[7]>>>2;An*=4,Dt.timeStamp=An+=3&cr[7],void 0===qe.pts&&void 0===qe.dts&&(qe.pts=Dt.timeStamp,qe.dts=Dt.timeStamp),this.trigger("timestamp",Dt)}qe.frames.push(Dt),vt+=10,vt+=ct}while(vt<j);this.trigger("data",qe)}}}},wm.prototype=new i;var rg,Du,Jd,t_=wm,n_=e__TimestampRolloverStream;rg=function(){var A=new Uint8Array(188),U=0;rg.prototype.init.call(this),this.push=function(j){var le,G=0,ie=188;for(U?((le=new Uint8Array(j.byteLength+U)).set(A.subarray(0,U)),le.set(j,U),U=0):le=j;ie<le.byteLength;)71!==le[G]||71!==le[ie]?(G++,ie++):(this.trigger("data",le.subarray(G,ie)),G+=188,ie+=188);G<le.byteLength&&(A.set(le.subarray(G),0),U=le.byteLength-G)},this.flush=function(){188===U&&71===A[0]&&(this.trigger("data",A),U=0),this.trigger("done")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline")},this.reset=function(){U=0,this.trigger("reset")}},rg.prototype=new i,Du=function(){var A,U,j,G;Du.prototype.init.call(this),G=this,this.packetsWaitingForPmt=[],this.programMapTable=void 0,A=function(le,je){var qe=0;je.payloadUnitStartIndicator&&(qe+=le[qe]+1),"pat"===je.type?U(le.subarray(qe),je):j(le.subarray(qe),je)},U=function(le,je){je.section_number=le[7],je.last_section_number=le[8],G.pmtPid=(31&le[10])<<8|le[11],je.pmtPid=G.pmtPid},j=function(le,je){var vt,Dt;if(1&le[5]){for(G.programMapTable={video:null,audio:null,"timed-metadata":{}},vt=3+((15&le[1])<<8|le[2])-4,Dt=12+((15&le[10])<<8|le[11]);Dt<vt;){var an=le[Dt],$n=(31&le[Dt+1])<<8|le[Dt+2];an===nu.H264_STREAM_TYPE&&null===G.programMapTable.video?G.programMapTable.video=$n:an===nu.ADTS_STREAM_TYPE&&null===G.programMapTable.audio?G.programMapTable.audio=$n:an===nu.METADATA_STREAM_TYPE&&(G.programMapTable["timed-metadata"][$n]=an),Dt+=5+((15&le[Dt+3])<<8|le[Dt+4])}je.programMapTable=G.programMapTable}},this.push=function(ie){var le={},je=4;if(le.payloadUnitStartIndicator=!!(64&ie[1]),le.pid=31&ie[1],le.pid<<=8,le.pid|=ie[2],(48&ie[3])>>>4>1&&(je+=ie[je]+1),0===le.pid)le.type="pat",A(ie.subarray(je),le),this.trigger("data",le);else if(le.pid===this.pmtPid)for(le.type="pmt",A(ie.subarray(je),le),this.trigger("data",le);this.packetsWaitingForPmt.length;)this.processPes_.apply(this,this.packetsWaitingForPmt.shift());else void 0===this.programMapTable?this.packetsWaitingForPmt.push([ie,je,le]):this.processPes_(ie,je,le)},this.processPes_=function(ie,le,je){je.streamType=je.pid===this.programMapTable.video?nu.H264_STREAM_TYPE:je.pid===this.programMapTable.audio?nu.ADTS_STREAM_TYPE:this.programMapTable["timed-metadata"][je.pid],je.type="pes",je.data=ie.subarray(le),this.trigger("data",je)}},Du.prototype=new i,Du.STREAM_TYPES={h264:27,adts:15},Jd=function(){var le,A=this,U=!1,j={data:[],size:0},G={data:[],size:0},ie={data:[],size:0},qe=function(ct,Dt,an){var mu,$n=new Uint8Array(ct.size),cr={type:Dt},An=0,ri=0,Ca=!1;if(ct.data.length&&!(ct.size<9)){for(cr.trackId=ct.data[0].pid,An=0;An<ct.data.length;An++)$n.set((mu=ct.data[An]).data,ri),ri+=mu.data.byteLength;(function(ct,Dt){var an,$n=ct[0]<<16|ct[1]<<8|ct[2];Dt.data=new Uint8Array,1===$n&&(Dt.packetLength=6+(ct[4]<<8|ct[5]),Dt.dataAlignmentIndicator=0!=(4&ct[6]),192&(an=ct[7])&&(Dt.pts=(14&ct[9])<<27|(255&ct[10])<<20|(254&ct[11])<<12|(255&ct[12])<<5|(254&ct[13])>>>3,Dt.pts*=4,Dt.pts+=(6&ct[13])>>>1,Dt.dts=Dt.pts,64&an&&(Dt.dts=(14&ct[14])<<27|(255&ct[15])<<20|(254&ct[16])<<12|(255&ct[17])<<5|(254&ct[18])>>>3,Dt.dts*=4,Dt.dts+=(6&ct[18])>>>1)),Dt.data=ct.subarray(9+ct[8]))})($n,cr),Ca="video"===Dt||cr.packetLength<=ct.size,(an||Ca)&&(ct.size=0,ct.data.length=0),Ca&&A.trigger("data",cr)}};Jd.prototype.init.call(this),this.push=function(vt){({pat:function(){},pes:function(){var Dt,an;switch(vt.streamType){case nu.H264_STREAM_TYPE:Dt=j,an="video";break;case nu.ADTS_STREAM_TYPE:Dt=G,an="audio";break;case nu.METADATA_STREAM_TYPE:Dt=ie,an="timed-metadata";break;default:return}vt.payloadUnitStartIndicator&&qe(Dt,an,!0),Dt.data.push(vt),Dt.size+=vt.data.byteLength},pmt:function(){var Dt={type:"metadata",tracks:[]};null!==(le=vt.programMapTable).video&&Dt.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+le.video,codec:"avc",type:"video"}),null!==le.audio&&Dt.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+le.audio,codec:"adts",type:"audio"}),U=!0,A.trigger("data",Dt)}})[vt.type]()},this.reset=function(){j.size=0,j.data.length=0,G.size=0,G.data.length=0,this.trigger("reset")},this.flushStreams_=function(){qe(j,"video"),qe(G,"audio"),qe(ie,"timed-metadata")},this.flush=function(){if(!U&&le){var vt={type:"metadata",tracks:[]};null!==le.video&&vt.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+le.video,codec:"avc",type:"video"}),null!==le.audio&&vt.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+le.audio,codec:"adts",type:"audio"}),A.trigger("data",vt)}U=!1,this.flushStreams_(),this.trigger("done")}},Jd.prototype=new i;var r_={PAT_PID:0,MP2T_PACKET_LENGTH:188,TransportPacketStream:rg,TransportParseStream:Du,ElementaryStream:Jd,TimestampRolloverStream:n_,CaptionStream:Em.CaptionStream,Cea608Stream:Em.Cea608Stream,Cea708Stream:Em.Cea708Stream,MetadataStream:t_};for(var Cm in nu)nu.hasOwnProperty(Cm)&&(r_[Cm]=nu[Cm]);var Uv,Pc=r_,s_=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350];Uv=function(A){var U,j=0;Uv.prototype.init.call(this),this.skipWarn_=function(G,ie){this.trigger("log",{level:"warn",message:"adts skiping bytes "+G+" to "+ie+" in frame "+j+" outside syncword"})},this.push=function(G){var le,je,qe,vt,ct,ie=0;if(A||(j=0),"audio"===G.type){U&&U.length?(qe=U,(U=new Uint8Array(qe.byteLength+G.data.byteLength)).set(qe),U.set(G.data,qe.byteLength)):U=G.data;for(var Dt;ie+7<U.length;)if(255===U[ie]&&240==(246&U[ie+1])){if("number"==typeof Dt&&(this.skipWarn_(Dt,ie),Dt=null),je=2*(1&~U[ie+1]),ct=9e4*(vt=1024*(1+(3&U[ie+6])))/s_[(60&U[ie+2])>>>2],U.byteLength-ie<(le=(3&U[ie+3])<<11|U[ie+4]<<3|(224&U[ie+5])>>5))break;this.trigger("data",{pts:G.pts+j*ct,dts:G.dts+j*ct,sampleCount:vt,audioobjecttype:1+(U[ie+2]>>>6&3),channelcount:(1&U[ie+2])<<2|(192&U[ie+3])>>>6,samplerate:s_[(60&U[ie+2])>>>2],samplingfrequencyindex:(60&U[ie+2])>>>2,samplesize:16,data:U.subarray(ie+7+je,ie+le)}),j++,ie+=le}else"number"!=typeof Dt&&(Dt=ie),ie++;"number"==typeof Dt&&(this.skipWarn_(Dt,ie),Dt=null),U=U.subarray(ie)}},this.flush=function(){j=0,this.trigger("done")},this.reset=function(){U=void 0,this.trigger("reset")},this.endTimeline=function(){U=void 0,this.trigger("endedtimeline")}},Uv.prototype=new i;var o_,Bv=Uv;o_=function(A){var U=A.byteLength,j=0,G=0;this.length=function(){return 8*U},this.bitsAvailable=function(){return 8*U+G},this.loadWord=function(){var ie=A.byteLength-U,le=new Uint8Array(4),je=Math.min(4,U);if(0===je)throw new Error("no bytes available");le.set(A.subarray(ie,ie+je)),j=new DataView(le.buffer).getUint32(0),G=8*je,U-=je},this.skipBits=function(ie){var le;G>ie?(j<<=ie,G-=ie):(ie-=G,ie-=8*(le=Math.floor(ie/8)),U-=le,this.loadWord(),j<<=ie,G-=ie)},this.readBits=function(ie){var le=Math.min(G,ie),je=j>>>32-le;return(G-=le)>0?j<<=le:U>0&&this.loadWord(),(le=ie-le)>0?je<<le|this.readBits(le):je},this.skipLeadingZeros=function(){var ie;for(ie=0;ie<G;++ie)if(j&2147483648>>>ie)return j<<=ie,G-=ie,ie;return this.loadWord(),ie+this.skipLeadingZeros()},this.skipUnsignedExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros())},this.skipExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros())},this.readUnsignedExpGolomb=function(){var ie=this.skipLeadingZeros();return this.readBits(ie+1)-1},this.readExpGolomb=function(){var ie=this.readUnsignedExpGolomb();return 1&ie?1+ie>>>1:-1*(ie>>>1)},this.readBoolean=function(){return 1===this.readBits(1)},this.readUnsignedByte=function(){return this.readBits(8)},this.loadWord()};var ig,sg,a_,v0=o_;sg=function(){var U,j,A=0;sg.prototype.init.call(this),this.push=function(G){var ie;j?((ie=new Uint8Array(j.byteLength+G.data.byteLength)).set(j),ie.set(G.data,j.byteLength),j=ie):j=G.data;for(var le=j.byteLength;A<le-3;A++)if(1===j[A+2]){U=A+5;break}for(;U<le;)switch(j[U]){case 0:if(0!==j[U-1]){U+=2;break}if(0!==j[U-2]){U++;break}A+3!==U-2&&this.trigger("data",j.subarray(A+3,U-2));do{U++}while(1!==j[U]&&U<le);A=U-2,U+=3;break;case 1:if(0!==j[U-1]||0!==j[U-2]){U+=3;break}this.trigger("data",j.subarray(A+3,U-2)),A=U-2,U+=3;break;default:U+=3}j=j.subarray(A),U-=A,A=0},this.reset=function(){j=null,A=0,this.trigger("reset")},this.flush=function(){j&&j.byteLength>3&&this.trigger("data",j.subarray(A+3)),j=null,A=0,this.trigger("done")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline")}},sg.prototype=new i,a_={100:!0,110:!0,122:!0,244:!0,44:!0,83:!0,86:!0,118:!0,128:!0,138:!0,139:!0,134:!0},ig=function(){var U,j,G,ie,le,je,qe,A=new sg;ig.prototype.init.call(this),U=this,this.push=function(vt){"video"===vt.type&&(j=vt.trackId,G=vt.pts,ie=vt.dts,A.push(vt))},A.on("data",function(vt){var ct={trackId:j,pts:G,dts:ie,data:vt,nalUnitTypeCode:31&vt[0]};switch(ct.nalUnitTypeCode){case 5:ct.nalUnitType="slice_layer_without_partitioning_rbsp_idr";break;case 6:ct.nalUnitType="sei_rbsp",ct.escapedRBSP=le(vt.subarray(1));break;case 7:ct.nalUnitType="seq_parameter_set_rbsp",ct.escapedRBSP=le(vt.subarray(1)),ct.config=je(ct.escapedRBSP);break;case 8:ct.nalUnitType="pic_parameter_set_rbsp";break;case 9:ct.nalUnitType="access_unit_delimiter_rbsp"}U.trigger("data",ct)}),A.on("done",function(){U.trigger("done")}),A.on("partialdone",function(){U.trigger("partialdone")}),A.on("reset",function(){U.trigger("reset")}),A.on("endedtimeline",function(){U.trigger("endedtimeline")}),this.flush=function(){A.flush()},this.partialFlush=function(){A.partialFlush()},this.reset=function(){A.reset()},this.endTimeline=function(){A.endTimeline()},qe=function(ct,Dt){var cr,an=8,$n=8;for(cr=0;cr<ct;cr++)0!==$n&&($n=(an+Dt.readExpGolomb()+256)%256),an=0===$n?an:$n},le=function(ct){for(var cr,An,Dt=ct.byteLength,an=[],$n=1;$n<Dt-2;)0===ct[$n]&&0===ct[$n+1]&&3===ct[$n+2]?(an.push($n+2),$n+=2):$n++;if(0===an.length)return ct;cr=Dt-an.length,An=new Uint8Array(cr);var ri=0;for($n=0;$n<cr;ri++,$n++)ri===an[0]&&(ri++,an.shift()),An[$n]=ct[ri];return An},je=function(ct){var An,ri,Ca,mu,cg,c0,b0,Kv,Zv,d0,E0,Jh,Dt=0,an=0,$n=0,cr=0,Ia=[1,1];if(ri=(An=new v0(ct)).readUnsignedByte(),mu=An.readUnsignedByte(),Ca=An.readUnsignedByte(),An.skipUnsignedExpGolomb(),a_[ri]&&(3===(cg=An.readUnsignedExpGolomb())&&An.skipBits(1),An.skipUnsignedExpGolomb(),An.skipUnsignedExpGolomb(),An.skipBits(1),An.readBoolean()))for(E0=3!==cg?8:12,Jh=0;Jh<E0;Jh++)An.readBoolean()&&qe(Jh<6?16:64,An);if(An.skipUnsignedExpGolomb(),0===(c0=An.readUnsignedExpGolomb()))An.readUnsignedExpGolomb();else if(1===c0)for(An.skipBits(1),An.skipExpGolomb(),An.skipExpGolomb(),b0=An.readUnsignedExpGolomb(),Jh=0;Jh<b0;Jh++)An.skipExpGolomb();if(An.skipUnsignedExpGolomb(),An.skipBits(1),Kv=An.readUnsignedExpGolomb(),Zv=An.readUnsignedExpGolomb(),0===(d0=An.readBits(1))&&An.skipBits(1),An.skipBits(1),An.readBoolean()&&(Dt=An.readUnsignedExpGolomb(),an=An.readUnsignedExpGolomb(),$n=An.readUnsignedExpGolomb(),cr=An.readUnsignedExpGolomb()),An.readBoolean()&&An.readBoolean())switch(An.readUnsignedByte()){case 1:Ia=[1,1];break;case 2:Ia=[12,11];break;case 3:Ia=[10,11];break;case 4:Ia=[16,11];break;case 5:Ia=[40,33];break;case 6:Ia=[24,11];break;case 7:Ia=[20,11];break;case 8:Ia=[32,11];break;case 9:Ia=[80,33];break;case 10:Ia=[18,11];break;case 11:Ia=[15,11];break;case 12:Ia=[64,33];break;case 13:Ia=[160,99];break;case 14:Ia=[4,3];break;case 15:Ia=[3,2];break;case 16:Ia=[2,1];break;case 255:Ia=[An.readUnsignedByte()<<8|An.readUnsignedByte(),An.readUnsignedByte()<<8|An.readUnsignedByte()]}return{profileIdc:ri,levelIdc:Ca,profileCompatibility:mu,width:16*(Kv+1)-2*Dt-2*an,height:(2-d0)*(Zv+1)*16-2*$n-2*cr,sarRatio:Ia}}},ig.prototype=new i;var og,rp={H264Stream:ig,NalByteStream:sg},ip=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350],u_=function(A,U){var j=A[U+6]<<21|A[U+7]<<14|A[U+8]<<7|A[U+9];return j=j>=0?j:0,(16&A[U+5])>>4?j+20:j+10},e0=function ye(A,U){return A.length-U<10||A[U]!=="I".charCodeAt(0)||A[U+1]!=="D".charCodeAt(0)||A[U+2]!=="3".charCodeAt(0)?U:ye(A,U+=u_(A,U))},ld=function(A){return A[0]<<21|A[1]<<14|A[2]<<7|A[3]},l_=function(A,U,j){return unescape(function(A,U,j){var G,ie="";for(G=U;G<j;G++)ie+="%"+("00"+A[G].toString(16)).slice(-2);return ie}(A,U,j))},sp={isLikelyAacData:function(A){var U=e0(A,0);return A.length>=U+2&&255==(255&A[U])&&240==(240&A[U+1])&&16==(22&A[U+1])},parseId3TagSize:u_,parseAdtsSize:function(A,U){return 6144&A[U+3]|A[U+4]<<3|(224&A[U+5])>>5},parseType:function(A,U){return A[U]==="I".charCodeAt(0)&&A[U+1]==="D".charCodeAt(0)&&A[U+2]==="3".charCodeAt(0)?"timed-metadata":!0&A[U]&&240==(240&A[U+1])?"audio":null},parseSampleRate:function(A){for(var U=0;U+5<A.length;){if(255===A[U]&&240==(246&A[U+1]))return ip[(60&A[U+2])>>>2];U++}return null},parseAacTimestamp:function(A){var U,j,G;U=10,64&A[5]&&(U+=4,U+=ld(A.subarray(10,14)));do{if((j=ld(A.subarray(U+4,U+8)))<1)return null;if("PRIV"===String.fromCharCode(A[U],A[U+1],A[U+2],A[U+3])){G=A.subarray(U+10,U+j+10);for(var le=0;le<G.byteLength;le++)if(0===G[le]){if("com.apple.streaming.transportStreamTimestamp"===l_(G,0,le)){var qe=G.subarray(le+1),vt=(1&qe[3])<<30|qe[4]<<22|qe[5]<<14|qe[6]<<6|qe[7]>>>2;return(vt*=4)+(3&qe[7])}break}}U+=10,U+=j}while(U<A.byteLength);return null}};og=function(){var A=new Uint8Array,U=0;og.prototype.init.call(this),this.setTimestamp=function(j){U=j},this.push=function(j){var je,qe,vt,G=0,ie=0;for(A.length?(vt=A.length,(A=new Uint8Array(j.byteLength+vt)).set(A.subarray(0,vt)),A.set(j,vt)):A=j;A.length-ie>=3;)if(A[ie]!=="I".charCodeAt(0)||A[ie+1]!=="D".charCodeAt(0)||A[ie+2]!=="3".charCodeAt(0))if(255!=(255&A[ie])||240!=(240&A[ie+1]))ie++;else{if(A.length-ie<7||ie+(G=sp.parseAdtsSize(A,ie))>A.length)break;qe={type:"audio",data:A.subarray(ie,ie+G),pts:U,dts:U},this.trigger("data",qe),ie+=G}else{if(A.length-ie<10||ie+(G=sp.parseId3TagSize(A,ie))>A.length)break;je={type:"timed-metadata",data:A.subarray(ie,ie+G)},this.trigger("data",je),ie+=G}A=A.length-ie>0?A.subarray(ie):new Uint8Array},this.reset=function(){A=new Uint8Array,this.trigger("reset")},this.endTimeline=function(){A=new Uint8Array,this.trigger("endedtimeline")}},og.prototype=new i;var oc,eh,xm,th,ag=og,gu=["audioobjecttype","channelcount","samplerate","samplingfrequencyindex","samplesize"],ug=["width","height","profileIdc","levelIdc","profileCompatibility","sarRatio"],Zh=rp.H264Stream,Yh=sp.isLikelyAacData,dd=function(A,U){U.stream=A,this.trigger("log",U)},h_=function(A,U){for(var j=Object.keys(U),G=0;G<j.length;G++){var ie=j[G];"headOfPipeline"===ie||!U[ie].on||U[ie].on("log",dd.bind(A,ie))}},n0=function(A,U){var j;if(A.length!==U.length)return!1;for(j=0;j<A.length;j++)if(A[j]!==U[j])return!1;return!0},Hv=function(A,U,j,G,ie,le){return{start:{dts:A,pts:A+(j-U)},end:{dts:A+(G-U),pts:A+(ie-j)},prependedContentDuration:le,baseMediaDecodeTime:A}};eh=function(A,U){var G,j=[],ie=0,le=0,je=1/0;G=(U=U||{}).firstSequenceNumber||0,eh.prototype.init.call(this),this.push=function(qe){Ul_collectDtsInfo(A,qe),A&&gu.forEach(function(vt){A[vt]=qe[vt]}),j.push(qe)},this.setEarliestDts=function(qe){ie=qe},this.setVideoBaseMediaDecodeTime=function(qe){je=qe},this.setAudioAppendStart=function(qe){le=qe},this.flush=function(){var qe,vt,ct,Dt,an,$n,cr;0!==j.length?(qe=function(A,U,j){return U.minSegmentDts>=j?A:(U.minSegmentDts=1/0,A.filter(function(G){return G.dts>=j&&(U.minSegmentDts=Math.min(U.minSegmentDts,G.dts),U.minSegmentPts=U.minSegmentDts,!0)}))}(j,A,ie),A.baseMediaDecodeTime=Ul_calculateTrackBaseMediaDecodeTime(A,U.keepOriginalTimestamps),cr=Jp_prefixWithSilence(A,qe,le,je),A.samples=function(A){var U,G=[];for(U=0;U<A.length;U++)G.push({size:A[U].data.byteLength,duration:1024});return G}(qe),ct=El_mdat(function(A){var U,j,G=0,ie=new Uint8Array(function(A){var U,G=0;for(U=0;U<A.length;U++)G+=A[U].data.byteLength;return G}(A));for(U=0;U<A.length;U++)ie.set((j=A[U]).data,G),G+=j.data.byteLength;return ie}(qe)),j=[],vt=El_moof(G,[A]),Dt=new Uint8Array(vt.byteLength+ct.byteLength),G++,Dt.set(vt),Dt.set(ct,vt.byteLength),Ul_clearDtsInfo(A),an=Math.ceil(9216e4/A.samplerate),qe.length&&($n=qe.length*an,this.trigger("segmentTimingInfo",Hv(bs_audioTsToVideoTs(A.baseMediaDecodeTime,A.samplerate),qe[0].dts,qe[0].pts,qe[0].dts+$n,qe[0].pts+$n,cr||0)),this.trigger("timingInfo",{start:qe[0].pts,end:qe[0].pts+$n})),this.trigger("data",{track:A,boxes:Dt}),this.trigger("done","AudioSegmentStream")):this.trigger("done","AudioSegmentStream")},this.reset=function(){Ul_clearDtsInfo(A),j=[],this.trigger("reset")}},eh.prototype=new i,oc=function(A,U){var j,le,je,G=[],ie=[];j=(U=U||{}).firstSequenceNumber||0,oc.prototype.init.call(this),delete A.minPTS,this.gopCache_=[],this.push=function(qe){Ul_collectDtsInfo(A,qe),"seq_parameter_set_rbsp"===qe.nalUnitType&&!le&&(le=qe.config,A.sps=[qe.data],ug.forEach(function(vt){A[vt]=le[vt]},this)),"pic_parameter_set_rbsp"===qe.nalUnitType&&!je&&(je=qe.data,A.pps=[qe.data]),G.push(qe)},this.flush=function(){for(var qe,vt,ct,Dt,an,$n,An,ri,cr=0;G.length&&"access_unit_delimiter_rbsp"!==G[0].nalUnitType;)G.shift();if(0===G.length)return this.resetStream_(),void this.trigger("done","VideoSegmentStream");if(qe=function(A){var U,j,G=[],ie=[];for(ie.byteLength=0,ie.nalCount=0,ie.duration=0,G.byteLength=0,U=0;U<A.length;U++)"access_unit_delimiter_rbsp"===(j=A[U]).nalUnitType?(G.length&&(G.duration=j.dts-G.dts,ie.byteLength+=G.byteLength,ie.nalCount+=G.length,ie.duration+=G.duration,ie.push(G)),(G=[j]).byteLength=j.data.byteLength,G.pts=j.pts,G.dts=j.dts):("slice_layer_without_partitioning_rbsp_idr"===j.nalUnitType&&(G.keyFrame=!0),G.duration=j.dts-G.dts,G.byteLength+=j.data.byteLength,G.push(j));return ie.length&&(!G.duration||G.duration<=0)&&(G.duration=ie[ie.length-1].duration),ie.byteLength+=G.byteLength,ie.nalCount+=G.length,ie.duration+=G.duration,ie.push(G),ie}(G),(ct=function(A){var U,j,G=[],ie=[];for(G.byteLength=0,G.nalCount=0,G.duration=0,G.pts=A[0].pts,G.dts=A[0].dts,ie.byteLength=0,ie.nalCount=0,ie.duration=0,ie.pts=A[0].pts,ie.dts=A[0].dts,U=0;U<A.length;U++)(j=A[U]).keyFrame?(G.length&&(ie.push(G),ie.byteLength+=G.byteLength,ie.nalCount+=G.nalCount,ie.duration+=G.duration),(G=[j]).nalCount=j.length,G.byteLength=j.byteLength,G.pts=j.pts,G.dts=j.dts,G.duration=j.duration):(G.duration+=j.duration,G.nalCount+=j.length,G.byteLength+=j.byteLength,G.push(j));return ie.length&&G.duration<=0&&(G.duration=ie[ie.length-1].duration),ie.byteLength+=G.byteLength,ie.nalCount+=G.nalCount,ie.duration+=G.duration,ie.push(G),ie}(qe))[0][0].keyFrame||((vt=this.getGopForFusion_(G[0],A))?(cr=vt.duration,ct.unshift(vt),ct.byteLength+=vt.byteLength,ct.nalCount+=vt.nalCount,ct.pts=vt.pts,ct.dts=vt.dts,ct.duration+=vt.duration):ct=function(A){var U;return!A[0][0].keyFrame&&A.length>1&&(U=A.shift(),A.byteLength-=U.byteLength,A.nalCount-=U.nalCount,A[0][0].dts=U.dts,A[0][0].pts=U.pts,A[0][0].duration+=U.duration),A}(ct)),ie.length){var Ca;if(!(Ca=U.alignGopsAtEnd?this.alignGopsAtEnd_(ct):this.alignGopsAtStart_(ct)))return this.gopCache_.unshift({gop:ct.pop(),pps:A.pps,sps:A.sps}),this.gopCache_.length=Math.min(6,this.gopCache_.length),G=[],this.resetStream_(),void this.trigger("done","VideoSegmentStream");Ul_clearDtsInfo(A),ct=Ca}Ul_collectDtsInfo(A,ct),A.samples=function(A,U){var j,G,ie,le,qe=U||0,vt=[];for(j=0;j<A.length;j++)for(le=A[j],G=0;G<le.length;G++)qe+=(ie=mm(le[G],qe)).size,vt.push(ie);return vt}(ct),an=El_mdat(function(A){var U,j,G,ie,le,je,qe=0,an=new Uint8Array(A.byteLength+4*A.nalCount),$n=new DataView(an.buffer);for(U=0;U<A.length;U++)for(ie=A[U],j=0;j<ie.length;j++)for(le=ie[j],G=0;G<le.length;G++)$n.setUint32(qe,(je=le[G]).data.byteLength),an.set(je.data,qe+=4),qe+=je.data.byteLength;return an}(ct)),A.baseMediaDecodeTime=Ul_calculateTrackBaseMediaDecodeTime(A,U.keepOriginalTimestamps),this.trigger("processedGopsInfo",ct.map(function(mu){return{pts:mu.pts,dts:mu.dts,byteLength:mu.byteLength}})),this.trigger("segmentTimingInfo",Hv(A.baseMediaDecodeTime,(An=ct[0]).dts,An.pts,(ri=ct[ct.length-1]).dts+ri.duration,ri.pts+ri.duration,cr)),this.trigger("timingInfo",{start:ct[0].pts,end:ct[ct.length-1].pts+ct[ct.length-1].duration}),this.gopCache_.unshift({gop:ct.pop(),pps:A.pps,sps:A.sps}),this.gopCache_.length=Math.min(6,this.gopCache_.length),G=[],this.trigger("baseMediaDecodeTime",A.baseMediaDecodeTime),this.trigger("timelineStartInfo",A.timelineStartInfo),Dt=El_moof(j,[A]),$n=new Uint8Array(Dt.byteLength+an.byteLength),j++,$n.set(Dt),$n.set(an,Dt.byteLength),this.trigger("data",{track:A,boxes:$n}),this.resetStream_(),this.trigger("done","VideoSegmentStream")},this.reset=function(){this.resetStream_(),G=[],this.gopCache_.length=0,ie.length=0,this.trigger("reset")},this.resetStream_=function(){Ul_clearDtsInfo(A),le=void 0,je=void 0},this.getGopForFusion_=function(qe){var an,$n,cr,An,ri,Dt=1/0;for(ri=0;ri<this.gopCache_.length;ri++)cr=(An=this.gopCache_[ri]).gop,A.pps&&n0(A.pps[0],An.pps[0])&&A.sps&&n0(A.sps[0],An.sps[0])&&(cr.dts<A.timelineStartInfo.dts||(an=qe.dts-cr.dts-cr.duration)>=-1e4&&an<=45e3&&(!$n||Dt>an)&&($n=An,Dt=an));return $n?$n.gop:null},this.alignGopsAtStart_=function(qe){var vt,ct,Dt,an,$n,cr,An,ri;for($n=qe.byteLength,cr=qe.nalCount,An=qe.duration,vt=ct=0;vt<ie.length&&ct<qe.length&&(Dt=ie[vt]).pts!==(an=qe[ct]).pts;)an.pts>Dt.pts?vt++:(ct++,$n-=an.byteLength,cr-=an.nalCount,An-=an.duration);return 0===ct?qe:ct===qe.length?null:((ri=qe.slice(ct)).byteLength=$n,ri.duration=An,ri.nalCount=cr,ri.pts=ri[0].pts,ri.dts=ri[0].dts,ri)},this.alignGopsAtEnd_=function(qe){var vt,ct,Dt,an,$n,cr,An;for(vt=ie.length-1,ct=qe.length-1,$n=null,cr=!1;vt>=0&&ct>=0;){if((Dt=ie[vt]).pts===(an=qe[ct]).pts){cr=!0;break}Dt.pts>an.pts?vt--:(vt===ie.length-1&&($n=ct),ct--)}if(!cr&&null===$n)return null;if(0===(An=cr?ct:$n))return qe;var ri=qe.slice(An),Ca=ri.reduce(function(mu,cg){return mu.byteLength+=cg.byteLength,mu.duration+=cg.duration,mu.nalCount+=cg.nalCount,mu},{byteLength:0,duration:0,nalCount:0});return ri.byteLength=Ca.byteLength,ri.duration=Ca.duration,ri.nalCount=Ca.nalCount,ri.pts=ri[0].pts,ri.dts=ri[0].dts,ri},this.alignGopsWith=function(qe){ie=qe}},oc.prototype=new i,th=function(A,U){this.numberOfTracks=0,this.metadataStream=U,this.remuxTracks=!(typeof(A=A||{}).remux<"u"&&!A.remux),this.keepOriginalTimestamps="boolean"==typeof A.keepOriginalTimestamps&&A.keepOriginalTimestamps,this.pendingTracks=[],this.videoTrack=null,this.pendingBoxes=[],this.pendingCaptions=[],this.pendingMetadata=[],this.pendingBytes=0,this.emittedTracks=0,th.prototype.init.call(this),this.push=function(j){return j.text?this.pendingCaptions.push(j):j.frames?this.pendingMetadata.push(j):(this.pendingTracks.push(j.track),this.pendingBytes+=j.boxes.byteLength,"video"===j.track.type&&(this.videoTrack=j.track,this.pendingBoxes.push(j.boxes)),void("audio"===j.track.type&&(this.audioTrack=j.track,this.pendingBoxes.unshift(j.boxes))))}},th.prototype=new i,th.prototype.flush=function(ye){var j,G,ie,je,A=0,U={captions:[],captionStreams:{},metadata:[],info:{}},le=0;if(this.pendingTracks.length<this.numberOfTracks){if("VideoSegmentStream"!==ye&&"AudioSegmentStream"!==ye)return;if(this.remuxTracks)return;if(0===this.pendingTracks.length)return this.emittedTracks++,void(this.emittedTracks>=this.numberOfTracks&&(this.trigger("done"),this.emittedTracks=0))}if(this.videoTrack?(le=this.videoTrack.timelineStartInfo.pts,ug.forEach(function(qe){U.info[qe]=this.videoTrack[qe]},this)):this.audioTrack&&(le=this.audioTrack.timelineStartInfo.pts,gu.forEach(function(qe){U.info[qe]=this.audioTrack[qe]},this)),this.videoTrack||this.audioTrack){for(U.type=1===this.pendingTracks.length?this.pendingTracks[0].type:"combined",this.emittedTracks+=this.pendingTracks.length,ie=function(A){var G,U=D(),j=Le(A);return(G=new Uint8Array(U.byteLength+j.byteLength)).set(U),G.set(j,U.byteLength),G}(this.pendingTracks),U.initSegment=new Uint8Array(ie.byteLength),U.initSegment.set(ie),U.data=new Uint8Array(this.pendingBytes),je=0;je<this.pendingBoxes.length;je++)U.data.set(this.pendingBoxes[je],A),A+=this.pendingBoxes[je].byteLength;for(je=0;je<this.pendingCaptions.length;je++)(j=this.pendingCaptions[je]).startTime=bs_metadataTsToSeconds(j.startPts,le,this.keepOriginalTimestamps),j.endTime=bs_metadataTsToSeconds(j.endPts,le,this.keepOriginalTimestamps),U.captionStreams[j.stream]=!0,U.captions.push(j);for(je=0;je<this.pendingMetadata.length;je++)(G=this.pendingMetadata[je]).cueTime=bs_metadataTsToSeconds(G.pts,le,this.keepOriginalTimestamps),U.metadata.push(G);for(U.metadata.dispatchType=this.metadataStream.dispatchType,this.pendingTracks.length=0,this.videoTrack=null,this.pendingBoxes.length=0,this.pendingCaptions.length=0,this.pendingBytes=0,this.pendingMetadata.length=0,this.trigger("data",U),je=0;je<U.captions.length;je++)this.trigger("caption",j=U.captions[je]);for(je=0;je<U.metadata.length;je++)this.trigger("id3Frame",G=U.metadata[je])}this.emittedTracks>=this.numberOfTracks&&(this.trigger("done"),this.emittedTracks=0)},th.prototype.setRemux=function(ye){this.remuxTracks=ye},xm=function(A){var G,ie,U=this,j=!0;xm.prototype.init.call(this),this.baseMediaDecodeTime=(A=A||{}).baseMediaDecodeTime||0,this.transmuxPipeline_={},this.setupAacPipeline=function(){var le={};this.transmuxPipeline_=le,le.type="aac",le.metadataStream=new Pc.MetadataStream,le.aacStream=new ag,le.audioTimestampRolloverStream=new Pc.TimestampRolloverStream("audio"),le.timedMetadataTimestampRolloverStream=new Pc.TimestampRolloverStream("timed-metadata"),le.adtsStream=new Bv,le.coalesceStream=new th(A,le.metadataStream),le.headOfPipeline=le.aacStream,le.aacStream.pipe(le.audioTimestampRolloverStream).pipe(le.adtsStream),le.aacStream.pipe(le.timedMetadataTimestampRolloverStream).pipe(le.metadataStream).pipe(le.coalesceStream),le.metadataStream.on("timestamp",function(je){le.aacStream.setTimestamp(je.timeStamp)}),le.aacStream.on("data",function(je){"timed-metadata"!==je.type&&"audio"!==je.type||le.audioSegmentStream||(ie=ie||{timelineStartInfo:{baseMediaDecodeTime:U.baseMediaDecodeTime},codec:"adts",type:"audio"},le.coalesceStream.numberOfTracks++,le.audioSegmentStream=new eh(ie,A),le.audioSegmentStream.on("log",U.getLogTrigger_("audioSegmentStream")),le.audioSegmentStream.on("timingInfo",U.trigger.bind(U,"audioTimingInfo")),le.adtsStream.pipe(le.audioSegmentStream).pipe(le.coalesceStream),U.trigger("trackinfo",{hasAudio:!!ie,hasVideo:!!G}))}),le.coalesceStream.on("data",this.trigger.bind(this,"data")),le.coalesceStream.on("done",this.trigger.bind(this,"done")),h_(this,le)},this.setupTsPipeline=function(){var le={};this.transmuxPipeline_=le,le.type="ts",le.metadataStream=new Pc.MetadataStream,le.packetStream=new Pc.TransportPacketStream,le.parseStream=new Pc.TransportParseStream,le.elementaryStream=new Pc.ElementaryStream,le.timestampRolloverStream=new Pc.TimestampRolloverStream,le.adtsStream=new Bv,le.h264Stream=new Zh,le.captionStream=new Pc.CaptionStream(A),le.coalesceStream=new th(A,le.metadataStream),le.headOfPipeline=le.packetStream,le.packetStream.pipe(le.parseStream).pipe(le.elementaryStream).pipe(le.timestampRolloverStream),le.timestampRolloverStream.pipe(le.h264Stream),le.timestampRolloverStream.pipe(le.adtsStream),le.timestampRolloverStream.pipe(le.metadataStream).pipe(le.coalesceStream),le.h264Stream.pipe(le.captionStream).pipe(le.coalesceStream),le.elementaryStream.on("data",function(je){var qe;if("metadata"===je.type){for(qe=je.tracks.length;qe--;)G||"video"!==je.tracks[qe].type?!ie&&"audio"===je.tracks[qe].type&&((ie=je.tracks[qe]).timelineStartInfo.baseMediaDecodeTime=U.baseMediaDecodeTime):(G=je.tracks[qe]).timelineStartInfo.baseMediaDecodeTime=U.baseMediaDecodeTime;G&&!le.videoSegmentStream&&(le.coalesceStream.numberOfTracks++,le.videoSegmentStream=new oc(G,A),le.videoSegmentStream.on("log",U.getLogTrigger_("videoSegmentStream")),le.videoSegmentStream.on("timelineStartInfo",function(vt){ie&&!A.keepOriginalTimestamps&&(ie.timelineStartInfo=vt,le.audioSegmentStream.setEarliestDts(vt.dts-U.baseMediaDecodeTime))}),le.videoSegmentStream.on("processedGopsInfo",U.trigger.bind(U,"gopInfo")),le.videoSegmentStream.on("segmentTimingInfo",U.trigger.bind(U,"videoSegmentTimingInfo")),le.videoSegmentStream.on("baseMediaDecodeTime",function(vt){ie&&le.audioSegmentStream.setVideoBaseMediaDecodeTime(vt)}),le.videoSegmentStream.on("timingInfo",U.trigger.bind(U,"videoTimingInfo")),le.h264Stream.pipe(le.videoSegmentStream).pipe(le.coalesceStream)),ie&&!le.audioSegmentStream&&(le.coalesceStream.numberOfTracks++,le.audioSegmentStream=new eh(ie,A),le.audioSegmentStream.on("log",U.getLogTrigger_("audioSegmentStream")),le.audioSegmentStream.on("timingInfo",U.trigger.bind(U,"audioTimingInfo")),le.audioSegmentStream.on("segmentTimingInfo",U.trigger.bind(U,"audioSegmentTimingInfo")),le.adtsStream.pipe(le.audioSegmentStream).pipe(le.coalesceStream)),U.trigger("trackinfo",{hasAudio:!!ie,hasVideo:!!G})}}),le.coalesceStream.on("data",this.trigger.bind(this,"data")),le.coalesceStream.on("id3Frame",function(je){je.dispatchType=le.metadataStream.dispatchType,U.trigger("id3Frame",je)}),le.coalesceStream.on("caption",this.trigger.bind(this,"caption")),le.coalesceStream.on("done",this.trigger.bind(this,"done")),h_(this,le)},this.setBaseMediaDecodeTime=function(le){var je=this.transmuxPipeline_;A.keepOriginalTimestamps||(this.baseMediaDecodeTime=le),ie&&(ie.timelineStartInfo.dts=void 0,ie.timelineStartInfo.pts=void 0,Ul_clearDtsInfo(ie),je.audioTimestampRolloverStream&&je.audioTimestampRolloverStream.discontinuity()),G&&(je.videoSegmentStream&&(je.videoSegmentStream.gopCache_=[]),G.timelineStartInfo.dts=void 0,G.timelineStartInfo.pts=void 0,Ul_clearDtsInfo(G),je.captionStream.reset()),je.timestampRolloverStream&&je.timestampRolloverStream.discontinuity()},this.setAudioAppendStart=function(le){ie&&this.transmuxPipeline_.audioSegmentStream.setAudioAppendStart(le)},this.setRemux=function(le){var je=this.transmuxPipeline_;A.remux=le,je&&je.coalesceStream&&je.coalesceStream.setRemux(le)},this.alignGopsWith=function(le){G&&this.transmuxPipeline_.videoSegmentStream&&this.transmuxPipeline_.videoSegmentStream.alignGopsWith(le)},this.getLogTrigger_=function(le){var je=this;return function(qe){qe.stream=le,je.trigger("log",qe)}},this.push=function(le){if(j){var je=Yh(le);je&&"aac"!==this.transmuxPipeline_.type?this.setupAacPipeline():!je&&"ts"!==this.transmuxPipeline_.type&&this.setupTsPipeline(),j=!1}this.transmuxPipeline_.headOfPipeline.push(le)},this.flush=function(){j=!0,this.transmuxPipeline_.headOfPipeline.flush()},this.endTimeline=function(){this.transmuxPipeline_.headOfPipeline.endTimeline()},this.reset=function(){this.transmuxPipeline_.headOfPipeline&&this.transmuxPipeline_.headOfPipeline.reset()},this.resetCaptions=function(){this.transmuxPipeline_.captionStream&&this.transmuxPipeline_.captionStream.reset()}},xm.prototype=new i;var br,qi,xo,Dm={Transmuxer:xm,VideoSegmentStream:oc,AudioSegmentStream:eh,AUDIO_PROPERTIES:gu,VIDEO_PROPERTIES:ug,generateSegmentTimingInfo:Hv},Qh_toUnsigned=function(A){return A>>>0},Xh=function(A){var U="";return U+=String.fromCharCode(A[0]),U+=String.fromCharCode(A[1]),(U+=String.fromCharCode(A[2]))+String.fromCharCode(A[3])},Gv=Qh_toUnsigned,go=function ye(A,U){var G,ie,le,je,qe,j=[];if(!U.length)return null;for(G=0;G<A.byteLength;)ie=Gv(A[G]<<24|A[G+1]<<16|A[G+2]<<8|A[G+3]),le=Xh(A.subarray(G+4,G+8)),je=ie>1?G+ie:A.byteLength,le===U[0]&&(1===U.length?j.push(A.subarray(G+8,je)):(qe=ye(A.subarray(G+8,je),U.slice(1))).length&&(j=j.concat(qe))),G=je;return j},p_=Qh_toUnsigned,g_=t.getUint64,v_=function(A){return{isLeading:(12&A[0])>>>2,dependsOn:3&A[0],isDependedOn:(192&A[1])>>>6,hasRedundancy:(48&A[1])>>>4,paddingValue:(14&A[1])>>>1,isNonSyncSample:1&A[1],degradationPriority:A[2]<<8|A[3]}},a=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},n=typeof window<"u"?window:typeof a<"u"?a:typeof self<"u"?self:{},c=function(A){for(var ie,le,U=A.byteLength,j=[],G=1;G<U-2;)0===A[G]&&0===A[G+1]&&3===A[G+2]?(j.push(G+2),G+=2):G++;if(0===j.length)return A;ie=U-j.length,le=new Uint8Array(ie);var je=0;for(G=0;G<ie;je++,G++)je===j[0]&&(je++,j.shift()),le[G]=A[je];return le},p=Em.CaptionStream,_=function(A,U){for(var j=A,G=0;G<U.length;G++){var ie=U[G];if(j<ie.size)return ie;j-=ie.size}return null},te=function(A,U){var j=go(A,["moof","traf"]),G=go(A,["mdat"]),ie={},le=[];return G.forEach(function(je,qe){le.push({mdat:je,traf:j[qe]})}),le.forEach(function(je){var ri,Ca,qe=je.mdat,vt=je.traf,Dt=function(A){var Dt,U=new DataView(A.buffer,A.byteOffset,A.byteLength),j={version:A[0],flags:new Uint8Array(A.subarray(1,4)),trackId:U.getUint32(4)},G=1&j.flags[2],ie=2&j.flags[2],le=8&j.flags[2],je=16&j.flags[2],qe=32&j.flags[2],vt=65536&j.flags[0],ct=131072&j.flags[0];return Dt=8,G&&(Dt+=4,j.baseDataOffset=U.getUint32(12),Dt+=4),ie&&(j.sampleDescriptionIndex=U.getUint32(Dt),Dt+=4),le&&(j.defaultSampleDuration=U.getUint32(Dt),Dt+=4),je&&(j.defaultSampleSize=U.getUint32(Dt),Dt+=4),qe&&(j.defaultSampleFlags=U.getUint32(Dt)),vt&&(j.durationIsEmpty=!0),!G&&ct&&(j.baseDataOffsetIsMoof=!0),j}(go(vt,["tfhd"])[0]),an=Dt.trackId,$n=go(vt,["tfdt"]),cr=$n.length>0?function(A){var U={version:A[0],flags:new Uint8Array(A.subarray(1,4))};return U.baseMediaDecodeTime=1===U.version?g_(A.subarray(4)):p_(A[4]<<24|A[5]<<16|A[6]<<8|A[7]),U}($n[0]).baseMediaDecodeTime:0,An=go(vt,["trun"]);U===an&&An.length>0&&(ri=function(A,U,j){var G=U,ie=j.defaultSampleDuration||0,le=j.defaultSampleSize||0,je=j.trackId,qe=[];return A.forEach(function(vt){var Dt=function(A){var an,U={version:A[0],flags:new Uint8Array(A.subarray(1,4)),samples:[]},j=new DataView(A.buffer,A.byteOffset,A.byteLength),G=1&U.flags[2],ie=4&U.flags[2],le=1&U.flags[1],je=2&U.flags[1],qe=4&U.flags[1],vt=8&U.flags[1],ct=j.getUint32(4),Dt=8;for(G&&(U.dataOffset=j.getInt32(Dt),Dt+=4),ie&&ct&&(an={flags:v_(A.subarray(Dt,Dt+4))},Dt+=4,le&&(an.duration=j.getUint32(Dt),Dt+=4),je&&(an.size=j.getUint32(Dt),Dt+=4),vt&&(an.compositionTimeOffset=1===U.version?j.getInt32(Dt):j.getUint32(Dt),Dt+=4),U.samples.push(an),ct--);ct--;)an={},le&&(an.duration=j.getUint32(Dt),Dt+=4),je&&(an.size=j.getUint32(Dt),Dt+=4),qe&&(an.flags=v_(A.subarray(Dt,Dt+4)),Dt+=4),vt&&(an.compositionTimeOffset=1===U.version?j.getInt32(Dt):j.getUint32(Dt),Dt+=4),U.samples.push(an);return U}(vt).samples;Dt.forEach(function(an){void 0===an.duration&&(an.duration=ie),void 0===an.size&&(an.size=le),an.trackId=je,an.dts=G,void 0===an.compositionTimeOffset&&(an.compositionTimeOffset=0),"bigint"==typeof G?(an.pts=G+n.BigInt(an.compositionTimeOffset),G+=n.BigInt(an.duration)):(an.pts=G+an.compositionTimeOffset,G+=an.duration)}),qe=qe.concat(Dt)}),qe}(An,cr,Dt),Ca=function(A,U,j){var le,je,qe,vt,G=new DataView(A.buffer,A.byteOffset,A.byteLength),ie={logs:[],seiNals:[]};for(je=0;je+4<A.length;je+=qe)if(qe=G.getUint32(je),je+=4,!(qe<=0))switch(31&A[je]){case 6:var ct=A.subarray(je+1,je+1+qe),Dt=_(je,U);if(le={nalUnitType:"sei_rbsp",size:qe,data:ct,escapedRBSP:c(ct),trackId:j},Dt)le.pts=Dt.pts,le.dts=Dt.dts,vt=Dt;else{if(!vt){ie.logs.push({level:"warn",message:"We've encountered a nal unit without data at "+je+" for trackId "+j+". See mux.js#223."});break}le.pts=vt.pts,le.dts=vt.dts}ie.seiNals.push(le)}return ie}(qe,ri,an),ie[an]||(ie[an]={seiNals:[],logs:[]}),ie[an].seiNals=ie[an].seiNals.concat(Ca.seiNals),ie[an].logs=ie[an].logs.concat(Ca.logs))}),ie},rt=function(){var U,j,G,ie,le,je,A=!1;this.isInitialized=function(){return A},this.init=function(qe){U=new p,A=!0,je=!!qe&&qe.isPartial,U.on("data",function(vt){vt.startTime=vt.startPts/ie,vt.endTime=vt.endPts/ie,le.captions.push(vt),le.captionStreams[vt.stream]=!0}),U.on("log",function(vt){le.logs.push(vt)})},this.isNewInit=function(qe,vt){return!(qe&&0===qe.length||vt&&"object"==typeof vt&&0===Object.keys(vt).length||G===qe[0]&&ie===vt[G])},this.parse=function(qe,vt,ct){var Dt;if(!this.isInitialized())return null;if(!vt||!ct)return null;if(this.isNewInit(vt,ct))ie=ct[G=vt[0]];else if(null===G||!ie)return j.push(qe),null;for(;j.length>0;){var an=j.shift();this.parse(an,vt,ct)}return Dt=function(A,U,j){if(null===U)return null;var ie=te(A,U)[U]||{};return{seiNals:ie.seiNals,logs:ie.logs,timescale:j}}(qe,G,ie),Dt&&Dt.logs&&(le.logs=le.logs.concat(Dt.logs)),null!==Dt&&Dt.seiNals?(this.pushNals(Dt.seiNals),this.flushStream(),le):le.logs.length?{logs:le.logs,captions:[],captionStreams:[]}:null},this.pushNals=function(qe){if(!this.isInitialized()||!qe||0===qe.length)return null;qe.forEach(function(vt){U.push(vt)})},this.flushStream=function(){if(!this.isInitialized())return null;je?U.partialFlush():U.flush()},this.clearParsedCaptions=function(){le.captions=[],le.captionStreams={},le.logs=[]},this.resetCaptionStream=function(){if(!this.isInitialized())return null;U.reset()},this.clearAllCaptions=function(){this.clearParsedCaptions(),this.resetCaptionStream()},this.reset=function(){j=[],G=null,ie=null,le?this.clearParsedCaptions():le={captions:[],captionStreams:{},logs:[]},this.resetCaptionStream()},this.reset()},kt=Qh_toUnsigned,on=function(A){return("00"+A.toString(16)).slice(-2)},gn=t.getUint64;br=function(A,U){var G=go(U,["moof","traf"]).reduce(function(ie,le){var an,$n,je=go(le,["tfhd"])[0],qe=kt(je[4]<<24|je[5]<<16|je[6]<<8|je[7]),vt=A[qe]||9e4,ct=go(le,["tfdt"])[0],Dt=new DataView(ct.buffer,ct.byteOffset,ct.byteLength);return"bigint"==typeof(an=1===ct[0]?gn(ct.subarray(4,12)):Dt.getUint32(4))?$n=an/n.BigInt(vt):"number"==typeof an&&!isNaN(an)&&($n=an/vt),$n<Number.MAX_SAFE_INTEGER&&($n=Number($n)),$n<ie&&(ie=$n),ie},1/0);return"bigint"==typeof G||isFinite(G)?G:0},xo=function(A){var j=0===A[0]?12:20;return kt(A[j]<<24|A[j+1]<<16|A[j+2]<<8|A[j+3])},qi=function(A){var U=go(A,["moov","trak"]),j=[];return U.forEach(function(G){var je,qe,ie={},le=go(G,["tkhd"])[0];le&&(qe=(je=new DataView(le.buffer,le.byteOffset,le.byteLength)).getUint8(0),ie.id=je.getUint32(0===qe?12:20));var vt=go(G,["mdia","hdlr"])[0];if(vt){var ct=Xh(vt.subarray(8,12));ie.type="vide"===ct?"video":"soun"===ct?"audio":ct}var Dt=go(G,["mdia","minf","stbl","stsd"])[0];if(Dt){var an=Dt.subarray(8);ie.codec=Xh(an.subarray(4,8));var cr,$n=go(an,[ie.codec])[0];$n&&(/^[asm]vc[1-9]$/i.test(ie.codec)?(cr=$n.subarray(78),"avcC"===Xh(cr.subarray(4,8))&&cr.length>11?(ie.codec+=".",ie.codec+=on(cr[9]),ie.codec+=on(cr[10]),ie.codec+=on(cr[11])):ie.codec="avc1.4d400d"):/^mp4[a,v]$/i.test(ie.codec)?(cr=$n.subarray(28),"esds"===Xh(cr.subarray(4,8))&&cr.length>20&&0!==cr[19]?(ie.codec+="."+on(cr[19]),ie.codec+="."+on(cr[20]>>>2&63).replace(/^0/,"")):ie.codec="mp4a.40.2"):ie.codec=ie.codec.toLowerCase())}var ri=go(G,["mdia","mdhd"])[0];ri&&(ie.timescale=xo(ri)),j.push(ie)}),j};var rs_startTime=br,rs_tracks=qi,ds=function(A){var U=31&A[1];return(U<<=8)|A[2]},qo=function(A){return!!(64&A[1])},nh=function(A){var U=0;return(48&A[3])>>>4>1&&(U+=A[4]+1),U},__=function(A){switch(A){case 5:return"slice_layer_without_partitioning_rbsp_idr";case 6:return"sei_rbsp";case 7:return"seq_parameter_set_rbsp";case 8:return"pic_parameter_set_rbsp";case 9:return"access_unit_delimiter_rbsp";default:return null}},N0={parseType:function(A,U){var j=ds(A);return 0===j?"pat":j===U?"pmt":U?"pes":null},parsePat:function(A){var U=qo(A),j=4+nh(A);return U&&(j+=A[j]+1),(31&A[j+10])<<8|A[j+11]},parsePmt:function(A){var U={},j=qo(A),G=4+nh(A);if(j&&(G+=A[G]+1),1&A[G+5]){var le;le=3+((15&A[G+1])<<8|A[G+2])-4;for(var qe=12+((15&A[G+10])<<8|A[G+11]);qe<le;){var vt=G+qe;U[(31&A[vt+1])<<8|A[vt+2]]=A[vt],qe+=5+((15&A[vt+3])<<8|A[vt+4])}return U}},parsePayloadUnitStartIndicator:qo,parsePesType:function(A,U){switch(U[ds(A)]){case nu.H264_STREAM_TYPE:return"video";case nu.ADTS_STREAM_TYPE:return"audio";case nu.METADATA_STREAM_TYPE:return"timed-metadata";default:return null}},parsePesTime:function(A){if(!qo(A))return null;var j=4+nh(A);if(j>=A.byteLength)return null;var ie,G=null;return 192&(ie=A[j+7])&&((G={}).pts=(14&A[j+9])<<27|(255&A[j+10])<<20|(254&A[j+11])<<12|(255&A[j+12])<<5|(254&A[j+13])>>>3,G.pts*=4,G.pts+=(6&A[j+13])>>>1,G.dts=G.pts,64&ie&&(G.dts=(14&A[j+14])<<27|(255&A[j+15])<<20|(254&A[j+16])<<12|(255&A[j+17])<<5|(254&A[j+18])>>>3,G.dts*=4,G.dts+=(6&A[j+18])>>>1)),G},videoPacketContainsKeyFrame:function(A){for(var U=4+nh(A),j=A.subarray(U),G=0,ie=0,le=!1;ie<j.byteLength-3;ie++)if(1===j[ie+2]){G=ie+5;break}for(;G<j.byteLength;)switch(j[G]){case 0:if(0!==j[G-1]){G+=2;break}if(0!==j[G-2]){G++;break}ie+3!==G-2&&"slice_layer_without_partitioning_rbsp_idr"===__(31&j[ie+3])&&(le=!0);do{G++}while(1!==j[G]&&G<j.length);ie=G-2,G+=3;break;case 1:if(0!==j[G-1]||0!==j[G-2]){G+=3;break}"slice_layer_without_partitioning_rbsp_idr"===__(31&j[ie+3])&&(le=!0),ie=G-2,G+=3;break;default:G+=3}return j=j.subarray(ie),G-=ie,ie=0,j&&j.byteLength>3&&"slice_layer_without_partitioning_rbsp_idr"===__(31&j[ie+3])&&(le=!0),le}},Wv=e__handleRollover,ao={};ao.ts=N0,ao.aac=sp;var lg=9e4,rl=188,T0=function(A,U,j){for(var le,qe,vt,ct,G=0,ie=rl,Dt=!1;ie<=A.byteLength;)if(71!==A[G]||71!==A[ie]&&ie!==A.byteLength)G++,ie++;else{if("pes"===(le=A.subarray(G,ie),ao.ts.parseType(le,U.pid))&&(qe=ao.ts.parsePesType(le,U.table),vt=ao.ts.parsePayloadUnitStartIndicator(le),"audio"===qe&&vt&&(ct=ao.ts.parsePesTime(le))&&(ct.type="audio",j.audio.push(ct),Dt=!0)),Dt)break;G+=rl,ie+=rl}for(G=(ie=A.byteLength)-rl,Dt=!1;G>=0;)if(71!==A[G]||71!==A[ie]&&ie!==A.byteLength)G--,ie--;else{if("pes"===(le=A.subarray(G,ie),ao.ts.parseType(le,U.pid))&&(qe=ao.ts.parsePesType(le,U.table),vt=ao.ts.parsePayloadUnitStartIndicator(le),"audio"===qe&&vt&&(ct=ao.ts.parsePesTime(le))&&(ct.type="audio",j.audio.push(ct),Dt=!0)),Dt)break;G-=rl,ie-=rl}},L0=function(A,U,j){for(var le,qe,vt,ct,Dt,an,$n,G=0,ie=rl,cr=!1,An={data:[],size:0};ie<A.byteLength;)if(71!==A[G]||71!==A[ie])G++,ie++;else{if("pes"===(le=A.subarray(G,ie),ao.ts.parseType(le,U.pid))&&(qe=ao.ts.parsePesType(le,U.table),vt=ao.ts.parsePayloadUnitStartIndicator(le),"video"===qe&&(vt&&!cr&&(ct=ao.ts.parsePesTime(le))&&(ct.type="video",j.video.push(ct),cr=!0),!j.firstKeyFrame))){if(vt&&0!==An.size){for(Dt=new Uint8Array(An.size),an=0;An.data.length;)$n=An.data.shift(),Dt.set($n,an),an+=$n.byteLength;if(ao.ts.videoPacketContainsKeyFrame(Dt)){var ri=ao.ts.parsePesTime(Dt);ri?(j.firstKeyFrame=ri,j.firstKeyFrame.type="video"):console.warn("Failed to extract PTS/DTS from PES at first keyframe. This could be an unusual TS segment, or else mux.js did not parse your TS segment correctly. If you know your TS segments do contain PTS/DTS on keyframes please file a bug report! You can try ffprobe to double check for yourself.")}An.size=0}An.data.push(le),An.size+=le.byteLength}if(cr&&j.firstKeyFrame)break;G+=rl,ie+=rl}for(G=(ie=A.byteLength)-rl,cr=!1;G>=0;)if(71!==A[G]||71!==A[ie])G--,ie--;else{if("pes"===(le=A.subarray(G,ie),ao.ts.parseType(le,U.pid))&&(qe=ao.ts.parsePesType(le,U.table),vt=ao.ts.parsePayloadUnitStartIndicator(le),"video"===qe&&vt&&(ct=ao.ts.parsePesTime(le))&&(ct.type="video",j.video.push(ct),cr=!0)),cr)break;G-=rl,ie-=rl}},V0_inspect=function(A,U){var G;return G=ao.aac.isLikelyAacData(A)?function(A){for(var qe,U=!1,j=0,G=null,ie=null,le=0,je=0;A.length-je>=3;){switch(ao.aac.parseType(A,je)){case"timed-metadata":if(A.length-je<10){U=!0;break}if((le=ao.aac.parseId3TagSize(A,je))>A.length){U=!0;break}null===ie&&(qe=A.subarray(je,je+le),ie=ao.aac.parseAacTimestamp(qe)),je+=le;break;case"audio":if(A.length-je<7){U=!0;break}if((le=ao.aac.parseAdtsSize(A,je))>A.length){U=!0;break}null===G&&(qe=A.subarray(je,je+le),G=ao.aac.parseSampleRate(qe)),j++,je+=le;break;default:je++}if(U)return null}if(null===G||null===ie)return null;var ct=lg/G;return{audio:[{type:"audio",dts:ie,pts:ie},{type:"audio",dts:ie+1024*j*ct,pts:ie+1024*j*ct}]}}(A):function(A){var U={pid:null,table:null},j={};for(var G in function(A,U){for(var ie,j=0,G=rl;G<A.byteLength;)if(71!==A[j]||71!==A[G])j++,G++;else{switch(ie=A.subarray(j,G),ao.ts.parseType(ie,U.pid)){case"pat":U.pid=ao.ts.parsePat(ie);break;case"pmt":var je=ao.ts.parsePmt(ie);U.table=U.table||{},Object.keys(je).forEach(function(qe){U.table[qe]=je[qe]})}j+=rl,G+=rl}}(A,U),U.table)if(U.table.hasOwnProperty(G))switch(U.table[G]){case nu.H264_STREAM_TYPE:j.video=[],L0(A,U,j),0===j.video.length&&delete j.video;break;case nu.ADTS_STREAM_TYPE:j.audio=[],T0(A,U,j),0===j.audio.length&&delete j.audio}return j}(A),G&&(G.audio||G.video)?(function(A,U){if(A.audio&&A.audio.length){var j=U;(typeof j>"u"||isNaN(j))&&(j=A.audio[0].dts),A.audio.forEach(function(le){le.dts=Wv(le.dts,j),le.pts=Wv(le.pts,j),le.dtsTime=le.dts/lg,le.ptsTime=le.pts/lg})}if(A.video&&A.video.length){var G=U;if((typeof G>"u"||isNaN(G))&&(G=A.video[0].dts),A.video.forEach(function(le){le.dts=Wv(le.dts,G),le.pts=Wv(le.pts,G),le.dtsTime=le.dts/lg,le.ptsTime=le.pts/lg}),A.firstKeyFrame){var ie=A.firstKeyFrame;ie.dts=Wv(ie.dts,G),ie.pts=Wv(ie.pts,G),ie.dtsTime=ie.dts/lg,ie.ptsTime=ie.pts/lg}}}(G,U),G):null},l0=function(){function ye(U,j){this.options=j||{},this.self=U,this.init()}var A=ye.prototype;return A.init=function(){this.transmuxer&&this.transmuxer.dispose(),this.transmuxer=new Dm.Transmuxer(this.options),function(A,U){U.on("data",function(j){var G=j.initSegment;j.initSegment={data:G.buffer,byteOffset:G.byteOffset,byteLength:G.byteLength};var ie=j.data;j.data=ie.buffer,A.postMessage({action:"data",segment:j,byteOffset:ie.byteOffset,byteLength:ie.byteLength},[j.data])}),U.on("done",function(j){A.postMessage({action:"done"})}),U.on("gopInfo",function(j){A.postMessage({action:"gopInfo",gopInfo:j})}),U.on("videoSegmentTimingInfo",function(j){var G={start:{decode:bs_videoTsToSeconds(j.start.dts),presentation:bs_videoTsToSeconds(j.start.pts)},end:{decode:bs_videoTsToSeconds(j.end.dts),presentation:bs_videoTsToSeconds(j.end.pts)},baseMediaDecodeTime:bs_videoTsToSeconds(j.baseMediaDecodeTime)};j.prependedContentDuration&&(G.prependedContentDuration=bs_videoTsToSeconds(j.prependedContentDuration)),A.postMessage({action:"videoSegmentTimingInfo",videoSegmentTimingInfo:G})}),U.on("audioSegmentTimingInfo",function(j){var G={start:{decode:bs_videoTsToSeconds(j.start.dts),presentation:bs_videoTsToSeconds(j.start.pts)},end:{decode:bs_videoTsToSeconds(j.end.dts),presentation:bs_videoTsToSeconds(j.end.pts)},baseMediaDecodeTime:bs_videoTsToSeconds(j.baseMediaDecodeTime)};j.prependedContentDuration&&(G.prependedContentDuration=bs_videoTsToSeconds(j.prependedContentDuration)),A.postMessage({action:"audioSegmentTimingInfo",audioSegmentTimingInfo:G})}),U.on("id3Frame",function(j){A.postMessage({action:"id3Frame",id3Frame:j})}),U.on("caption",function(j){A.postMessage({action:"caption",caption:j})}),U.on("trackinfo",function(j){A.postMessage({action:"trackinfo",trackInfo:j})}),U.on("audioTimingInfo",function(j){A.postMessage({action:"audioTimingInfo",audioTimingInfo:{start:bs_videoTsToSeconds(j.start),end:bs_videoTsToSeconds(j.end)}})}),U.on("videoTimingInfo",function(j){A.postMessage({action:"videoTimingInfo",videoTimingInfo:{start:bs_videoTsToSeconds(j.start),end:bs_videoTsToSeconds(j.end)}})}),U.on("log",function(j){A.postMessage({action:"log",log:j})})}(this.self,this.transmuxer)},A.pushMp4Captions=function(j){this.captionParser||(this.captionParser=new rt,this.captionParser.init());var G=new Uint8Array(j.data,j.byteOffset,j.byteLength),ie=this.captionParser.parse(G,j.trackIds,j.timescales);this.self.postMessage({action:"mp4Captions",captions:ie&&ie.captions||[],logs:ie&&ie.logs||[],data:G.buffer},[G.buffer])},A.probeMp4StartTime=function(j){var ie=j.data,le=rs_startTime(j.timescales,ie);this.self.postMessage({action:"probeMp4StartTime",startTime:le,data:ie},[ie.buffer])},A.probeMp4Tracks=function(j){var G=j.data,ie=rs_tracks(G);this.self.postMessage({action:"probeMp4Tracks",tracks:ie,data:G},[G.buffer])},A.probeTs=function(j){var G=j.data,ie=j.baseStartTime,le="number"!=typeof ie||isNaN(ie)?void 0:9e4*ie,je=V0_inspect(G,le),qe=null;je&&((qe={hasVideo:je.video&&2===je.video.length||!1,hasAudio:je.audio&&2===je.audio.length||!1}).hasVideo&&(qe.videoStart=je.video[0].ptsTime),qe.hasAudio&&(qe.audioStart=je.audio[0].ptsTime)),this.self.postMessage({action:"probeTs",result:qe,data:G},[G.buffer])},A.clearAllMp4Captions=function(){this.captionParser&&this.captionParser.clearAllCaptions()},A.clearParsedMp4Captions=function(){this.captionParser&&this.captionParser.clearParsedCaptions()},A.push=function(j){var G=new Uint8Array(j.data,j.byteOffset,j.byteLength);this.transmuxer.push(G)},A.reset=function(){this.transmuxer.reset()},A.setTimestampOffset=function(j){this.transmuxer.setBaseMediaDecodeTime(Math.round(bs_secondsToVideoTs(j.timestampOffset||0)))},A.setAudioAppendStart=function(j){this.transmuxer.setAudioAppendStart(Math.ceil(bs_secondsToVideoTs(j.appendStart)))},A.setRemux=function(j){this.transmuxer.setRemux(j.remux)},A.flush=function(j){this.transmuxer.flush(),self.postMessage({action:"done",type:"transmuxed"})},A.endTimeline=function(){this.transmuxer.endTimeline(),self.postMessage({action:"endedtimeline",type:"transmuxed"})},A.alignGopsWith=function(j){this.transmuxer.alignGopsWith(j.gopsToAlignWith.slice())},ye}();self.onmessage=function(ye){"init"===ye.data.action&&ye.data.options?this.messageHandlers=new l0(self,ye.data.options):(this.messageHandlers||(this.messageHandlers=new l0(self)),ye.data&&ye.data.action&&"init"!==ye.data.action&&this.messageHandlers[ye.data.action]&&this.messageHandlers[ye.data.action](ye.data))}})),p0=Pp(py),Ym=function(i){var u=i.transmuxer,l=i.bytes,t=i.audioAppendStart,s=i.gopsToAlignWith,h=i.remux,v=i.onData,S=i.onTrackInfo,D=i.onAudioTimingInfo,F=i.onVideoTimingInfo,ee=i.onVideoSegmentTimingInfo,Y=i.onAudioSegmentTimingInfo,me=i.onId3,Le=i.onCaptions,Be=i.onDone,Ue=i.onEndedTimeline,Gt=i.onTransmuxerLog,ln=i.isEndOfTimeline,On={buffer:[]},Yt=ln;if(u.onmessage=function(En){u.currentTransmux===i&&("data"===En.data.action&&function(i,u,l){var t=i.data.segment,s=t.type,h=t.initSegment,F=t.videoFrameDtsTime,ee=t.videoFramePtsTime;u.buffer.push({captions:t.captions,captionStreams:t.captionStreams,metadata:t.metadata});var Y=i.data.segment.boxes||{data:i.data.segment.data},me={type:s,data:new Uint8Array(Y.data,Y.data.byteOffset,Y.data.byteLength),initSegment:new Uint8Array(h.data,h.byteOffset,h.byteLength)};typeof F<"u"&&(me.videoFrameDtsTime=F),typeof ee<"u"&&(me.videoFramePtsTime=ee),l(me)}(En,On,v),"trackinfo"===En.data.action&&S(En.data.trackInfo),"gopInfo"===En.data.action&&function(i,u){u.gopInfo=i.data.gopInfo}(En,On),"audioTimingInfo"===En.data.action&&D(En.data.audioTimingInfo),"videoTimingInfo"===En.data.action&&F(En.data.videoTimingInfo),"videoSegmentTimingInfo"===En.data.action&&ee(En.data.videoSegmentTimingInfo),"audioSegmentTimingInfo"===En.data.action&&Y(En.data.audioSegmentTimingInfo),"id3Frame"===En.data.action&&me([En.data.id3Frame],En.data.id3Frame.dispatchType),"caption"===En.data.action&&Le(En.data.caption),"endedtimeline"===En.data.action&&(Yt=!1,Ue()),"log"===En.data.action&&Gt(En.data.log),"transmuxed"===En.data.type&&(Yt||(u.onmessage=null,function(i){var u=i.transmuxedData,l=i.callback;u.buffer=[],l(u)}({transmuxedData:On,callback:Be}),gy(u))))},t&&u.postMessage({action:"setAudioAppendStart",appendStart:t}),Array.isArray(s)&&u.postMessage({action:"alignGopsWith",gopsToAlignWith:s}),typeof h<"u"&&u.postMessage({action:"setRemux",remux:h}),l.byteLength){var In=l instanceof ArrayBuffer?l:l.buffer,nn=l instanceof ArrayBuffer?0:l.byteOffset;u.postMessage({action:"push",data:In,byteOffset:nn,byteLength:l.byteLength},[In])}ln&&u.postMessage({action:"endTimeline"}),u.postMessage({action:"flush"})},gy=function(i){i.currentTransmux=null,i.transmuxQueue.length&&(i.currentTransmux=i.transmuxQueue.shift(),"function"==typeof i.currentTransmux?i.currentTransmux():Ym(i.currentTransmux))},my=function(i,u){i.postMessage({action:u}),gy(i)},Ph_reset=function(i){!function(i,u){if(!u.currentTransmux)return u.currentTransmux=i,void my(u,i);u.transmuxQueue.push(my.bind(null,u,i))}("reset",i)},Mp=function(i){var u=i.transmuxer,l=i.endAction||i.action,t=i.callback,s=at({},i,{endAction:null,transmuxer:null,callback:null});if(u.addEventListener("message",function D(F){F.data.action===l&&(u.removeEventListener("message",D),F.data.data&&(F.data.data=new Uint8Array(F.data.data,i.byteOffset||0,i.byteLength||F.data.data.byteLength),i.data&&(i.data=F.data.data)),t(F.data))}),i.data){var v=i.data instanceof ArrayBuffer;s.byteOffset=v?0:i.data.byteOffset,s.byteLength=i.data.byteLength,u.postMessage(s,[v?i.data:i.data.buffer])}else u.postMessage(s)},Ug=function(i){i.forEach(function(u){u.abort()})},Bg=function(i,u){return u.timedout?{status:u.status,message:"HLS request timed-out at URL: "+u.uri,code:-101,xhr:u}:u.aborted?{status:u.status,message:"HLS request aborted at URL: "+u.uri,code:-102,xhr:u}:i?{status:u.status,message:"HLS request errored at URL: "+u.uri,code:2,xhr:u}:"arraybuffer"===u.responseType&&0===u.response.byteLength?{status:u.status,message:"Empty HLS response at URL: "+u.uri,code:2,xhr:u}:null},Vg=function(i,u,l){return function(t,s){var h=s.response,v=Bg(t,s);if(v)return l(v,i);if(16!==h.byteLength)return l({status:s.status,message:"Invalid HLS key at URL: "+s.uri,code:2,xhr:s},i);for(var S=new DataView(h),D=new Uint32Array([S.getUint32(0),S.getUint32(4),S.getUint32(8),S.getUint32(12)]),F=0;F<u.length;F++)u[F].bytes=D;return l(null,i)}},Hg=function(i,u){var l=zr(i.map.bytes);if("mp4"!==l)return u({internal:!0,message:"Found unsupported "+(l||"unknown")+" container for initialization segment at URL: "+(i.map.resolvedUri||i.map.uri),code:2});Mp({action:"probeMp4Tracks",data:i.map.bytes,transmuxer:i.transmuxer,callback:function(h){var v=h.tracks;return i.map.bytes=h.data,v.forEach(function(D){i.map.tracks=i.map.tracks||{},!i.map.tracks[D.type]&&(i.map.tracks[D.type]=D,"number"==typeof D.id&&D.timescale&&(i.map.timescales=i.map.timescales||{},i.map.timescales[D.id]=D.timescale))}),u(null)}})},ev=function(i){var u=i.segment,l=i.bytes,t=i.trackInfoFn,s=i.timingInfoFn,h=i.videoSegmentTimingInfoFn,v=i.audioSegmentTimingInfoFn,S=i.id3Fn,D=i.captionsFn,F=i.isEndOfTimeline,ee=i.endedTimelineFn,Y=i.dataFn,me=i.doneFn,Le=i.onTransmuxerLog,Be=u.map&&u.map.tracks||{},Ue=Boolean(Be.audio&&Be.video),Gt=s.bind(null,u,"audio","start"),ln=s.bind(null,u,"audio","end"),On=s.bind(null,u,"video","start"),Yt=s.bind(null,u,"video","end");Mp({action:"probeTs",transmuxer:u.transmuxer,data:l,baseStartTime:u.baseStartTime,callback:function(nn){u.bytes=l=nn.data;var tn=nn.result;tn&&(t(u,{hasAudio:tn.hasAudio,hasVideo:tn.hasVideo,isMuxed:Ue}),t=null,tn.hasAudio&&!Ue&&Gt(tn.audioStart),tn.hasVideo&&On(tn.videoStart),Gt=null,On=null),function(i){if(!i.transmuxer.currentTransmux)return i.transmuxer.currentTransmux=i,void Ym(i);i.transmuxer.transmuxQueue.push(i)}({bytes:l,transmuxer:u.transmuxer,audioAppendStart:u.audioAppendStart,gopsToAlignWith:u.gopsToAlignWith,remux:Ue,onData:function(tn){tn.type="combined"===tn.type?"video":tn.type,Y(u,tn)},onTrackInfo:function(tn){t&&(Ue&&(tn.isMuxed=!0),t(u,tn))},onAudioTimingInfo:function(tn){Gt&&typeof tn.start<"u"&&(Gt(tn.start),Gt=null),ln&&typeof tn.end<"u"&&ln(tn.end)},onVideoTimingInfo:function(tn){On&&typeof tn.start<"u"&&(On(tn.start),On=null),Yt&&typeof tn.end<"u"&&Yt(tn.end)},onVideoSegmentTimingInfo:function(tn){h(tn)},onAudioSegmentTimingInfo:function(tn){v(tn)},onId3:function(tn,En){S(u,tn,En)},onCaptions:function(tn){D(u,[tn])},isEndOfTimeline:F,onEndedTimeline:function(){ee()},onTransmuxerLog:Le,onDone:function(tn){me&&(tn.type="combined"===tn.type?"video":tn.type,me(null,u,tn))}})}})},Ad=function(i){var u=i.segment,l=i.bytes,t=i.trackInfoFn,s=i.timingInfoFn,h=i.videoSegmentTimingInfoFn,v=i.audioSegmentTimingInfoFn,S=i.id3Fn,D=i.captionsFn,F=i.isEndOfTimeline,ee=i.endedTimelineFn,Y=i.dataFn,me=i.doneFn,Le=i.onTransmuxerLog,Be=new Uint8Array(l);if(function(i){return Hi(i,["moof"]).length>0}(Be)){u.isFmp4=!0;var Ue=u.map.tracks,Gt={isFmp4:!0,hasVideo:!!Ue.video,hasAudio:!!Ue.audio};Ue.audio&&Ue.audio.codec&&"enca"!==Ue.audio.codec&&(Gt.audioCodec=Ue.audio.codec),Ue.video&&Ue.video.codec&&"encv"!==Ue.video.codec&&(Gt.videoCodec=Ue.video.codec),Ue.video&&Ue.audio&&(Gt.isMuxed=!0),t(u,Gt);var ln=function(Yt){Y(u,{data:Be,type:Gt.hasAudio&&!Gt.isMuxed?"audio":"video"}),Yt&&Yt.length&&D(u,Yt),me(null,u,{})};Mp({action:"probeMp4StartTime",timescales:u.map.timescales,data:Be,transmuxer:u.transmuxer,callback:function(Yt){var en=Yt.data,In=Yt.startTime;l=en.buffer,u.bytes=Be=en,Gt.hasAudio&&!Gt.isMuxed&&s(u,"audio","start",In),Gt.hasVideo&&s(u,"video","start",In),Ue.video&&en.byteLength&&u.transmuxer?Mp({action:"pushMp4Captions",endAction:"mp4Captions",transmuxer:u.transmuxer,data:Be,timescales:u.map.timescales,trackIds:[Ue.video.id],callback:function(tn){l=tn.data.buffer,u.bytes=Be=tn.data,tn.logs.forEach(function(En){Le(At.mergeOptions(En,{stream:"mp4CaptionParser"}))}),ln(tn.captions)}}):ln()}})}else{if(u.transmuxer)return typeof u.container>"u"&&(u.container=zr(Be)),"ts"!==u.container&&"aac"!==u.container?(t(u,{hasAudio:!1,hasVideo:!1}),void me(null,u,{})):void ev({segment:u,bytes:l,trackInfoFn:t,timingInfoFn:s,videoSegmentTimingInfoFn:h,audioSegmentTimingInfoFn:v,id3Fn:S,captionsFn:D,isEndOfTimeline:F,endedTimelineFn:ee,dataFn:Y,doneFn:me,onTransmuxerLog:Le});me(null,u,{})}},kp=function(i,u){var S,l=i.id,t=i.key,s=i.encryptedBytes,h=i.decryptionWorker;h.addEventListener("message",function D(F){if(F.data.source===l){h.removeEventListener("message",D);var ee=F.data.decrypted;u(new Uint8Array(ee.bytes,ee.byteOffset,ee.byteLength))}}),S=t.bytes.slice?t.bytes.slice():new Uint32Array(Array.prototype.slice.call(t.bytes)),h.postMessage(ry({source:l,encrypted:s,key:S,iv:t.iv}),[s.buffer,S.buffer])},_y=function(i){var u=i.xhr,l=i.xhrOptions,s=i.segment,h=i.abortFn,v=i.progressFn,S=i.trackInfoFn,D=i.timingInfoFn,F=i.videoSegmentTimingInfoFn,ee=i.audioSegmentTimingInfoFn,Y=i.id3Fn,me=i.captionsFn,Le=i.isEndOfTimeline,Be=i.endedTimelineFn,Ue=i.dataFn,On=[],Yt=function(i){var u=i.activeXhrs,l=i.decryptionWorker,t=i.trackInfoFn,s=i.timingInfoFn,h=i.videoSegmentTimingInfoFn,v=i.audioSegmentTimingInfoFn,S=i.id3Fn,D=i.captionsFn,F=i.isEndOfTimeline,ee=i.endedTimelineFn,Y=i.dataFn,me=i.doneFn,Le=i.onTransmuxerLog,Be=0,Ue=!1;return function(Gt,ln){if(!Ue){if(Gt)return Ue=!0,Ug(u),me(Gt,ln);if((Be+=1)===u.length){var On=function(){if(ln.encryptedBytes)return function(i){var l=i.segment,t=i.trackInfoFn,s=i.timingInfoFn,h=i.videoSegmentTimingInfoFn,v=i.audioSegmentTimingInfoFn,S=i.id3Fn,D=i.captionsFn,F=i.isEndOfTimeline,ee=i.endedTimelineFn,Y=i.dataFn,me=i.doneFn,Le=i.onTransmuxerLog;kp({id:l.requestId,key:l.key,encryptedBytes:l.encryptedBytes,decryptionWorker:i.decryptionWorker},function(Be){l.bytes=Be,Ad({segment:l,bytes:l.bytes,trackInfoFn:t,timingInfoFn:s,videoSegmentTimingInfoFn:h,audioSegmentTimingInfoFn:v,id3Fn:S,captionsFn:D,isEndOfTimeline:F,endedTimelineFn:ee,dataFn:Y,doneFn:me,onTransmuxerLog:Le})})}({decryptionWorker:l,segment:ln,trackInfoFn:t,timingInfoFn:s,videoSegmentTimingInfoFn:h,audioSegmentTimingInfoFn:v,id3Fn:S,captionsFn:D,isEndOfTimeline:F,endedTimelineFn:ee,dataFn:Y,doneFn:me,onTransmuxerLog:Le});Ad({segment:ln,bytes:ln.bytes,trackInfoFn:t,timingInfoFn:s,videoSegmentTimingInfoFn:h,audioSegmentTimingInfoFn:v,id3Fn:S,captionsFn:D,isEndOfTimeline:F,endedTimelineFn:ee,dataFn:Y,doneFn:me,onTransmuxerLog:Le})};if(ln.endOfAllRequests=Date.now(),ln.map&&ln.map.encryptedBytes&&!ln.map.bytes)return kp({decryptionWorker:l,id:ln.requestId+"-init",encryptedBytes:ln.map.encryptedBytes,key:ln.map.key},function(Yt){ln.map.bytes=Yt,Hg(ln,function(en){if(en)return Ug(u),me(en,ln);On()})});On()}}}}({activeXhrs:On,decryptionWorker:i.decryptionWorker,trackInfoFn:S,timingInfoFn:D,videoSegmentTimingInfoFn:F,audioSegmentTimingInfoFn:ee,id3Fn:Y,captionsFn:me,isEndOfTimeline:Le,endedTimelineFn:Be,dataFn:Ue,doneFn:i.doneFn,onTransmuxerLog:i.onTransmuxerLog});if(s.key&&!s.key.bytes){var en=[s.key];s.map&&!s.map.bytes&&s.map.key&&s.map.key.resolvedUri===s.key.resolvedUri&&en.push(s.map.key);var tn=u(At.mergeOptions(l,{uri:s.key.resolvedUri,responseType:"arraybuffer"}),Vg(s,en,Yt));On.push(tn)}if(s.map&&!s.map.bytes){if(s.map.key&&(!s.key||s.key.resolvedUri!==s.map.key.resolvedUri)){var Gn=u(At.mergeOptions(l,{uri:s.map.key.resolvedUri,responseType:"arraybuffer"}),Vg(s,[s.map.key],Yt));On.push(Gn)}var ni=At.mergeOptions(l,{uri:s.map.resolvedUri,responseType:"arraybuffer",headers:$m(s.map)}),Qs=function(i){var u=i.segment,l=i.finishProcessingFn;return function(t,s){var h=Bg(t,s);if(h)return l(h,u);var v=new Uint8Array(s.response);if(u.map.key)return u.map.encryptedBytes=v,l(null,u);u.map.bytes=v,Hg(u,function(S){if(S)return S.xhr=s,S.status=s.status,l(S,u);l(null,u)})}}({segment:s,finishProcessingFn:Yt}),po=u(ni,Qs);On.push(po)}var Co=At.mergeOptions(l,{uri:s.part&&s.part.resolvedUri||s.resolvedUri,responseType:"arraybuffer",headers:$m(s)}),ms=u(Co,function(i){var u=i.segment,l=i.finishProcessingFn,t=i.responseType;return function(s,h){var v=Bg(s,h);if(v)return l(v,u);var S="arraybuffer"!==t&&h.responseText?function(i){for(var u=new Uint8Array(new ArrayBuffer(i.length)),l=0;l<i.length;l++)u[l]=i.charCodeAt(l);return u.buffer}(h.responseText.substring(u.lastReachedChar||0)):h.response;return u.stats=function(i){return{bandwidth:i.bandwidth,bytesReceived:i.bytesReceived||0,roundTripTime:i.roundTripTime||0}}(h),u.key?u.encryptedBytes=new Uint8Array(S):u.bytes=new Uint8Array(S),l(null,u)}}({segment:s,finishProcessingFn:Yt,responseType:Co.responseType}));ms.addEventListener("progress",function(i){var u=i.segment,l=i.progressFn;return function(t){if(!t.target.aborted)return u.stats=At.mergeOptions(u.stats,function(i){var u=i.target,t={bandwidth:1/0,bytesReceived:0,roundTripTime:Date.now()-u.requestTime||0};return t.bytesReceived=i.loaded,t.bandwidth=Math.floor(t.bytesReceived/t.roundTripTime*8*1e3),t}(t)),!u.stats.firstBytesReceivedAt&&u.stats.bytesReceived&&(u.stats.firstBytesReceivedAt=Date.now()),l(t,u)}}({segment:s,progressFn:v,trackInfoFn:S,timingInfoFn:D,videoSegmentTimingInfoFn:F,audioSegmentTimingInfoFn:ee,id3Fn:Y,captionsFn:me,isEndOfTimeline:Le,endedTimelineFn:Be,dataFn:Ue})),On.push(ms);var Ua={};return On.forEach(function(ls){ls.addEventListener("loadend",function(i){var u=i.loadendState,l=i.abortFn;return function(t){t.target.aborted&&l&&!u.calledAbortFn&&(l(),u.calledAbortFn=!0)}}({loadendState:Ua,abortFn:h}))}),function(){return Ug(On)}},Ty=Iu("CodecUtils"),Rp=function(i,u){var l=u.attributes||{};return i&&i.mediaGroups&&i.mediaGroups.AUDIO&&l.AUDIO&&i.mediaGroups.AUDIO[l.AUDIO]},Mh=function(i){var u={};return i.forEach(function(l){var t=l.mediaType,s=l.type,h=l.details;u[t]=u[t]||[],u[t].push(fr(""+s+h))}),Object.keys(u).forEach(function(l){if(u[l].length>1)return Ty("multiple "+l+" codecs found as attributes: "+u[l].join(", ")+". Setting playlist codecs to null so that we wait for mux.js to probe segments for real codecs."),void(u[l]=null);u[l]=u[l][0]}),u},td=function(i){var u=0;return i.audio&&u++,i.video&&u++,u},ec=function(i,u){var l=u.attributes||{},t=Mh(function(i){var u=i.attributes||{};if(u.CODECS)return Tn(u.CODECS)}(u)||[]);if(Rp(i,u)&&!t.audio&&!function(i,u){if(!Rp(i,u))return!0;var t=i.mediaGroups.AUDIO[(u.attributes||{}).AUDIO];for(var s in t)if(!t[s].uri&&!t[s].playlists)return!0;return!1}(i,u)){var s=Mh(function(i,u){if(!i.mediaGroups.AUDIO||!u)return null;var l=i.mediaGroups.AUDIO[u];if(!l)return null;for(var t in l){var s=l[t];if(s.default&&s.playlists)return Tn(s.playlists[0].attributes.CODECS)}return null}(i,l.AUDIO)||[]);s.audio&&(t.audio=s.audio)}return t},nd=Iu("PlaylistSelector"),$g=function(i){if(i&&i.playlist){var u=i.playlist;return JSON.stringify({id:u.id,bandwidth:i.bandwidth,width:i.width,height:i.height,codecs:u.attributes&&u.attributes.CODECS||""})}},Rf=function(i,u){if(!i)return"";var l=ae().getComputedStyle(i);return l?l[u]:""},Md=function(i,u){var l=i.slice();i.sort(function(t,s){var h=u(t,s);return 0===h?l.indexOf(t)-l.indexOf(s):h})},Np=function(i,u){var l,t;return i.attributes.BANDWIDTH&&(l=i.attributes.BANDWIDTH),l=l||ae().Number.MAX_VALUE,u.attributes.BANDWIDTH&&(t=u.attributes.BANDWIDTH),l-(t||ae().Number.MAX_VALUE)},Nf=function(i,u,l,t,s,h){if(i){var v={bandwidth:u,width:l,height:t,limitRenditionByPlayerDimensions:s},S=i.playlists;el.isAudioOnly(i)&&(S=h.getAudioTrackPlaylists_(),v.audioOnly=!0);var D=S.map(function(cn){var Gn=cn.attributes&&cn.attributes.RESOLUTION&&cn.attributes.RESOLUTION.width,ni=cn.attributes&&cn.attributes.RESOLUTION&&cn.attributes.RESOLUTION.height;return{bandwidth:cn.attributes&&cn.attributes.BANDWIDTH||ae().Number.MAX_VALUE,width:Gn,height:ni,playlist:cn}});Md(D,function(cn,wr){return cn.bandwidth-wr.bandwidth});var F=(D=D.filter(function(cn){return!el.isIncompatible(cn.playlist)})).filter(function(cn){return el.isEnabled(cn.playlist)});F.length||(F=D.filter(function(cn){return!el.isDisabled(cn.playlist)}));var ee=F.filter(function(cn){return cn.bandwidth*tu.BANDWIDTH_VARIANCE<u}),Y=ee[ee.length-1],me=ee.filter(function(cn){return cn.bandwidth===Y.bandwidth})[0];if(!1===s){var Le=me||F[0]||D[0];if(Le&&Le.playlist){var Be="sortedPlaylistReps";return me&&(Be="bandwidthBestRep"),F[0]&&(Be="enabledPlaylistReps"),nd("choosing "+$g(Le)+" using "+Be+" with options",v),Le.playlist}return nd("could not choose a playlist with options",v),null}var Ue=ee.filter(function(cn){return cn.width&&cn.height});Md(Ue,function(cn,wr){return cn.width-wr.width});var Gt=Ue.filter(function(cn){return cn.width===l&&cn.height===t});Y=Gt[Gt.length-1];var On,Yt,en,In,ln=Gt.filter(function(cn){return cn.bandwidth===Y.bandwidth})[0];if(ln||(Yt=(On=Ue.filter(function(cn){return cn.width>l||cn.height>t})).filter(function(cn){return cn.width===On[0].width&&cn.height===On[0].height}),Y=Yt[Yt.length-1],en=Yt.filter(function(cn){return cn.bandwidth===Y.bandwidth})[0]),h.experimentalLeastPixelDiffSelector){var nn=Ue.map(function(cn){return cn.pixelDiff=Math.abs(cn.width-l)+Math.abs(cn.height-t),cn});Md(nn,function(cn,wr){return cn.pixelDiff===wr.pixelDiff?wr.bandwidth-cn.bandwidth:cn.pixelDiff-wr.pixelDiff}),In=nn[0]}var tn=In||en||ln||me||F[0]||D[0];if(tn&&tn.playlist){var En="sortedPlaylistReps";return In?En="leastPixelDiffRep":en?En="resolutionPlusOneRep":ln?En="resolutionBestRep":me?En="bandwidthBestRep":F[0]&&(En="enabledPlaylistReps"),nd("choosing "+$g(tn)+" using "+En+" with options",v),tn.playlist}return nd("could not choose a playlist with options",v),null}},Ey=function(){var i=this.useDevicePixelRatio&&ae().devicePixelRatio||1;return Nf(this.playlists.master,this.systemBandwidth,parseInt(Rf(this.tech_.el(),"width"),10)*i,parseInt(Rf(this.tech_.el(),"height"),10)*i,this.limitRenditionByPlayerDimensions,this.masterPlaylistController_)},kh=function(i,u,l){var t,s;if(l&&l.cues)for(t=l.cues.length;t--;)(s=l.cues[t]).startTime>=i&&s.endTime<=u&&l.removeCue(s)},Rh=function(i){return"number"==typeof i&&isFinite(i)},Ff=1/60,Od=function(i){var u=i.startOfSegment,l=i.duration,t=i.segment,s=i.part,h=i.playlist,v=h.mediaSequence,S=h.id,D=h.segments,ee=i.mediaIndex,Y=i.partIndex,me=i.timeline,Le=(void 0===D?[]:D).length-1,Be="mediaIndex/partIndex increment";i.getMediaInfoForTime?Be="getMediaInfoForTime ("+i.getMediaInfoForTime+")":i.isSyncRequest&&(Be="getSyncSegmentCandidate (isSyncRequest)"),i.independent&&(Be+=" with independent "+i.independent);var Ue="number"==typeof Y,Gt=i.segment.uri?"segment":"pre-segment",ln=Ue?Df({preloadSegment:t})-1:0;return Gt+" ["+(v+ee)+"/"+(v+Le)+"]"+(Ue?" part ["+Y+"/"+ln+"]":"")+" segment start/end ["+t.start+" => "+t.end+"]"+(Ue?" part start/end ["+s.start+" => "+s.end+"]":"")+" startOfSegment ["+u+"] duration ["+l+"] timeline ["+me+"] selected by ["+Be+"] playlist ["+S+"]"},Iy=function(i){return i+"TimingInfo"},jp=function(i){var u=i.timelineChangeController,t=i.segmentTimeline,s=i.loaderType,h=i.audioDisabled;if(i.currentTimeline===t)return!1;if("audio"===s){var v=u.lastTimelineChange({type:"main"});return!v||v.to!==t}if("main"===s&&h){var S=u.pendingTimelineChange({type:"audio"});return!(S&&S.to===t)}return!1},Dy=function(i){var u=i.segmentDuration,l=i.maxDuration;return!!u&&Math.round(u)>l+ql},ov=function(g){function i(l,t){var s;if(s=g.call(this)||this,!l)throw new TypeError("Initialization settings are required");if("function"!=typeof l.currentTime)throw new TypeError("No currentTime getter specified");if(!l.mediaSource)throw new TypeError("No MediaSource specified");return s.bandwidth=l.bandwidth,s.throughput={rate:0,count:0},s.roundTrip=NaN,s.resetStats_(),s.mediaIndex=null,s.partIndex=null,s.hasPlayed_=l.hasPlayed,s.currentTime_=l.currentTime,s.seekable_=l.seekable,s.seeking_=l.seeking,s.duration_=l.duration,s.mediaSource_=l.mediaSource,s.vhs_=l.vhs,s.loaderType_=l.loaderType,s.currentMediaInfo_=void 0,s.startingMediaInfo_=void 0,s.segmentMetadataTrack_=l.segmentMetadataTrack,s.goalBufferLength_=l.goalBufferLength,s.sourceType_=l.sourceType,s.sourceUpdater_=l.sourceUpdater,s.inbandTextTracks_=l.inbandTextTracks,s.state_="INIT",s.timelineChangeController_=l.timelineChangeController,s.shouldSaveSegmentTimingInfo_=!0,s.parse708captions_=l.parse708captions,s.useDtsForTimestampOffset_=l.useDtsForTimestampOffset,s.captionServices_=l.captionServices,s.experimentalExactManifestTimings=l.experimentalExactManifestTimings,s.checkBufferTimeout_=null,s.error_=void 0,s.currentTimeline_=-1,s.pendingSegment_=null,s.xhrOptions_=null,s.pendingSegments_=[],s.audioDisabled_=!1,s.isPendingTimestampOffset_=!1,s.gopBuffer_=[],s.timeMapping_=0,s.safeAppend_=At.browser.IE_VERSION>=11,s.appendInitSegment_={audio:!0,video:!0},s.playlistOfLastInitSegment_={audio:null,video:null},s.callQueue_=[],s.loadQueue_=[],s.metadataQueue_={id3:[],caption:[]},s.waitingOnRemove_=!1,s.quotaExceededErrorRetryTimeout_=null,s.activeInitSegmentId_=null,s.initSegments_={},s.cacheEncryptionKeys_=l.cacheEncryptionKeys,s.keyCache_={},s.decrypter_=l.decrypter,s.syncController_=l.syncController,s.syncPoint_={segmentIndex:0,time:0},s.transmuxer_=s.createTransmuxer_(),s.triggerSyncInfoUpdate_=function(){return s.trigger("syncinfoupdate")},s.syncController_.on("syncinfoupdate",s.triggerSyncInfoUpdate_),s.mediaSource_.addEventListener("sourceopen",function(){s.isEndOfStream_()||(s.ended_=!1)}),s.fetchAtBuffer_=!1,s.logger_=Iu("SegmentLoader["+s.loaderType_+"]"),Object.defineProperty(dt(s),"state",{get:function(){return this.state_},set:function(v){v!==this.state_&&(this.logger_(this.state_+" -> "+v),this.state_=v,this.trigger("statechange"))}}),s.sourceUpdater_.on("ready",function(){s.hasEnoughInfoToAppend_()&&s.processCallQueue_()}),"main"===s.loaderType_&&s.timelineChangeController_.on("pendingtimelinechange",function(){s.hasEnoughInfoToAppend_()&&s.processCallQueue_()}),"audio"===s.loaderType_&&s.timelineChangeController_.on("timelinechange",function(){s.hasEnoughInfoToLoad_()&&s.processLoadQueue_(),s.hasEnoughInfoToAppend_()&&s.processCallQueue_()}),s}Me(i,g);var u=i.prototype;return u.createTransmuxer_=function(){return function(i){var u=new p0;u.currentTransmux=null,u.transmuxQueue=[];var l=u.terminate;return u.terminate=function(){return u.currentTransmux=null,u.transmuxQueue.length=0,l.call(u)},u.postMessage({action:"init",options:i}),u}({remux:!1,alignGopsAtEnd:this.safeAppend_,keepOriginalTimestamps:!0,parse708captions:this.parse708captions_,captionServices:this.captionServices_})},u.resetStats_=function(){this.mediaBytesTransferred=0,this.mediaRequests=0,this.mediaRequestsAborted=0,this.mediaRequestsTimedout=0,this.mediaRequestsErrored=0,this.mediaTransferDuration=0,this.mediaSecondsLoaded=0,this.mediaAppends=0},u.dispose=function(){this.trigger("dispose"),this.state="DISPOSED",this.pause(),this.abort_(),this.transmuxer_&&this.transmuxer_.terminate(),this.resetStats_(),this.checkBufferTimeout_&&ae().clearTimeout(this.checkBufferTimeout_),this.syncController_&&this.triggerSyncInfoUpdate_&&this.syncController_.off("syncinfoupdate",this.triggerSyncInfoUpdate_),this.off()},u.setAudio=function(t){this.audioDisabled_=!t,t?this.appendInitSegment_.audio=!0:this.sourceUpdater_.removeAudio(0,this.duration_())},u.abort=function(){"WAITING"===this.state?(this.abort_(),this.state="READY",this.paused()||this.monitorBuffer_()):this.pendingSegment_&&(this.pendingSegment_=null)},u.abort_=function(){this.pendingSegment_&&this.pendingSegment_.abortRequests&&this.pendingSegment_.abortRequests(),this.pendingSegment_=null,this.callQueue_=[],this.loadQueue_=[],this.metadataQueue_.id3=[],this.metadataQueue_.caption=[],this.timelineChangeController_.clearPendingTimelineChange(this.loaderType_),this.waitingOnRemove_=!1,ae().clearTimeout(this.quotaExceededErrorRetryTimeout_),this.quotaExceededErrorRetryTimeout_=null},u.checkForAbort_=function(t){return"APPENDING"!==this.state||this.pendingSegment_?!this.pendingSegment_||this.pendingSegment_.requestId!==t:(this.state="READY",!0)},u.error=function(t){return typeof t<"u"&&(this.logger_("error occurred:",t),this.error_=t),this.pendingSegment_=null,this.error_},u.endOfStream=function(){this.ended_=!0,this.transmuxer_&&Ph_reset(this.transmuxer_),this.gopBuffer_.length=0,this.pause(),this.trigger("ended")},u.buffered_=function(){var t=this.getMediaInfo_();if(!this.sourceUpdater_||!t)return At.createTimeRanges();if("main"===this.loaderType_){var h=t.hasVideo;if(h&&t.hasAudio&&!this.audioDisabled_&&!t.isMuxed)return this.sourceUpdater_.buffered();if(h)return this.sourceUpdater_.videoBuffered()}return this.sourceUpdater_.audioBuffered()},u.initSegmentForMap=function(t,s){if(void 0===s&&(s=!1),!t)return null;var h=Ip(t),v=this.initSegments_[h];return s&&!v&&t.bytes&&(this.initSegments_[h]=v={resolvedUri:t.resolvedUri,byterange:t.byterange,bytes:t.bytes,tracks:t.tracks,timescales:t.timescales}),v||t},u.segmentKey=function(t,s){if(void 0===s&&(s=!1),!t)return null;var h=zm(t),v=this.keyCache_[h];this.cacheEncryptionKeys_&&s&&!v&&t.bytes&&(this.keyCache_[h]=v={resolvedUri:t.resolvedUri,bytes:t.bytes});var S={resolvedUri:(v||t).resolvedUri};return v&&(S.bytes=v.bytes),S},u.couldBeginLoading_=function(){return this.playlist_&&!this.paused()},u.load=function(){if(this.monitorBuffer_(),this.playlist_){if("INIT"===this.state&&this.couldBeginLoading_())return this.init_();!this.couldBeginLoading_()||"READY"!==this.state&&"INIT"!==this.state||(this.state="READY")}},u.init_=function(){return this.state="READY",this.resetEverything(),this.monitorBuffer_()},u.playlist=function(t,s){if(void 0===s&&(s={}),t){var h=this.playlist_,v=this.pendingSegment_;this.playlist_=t,this.xhrOptions_=s,"INIT"===this.state&&(t.syncInfo={mediaSequence:t.mediaSequence,time:0},"main"===this.loaderType_&&this.syncController_.setDateTimeMappingForStart(t));var S=null;if(h&&(h.id?S=h.id:h.uri&&(S=h.uri)),this.logger_("playlist update ["+S+" => "+(t.id||t.uri)+"]"),this.trigger("syncinfoupdate"),"INIT"===this.state&&this.couldBeginLoading_())return this.init_();if(!h||h.uri!==t.uri)return null!==this.mediaIndex&&(t.endList?this.resyncLoader():this.resetLoader()),this.currentMediaInfo_=void 0,void this.trigger("playlistupdate");var D=t.mediaSequence-h.mediaSequence;if(this.logger_("live window shift ["+D+"]"),null!==this.mediaIndex)if(this.mediaIndex-=D,this.mediaIndex<0)this.mediaIndex=null,this.partIndex=null;else{var F=this.playlist_.segments[this.mediaIndex];if(this.partIndex&&(!F.parts||!F.parts.length||!F.parts[this.partIndex])){var ee=this.mediaIndex;this.logger_("currently processing part (index "+this.partIndex+") no longer exists."),this.resetLoader(),this.mediaIndex=ee}}v&&(v.mediaIndex-=D,v.mediaIndex<0?(v.mediaIndex=null,v.partIndex=null):(v.mediaIndex>=0&&(v.segment=t.segments[v.mediaIndex]),v.partIndex>=0&&v.segment.parts&&(v.part=v.segment.parts[v.partIndex]))),this.syncController_.saveExpiredSegmentInfo(h,t)}},u.pause=function(){this.checkBufferTimeout_&&(ae().clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=null)},u.paused=function(){return null===this.checkBufferTimeout_},u.resetEverything=function(t){this.ended_=!1,this.activeInitSegmentId_=null,this.appendInitSegment_={audio:!0,video:!0},this.resetLoader(),this.remove(0,1/0,t),this.transmuxer_&&(this.transmuxer_.postMessage({action:"clearAllMp4Captions"}),this.transmuxer_.postMessage({action:"reset"}))},u.resetLoader=function(){this.fetchAtBuffer_=!1,this.resyncLoader()},u.resyncLoader=function(){this.transmuxer_&&Ph_reset(this.transmuxer_),this.mediaIndex=null,this.partIndex=null,this.syncPoint_=null,this.isPendingTimestampOffset_=!1,this.callQueue_=[],this.loadQueue_=[],this.metadataQueue_.id3=[],this.metadataQueue_.caption=[],this.abort(),this.transmuxer_&&this.transmuxer_.postMessage({action:"clearParsedMp4Captions"})},u.remove=function(t,s,h,v){if(void 0===h&&(h=function(){}),void 0===v&&(v=!1),s===1/0&&(s=this.duration_()),s<=t)this.logger_("skipping remove because end ${end} is <= start ${start}");else if(this.sourceUpdater_&&this.getMediaInfo_()){var S=1,D=function(){0==--S&&h()};for(var F in(v||!this.audioDisabled_)&&(S++,this.sourceUpdater_.removeAudio(t,s,D)),(v||"main"===this.loaderType_)&&(this.gopBuffer_=function(i,u,l,t){for(var s=Math.ceil((u-t)*Ai.ONE_SECOND_IN_TS),h=Math.ceil((l-t)*Ai.ONE_SECOND_IN_TS),v=i.slice(),S=i.length;S--&&!(i[S].pts<=h););if(-1===S)return v;for(var D=S+1;D--&&!(i[D].pts<=s););return D=Math.max(D,0),v.splice(D,S-D+1),v}(this.gopBuffer_,t,s,this.timeMapping_),S++,this.sourceUpdater_.removeVideo(t,s,D)),this.inbandTextTracks_)kh(t,s,this.inbandTextTracks_[F]);kh(t,s,this.segmentMetadataTrack_),D()}else this.logger_("skipping remove because no source updater or starting media info")},u.monitorBuffer_=function(){this.checkBufferTimeout_&&ae().clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=ae().setTimeout(this.monitorBufferTick_.bind(this),1)},u.monitorBufferTick_=function(){"READY"===this.state&&this.fillBuffer_(),this.checkBufferTimeout_&&ae().clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=ae().setTimeout(this.monitorBufferTick_.bind(this),500)},u.fillBuffer_=function(){if(!this.sourceUpdater_.updating()){var t=this.chooseNextRequest_();t&&("number"==typeof t.timestampOffset&&(this.isPendingTimestampOffset_=!1,this.timelineChangeController_.pendingTimelineChange({type:this.loaderType_,from:this.currentTimeline_,to:t.timeline})),this.loadSegment_(t))}},u.isEndOfStream_=function(t,s,h){if(void 0===t&&(t=this.mediaIndex),void 0===s&&(s=this.playlist_),void 0===h&&(h=this.partIndex),!s||!this.mediaSource_)return!1;var v="number"==typeof t&&s.segments[t];return s.endList&&"open"===this.mediaSource_.readyState&&t+1===s.segments.length&&(!v||!v.parts||h+1===v.parts.length)},u.chooseNextRequest_=function(){var t=this.buffered_(),s=_p(t)||0,h=Zl(t,this.currentTime_()),v=!this.hasPlayed_()&&h>=1,S=h>=this.goalBufferLength_(),D=this.playlist_.segments;if(!D.length||v||S)return null;this.syncPoint_=this.syncPoint_||this.syncController_.getSyncPoint(this.playlist_,this.duration_(),this.currentTimeline_,this.currentTime_());var F={partIndex:null,mediaIndex:null,startOfSegment:null,playlist:this.playlist_,isSyncRequest:Boolean(!this.syncPoint_)};if(F.isSyncRequest)F.mediaIndex=function(i,u,l){u=u||[];for(var t=[],s=0,h=0;h<u.length;h++){var v=u[h];if(i===v.timeline&&(t.push(h),(s+=v.duration)>l))return h}return 0===t.length?0:t[t.length-1]}(this.currentTimeline_,D,s);else if(null!==this.mediaIndex){var ee=D[this.mediaIndex],Y="number"==typeof this.partIndex?this.partIndex:-1;F.startOfSegment=ee.end?ee.end:s,ee.parts&&ee.parts[Y+1]?(F.mediaIndex=this.mediaIndex,F.partIndex=Y+1):F.mediaIndex=this.mediaIndex+1}else{var me=el.getMediaInfoForTime({experimentalExactManifestTimings:this.experimentalExactManifestTimings,playlist:this.playlist_,currentTime:this.fetchAtBuffer_?s:this.currentTime_(),startingPartIndex:this.syncPoint_.partIndex,startingSegmentIndex:this.syncPoint_.segmentIndex,startTime:this.syncPoint_.time}),Le=me.segmentIndex,Be=me.startTime,Ue=me.partIndex;F.getMediaInfoForTime=this.fetchAtBuffer_?"bufferedEnd "+s:"currentTime "+this.currentTime_(),F.mediaIndex=Le,F.startOfSegment=Be,F.partIndex=Ue}var Gt=D[F.mediaIndex],ln=Gt&&"number"==typeof F.partIndex&&Gt.parts&&Gt.parts[F.partIndex];if(!Gt||"number"==typeof F.partIndex&&!ln)return null;if("number"!=typeof F.partIndex&&Gt.parts&&(F.partIndex=0,ln=Gt.parts[0]),!h&&ln&&!ln.independent)if(0===F.partIndex){var On=D[F.mediaIndex-1],Yt=On.parts&&On.parts.length&&On.parts[On.parts.length-1];Yt&&Yt.independent&&(F.mediaIndex-=1,F.partIndex=On.parts.length-1,F.independent="previous segment")}else Gt.parts[F.partIndex-1].independent&&(F.partIndex-=1,F.independent="previous part");return F.mediaIndex>=D.length-1&&this.mediaSource_&&"ended"===this.mediaSource_.readyState&&!this.seeking_()?null:this.generateSegmentInfo_(F)},u.generateSegmentInfo_=function(t){var s=t.independent,h=t.playlist,v=t.mediaIndex,S=t.startOfSegment,D=t.isSyncRequest,F=t.partIndex,ee=t.forceTimestampOffset,Y=t.getMediaInfoForTime,me=h.segments[v],Le="number"==typeof F&&me.parts[F],Be={requestId:"segment-loader-"+Math.random(),uri:Le&&Le.resolvedUri||me.resolvedUri,mediaIndex:v,partIndex:Le?F:null,isSyncRequest:D,startOfSegment:S,playlist:h,bytes:null,encryptedBytes:null,timestampOffset:null,timeline:me.timeline,duration:Le&&Le.duration||me.duration,segment:me,part:Le,byteLength:0,transmuxer:this.transmuxer_,getMediaInfoForTime:Y,independent:s},Ue=typeof ee<"u"?ee:this.isPendingTimestampOffset_;Be.timestampOffset=this.timestampOffsetForSegment_({segmentTimeline:me.timeline,currentTimeline:this.currentTimeline_,startOfSegment:S,buffered:this.buffered_(),overrideCheck:Ue});var Gt=_p(this.sourceUpdater_.audioBuffered());return"number"==typeof Gt&&(Be.audioAppendStart=Gt-this.sourceUpdater_.audioTimestampOffset()),this.sourceUpdater_.videoBuffered().length&&(Be.gopsToAlignWith=function(i,u,l){if(typeof u>"u"||null===u||!i.length)return[];var s,t=Math.ceil((u-l+3)*Ai.ONE_SECOND_IN_TS);for(s=0;s<i.length&&!(i[s].pts>t);s++);return i.slice(s)}(this.gopBuffer_,this.currentTime_()-this.sourceUpdater_.videoTimestampOffset(),this.timeMapping_)),Be},u.timestampOffsetForSegment_=function(t){return function(i){var u=i.segmentTimeline,l=i.currentTimeline,t=i.startOfSegment,s=i.buffered;return i.overrideCheck||u!==l?u<l?t:s.length?s.end(s.length-1):t:null}(t)},u.earlyAbortWhenNeeded_=function(t){if(!this.vhs_.tech_.paused()&&this.xhrOptions_.timeout&&this.playlist_.attributes.BANDWIDTH&&!(Date.now()-(t.firstBytesReceivedAt||Date.now())<1e3)){var s=this.currentTime_(),h=t.bandwidth,v=this.pendingSegment_.duration,S=el.estimateSegmentRequestTime(v,h,this.playlist_,t.bytesReceived),D=function(i,u,l){return void 0===l&&(l=1),((i.length?i.end(i.length-1):0)-u)/l}(this.buffered_(),s,this.vhs_.tech_.playbackRate())-1;if(!(S<=D)){var F=function(i){var l=i.currentTime,t=i.bandwidth,s=i.duration,h=i.segmentDuration,v=i.timeUntilRebuffer,S=i.currentTimeline,D=i.syncController,F=i.master.playlists.filter(function(Be){return!el.isIncompatible(Be)}),ee=F.filter(el.isEnabled);ee.length||(ee=F.filter(function(Be){return!el.isDisabled(Be)}));var me=ee.filter(el.hasAttribute.bind(null,"BANDWIDTH")).map(function(Be){var Gt=D.getSyncPoint(Be,s,S,l)?1:2;return{playlist:Be,rebufferingImpact:el.estimateSegmentRequestTime(h,t,Be)*Gt-v}}),Le=me.filter(function(Be){return Be.rebufferingImpact<=0});return Md(Le,function(Be,Ue){return Np(Ue.playlist,Be.playlist)}),Le.length?Le[0]:(Md(me,function(Be,Ue){return Be.rebufferingImpact-Ue.rebufferingImpact}),me[0]||null)}({master:this.vhs_.playlists.master,currentTime:s,bandwidth:h,duration:this.duration_(),segmentDuration:v,timeUntilRebuffer:D,currentTimeline:this.currentTimeline_,syncController:this.syncController_});if(F){var me=.5;D<=ql&&(me=1),F.playlist&&F.playlist.uri!==this.playlist_.uri&&!(S-D-F.rebufferingImpact<me)&&(this.bandwidth=F.playlist.attributes.BANDWIDTH*tu.BANDWIDTH_VARIANCE+1,this.trigger("earlyabort"))}}}},u.handleAbort_=function(t){this.logger_("Aborting "+Od(t)),this.mediaRequestsAborted+=1},u.handleProgress_=function(t,s){this.earlyAbortWhenNeeded_(s.stats),!this.checkForAbort_(s.requestId)&&this.trigger("progress")},u.handleTrackInfo_=function(t,s){this.earlyAbortWhenNeeded_(t.stats),!this.checkForAbort_(t.requestId)&&(this.checkForIllegalMediaSwitch(s)||(function(i,u){if(!i&&!u||!i&&u||i&&!u)return!1;if(i===u)return!0;var l=Object.keys(i).sort(),t=Object.keys(u).sort();if(l.length!==t.length)return!1;for(var s=0;s<l.length;s++){var h=l[s];if(h!==t[s]||i[h]!==u[h])return!1}return!0}(this.currentMediaInfo_,s=s||{})||(this.appendInitSegment_={audio:!0,video:!0},this.startingMediaInfo_=s,this.currentMediaInfo_=s,this.logger_("trackinfo update",s),this.trigger("trackinfo")),!this.checkForAbort_(t.requestId)&&(this.pendingSegment_.trackInfo=s,this.hasEnoughInfoToAppend_()&&this.processCallQueue_())))},u.handleTimingInfo_=function(t,s,h,v){if(this.earlyAbortWhenNeeded_(t.stats),!this.checkForAbort_(t.requestId)){var S=this.pendingSegment_,D=Iy(s);S[D]=S[D]||{},S[D][h]=v,this.logger_("timinginfo: "+s+" - "+h+" - "+v),this.hasEnoughInfoToAppend_()&&this.processCallQueue_()}},u.handleCaptions_=function(t,s){var h=this;if(this.earlyAbortWhenNeeded_(t.stats),!this.checkForAbort_(t.requestId)){if(0===s.length)return void this.logger_("SegmentLoader received no captions from a caption event");if(!this.pendingSegment_.hasAppendedData_)return void this.metadataQueue_.caption.push(this.handleCaptions_.bind(this,t,s));var S=null===this.sourceUpdater_.videoTimestampOffset()?this.sourceUpdater_.audioTimestampOffset():this.sourceUpdater_.videoTimestampOffset(),D={};s.forEach(function(F){D[F.stream]=D[F.stream]||{startTime:1/0,captions:[],endTime:0};var ee=D[F.stream];ee.startTime=Math.min(ee.startTime,F.startTime+S),ee.endTime=Math.max(ee.endTime,F.endTime+S),ee.captions.push(F)}),Object.keys(D).forEach(function(F){var ee=D[F],Y=ee.startTime,me=ee.endTime,Le=ee.captions,Be=h.inbandTextTracks_;h.logger_("adding cues from "+Y+" -> "+me+" for "+F),function(i,u,l){if(!i[l]){u.trigger({type:"usage",name:"vhs-608"}),u.trigger({type:"usage",name:"hls-608"});var t=l;/^cc708_/.test(l)&&(t="SERVICE"+l.split("_")[1]);var s=u.textTracks().getTrackById(t);if(s)i[l]=s;else{var v=l,S=l,D=!1,F=(u.options_.vhs&&u.options_.vhs.captionServices||{})[t];F&&(v=F.label,S=F.language,D=F.default),i[l]=u.addRemoteTextTrack({kind:"captions",id:t,default:D,label:v,language:S},!1).track}}}(Be,h.vhs_.tech_,F),kh(Y,me,Be[F]),function(i){var u=i.inbandTextTracks,l=i.captionArray,t=i.timestampOffset;if(l){var s=ae().WebKitDataCue||ae().VTTCue;l.forEach(function(h){u[h.stream].addCue(new s(h.startTime+t,h.endTime+t,h.text))})}}({captionArray:Le,inbandTextTracks:Be,timestampOffset:S})}),this.transmuxer_&&this.transmuxer_.postMessage({action:"clearParsedMp4Captions"})}},u.handleId3_=function(t,s,h){if(this.earlyAbortWhenNeeded_(t.stats),!this.checkForAbort_(t.requestId)){if(!this.pendingSegment_.hasAppendedData_)return void this.metadataQueue_.id3.push(this.handleId3_.bind(this,t,s,h));var S=null===this.sourceUpdater_.videoTimestampOffset()?this.sourceUpdater_.audioTimestampOffset():this.sourceUpdater_.videoTimestampOffset();(function(i,u,l){i.metadataTrack_||(i.metadataTrack_=l.addRemoteTextTrack({kind:"metadata",label:"Timed Metadata"},!1).track,i.metadataTrack_.inBandMetadataTrackDispatchType=u)})(this.inbandTextTracks_,h,this.vhs_.tech_),function(i){var u=i.inbandTextTracks,l=i.metadataArray,t=i.timestampOffset,s=i.videoDuration;if(l){var h=ae().WebKitDataCue||ae().VTTCue,v=u.metadataTrack_;if(v&&(l.forEach(function(me){var Le=me.cueTime+t;"number"!=typeof Le||ae().isNaN(Le)||Le<0||!(Le<1/0)||me.frames.forEach(function(Be){var Ue=new h(Le,Le,Be.value||Be.url||Be.data||"");Ue.frame=Be,Ue.value=Be,function(i){Object.defineProperties(i.frame,{id:{get:function(){return At.log.warn("cue.frame.id is deprecated. Use cue.value.key instead."),i.value.key}},value:{get:function(){return At.log.warn("cue.frame.value is deprecated. Use cue.value.data instead."),i.value.data}},privateData:{get:function(){return At.log.warn("cue.frame.privateData is deprecated. Use cue.value.data instead."),i.value.data}}})}(Ue),v.addCue(Ue)})}),v.cues&&v.cues.length)){for(var S=v.cues,D=[],F=0;F<S.length;F++)S[F]&&D.push(S[F]);var ee=D.reduce(function(me,Le){var Be=me[Le.startTime]||[];return Be.push(Le),me[Le.startTime]=Be,me},{}),Y=Object.keys(ee).sort(function(me,Le){return Number(me)-Number(Le)});Y.forEach(function(me,Le){var Be=ee[me],Ue=Number(Y[Le+1])||s;Be.forEach(function(Gt){Gt.endTime=Ue})})}}}({inbandTextTracks:this.inbandTextTracks_,metadataArray:s,timestampOffset:S,videoDuration:this.duration_()})}},u.processMetadataQueue_=function(){this.metadataQueue_.id3.forEach(function(t){return t()}),this.metadataQueue_.caption.forEach(function(t){return t()}),this.metadataQueue_.id3=[],this.metadataQueue_.caption=[]},u.processCallQueue_=function(){var t=this.callQueue_;this.callQueue_=[],t.forEach(function(s){return s()})},u.processLoadQueue_=function(){var t=this.loadQueue_;this.loadQueue_=[],t.forEach(function(s){return s()})},u.hasEnoughInfoToLoad_=function(){if("audio"!==this.loaderType_)return!0;var t=this.pendingSegment_;return!(!t||this.getCurrentMediaInfo_()&&jp({timelineChangeController:this.timelineChangeController_,currentTimeline:this.currentTimeline_,segmentTimeline:t.timeline,loaderType:this.loaderType_,audioDisabled:this.audioDisabled_}))},u.getCurrentMediaInfo_=function(t){return void 0===t&&(t=this.pendingSegment_),t&&t.trackInfo||this.currentMediaInfo_},u.getMediaInfo_=function(t){return void 0===t&&(t=this.pendingSegment_),this.getCurrentMediaInfo_(t)||this.startingMediaInfo_},u.getPendingSegmentPlaylist=function(){return this.pendingSegment_?this.pendingSegment_.playlist:null},u.hasEnoughInfoToAppend_=function(){if(!this.sourceUpdater_.ready()||this.waitingOnRemove_||this.quotaExceededErrorRetryTimeout_)return!1;var t=this.pendingSegment_,s=this.getCurrentMediaInfo_();return!(!t||!s||s.hasVideo&&!t.videoTimingInfo||s.hasAudio&&!this.audioDisabled_&&!s.isMuxed&&!t.audioTimingInfo||jp({timelineChangeController:this.timelineChangeController_,currentTimeline:this.currentTimeline_,segmentTimeline:t.timeline,loaderType:this.loaderType_,audioDisabled:this.audioDisabled_}))},u.handleData_=function(t,s){if(this.earlyAbortWhenNeeded_(t.stats),!this.checkForAbort_(t.requestId)){if(this.callQueue_.length||!this.hasEnoughInfoToAppend_())return void this.callQueue_.push(this.handleData_.bind(this,t,s));var h=this.pendingSegment_;if(this.setTimeMapping_(h.timeline),this.updateMediaSecondsLoaded_(h.part||h.segment),"closed"!==this.mediaSource_.readyState){if(t.map&&(t.map=this.initSegmentForMap(t.map,!0),h.segment.map=t.map),t.key&&this.segmentKey(t.key,!0),h.isFmp4=t.isFmp4,h.timingInfo=h.timingInfo||{},h.isFmp4)this.trigger("fmp4"),h.timingInfo.start=h[Iy(s.type)].start;else{var D,v=this.getCurrentMediaInfo_(),S="main"===this.loaderType_&&v&&v.hasVideo;S&&(D=h.videoTimingInfo.start),h.timingInfo.start=this.trueSegmentStart_({currentStart:h.timingInfo.start,playlist:h.playlist,mediaIndex:h.mediaIndex,currentVideoTimestampOffset:this.sourceUpdater_.videoTimestampOffset(),useVideoTimingInfo:S,firstVideoFrameTimeForData:D,videoTimingInfo:h.videoTimingInfo,audioTimingInfo:h.audioTimingInfo})}if(this.updateAppendInitSegmentStatus(h,s.type),this.updateSourceBufferTimestampOffset_(h),h.isSyncRequest){this.updateTimingInfoEnd_(h),this.syncController_.saveSegmentTimingInfo({segmentInfo:h,shouldSaveTimelineMapping:"main"===this.loaderType_});var F=this.chooseNextRequest_();if(F.mediaIndex!==h.mediaIndex||F.partIndex!==h.partIndex)return void this.logger_("sync segment was incorrect, not appending");this.logger_("sync segment was correct, appending")}h.hasAppendedData_=!0,this.processMetadataQueue_(),this.appendData_(h,s)}}},u.updateAppendInitSegmentStatus=function(t,s){"main"===this.loaderType_&&"number"==typeof t.timestampOffset&&!t.changedTimestampOffset&&(this.appendInitSegment_={audio:!0,video:!0}),this.playlistOfLastInitSegment_[s]!==t.playlist&&(this.appendInitSegment_[s]=!0)},u.getInitSegmentAndUpdateState_=function(t){var s=t.type,h=t.initSegment,v=t.map,S=t.playlist;if(v){var D=Ip(v);if(this.activeInitSegmentId_===D)return null;h=this.initSegmentForMap(v,!0).bytes,this.activeInitSegmentId_=D}return h&&this.appendInitSegment_[s]?(this.playlistOfLastInitSegment_[s]=S,this.appendInitSegment_[s]=!1,this.activeInitSegmentId_=null,h):null},u.handleQuotaExceededError_=function(t,s){var h=this,v=t.segmentInfo,S=t.type,D=t.bytes,F=this.sourceUpdater_.audioBuffered(),ee=this.sourceUpdater_.videoBuffered();F.length>1&&this.logger_("On QUOTA_EXCEEDED_ERR, found gaps in the audio buffer: "+xf(F).join(", ")),ee.length>1&&this.logger_("On QUOTA_EXCEEDED_ERR, found gaps in the video buffer: "+xf(ee).join(", "));var Y=F.length?F.start(0):0,me=F.length?F.end(F.length-1):0,Le=ee.length?ee.start(0):0,Be=ee.length?ee.end(ee.length-1):0;if(me-Y<=1&&Be-Le<=1)return this.logger_("On QUOTA_EXCEEDED_ERR, single segment too large to append to buffer, triggering an error. Appended byte length: "+D.byteLength+", audio buffer: "+xf(F).join(", ")+", video buffer: "+xf(ee).join(", ")+", "),this.error({message:"Quota exceeded error with append of a single segment of content",excludeUntil:1/0}),void this.trigger("error");this.waitingOnRemove_=!0,this.callQueue_.push(this.appendToSourceBuffer_.bind(this,{segmentInfo:v,type:S,bytes:D}));var Gt=this.currentTime_()-1;this.logger_("On QUOTA_EXCEEDED_ERR, removing audio/video from 0 to "+Gt),this.remove(0,Gt,function(){h.logger_("On QUOTA_EXCEEDED_ERR, retrying append in 1s"),h.waitingOnRemove_=!1,h.quotaExceededErrorRetryTimeout_=ae().setTimeout(function(){h.logger_("On QUOTA_EXCEEDED_ERR, re-processing call queue"),h.quotaExceededErrorRetryTimeout_=null,h.processCallQueue_()},1e3)},!0)},u.handleAppendError_=function(t,s){var h=t.segmentInfo,v=t.type,S=t.bytes;if(s){if(22===s.code)return void this.handleQuotaExceededError_({segmentInfo:h,type:v,bytes:S});this.logger_("Received non QUOTA_EXCEEDED_ERR on append",s),this.error(v+" append of "+S.length+"b failed for segment #"+h.mediaIndex+" in playlist "+h.playlist.id),this.trigger("appenderror")}},u.appendToSourceBuffer_=function(t){var s=t.segmentInfo,h=t.type,v=t.initSegment,S=t.data,D=t.bytes;if(!D){var F=[S],ee=S.byteLength;v&&(F.unshift(v),ee+=v.byteLength),D=function(i){var l,u=0;return i.bytes&&(l=new Uint8Array(i.bytes),i.segments.forEach(function(t){l.set(t,u),u+=t.byteLength})),l}({bytes:ee,segments:F})}this.sourceUpdater_.appendBuffer({segmentInfo:s,type:h,bytes:D},this.handleAppendError_.bind(this,{segmentInfo:s,type:h,bytes:D}))},u.handleSegmentTimingInfo_=function(t,s,h){if(this.pendingSegment_&&s===this.pendingSegment_.requestId){var v=this.pendingSegment_.segment,S=t+"TimingInfo";v[S]||(v[S]={}),v[S].transmuxerPrependedSeconds=h.prependedContentDuration||0,v[S].transmuxedPresentationStart=h.start.presentation,v[S].transmuxedDecodeStart=h.start.decode,v[S].transmuxedPresentationEnd=h.end.presentation,v[S].transmuxedDecodeEnd=h.end.decode,v[S].baseMediaDecodeTime=h.baseMediaDecodeTime}},u.appendData_=function(t,s){var h=s.type,v=s.data;if(v&&v.byteLength&&("audio"!==h||!this.audioDisabled_)){var S=this.getInitSegmentAndUpdateState_({type:h,initSegment:s.initSegment,playlist:t.playlist,map:t.isFmp4?t.segment.map:null});this.appendToSourceBuffer_({segmentInfo:t,type:h,initSegment:S,data:v})}},u.loadSegment_=function(t){var s=this;this.state="WAITING",this.pendingSegment_=t,this.trimBackBuffer_(t),"number"==typeof t.timestampOffset&&this.transmuxer_&&this.transmuxer_.postMessage({action:"clearAllMp4Captions"}),this.hasEnoughInfoToLoad_()?this.updateTransmuxerAndRequestSegment_(t):this.loadQueue_.push(function(){var h=at({},t,{forceTimestampOffset:!0});at(t,s.generateSegmentInfo_(h)),s.isPendingTimestampOffset_=!1,s.updateTransmuxerAndRequestSegment_(t)})},u.updateTransmuxerAndRequestSegment_=function(t){var s=this;this.shouldUpdateTransmuxerTimestampOffset_(t.timestampOffset)&&(this.gopBuffer_.length=0,t.gopsToAlignWith=[],this.timeMapping_=0,this.transmuxer_.postMessage({action:"reset"}),this.transmuxer_.postMessage({action:"setTimestampOffset",timestampOffset:t.timestampOffset}));var h=this.createSimplifiedSegmentObj_(t),F=this.isEndOfStream_(t.mediaIndex,t.playlist,t.partIndex)||null!==this.mediaIndex&&t.timeline!==this.currentTimeline_&&t.timeline>0;this.logger_("Requesting "+Od(t)),h.map&&!h.map.bytes&&(this.logger_("going to request init segment."),this.appendInitSegment_={video:!0,audio:!0}),t.abortRequests=_y({xhr:this.vhs_.xhr,xhrOptions:this.xhrOptions_,decryptionWorker:this.decrypter_,segment:h,abortFn:this.handleAbort_.bind(this,t),progressFn:this.handleProgress_.bind(this),trackInfoFn:this.handleTrackInfo_.bind(this),timingInfoFn:this.handleTimingInfo_.bind(this),videoSegmentTimingInfoFn:this.handleSegmentTimingInfo_.bind(this,"video",t.requestId),audioSegmentTimingInfoFn:this.handleSegmentTimingInfo_.bind(this,"audio",t.requestId),captionsFn:this.handleCaptions_.bind(this),isEndOfTimeline:F,endedTimelineFn:function(){s.logger_("received endedtimeline callback")},id3Fn:this.handleId3_.bind(this),dataFn:this.handleData_.bind(this),doneFn:this.segmentRequestFinished_.bind(this),onTransmuxerLog:function(Y){var me=Y.message,Le=Y.level,Be=Y.stream;s.logger_(Od(t)+" logged from transmuxer stream "+Be+" as a "+Le+": "+me)}})},u.trimBackBuffer_=function(t){var s=function(i,u,l){var t=u-tu.BACK_BUFFER_LENGTH;return i.length&&(t=Math.max(t,i.start(0))),Math.min(u-l,t)}(this.seekable_(),this.currentTime_(),this.playlist_.targetDuration||10);s>0&&this.remove(0,s)},u.createSimplifiedSegmentObj_=function(t){var s=t.segment,h=t.part,v={resolvedUri:h?h.resolvedUri:s.resolvedUri,byterange:h?h.byterange:s.byterange,requestId:t.requestId,transmuxer:t.transmuxer,audioAppendStart:t.audioAppendStart,gopsToAlignWith:t.gopsToAlignWith,part:t.part},S=t.playlist.segments[t.mediaIndex-1];if(S&&S.timeline===s.timeline&&(S.videoTimingInfo?v.baseStartTime=S.videoTimingInfo.transmuxedDecodeEnd:S.audioTimingInfo&&(v.baseStartTime=S.audioTimingInfo.transmuxedDecodeEnd)),s.key){var D=s.key.iv||new Uint32Array([0,0,0,t.mediaIndex+t.playlist.mediaSequence]);v.key=this.segmentKey(s.key),v.key.iv=D}return s.map&&(v.map=this.initSegmentForMap(s.map)),v},u.saveTransferStats_=function(t){this.mediaRequests+=1,t&&(this.mediaBytesTransferred+=t.bytesReceived,this.mediaTransferDuration+=t.roundTripTime)},u.saveBandwidthRelatedStats_=function(t,s){this.pendingSegment_.byteLength=s.bytesReceived,t<Ff?this.logger_("Ignoring segment's bandwidth because its duration of "+t+" is less than the min to record "+Ff):(this.bandwidth=s.bandwidth,this.roundTrip=s.roundTripTime)},u.handleTimeout_=function(){this.mediaRequestsTimedout+=1,this.bandwidth=1,this.roundTrip=NaN,this.trigger("bandwidthupdate"),this.trigger("timeout")},u.segmentRequestFinished_=function(t,s,h){if(this.callQueue_.length)this.callQueue_.push(this.segmentRequestFinished_.bind(this,t,s,h));else if(this.saveTransferStats_(s.stats),this.pendingSegment_&&s.requestId===this.pendingSegment_.requestId){if(t){if(this.pendingSegment_=null,this.state="READY",-102===t.code)return;return this.pause(),-101===t.code?void this.handleTimeout_():(this.mediaRequestsErrored+=1,this.error(t),void this.trigger("error"))}var v=this.pendingSegment_;this.saveBandwidthRelatedStats_(v.duration,s.stats),v.endOfAllRequests=s.endOfAllRequests,h.gopInfo&&(this.gopBuffer_=function(i,u,l){if(!u.length)return i;if(l)return u.slice();for(var t=u[0].pts,s=0;s<i.length&&!(i[s].pts>=t);s++);return i.slice(0,s).concat(u)}(this.gopBuffer_,h.gopInfo,this.safeAppend_)),this.state="APPENDING",this.trigger("appending"),this.waitForAppendsToComplete_(v)}},u.setTimeMapping_=function(t){var s=this.syncController_.mappingForTimeline(t);null!==s&&(this.timeMapping_=s)},u.updateMediaSecondsLoaded_=function(t){this.mediaSecondsLoaded+="number"==typeof t.start&&"number"==typeof t.end?t.end-t.start:t.duration},u.shouldUpdateTransmuxerTimestampOffset_=function(t){return null!==t&&("main"===this.loaderType_&&t!==this.sourceUpdater_.videoTimestampOffset()||!this.audioDisabled_&&t!==this.sourceUpdater_.audioTimestampOffset())},u.trueSegmentStart_=function(t){var s=t.currentStart,v=t.mediaIndex,S=t.firstVideoFrameTimeForData;if(typeof s<"u")return s;if(!t.useVideoTimingInfo)return t.audioTimingInfo.start;var me=t.playlist.segments[v-1];return 0===v||!me||typeof me.start>"u"||me.end!==S+t.currentVideoTimestampOffset?S:t.videoTimingInfo.start},u.waitForAppendsToComplete_=function(t){var s=this.getCurrentMediaInfo_(t);if(!s)return this.error({message:"No starting media returned, likely due to an unsupported media format.",blacklistDuration:1/0}),void this.trigger("error");var D="main"===this.loaderType_&&s.hasVideo,F=!this.audioDisabled_&&s.hasAudio&&!s.isMuxed;if(t.waitingOnAppends=0,!t.hasAppendedData_)return!t.timingInfo&&"number"==typeof t.timestampOffset&&(this.isPendingTimestampOffset_=!0),t.timingInfo={start:0},t.waitingOnAppends++,this.isPendingTimestampOffset_||(this.updateSourceBufferTimestampOffset_(t),this.processMetadataQueue_()),void this.checkAppendsDone_(t);D&&t.waitingOnAppends++,F&&t.waitingOnAppends++,D&&this.sourceUpdater_.videoQueueCallback(this.checkAppendsDone_.bind(this,t)),F&&this.sourceUpdater_.audioQueueCallback(this.checkAppendsDone_.bind(this,t))},u.checkAppendsDone_=function(t){this.checkForAbort_(t.requestId)||(t.waitingOnAppends--,0===t.waitingOnAppends&&this.handleAppendsDone_())},u.checkForIllegalMediaSwitch=function(t){var s=function(i,u,l){return"main"===i&&u&&l?l.hasAudio||l.hasVideo?u.hasVideo&&!l.hasVideo?"Only audio found in segment when we expected video. We can't switch to audio only from a stream that had video. To get rid of this message, please add codec information to the manifest.":!u.hasVideo&&l.hasVideo?"Video found in segment when we expected only audio. We can't switch to a stream with video from an audio only stream. To get rid of this message, please add codec information to the manifest.":null:"Neither audio nor video found in segment.":null}(this.loaderType_,this.getCurrentMediaInfo_(),t);return!!s&&(this.error({message:s,blacklistDuration:1/0}),this.trigger("error"),!0)},u.updateSourceBufferTimestampOffset_=function(t){if(null!==t.timestampOffset&&"number"==typeof t.timingInfo.start&&!t.changedTimestampOffset&&"main"===this.loaderType_){var s=!1;t.timestampOffset-=this.getSegmentStartTimeForTimestampOffsetCalculation_({videoTimingInfo:t.segment.videoTimingInfo,audioTimingInfo:t.segment.audioTimingInfo,timingInfo:t.timingInfo}),t.changedTimestampOffset=!0,t.timestampOffset!==this.sourceUpdater_.videoTimestampOffset()&&(this.sourceUpdater_.videoTimestampOffset(t.timestampOffset),s=!0),t.timestampOffset!==this.sourceUpdater_.audioTimestampOffset()&&(this.sourceUpdater_.audioTimestampOffset(t.timestampOffset),s=!0),s&&this.trigger("timestampoffset")}},u.getSegmentStartTimeForTimestampOffsetCalculation_=function(t){var s=t.videoTimingInfo,h=t.audioTimingInfo,v=t.timingInfo;return this.useDtsForTimestampOffset_?s&&"number"==typeof s.transmuxedDecodeStart?s.transmuxedDecodeStart:h&&"number"==typeof h.transmuxedDecodeStart?h.transmuxedDecodeStart:v.start:v.start},u.updateTimingInfoEnd_=function(t){t.timingInfo=t.timingInfo||{};var s=this.getMediaInfo_(),v="main"===this.loaderType_&&s&&s.hasVideo&&t.videoTimingInfo?t.videoTimingInfo:t.audioTimingInfo;v&&(t.timingInfo.end="number"==typeof v.end?v.end:v.start+t.duration)},u.handleAppendsDone_=function(){if(this.pendingSegment_&&this.trigger("appendsdone"),!this.pendingSegment_)return this.state="READY",void(this.paused()||this.monitorBuffer_());var t=this.pendingSegment_;this.updateTimingInfoEnd_(t),this.shouldSaveSegmentTimingInfo_&&this.syncController_.saveSegmentTimingInfo({segmentInfo:t,shouldSaveTimelineMapping:"main"===this.loaderType_});var s=function(i,u){if("hls"!==u)return null;var l=function(i){var u=0;return["video","audio"].forEach(function(l){var t=i[l+"TimingInfo"];if(t){var v,s=t.start,h=t.end;"bigint"==typeof s||"bigint"==typeof h?v=ae().BigInt(h)-ae().BigInt(s):"number"==typeof s&&"number"==typeof h&&(v=h-s),typeof v<"u"&&v>u&&(u=v)}}),"bigint"==typeof u&&u<Number.MAX_SAFE_INTEGER&&(u=Number(u)),u}({audioTimingInfo:i.audioTimingInfo,videoTimingInfo:i.videoTimingInfo});if(!l)return null;var t=i.playlist.targetDuration,s=Dy({segmentDuration:l,maxDuration:2*t}),h=Dy({segmentDuration:l,maxDuration:t});return s||h?{severity:s?"warn":"info",message:"Segment with index "+i.mediaIndex+" from playlist "+i.playlist.id+" has a duration of "+l+" when the reported duration is "+i.duration+" and the target duration is "+t+". For HLS content, a duration in excess of the target duration may result in playback issues. See the HLS specification section on EXT-X-TARGETDURATION for more details: https://tools.ietf.org/html/draft-pantos-http-live-streaming-23#section-4.3.3.1"}:null}(t,this.sourceType_);if(s&&("warn"===s.severity?At.log.warn(s.message):this.logger_(s.message)),this.recordThroughput_(t),this.pendingSegment_=null,this.state="READY",!t.isSyncRequest||(this.trigger("syncinfoupdate"),t.hasAppendedData_)){this.logger_("Appended "+Od(t)),this.addSegmentMetadataCue_(t),this.fetchAtBuffer_=!0,this.currentTimeline_!==t.timeline&&(this.timelineChangeController_.lastTimelineChange({type:this.loaderType_,from:this.currentTimeline_,to:t.timeline}),"main"===this.loaderType_&&!this.audioDisabled_&&this.timelineChangeController_.lastTimelineChange({type:"audio",from:this.currentTimeline_,to:t.timeline})),this.currentTimeline_=t.timeline,this.trigger("syncinfoupdate");var h=t.segment,v=t.part,S=h.end&&this.currentTime_()-h.end>3*t.playlist.targetDuration,D=v&&v.end&&this.currentTime_()-v.end>3*t.playlist.partTargetDuration;if(S||D)return this.logger_("bad "+(S?"segment":"part")+" "+Od(t)),void this.resetEverything();null!==this.mediaIndex&&this.trigger("bandwidthupdate"),this.trigger("progress"),this.mediaIndex=t.mediaIndex,this.partIndex=t.partIndex,this.isEndOfStream_(t.mediaIndex,t.playlist,t.partIndex)&&this.endOfStream(),this.trigger("appended"),t.hasAppendedData_&&this.mediaAppends++,this.paused()||this.monitorBuffer_()}else this.logger_("Throwing away un-appended sync request "+Od(t))},u.recordThroughput_=function(t){if(t.duration<Ff)this.logger_("Ignoring segment's throughput because its duration of "+t.duration+" is less than the min to record "+Ff);else{var s=this.throughput.rate,h=Date.now()-t.endOfAllRequests+1,v=Math.floor(t.byteLength/h*8*1e3);this.throughput.rate+=(v-s)/++this.throughput.count}},u.addSegmentMetadataCue_=function(t){if(this.segmentMetadataTrack_){var s=t.segment,h=s.start,v=s.end;if(Rh(h)&&Rh(v)){kh(h,v,this.segmentMetadataTrack_);var S=ae().WebKitDataCue||ae().VTTCue,D={custom:s.custom,dateTimeObject:s.dateTimeObject,dateTimeString:s.dateTimeString,bandwidth:t.playlist.attributes.BANDWIDTH,resolution:t.playlist.attributes.RESOLUTION,codecs:t.playlist.attributes.CODECS,byteLength:t.byteLength,uri:t.uri,timeline:t.timeline,playlist:t.playlist.id,start:h,end:v},ee=new S(h,v,JSON.stringify(D));ee.value=D,this.segmentMetadataTrack_.addCue(ee)}}},i}(At.EventTarget);function nc(){}var id,Ay=function(i){return"string"!=typeof i?i:i.replace(/./,function(u){return u.toUpperCase()})},Up=["video","audio"],av=function(i,u){var l=u[i+"Buffer"];return l&&l.updating||u.queuePending[i]},Nh=function g(i,u){if(0!==u.queue.length){var l=0,t=u.queue[l];if("mediaSource"===t.type)return void(!u.updating()&&"closed"!==u.mediaSource.readyState&&(u.queue.shift(),t.action(u),t.doneFn&&t.doneFn(),g("audio",u),g("video",u)));if("mediaSource"!==i&&u.ready()&&"closed"!==u.mediaSource.readyState&&!av(i,u)){if(t.type!==i){if(l=function(i,u){for(var l=0;l<u.length;l++){var t=u[l];if("mediaSource"===t.type)return null;if(t.type===i)return l}return null}(i,u.queue),null===l)return;t=u.queue[l]}if(u.queue.splice(l,1),u.queuePending[i]=t,t.action(i,u),!t.doneFn)return u.queuePending[i]=null,void g(i,u)}}},Uf=function(i,u){var l=u[i+"Buffer"],t=Ay(i);l&&(l.removeEventListener("updateend",u["on"+t+"UpdateEnd_"]),l.removeEventListener("error",u["on"+t+"Error_"]),u.codecs[i]=null,u[i+"Buffer"]=null)},Bu=function(i,u){return i&&u&&-1!==Array.prototype.indexOf.call(i.sourceBuffers,u)},tl_appendBuffer=function(i,u,l){return function(t,s){var h=s[t+"Buffer"];if(Bu(s.mediaSource,h)){s.logger_("Appending segment "+u.mediaIndex+"'s "+i.length+" bytes to "+t+"Buffer");try{h.appendBuffer(i)}catch(v){s.logger_("Error with code "+v.code+" "+(22===v.code?"(QUOTA_EXCEEDED_ERR) ":"")+"when appending segment "+u.mediaIndex+" to "+t+"Buffer"),s.queuePending[t]=null,l(v)}}}},tl_remove=function(i,u){return function(l,t){var s=t[l+"Buffer"];if(Bu(t.mediaSource,s)){t.logger_("Removing "+i+" to "+u+" from "+l+"Buffer");try{s.remove(i,u)}catch{t.logger_("Remove "+i+" to "+u+" from "+l+"Buffer failed")}}}},tl_timestampOffset=function(i){return function(u,l){var t=l[u+"Buffer"];Bu(l.mediaSource,t)&&(l.logger_("Setting "+u+"timestampOffset to "+i),t.timestampOffset=i)}},tl_callback=function(i){return function(u,l){i()}},tl_endOfStream=function(i){return function(u){if("open"===u.mediaSource.readyState){u.logger_("Calling mediaSource endOfStream("+(i||"")+")");try{u.mediaSource.endOfStream(i)}catch(l){At.log.warn("Failed to call media source endOfStream",l)}}}},tl_duration=function(i){return function(u){u.logger_("Setting mediaSource duration to "+i);try{u.mediaSource.duration=i}catch(l){At.log.warn("Failed to set media source duration",l)}}},tl_addSourceBuffer=function(i,u){return function(l){var t=Ay(i),s=Ri(u);l.logger_("Adding "+i+"Buffer with codec "+u+" to mediaSource");var h=l.mediaSource.addSourceBuffer(s);h.addEventListener("updateend",l["on"+t+"UpdateEnd_"]),h.addEventListener("error",l["on"+t+"Error_"]),l.codecs[i]=u,l[i+"Buffer"]=h}},tl_removeSourceBuffer=function(i){return function(u){var l=u[i+"Buffer"];if(Uf(i,u),Bu(u.mediaSource,l)){u.logger_("Removing "+i+"Buffer with codec "+u.codecs[i]+" from mediaSource");try{u.mediaSource.removeSourceBuffer(l)}catch(t){At.log.warn("Failed to removeSourceBuffer "+i+"Buffer",t)}}}},tl_changeType=function(i){return function(u,l){var t=l[u+"Buffer"],s=Ri(i);Bu(l.mediaSource,t)&&l.codecs[u]!==i&&(l.logger_("changing "+u+"Buffer codec from "+l.codecs[u]+" to "+i),t.changeType(s),l.codecs[u]=i)}},Sa=function(i){var u=i.type,l=i.sourceUpdater;l.queue.push({type:u,action:i.action,doneFn:i.doneFn,name:i.name}),Nh(u,l)},kd=function(i,u){return function(l){if(u.queuePending[i]){var t=u.queuePending[i].doneFn;u.queuePending[i]=null,t&&t(u[i+"Error_"])}Nh(i,u)}},Bp=function(g){function i(l){var t;return(t=g.call(this)||this).mediaSource=l,t.sourceopenListener_=function(){return Nh("mediaSource",dt(t))},t.mediaSource.addEventListener("sourceopen",t.sourceopenListener_),t.logger_=Iu("SourceUpdater"),t.audioTimestampOffset_=0,t.videoTimestampOffset_=0,t.queue=[],t.queuePending={audio:null,video:null},t.delayedAudioAppendQueue_=[],t.videoAppendQueued_=!1,t.codecs={},t.onVideoUpdateEnd_=kd("video",dt(t)),t.onAudioUpdateEnd_=kd("audio",dt(t)),t.onVideoError_=function(s){t.videoError_=s},t.onAudioError_=function(s){t.audioError_=s},t.createdSourceBuffers_=!1,t.initializedEme_=!1,t.triggeredReady_=!1,t}Me(i,g);var u=i.prototype;return u.initializedEme=function(){this.initializedEme_=!0,this.triggerReady()},u.hasCreatedSourceBuffers=function(){return this.createdSourceBuffers_},u.hasInitializedAnyEme=function(){return this.initializedEme_},u.ready=function(){return this.hasCreatedSourceBuffers()&&this.hasInitializedAnyEme()},u.createSourceBuffers=function(t){this.hasCreatedSourceBuffers()||(this.addOrChangeSourceBuffers(t),this.createdSourceBuffers_=!0,this.trigger("createdsourcebuffers"),this.triggerReady())},u.triggerReady=function(){this.ready()&&!this.triggeredReady_&&(this.triggeredReady_=!0,this.trigger("ready"))},u.addSourceBuffer=function(t,s){Sa({type:"mediaSource",sourceUpdater:this,action:tl_addSourceBuffer(t,s),name:"addSourceBuffer"})},u.abort=function(t){Sa({type:t,sourceUpdater:this,action:function(i,u){if("open"===u.mediaSource.readyState){var l=u[i+"Buffer"];if(Bu(u.mediaSource,l)){u.logger_("calling abort on "+i+"Buffer");try{l.abort()}catch(t){At.log.warn("Failed to abort on "+i+"Buffer",t)}}}},name:"abort"})},u.removeSourceBuffer=function(t){this.canRemoveSourceBuffer()?Sa({type:"mediaSource",sourceUpdater:this,action:tl_removeSourceBuffer(t),name:"removeSourceBuffer"}):At.log.error("removeSourceBuffer is not supported!")},u.canRemoveSourceBuffer=function(){return!At.browser.IE_VERSION&&!At.browser.IS_FIREFOX&&ae().MediaSource&&ae().MediaSource.prototype&&"function"==typeof ae().MediaSource.prototype.removeSourceBuffer},i.canChangeType=function(){return ae().SourceBuffer&&ae().SourceBuffer.prototype&&"function"==typeof ae().SourceBuffer.prototype.changeType},u.canChangeType=function(){return this.constructor.canChangeType()},u.changeType=function(t,s){this.canChangeType()?Sa({type:t,sourceUpdater:this,action:tl_changeType(s),name:"changeType"}):At.log.error("changeType is not supported!")},u.addOrChangeSourceBuffers=function(t){var s=this;if(!t||"object"!=typeof t||0===Object.keys(t).length)throw new Error("Cannot addOrChangeSourceBuffers to undefined codecs");Object.keys(t).forEach(function(h){var v=t[h];if(!s.hasCreatedSourceBuffers())return s.addSourceBuffer(h,v);s.canChangeType()&&s.changeType(h,v)})},u.appendBuffer=function(t,s){var h=this,v=t.segmentInfo,S=t.type,D=t.bytes;if(this.processedAppend_=!0,"audio"===S&&this.videoBuffer&&!this.videoAppendQueued_)return this.delayedAudioAppendQueue_.push([t,s]),void this.logger_("delayed audio append of "+D.length+" until video append");if(Sa({type:S,sourceUpdater:this,action:tl_appendBuffer(D,v||{mediaIndex:-1},s),doneFn:s,name:"appendBuffer"}),"video"===S){if(this.videoAppendQueued_=!0,!this.delayedAudioAppendQueue_.length)return;var ee=this.delayedAudioAppendQueue_.slice();this.logger_("queuing delayed audio "+ee.length+" appendBuffers"),this.delayedAudioAppendQueue_.length=0,ee.forEach(function(Y){h.appendBuffer.apply(h,Y)})}},u.audioBuffered=function(){return Bu(this.mediaSource,this.audioBuffer)&&this.audioBuffer.buffered?this.audioBuffer.buffered:At.createTimeRange()},u.videoBuffered=function(){return Bu(this.mediaSource,this.videoBuffer)&&this.videoBuffer.buffered?this.videoBuffer.buffered:At.createTimeRange()},u.buffered=function(){var t=Bu(this.mediaSource,this.videoBuffer)?this.videoBuffer:null,s=Bu(this.mediaSource,this.audioBuffer)?this.audioBuffer:null;return s&&!t?this.audioBuffered():t&&!s?this.videoBuffered():function(i,u){var l=null,t=null,s=0,h=[],v=[];if(!(i&&i.length&&u&&u.length))return At.createTimeRange();for(var S=i.length;S--;)h.push({time:i.start(S),type:"start"}),h.push({time:i.end(S),type:"end"});for(S=u.length;S--;)h.push({time:u.start(S),type:"start"}),h.push({time:u.end(S),type:"end"});for(h.sort(function(D,F){return D.time-F.time}),S=0;S<h.length;S++)"start"===h[S].type?2==++s&&(l=h[S].time):"end"===h[S].type&&1==--s&&(t=h[S].time),null!==l&&null!==t&&(v.push([l,t]),l=null,t=null);return At.createTimeRanges(v)}(this.audioBuffered(),this.videoBuffered())},u.setDuration=function(t,s){void 0===s&&(s=nc),Sa({type:"mediaSource",sourceUpdater:this,action:tl_duration(t),name:"duration",doneFn:s})},u.endOfStream=function(t,s){void 0===t&&(t=null),void 0===s&&(s=nc),"string"!=typeof t&&(t=void 0),Sa({type:"mediaSource",sourceUpdater:this,action:tl_endOfStream(t),name:"endOfStream",doneFn:s})},u.removeAudio=function(t,s,h){void 0===h&&(h=nc),this.audioBuffered().length&&0!==this.audioBuffered().end(0)?Sa({type:"audio",sourceUpdater:this,action:tl_remove(t,s),doneFn:h,name:"remove"}):h()},u.removeVideo=function(t,s,h){void 0===h&&(h=nc),this.videoBuffered().length&&0!==this.videoBuffered().end(0)?Sa({type:"video",sourceUpdater:this,action:tl_remove(t,s),doneFn:h,name:"remove"}):h()},u.updating=function(){return!(!av("audio",this)&&!av("video",this))},u.audioTimestampOffset=function(t){return typeof t<"u"&&this.audioBuffer&&this.audioTimestampOffset_!==t&&(Sa({type:"audio",sourceUpdater:this,action:tl_timestampOffset(t),name:"timestampOffset"}),this.audioTimestampOffset_=t),this.audioTimestampOffset_},u.videoTimestampOffset=function(t){return typeof t<"u"&&this.videoBuffer&&this.videoTimestampOffset!==t&&(Sa({type:"video",sourceUpdater:this,action:tl_timestampOffset(t),name:"timestampOffset"}),this.videoTimestampOffset_=t),this.videoTimestampOffset_},u.audioQueueCallback=function(t){this.audioBuffer&&Sa({type:"audio",sourceUpdater:this,action:tl_callback(t),name:"callback"})},u.videoQueueCallback=function(t){this.videoBuffer&&Sa({type:"video",sourceUpdater:this,action:tl_callback(t),name:"callback"})},u.dispose=function(){var t=this;this.trigger("dispose"),Up.forEach(function(s){t.abort(s),t.canRemoveSourceBuffer()?t.removeSourceBuffer(s):t[s+"QueueCallback"](function(){return Uf(s,t)})}),this.videoAppendQueued_=!1,this.delayedAudioAppendQueue_.length=0,this.sourceopenListener_&&this.mediaSource.removeEventListener("sourceopen",this.sourceopenListener_),this.off()},i}(At.EventTarget),Rd=function(i){return decodeURIComponent(escape(String.fromCharCode.apply(null,i)))},Nd=new Uint8Array("\n\n".split("").map(function(g){return g.charCodeAt(0)})),lv=function(g){function i(){return g.call(this,"Trying to parse received VTT cues, but there is no WebVTT. Make sure vtt.js is loaded.")||this}return Me(i,g),i}(Hs(Error)),Ld=function(g){function i(l,t){var s;return void 0===t&&(t={}),(s=g.call(this,l,t)||this).mediaSource_=null,s.subtitlesTrack_=null,s.loaderType_="subtitle",s.featuresNativeTextTracks_=l.featuresNativeTextTracks,s.loadVttJs=l.loadVttJs,s.shouldSaveSegmentTimingInfo_=!1,s}Me(i,g);var u=i.prototype;return u.createTransmuxer_=function(){return null},u.buffered_=function(){if(!this.subtitlesTrack_||!this.subtitlesTrack_.cues||!this.subtitlesTrack_.cues.length)return At.createTimeRanges();var t=this.subtitlesTrack_.cues;return At.createTimeRanges([[t[0].startTime,t[t.length-1].startTime]])},u.initSegmentForMap=function(t,s){if(void 0===s&&(s=!1),!t)return null;var h=Ip(t),v=this.initSegments_[h];if(s&&!v&&t.bytes){var D=new Uint8Array(Nd.byteLength+t.bytes.byteLength);D.set(t.bytes),D.set(Nd,t.bytes.byteLength),this.initSegments_[h]=v={resolvedUri:t.resolvedUri,byterange:t.byterange,bytes:D}}return v||t},u.couldBeginLoading_=function(){return this.playlist_&&this.subtitlesTrack_&&!this.paused()},u.init_=function(){return this.state="READY",this.resetEverything(),this.monitorBuffer_()},u.track=function(t){return typeof t>"u"||(this.subtitlesTrack_=t,"INIT"===this.state&&this.couldBeginLoading_()&&this.init_()),this.subtitlesTrack_},u.remove=function(t,s){kh(t,s,this.subtitlesTrack_)},u.fillBuffer_=function(){var t=this,s=this.chooseNextRequest_();if(s){if(null===this.syncController_.timestampOffsetForTimeline(s.timeline))return this.syncController_.one("timestampoffset",function(){t.state="READY",t.paused()||t.monitorBuffer_()}),void(this.state="WAITING_ON_TIMELINE");this.loadSegment_(s)}},u.timestampOffsetForSegment_=function(){return null},u.chooseNextRequest_=function(){return this.skipEmptySegments_(g.prototype.chooseNextRequest_.call(this))},u.skipEmptySegments_=function(t){for(;t&&t.segment.empty;){if(t.mediaIndex+1>=t.playlist.segments.length){t=null;break}t=this.generateSegmentInfo_({playlist:t.playlist,mediaIndex:t.mediaIndex+1,startOfSegment:t.startOfSegment+t.duration,isSyncRequest:t.isSyncRequest})}return t},u.stopForError=function(t){this.error(t),this.state="READY",this.pause(),this.trigger("error")},u.segmentRequestFinished_=function(t,s,h){var v=this;if(this.subtitlesTrack_){if(this.saveTransferStats_(s.stats),!this.pendingSegment_)return this.state="READY",void(this.mediaRequestsAborted+=1);if(t)return-101===t.code&&this.handleTimeout_(),-102===t.code?this.mediaRequestsAborted+=1:this.mediaRequestsErrored+=1,void this.stopForError(t);var S=this.pendingSegment_;this.saveBandwidthRelatedStats_(S.duration,s.stats),s.key&&this.segmentKey(s.key,!0),this.state="APPENDING",this.trigger("appending");var D=S.segment;if(D.map&&(D.map.bytes=s.map.bytes),S.bytes=s.bytes,"function"!=typeof ae().WebVTT&&"function"==typeof this.loadVttJs)return this.state="WAITING_ON_VTTJS",void this.loadVttJs().then(function(){return v.segmentRequestFinished_(t,s,h)},function(){return v.stopForError({message:"Error loading vtt.js"})});D.requested=!0;try{this.parseVTTCues_(S)}catch(F){return void this.stopForError({message:F.message})}if(this.updateTimeMapping_(S,this.syncController_.timelines[S.timeline],this.playlist_),S.timingInfo=S.cues.length?{start:S.cues[0].startTime,end:S.cues[S.cues.length-1].endTime}:{start:S.startOfSegment,end:S.startOfSegment+S.duration},S.isSyncRequest)return this.trigger("syncinfoupdate"),this.pendingSegment_=null,void(this.state="READY");S.byteLength=S.bytes.byteLength,this.mediaSecondsLoaded+=D.duration,S.cues.forEach(function(F){v.subtitlesTrack_.addCue(v.featuresNativeTextTracks_?new(ae().VTTCue)(F.startTime,F.endTime,F.text):F)}),function(i){var u=i.cues;if(u)for(var l=0;l<u.length;l++){for(var t=[],s=0,h=0;h<u.length;h++)u[l].startTime===u[h].startTime&&u[l].endTime===u[h].endTime&&u[l].text===u[h].text&&++s>1&&t.push(u[h]);t.length&&t.forEach(function(v){return i.removeCue(v)})}}(this.subtitlesTrack_),this.handleAppendsDone_()}else this.state="READY"},u.handleData_=function(){},u.updateTimingInfoEnd_=function(){},u.parseVTTCues_=function(t){var s,h=!1;if("function"!=typeof ae().WebVTT)throw new lv;"function"==typeof ae().TextDecoder?s=new(ae().TextDecoder)("utf8"):(s=ae().WebVTT.StringDecoder(),h=!0);var v=new(ae().WebVTT.Parser)(ae(),ae().vttjs,s);if(t.cues=[],t.timestampmap={MPEGTS:0,LOCAL:0},v.oncue=t.cues.push.bind(t.cues),v.ontimestampmap=function(F){t.timestampmap=F},v.onparsingerror=function(F){At.log.warn("Error encountered when parsing cues: "+F.message)},t.segment.map){var S=t.segment.map.bytes;h&&(S=Rd(S)),v.parse(S)}var D=t.bytes;h&&(D=Rd(D)),v.parse(D),v.flush()},u.updateTimeMapping_=function(t,s,h){var v=t.segment;if(s){if(!t.cues.length)return void(v.empty=!0);var S=t.timestampmap,D=S.MPEGTS/Ai.ONE_SECOND_IN_TS-S.LOCAL+s.mapping;t.cues.forEach(function(Y){Y.startTime+=D,Y.endTime+=D}),h.syncInfo||(h.syncInfo={mediaSequence:h.mediaSequence+t.mediaIndex,time:Math.min(t.cues[0].startTime,t.cues[t.cues.length-1].startTime-v.duration)})}},i}(ov),rd=function(i,u){for(var l=i.cues,t=0;t<l.length;t++){var s=l[t];if(u>=s.adStartTime&&u<=s.adEndTime)return s}return null},Fd=[{name:"VOD",run:function(i,u,l,t,s){return l!==1/0?{time:0,segmentIndex:0,partIndex:null}:null}},{name:"ProgramDateTime",run:function(i,u,l,t,s){if(!Object.keys(i.timelineToDatetimeMappings).length)return null;var h=null,v=null,S=Tl(u);s=s||0;for(var D=0;D<S.length;D++){var ee=S[u.endList||0===s?D:S.length-(D+1)],Y=ee.segment,me=i.timelineToDatetimeMappings[Y.timeline];if(me&&Y.dateTimeObject){var Be=Y.dateTimeObject.getTime()/1e3+me;if(Y.parts&&"number"==typeof ee.partIndex)for(var Ue=0;Ue<ee.partIndex;Ue++)Be+=Y.parts[Ue].duration;var Gt=Math.abs(s-Be);if(null!==v&&(0===Gt||v<Gt))break;v=Gt,h={time:Be,segmentIndex:ee.segmentIndex,partIndex:ee.partIndex}}}return h}},{name:"Segment",run:function(i,u,l,t,s){var h=null,v=null;s=s||0;for(var S=Tl(u),D=0;D<S.length;D++){var ee=S[u.endList||0===s?D:S.length-(D+1)],Y=ee.segment,me=ee.part&&ee.part.start||Y&&Y.start;if(Y.timeline===t&&typeof me<"u"){var Le=Math.abs(s-me);if(null!==v&&v<Le)break;(!h||null===v||v>=Le)&&(v=Le,h={time:me,segmentIndex:ee.segmentIndex,partIndex:ee.partIndex})}}return h}},{name:"Discontinuity",run:function(i,u,l,t,s){var h=null;if(s=s||0,u.discontinuityStarts&&u.discontinuityStarts.length)for(var v=null,S=0;S<u.discontinuityStarts.length;S++){var D=u.discontinuityStarts[S],ee=i.discontinuities[u.discontinuitySequence+S+1];if(ee){var Y=Math.abs(s-ee.time);if(null!==v&&v<Y)break;(!h||null===v||v>=Y)&&(v=Y,h={time:ee.time,segmentIndex:D,partIndex:null})}}return h}},{name:"Playlist",run:function(i,u,l,t,s){return u.syncInfo?{time:u.syncInfo.time,segmentIndex:u.syncInfo.mediaSequence-u.mediaSequence,partIndex:null}:null}}],cv=function(g){function i(l){var t;return(t=g.call(this)||this).timelines=[],t.discontinuities=[],t.timelineToDatetimeMappings={},t.logger_=Iu("SyncController"),t}Me(i,g);var u=i.prototype;return u.getSyncPoint=function(t,s,h,v){var S=this.runStrategies_(t,s,h,v);return S.length?this.selectSyncPoint_(S,{key:"time",value:v}):null},u.getExpiredTime=function(t,s){if(!t||!t.segments)return null;var h=this.runStrategies_(t,s,t.discontinuitySequence,0);if(!h.length)return null;var v=this.selectSyncPoint_(h,{key:"segmentIndex",value:0});return v.segmentIndex>0&&(v.time*=-1),Math.abs(v.time+yh({defaultDuration:t.targetDuration,durationList:t.segments,startIndex:v.segmentIndex,endIndex:0}))},u.runStrategies_=function(t,s,h,v){for(var S=[],D=0;D<Fd.length;D++){var F=Fd[D],ee=F.run(this,t,s,h,v);ee&&(ee.strategy=F.name,S.push({strategy:F.name,syncPoint:ee}))}return S},u.selectSyncPoint_=function(t,s){for(var h=t[0].syncPoint,v=Math.abs(t[0].syncPoint[s.key]-s.value),S=t[0].strategy,D=1;D<t.length;D++){var F=Math.abs(t[D].syncPoint[s.key]-s.value);F<v&&(v=F,h=t[D].syncPoint,S=t[D].strategy)}return this.logger_("syncPoint for ["+s.key+": "+s.value+"] chosen with strategy ["+S+"]: [time:"+h.time+", segmentIndex:"+h.segmentIndex+("number"==typeof h.partIndex?",partIndex:"+h.partIndex:"")+"]"),h},u.saveExpiredSegmentInfo=function(t,s){var h=s.mediaSequence-t.mediaSequence;if(h>86400)At.log.warn("Not saving expired segment info. Media sequence gap "+h+" is too large.");else for(var v=h-1;v>=0;v--){var S=t.segments[v];if(S&&typeof S.start<"u"){s.syncInfo={mediaSequence:t.mediaSequence+v,time:S.start},this.logger_("playlist refresh sync: [time:"+s.syncInfo.time+", mediaSequence: "+s.syncInfo.mediaSequence+"]"),this.trigger("syncinfoupdate");break}}},u.setDateTimeMappingForStart=function(t){if(this.timelineToDatetimeMappings={},t.segments&&t.segments.length&&t.segments[0].dateTimeObject){var s=t.segments[0],h=s.dateTimeObject.getTime()/1e3;this.timelineToDatetimeMappings[s.timeline]=-h}},u.saveSegmentTimingInfo=function(t){var s=t.segmentInfo,h=t.shouldSaveTimelineMapping,v=this.calculateSegmentTimeMapping_(s,s.timingInfo,h),S=s.segment;v&&(this.saveDiscontinuitySyncInfo_(s),s.playlist.syncInfo||(s.playlist.syncInfo={mediaSequence:s.playlist.mediaSequence+s.mediaIndex,time:S.start}));var D=S.dateTimeObject;S.discontinuity&&h&&D&&(this.timelineToDatetimeMappings[S.timeline]=-D.getTime()/1e3)},u.timestampOffsetForTimeline=function(t){return typeof this.timelines[t]>"u"?null:this.timelines[t].time},u.mappingForTimeline=function(t){return typeof this.timelines[t]>"u"?null:this.timelines[t].mapping},u.calculateSegmentTimeMapping_=function(t,s,h){var F,ee,v=t.segment,S=t.part,D=this.timelines[t.timeline];if("number"==typeof t.timestampOffset)D={time:t.startOfSegment,mapping:t.startOfSegment-s.start},h&&(this.timelines[t.timeline]=D,this.trigger("timestampoffset"),this.logger_("time mapping for timeline "+t.timeline+": [time: "+D.time+"] [mapping: "+D.mapping+"]")),F=t.startOfSegment,ee=s.end+D.mapping;else{if(!D)return!1;F=s.start+D.mapping,ee=s.end+D.mapping}return S&&(S.start=F,S.end=ee),(!v.start||F<v.start)&&(v.start=F),v.end=ee,!0},u.saveDiscontinuitySyncInfo_=function(t){var s=t.playlist,h=t.segment;if(h.discontinuity)this.discontinuities[h.timeline]={time:h.start,accuracy:0};else if(s.discontinuityStarts&&s.discontinuityStarts.length)for(var v=0;v<s.discontinuityStarts.length;v++){var S=s.discontinuityStarts[v],D=s.discontinuitySequence+v+1,F=S-t.mediaIndex,ee=Math.abs(F);if(!this.discontinuities[D]||this.discontinuities[D].accuracy>ee){var Y;Y=F<0?h.start-yh({defaultDuration:s.targetDuration,durationList:s.segments,startIndex:t.mediaIndex,endIndex:S}):h.end+yh({defaultDuration:s.targetDuration,durationList:s.segments,startIndex:t.mediaIndex+1,endIndex:S}),this.discontinuities[D]={time:Y,accuracy:ee}}}},u.dispose=function(){this.trigger("dispose"),this.off()},i}(At.EventTarget),Yg=function(g){function i(){var l;return(l=g.call(this)||this).pendingTimelineChanges_={},l.lastTimelineChanges_={},l}Me(i,g);var u=i.prototype;return u.clearPendingTimelineChange=function(t){this.pendingTimelineChanges_[t]=null,this.trigger("pendingtimelinechange")},u.pendingTimelineChange=function(t){var s=t.type,h=t.from,v=t.to;return"number"==typeof h&&"number"==typeof v&&(this.pendingTimelineChanges_[s]={type:s,from:h,to:v},this.trigger("pendingtimelinechange")),this.pendingTimelineChanges_[s]},u.lastTimelineChange=function(t){var s=t.type,h=t.from,v=t.to;return"number"==typeof h&&"number"==typeof v&&(this.lastTimelineChanges_[s]={type:s,from:h,to:v},delete this.pendingTimelineChanges_[s],this.trigger("timelinechange")),this.lastTimelineChanges_[s]},u.dispose=function(){this.trigger("dispose"),this.pendingTimelineChanges_={},this.lastTimelineChanges_={},this.off()},i}(At.EventTarget),Py=Mf(Of(function(){var g=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function i(Yt,en,In){return Yt(In={path:en,exports:{},require:function(tn,En){return function u(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}()}},In.exports),In.exports}var l=i(function(Yt){function en(nn,tn){for(var En=0;En<tn.length;En++){var cn=tn[En];cn.enumerable=cn.enumerable||!1,cn.configurable=!0,"value"in cn&&(cn.writable=!0),Object.defineProperty(nn,cn.key,cn)}}Yt.exports=function In(nn,tn,En){return tn&&en(nn.prototype,tn),En&&en(nn,En),nn},Yt.exports.default=Yt.exports,Yt.exports.__esModule=!0}),t=i(function(Yt){function en(In,nn){return Yt.exports=en=Object.setPrototypeOf||function(En,cn){return En.__proto__=cn,En},Yt.exports.default=Yt.exports,Yt.exports.__esModule=!0,en(In,nn)}Yt.exports=en,Yt.exports.default=Yt.exports,Yt.exports.__esModule=!0}),s=i(function(Yt){Yt.exports=function en(In,nn){In.prototype=Object.create(nn.prototype),In.prototype.constructor=In,t(In,nn)},Yt.exports.default=Yt.exports,Yt.exports.__esModule=!0}),h=function(){function Yt(){this.listeners={}}var en=Yt.prototype;return en.on=function(nn,tn){this.listeners[nn]||(this.listeners[nn]=[]),this.listeners[nn].push(tn)},en.off=function(nn,tn){if(!this.listeners[nn])return!1;var En=this.listeners[nn].indexOf(tn);return this.listeners[nn]=this.listeners[nn].slice(0),this.listeners[nn].splice(En,1),En>-1},en.trigger=function(nn){var tn=this.listeners[nn];if(tn)if(2===arguments.length)for(var En=tn.length,cn=0;cn<En;++cn)tn[cn].call(this,arguments[1]);else for(var wr=Array.prototype.slice.call(arguments,1),Gn=tn.length,ni=0;ni<Gn;++ni)tn[ni].apply(this,wr)},en.dispose=function(){this.listeners={}},en.pipe=function(nn){this.on("data",function(tn){nn.push(tn)})},Yt}(),S=function(){var cn,wr,Gn,po,Co,ms,Ua,ls,en=[[[],[],[],[],[]],[[],[],[],[],[]]],In=en[0],nn=en[1],tn=In[4],En=nn[4],ni=[],Qs=[];for(cn=0;cn<256;cn++)Qs[(ni[cn]=cn<<1^283*(cn>>7))^cn]=cn;for(wr=Gn=0;!tn[wr];wr^=po||1,Gn=Qs[Gn]||1)for(tn[wr]=ms=(ms=Gn^Gn<<1^Gn<<2^Gn<<3^Gn<<4)>>8^255&ms^99,En[ms]=wr,ls=16843009*ni[Co=ni[po=ni[wr]]]^65537*Co^257*po^16843008*wr,Ua=257*ni[ms]^16843008*ms,cn=0;cn<4;cn++)In[cn][wr]=Ua=Ua<<24^Ua>>>8,nn[cn][ms]=ls=ls<<24^ls>>>8;for(cn=0;cn<5;cn++)In[cn]=In[cn].slice(0),nn[cn]=nn[cn].slice(0);return en},D=null,F=function(){function Yt(In){D||(D=S()),this._tables=[[D[0][0].slice(),D[0][1].slice(),D[0][2].slice(),D[0][3].slice(),D[0][4].slice()],[D[1][0].slice(),D[1][1].slice(),D[1][2].slice(),D[1][3].slice(),D[1][4].slice()]];var nn,tn,En,cn=this._tables[0][4],wr=this._tables[1],Gn=In.length,ni=1;if(4!==Gn&&6!==Gn&&8!==Gn)throw new Error("Invalid aes key size");var Qs=In.slice(0),po=[];for(this._key=[Qs,po],nn=Gn;nn<4*Gn+28;nn++)En=Qs[nn-1],(nn%Gn==0||8===Gn&&nn%Gn==4)&&(En=cn[En>>>24]<<24^cn[En>>16&255]<<16^cn[En>>8&255]<<8^cn[255&En],nn%Gn==0&&(En=En<<8^En>>>24^ni<<24,ni=ni<<1^283*(ni>>7))),Qs[nn]=Qs[nn-Gn]^En;for(tn=0;nn;tn++,nn--)En=Qs[3&tn?nn:nn-4],po[tn]=nn<=4||tn<4?En:wr[0][cn[En>>>24]]^wr[1][cn[En>>16&255]]^wr[2][cn[En>>8&255]]^wr[3][cn[255&En]]}return Yt.prototype.decrypt=function(nn,tn,En,cn,wr,Gn){var ms,Ua,ls,xu,ni=this._key[1],Qs=nn^ni[0],po=cn^ni[1],Co=En^ni[2],ua=tn^ni[3],Jf=ni.length/4-2,jl=4,Dc=this._tables[1],zd=Dc[0],El=Dc[1],od=Dc[2],Wd=Dc[3],Sl=Dc[4];for(xu=0;xu<Jf;xu++)ms=zd[Qs>>>24]^El[po>>16&255]^od[Co>>8&255]^Wd[255&ua]^ni[jl],Ua=zd[po>>>24]^El[Co>>16&255]^od[ua>>8&255]^Wd[255&Qs]^ni[jl+1],ls=zd[Co>>>24]^El[ua>>16&255]^od[Qs>>8&255]^Wd[255&po]^ni[jl+2],ua=zd[ua>>>24]^El[Qs>>16&255]^od[po>>8&255]^Wd[255&Co]^ni[jl+3],jl+=4,Qs=ms,po=Ua,Co=ls;for(xu=0;xu<4;xu++)wr[(3&-xu)+Gn]=Sl[Qs>>>24]<<24^Sl[po>>16&255]<<16^Sl[Co>>8&255]<<8^Sl[255&ua]^ni[jl++],ms=Qs,Qs=po,po=Co,Co=ua,ua=ms},Yt}(),ee=function(Yt){function en(){var nn;return(nn=Yt.call(this,h)||this).jobs=[],nn.delay=1,nn.timeout_=null,nn}s(en,Yt);var In=en.prototype;return In.processJob_=function(){this.jobs.shift()(),this.timeout_=this.jobs.length?setTimeout(this.processJob_.bind(this),this.delay):null},In.push=function(tn){this.jobs.push(tn),this.timeout_||(this.timeout_=setTimeout(this.processJob_.bind(this),this.delay))},en}(h),Y=function(en){return en<<24|(65280&en)<<8|(16711680&en)>>8|en>>>24},Le=function(){function Yt(In,nn,tn,En){var cn=Yt.STEP,wr=new Int32Array(In.buffer),Gn=new Uint8Array(In.byteLength),ni=0;for(this.asyncStream_=new ee,this.asyncStream_.push(this.decryptChunk_(wr.subarray(ni,ni+cn),nn,tn,Gn)),ni=cn;ni<wr.length;ni+=cn)tn=new Uint32Array([Y(wr[ni-4]),Y(wr[ni-3]),Y(wr[ni-2]),Y(wr[ni-1])]),this.asyncStream_.push(this.decryptChunk_(wr.subarray(ni,ni+cn),nn,tn,Gn));this.asyncStream_.push(function(){En(null,function v(Yt){return Yt.subarray(0,Yt.byteLength-Yt[Yt.byteLength-1])}(Gn))})}return Yt.prototype.decryptChunk_=function(nn,tn,En,cn){return function(){var wr=function(en,In,nn){var Gn,ni,Qs,po,Co,ua,ms,Ua,ls,tn=new Int32Array(en.buffer,en.byteOffset,en.byteLength>>2),En=new F(Array.prototype.slice.call(In)),cn=new Uint8Array(en.byteLength),wr=new Int32Array(cn.buffer);for(Gn=nn[0],ni=nn[1],Qs=nn[2],po=nn[3],ls=0;ls<tn.length;ls+=4)Co=Y(tn[ls]),ua=Y(tn[ls+1]),ms=Y(tn[ls+2]),Ua=Y(tn[ls+3]),En.decrypt(Co,ua,ms,Ua,wr,ls),wr[ls]=Y(wr[ls]^Gn),wr[ls+1]=Y(wr[ls+1]^ni),wr[ls+2]=Y(wr[ls+2]^Qs),wr[ls+3]=Y(wr[ls+3]^po),Gn=Co,ni=ua,Qs=ms,po=Ua;return cn}(nn,tn,En);cn.set(wr,nn.byteOffset)}},l(Yt,null,[{key:"STEP",get:function(){return 32e3}}]),Yt}(),ln=(typeof window<"u"?window:typeof g<"u"?g:typeof self<"u"?self:{}).BigInt||Number;ln("0x1"),ln("0x100"),ln("0x10000"),ln("0x1000000"),ln("0x100000000"),ln("0x10000000000"),ln("0x1000000000000"),ln("0x100000000000000"),ln("0x10000000000000000");self.onmessage=function(Yt){var en=Yt.data,In=new Uint8Array(en.encrypted.bytes,en.encrypted.byteOffset,en.encrypted.byteLength),nn=new Uint32Array(en.key.bytes,en.key.byteOffset,en.key.byteLength/4),tn=new Uint32Array(en.iv.bytes,en.iv.byteOffset,en.iv.byteLength/4);new Le(In,nn,tn,function(En,cn){self.postMessage(function(en){var In={};return Object.keys(en).forEach(function(nn){var tn=en[nn];In[nn]=function(en){return"function"===ArrayBuffer.isView?ArrayBuffer.isView(en):en&&en.buffer instanceof ArrayBuffer}(tn)?{bytes:tn.buffer,byteOffset:tn.byteOffset,byteLength:tn.byteLength}:tn}),In}({source:en.source,decrypted:cn}),[cn.buffer])})}})),U_=Pp(Py),dv=function(i){var u=i.default?"main":"alternative";return i.characteristics&&i.characteristics.indexOf("public.accessibility.describes-video")>=0&&(u="main-desc"),u},wc=function(i,u){i.abort(),i.pause(),u&&u.activePlaylistLoader&&(u.activePlaylistLoader.pause(),u.activePlaylistLoader=null)},hv=function(i,u){u.activePlaylistLoader=i,i.load()},Vp={AUDIO:function(i,u){return function(){var t=u.mediaTypes[i],s=u.blacklistCurrentPlaylist;wc(u.segmentLoaders[i],t);var h=t.activeTrack(),v=t.activeGroup(),S=(v.filter(function(ee){return ee.default})[0]||v[0]).id,D=t.tracks[S];if(h!==D){for(var F in At.log.warn("Problem encountered loading the alternate audio track.Switching back to default."),t.tracks)t.tracks[F].enabled=t.tracks[F]===D;t.onTrackChanged()}else s({message:"Problem encountered loading the default audio track."})}},SUBTITLES:function(i,u){return function(){var l=u.segmentLoaders[i],t=u.mediaTypes[i];At.log.warn("Problem encountered loading the subtitle track.Disabling subtitle track."),wc(l,t);var s=t.activeTrack();s&&(s.mode="disabled"),t.onTrackChanged()}}},fv={AUDIO:function(i,u,l){if(u){var t=l.tech,s=l.requestOptions,h=l.segmentLoaders[i];u.on("loadedmetadata",function(){var v=u.media();h.playlist(v,s),(!t.paused()||v.endList&&"none"!==t.preload())&&h.load()}),u.on("loadedplaylist",function(){h.playlist(u.media(),s),t.paused()||h.load()}),u.on("error",Vp[i](i,l))}},SUBTITLES:function(i,u,l){var t=l.tech,s=l.requestOptions,h=l.segmentLoaders[i],v=l.mediaTypes[i];u.on("loadedmetadata",function(){var S=u.media();h.playlist(S,s),h.track(v.activeTrack()),(!t.paused()||S.endList&&"none"!==t.preload())&&h.load()}),u.on("loadedplaylist",function(){h.playlist(u.media(),s),t.paused()||h.load()}),u.on("error",Vp[i](i,l))}},Oy={AUDIO:function(i,u){var l=u.vhs,t=u.sourceType,s=u.segmentLoaders[i],h=u.requestOptions,v=u.master.mediaGroups,S=u.mediaTypes[i],D=S.groups,F=S.tracks,ee=S.logger_,Y=u.masterPlaylistLoader,me=Ep(Y.master);for(var Le in(!v[i]||0===Object.keys(v[i]).length)&&(v[i]={main:{default:{default:!0}}},me&&(v[i].main.default.playlists=Y.master.playlists)),v[i])for(var Be in D[Le]||(D[Le]=[]),v[i][Le]){var Ue=v[i][Le][Be],Gt=void 0;if(me?(ee("AUDIO group '"+Le+"' label '"+Be+"' is a master playlist"),Ue.isMasterPlaylist=!0,Gt=null):Gt="vhs-json"===t&&Ue.playlists?new Jc(Ue.playlists[0],l,h):Ue.resolvedUri?new Jc(Ue.resolvedUri,l,h):Ue.playlists&&"dash"===t?new Km(Ue.playlists[0],l,h,Y):null,Ue=At.mergeOptions({id:Be,playlistLoader:Gt},Ue),fv[i](i,Ue.playlistLoader,u),D[Le].push(Ue),typeof F[Be]>"u"){var ln=new At.AudioTrack({id:Be,kind:dv(Ue),enabled:!1,language:Ue.language,default:Ue.default,label:Be});F[Be]=ln}}s.on("error",Vp[i](i,u))},SUBTITLES:function(i,u){var l=u.tech,t=u.vhs,s=u.sourceType,h=u.segmentLoaders[i],v=u.requestOptions,S=u.master.mediaGroups,D=u.mediaTypes[i],F=D.groups,ee=D.tracks,Y=u.masterPlaylistLoader;for(var me in S[i])for(var Le in F[me]||(F[me]=[]),S[i][me])if(!S[i][me][Le].forced){var Be=S[i][me][Le],Ue=void 0;if("hls"===s)Ue=new Jc(Be.resolvedUri,t,v);else if("dash"===s){if(!Be.playlists.filter(function(On){return On.excludeUntil!==1/0}).length)return;Ue=new Km(Be.playlists[0],t,v,Y)}else"vhs-json"===s&&(Ue=new Jc(Be.playlists?Be.playlists[0]:Be.resolvedUri,t,v));if(Be=At.mergeOptions({id:Le,playlistLoader:Ue},Be),fv[i](i,Be.playlistLoader,u),F[me].push(Be),typeof ee[Le]>"u"){var ln=l.addRemoteTextTrack({id:Le,kind:"subtitles",default:Be.default&&Be.autoselect,language:Be.language,label:Le},!1).track;ee[Le]=ln}}h.on("error",Vp[i](i,u))},"CLOSED-CAPTIONS":function(i,u){var l=u.tech,t=u.master.mediaGroups,s=u.mediaTypes[i],h=s.groups,v=s.tracks;for(var S in t[i])for(var D in h[S]||(h[S]=[]),t[i][S]){var F=t[i][S][D];if(/^(?:CC|SERVICE)/.test(F.instreamId)){var ee=l.options_.vhs&&l.options_.vhs.captionServices||{},Y={label:D,language:F.language,instreamId:F.instreamId,default:F.default&&F.autoselect};if(ee[Y.instreamId]&&(Y=At.mergeOptions(Y,ee[Y.instreamId])),void 0===Y.default&&delete Y.default,h[S].push(At.mergeOptions({id:D},F)),typeof v[D]>"u"){var me=l.addRemoteTextTrack({id:Y.instreamId,kind:"captions",default:Y.default,language:Y.language,label:Y.label},!1).track;v[D]=me}}}}},H_=function g(i,u){for(var l=0;l<i.length;l++)if(Ag(u,i[l])||i[l].playlists&&g(i[l].playlists,u))return!0;return!1},ky={AUDIO:function(i,u){return function(){var l=u.mediaTypes[i].tracks;for(var t in l)if(l[t].enabled)return l[t];return null}},SUBTITLES:function(i,u){return function(){var l=u.mediaTypes[i].tracks;for(var t in l)if("showing"===l[t].mode||"hidden"===l[t].mode)return l[t];return null}}},Hp=function(){var i={};return["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach(function(u){i[u]={groups:{},tracks:{},activePlaylistLoader:null,activeGroup:nc,activeTrack:nc,getActiveGroup:nc,onGroupChanged:nc,onTrackChanged:nc,lastTrack_:null,logger_:Iu("MediaGroups["+u+"]")}}),i},vv=["mediaRequests","mediaRequestsAborted","mediaRequestsTimedout","mediaRequestsErrored","mediaTransferDuration","mediaBytesTransferred","mediaAppends"],$_=function(i){return this.audioSegmentLoader_[i]+this.mainSegmentLoader_[i]},Ry=function(g){function i(l){var t;t=g.call(this)||this;var s=l.src,h=l.handleManifestRedirects,v=l.withCredentials,S=l.tech,D=l.bandwidth,F=l.externVhs,ee=l.useCueTags,Y=l.blacklistDuration,me=l.enableLowInitialPlaylist,Le=l.sourceType,Be=l.cacheEncryptionKeys,Ue=l.experimentalBufferBasedABR,Gt=l.experimentalLeastPixelDiffSelector,ln=l.captionServices;if(!s)throw new Error("A non-empty playlist URL or JSON manifest string is required");var On=l.maxPlaylistRetries;(null===On||typeof On>"u")&&(On=1/0),id=F,t.experimentalBufferBasedABR=Boolean(Ue),t.experimentalLeastPixelDiffSelector=Boolean(Gt),t.withCredentials=v,t.tech_=S,t.vhs_=S.vhs,t.sourceType_=Le,t.useCueTags_=ee,t.blacklistDuration=Y,t.maxPlaylistRetries=On,t.enableLowInitialPlaylist=me,t.useCueTags_&&(t.cueTagsTrack_=t.tech_.addTextTrack("metadata","ad-cues"),t.cueTagsTrack_.inBandMetadataTrackDispatchType=""),t.requestOptions_={withCredentials:v,handleManifestRedirects:h,maxPlaylistRetries:On,timeout:null},t.on("error",t.pauseLoading),t.mediaTypes_=Hp(),t.mediaSource=new(ae().MediaSource),t.handleDurationChange_=t.handleDurationChange_.bind(dt(t)),t.handleSourceOpen_=t.handleSourceOpen_.bind(dt(t)),t.handleSourceEnded_=t.handleSourceEnded_.bind(dt(t)),t.mediaSource.addEventListener("durationchange",t.handleDurationChange_),t.mediaSource.addEventListener("sourceopen",t.handleSourceOpen_),t.mediaSource.addEventListener("sourceended",t.handleSourceEnded_),t.seekable_=At.createTimeRanges(),t.hasPlayed_=!1,t.syncController_=new cv(l),t.segmentMetadataTrack_=S.addRemoteTextTrack({kind:"metadata",label:"segment-metadata"},!1).track,t.decrypter_=new U_,t.sourceUpdater_=new Bp(t.mediaSource),t.inbandTextTracks_={},t.timelineChangeController_=new Yg;var Yt={vhs:t.vhs_,parse708captions:l.parse708captions,useDtsForTimestampOffset:l.useDtsForTimestampOffset,captionServices:ln,mediaSource:t.mediaSource,currentTime:t.tech_.currentTime.bind(t.tech_),seekable:function(){return t.seekable()},seeking:function(){return t.tech_.seeking()},duration:function(){return t.duration()},hasPlayed:function(){return t.hasPlayed_},goalBufferLength:function(){return t.goalBufferLength()},bandwidth:D,syncController:t.syncController_,decrypter:t.decrypter_,sourceType:t.sourceType_,inbandTextTracks:t.inbandTextTracks_,cacheEncryptionKeys:Be,sourceUpdater:t.sourceUpdater_,timelineChangeController:t.timelineChangeController_,experimentalExactManifestTimings:l.experimentalExactManifestTimings};t.masterPlaylistLoader_="dash"===t.sourceType_?new Km(s,t.vhs_,t.requestOptions_):new Jc(s,t.vhs_,t.requestOptions_),t.setupMasterPlaylistLoaderListeners_(),t.mainSegmentLoader_=new ov(At.mergeOptions(Yt,{segmentMetadataTrack:t.segmentMetadataTrack_,loaderType:"main"}),l),t.audioSegmentLoader_=new ov(At.mergeOptions(Yt,{loaderType:"audio"}),l),t.subtitleSegmentLoader_=new Ld(At.mergeOptions(Yt,{loaderType:"vtt",featuresNativeTextTracks:t.tech_.featuresNativeTextTracks,loadVttJs:function(){return new Promise(function(nn,tn){function En(){S.off("vttjserror",cn),nn()}function cn(){S.off("vttjsloaded",En),tn()}S.one("vttjsloaded",En),S.one("vttjserror",cn),S.addWebVttScript_()})}}),l),t.setupSegmentLoaderListeners_(),t.experimentalBufferBasedABR&&(t.masterPlaylistLoader_.one("loadedplaylist",function(){return t.startABRTimer_()}),t.tech_.on("pause",function(){return t.stopABRTimer_()}),t.tech_.on("play",function(){return t.startABRTimer_()})),vv.forEach(function(In){t[In+"_"]=$_.bind(dt(t),In)}),t.logger_=Iu("MPC"),t.triggeredFmp4Usage=!1,"none"===t.tech_.preload()?(t.loadOnPlay_=function(){t.loadOnPlay_=null,t.masterPlaylistLoader_.load()},t.tech_.one("play",t.loadOnPlay_)):t.masterPlaylistLoader_.load(),t.timeToLoadedData__=-1,t.mainAppendsToLoadedData__=-1,t.audioAppendsToLoadedData__=-1;var en="none"===t.tech_.preload()?"play":"loadstart";return t.tech_.one(en,function(){var In=Date.now();t.tech_.one("loadeddata",function(){t.timeToLoadedData__=Date.now()-In,t.mainAppendsToLoadedData__=t.mainSegmentLoader_.mediaAppends,t.audioAppendsToLoadedData__=t.audioSegmentLoader_.mediaAppends})}),t}Me(i,g);var u=i.prototype;return u.mainAppendsToLoadedData_=function(){return this.mainAppendsToLoadedData__},u.audioAppendsToLoadedData_=function(){return this.audioAppendsToLoadedData__},u.appendsToLoadedData_=function(){var t=this.mainAppendsToLoadedData_(),s=this.audioAppendsToLoadedData_();return-1===t||-1===s?-1:t+s},u.timeToLoadedData_=function(){return this.timeToLoadedData__},u.checkABR_=function(t){void 0===t&&(t="abr");var s=this.selectPlaylist();s&&this.shouldSwitchToMedia_(s)&&this.switchMedia_(s,t)},u.switchMedia_=function(t,s,h){var v=this.media(),S=v&&(v.id||v.uri),D=t.id||t.uri;S&&S!==D&&(this.logger_("switch media "+S+" -> "+D+" from "+s),this.tech_.trigger({type:"usage",name:"vhs-rendition-change-"+s})),this.masterPlaylistLoader_.media(t,h)},u.startABRTimer_=function(){var t=this;this.stopABRTimer_(),this.abrTimer_=ae().setInterval(function(){return t.checkABR_()},250)},u.stopABRTimer_=function(){this.tech_.scrubbing&&this.tech_.scrubbing()||(ae().clearInterval(this.abrTimer_),this.abrTimer_=null)},u.getAudioTrackPlaylists_=function(){var t=this.master(),s=t&&t.playlists||[];if(!t||!t.mediaGroups||!t.mediaGroups.AUDIO)return s;var S,h=t.mediaGroups.AUDIO,v=Object.keys(h);if(Object.keys(this.mediaTypes_.AUDIO.groups).length)S=this.mediaTypes_.AUDIO.activeTrack();else{var D=h.main||v.length&&h[v[0]];for(var F in D)if(D[F].default){S={label:F};break}}if(!S)return s;var ee=[];for(var Y in h)if(h[Y][S.label]){var me=h[Y][S.label];if(me.playlists&&me.playlists.length)ee.push.apply(ee,me.playlists);else if(me.uri)ee.push(me);else if(t.playlists.length)for(var Le=0;Le<t.playlists.length;Le++){var Be=t.playlists[Le];Be.attributes&&Be.attributes.AUDIO&&Be.attributes.AUDIO===Y&&ee.push(Be)}}return ee.length?ee:s},u.setupMasterPlaylistLoaderListeners_=function(){var t=this;this.masterPlaylistLoader_.on("loadedmetadata",function(){var s=t.masterPlaylistLoader_.media(),h=1.5*s.targetDuration*1e3;t.requestOptions_.timeout=Yl(t.masterPlaylistLoader_.master,t.masterPlaylistLoader_.media())?0:h,s.endList&&"none"!==t.tech_.preload()&&(t.mainSegmentLoader_.playlist(s,t.requestOptions_),t.mainSegmentLoader_.load()),function(i){["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach(function(Le){Oy[Le](Le,i)});var u=i.mediaTypes,l=i.masterPlaylistLoader,t=i.tech,s=i.vhs,h=i.segmentLoaders,v=h.AUDIO,S=h.main;["AUDIO","SUBTITLES"].forEach(function(Le){u[Le].activeGroup=function(i,u){return function(l){var s=u.mediaTypes[i].groups,h=u.masterPlaylistLoader.media();if(!h)return null;var v=null;h.attributes[i]&&(v=s[h.attributes[i]]);var S=Object.keys(s);if(!v)if("AUDIO"===i&&S.length>1&&Ep(u.master))for(var D=0;D<S.length;D++){var F=s[S[D]];if(H_(F,h)){v=F;break}}else s.main?v=s.main:1===S.length&&(v=s[S[0]]);return typeof l>"u"?v:null!==l&&v&&v.filter(function(ee){return ee.id===l.id})[0]||null}}(Le,i),u[Le].activeTrack=ky[Le](Le,i),u[Le].onGroupChanged=function(i,u){return function(){var l=u.segmentLoaders,t=l[i],s=l.main,h=u.mediaTypes[i],v=h.activeTrack(),S=h.getActiveGroup(),D=h.activePlaylistLoader,F=h.lastGroup_;if((!S||!F||S.id!==F.id)&&(h.lastGroup_=S,h.lastTrack_=v,wc(t,h),S&&!S.isMasterPlaylist)){if(!S.playlistLoader)return void(D&&s.resetEverything());t.resyncLoader(),hv(S.playlistLoader,h)}}}(Le,i),u[Le].onGroupChanging=function(i,u){return function(){var l=u.segmentLoaders[i];u.mediaTypes[i].lastGroup_=null,l.abort(),l.pause()}}(Le,i),u[Le].onTrackChanged=function(i,u){return function(){var l=u.masterPlaylistLoader,t=u.segmentLoaders,s=t[i],h=t.main,v=u.mediaTypes[i],S=v.activeTrack(),D=v.getActiveGroup(),F=v.activePlaylistLoader,ee=v.lastTrack_;if((!ee||!S||ee.id!==S.id)&&(v.lastGroup_=D,v.lastTrack_=S,wc(s,v),D)){if(D.isMasterPlaylist){if(!S||!ee||S.id===ee.id)return;var Y=u.vhs.masterPlaylistController_,me=Y.selectPlaylist();if(Y.media()===me)return;return v.logger_("track change. Switching master audio from "+ee.id+" to "+S.id),l.pause(),h.resetEverything(),void Y.fastQualityChange_(me)}if("AUDIO"===i){if(!D.playlistLoader)return h.setAudio(!0),void h.resetEverything();s.setAudio(!0),h.setAudio(!1)}if(F===D.playlistLoader)return void hv(D.playlistLoader,v);s.track&&s.track(S),s.resetEverything(),hv(D.playlistLoader,v)}}}(Le,i),u[Le].getActiveGroup=function(i,u){var l=u.mediaTypes;return function(){var t=l[i].activeTrack();return t?l[i].activeGroup(t):null}}(Le,i)});var D=u.AUDIO.activeGroup();if(D){var F=(D.filter(function(Le){return Le.default})[0]||D[0]).id;u.AUDIO.tracks[F].enabled=!0,u.AUDIO.onGroupChanged(),u.AUDIO.onTrackChanged(),u.AUDIO.getActiveGroup().playlistLoader?(S.setAudio(!1),v.setAudio(!0)):S.setAudio(!0)}l.on("mediachange",function(){["AUDIO","SUBTITLES"].forEach(function(Le){return u[Le].onGroupChanged()})}),l.on("mediachanging",function(){["AUDIO","SUBTITLES"].forEach(function(Le){return u[Le].onGroupChanging()})});var Y=function(){u.AUDIO.onTrackChanged(),t.trigger({type:"usage",name:"vhs-audio-change"}),t.trigger({type:"usage",name:"hls-audio-change"})};for(var me in t.audioTracks().addEventListener("change",Y),t.remoteTextTracks().addEventListener("change",u.SUBTITLES.onTrackChanged),s.on("dispose",function(){t.audioTracks().removeEventListener("change",Y),t.remoteTextTracks().removeEventListener("change",u.SUBTITLES.onTrackChanged)}),t.clearTracks("audio"),u.AUDIO.tracks)t.audioTracks().addTrack(u.AUDIO.tracks[me])}({sourceType:t.sourceType_,segmentLoaders:{AUDIO:t.audioSegmentLoader_,SUBTITLES:t.subtitleSegmentLoader_,main:t.mainSegmentLoader_},tech:t.tech_,requestOptions:t.requestOptions_,masterPlaylistLoader:t.masterPlaylistLoader_,vhs:t.vhs_,master:t.master(),mediaTypes:t.mediaTypes_,blacklistCurrentPlaylist:t.blacklistCurrentPlaylist.bind(t)}),t.triggerPresenceUsage_(t.master(),s),t.setupFirstPlay(),!t.mediaTypes_.AUDIO.activePlaylistLoader||t.mediaTypes_.AUDIO.activePlaylistLoader.media()?t.trigger("selectedinitialmedia"):t.mediaTypes_.AUDIO.activePlaylistLoader.one("loadedmetadata",function(){t.trigger("selectedinitialmedia")})}),this.masterPlaylistLoader_.on("loadedplaylist",function(){t.loadOnPlay_&&t.tech_.off("play",t.loadOnPlay_);var s=t.masterPlaylistLoader_.media();if(!s){var h;if(t.excludeUnsupportedVariants_(),t.enableLowInitialPlaylist&&(h=t.selectInitialPlaylist()),h||(h=t.selectPlaylist()),!h||!t.shouldSwitchToMedia_(h))return;if(t.initialMedia_=h,t.switchMedia_(t.initialMedia_,"initial"),"vhs-json"!==t.sourceType_||!t.initialMedia_.segments)return;s=t.initialMedia_}t.handleUpdatedMediaPlaylist(s)}),this.masterPlaylistLoader_.on("error",function(){t.blacklistCurrentPlaylist(t.masterPlaylistLoader_.error)}),this.masterPlaylistLoader_.on("mediachanging",function(){t.mainSegmentLoader_.abort(),t.mainSegmentLoader_.pause()}),this.masterPlaylistLoader_.on("mediachange",function(){var s=t.masterPlaylistLoader_.media(),h=1.5*s.targetDuration*1e3;t.requestOptions_.timeout=Yl(t.masterPlaylistLoader_.master,t.masterPlaylistLoader_.media())?0:h,t.masterPlaylistLoader_.load(),t.mainSegmentLoader_.playlist(s,t.requestOptions_),t.mainSegmentLoader_.load(),t.tech_.trigger({type:"mediachange",bubbles:!0})}),this.masterPlaylistLoader_.on("playlistunchanged",function(){var s=t.masterPlaylistLoader_.media();"playlist-unchanged"!==s.lastExcludeReason_&&t.stuckAtPlaylistEnd_(s)&&(t.blacklistCurrentPlaylist({message:"Playlist no longer updating.",reason:"playlist-unchanged"}),t.tech_.trigger("playliststuck"))}),this.masterPlaylistLoader_.on("renditiondisabled",function(){t.tech_.trigger({type:"usage",name:"vhs-rendition-disabled"}),t.tech_.trigger({type:"usage",name:"hls-rendition-disabled"})}),this.masterPlaylistLoader_.on("renditionenabled",function(){t.tech_.trigger({type:"usage",name:"vhs-rendition-enabled"}),t.tech_.trigger({type:"usage",name:"hls-rendition-enabled"})})},u.handleUpdatedMediaPlaylist=function(t){this.useCueTags_&&this.updateAdCues_(t),this.mainSegmentLoader_.playlist(t,this.requestOptions_),this.updateDuration(!t.endList),this.tech_.paused()||(this.mainSegmentLoader_.load(),this.audioSegmentLoader_&&this.audioSegmentLoader_.load())},u.triggerPresenceUsage_=function(t,s){var h=t.mediaGroups||{},v=!0,S=Object.keys(h.AUDIO);for(var D in h.AUDIO)for(var F in h.AUDIO[D])h.AUDIO[D][F].uri||(v=!1);v&&(this.tech_.trigger({type:"usage",name:"vhs-demuxed"}),this.tech_.trigger({type:"usage",name:"hls-demuxed"})),Object.keys(h.SUBTITLES).length&&(this.tech_.trigger({type:"usage",name:"vhs-webvtt"}),this.tech_.trigger({type:"usage",name:"hls-webvtt"})),id.Playlist.isAes(s)&&(this.tech_.trigger({type:"usage",name:"vhs-aes"}),this.tech_.trigger({type:"usage",name:"hls-aes"})),S.length&&Object.keys(h.AUDIO[S[0]]).length>1&&(this.tech_.trigger({type:"usage",name:"vhs-alternate-audio"}),this.tech_.trigger({type:"usage",name:"hls-alternate-audio"})),this.useCueTags_&&(this.tech_.trigger({type:"usage",name:"vhs-playlist-cue-tags"}),this.tech_.trigger({type:"usage",name:"hls-playlist-cue-tags"}))},u.shouldSwitchToMedia_=function(t){var s=this.masterPlaylistLoader_.media()||this.masterPlaylistLoader_.pendingMedia_,h=this.tech_.currentTime(),v=this.bufferLowWaterLine(),S=this.bufferHighWaterLine();return function(i){var u=i.currentPlaylist,l=i.buffered,t=i.currentTime,s=i.nextPlaylist,h=i.bufferLowWaterLine,v=i.bufferHighWaterLine,S=i.duration,D=i.experimentalBufferBasedABR,F=i.log;if(!s)return At.log.warn("We received no playlist to switch to. Please check your stream."),!1;var ee="allowing switch "+(u&&u.id||"null")+" -> "+s.id;if(!u)return F(ee+" as current playlist is not set"),!0;if(s.id===u.id)return!1;var Y=Boolean(Lo(l,t).length);if(!u.endList)return Y||"number"!=typeof u.partTargetDuration?(F(ee+" as current playlist is live"),!0):(F("not "+ee+" as current playlist is live llhls, but currentTime isn't in buffered."),!1);var me=Zl(l,t),Le=D?tu.EXPERIMENTAL_MAX_BUFFER_LOW_WATER_LINE:tu.MAX_BUFFER_LOW_WATER_LINE;if(S<Le)return F(ee+" as duration < max low water line ("+S+" < "+Le+")"),!0;var Be=s.attributes.BANDWIDTH,Ue=u.attributes.BANDWIDTH;if(Be<Ue&&(!D||me<v)){var Gt=ee+" as next bandwidth < current bandwidth ("+Be+" < "+Ue+")";return D&&(Gt+=" and forwardBuffer < bufferHighWaterLine ("+me+" < "+v+")"),F(Gt),!0}if((!D||Be>Ue)&&me>=h){var ln=ee+" as forwardBuffer >= bufferLowWaterLine ("+me+" >= "+h+")";return D&&(ln+=" and next bandwidth > current bandwidth ("+Be+" > "+Ue+")"),F(ln),!0}return F("not "+ee+" as no switching criteria met"),!1}({buffered:this.tech_.buffered(),currentTime:h,currentPlaylist:s,nextPlaylist:t,bufferLowWaterLine:v,bufferHighWaterLine:S,duration:this.duration(),experimentalBufferBasedABR:this.experimentalBufferBasedABR,log:this.logger_})},u.setupSegmentLoaderListeners_=function(){var t=this;this.mainSegmentLoader_.on("bandwidthupdate",function(){t.checkABR_("bandwidthupdate"),t.tech_.trigger("bandwidthupdate")}),this.mainSegmentLoader_.on("timeout",function(){t.experimentalBufferBasedABR&&t.mainSegmentLoader_.load()}),this.experimentalBufferBasedABR||this.mainSegmentLoader_.on("progress",function(){t.trigger("progress")}),this.mainSegmentLoader_.on("error",function(){t.blacklistCurrentPlaylist(t.mainSegmentLoader_.error())}),this.mainSegmentLoader_.on("appenderror",function(){t.error=t.mainSegmentLoader_.error_,t.trigger("error")}),this.mainSegmentLoader_.on("syncinfoupdate",function(){t.onSyncInfoUpdate_()}),this.mainSegmentLoader_.on("timestampoffset",function(){t.tech_.trigger({type:"usage",name:"vhs-timestamp-offset"}),t.tech_.trigger({type:"usage",name:"hls-timestamp-offset"})}),this.audioSegmentLoader_.on("syncinfoupdate",function(){t.onSyncInfoUpdate_()}),this.audioSegmentLoader_.on("appenderror",function(){t.error=t.audioSegmentLoader_.error_,t.trigger("error")}),this.mainSegmentLoader_.on("ended",function(){t.logger_("main segment loader ended"),t.onEndOfStream()}),this.mainSegmentLoader_.on("earlyabort",function(h){t.experimentalBufferBasedABR||(t.delegateLoaders_("all",["abort"]),t.blacklistCurrentPlaylist({message:"Aborted early because there isn't enough bandwidth to complete the request without rebuffering."},120))});var s=function(){if(!t.sourceUpdater_.hasCreatedSourceBuffers())return t.tryToCreateSourceBuffers_();var v=t.getCodecsOrExclude_();v&&t.sourceUpdater_.addOrChangeSourceBuffers(v)};this.mainSegmentLoader_.on("trackinfo",s),this.audioSegmentLoader_.on("trackinfo",s),this.mainSegmentLoader_.on("fmp4",function(){t.triggeredFmp4Usage||(t.tech_.trigger({type:"usage",name:"vhs-fmp4"}),t.tech_.trigger({type:"usage",name:"hls-fmp4"}),t.triggeredFmp4Usage=!0)}),this.audioSegmentLoader_.on("fmp4",function(){t.triggeredFmp4Usage||(t.tech_.trigger({type:"usage",name:"vhs-fmp4"}),t.tech_.trigger({type:"usage",name:"hls-fmp4"}),t.triggeredFmp4Usage=!0)}),this.audioSegmentLoader_.on("ended",function(){t.logger_("audioSegmentLoader ended"),t.onEndOfStream()})},u.mediaSecondsLoaded_=function(){return Math.max(this.audioSegmentLoader_.mediaSecondsLoaded+this.mainSegmentLoader_.mediaSecondsLoaded)},u.load=function(){this.mainSegmentLoader_.load(),this.mediaTypes_.AUDIO.activePlaylistLoader&&this.audioSegmentLoader_.load(),this.mediaTypes_.SUBTITLES.activePlaylistLoader&&this.subtitleSegmentLoader_.load()},u.smoothQualityChange_=function(t){void 0===t&&(t=this.selectPlaylist()),this.fastQualityChange_(t)},u.fastQualityChange_=function(t){var s=this;void 0===t&&(t=this.selectPlaylist()),t!==this.masterPlaylistLoader_.media()?(this.switchMedia_(t,"fast-quality"),this.mainSegmentLoader_.resetEverything(function(){s.tech_.setCurrentTime(At.browser.IE_VERSION||At.browser.IS_EDGE?s.tech_.currentTime()+.04:s.tech_.currentTime())})):this.logger_("skipping fastQualityChange because new media is same as old")},u.play=function(){if(!this.setupFirstPlay()){this.tech_.ended()&&this.tech_.setCurrentTime(0),this.hasPlayed_&&this.load();var t=this.tech_.seekable();if(this.tech_.duration()===1/0&&this.tech_.currentTime()<t.start(0))return this.tech_.setCurrentTime(t.end(t.length-1))}},u.setupFirstPlay=function(){var t=this,s=this.masterPlaylistLoader_.media();if(!s||this.tech_.paused()||this.hasPlayed_)return!1;if(!s.endList){var h=this.seekable();if(!h.length)return!1;if(At.browser.IE_VERSION&&0===this.tech_.readyState())return this.tech_.one("loadedmetadata",function(){t.trigger("firstplay"),t.tech_.setCurrentTime(h.end(0)),t.hasPlayed_=!0}),!1;this.trigger("firstplay"),this.tech_.setCurrentTime(h.end(0))}return this.hasPlayed_=!0,this.load(),!0},u.handleSourceOpen_=function(){if(this.tryToCreateSourceBuffers_(),this.tech_.autoplay()){var t=this.tech_.play();typeof t<"u"&&"function"==typeof t.then&&t.then(null,function(s){})}this.trigger("sourceopen")},u.handleSourceEnded_=function(){if(this.inbandTextTracks_.metadataTrack_){var t=this.inbandTextTracks_.metadataTrack_.cues;if(t&&t.length){var s=this.duration();t[t.length-1].endTime=isNaN(s)||Math.abs(s)===1/0?Number.MAX_VALUE:s}}},u.handleDurationChange_=function(){this.tech_.trigger("durationchange")},u.onEndOfStream=function(){var t=this.mainSegmentLoader_.ended_;if(this.mediaTypes_.AUDIO.activePlaylistLoader){var s=this.mainSegmentLoader_.getCurrentMediaInfo_();t=!s||s.hasVideo?t&&this.audioSegmentLoader_.ended_:this.audioSegmentLoader_.ended_}t&&(this.stopABRTimer_(),this.sourceUpdater_.endOfStream())},u.stuckAtPlaylistEnd_=function(t){if(!this.seekable().length)return!1;var h=this.syncController_.getExpiredTime(t,this.duration());if(null===h)return!1;var v=id.Playlist.playlistEnd(t,h),S=this.tech_.currentTime(),D=this.tech_.buffered();if(!D.length)return v-S<=Kl;var F=D.end(D.length-1);return F-S<=Kl&&v-F<=Kl},u.blacklistCurrentPlaylist=function(t,s){void 0===t&&(t={});var h=t.playlist||this.masterPlaylistLoader_.media();if(s=s||t.blacklistDuration||this.blacklistDuration,!h)return this.error=t,void("open"!==this.mediaSource.readyState?this.trigger("error"):this.sourceUpdater_.endOfStream("network"));h.playlistErrors_++;var ee,v=this.masterPlaylistLoader_.master.playlists,S=v.filter(Dg),D=1===S.length&&S[0]===h;if(1===v.length&&s!==1/0)return At.log.warn("Problem encountered with playlist "+h.id+". Trying again since it is the only playlist."),this.tech_.trigger("retryplaylist"),this.masterPlaylistLoader_.load(D);if(D){var F=!1;v.forEach(function(Gt){if(Gt!==h){var ln=Gt.excludeUntil;typeof ln<"u"&&ln!==1/0&&(F=!0,delete Gt.excludeUntil)}}),F&&(At.log.warn("Removing other playlists from the exclusion list because the last rendition is about to be excluded."),this.tech_.trigger("retryplaylist"))}ee=h.playlistErrors_>this.maxPlaylistRetries?1/0:Date.now()+1e3*s,h.excludeUntil=ee,t.reason&&(h.lastExcludeReason_=t.reason),this.tech_.trigger("blacklistplaylist"),this.tech_.trigger({type:"usage",name:"vhs-rendition-blacklisted"}),this.tech_.trigger({type:"usage",name:"hls-rendition-blacklisted"});var Y=this.selectPlaylist();if(!Y)return this.error="Playback cannot continue. No available working or supported playlists.",void this.trigger("error");(t.internal?this.logger_:At.log.warn)((t.internal?"Internal problem":"Problem")+" encountered with playlist "+h.id+"."+(t.message?" "+t.message:"")+" Switching to playlist "+Y.id+"."),Y.attributes.AUDIO!==h.attributes.AUDIO&&this.delegateLoaders_("audio",["abort","pause"]),Y.attributes.SUBTITLES!==h.attributes.SUBTITLES&&this.delegateLoaders_("subtitle",["abort","pause"]),this.delegateLoaders_("main",["abort","pause"]);var Be=Y.targetDuration/2*1e3||5e3,Ue="number"==typeof Y.lastRequest&&Date.now()-Y.lastRequest<=Be;return this.switchMedia_(Y,"exclude",D||Ue)},u.pauseLoading=function(){this.delegateLoaders_("all",["abort","pause"]),this.stopABRTimer_()},u.delegateLoaders_=function(t,s){var h=this,v=[],S="all"===t;(S||"main"===t)&&v.push(this.masterPlaylistLoader_);var D=[];(S||"audio"===t)&&D.push("AUDIO"),(S||"subtitle"===t)&&(D.push("CLOSED-CAPTIONS"),D.push("SUBTITLES")),D.forEach(function(F){var ee=h.mediaTypes_[F]&&h.mediaTypes_[F].activePlaylistLoader;ee&&v.push(ee)}),["main","audio","subtitle"].forEach(function(F){var ee=h[F+"SegmentLoader_"];ee&&(t===F||"all"===t)&&v.push(ee)}),v.forEach(function(F){return s.forEach(function(ee){"function"==typeof F[ee]&&F[ee]()})})},u.setCurrentTime=function(t){var s=Lo(this.tech_.buffered(),t);return this.masterPlaylistLoader_&&this.masterPlaylistLoader_.media()&&this.masterPlaylistLoader_.media().segments?s&&s.length?t:(this.mainSegmentLoader_.resetEverything(),this.mainSegmentLoader_.abort(),this.mediaTypes_.AUDIO.activePlaylistLoader&&(this.audioSegmentLoader_.resetEverything(),this.audioSegmentLoader_.abort()),this.mediaTypes_.SUBTITLES.activePlaylistLoader&&(this.subtitleSegmentLoader_.resetEverything(),this.subtitleSegmentLoader_.abort()),void this.load()):0},u.duration=function(){if(!this.masterPlaylistLoader_)return 0;var t=this.masterPlaylistLoader_.media();return t?t.endList?this.mediaSource?this.mediaSource.duration:id.Playlist.duration(t):1/0:0},u.seekable=function(){return this.seekable_},u.onSyncInfoUpdate_=function(){var t;if(this.masterPlaylistLoader_){var s=this.masterPlaylistLoader_.media();if(s){var h=this.syncController_.getExpiredTime(s,this.duration());if(null!==h){var D,F,v=this.masterPlaylistLoader_.master,S=id.Playlist.seekable(s,h,id.Playlist.liveEdgeDelay(v,s));0===S.length||this.mediaTypes_.AUDIO.activePlaylistLoader&&(s=this.mediaTypes_.AUDIO.activePlaylistLoader.media(),null===(h=this.syncController_.getExpiredTime(s,this.duration()))||0===(t=id.Playlist.seekable(s,h,id.Playlist.liveEdgeDelay(v,s))).length)||(this.seekable_&&this.seekable_.length&&(D=this.seekable_.end(0),F=this.seekable_.start(0)),this.seekable_=t?t.start(0)>S.end(0)||S.start(0)>t.end(0)?S:At.createTimeRanges([[t.start(0)>S.start(0)?t.start(0):S.start(0),t.end(0)<S.end(0)?t.end(0):S.end(0)]]):S,(!this.seekable_||!this.seekable_.length||this.seekable_.end(0)!==D||this.seekable_.start(0)!==F)&&(this.logger_("seekable updated ["+Tc(this.seekable_)+"]"),this.tech_.trigger("seekablechanged")))}}}},u.updateDuration=function(t){if(this.updateDuration_&&(this.mediaSource.removeEventListener("sourceopen",this.updateDuration_),this.updateDuration_=null),"open"!==this.mediaSource.readyState)return this.updateDuration_=this.updateDuration.bind(this,t),void this.mediaSource.addEventListener("sourceopen",this.updateDuration_);if(t){var s=this.seekable();if(!s.length)return;(isNaN(this.mediaSource.duration)||this.mediaSource.duration<s.end(s.length-1))&&this.sourceUpdater_.setDuration(s.end(s.length-1))}else{var h=this.tech_.buffered(),v=id.Playlist.duration(this.masterPlaylistLoader_.media());h.length>0&&(v=Math.max(v,h.end(h.length-1))),this.mediaSource.duration!==v&&this.sourceUpdater_.setDuration(v)}},u.dispose=function(){var t=this;this.trigger("dispose"),this.decrypter_.terminate(),this.masterPlaylistLoader_.dispose(),this.mainSegmentLoader_.dispose(),this.loadOnPlay_&&this.tech_.off("play",this.loadOnPlay_),["AUDIO","SUBTITLES"].forEach(function(s){var h=t.mediaTypes_[s].groups;for(var v in h)h[v].forEach(function(S){S.playlistLoader&&S.playlistLoader.dispose()})}),this.audioSegmentLoader_.dispose(),this.subtitleSegmentLoader_.dispose(),this.sourceUpdater_.dispose(),this.timelineChangeController_.dispose(),this.stopABRTimer_(),this.updateDuration_&&this.mediaSource.removeEventListener("sourceopen",this.updateDuration_),this.mediaSource.removeEventListener("durationchange",this.handleDurationChange_),this.mediaSource.removeEventListener("sourceopen",this.handleSourceOpen_),this.mediaSource.removeEventListener("sourceended",this.handleSourceEnded_),this.off()},u.master=function(){return this.masterPlaylistLoader_.master},u.media=function(){return this.masterPlaylistLoader_.media()||this.initialMedia_},u.areMediaTypesKnown_=function(){var t=!!this.mediaTypes_.AUDIO.activePlaylistLoader,s=!!this.mainSegmentLoader_.getCurrentMediaInfo_(),h=!t||!!this.audioSegmentLoader_.getCurrentMediaInfo_();return!(!s||!h)},u.getCodecsOrExclude_=function(){var t=this,s={main:this.mainSegmentLoader_.getCurrentMediaInfo_()||{},audio:this.audioSegmentLoader_.getCurrentMediaInfo_()||{}},h=this.mainSegmentLoader_.getPendingSegmentPlaylist()||this.media();s.video=s.main;var v=ec(this.master(),h),S={},D=!!this.mediaTypes_.AUDIO.activePlaylistLoader;if(s.main.hasVideo&&(S.video=v.video||s.main.videoCodec||"avc1.4d400d"),s.main.isMuxed&&(S.video+=","+(v.audio||s.main.audioCodec||or)),(s.main.hasAudio&&!s.main.isMuxed||s.audio.hasAudio||D)&&(S.audio=v.audio||s.main.audioCodec||s.audio.audioCodec||or,s.audio.isFmp4=s.main.hasAudio&&!s.main.isMuxed?s.main.isFmp4:s.audio.isFmp4),S.audio||S.video){var Y,ee={};if(["video","audio"].forEach(function(Ue){if(S.hasOwnProperty(Ue)&&!function(Gt,ln){return Gt?er(ln):Wn(ln)}(s[Ue].isFmp4,S[Ue])){var Gt=s[Ue].isFmp4?"browser":"muxer";ee[Gt]=ee[Gt]||[],ee[Gt].push(S[Ue]),"audio"===Ue&&(Y=Gt)}}),D&&Y&&h.attributes.AUDIO){var me=h.attributes.AUDIO;this.master().playlists.forEach(function(Ue){(Ue.attributes&&Ue.attributes.AUDIO)===me&&Ue!==h&&(Ue.excludeUntil=1/0)}),this.logger_("excluding audio group "+me+" as "+Y+' does not support codec(s): "'+S.audio+'"')}if(!Object.keys(ee).length){if(this.sourceUpdater_.hasCreatedSourceBuffers()&&!this.sourceUpdater_.canChangeType()){var Be=[];if(["video","audio"].forEach(function(Ue){var Gt=(Tn(t.sourceUpdater_.codecs[Ue]||"")[0]||{}).type,ln=(Tn(S[Ue]||"")[0]||{}).type;Gt&&ln&&Gt.toLowerCase()!==ln.toLowerCase()&&Be.push('"'+t.sourceUpdater_.codecs[Ue]+'" -> "'+S[Ue]+'"')}),Be.length)return void this.blacklistCurrentPlaylist({playlist:h,message:"Codec switching not supported: "+Be.join(", ")+".",blacklistDuration:1/0,internal:!0})}return S}var Le=Object.keys(ee).reduce(function(Ue,Gt){return Ue&&(Ue+=", "),Ue+(Gt+' does not support codec(s): "')+ee[Gt].join(",")+'"'},"")+".";this.blacklistCurrentPlaylist({playlist:h,internal:!0,message:Le,blacklistDuration:1/0})}else this.blacklistCurrentPlaylist({playlist:h,message:"Could not determine codecs for playlist.",blacklistDuration:1/0})},u.tryToCreateSourceBuffers_=function(){if("open"===this.mediaSource.readyState&&!this.sourceUpdater_.hasCreatedSourceBuffers()&&this.areMediaTypesKnown_()){var t=this.getCodecsOrExclude_();if(t){this.sourceUpdater_.createSourceBuffers(t);var s=[t.video,t.audio].filter(Boolean).join(",");this.excludeIncompatibleVariants_(s)}}},u.excludeUnsupportedVariants_=function(){var t=this,s=this.master().playlists,h=[];Object.keys(s).forEach(function(v){var S=s[v];if(-1===h.indexOf(S.id)){h.push(S.id);var D=ec(t.master,S),F=[];D.audio&&!Wn(D.audio)&&!er(D.audio)&&F.push("audio codec "+D.audio),D.video&&!Wn(D.video)&&!er(D.video)&&F.push("video codec "+D.video),D.text&&"stpp.ttml.im1t"===D.text&&F.push("text codec "+D.text),F.length&&(S.excludeUntil=1/0,t.logger_("excluding "+S.id+" for unsupported: "+F.join(", ")))}})},u.excludeIncompatibleVariants_=function(t){var s=this,h=[],v=this.master().playlists,S=Mh(Tn(t)),D=td(S),F=S.video&&Tn(S.video)[0]||null,ee=S.audio&&Tn(S.audio)[0]||null;Object.keys(v).forEach(function(Y){var me=v[Y];if(-1===h.indexOf(me.id)&&me.excludeUntil!==1/0){h.push(me.id);var Le=[],Be=ec(s.masterPlaylistLoader_.master,me),Ue=td(Be);if(Be.audio||Be.video){if(Ue!==D&&Le.push('codec count "'+Ue+'" !== "'+D+'"'),!s.sourceUpdater_.canChangeType()){var Gt=Be.video&&Tn(Be.video)[0]||null,ln=Be.audio&&Tn(Be.audio)[0]||null;Gt&&F&&Gt.type.toLowerCase()!==F.type.toLowerCase()&&Le.push('video codec "'+Gt.type+'" !== "'+F.type+'"'),ln&&ee&&ln.type.toLowerCase()!==ee.type.toLowerCase()&&Le.push('audio codec "'+ln.type+'" !== "'+ee.type+'"')}Le.length&&(me.excludeUntil=1/0,s.logger_("blacklisting "+me.id+": "+Le.join(" && ")))}}})},u.updateAdCues_=function(t){var s=0,h=this.seekable();h.length&&(s=h.start(0)),function(i,u,l){if(void 0===l&&(l=0),i.segments)for(var s,t=l,h=0;h<i.segments.length;h++){var v=i.segments[h];if(s||(s=rd(u,t+v.duration/2)),s){if("cueIn"in v){s.endTime=t,s.adEndTime=t,t+=v.duration,s=null;continue}if(t<s.endTime){t+=v.duration;continue}s.endTime+=v.duration}else if("cueOut"in v&&((s=new(ae().VTTCue)(t,t+v.duration,v.cueOut)).adStartTime=t,s.adEndTime=t+parseFloat(v.cueOut),u.addCue(s)),"cueOutCont"in v){var S=v.cueOutCont.split("/").map(parseFloat),D=S[0],F=S[1];(s=new(ae().VTTCue)(t,t+v.duration,"")).adStartTime=t-D,s.adEndTime=s.adStartTime+F,u.addCue(s)}t+=v.duration}}(t,this.cueTagsTrack_,s)},u.goalBufferLength=function(){var t=this.tech_.currentTime(),s=tu.GOAL_BUFFER_LENGTH,h=tu.GOAL_BUFFER_LENGTH_RATE,v=Math.max(s,tu.MAX_GOAL_BUFFER_LENGTH);return Math.min(s+t*h,v)},u.bufferLowWaterLine=function(){var t=this.tech_.currentTime(),s=tu.BUFFER_LOW_WATER_LINE,h=tu.BUFFER_LOW_WATER_LINE_RATE,v=Math.max(s,tu.MAX_BUFFER_LOW_WATER_LINE),S=Math.max(s,tu.EXPERIMENTAL_MAX_BUFFER_LOW_WATER_LINE);return Math.min(s+t*h,this.experimentalBufferBasedABR?S:v)},u.bufferHighWaterLine=function(){return tu.BUFFER_HIGH_WATER_LINE},i}(At.EventTarget),Tv=function(i,u,l){var t=i.masterPlaylistController_,v=t[(i.options_.smoothQualityChange?"smooth":"fast")+"QualityChange_"].bind(t);if(u.attributes){var S=u.attributes.RESOLUTION;this.width=S&&S.width,this.height=S&&S.height,this.bandwidth=u.attributes.BANDWIDTH,this.frameRate=u.attributes["FRAME-RATE"]}this.codecs=ec(t.master(),u),this.playlist=u,this.id=l,this.enabled=function(i,u,l){return function(t){var s=i.master.playlists[u],h=Xc(s),v=Dg(s);return typeof t>"u"?v:(t?delete s.disabled:s.disabled=!0,t!==v&&!h&&(l(),i.trigger(t?"renditionenabled":"renditiondisabled")),t)}}(i.playlists,u.id,v)},Qg=["seeking","seeked","pause","playing","error"],g0=function(){function g(u){var l=this;this.masterPlaylistController_=u.masterPlaylistController,this.tech_=u.tech,this.seekable=u.seekable,this.allowSeeksWithinUnsafeLiveWindow=u.allowSeeksWithinUnsafeLiveWindow,this.liveRangeSafeTimeDelta=u.liveRangeSafeTimeDelta,this.media=u.media,this.consecutiveUpdates=0,this.lastRecordedTime=null,this.timer_=null,this.checkCurrentTimeTimeout_=null,this.logger_=Iu("PlaybackWatcher"),this.logger_("initialize");var t=function(){return l.monitorCurrentTime_()},s=function(){return l.monitorCurrentTime_()},h=function(){return l.techWaiting_()},v=function(){return l.cancelTimer_()},S=this.masterPlaylistController_,D=["main","subtitle","audio"],F={};D.forEach(function(Y){F[Y]={reset:function(){return l.resetSegmentDownloads_(Y)},updateend:function(){return l.checkSegmentDownloads_(Y)}},S[Y+"SegmentLoader_"].on("appendsdone",F[Y].updateend),S[Y+"SegmentLoader_"].on("playlistupdate",F[Y].reset),l.tech_.on(["seeked","seeking"],F[Y].reset)});var ee=function(me){["main","audio"].forEach(function(Le){S[Le+"SegmentLoader_"][me]("appended",l.seekingAppendCheck_)})};this.seekingAppendCheck_=function(){l.fixesBadSeeks_()&&(l.consecutiveUpdates=0,l.lastRecordedTime=l.tech_.currentTime(),ee("off"))},this.clearSeekingAppendCheck_=function(){return ee("off")},this.watchForBadSeeking_=function(){l.clearSeekingAppendCheck_(),ee("on")},this.tech_.on("seeked",this.clearSeekingAppendCheck_),this.tech_.on("seeking",this.watchForBadSeeking_),this.tech_.on("waiting",h),this.tech_.on(Qg,v),this.tech_.on("canplay",s),this.tech_.one("play",t),this.dispose=function(){l.clearSeekingAppendCheck_(),l.logger_("dispose"),l.tech_.off("waiting",h),l.tech_.off(Qg,v),l.tech_.off("canplay",s),l.tech_.off("play",t),l.tech_.off("seeking",l.watchForBadSeeking_),l.tech_.off("seeked",l.clearSeekingAppendCheck_),D.forEach(function(Y){S[Y+"SegmentLoader_"].off("appendsdone",F[Y].updateend),S[Y+"SegmentLoader_"].off("playlistupdate",F[Y].reset),l.tech_.off(["seeked","seeking"],F[Y].reset)}),l.checkCurrentTimeTimeout_&&ae().clearTimeout(l.checkCurrentTimeTimeout_),l.cancelTimer_()}}var i=g.prototype;return i.monitorCurrentTime_=function(){this.checkCurrentTime_(),this.checkCurrentTimeTimeout_&&ae().clearTimeout(this.checkCurrentTimeTimeout_),this.checkCurrentTimeTimeout_=ae().setTimeout(this.monitorCurrentTime_.bind(this),250)},i.resetSegmentDownloads_=function(l){var t=this.masterPlaylistController_[l+"SegmentLoader_"];this[l+"StalledDownloads_"]>0&&this.logger_("resetting possible stalled download count for "+l+" loader"),this[l+"StalledDownloads_"]=0,this[l+"Buffered_"]=t.buffered_()},i.checkSegmentDownloads_=function(l){var t=this.masterPlaylistController_,s=t[l+"SegmentLoader_"],h=s.buffered_(),v=function(i,u){if(i===u)return!1;if(!i&&u||!u&&i||i.length!==u.length)return!0;for(var l=0;l<i.length;l++)if(i.start(l)!==u.start(l)||i.end(l)!==u.end(l))return!0;return!1}(this[l+"Buffered_"],h);this[l+"Buffered_"]=h,v?this.resetSegmentDownloads_(l):(this[l+"StalledDownloads_"]++,this.logger_("found #"+this[l+"StalledDownloads_"]+" "+l+" appends that did not increase buffer (possible stalled download)",{playlistId:s.playlist_&&s.playlist_.id,buffered:xf(h)}),!(this[l+"StalledDownloads_"]<10)&&(this.logger_(l+" loader stalled download exclusion"),this.resetSegmentDownloads_(l),this.tech_.trigger({type:"usage",name:"vhs-"+l+"-download-exclusion"}),"subtitle"!==l&&t.blacklistCurrentPlaylist({message:"Excessive "+l+" segment downloading detected."},1/0)))},i.checkCurrentTime_=function(){if(!this.tech_.paused()&&!this.tech_.seeking()){var l=this.tech_.currentTime(),t=this.tech_.buffered();if(this.lastRecordedTime===l&&(!t.length||l+Kl>=t.end(t.length-1)))return this.techWaiting_();this.consecutiveUpdates>=5&&l===this.lastRecordedTime?(this.consecutiveUpdates++,this.waiting_()):l===this.lastRecordedTime?this.consecutiveUpdates++:(this.consecutiveUpdates=0,this.lastRecordedTime=l)}},i.cancelTimer_=function(){this.consecutiveUpdates=0,this.timer_&&(this.logger_("cancelTimer_"),clearTimeout(this.timer_)),this.timer_=null},i.fixesBadSeeks_=function(){if(!this.tech_.seeking())return!1;var v,t=this.seekable(),s=this.tech_.currentTime();if(this.afterSeekableWindow_(t,s,this.media(),this.allowSeeksWithinUnsafeLiveWindow)&&(v=t.end(t.length-1)),this.beforeSeekableWindow_(t,s)){var D=t.start(0);v=D+(D===t.end(0)?0:Kl)}if(typeof v<"u")return this.logger_("Trying to seek outside of seekable at time "+s+" with seekable range "+Tc(t)+". Seeking to "+v+"."),this.tech_.setCurrentTime(v),!0;for(var F=this.masterPlaylistController_.sourceUpdater_,ee=this.tech_.buffered(),Y=F.audioBuffer?F.audioBuffered():null,me=F.videoBuffer?F.videoBuffered():null,Le=this.media(),Be=Le.partTargetDuration?Le.partTargetDuration:2*(Le.targetDuration-ql),Ue=[Y,me],Gt=0;Gt<Ue.length;Gt++)if(Ue[Gt]&&Zl(Ue[Gt],s)<Be)return!1;var On=yp(ee,s);return 0!==On.length&&(v=On.start(0)+Kl,this.logger_("Buffered region starts ("+On.start(0)+")  just beyond seek point ("+s+"). Seeking to "+v+"."),this.tech_.setCurrentTime(v),!0)},i.waiting_=function(){if(!this.techWaiting_()){var l=this.tech_.currentTime(),t=this.tech_.buffered(),s=Lo(t,l);if(s.length&&l+3<=s.end(0))return this.cancelTimer_(),this.tech_.setCurrentTime(l),this.logger_("Stopped at "+l+" while inside a buffered region ["+s.start(0)+" -> "+s.end(0)+"]. Attempting to resume playback by seeking to the current time."),this.tech_.trigger({type:"usage",name:"vhs-unknown-waiting"}),void this.tech_.trigger({type:"usage",name:"hls-unknown-waiting"})}},i.techWaiting_=function(){var l=this.seekable(),t=this.tech_.currentTime();if(this.tech_.seeking()||null!==this.timer_)return!0;if(this.beforeSeekableWindow_(l,t)){var s=l.end(l.length-1);return this.logger_("Fell out of live window at time "+t+". Seeking to live point (seekable end) "+s),this.cancelTimer_(),this.tech_.setCurrentTime(s),this.tech_.trigger({type:"usage",name:"vhs-live-resync"}),this.tech_.trigger({type:"usage",name:"hls-live-resync"}),!0}var h=this.tech_.vhs.masterPlaylistController_.sourceUpdater_,v=this.tech_.buffered();if(this.videoUnderflow_({audioBuffered:h.audioBuffered(),videoBuffered:h.videoBuffered(),currentTime:t}))return this.cancelTimer_(),this.tech_.setCurrentTime(t),this.tech_.trigger({type:"usage",name:"vhs-video-underflow"}),this.tech_.trigger({type:"usage",name:"hls-video-underflow"}),!0;var D=yp(v,t);if(D.length>0){var F=D.start(0)-t;return this.logger_("Stopped at "+t+", setting timer for "+F+", seeking to "+D.start(0)),this.cancelTimer_(),this.timer_=setTimeout(this.skipTheGap_.bind(this),1e3*F,t),!0}return!1},i.afterSeekableWindow_=function(l,t,s,h){if(void 0===h&&(h=!1),!l.length)return!1;var v=l.end(l.length-1)+Kl;return!s.endList&&h&&(v=l.end(l.length-1)+3*s.targetDuration),t>v},i.beforeSeekableWindow_=function(l,t){return!!(l.length&&l.start(0)>0&&t<l.start(0)-this.liveRangeSafeTimeDelta)},i.videoUnderflow_=function(l){var t=l.videoBuffered,s=l.audioBuffered,h=l.currentTime;if(t){var v;if(t.length&&s.length){var S=Lo(t,h-3),D=Lo(t,h),F=Lo(s,h);F.length&&!D.length&&S.length&&(v={start:S.end(0),end:F.end(0)})}else yp(t,h).length||(v=this.gapFromVideoUnderflow_(t,h));return!!v&&(this.logger_("Encountered a gap in video from "+v.start+" to "+v.end+". Seeking to current time "+h),!0)}},i.skipTheGap_=function(l){var t=this.tech_.buffered(),s=this.tech_.currentTime(),h=yp(t,s);this.cancelTimer_(),0!==h.length&&s===l&&(this.logger_("skipTheGap_:","currentTime:",s,"scheduled currentTime:",l,"nextRange start:",h.start(0)),this.tech_.setCurrentTime(h.start(0)+ql),this.tech_.trigger({type:"usage",name:"vhs-gap-skip"}),this.tech_.trigger({type:"usage",name:"hls-gap-skip"}))},i.gapFromVideoUnderflow_=function(l,t){for(var s=function(i){if(i.length<2)return At.createTimeRanges();for(var u=[],l=1;l<i.length;l++){var t=i.end(l-1),s=i.start(l);u.push([t,s])}return At.createTimeRanges(u)}(l),h=0;h<s.length;h++){var v=s.start(h),S=s.end(h);if(t-v<4&&t-v>2)return{start:v,end:S}}return null},g}(),Xg={errorInterval:30,getSource:function(i){return i(this.tech({IWillNotUseThisInPlugins:!0}).currentSource_||this.currentSource())}},m0=function g(i,u){var l=0,t=0,s=At.mergeOptions(Xg,u);i.ready(function(){i.trigger({type:"usage",name:"vhs-error-reload-initialized"}),i.trigger({type:"usage",name:"hls-error-reload-initialized"})});var h=function(){t&&i.currentTime(t)},v=function(Y){null!=Y&&(t=i.duration()!==1/0&&i.currentTime()||0,i.one("loadedmetadata",h),i.src(Y),i.trigger({type:"usage",name:"vhs-error-reload"}),i.trigger({type:"usage",name:"hls-error-reload"}),i.play())},S=function(){return Date.now()-l<1e3*s.errorInterval?(i.trigger({type:"usage",name:"vhs-error-reload-canceled"}),void i.trigger({type:"usage",name:"hls-error-reload-canceled"})):s.getSource&&"function"==typeof s.getSource?(l=Date.now(),s.getSource.call(i,v)):void At.log.error("ERROR: reloadSourceOnError - The option getSource must be a function!")},D=function ee(){i.off("loadedmetadata",h),i.off("error",S),i.off("dispose",ee)};i.on("error",S),i.on("dispose",D),i.reloadSourceOnError=function(Y){D(),g(i,Y)}},Xo={PlaylistLoader:Jc,Playlist:el,utils:oy,STANDARD_PLAYLIST_SELECTOR:Ey,INITIAL_PLAYLIST_SELECTOR:function(){var i=this,u=this.playlists.master.playlists.filter(el.isEnabled);return Md(u,function(t,s){return Np(t,s)}),u.filter(function(t){return!!ec(i.playlists.master,t).video})[0]||null},lastBandwidthSelector:Ey,movingAverageBandwidthSelector:function(i){var u=-1,l=-1;if(i<0||i>1)throw new Error("Moving average bandwidth decay must be between 0 and 1.");return function(){var t=this.useDevicePixelRatio&&ae().devicePixelRatio||1;return u<0&&(u=this.systemBandwidth,l=this.systemBandwidth),this.systemBandwidth>0&&this.systemBandwidth!==l&&(u=i*this.systemBandwidth+(1-i)*u,l=this.systemBandwidth),Nf(this.playlists.master,u,parseInt(Rf(this.tech_.el(),"width"),10)*t,parseInt(Rf(this.tech_.el(),"height"),10)*t,this.limitRenditionByPlayerDimensions,this.masterPlaylistController_)}},comparePlaylistBandwidth:Np,comparePlaylistResolution:function(i,u){var l,t;return i.attributes.RESOLUTION&&i.attributes.RESOLUTION.width&&(l=i.attributes.RESOLUTION.width),l=l||ae().Number.MAX_VALUE,u.attributes.RESOLUTION&&u.attributes.RESOLUTION.width&&(t=u.attributes.RESOLUTION.width),l===(t=t||ae().Number.MAX_VALUE)&&i.attributes.BANDWIDTH&&u.attributes.BANDWIDTH?i.attributes.BANDWIDTH-u.attributes.BANDWIDTH:l-t},xhr:Ql()};Object.keys(tu).forEach(function(g){Object.defineProperty(Xo,g,{get:function(){return At.log.warn("using Vhs."+g+" is UNSAFE be sure you know what you are doing"),tu[g]},set:function(u){At.log.warn("using Vhs."+g+" is UNSAFE be sure you know what you are doing"),"number"!=typeof u||u<0?At.log.warn("value of Vhs."+g+" must be greater than or equal to 0"):tu[g]=u}})});var ja="videojs-vhs",jd=function(i,u){for(var l=u.media(),t=-1,s=0;s<i.length;s++)if(i[s].id===l.id){t=s;break}i.selectedIndex_=t,i.trigger({selectedIndex:t,type:"change"})};Xo.canPlaySource=function(){return At.log.warn("HLS is no longer a tech. Please remove it from your player's techOrder.")};var Lh=function(){if(!ae().localStorage)return null;var i=ae().localStorage.getItem(ja);if(!i)return null;try{return JSON.parse(i)}catch{return null}};Xo.supportsNativeHls=function(){if(!et()||!et().createElement)return!1;var g=et().createElement("video");return!!At.getTech("Html5").isSupported()&&["application/vnd.apple.mpegurl","audio/mpegurl","audio/x-mpegurl","application/x-mpegurl","video/x-mpegurl","video/mpegurl","application/mpegurl"].some(function(u){return/maybe|probably/i.test(g.canPlayType(u))})}(),Xo.supportsNativeDash=!!(et()&&et().createElement&&At.getTech("Html5").isSupported())&&/maybe|probably/i.test(et().createElement("video").canPlayType("application/dash+xml")),Xo.supportsTypeNatively=function(g){return"hls"===g?Xo.supportsNativeHls:"dash"===g&&Xo.supportsNativeDash},Xo.isSupported=function(){return At.log.warn("HLS is no longer a tech. Please remove it from your player's techOrder.")};var Cc=function(g){function i(l,t,s){var h;if(h=g.call(this,t,At.mergeOptions(s.hls,s.vhs))||this,s.hls&&Object.keys(s.hls).length&&At.log.warn("Using hls options is deprecated. Please rename `hls` to `vhs` in your options object."),"number"==typeof s.initialBandwidth&&(h.options_.bandwidth=s.initialBandwidth),h.logger_=Iu("VhsHandler"),t.options_&&t.options_.playerId){var v=At(t.options_.playerId);v.hasOwnProperty("hls")||Object.defineProperty(v,"hls",{get:function(){return At.log.warn("player.hls is deprecated. Use player.tech().vhs instead."),t.trigger({type:"usage",name:"hls-player-access"}),dt(h)},configurable:!0}),v.hasOwnProperty("vhs")||Object.defineProperty(v,"vhs",{get:function(){return At.log.warn("player.vhs is deprecated. Use player.tech().vhs instead."),t.trigger({type:"usage",name:"vhs-player-access"}),dt(h)},configurable:!0}),v.hasOwnProperty("dash")||Object.defineProperty(v,"dash",{get:function(){return At.log.warn("player.dash is deprecated. Use player.tech().vhs instead."),dt(h)},configurable:!0}),h.player_=v}if(h.tech_=t,h.source_=l,h.stats={},h.ignoreNextSeekingEvent_=!1,h.setOptions_(),h.options_.overrideNative&&t.overrideNativeAudioTracks&&t.overrideNativeVideoTracks)t.overrideNativeAudioTracks(!0),t.overrideNativeVideoTracks(!0);else if(h.options_.overrideNative&&(t.featuresNativeVideoTracks||t.featuresNativeAudioTracks))throw new Error("Overriding native HLS requires emulated tracks. See https://git.io/vMpjB");return h.on(et(),["fullscreenchange","webkitfullscreenchange","mozfullscreenchange","MSFullscreenChange"],function(S){var D=et().fullscreenElement||et().webkitFullscreenElement||et().mozFullScreenElement||et().msFullscreenElement;D&&D.contains(h.tech_.el())?h.masterPlaylistController_.fastQualityChange_():h.masterPlaylistController_.checkABR_()}),h.on(h.tech_,"seeking",function(){this.ignoreNextSeekingEvent_?this.ignoreNextSeekingEvent_=!1:this.setCurrentTime(this.tech_.currentTime())}),h.on(h.tech_,"error",function(){this.tech_.error()&&this.masterPlaylistController_&&this.masterPlaylistController_.pauseLoading()}),h.on(h.tech_,"play",h.play),h}Me(i,g);var u=i.prototype;return u.setOptions_=function(){var t=this;if(this.options_.withCredentials=this.options_.withCredentials||!1,this.options_.handleManifestRedirects=!1!==this.options_.handleManifestRedirects,this.options_.limitRenditionByPlayerDimensions=!1!==this.options_.limitRenditionByPlayerDimensions,this.options_.useDevicePixelRatio=this.options_.useDevicePixelRatio||!1,this.options_.smoothQualityChange=this.options_.smoothQualityChange||!1,this.options_.useBandwidthFromLocalStorage=typeof this.source_.useBandwidthFromLocalStorage<"u"?this.source_.useBandwidthFromLocalStorage:this.options_.useBandwidthFromLocalStorage||!1,this.options_.useNetworkInformationApi=this.options_.useNetworkInformationApi||!1,this.options_.useDtsForTimestampOffset=this.options_.useDtsForTimestampOffset||!1,this.options_.customTagParsers=this.options_.customTagParsers||[],this.options_.customTagMappers=this.options_.customTagMappers||[],this.options_.cacheEncryptionKeys=this.options_.cacheEncryptionKeys||!1,"number"!=typeof this.options_.blacklistDuration&&(this.options_.blacklistDuration=300),"number"!=typeof this.options_.bandwidth&&this.options_.useBandwidthFromLocalStorage){var s=Lh();s&&s.bandwidth&&(this.options_.bandwidth=s.bandwidth,this.tech_.trigger({type:"usage",name:"vhs-bandwidth-from-local-storage"}),this.tech_.trigger({type:"usage",name:"hls-bandwidth-from-local-storage"})),s&&s.throughput&&(this.options_.throughput=s.throughput,this.tech_.trigger({type:"usage",name:"vhs-throughput-from-local-storage"}),this.tech_.trigger({type:"usage",name:"hls-throughput-from-local-storage"}))}"number"!=typeof this.options_.bandwidth&&(this.options_.bandwidth=tu.INITIAL_BANDWIDTH),this.options_.enableLowInitialPlaylist=this.options_.enableLowInitialPlaylist&&this.options_.bandwidth===tu.INITIAL_BANDWIDTH,["withCredentials","useDevicePixelRatio","limitRenditionByPlayerDimensions","bandwidth","smoothQualityChange","customTagParsers","customTagMappers","handleManifestRedirects","cacheEncryptionKeys","playlistSelector","initialPlaylistSelector","experimentalBufferBasedABR","liveRangeSafeTimeDelta","experimentalLLHLS","useNetworkInformationApi","useDtsForTimestampOffset","experimentalExactManifestTimings","experimentalLeastPixelDiffSelector"].forEach(function(h){typeof t.source_[h]<"u"&&(t.options_[h]=t.source_[h])}),this.limitRenditionByPlayerDimensions=this.options_.limitRenditionByPlayerDimensions,this.useDevicePixelRatio=this.options_.useDevicePixelRatio},u.src=function(t,s){var h=this;if(t){this.setOptions_(),this.options_.src=function(i){return 0===i.toLowerCase().indexOf("data:application/vnd.videojs.vhs+json,")?JSON.parse(i.substring(i.indexOf(",")+1)):i}(this.source_.src),this.options_.tech=this.tech_,this.options_.externVhs=Xo,this.options_.sourceType=ti(s),this.options_.seekTo=function(D){h.tech_.setCurrentTime(D)},this.options_.smoothQualityChange&&At.log.warn("smoothQualityChange is deprecated and will be removed in the next major version"),this.masterPlaylistController_=new Ry(this.options_);var v=At.mergeOptions({liveRangeSafeTimeDelta:Kl},this.options_,{seekable:function(){return h.seekable()},media:function(){return h.masterPlaylistController_.media()},masterPlaylistController:this.masterPlaylistController_});this.playbackWatcher_=new g0(v),this.masterPlaylistController_.on("error",function(){var D=At.players[h.tech_.options_.playerId],F=h.masterPlaylistController_.error;"object"!=typeof F||F.code?"string"==typeof F&&(F={message:F,code:3}):F.code=3,D.error(F)});var S=this.options_.experimentalBufferBasedABR?Xo.movingAverageBandwidthSelector(.55):Xo.STANDARD_PLAYLIST_SELECTOR;this.masterPlaylistController_.selectPlaylist=this.selectPlaylist?this.selectPlaylist.bind(this):S.bind(this),this.masterPlaylistController_.selectInitialPlaylist=Xo.INITIAL_PLAYLIST_SELECTOR.bind(this),this.playlists=this.masterPlaylistController_.masterPlaylistLoader_,this.mediaSource=this.masterPlaylistController_.mediaSource,Object.defineProperties(this,{selectPlaylist:{get:function(){return this.masterPlaylistController_.selectPlaylist},set:function(F){this.masterPlaylistController_.selectPlaylist=F.bind(this)}},throughput:{get:function(){return this.masterPlaylistController_.mainSegmentLoader_.throughput.rate},set:function(F){this.masterPlaylistController_.mainSegmentLoader_.throughput.rate=F,this.masterPlaylistController_.mainSegmentLoader_.throughput.count=1}},bandwidth:{get:function(){var F=this.masterPlaylistController_.mainSegmentLoader_.bandwidth,ee=ae().navigator.connection||ae().navigator.mozConnection||ae().navigator.webkitConnection,Y=1e7;if(this.options_.useNetworkInformationApi&&ee){var me=1e3*ee.downlink*1e3;F=me>=Y&&F>=Y?Math.max(F,me):me}return F},set:function(F){this.masterPlaylistController_.mainSegmentLoader_.bandwidth=F,this.masterPlaylistController_.mainSegmentLoader_.throughput={rate:0,count:0}}},systemBandwidth:{get:function(){return Math.floor(1/(1/(this.bandwidth||1)+(this.throughput>0?1/this.throughput:0)))},set:function(){At.log.error('The "systemBandwidth" property is read-only')}}}),this.options_.bandwidth&&(this.bandwidth=this.options_.bandwidth),this.options_.throughput&&(this.throughput=this.options_.throughput),Object.defineProperties(this.stats,{bandwidth:{get:function(){return h.bandwidth||0},enumerable:!0},mediaRequests:{get:function(){return h.masterPlaylistController_.mediaRequests_()||0},enumerable:!0},mediaRequestsAborted:{get:function(){return h.masterPlaylistController_.mediaRequestsAborted_()||0},enumerable:!0},mediaRequestsTimedout:{get:function(){return h.masterPlaylistController_.mediaRequestsTimedout_()||0},enumerable:!0},mediaRequestsErrored:{get:function(){return h.masterPlaylistController_.mediaRequestsErrored_()||0},enumerable:!0},mediaTransferDuration:{get:function(){return h.masterPlaylistController_.mediaTransferDuration_()||0},enumerable:!0},mediaBytesTransferred:{get:function(){return h.masterPlaylistController_.mediaBytesTransferred_()||0},enumerable:!0},mediaSecondsLoaded:{get:function(){return h.masterPlaylistController_.mediaSecondsLoaded_()||0},enumerable:!0},mediaAppends:{get:function(){return h.masterPlaylistController_.mediaAppends_()||0},enumerable:!0},mainAppendsToLoadedData:{get:function(){return h.masterPlaylistController_.mainAppendsToLoadedData_()||0},enumerable:!0},audioAppendsToLoadedData:{get:function(){return h.masterPlaylistController_.audioAppendsToLoadedData_()||0},enumerable:!0},appendsToLoadedData:{get:function(){return h.masterPlaylistController_.appendsToLoadedData_()||0},enumerable:!0},timeToLoadedData:{get:function(){return h.masterPlaylistController_.timeToLoadedData_()||0},enumerable:!0},buffered:{get:function(){return xf(h.tech_.buffered())},enumerable:!0},currentTime:{get:function(){return h.tech_.currentTime()},enumerable:!0},currentSource:{get:function(){return h.tech_.currentSource_},enumerable:!0},currentTech:{get:function(){return h.tech_.name_},enumerable:!0},duration:{get:function(){return h.tech_.duration()},enumerable:!0},master:{get:function(){return h.playlists.master},enumerable:!0},playerDimensions:{get:function(){return h.tech_.currentDimensions()},enumerable:!0},seekable:{get:function(){return xf(h.tech_.seekable())},enumerable:!0},timestamp:{get:function(){return Date.now()},enumerable:!0},videoPlaybackQuality:{get:function(){return h.tech_.getVideoPlaybackQuality()},enumerable:!0}}),this.tech_.one("canplay",this.masterPlaylistController_.setupFirstPlay.bind(this.masterPlaylistController_)),this.tech_.on("bandwidthupdate",function(){h.options_.useBandwidthFromLocalStorage&&function(i){if(!ae().localStorage)return!1;var u=Lh();u=u?At.mergeOptions(u,i):i;try{ae().localStorage.setItem(ja,JSON.stringify(u))}catch{return!1}}({bandwidth:h.bandwidth,throughput:Math.round(h.throughput)})}),this.masterPlaylistController_.on("selectedinitialmedia",function(){!function(i){i.representations=function(){var u=i.masterPlaylistController_.master(),l=Ep(u)?i.masterPlaylistController_.getAudioTrackPlaylists_():u.playlists;return l?l.filter(function(t){return!Xc(t)}).map(function(t,s){return new Tv(i,t,t.id)}):[]}}(h)}),this.masterPlaylistController_.sourceUpdater_.on("createdsourcebuffers",function(){h.setupEme_()}),this.on(this.masterPlaylistController_,"progress",function(){this.tech_.trigger("progress")}),this.on(this.masterPlaylistController_,"firstplay",function(){this.ignoreNextSeekingEvent_=!0}),this.setupQualityLevels_(),this.tech_.el()&&(this.mediaSourceUrl_=ae().URL.createObjectURL(this.masterPlaylistController_.mediaSource),this.tech_.src(this.mediaSourceUrl_))}},u.createKeySessions_=function(){var t=this,s=this.masterPlaylistController_.mediaTypes_.AUDIO.activePlaylistLoader;this.logger_("waiting for EME key session creation"),function(i){var u=i.player,l=i.sourceKeySystems,t=i.audioMedia,s=i.mainPlaylists;if(!u.eme.initializeMediaKeys)return Promise.resolve();var v=function(i,u){return i.reduce(function(l,t){if(!t.contentProtection)return l;var s=u.reduce(function(h,v){var S=t.contentProtection[v];return S&&S.pssh&&(h[v]={pssh:S.pssh}),h},{});return Object.keys(s).length&&l.push(s),l},[])}(t?s.concat([t]):s,Object.keys(l)),S=[],D=[];return v.forEach(function(F){D.push(new Promise(function(ee,Y){u.tech_.one("keysessioncreated",ee)})),S.push(new Promise(function(ee,Y){u.eme.initializeMediaKeys({keySystems:F},function(me){me?Y(me):ee()})}))}),Promise.race([Promise.all(S),Promise.race(D)])}({player:this.player_,sourceKeySystems:this.source_.keySystems,audioMedia:s&&s.media(),mainPlaylists:this.playlists.master.playlists}).then(function(){t.logger_("created EME key session"),t.masterPlaylistController_.sourceUpdater_.initializedEme()}).catch(function(h){t.logger_("error while creating EME key session",h),t.player_.error({message:"Failed to initialize media keys for EME",code:3})})},u.handleWaitingForKey_=function(){this.logger_("waitingforkey fired, attempting to create any new key sessions"),this.createKeySessions_()},u.setupEme_=function(){var t=this,s=this.masterPlaylistController_.mediaTypes_.AUDIO.activePlaylistLoader,h=function(i){var u=i.player,h=function(i,u,l){if(!i)return i;var t={};u&&u.attributes&&u.attributes.CODECS&&(t=Mh(Tn(u.attributes.CODECS))),l&&l.attributes&&l.attributes.CODECS&&(t.audio=l.attributes.CODECS);var s=Ri(t.video),h=Ri(t.audio),v={};for(var S in i)v[S]={},h&&(v[S].audioContentType=h),s&&(v[S].videoContentType=s),u.contentProtection&&u.contentProtection[S]&&u.contentProtection[S].pssh&&(v[S].pssh=u.contentProtection[S].pssh),"string"==typeof i[S]&&(v[S].url=i[S]);return At.mergeOptions(i,v)}(i.sourceKeySystems,i.media,i.audioMedia);return!(!h||(u.currentSource().keySystems=h,h&&!u.eme&&(At.log.warn("DRM encrypted source cannot be decrypted without a DRM plugin"),1)))}({player:this.player_,sourceKeySystems:this.source_.keySystems,media:this.playlists.media(),audioMedia:s&&s.media()});this.player_.tech_.on("keystatuschange",function(v){if("output-restricted"===v.status){var S=t.masterPlaylistController_.master();if(S&&S.playlists){var F,D=[];S.playlists.forEach(function(ee){ee&&ee.attributes&&ee.attributes.RESOLUTION&&ee.attributes.RESOLUTION.height>=720&&(!ee.excludeUntil||ee.excludeUntil<1/0)&&(ee.excludeUntil=1/0,D.push(ee))}),D.length&&((F=At.log).warn.apply(F,['DRM keystatus changed to "output-restricted." Removing the following HD playlists that will most likely fail to play and clearing the buffer. This may be due to HDCP restrictions on the stream and the capabilities of the current device.'].concat(D)),t.masterPlaylistController_.fastQualityChange_())}}}),this.handleWaitingForKey_=this.handleWaitingForKey_.bind(this),this.player_.tech_.on("waitingforkey",this.handleWaitingForKey_),11!==At.browser.IE_VERSION&&h?this.createKeySessions_():this.masterPlaylistController_.sourceUpdater_.initializedEme()},u.setupQualityLevels_=function(){var t=this,s=At.players[this.tech_.options_.playerId];!s||!s.qualityLevels||this.qualityLevels_||(this.qualityLevels_=s.qualityLevels(),this.masterPlaylistController_.on("selectedinitialmedia",function(){!function(i,u){u.representations().forEach(function(l){i.addQualityLevel(l)}),jd(i,u.playlists)}(t.qualityLevels_,t)}),this.playlists.on("mediachange",function(){jd(t.qualityLevels_,t.playlists)}))},i.version=function(){return{"@videojs/http-streaming":"2.16.2","mux.js":"6.0.1","mpd-parser":"0.22.1","m3u8-parser":"4.8.0","aes-decrypter":"3.1.3"}},u.version=function(){return this.constructor.version()},u.canChangeType=function(){return Bp.canChangeType()},u.play=function(){this.masterPlaylistController_.play()},u.setCurrentTime=function(t){this.masterPlaylistController_.setCurrentTime(t)},u.duration=function(){return this.masterPlaylistController_.duration()},u.seekable=function(){return this.masterPlaylistController_.seekable()},u.dispose=function(){this.playbackWatcher_&&this.playbackWatcher_.dispose(),this.masterPlaylistController_&&this.masterPlaylistController_.dispose(),this.qualityLevels_&&this.qualityLevels_.dispose(),this.player_&&(delete this.player_.vhs,delete this.player_.dash,delete this.player_.hls),this.tech_&&this.tech_.vhs&&delete this.tech_.vhs,this.tech_&&delete this.tech_.hls,this.mediaSourceUrl_&&ae().URL.revokeObjectURL&&(ae().URL.revokeObjectURL(this.mediaSourceUrl_),this.mediaSourceUrl_=null),this.tech_&&this.tech_.off("waitingforkey",this.handleWaitingForKey_),g.prototype.dispose.call(this)},u.convertToProgramTime=function(t,s){return function(i){var u=i.playlist,l=i.time,t=void 0===l?void 0:l,s=i.callback;if(!s)throw new Error("getProgramTime: callback must be provided");if(!u||void 0===t)return s({message:"getProgramTime: playlist and time must be provided"});var h=function(i,u){if(!u||!u.segments||0===u.segments.length)return null;for(var t,l=0,s=0;s<u.segments.length&&!(i<=(l=(t=u.segments[s]).videoTimingInfo?t.videoTimingInfo.transmuxedPresentationEnd:l+t.duration));s++);var h=u.segments[u.segments.length-1];if(h.videoTimingInfo&&h.videoTimingInfo.transmuxedPresentationEnd<i)return null;if(i>l){if(i>l+.25*h.duration)return null;t=h}return{segment:t,estimatedStart:t.videoTimingInfo?t.videoTimingInfo.transmuxedPresentationStart:l-t.duration,type:t.videoTimingInfo?"accurate":"estimate"}}(t,u);if(!h)return s({message:"valid programTime was not found"});if("estimate"===h.type)return s({message:"Accurate programTime could not be determined. Please seek to e.seekTime and try again",seekTime:h.estimatedStart});var v={mediaSeconds:t},S=function(i,u){if(!u.dateTimeObject)return null;var h=i-(u.videoTimingInfo.transmuxedPresentationStart+u.videoTimingInfo.transmuxerPrependedSeconds);return new Date(u.dateTimeObject.getTime()+1e3*h)}(t,h.segment);return S&&(v.programDateTime=S.toISOString()),s(null,v)}({playlist:this.masterPlaylistController_.media(),time:t,callback:s})},u.seekToProgramTime=function(t,s,h,v){return void 0===h&&(h=!0),void 0===v&&(v=2),D_({programTime:t,playlist:this.masterPlaylistController_.media(),retryCount:v,pauseAfterSeek:h,seekTo:this.options_.seekTo,tech:this.options_.tech,callback:s})},i}(At.getComponent("Component")),Ic={name:"videojs-http-streaming",VERSION:"2.16.2",canHandleSource:function(i,u){void 0===u&&(u={});var l=At.mergeOptions(At.options,u);return Ic.canPlayType(i.type,l)},handleSource:function(i,u,l){void 0===l&&(l={});var t=At.mergeOptions(At.options,l);return u.vhs=new Cc(i,u,t),At.hasOwnProperty("hls")||Object.defineProperty(u,"hls",{get:function(){return At.log.warn("player.tech().hls is deprecated. Use player.tech().vhs instead."),u.vhs},configurable:!0}),u.vhs.xhr=Ql(),u.vhs.src(i.src,i.type),u.vhs},canPlayType:function(i,u){var l=ti(i);if(!l)return"";var t=Ic.getOverrideNative(u);return!Xo.supportsTypeNatively(l)||t?"maybe":""},getOverrideNative:function(i){void 0===i&&(i={});var l=i.vhs,s=i.hls,S=(void 0===l?{}:l).overrideNative,F=(void 0===s?{}:s).overrideNative;return void 0!==F&&F||(void 0===S?!(At.browser.IS_ANY_SAFARI||At.browser.IS_IOS):S)}};er("avc1.4d400d,mp4a.40.2")&&At.getTech("Html5").registerSourceHandler(Ic,0),At.VhsHandler=Cc,Object.defineProperty(At,"HlsHandler",{get:function(){return At.log.warn("videojs.HlsHandler is deprecated. Use videojs.VhsHandler instead."),Cc},configurable:!0}),At.VhsSourceHandler=Ic,Object.defineProperty(At,"HlsSourceHandler",{get:function(){return At.log.warn("videojs.HlsSourceHandler is deprecated. Use videojs.VhsSourceHandler instead."),Ic},configurable:!0}),At.Vhs=Xo,Object.defineProperty(At,"Hls",{get:function(){return At.log.warn("videojs.Hls is deprecated. Use videojs.Vhs instead."),Xo},configurable:!0}),At.use||(At.registerComponent("Hls",Xo),At.registerComponent("Vhs",Xo)),At.options.vhs=At.options.vhs||{},At.options.hls=At.options.hls||{},At.getPlugin&&At.getPlugin("reloadSourceOnError")||(At.registerPlugin||At.plugin)("reloadSourceOnError",function(i){m0(this,i)});const Jg=At,Sv=["videoPlayer"];class Hd{constructor(i){this.route=i}ngOnInit(){this.player=Jg(this.target?.nativeElement),this.route.data.subscribe(i=>{this.clip=i.clip,this.player?.src({src:this.clip.url,type:"video/mp4"})})}}Hd.\u0275fac=function(i){return new(i||Hd)(M.Y36(Oe.gz))},Hd.\u0275cmp=M.Xpm({type:Hd,selectors:[["app-clip"]],viewQuery:function(i,u){if(1&i&&M.Gf(Sv,7),2&i){let l;M.iGM(l=M.CRH())&&(u.target=l.first)}},features:[M._Bn([De.uU])],decls:16,vars:6,consts:[[1,"container","mx-auto","my-8","bg-secondary","p-6"],[1,"rounded","relative","flex","flex-col"],[1,"font-bold","mb-2","text-3xl"],[1,"text-gray-400","mb-6"],[1,"relative"],["controls","","crossorigin","","data-setup","{}",1,"video-js","vjs-theme-forest","mx-auto"],["videoPlayer",""],[1,"container","mx-auto","my-8"],[1,"mt-6","text-2xl"],[3,"scrollable"]],template:function(i,u){1&i&&(M.TgZ(0,"section",0)(1,"div",1)(2,"h1",2),M._uU(3),M.qZA(),M.TgZ(4,"div",3),M._uU(5),M.TgZ(6,"span"),M._uU(7),M.ALo(8,"fbTimestamp"),M.qZA()(),M.TgZ(9,"div",4),M._UZ(10,"video",5,6),M.qZA()()(),M.TgZ(12,"div",7)(13,"h2",8),M._uU(14,"More Clips"),M.qZA(),M._UZ(15,"app-clips-list",9),M.qZA()),2&i&&(M.xp6(3),M.hij(" ",null==u.clip?null:u.clip.title," "),M.xp6(2),M.hij(" Uploaded By ",null==u.clip?null:u.clip.displayName," on "),M.xp6(2),M.Oqu(M.lcZ(8,4,null==u.clip?null:u.clip.timestamp)),M.xp6(8),M.Q6J("scrollable",!1))},dependencies:[Ie,Ge],styles:['@charset "UTF-8";.vjs-modal-dialog .vjs-modal-dialog-content,.video-js .vjs-modal-dialog,.vjs-button>.vjs-icon-placeholder:before,.video-js .vjs-big-play-button .vjs-icon-placeholder:before{position:absolute;top:0;left:0;width:100%;height:100%}.vjs-button>.vjs-icon-placeholder:before,.video-js .vjs-big-play-button .vjs-icon-placeholder:before{text-align:center}@font-face{font-family:VideoJS;src:url(data:application/font-woff;charset=utf-8;base64,d09GRgABAAAAABDkAAsAAAAAG6gAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAABHU1VCAAABCAAAADsAAABUIIslek9TLzIAAAFEAAAAPgAAAFZRiV3hY21hcAAAAYQAAADaAAADPv749/pnbHlmAAACYAAAC3AAABHQZg6OcWhlYWQAAA3QAAAAKwAAADYZw251aGhlYQAADfwAAAAdAAAAJA+RCLFobXR4AAAOHAAAABMAAACM744AAGxvY2EAAA4wAAAASAAAAEhF6kqubWF4cAAADngAAAAfAAAAIAE0AIFuYW1lAAAOmAAAASUAAAIK1cf1oHBvc3QAAA/AAAABJAAAAdPExYuNeJxjYGRgYOBiMGCwY2BycfMJYeDLSSzJY5BiYGGAAJA8MpsxJzM9kYEDxgPKsYBpDiBmg4gCACY7BUgAeJxjYGS7wTiBgZWBgaWQ5RkDA8MvCM0cwxDOeI6BgYmBlZkBKwhIc01hcPjI+FGJHcRdyA4RZgQRADK3CxEAAHic7dFZbsMgAEXRS0ycyZnnOeG7y+qC8pU1dHusIOXxuoxaOlwZYWQB0Aea4quIEN4E9LzKbKjzDeM6H/mua6Lmc/p8yhg0lvdYx15ZG8uOLQOGjMp3EzqmzJizYMmKNRu27Nhz4MiJMxeu3Ljz4Ekqm7T8P52G8PP3lnTOVk++Z6iN6QZzNN1F7ptuN7eGOjDUoaGODHVsuvU8MdTO9Hd5aqgzQ50b6sJQl4a6MtS1oW4MdWuoO0PdG+rBUI+GejLUs6FeDPVqqDdDvRvqw1CfhpqM9At0iFLaAAB4nJ1YDXBTVRZ+5/22TUlJ8we0pHlJm7RJf5O8F2j6EymlSPkpxaL8U2xpa3DKj0CBhc2IW4eWKSokIoLsuMqssM64f+jA4HSdWXXXscBq67IOs3FXZ1ZYWVyRFdo899yXtIBQZ90k7717zz3v3HPPOfd854YCCj9cL9dL0RQFOqCbGJnrHb5EayiKIWN8iA/hWBblo6hUWm8TtCDwE80WMJus/irwyxOdxeB0MDb14VNJHnXYoLLSl6FfCUYO9nYPTA8Epg9090LprfbBbZ2hY0UlJUXHQp3/vtWkS6EBv8+rPMq5u9692f/dNxJNiqwC1xPE9TCUgCsSdQWgE3XQD25lkG4CN2xmTcOXWBOyser6RN6KnGbKSbmQ3+d0OI1m2W8QzLLkI2sykrWAgJJEtA8vGGW/2Q+CmT3n8zS9wZwu2DCvtuZKZN3xkrLh36yCZuUomQSqGpY8t/25VfHVhw8z4ebGBtfLb0ya9PCaDc+8dGTvk2dsh6z7WzvowlXKUSWo9MJ15a3KrEP2loOr2Ojhw6iW6hf2BDdEccQvZGpaAy7YovSwq8kr7HGllxpd71rkS6G0Sf11sl9OvMK1+jwPPODxjUwkOim9CU3ix1wNjXDfmJSEn618Bs6lpWwUpU+8PCqLMY650zjq8VhCIP17NEKTx3eaLL+s5Pi6yJWaWjTHLR1jYzPSV9VF/6Ojdb/1kO3Mk3uhHC0x6gc1BjlKQ+nQFxTYdaJkZ7ySVxLBbhR1dsboNXp1tCYKW2LRaEzpYcIx2BKNxaL0ZaUnSqfFoiNhHKR/GkX6PWUSAaJelQaqZL1EpoHNsajSEyPSoJ9IjhIxTdjHLmwZvhRDOiFTY/YeQnvrVZmiTQtGncECXtFTBZLOVwwMRgoXHAkXzMzPn1nAJJ8jYSbMDaqN2waGLzNhih/bZynUBMpIWSg7VYi7DRx2m8ALkIdRCJwI6ArJx2EI8kaDWeTQKeAFk9fjl/1AvwktjQ1P7NjyMGQyfd4vjipX6M/i52D7Cq80kqlcxEcGXRr/FEcgs0u5uGgB4VWuMFfpdn2Re6Hi3PqzmxWKsz6+ae2Pn9hXXw/fqM859UiGC0oKYYILJBqJrsn1Z1E5qOs9rQCiUQRREjm8yJcbHF5cUJufX1vAHlefw0XgUoboS3ETfQlTxBC4SOtuE8VPRJTBSCQSjZCpk7Gqzu+masaZ2y7Zjehho4F3g82BNDkAHpORG4+OCS+f6JTPmtRn/PH1kch6d04sp7AQb25aQ/pqUyXeQ8vrebG8OYQdXOQ+585u0sdW9rqalzRURiJ+9F4MweRFrKUjl1GUYhH1A27WOHw5cTFSFPMo9EeUIGnQTZHIaJ7AHLaOKsOODaNF9jkBjYG2QEsQ2xjMUAx2bBEbeTBWMHwskBjngq56S/yfgkBnWBa4K9sqKtq2t1UI8S9He5XuBRbawAdatrQEAi30Aks2+LM8WeCbalVZkWNylvJ+dqJnzVb+OHlSoKW8nPCP7Rd+CcZ2DdWAGqJ2CBFOphgywFFCFBNtfAbGtNPBCwxvygHeYMZMY9ZboBqwq/pVrsbgN5tkv152ODlbMfiqwGMBgxa4Exz3QhovRIUp6acqZmQzRq0ypDXS2TPLT02YIkQETnOE445oOGxOmXAqUJNNG7XgupMjPq2ua9asrj5yY/yuKteO1Kx0YNJTufrirLe1mZnat7OL6rnUdCWenpW6I8mAnbsY8KWs1PuSovCW9A/Z25PQ24a7cNOqgmTkLmBMgh4THgc4b9k2IVv1/g/F5nGljwPLfOgHAzJzh45V/4+WenTzmMtR5Z7us2Tys909UHqrPY7KbckoxRvRHhmVc3cJGE97uml0R1S0jdULVl7EvZtDFVBF35N9cEdjpgmAiOlFZ+Dtoh93+D3zzHr8RRNZQhnCNMNbcegOvpEwZoL+06cJQ07h+th3fZ/7PVbVC6ngTAV/KoLFuO6+2KFcU651gEb5ugPSIb1D+Xp8V4+k3sEIGnw5mYe4If4k1lFYr6SCzmM2EQ8iWtmwjnBI9kTwe1TlfAmXh7H02by9fW2gsjKwtv0aaURKil4OdV7rDL1MXIFNrhdxohcZXYTnq47WisrKitaObbf5+yvkLi5J6lCNZZ+B6GC38VNBZBDidSS/+mSvh6s+srgC8pyKMvDtt+de3c9fU76ZPfuM8ud4Kv0fyP/LqfepMT/3oZxSqpZaTa1DaQYLY8TFsHYbWYsPoRhRWfL5eSSQbhUGgGC3YLbVMk6PitTFNGpAsNrC6D1VNBKgBHMejaiuRWEWGgsSDBTJjqWIl8kJLlsaLJ2tXDr6xGfT85bM2Q06a46x2HTgvdnV8z5YDy/27J4zt6x2VtkzjoYpkq36kaBr4eQSg7tyiVweWubXZugtadl58ydapfbORfKsDTuZ0OBgx4cfdjCf5tbWNITnL120fdOi1RV1C3uKGzNdwYLcMvZ3BxoPyTOCD1XvXTp7U10gWCVmTV9b3r2z0SkGWovb2hp9I89O8a2smlyaO8muMU+dRmtzp60IzAoFpjLr1n388boLyf0dRvxhsHZ0qbWqDkwqvvpkj4l0fY6EIXRi5sQSrAvsVYwXRy4qJ2EVtD1AN7a0HWth9ymvL1xc3WTUKK/TAHA/bXDVtVWfOMfuGxGZv4Ln/jVr9jc3j1yMv0tndmyt9Vq88Y9gH1wtLX3KWjot5++jWHgAoZZkQ14wGQ20Fli71UmKJAy4xKMSTGbVdybW7FDDAut9XpD5AzWrYO7zQ8qffqF8+Ynd/clrHcdyxGy3a/3+mfNnzC/cBsveTjnTvXf1o6vzOlZw7WtqtdmPK/Errz/6NNtD72zmNOZfbmYdTGHfoofqI79Oc+R2n1lrnL6pOm0Up7kwxhTW12Amm7WYkXR2qYrF2AmgmbAsxZjwy1xpg/m1Je2vrp8v/nz2xpmlBg4E9hrMU341wVpTOh/OfmGvAnra8q6uctr60ZQHV3Q+WMQJykMj8ZsWn2QBOmmHMB+m5pDIpTFonYigiaKAhGEiAHF7EliVnQkjoLVIMPtJpBKHYd3A8GYH9jJzrWwmHx5Qjp7vDAX0suGRym1vtm/9W1/HyR8vczfMs6Sk8DSv855/5dlX9oQq52hT8syyp2rx5Id17IAyAM3wIjQPMOHzytEB64q6D5zT91yNbnx3V/nqnd017S9Y0605k3izoXLpsxde2n38yoOV9s1LcjwzNjbdX6asnBVaBj/6/DwKwPkpcqbDG7BnsXoSqWnUAmottYF6jMSdVyYZh3zVXCjwTiwwHH6sGuRiEHQGzuRX6whZkp123oy1BWE2mEfJ/tvIRtM4ZM5bDXiMsPMaAKOTyc5uL57rqyyc5y5JE5pm1i2S2iUX0CcaQ6lC6Zog7JqSqZmYlosl2K6pwNA84zRnQW6SaALYZQGW5lhCtU/W34N6o+bKfZ8cf3/Cl/+iTX3wBzpOY4mRkeNf3rptycGSshQWgGbYt5jFc2e0+DglIrwl6DVWQ7BuwaJ3Xk1J4VL5urnLl/Wf+gHU/hZoZdKNym6lG+I34FaNeZKcSpJIo2IeCVvpdsDGfKvzJnAwmeD37Ow65ZWwSowpgwX5T69s/rB55dP5BcpgDKFV8p7q2sn/1uc93bVzT/w6UrCqDTWvfCq/oCD/qZXNoUj8BL5Kp6GU017frfNXkAtiiyf/SOCEeLqnd8R/Ql9GlCRfctS6k5chvIBuQ1zCCjoCHL2DHNHIXxMJ3kQeO8lbsUXONeSfA5EjcG6/E+KdhN4bP04vBhdi883+BFBzQbxFbvZzQeY9LNBZc0FNfn5NwfDn6rCTnTw6R8o+gfpf5hCom33cRuiTlss3KHmZjD+BPN+5gXuA2ziS/Q73mLxUkpbKN/eqwz5uK0X9F3h2d1V4nGNgZGBgAOJd776+iue3+crAzc4AAje5Bfcg0xz9YHEOBiYQBQA8FQlFAHicY2BkYGBnAAGOPgaG//85+hkYGVCBMgBGGwNYAAAAeJxjYGBgYB8EmKOPgQEAQ04BfgAAAAAAAA4AaAB+AMwA4AECAUIBbAGYAcICGAJYArQC4AMwA7AD3gQwBJYE3AUkBWYFigYgBmYGtAbqB1gIEghYCG4IhAi2COh4nGNgZGBgUGYoZWBnAAEmIOYCQgaG/2A+AwAYCQG2AHicXZBNaoNAGIZfE5PQCKFQ2lUps2oXBfOzzAESyDKBQJdGR2NQR3QSSE/QE/QEPUUPUHqsvsrXjTMw83zPvPMNCuAWP3DQDAejdm1GjzwS7pMmwi75XngAD4/CQ/oX4TFe4Qt7uMMbOzjuDc0EmXCP/C7cJ38Iu+RP4QEe8CU8pP8WHmOPX2EPz87TPo202ey2OjlnQSXV/6arOjWFmvszMWtd6CqwOlKHq6ovycLaWMWVydXKFFZnmVFlZU46tP7R2nI5ncbi/dDkfDtFBA2DDXbYkhKc+V0Bqs5Zt9JM1HQGBRTm/EezTmZNKtpcAMs9Yu6AK9caF76zoLWIWcfMGOSkVduvSWechqZsz040Ib2PY3urxBJTzriT95lipz+TN1fmAAAAeJxtkMl2wjAMRfOAhABlKm2h80C3+ajgCKKDY6cegP59TYBzukAL+z1Zsq8ctaJTTKPrsUQLbXQQI0EXKXroY4AbDDHCGBNMcYsZ7nCPB8yxwCOe8IwXvOIN7/jAJ76wxHfUqWX+OzgumWAjJMV17i0Ndlr6irLKO+qftdT7i6y4uFSUvCknay+lFYZIZaQcmfH/xIFdYn98bqhra1aKTM/6lWMnyaYirx1rFUQZFBkb2zJUtoXeJCeg0WnLtHeSFc3OtrnozNwqi0TkSpBMDB1nSde5oJXW23hTS2/T0LilglXX7dmFVxLnq5U0vYATHFk3zX3BOisoQHNDFDeZnqKDy9hRNawN7Vh727hFzcJ5c8TILrKZfH7tIPxAFP0BpLeJPA==) format("woff");font-weight:400;font-style:normal}.vjs-icon-play,.video-js .vjs-play-control .vjs-icon-placeholder,.video-js .vjs-big-play-button .vjs-icon-placeholder:before{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-play:before,.video-js .vjs-play-control .vjs-icon-placeholder:before,.video-js .vjs-big-play-button .vjs-icon-placeholder:before{content:"\\f101"}.vjs-icon-play-circle{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-play-circle:before{content:"\\f102"}.vjs-icon-pause,.video-js .vjs-play-control.vjs-playing .vjs-icon-placeholder{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-pause:before,.video-js .vjs-play-control.vjs-playing .vjs-icon-placeholder:before{content:"\\f103"}.vjs-icon-volume-mute,.video-js .vjs-mute-control.vjs-vol-0 .vjs-icon-placeholder{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-volume-mute:before,.video-js .vjs-mute-control.vjs-vol-0 .vjs-icon-placeholder:before{content:"\\f104"}.vjs-icon-volume-low,.video-js .vjs-mute-control.vjs-vol-1 .vjs-icon-placeholder{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-volume-low:before,.video-js .vjs-mute-control.vjs-vol-1 .vjs-icon-placeholder:before{content:"\\f105"}.vjs-icon-volume-mid,.video-js .vjs-mute-control.vjs-vol-2 .vjs-icon-placeholder{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-volume-mid:before,.video-js .vjs-mute-control.vjs-vol-2 .vjs-icon-placeholder:before{content:"\\f106"}.vjs-icon-volume-high,.video-js .vjs-mute-control .vjs-icon-placeholder{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-volume-high:before,.video-js .vjs-mute-control .vjs-icon-placeholder:before{content:"\\f107"}.vjs-icon-fullscreen-enter,.video-js .vjs-fullscreen-control .vjs-icon-placeholder{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-fullscreen-enter:before,.video-js .vjs-fullscreen-control .vjs-icon-placeholder:before{content:"\\f108"}.vjs-icon-fullscreen-exit,.video-js.vjs-fullscreen .vjs-fullscreen-control .vjs-icon-placeholder{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-fullscreen-exit:before,.video-js.vjs-fullscreen .vjs-fullscreen-control .vjs-icon-placeholder:before{content:"\\f109"}.vjs-icon-square{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-square:before{content:"\\f10a"}.vjs-icon-spinner{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-spinner:before{content:"\\f10b"}.vjs-icon-subtitles,.video-js .vjs-subs-caps-button .vjs-icon-placeholder,.video-js.video-js:lang(en-GB) .vjs-subs-caps-button .vjs-icon-placeholder,.video-js.video-js:lang(en-IE) .vjs-subs-caps-button .vjs-icon-placeholder,.video-js.video-js:lang(en-AU) .vjs-subs-caps-button .vjs-icon-placeholder,.video-js.video-js:lang(en-NZ) .vjs-subs-caps-button .vjs-icon-placeholder,.video-js .vjs-subtitles-button .vjs-icon-placeholder{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-subtitles:before,.video-js .vjs-subs-caps-button .vjs-icon-placeholder:before,.video-js.video-js:lang(en-GB) .vjs-subs-caps-button .vjs-icon-placeholder:before,.video-js.video-js:lang(en-IE) .vjs-subs-caps-button .vjs-icon-placeholder:before,.video-js.video-js:lang(en-AU) .vjs-subs-caps-button .vjs-icon-placeholder:before,.video-js.video-js:lang(en-NZ) .vjs-subs-caps-button .vjs-icon-placeholder:before,.video-js .vjs-subtitles-button .vjs-icon-placeholder:before{content:"\\f10c"}.vjs-icon-captions,.video-js:lang(en) .vjs-subs-caps-button .vjs-icon-placeholder,.video-js:lang(fr-CA) .vjs-subs-caps-button .vjs-icon-placeholder,.video-js .vjs-captions-button .vjs-icon-placeholder{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-captions:before,.video-js:lang(en) .vjs-subs-caps-button .vjs-icon-placeholder:before,.video-js:lang(fr-CA) .vjs-subs-caps-button .vjs-icon-placeholder:before,.video-js .vjs-captions-button .vjs-icon-placeholder:before{content:"\\f10d"}.vjs-icon-chapters,.video-js .vjs-chapters-button .vjs-icon-placeholder{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-chapters:before,.video-js .vjs-chapters-button .vjs-icon-placeholder:before{content:"\\f10e"}.vjs-icon-share{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-share:before{content:"\\f10f"}.vjs-icon-cog{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-cog:before{content:"\\f110"}.vjs-icon-circle,.vjs-seek-to-live-control .vjs-icon-placeholder,.video-js .vjs-volume-level,.video-js .vjs-play-progress{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-circle:before,.vjs-seek-to-live-control .vjs-icon-placeholder:before,.video-js .vjs-volume-level:before,.video-js .vjs-play-progress:before{content:"\\f111"}.vjs-icon-circle-outline{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-circle-outline:before{content:"\\f112"}.vjs-icon-circle-inner-circle{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-circle-inner-circle:before{content:"\\f113"}.vjs-icon-hd{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-hd:before{content:"\\f114"}.vjs-icon-cancel,.video-js .vjs-control.vjs-close-button .vjs-icon-placeholder{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-cancel:before,.video-js .vjs-control.vjs-close-button .vjs-icon-placeholder:before{content:"\\f115"}.vjs-icon-replay,.video-js .vjs-play-control.vjs-ended .vjs-icon-placeholder{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-replay:before,.video-js .vjs-play-control.vjs-ended .vjs-icon-placeholder:before{content:"\\f116"}.vjs-icon-facebook{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-facebook:before{content:"\\f117"}.vjs-icon-gplus{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-gplus:before{content:"\\f118"}.vjs-icon-linkedin{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-linkedin:before{content:"\\f119"}.vjs-icon-twitter{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-twitter:before{content:"\\f11a"}.vjs-icon-tumblr{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-tumblr:before{content:"\\f11b"}.vjs-icon-pinterest{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-pinterest:before{content:"\\f11c"}.vjs-icon-audio-description,.video-js .vjs-descriptions-button .vjs-icon-placeholder{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-audio-description:before,.video-js .vjs-descriptions-button .vjs-icon-placeholder:before{content:"\\f11d"}.vjs-icon-audio,.video-js .vjs-audio-button .vjs-icon-placeholder{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-audio:before,.video-js .vjs-audio-button .vjs-icon-placeholder:before{content:"\\f11e"}.vjs-icon-next-item{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-next-item:before{content:"\\f11f"}.vjs-icon-previous-item{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-previous-item:before{content:"\\f120"}.vjs-icon-picture-in-picture-enter,.video-js .vjs-picture-in-picture-control .vjs-icon-placeholder{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-picture-in-picture-enter:before,.video-js .vjs-picture-in-picture-control .vjs-icon-placeholder:before{content:"\\f121"}.vjs-icon-picture-in-picture-exit,.video-js.vjs-picture-in-picture .vjs-picture-in-picture-control .vjs-icon-placeholder{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-picture-in-picture-exit:before,.video-js.vjs-picture-in-picture .vjs-picture-in-picture-control .vjs-icon-placeholder:before{content:"\\f122"}.video-js{display:block;vertical-align:top;box-sizing:border-box;color:#fff;background-color:#000;position:relative;padding:0;font-size:10px;line-height:1;font-weight:400;font-style:normal;font-family:Arial,Helvetica,sans-serif;word-break:initial}.video-js:-moz-full-screen{position:absolute}.video-js:-webkit-full-screen{width:100%!important;height:100%!important}.video-js[tabindex="-1"]{outline:none}.video-js *,.video-js *:before,.video-js *:after{box-sizing:inherit}.video-js ul{font-family:inherit;font-size:inherit;line-height:inherit;list-style-position:outside;margin:0}.video-js.vjs-fluid,.video-js.vjs-16-9,.video-js.vjs-4-3,.video-js.vjs-9-16,.video-js.vjs-1-1{width:100%;max-width:100%}.video-js.vjs-fluid:not(.vjs-audio-only-mode),.video-js.vjs-16-9:not(.vjs-audio-only-mode),.video-js.vjs-4-3:not(.vjs-audio-only-mode),.video-js.vjs-9-16:not(.vjs-audio-only-mode),.video-js.vjs-1-1:not(.vjs-audio-only-mode){height:0}.video-js.vjs-16-9:not(.vjs-audio-only-mode){padding-top:56.25%}.video-js.vjs-4-3:not(.vjs-audio-only-mode){padding-top:75%}.video-js.vjs-9-16:not(.vjs-audio-only-mode){padding-top:177.7777777778%}.video-js.vjs-1-1:not(.vjs-audio-only-mode){padding-top:100%}.video-js.vjs-fill:not(.vjs-audio-only-mode){width:100%;height:100%}.video-js .vjs-tech{position:absolute;top:0;left:0;width:100%;height:100%}.video-js.vjs-audio-only-mode .vjs-tech{display:none}body.vjs-full-window{padding:0;margin:0;height:100%}.vjs-full-window .video-js.vjs-fullscreen{position:fixed;overflow:hidden;z-index:1000;inset:0}.video-js.vjs-fullscreen:not(.vjs-ios-native-fs){width:100%!important;height:100%!important;padding-top:0!important}.video-js.vjs-fullscreen.vjs-user-inactive{cursor:none}.vjs-hidden{display:none!important}.vjs-disabled{opacity:.5;cursor:default}.video-js .vjs-offscreen{height:1px;left:-9999px;position:absolute;top:0;width:1px}.vjs-lock-showing{display:block!important;opacity:1!important;visibility:visible!important}.vjs-no-js{padding:20px;color:#fff;background-color:#000;font-size:18px;font-family:Arial,Helvetica,sans-serif;text-align:center;width:300px;height:150px;margin:0 auto}.vjs-no-js a,.vjs-no-js a:visited{color:#66a8cc}.video-js .vjs-big-play-button{font-size:3em;line-height:1.5em;height:1.63332em;width:3em;display:block;position:absolute;top:10px;left:10px;padding:0;cursor:pointer;opacity:1;border:.06666em solid #fff;background-color:#2b333f;background-color:#2b333fb3;border-radius:.3em;transition:all .4s}.vjs-big-play-centered .vjs-big-play-button{top:50%;left:50%;margin-top:-.81666em;margin-left:-1.5em}.video-js:hover .vjs-big-play-button,.video-js .vjs-big-play-button:focus{border-color:#fff;background-color:#73859f;background-color:#73859f80;transition:all 0s}.vjs-controls-disabled .vjs-big-play-button,.vjs-has-started .vjs-big-play-button,.vjs-using-native-controls .vjs-big-play-button,.vjs-error .vjs-big-play-button{display:none}.vjs-has-started.vjs-paused.vjs-show-big-play-button-on-pause .vjs-big-play-button{display:block}.video-js button{background:none;border:none;color:inherit;display:inline-block;font-size:inherit;line-height:inherit;text-transform:none;text-decoration:none;transition:none;-webkit-appearance:none;appearance:none}.vjs-control .vjs-button{width:100%;height:100%}.video-js .vjs-control.vjs-close-button{cursor:pointer;height:3em;position:absolute;right:0;top:.5em;z-index:2}.video-js .vjs-modal-dialog{background:rgba(0,0,0,.8);background:linear-gradient(180deg,rgba(0,0,0,.8),rgba(255,255,255,0));overflow:auto}.video-js .vjs-modal-dialog>*{box-sizing:border-box}.vjs-modal-dialog .vjs-modal-dialog-content{font-size:1.2em;line-height:1.5;padding:20px 24px;z-index:1}.vjs-menu-button{cursor:pointer}.vjs-menu-button.vjs-disabled{cursor:default}.vjs-workinghover .vjs-menu-button.vjs-disabled:hover .vjs-menu{display:none}.vjs-menu .vjs-menu-content{display:block;padding:0;margin:0;font-family:Arial,Helvetica,sans-serif;overflow:auto}.vjs-menu .vjs-menu-content>*{box-sizing:border-box}.vjs-scrubbing .vjs-control.vjs-menu-button:hover .vjs-menu{display:none}.vjs-menu li{list-style:none;margin:0;padding:.2em 0;line-height:1.4em;font-size:1.2em;text-align:center;text-transform:lowercase}.vjs-menu li.vjs-menu-item:focus,.vjs-menu li.vjs-menu-item:hover,.js-focus-visible .vjs-menu li.vjs-menu-item:hover{background-color:#73859f;background-color:#73859f80}.vjs-menu li.vjs-selected,.vjs-menu li.vjs-selected:focus,.vjs-menu li.vjs-selected:hover,.js-focus-visible .vjs-menu li.vjs-selected:hover{background-color:#fff;color:#2b333f}.video-js .vjs-menu *:not(.vjs-selected):focus:not(:focus-visible),.js-focus-visible .vjs-menu *:not(.vjs-selected):focus:not(.focus-visible){background:none}.vjs-menu li.vjs-menu-title{text-align:center;text-transform:uppercase;font-size:1em;line-height:2em;padding:0;margin:0 0 .3em;font-weight:700;cursor:default}.vjs-menu-button-popup .vjs-menu{display:none;position:absolute;bottom:0;width:10em;left:-3em;height:0em;margin-bottom:1.5em;border-top-color:#2b333fb3}.vjs-menu-button-popup .vjs-menu .vjs-menu-content{background-color:#2b333f;background-color:#2b333fb3;position:absolute;width:100%;bottom:1.5em;max-height:15em}.vjs-layout-tiny .vjs-menu-button-popup .vjs-menu .vjs-menu-content,.vjs-layout-x-small .vjs-menu-button-popup .vjs-menu .vjs-menu-content{max-height:5em}.vjs-layout-small .vjs-menu-button-popup .vjs-menu .vjs-menu-content{max-height:10em}.vjs-layout-medium .vjs-menu-button-popup .vjs-menu .vjs-menu-content{max-height:14em}.vjs-layout-large .vjs-menu-button-popup .vjs-menu .vjs-menu-content,.vjs-layout-x-large .vjs-menu-button-popup .vjs-menu .vjs-menu-content,.vjs-layout-huge .vjs-menu-button-popup .vjs-menu .vjs-menu-content{max-height:25em}.vjs-workinghover .vjs-menu-button-popup.vjs-hover .vjs-menu,.vjs-menu-button-popup .vjs-menu.vjs-lock-showing{display:block}.video-js .vjs-menu-button-inline{transition:all .4s;overflow:hidden}.video-js .vjs-menu-button-inline:before{width:2.222222222em}.video-js .vjs-menu-button-inline:hover,.video-js .vjs-menu-button-inline:focus,.video-js .vjs-menu-button-inline.vjs-slider-active,.video-js.vjs-no-flex .vjs-menu-button-inline{width:12em}.vjs-menu-button-inline .vjs-menu{opacity:0;height:100%;width:auto;position:absolute;left:4em;top:0;padding:0;margin:0;transition:all .4s}.vjs-menu-button-inline:hover .vjs-menu,.vjs-menu-button-inline:focus .vjs-menu,.vjs-menu-button-inline.vjs-slider-active .vjs-menu{display:block;opacity:1}.vjs-no-flex .vjs-menu-button-inline .vjs-menu{display:block;opacity:1;position:relative;width:auto}.vjs-no-flex .vjs-menu-button-inline:hover .vjs-menu,.vjs-no-flex .vjs-menu-button-inline:focus .vjs-menu,.vjs-no-flex .vjs-menu-button-inline.vjs-slider-active .vjs-menu{width:auto}.vjs-menu-button-inline .vjs-menu-content{width:auto;height:100%;margin:0;overflow:hidden}.video-js .vjs-control-bar{display:none;width:100%;position:absolute;bottom:0;left:0;right:0;height:3em;background-color:#2b333f;background-color:#2b333fb3}.vjs-has-started .vjs-control-bar,.vjs-audio-only-mode .vjs-control-bar{display:flex;visibility:visible;opacity:1;transition:visibility .1s,opacity .1s}.vjs-has-started.vjs-user-inactive.vjs-playing .vjs-control-bar{visibility:visible;opacity:0;pointer-events:none;transition:visibility 1s,opacity 1s}.vjs-controls-disabled .vjs-control-bar,.vjs-using-native-controls .vjs-control-bar,.vjs-error .vjs-control-bar{display:none!important}.vjs-audio.vjs-has-started.vjs-user-inactive.vjs-playing .vjs-control-bar,.vjs-audio-only-mode.vjs-has-started.vjs-user-inactive.vjs-playing .vjs-control-bar{opacity:1;visibility:visible;pointer-events:auto}.vjs-has-started.vjs-no-flex .vjs-control-bar{display:table}.video-js .vjs-control{position:relative;text-align:center;margin:0;padding:0;height:100%;width:4em;flex:none}.video-js .vjs-control.vjs-visible-text{width:auto;padding-left:1em;padding-right:1em}.vjs-button>.vjs-icon-placeholder:before{font-size:1.8em;line-height:1.67}.vjs-button>.vjs-icon-placeholder{display:block}.video-js .vjs-control:focus:before,.video-js .vjs-control:hover:before,.video-js .vjs-control:focus{text-shadow:0em 0em 1em white}.video-js *:not(.vjs-visible-text)>.vjs-control-text{border:0;clip:rect(0 0 0 0);height:1px;overflow:hidden;padding:0;position:absolute;width:1px}.vjs-no-flex .vjs-control{display:table-cell;vertical-align:middle}.video-js .vjs-custom-control-spacer{display:none}.video-js .vjs-progress-control{cursor:pointer;flex:auto;display:flex;align-items:center;min-width:4em;touch-action:none}.video-js .vjs-progress-control.disabled{cursor:default}.vjs-live .vjs-progress-control{display:none}.vjs-liveui .vjs-progress-control{display:flex;align-items:center}.vjs-no-flex .vjs-progress-control{width:auto}.video-js .vjs-progress-holder{flex:auto;transition:all .2s;height:.3em}.video-js .vjs-progress-control .vjs-progress-holder{margin:0 10px}.video-js .vjs-progress-control:hover .vjs-progress-holder{font-size:1.6666666667em}.video-js .vjs-progress-control:hover .vjs-progress-holder.disabled{font-size:1em}.video-js .vjs-progress-holder .vjs-play-progress,.video-js .vjs-progress-holder .vjs-load-progress,.video-js .vjs-progress-holder .vjs-load-progress div{position:absolute;display:block;height:100%;margin:0;padding:0;width:0}.video-js .vjs-play-progress{background-color:#fff}.video-js .vjs-play-progress:before{font-size:.9em;position:absolute;right:-.5em;top:-.3333333333em;z-index:1}.video-js .vjs-load-progress{background:rgba(115,133,159,.5)}.video-js .vjs-load-progress div{background:rgba(115,133,159,.75)}.video-js .vjs-time-tooltip{background-color:#fff;background-color:#fffc;border-radius:.3em;color:#000;float:right;font-family:Arial,Helvetica,sans-serif;font-size:1em;padding:6px 8px 8px;pointer-events:none;position:absolute;top:-3.4em;visibility:hidden;z-index:1}.video-js .vjs-progress-holder:focus .vjs-time-tooltip{display:none}.video-js .vjs-progress-control:hover .vjs-time-tooltip,.video-js .vjs-progress-control:hover .vjs-progress-holder:focus .vjs-time-tooltip{display:block;font-size:.6em;visibility:visible}.video-js .vjs-progress-control.disabled:hover .vjs-time-tooltip{font-size:1em}.video-js .vjs-progress-control .vjs-mouse-display{display:none;position:absolute;width:1px;height:100%;background-color:#000;z-index:1}.vjs-no-flex .vjs-progress-control .vjs-mouse-display{z-index:0}.video-js .vjs-progress-control:hover .vjs-mouse-display{display:block}.video-js.vjs-user-inactive .vjs-progress-control .vjs-mouse-display{visibility:hidden;opacity:0;transition:visibility 1s,opacity 1s}.video-js.vjs-user-inactive.vjs-no-flex .vjs-progress-control .vjs-mouse-display{display:none}.vjs-mouse-display .vjs-time-tooltip{color:#fff;background-color:#000;background-color:#000c}.video-js .vjs-slider{position:relative;cursor:pointer;padding:0;margin:0 .45em;-webkit-touch-callout:none;-webkit-user-select:none;user-select:none;background-color:#73859f;background-color:#73859f80}.video-js .vjs-slider.disabled{cursor:default}.video-js .vjs-slider:focus{text-shadow:0em 0em 1em white;box-shadow:0 0 1em #fff}.video-js .vjs-mute-control{cursor:pointer;flex:none}.video-js .vjs-volume-control{cursor:pointer;margin-right:1em;display:flex}.video-js .vjs-volume-control.vjs-volume-horizontal{width:5em}.video-js .vjs-volume-panel .vjs-volume-control{visibility:visible;opacity:0;width:1px;height:1px;margin-left:-1px}.video-js .vjs-volume-panel{transition:width 1s}.video-js .vjs-volume-panel.vjs-hover .vjs-volume-control,.video-js .vjs-volume-panel:active .vjs-volume-control,.video-js .vjs-volume-panel:focus .vjs-volume-control,.video-js .vjs-volume-panel .vjs-volume-control:active,.video-js .vjs-volume-panel.vjs-hover .vjs-mute-control~.vjs-volume-control,.video-js .vjs-volume-panel .vjs-volume-control.vjs-slider-active{visibility:visible;opacity:1;position:relative;transition:visibility .1s,opacity .1s,height .1s,width .1s,left 0s,top 0s}.video-js .vjs-volume-panel.vjs-hover .vjs-volume-control.vjs-volume-horizontal,.video-js .vjs-volume-panel:active .vjs-volume-control.vjs-volume-horizontal,.video-js .vjs-volume-panel:focus .vjs-volume-control.vjs-volume-horizontal,.video-js .vjs-volume-panel .vjs-volume-control:active.vjs-volume-horizontal,.video-js .vjs-volume-panel.vjs-hover .vjs-mute-control~.vjs-volume-control.vjs-volume-horizontal,.video-js .vjs-volume-panel .vjs-volume-control.vjs-slider-active.vjs-volume-horizontal{width:5em;height:3em;margin-right:0}.video-js .vjs-volume-panel.vjs-hover .vjs-volume-control.vjs-volume-vertical,.video-js .vjs-volume-panel:active .vjs-volume-control.vjs-volume-vertical,.video-js .vjs-volume-panel:focus .vjs-volume-control.vjs-volume-vertical,.video-js .vjs-volume-panel .vjs-volume-control:active.vjs-volume-vertical,.video-js .vjs-volume-panel.vjs-hover .vjs-mute-control~.vjs-volume-control.vjs-volume-vertical,.video-js .vjs-volume-panel .vjs-volume-control.vjs-slider-active.vjs-volume-vertical{left:-3.5em;transition:left 0s}.video-js .vjs-volume-panel.vjs-volume-panel-horizontal.vjs-hover,.video-js .vjs-volume-panel.vjs-volume-panel-horizontal:active,.video-js .vjs-volume-panel.vjs-volume-panel-horizontal.vjs-slider-active{width:10em;transition:width .1s}.video-js .vjs-volume-panel.vjs-volume-panel-horizontal.vjs-mute-toggle-only{width:4em}.video-js .vjs-volume-panel .vjs-volume-control.vjs-volume-vertical{height:8em;width:3em;left:-3000em;transition:visibility 1s,opacity 1s,height 1s 1s,width 1s 1s,left 1s 1s,top 1s 1s}.video-js .vjs-volume-panel .vjs-volume-control.vjs-volume-horizontal{transition:visibility 1s,opacity 1s,height 1s 1s,width 1s,left 1s 1s,top 1s 1s}.video-js.vjs-no-flex .vjs-volume-panel .vjs-volume-control.vjs-volume-horizontal{width:5em;height:3em;visibility:visible;opacity:1;position:relative;transition:none}.video-js.vjs-no-flex .vjs-volume-control.vjs-volume-vertical,.video-js.vjs-no-flex .vjs-volume-panel .vjs-volume-control.vjs-volume-vertical{position:absolute;bottom:3em;left:.5em}.video-js .vjs-volume-panel{display:flex}.video-js .vjs-volume-bar{margin:1.35em .45em}.vjs-volume-bar.vjs-slider-horizontal{width:5em;height:.3em}.vjs-volume-bar.vjs-slider-vertical{width:.3em;height:5em;margin:1.35em auto}.video-js .vjs-volume-level{position:absolute;bottom:0;left:0;background-color:#fff}.video-js .vjs-volume-level:before{position:absolute;font-size:.9em;z-index:1}.vjs-slider-vertical .vjs-volume-level{width:.3em}.vjs-slider-vertical .vjs-volume-level:before{top:-.5em;left:-.3em;z-index:1}.vjs-slider-horizontal .vjs-volume-level{height:.3em}.vjs-slider-horizontal .vjs-volume-level:before{top:-.3em;right:-.5em}.video-js .vjs-volume-panel.vjs-volume-panel-vertical{width:4em}.vjs-volume-bar.vjs-slider-vertical .vjs-volume-level{height:100%}.vjs-volume-bar.vjs-slider-horizontal .vjs-volume-level{width:100%}.video-js .vjs-volume-vertical{width:3em;height:8em;bottom:8em;background-color:#2b333f;background-color:#2b333fb3}.video-js .vjs-volume-horizontal .vjs-menu{left:-2em}.video-js .vjs-volume-tooltip{background-color:#fff;background-color:#fffc;border-radius:.3em;color:#000;float:right;font-family:Arial,Helvetica,sans-serif;font-size:1em;padding:6px 8px 8px;pointer-events:none;position:absolute;top:-3.4em;visibility:hidden;z-index:1}.video-js .vjs-volume-control:hover .vjs-volume-tooltip,.video-js .vjs-volume-control:hover .vjs-progress-holder:focus .vjs-volume-tooltip{display:block;font-size:1em;visibility:visible}.video-js .vjs-volume-vertical:hover .vjs-volume-tooltip,.video-js .vjs-volume-vertical:hover .vjs-progress-holder:focus .vjs-volume-tooltip{left:1em;top:-12px}.video-js .vjs-volume-control.disabled:hover .vjs-volume-tooltip{font-size:1em}.video-js .vjs-volume-control .vjs-mouse-display{display:none;position:absolute;width:100%;height:1px;background-color:#000;z-index:1}.video-js .vjs-volume-horizontal .vjs-mouse-display{width:1px;height:100%}.vjs-no-flex .vjs-volume-control .vjs-mouse-display{z-index:0}.video-js .vjs-volume-control:hover .vjs-mouse-display{display:block}.video-js.vjs-user-inactive .vjs-volume-control .vjs-mouse-display{visibility:hidden;opacity:0;transition:visibility 1s,opacity 1s}.video-js.vjs-user-inactive.vjs-no-flex .vjs-volume-control .vjs-mouse-display{display:none}.vjs-mouse-display .vjs-volume-tooltip{color:#fff;background-color:#000;background-color:#000c}.vjs-poster{display:inline-block;vertical-align:middle;background-repeat:no-repeat;background-position:50% 50%;background-size:contain;background-color:#000;cursor:pointer;margin:0;padding:0;position:absolute;inset:0;height:100%}.vjs-has-started .vjs-poster,.vjs-using-native-controls .vjs-poster{display:none}.vjs-audio.vjs-has-started .vjs-poster,.vjs-has-started.vjs-audio-poster-mode .vjs-poster{display:block}.video-js .vjs-live-control{display:flex;align-items:flex-start;flex:auto;font-size:1em;line-height:3em}.vjs-no-flex .vjs-live-control{display:table-cell;width:auto;text-align:left}.video-js:not(.vjs-live) .vjs-live-control,.video-js.vjs-liveui .vjs-live-control{display:none}.video-js .vjs-seek-to-live-control{align-items:center;cursor:pointer;flex:none;display:inline-flex;height:100%;padding-left:.5em;padding-right:.5em;font-size:1em;line-height:3em;width:auto;min-width:4em}.vjs-no-flex .vjs-seek-to-live-control{display:table-cell;width:auto;text-align:left}.video-js.vjs-live:not(.vjs-liveui) .vjs-seek-to-live-control,.video-js:not(.vjs-live) .vjs-seek-to-live-control{display:none}.vjs-seek-to-live-control.vjs-control.vjs-at-live-edge{cursor:auto}.vjs-seek-to-live-control .vjs-icon-placeholder{margin-right:.5em;color:#888}.vjs-seek-to-live-control.vjs-control.vjs-at-live-edge .vjs-icon-placeholder{color:red}.video-js .vjs-time-control{flex:none;font-size:1em;line-height:3em;min-width:2em;width:auto;padding-left:1em;padding-right:1em}.vjs-live .vjs-time-control,.video-js .vjs-current-time,.vjs-no-flex .vjs-current-time,.video-js .vjs-duration,.vjs-no-flex .vjs-duration{display:none}.vjs-time-divider{display:none;line-height:3em}.vjs-live .vjs-time-divider{display:none}.video-js .vjs-play-control{cursor:pointer}.video-js .vjs-play-control .vjs-icon-placeholder{flex:none}.vjs-text-track-display{position:absolute;inset:0 0 3em;pointer-events:none}.video-js.vjs-controls-disabled .vjs-text-track-display,.video-js.vjs-user-inactive.vjs-playing .vjs-text-track-display{bottom:1em}.video-js .vjs-text-track{font-size:1.4em;text-align:center;margin-bottom:.1em}.vjs-subtitles{color:#fff}.vjs-captions{color:#fc6}.vjs-tt-cue{display:block}video::-webkit-media-text-track-display{transform:translateY(-3em)}.video-js.vjs-controls-disabled video::-webkit-media-text-track-display,.video-js.vjs-user-inactive.vjs-playing video::-webkit-media-text-track-display{transform:translateY(-1.5em)}.video-js .vjs-picture-in-picture-control{cursor:pointer;flex:none}.video-js.vjs-audio-only-mode .vjs-picture-in-picture-control{display:none}.video-js .vjs-fullscreen-control{cursor:pointer;flex:none}.video-js.vjs-audio-only-mode .vjs-fullscreen-control{display:none}.vjs-playback-rate>.vjs-menu-button,.vjs-playback-rate .vjs-playback-rate-value{position:absolute;top:0;left:0;width:100%;height:100%}.vjs-playback-rate .vjs-playback-rate-value{pointer-events:none;font-size:1.5em;line-height:2;text-align:center}.vjs-playback-rate .vjs-menu{width:4em;left:0}.vjs-error .vjs-error-display .vjs-modal-dialog-content{font-size:1.4em;text-align:center}.vjs-error .vjs-error-display:before{color:#fff;content:"X";font-family:Arial,Helvetica,sans-serif;font-size:4em;left:0;line-height:1;margin-top:-.5em;position:absolute;text-shadow:.05em .05em .1em #000;text-align:center;top:50%;vertical-align:middle;width:100%}.vjs-loading-spinner{display:none;position:absolute;top:50%;left:50%;margin:-25px 0 0 -25px;opacity:.85;text-align:left;border:6px solid rgba(43,51,63,.7);box-sizing:border-box;background-clip:padding-box;width:50px;height:50px;border-radius:25px;visibility:hidden}.vjs-seeking .vjs-loading-spinner,.vjs-waiting .vjs-loading-spinner{display:block;animation:vjs-spinner-show 0s linear .3s forwards}.vjs-loading-spinner:before,.vjs-loading-spinner:after{content:"";position:absolute;margin:-6px;box-sizing:inherit;width:inherit;height:inherit;border-radius:inherit;opacity:1;border:inherit;border-color:transparent;border-top-color:#fff}.vjs-seeking .vjs-loading-spinner:before,.vjs-seeking .vjs-loading-spinner:after,.vjs-waiting .vjs-loading-spinner:before,.vjs-waiting .vjs-loading-spinner:after{animation:vjs-spinner-spin 1.1s cubic-bezier(.6,.2,0,.8) infinite,vjs-spinner-fade 1.1s linear infinite}.vjs-seeking .vjs-loading-spinner:before,.vjs-waiting .vjs-loading-spinner:before{border-top-color:#fff}.vjs-seeking .vjs-loading-spinner:after,.vjs-waiting .vjs-loading-spinner:after{border-top-color:#fff;animation-delay:.44s}@keyframes vjs-spinner-show{to{visibility:visible}}@keyframes vjs-spinner-spin{to{transform:rotate(360deg)}}@keyframes vjs-spinner-fade{0%{border-top-color:#73859f}20%{border-top-color:#73859f}35%{border-top-color:#fff}60%{border-top-color:#73859f}to{border-top-color:#73859f}}.video-js.vjs-audio-only-mode .vjs-captions-button{display:none}.vjs-chapters-button .vjs-menu ul{width:24em}.video-js.vjs-audio-only-mode .vjs-descriptions-button{display:none}.video-js .vjs-subs-caps-button+.vjs-menu .vjs-captions-menu-item .vjs-menu-item-text .vjs-icon-placeholder{vertical-align:middle;display:inline-block;margin-bottom:-.1em}.video-js .vjs-subs-caps-button+.vjs-menu .vjs-captions-menu-item .vjs-menu-item-text .vjs-icon-placeholder:before{font-family:VideoJS;content:"\\f10d";font-size:1.5em;line-height:inherit}.video-js.vjs-audio-only-mode .vjs-subs-caps-button{display:none}.video-js .vjs-audio-button+.vjs-menu .vjs-main-desc-menu-item .vjs-menu-item-text .vjs-icon-placeholder{vertical-align:middle;display:inline-block;margin-bottom:-.1em}.video-js .vjs-audio-button+.vjs-menu .vjs-main-desc-menu-item .vjs-menu-item-text .vjs-icon-placeholder:before{font-family:VideoJS;content:" \\f11d";font-size:1.5em;line-height:inherit}.video-js.vjs-layout-small .vjs-current-time,.video-js.vjs-layout-small .vjs-time-divider,.video-js.vjs-layout-small .vjs-duration,.video-js.vjs-layout-small .vjs-remaining-time,.video-js.vjs-layout-small .vjs-playback-rate,.video-js.vjs-layout-small .vjs-volume-control,.video-js.vjs-layout-x-small .vjs-current-time,.video-js.vjs-layout-x-small .vjs-time-divider,.video-js.vjs-layout-x-small .vjs-duration,.video-js.vjs-layout-x-small .vjs-remaining-time,.video-js.vjs-layout-x-small .vjs-playback-rate,.video-js.vjs-layout-x-small .vjs-volume-control,.video-js.vjs-layout-tiny .vjs-current-time,.video-js.vjs-layout-tiny .vjs-time-divider,.video-js.vjs-layout-tiny .vjs-duration,.video-js.vjs-layout-tiny .vjs-remaining-time,.video-js.vjs-layout-tiny .vjs-playback-rate,.video-js.vjs-layout-tiny .vjs-volume-control{display:none}.video-js.vjs-layout-small .vjs-volume-panel.vjs-volume-panel-horizontal:hover,.video-js.vjs-layout-small .vjs-volume-panel.vjs-volume-panel-horizontal:active,.video-js.vjs-layout-small .vjs-volume-panel.vjs-volume-panel-horizontal.vjs-slider-active,.video-js.vjs-layout-small .vjs-volume-panel.vjs-volume-panel-horizontal.vjs-hover,.video-js.vjs-layout-x-small .vjs-volume-panel.vjs-volume-panel-horizontal:hover,.video-js.vjs-layout-x-small .vjs-volume-panel.vjs-volume-panel-horizontal:active,.video-js.vjs-layout-x-small .vjs-volume-panel.vjs-volume-panel-horizontal.vjs-slider-active,.video-js.vjs-layout-x-small .vjs-volume-panel.vjs-volume-panel-horizontal.vjs-hover,.video-js.vjs-layout-tiny .vjs-volume-panel.vjs-volume-panel-horizontal:hover,.video-js.vjs-layout-tiny .vjs-volume-panel.vjs-volume-panel-horizontal:active,.video-js.vjs-layout-tiny .vjs-volume-panel.vjs-volume-panel-horizontal.vjs-slider-active,.video-js.vjs-layout-tiny .vjs-volume-panel.vjs-volume-panel-horizontal.vjs-hover{width:auto;width:initial}.video-js.vjs-layout-x-small .vjs-progress-control,.video-js.vjs-layout-tiny .vjs-progress-control{display:none}.video-js.vjs-layout-x-small .vjs-custom-control-spacer{flex:auto;display:block}.video-js.vjs-layout-x-small.vjs-no-flex .vjs-custom-control-spacer{width:auto}.vjs-modal-dialog.vjs-text-track-settings{background-color:#2b333f;background-color:#2b333fbf;color:#fff;height:70%}.vjs-text-track-settings .vjs-modal-dialog-content{display:table}.vjs-text-track-settings .vjs-track-settings-colors,.vjs-text-track-settings .vjs-track-settings-font,.vjs-text-track-settings .vjs-track-settings-controls{display:table-cell}.vjs-text-track-settings .vjs-track-settings-controls{text-align:right;vertical-align:bottom}@supports (display: grid){.vjs-text-track-settings .vjs-modal-dialog-content{display:grid;grid-template-columns:1fr 1fr;grid-template-rows:1fr;padding:20px 24px 0}.vjs-track-settings-controls .vjs-default-button{margin-bottom:20px}.vjs-text-track-settings .vjs-track-settings-controls{grid-column:1/-1}.vjs-layout-small .vjs-text-track-settings .vjs-modal-dialog-content,.vjs-layout-x-small .vjs-text-track-settings .vjs-modal-dialog-content,.vjs-layout-tiny .vjs-text-track-settings .vjs-modal-dialog-content{grid-template-columns:1fr}}.vjs-track-setting>select{margin-right:1em;margin-bottom:.5em}.vjs-text-track-settings fieldset{margin:5px;padding:3px;border:none}.vjs-text-track-settings fieldset span{display:inline-block}.vjs-text-track-settings fieldset span>select{max-width:7.3em}.vjs-text-track-settings legend{color:#fff;margin:0 0 5px}.vjs-text-track-settings .vjs-label{position:absolute;clip:rect(1px 1px 1px 1px);clip:rect(1px,1px,1px,1px);display:block;margin:0 0 5px;padding:0;border:0;height:1px;width:1px;overflow:hidden}.vjs-track-settings-controls button:focus,.vjs-track-settings-controls button:active{outline-style:solid;outline-width:medium;background-image:linear-gradient(0deg,#fff 88%,#73859f 100%)}.vjs-track-settings-controls button:hover{color:#2b333fbf}.vjs-track-settings-controls button{background-color:#fff;background-image:linear-gradient(-180deg,#fff 88%,#73859f 100%);color:#2b333f;cursor:pointer;border-radius:2px}.vjs-track-settings-controls .vjs-default-button{margin-right:1em}@media print{.video-js>*:not(.vjs-tech):not(.vjs-poster){visibility:hidden}}.vjs-resize-manager{position:absolute;top:0;left:0;width:100%;height:100%;border:none;z-index:-1000}.js-focus-visible .video-js *:focus:not(.focus-visible){outline:none}.video-js *:focus:not(:focus-visible){outline:none}.vjs-theme-forest{--vjs-theme-forest--primary:#6fb04e;--vjs-theme-forest--secondary:#fff}.vjs-theme-forest.vjs-big-play-button:focus,.vjs-theme-forest:hover .vjs-big-play-button{background-color:transparent;background:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns=\'http://www.w3.org/2000/svg\' width=\'88\' height=\'88\' fill=\'%236fb04e\'%3E%3Cpath fill-rule=\'evenodd\' d=\'M44 88C19.738 88 0 68.262 0 44S19.738 0 44 0s44 19.738 44 44-19.738 44-44 44zm0-85C21.393 3 3 21.393 3 44c0 22.608 18.393 41 41 41s41-18.392 41-41C85 21.393 66.607 3 44 3zm16.063 43.898L39.629 60.741a3.496 3.496 0 01-3.604.194 3.492 3.492 0 01-1.859-3.092V30.158c0-1.299.712-2.483 1.859-3.092a3.487 3.487 0 013.604.194l20.433 13.843a3.497 3.497 0 01.001 5.795zm-1.683-3.311L37.946 29.744a.49.49 0 00-.276-.09.51.51 0 00-.239.062.483.483 0 00-.265.442v27.685c0 .262.166.389.265.442.1.053.299.118.515-.028L58.38 44.414A.489.489 0 0058.6 44a.49.49 0 00-.22-.413z\'/%3E%3C/svg%3E")}.vjs-theme-forest .vjs-big-play-button{width:88px;height:88px;background:none;background-repeat:no-repeat;background-position:50%;background:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns=\'http://www.w3.org/2000/svg\' width=\'88\' height=\'88\' fill=\'%23fff\'%3E%3Cpath fill-rule=\'evenodd\' d=\'M44 88C19.738 88 0 68.262 0 44S19.738 0 44 0s44 19.738 44 44-19.738 44-44 44zm0-85C21.393 3 3 21.393 3 44c0 22.608 18.393 41 41 41s41-18.392 41-41C85 21.393 66.607 3 44 3zm16.063 43.898L39.629 60.741a3.496 3.496 0 01-3.604.194 3.492 3.492 0 01-1.859-3.092V30.158c0-1.299.712-2.483 1.859-3.092a3.487 3.487 0 013.604.194l20.433 13.843a3.497 3.497 0 01.001 5.795zm-1.683-3.311L37.946 29.744a.49.49 0 00-.276-.09.51.51 0 00-.239.062.483.483 0 00-.265.442v27.685c0 .262.166.389.265.442.1.053.299.118.515-.028L58.38 44.414A.489.489 0 0058.6 44a.49.49 0 00-.22-.413z\'/%3E%3C/svg%3E");border:none;top:50%;left:50%;margin-top:-44px;margin-left:-44px;color:purple}.vjs-theme-forest .vjs-big-play-button .vjs-icon-placeholder{display:none}.vjs-theme-forest .vjs-button>.vjs-icon-placeholder:before{line-height:1.55}.vjs-theme-forest .vjs-control:not(.vjs-disabled):not(.vjs-time-control):hover{color:var(--vjs-theme-forest--primary);text-shadow:var(--vjs-theme-forest--secondary) 1px 0 10px}.vjs-theme-forest .vjs-control-bar{background:none;margin-bottom:1em;padding-left:1em;padding-right:1em}.vjs-theme-forest .vjs-play-control{font-size:.8em}.vjs-theme-forest .vjs-play-control .vjs-icon-placeholder:before{background-color:var(--vjs-theme-forest--secondary);height:1.5em;width:1.5em;margin-top:.2em;border-radius:1em;color:var(--vjs-theme-forest--primary)}.vjs-theme-forest .vjs-play-control:hover .vjs-icon-placeholder:before{background-color:var(--vjs-theme-forest--primary);color:var(--vjs-theme-forest--secondary)}.vjs-theme-forest .vjs-mute-control{display:none}.vjs-theme-forest .vjs-volume-panel{margin-left:.5em;margin-right:.5em;padding-top:.3em}.vjs-theme-forest .vjs-volume-bar.vjs-slider-horizontal,.vjs-theme-forest .vjs-volume-panel,.vjs-theme-forest .vjs-volume-panel.vjs-volume-panel-horizontal.vjs-slider-active,.vjs-theme-forest .vjs-volume-panel.vjs-volume-panel-horizontal:hover,.vjs-theme-forest .vjs-volume-panel:active .vjs-volume-control.vjs-volume-horizontal,.vjs-theme-forest .vjs-volume-panel:hover,.vjs-theme-forest .vjs-volume-panel:hover .vjs-volume-control.vjs-volume-horizontal{width:3em}.vjs-theme-forest .vjs-volume-level:before{font-size:1em}.vjs-theme-forest .vjs-volume-panel .vjs-volume-control{opacity:1;width:100%;height:100%}.vjs-theme-forest .vjs-volume-bar{background-color:transparent;margin:0}.vjs-theme-forest .vjs-slider-horizontal .vjs-volume-level{height:100%}.vjs-theme-forest .vjs-volume-bar.vjs-slider-horizontal{margin-top:0;margin-bottom:0;height:100%}.vjs-theme-forest .vjs-volume-bar:before{content:"";z-index:0;width:0;height:0;position:absolute;top:0;left:0;border-left:3em solid transparent;border-bottom:2em solid var(--vjs-theme-forest--primary);border-right:0 solid transparent;border-top:0 solid transparent}.vjs-theme-forest .vjs-volume-level{overflow:hidden;background-color:transparent}.vjs-theme-forest .vjs-volume-level:before{content:"";z-index:1;width:0;height:0;position:absolute;top:0;left:0;border-left:3em solid transparent;border-bottom:2em solid var(--vjs-theme-forest--secondary);border-right:0 solid transparent;border-top:0 solid transparent}.vjs-theme-forest .vjs-progress-control:hover .vjs-progress-holder{font-size:1em}.vjs-theme-forest .vjs-play-progress:before{display:none}.vjs-theme-forest .vjs-progress-holder{border-radius:.2em;height:.5em;margin:0}.vjs-theme-forest .vjs-load-progress,.vjs-theme-forest .vjs-load-progress div,.vjs-theme-forest .vjs-play-progress{border-radius:.2em}.vjs-theme-forest{--vjs-theme-forest--primary: rgb(129,140,248)}.vjs-theme-forest.vjs-big-play-button:focus,.vjs-theme-forest:hover .vjs-big-play-button{background:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns=\'http://www.w3.org/2000/svg\' width=\'88\' height=\'88\' fill=\'%23818cf8\'%3E%3Cpath fill-rule=\'evenodd\' d=\'M44 88C19.738 88 0 68.262 0 44S19.738 0 44 0s44 19.738 44 44-19.738 44-44 44zm0-85C21.393 3 3 21.393 3 44c0 22.608 18.393 41 41 41s41-18.392 41-41C85 21.393 66.607 3 44 3zm16.063 43.898L39.629 60.741a3.496 3.496 0 01-3.604.194 3.492 3.492 0 01-1.859-3.092V30.158c0-1.299.712-2.483 1.859-3.092a3.487 3.487 0 013.604.194l20.433 13.843a3.497 3.497 0 01.001 5.795zm-1.683-3.311L37.946 29.744a.49.49 0 00-.276-.09.51.51 0 00-.239.062.483.483 0 00-.265.442v27.685c0 .262.166.389.265.442.1.053.299.118.515-.028L58.38 44.414A.489.489 0 0058.6 44a.49.49 0 00-.22-.413z\'/%3E%3C/svg%3E")}.video-js{position:initial}.video-js .vjs-control-bar{height:6em}.vjs-button>.vjs-icon-placeholder:before{font-size:3.8em}.video-js .vjs-button{width:6em}.vjs-theme-forest .vjs-volume-bar.vjs-slider-horizontal,.vjs-theme-forest .vjs-volume-panel,.vjs-theme-forest .vjs-volume-panel.vjs-volume-panel-horizontal.vjs-slider-active,.vjs-theme-forest .vjs-volume-panel.vjs-volume-panel-horizontal:hover,.vjs-theme-forest .vjs-volume-panel:active .vjs-volume-control.vjs-volume-horizontal,.vjs-theme-forest .vjs-volume-panel:hover,.vjs-theme-forest .vjs-volume-panel:hover .vjs-volume-control.vjs-volume-horizontal{width:8em}.video-js .vjs-volume-panel .vjs-volume-control.vjs-slider-active.vjs-volume-horizontal,.video-js .vjs-volume-panel .vjs-volume-control:active.vjs-volume-horizontal,.video-js .vjs-volume-panel.vjs-hover .vjs-mute-control~.vjs-volume-control.vjs-volume-horizontal,.video-js .vjs-volume-panel.vjs-hover .vjs-volume-control.vjs-volume-horizontal,.video-js .vjs-volume-panel:active .vjs-volume-control.vjs-volume-horizontal,.video-js .vjs-volume-panel:focus .vjs-volume-control.vjs-volume-horizontal{width:8em;height:6em;margin-right:0}.vjs-theme-forest .vjs-volume-bar:before{border-left-width:8em;border-bottom-width:5em}.vjs-theme-forest .vjs-volume-level:before{border-left-width:8em;border-bottom-width:5em}.vjs-theme-forest .vjs-progress-holder{height:2em}.video-js .vjs-progress-control:hover .vjs-progress-holder:focus .vjs-time-tooltip,.video-js .vjs-progress-control:hover .vjs-time-tooltip{font-size:2em}.video-js .vjs-time-tooltip{top:-2em}.video-js .vjs-time-control{font-size:2em}\n'],encapsulation:2});class Fh{}Fh.\u0275fac=function(i){return new(i||Fh)},Fh.\u0275cmp=M.Xpm({type:Fh,selectors:[["app-not-found"]],decls:20,vars:0,consts:[[1,"relative","m-auto","left-0","right-0","z-10","w-36","h-52","border-indigo-400","border-4","top-32","ghost"],[1,"absolute","left-0","right-0","bottom-10","m-auto","text-center","text-4xl","font-bold"],[1,"rounded-full","absolute","left-0","right-0","w-3","h-3","bg-indigo-400","mx-auto","mt-10","transform","translate-x-6"],[1,"rounded-full","absolute","left-0","right-0","w-3","h-3","bg-indigo-400","mx-auto","mt-10","transform","-translate-x-6"],[1,"w-10","h-2","rounded-lg","absolute","left-0","right-0","mx-auto","mt-20","bg-indigo-400"],[1,"corner","border-indigo-400","border-4"],[1,"corner","two","border-indigo-400","border-4"],[1,"corner","three","border-indigo-400","border-4"],[1,"corner","four","border-indigo-400","border-4"],[1,"over"],[1,"over","two"],[1,"over","three"],[1,"over","four"],[1,"ghost-shadow","w-32","h-10","mx-auto","mt-56","rounded","bg-indigo-400","left-0","right-0","absolute"],[1,"container","mx-auto","text-center","mt-60"],[1,"text-4xl","font-bold","mb-4"]],template:function(i,u){1&i&&(M.TgZ(0,"div",0)(1,"span",1),M._uU(2,"404"),M.qZA(),M._UZ(3,"div",2)(4,"div",3)(5,"div",4)(6,"div",5)(7,"div",6)(8,"div",7)(9,"div",8)(10,"div",9)(11,"div",10)(12,"div",11)(13,"div",12)(14,"div",13),M.qZA(),M.TgZ(15,"div",14)(16,"h2",15),M._uU(17,"Page not found"),M.qZA(),M.TgZ(18,"p"),M._uU(19," Looks like the page you're looking for is gone or doesn't exist. "),M.qZA()())}});const jy=[{path:"",component:Pe},{path:"about",component:Re},{path:"clip/:id",component:Hd,resolve:{clip:ke.Y}},{path:"",loadChildren:function(){var g=(0,re.Z)(function*(){return(yield K.e(253).then(K.bind(K,1253))).VideoModule});return function(){return g.apply(this,arguments)}}()},{path:"**",component:Fh}];class jh{}jh.\u0275fac=function(i){return new(i||jh)},jh.\u0275mod=M.oAB({type:jh}),jh.\u0275inj=M.cJS({imports:[Oe.Bz.forRoot(jy),Oe.Bz]});var em=K(2011);const tm_firebase={apiKey:"AIzaSyAbUdMJpKIyMxgHi0IcKXpCI3I1xFXE7gA",authDomain:"clipz-ead52.firebaseapp.com",projectId:"clipz-ead52",storageBucket:"clipz-ead52.appspot.com",appId:"1:156286783192:web:47f92b02bc13763a3cd1ad"};var Wf=K(1205),wv=K(377),nm=K(9646),Uy=K(4004),rm=K(4986),im=K(7272),sm=K(5698),Cv=K(4482),zp=K(5403),Uh=K(5032),z_=K(9718),om=K(5577);function Wp(g,i){return i?u=>(0,im.z)(i.pipe((0,sm.q)(1),function Iv(){return(0,Cv.e)((g,i)=>{g.subscribe((0,zp.x)(i,Uh.Z))})}()),u.pipe(Wp(g))):(0,om.z)((u,l)=>g(u,l).pipe((0,sm.q)(1),(0,z_.h)(u)))}var xv=K(9751),am=K(3532);var qp=K(9300),Kp=K(3900),Dv=K(2095);class xc{constructor(i,u,l,t){this.auth=i,this.db=u,this.router=l,this.route=t,this.redirect=!1,this.userCollection=u.collection("users"),this.isAuthenticated$=i.user.pipe((0,Uy.U)(s=>!!s)),this.isAuthenticatedWithDelay$=this.isAuthenticated$.pipe(function cm(g,i=rm.z){const u=function lm(g=0,i,u=rm.P){let l=-1;return null!=i&&((0,am.K)(i)?u=i:l=i),new xv.y(t=>{let s=function um(g){return g instanceof Date&&!isNaN(g)}(g)?+g-u.now():g;s<0&&(s=0);let h=0;return u.schedule(function(){t.closed||(t.next(h++),0<=l?this.schedule(void 0,l):t.complete())},s)})}(g,i);return Wp(()=>u)}(1e3)),this.router.events.pipe((0,qp.h)(s=>s instanceof Oe.m2),(0,Uy.U)(s=>this.route.firstChild),(0,Kp.w)(s=>s?.data??(0,nm.of)({}))).subscribe(s=>{this.redirect=s.authOnly??!1})}createUser(i){var u=this;return(0,re.Z)(function*(){if(!i.password)throw new Error("Password not orovided!");const l=yield u.auth.createUserWithEmailAndPassword(i.email,i.password);if(!l.user)throw new Error("User can't be found");yield u.userCollection.doc(l.user?.uid).set({name:i.name,email:i.email,age:i.age,phoneNumber:i.phoneNumber}),l.user.updateProfile({displayName:i.name})})()}logout(i){var u=this;return(0,re.Z)(function*(){i&&i.preventDefault(),yield u.auth.signOut(),u.redirect&&(yield u.router.navigateByUrl("/"))})()}}xc.\u0275fac=function(i){return new(i||xc)(M.LFG(Wf.zQ),M.LFG(Dv.ST),M.LFG(Oe.F0),M.LFG(Oe.gz))},xc.\u0275prov=M.Yz7({token:xc,factory:xc.\u0275fac,providedIn:"root"});var qf=K(1609),dm=K(3446);class Bh{constructor(){this.tabTitle="",this.active=!1}ngOnInit(){}}Bh.\u0275fac=function(i){return new(i||Bh)},Bh.\u0275cmp=M.Xpm({type:Bh,selectors:[["app-tabs"]],inputs:{tabTitle:"tabTitle",active:"active"},ngContentSelectors:["*"],decls:2,vars:2,template:function(i,u){1&i&&(M.F$t(),M.TgZ(0,"div"),M.Hsn(1),M.qZA()),2&i&&M.ekj("hidden",!u.active)}});const Vh=function(g,i){return{"hover:text-indigo-400":g,"hover:text-white text-white bg-indigo-400":i}};function fm(g,i){if(1&g){const u=M.EpF();M.TgZ(0,"li",2)(1,"a",3),M.NdJ("click",function(){const s=M.CHM(u).$implicit,h=M.oxw();return M.KtG(h.selectTab(s))}),M._uU(2),M.qZA()()}if(2&g){const u=i.$implicit;M.xp6(1),M.Q6J("ngClass",M.WLB(2,Vh,!u.active,u.active)),M.xp6(1),M.Oqu(u.tabTitle)}}class Hh{constructor(){this.tabs=new M.n_E}ngAfterContentInit(){const i=this.tabs.filter(u=>u.active);(!i||0===i.length)&&this.selectTab(this.tabs.first)}selectTab(i){return this.tabs.forEach(u=>{u.active=!1}),i.active=!0,!1}}Hh.\u0275fac=function(i){return new(i||Hh)},Hh.\u0275cmp=M.Xpm({type:Hh,selectors:[["app-tabs-container"]],contentQueries:function(i,u,l){if(1&i&&M.Suo(l,Bh,4),2&i){let t;M.iGM(t=M.CRH())&&(u.tabs=t)}},ngContentSelectors:["*"],decls:3,vars:1,consts:[[1,"flex","flex-wrap","mb-4"],["class","flex-auto text-center",4,"ngFor","ngForOf"],[1,"flex-auto","text-center"],["href","#",1,"block","rounded","py-3","px-4","transition","hover:text-white","text-white","bg-indigo-400",3,"ngClass","click"]],template:function(i,u){1&i&&(M.F$t(),M.TgZ(0,"ul",0),M.YNc(1,fm,3,5,"li",1),M.qZA(),M.Hsn(2)),2&i&&(M.xp6(1),M.Q6J("ngForOf",u.tabs))},dependencies:[De.mk,De.sg]});var Av=K(8549),ns=K(4006);function Vy(g,i){if(1&g&&(M.TgZ(0,"app-alert",11),M._uU(1),M.qZA()),2&g){const u=M.oxw();M.Q6J("color",u.alertColor),M.xp6(1),M.hij(" ",u.alertMsg,"\n")}}function Pv(g,i){1&g&&(M.TgZ(0,"p",12),M._uU(1," Email is Invalid "),M.qZA())}function Hy(g,i){1&g&&(M.TgZ(0,"p",12),M._uU(1," password is Invalid "),M.qZA())}class Kf{constructor(i){this.auth=i,this.credentials={email:"",password:""},this.showAlert=!1,this.alertMsg="Please wait! We are logging you in.",this.alertColor="blue",this.inSubmission=!1}ngOnInit(){}login(){var i=this;return(0,re.Z)(function*(){i.showAlert=!0,i.alertMsg="Please wait! We are logging you in.",i.alertColor="blue";try{yield i.auth.signInWithEmailAndPassword(i.credentials.email,i.credentials.password)}catch(u){return console.error(u),i.inSubmission=!1,i.alertMsg="An unexpected error occurred. Please try again later.",i.alertColor="red",void console.log(u)}i.alertMsg="Success! Your are now logged in.",i.alertColor="green"})()}}Kf.\u0275fac=function(i){return new(i||Kf)(M.Y36(Wf.zQ))},Kf.\u0275cmp=M.Xpm({type:Kf,selectors:[["app-login"]],decls:17,vars:6,consts:[[3,"color",4,"ngIf"],[3,"ngSubmit"],["loginForm","ngForm"],[1,"mb-3"],[1,"inline-block","mb-2"],["type","email","name","email","placeholder","Enter Email","required","","pattern","[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?",1,"block","w-full","py-1.5","px-3","text-gray-200","border","border-gray-400","transition","duration-500","focus:outline-none","rounded","bg-transparent","focus:border-indigo-400",3,"ngModel","ngModelChange"],["email","ngModel"],["class","text-red-400",4,"ngIf"],["type","password","name","password","placeholder","Password","required","",1,"block","w-full","py-1.5","px-3","text-gray-200","border","border-gray-400","transition","duration-500","focus:outline-none","rounded","bg-transparent","focus:border-indigo-400",3,"ngModel","ngModelChange"],["password","ngModel"],["type","submit",1,"block","w-full","bg-indigo-400","text-white","py-1.5","px-3","rounded","transition","hover:bg-indigo-500","disabled:opacity-50","disabled:bg-indigo-400",3,"disabled"],[3,"color"],[1,"text-red-400"]],template:function(i,u){if(1&i&&(M.YNc(0,Vy,2,2,"app-alert",0),M.TgZ(1,"form",1,2),M.NdJ("ngSubmit",function(){return u.login()}),M.TgZ(3,"div",3)(4,"label",4),M._uU(5,"Email"),M.qZA(),M.TgZ(6,"input",5,6),M.NdJ("ngModelChange",function(t){return u.credentials.email=t}),M.qZA(),M.YNc(8,Pv,2,0,"p",7),M.qZA(),M.TgZ(9,"div",3)(10,"label",4),M._uU(11,"Password"),M.qZA(),M.TgZ(12,"input",8,9),M.NdJ("ngModelChange",function(t){return u.credentials.password=t}),M.qZA(),M.YNc(14,Hy,2,0,"p",7),M.qZA(),M.TgZ(15,"button",10),M._uU(16," Submit "),M.qZA()()),2&i){const l=M.MAs(2),t=M.MAs(7),s=M.MAs(13);M.Q6J("ngIf",u.showAlert),M.xp6(6),M.Q6J("ngModel",u.credentials.email),M.xp6(2),M.Q6J("ngIf",t.errors&&t.touched&&t.dirty),M.xp6(4),M.Q6J("ngModel",u.credentials.password),M.xp6(2),M.Q6J("ngIf",s.errors&&s.touched&&s.dirty),M.xp6(1),M.Q6J("disabled",l.invalid||u.inSubmission)}},dependencies:[De.O5,Av.w,ns._Y,ns.Fj,ns.JJ,ns.JL,ns.Q7,ns.c5,ns.On,ns.F]});class Gy{static match(i,u){return l=>{const t=l.get(i),s=l.get(u);if(!t||!s)return console.log("Form controls can not be found in the form group."),{controlNotFound:!1};const h=t.value===s.value?null:{noMatch:!0};return s.setErrors(h),h}}}class Gd{constructor(i){this.auth=i,this.validate=u=>this.auth.fetchSignInMethodsForEmail(u.value).then(l=>l.length?{emailTaken:!0}:null)}}Gd.\u0275fac=function(i){return new(i||Gd)(M.LFG(Wf.zQ))},Gd.\u0275prov=M.Yz7({token:Gd,factory:Gd.\u0275fac,providedIn:"root"});var Zf=K(235);function sd(g,i){if(1&g&&(M.TgZ(0,"app-alert",11),M._uU(1),M.qZA()),2&g){const u=M.oxw();M.Q6J("color",u.alertColor),M.xp6(1),M.hij(" ",u.alertMsg,"\n")}}class Yf{constructor(i,u){this.auth=i,this.emailTaken=u,this.inSubmission=!1,this.name=new ns.NI("",[ns.kI.required,ns.kI.minLength(3)]),this.email=new ns.NI("",[ns.kI.required,ns.kI.email],[this.emailTaken.validate]),this.age=new ns.NI(null,[ns.kI.required,ns.kI.min(18),ns.kI.max(99)]),this.password=new ns.NI("",[ns.kI.required,ns.kI.pattern(/^(?=.*\d)(?=.*[a-z])(?=.*[A-Z])(?=.*[a-zA-Z]).{8,}$/gm)]),this.confirm_password=new ns.NI("",[ns.kI.required]),this.phoneNumber=new ns.NI("",[ns.kI.required,ns.kI.maxLength(10),ns.kI.minLength(10)]),this.showAlert=!1,this.alertMsg="Please wait! Your account is being created.",this.alertColor="blue",this.registerForm=new ns.cw({name:this.name,email:this.email,age:this.age,password:this.password,confirm_password:this.confirm_password,phoneNumber:this.phoneNumber},[Gy.match("password","confirm_password")])}register(){var i=this;return(0,re.Z)(function*(){i.showAlert=!0,i.alertMsg="Please wait! Your account is being created.",i.alertColor="blue",i.inSubmission=!0;try{i.auth.createUser(i.registerForm.value)}catch(u){return console.error(u),i.alertMsg="An unexpected error occurred. Please try again later",i.alertColor="red",void(i.inSubmission=!1)}i.alertMsg="Success! Your account has been created.",i.alertColor="green"})()}}Yf.\u0275fac=function(i){return new(i||Yf)(M.Y36(xc),M.Y36(Gd))},Yf.\u0275cmp=M.Xpm({type:Yf,selectors:[["app-register"]],decls:28,vars:9,consts:[[3,"color",4,"ngIf"],[3,"formGroup","ngSubmit"],[1,"mb-3"],[1,"inline-block","mb-2"],["placeholder","Enter Name",3,"control"],["type","email","placeholder","Enter Email",3,"control"],["type","number","placeholder","Enter Age",3,"control"],["type","password","placeholder","Enter Your Password",3,"control"],["type","password","placeholder","Confirm Your Password",3,"control"],["type","numbaer","placeholder","Enter Phone Number",3,"control"],["type","submit",1,"block","w-full","bg-indigo-400","text-white","py-1.5","px-3","rounded","transition","hover:bg-indigo-500","disabled:opacity-50","disabled:bg-indigo-400",3,"disabled"],[3,"color"]],template:function(i,u){1&i&&(M.YNc(0,sd,2,2,"app-alert",0),M.TgZ(1,"form",1),M.NdJ("ngSubmit",function(){return u.register()}),M.TgZ(2,"div",2)(3,"label",3),M._uU(4,"Name"),M.qZA(),M._UZ(5,"app-input",4),M.qZA(),M.TgZ(6,"div",2)(7,"label",3),M._uU(8,"Email"),M.qZA(),M._UZ(9,"app-input",5),M.qZA(),M.TgZ(10,"div",2)(11,"label",3),M._uU(12,"Age"),M.qZA(),M._UZ(13,"app-input",6),M.qZA(),M.TgZ(14,"div",2)(15,"label",3),M._uU(16,"Password"),M.qZA(),M._UZ(17,"app-input",7),M.qZA(),M.TgZ(18,"div",2)(19,"label",3),M._uU(20,"Confirm Password"),M.qZA(),M._UZ(21,"app-input",8),M.qZA(),M.TgZ(22,"div",2)(23,"label",3),M._uU(24,"Phone Number"),M.qZA(),M._UZ(25,"app-input",9),M.qZA(),M.TgZ(26,"button",10),M._uU(27," Submit "),M.qZA()()),2&i&&(M.Q6J("ngIf",u.showAlert),M.xp6(1),M.Q6J("formGroup",u.registerForm),M.xp6(4),M.Q6J("control",u.name),M.xp6(4),M.Q6J("control",u.email),M.xp6(4),M.Q6J("control",u.age),M.xp6(4),M.Q6J("control",u.password),M.xp6(4),M.Q6J("control",u.confirm_password),M.xp6(4),M.Q6J("control",u.phoneNumber),M.xp6(1),M.Q6J("disabled",u.registerForm.invalid||u.inSubmission))},dependencies:[De.O5,Zf.a,Av.w,ns._Y,ns.JL,ns.sg]});class Qf{constructor(i){this.modal=i}ngOnInit(){this.modal.register("auth")}ngOnDestroy(){this.modal.unregister("auth")}}function Xf(g,i){if(1&g){const u=M.EpF();M.TgZ(0,"li")(1,"a",15),M.NdJ("click",function(t){M.CHM(u);const s=M.oxw();return M.KtG(s.openModal(t))}),M._uU(2," Login / Register "),M.qZA()()}}Qf.\u0275fac=function(i){return new(i||Qf)(M.Y36(qf.Z))},Qf.\u0275cmp=M.Xpm({type:Qf,selectors:[["app-auth-modal"]],decls:8,vars:0,consts:[["modalId","auth"],["heading","",1,"text-2xl","font-bold"],["tabTitle","Login"],["tabTitle","Register"]],template:function(i,u){1&i&&(M.TgZ(0,"app-modal",0)(1,"p",1),M._uU(2,"Your Account"),M.qZA(),M.TgZ(3,"app-tabs-container")(4,"app-tabs",2),M._UZ(5,"app-login"),M.qZA(),M.TgZ(6,"app-tabs",3),M._UZ(7,"app-register"),M.qZA()()())},dependencies:[dm.z,Hh,Bh,Kf,Yf]});const bi=function(){return{exact:!0}},pm=function(){return{sort:"1"}};function $y(g,i){if(1&g){const u=M.EpF();M.TgZ(0,"li")(1,"a",15),M.NdJ("click",function(t){M.CHM(u);const s=M.oxw();return M.KtG(s.auth.logout(t))}),M._uU(2," Logout "),M.qZA()(),M.TgZ(3,"li")(4,"a",16),M._uU(5," Manage "),M.qZA()(),M.TgZ(6,"li")(7,"a",17),M._uU(8," Upload "),M.qZA()()}2&g&&(M.xp6(4),M.Q6J("routerLinkActiveOptions",M.DdM(3,bi))("queryParams",M.DdM(4,pm)),M.xp6(3),M.Q6J("routerLinkActiveOptions",M.DdM(5,bi)))}class rc{constructor(i,u){this.modal=i,this.auth=u}ngOnInit(){}openModal(i){i.preventDefault(),this.modal.toggleModal("auth")}}function W_(g,i){1&g&&M._UZ(0,"app-auth-modal")}rc.\u0275fac=function(i){return new(i||rc)(M.Y36(qf.Z),M.Y36(xc))},rc.\u0275cmp=M.Xpm({type:rc,selectors:[["app-nav-bar"]],decls:24,vars:4,consts:[["id","header",1,"bg-secondary"],[1,"container","mx-auto","flex","justify-start","items-center","py-8","px-4"],["routerLink","/",1,"text-3xl","text-indigo-400","font-bold","uppercase","mr-4"],[1,"flex","flex-grow","items-center"],[1,"flex","flex-row","mt-1"],[4,"ngIf","ngIfElse"],["authLinks",""],["routerLinkActive","text-indigo-400"],["routerLink","/about","routerLinkActive","text-indigo-400",1,"px-2"],[1,"flex","flex-row","ml-auto"],["href","#"],["src","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAAA1CAMAAACA7r40AAAA/FBMVEWyIjNPN2Y8O27///8/PnBOTXxycpY9PG9RUX5HR3dIR3dLSnlPTny4uMpWVYFFRHVwb5VlZIx7e52DgqOIh6aIiKc+PXBJSHhTUn9hYYqyIjReXohgX4lYV4Lr6/C2tcjPdYB0c5haWYRYV4Nra5GJiac+PW/FxdTHYG1RUH3eoajltbtOTXvty89BQHHg3+hSUX6GYoC6usyVlbFycZa7u8yUk6+sq8FCQXO0tMe1tMhiYYpMS3pDQnNvbpTExNN8fJ7GxdTGxtWCgqLHx9WXlrLXi5SYl7Kiobrg4Oiiorrn5u3n5+2jo7ukpLvw8PTx8fX09Pf19firqsC5sMNxAAAAAnRSTlPQ9qN1Xw4AAAGlSURBVHhe7ZXFiiRBFEVjznvp5W7t7j3u7m7//y8D1dAMGbnI4jW5KOpsgjibCxFcrrtVEmcBGAGQJHB98d3EgEM/ygsg/nwRAy15rxQ4Ywh3JQX49hVgKA/Ad1hDkkGTMSQJjGkOEmo133FmwAEQyl8FfSj3gFgkzjsQAw6AZ796AP2fGcDBS8/ZQ7ZQlJ2d+bEFqp6zhuh9Cf9/pDtKkTs04KBTD4jgx3eICOodoshz1p7M6UUAUQ+Ap2Pf2UMI5UBBX18/Ut7ZQ84Jui10QKsbcA7dt77jxIBDt+sxMNzrD4HL+rZS4Iw9iTZkCjRFmsBUHkcUOGMI7dkpKezuQsrprM3zR76zN572ekdBX623gaONJ0d5B5sGHAA1+QTwRQJgX2Q/7+w9GZGlDZKERpoxgkbDc8s0WscGSo+WGMiNVlgwWuFNjdafPsDe7wzg3RvP2UNCFGVtbX6EoOo7PhgoO1rGnswHiquB4mqgfIcxpBTGkNslMf2JVMAShRxXgJtUwBKFbFbAqicL4U4qYNWThXCHFbDqyUK4swpY9WQhXBX8A2rVjaQ6HWXmAAAAAElFTkSuQmCC","alt","en","width","22","height","14",1,"inline-block"],[1,"ml-1"],[2,"display","none"],["src","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAABDBAMAAACYZb3pAAAAHlBMVEUpQqK2q8384OL3qa/tKTkAI5Wrt9z////5t7ztKTlzpJCAAAAABXRSTlP++vjs1BQWlgsAAAAxSURBVHgBYmRAA4yKaAJCAugqQgHtyzENAAAAAiD7pzaDr4MfRVEURVGU36IoipK5FLWNJ6UFusbWAAAAAElFTkSuQmCC","alt","fr","width","22","height","14",1,"inline-block"],["href","#",1,"px-2",3,"click"],["routerLink","/manage","routerLinkActive","text-indigo-400",1,"px-2",3,"routerLinkActiveOptions","queryParams"],["routerLink","/upload","routerLinkActive","text-indigo-400",1,"px-2",3,"routerLinkActiveOptions"]],template:function(i,u){if(1&i&&(M.TgZ(0,"header",0)(1,"nav",1)(2,"a",2),M._uU(3,"Clipz"),M.qZA(),M.TgZ(4,"div",3)(5,"ul",4),M.YNc(6,Xf,3,0,"li",5),M.ALo(7,"async"),M.YNc(8,$y,9,6,"ng-template",null,6,M.W1O),M.TgZ(10,"li",7)(11,"a",8),M._uU(12," About "),M.qZA()()(),M.TgZ(13,"ul",9)(14,"li")(15,"a",10),M._UZ(16,"img",11),M.TgZ(17,"span",12),M._uU(18,"English"),M.qZA()()(),M.TgZ(19,"li",13)(20,"a",10),M._UZ(21,"img",14),M.TgZ(22,"span",12),M._uU(23,"French"),M.qZA()()()()()()()),2&i){const l=M.MAs(9);M.xp6(6),M.Q6J("ngIf",!M.lcZ(7,2,u.auth.isAuthenticated$))("ngIfElse",l)}},dependencies:[De.O5,Oe.rH,Oe.Od,De.Ov]});class Ys{constructor(i){this.auth=i}}Ys.\u0275fac=function(i){return new(i||Ys)(M.Y36(xc))},Ys.\u0275cmp=M.Xpm({type:Ys,selectors:[["app-root"]],decls:4,vars:3,consts:[[4,"ngIf"]],template:function(i,u){1&i&&(M._UZ(0,"app-nav-bar")(1,"router-outlet"),M.YNc(2,W_,1,0,"app-auth-modal",0),M.ALo(3,"async")),2&i&&(M.xp6(2),M.Q6J("ngIf",!M.lcZ(3,1,u.auth.isAuthenticatedWithDelay$)))},dependencies:[De.O5,Qf,Oe.lC,rc,De.Ov]});var pu=K(4466);class Hu{}Hu.\u0275fac=function(i){return new(i||Hu)},Hu.\u0275mod=M.oAB({type:Hu}),Hu.\u0275inj=M.cJS({imports:[De.ez,pu.m,ns.UX,ns.u5]});class $d{}$d.\u0275fac=function(i){return new(i||$d)},$d.\u0275mod=M.oAB({type:$d,bootstrap:[Ys]}),$d.\u0275inj=M.cJS({imports:[E.b2,Hu,em.hO.initializeApp(tm_firebase),Wf.ww,jh,wv.TE]});var zy=K(9260);K(4217),(0,M.G48)();let gm=!1;zy.Z.initializeApp(tm_firebase),zy.Z.auth().onAuthStateChanged(()=>{gm||E.q6().bootstrapModule($d).catch(g=>console.error(g)),gm=!0})},3992:(Qt,it,K)=>{"use strict";var E=K(9226);Qt.exports=function(De,ke){return void 0===ke&&(ke=!1),function(Ge,He,Ke){if(Ge)De(Ge);else if(He.statusCode>=400&&He.statusCode<=599){var Ie=Ke;if(ke)if(E.TextDecoder){var Pe=function re(Oe){return void 0===Oe&&(Oe=""),Oe.toLowerCase().split(";").reduce(function(De,ke){var Ge=ke.split("="),Ke=Ge[1];return"charset"===Ge[0].trim()?Ke.trim():De},"utf-8")}(He.headers&&He.headers["content-type"]);try{Ie=new TextDecoder(Pe).decode(Ke)}catch{}}else Ie=String.fromCharCode.apply(null,new Uint8Array(Ke));De({cause:Ie})}else De(null,Ke)}}},745:(Qt,it,K)=>{"use strict";var E=K(9226),M=K(434),re=K(2703);He.httpHandler=K(3992);var Oe=function(yt){var ae={};return yt&&yt.trim().split("\n").forEach(function(Pt){var et=Pt.indexOf(":"),at=Pt.slice(0,et).trim().toLowerCase(),nt=Pt.slice(et+1).trim();typeof ae[at]>"u"?ae[at]=nt:Array.isArray(ae[at])?ae[at].push(nt):ae[at]=[ae[at],nt]}),ae};function Ge(Re,yt,ae){var Pt=Re;return re(yt)?(ae=yt,"string"==typeof Re&&(Pt={uri:Re})):Pt=M({},yt,{uri:Re}),Pt.callback=ae,Pt}function He(Re,yt,ae){return Ke(yt=Ge(Re,yt,ae))}function Ke(Re){if(typeof Re.callback>"u")throw new Error("callback argument missing");var yt=!1,ae=function(xt,Xe,ut){yt||(yt=!0,Re.callback(xt,Xe,ut))};function et(){var st=void 0;if(st=We.response?We.response:We.responseText||function Ie(Re){try{if("document"===Re.responseType)return Re.responseXML;if(""===Re.responseType&&(!Re.responseXML||"parsererror"!==Re.responseXML.documentElement.nodeName))return Re.responseXML}catch{}return null}(We),he)try{st=JSON.parse(st)}catch{}return st}function at(st){return clearTimeout(Ne),st instanceof Error||(st=new Error(""+(st||"Unknown XMLHttpRequest Error"))),st.statusCode=0,ae(st,mt)}function nt(){if(!Fe){var st;clearTimeout(Ne);var xt=mt,Xe=null;return 0!==(st=Re.useXDR&&void 0===We.status?200:1223===We.status?204:We.status)?(xt={body:et(),statusCode:st,method:Et,headers:{},url:Me,rawRequest:We},We.getAllResponseHeaders&&(xt.headers=Oe(We.getAllResponseHeaders()))):Xe=new Error("Internal XMLHttpRequest Error"),ae(Xe,xt,xt.body)}}var We=Re.xhr||null;We||(We=Re.cors||Re.useXDR?new He.XDomainRequest:new He.XMLHttpRequest);var dt,Fe,Ne,Me=We.url=Re.uri||Re.url,Et=We.method=Re.method||"GET",Mt=Re.body||Re.data,St=We.headers=Re.headers||{},J=!!Re.sync,he=!1,mt={body:void 0,headers:{},statusCode:0,method:Et,url:Me,rawRequest:We};if("json"in Re&&!1!==Re.json&&(he=!0,St.accept||St.Accept||(St.Accept="application/json"),"GET"!==Et&&"HEAD"!==Et&&(St["content-type"]||St["Content-Type"]||(St["Content-Type"]="application/json"),Mt=JSON.stringify(!0===Re.json?Mt:Re.json))),We.onreadystatechange=function Pt(){4===We.readyState&&setTimeout(nt,0)},We.onload=nt,We.onerror=at,We.onprogress=function(){},We.onabort=function(){Fe=!0},We.ontimeout=at,We.open(Et,Me,!J,Re.username,Re.password),J||(We.withCredentials=!!Re.withCredentials),!J&&Re.timeout>0&&(Ne=setTimeout(function(){if(!Fe){Fe=!0,We.abort("timeout");var st=new Error("XMLHttpRequest timeout");st.code="ETIMEDOUT",at(st)}},Re.timeout)),We.setRequestHeader)for(dt in St)St.hasOwnProperty(dt)&&We.setRequestHeader(dt,St[dt]);else if(Re.headers&&!function ke(Re){for(var yt in Re)if(Re.hasOwnProperty(yt))return!1;return!0}(Re.headers))throw new Error("Headers cannot be set on an XDomainRequest object");return"responseType"in Re&&(We.responseType=Re.responseType),"beforeSend"in Re&&"function"==typeof Re.beforeSend&&Re.beforeSend(We),We.send(Mt||null),We}Qt.exports=He,Qt.exports.default=He,He.XMLHttpRequest=E.XMLHttpRequest||function Pe(){},He.XDomainRequest="withCredentials"in new He.XMLHttpRequest?He.XMLHttpRequest:E.XDomainRequest,function De(Re,yt){for(var ae=0;ae<Re.length;ae++)yt(Re[ae])}(["get","put","post","patch","head","delete"],function(Re){He["delete"===Re?"del":Re]=function(yt,ae,Pt){return(ae=Ge(yt,ae,Pt)).method=Re.toUpperCase(),Ke(ae)}})},9401:(Qt,it)=>{"use strict";function E(De,ke){return void 0===ke&&(ke=Object),ke&&"function"==typeof ke.freeze?ke.freeze(De):De}var re=E({HTML:"text/html",isHTML:function(De){return De===re.HTML},XML_APPLICATION:"application/xml",XML_TEXT:"text/xml",XML_XHTML_APPLICATION:"application/xhtml+xml",XML_SVG_IMAGE:"image/svg+xml"}),Oe=E({HTML:"http://www.w3.org/1999/xhtml",isHTML:function(De){return De===Oe.HTML},SVG:"http://www.w3.org/2000/svg",XML:"http://www.w3.org/XML/1998/namespace",XMLNS:"http://www.w3.org/2000/xmlns/"});it.assign=function M(De,ke){if(null===De||"object"!=typeof De)throw new TypeError("target is not an object");for(var Ge in ke)Object.prototype.hasOwnProperty.call(ke,Ge)&&(De[Ge]=ke[Ge]);return De},it.find=function K(De,ke,Ge){if(void 0===Ge&&(Ge=Array.prototype),De&&"function"==typeof Ge.find)return Ge.find.call(De,ke);for(var He=0;He<De.length;He++)if(Object.prototype.hasOwnProperty.call(De,He)){var Ke=De[He];if(ke.call(void 0,Ke,He,De))return Ke}},it.freeze=E,it.MIME_TYPE=re,it.NAMESPACE=Oe},1991:(Qt,it,K)=>{var M=K(9401),re=K(6853),Oe=K(4436),De=K(8702),ke=re.DOMImplementation,Ge=M.NAMESPACE,He=De.ParseError,Ke=De.XMLReader;function Ie(nt){return nt.replace(/\r[\n\u0085]/g,"\n").replace(/[\r\u0085\u2028]/g,"\n")}function Pe(nt){this.options=nt||{locator:{}}}function yt(){this.cdata=!1}function ae(nt,We){We.lineNumber=nt.lineNumber,We.columnNumber=nt.columnNumber}function Pt(nt){if(nt)return"\n@"+(nt.systemId||"")+"#[line:"+nt.lineNumber+",col:"+nt.columnNumber+"]"}function et(nt,We,dt){return"string"==typeof nt?nt.substr(We,dt):nt.length>=We+dt||We?new java.lang.String(nt,We,dt)+"":nt}function at(nt,We){nt.currentElement?nt.currentElement.appendChild(We):nt.doc.appendChild(We)}Pe.prototype.parseFromString=function(nt,We){var dt=this.options,Fe=new Ke,Me=dt.domBuilder||new yt,Et=dt.errorHandler,Mt=dt.locator,St=dt.xmlns||{},J=/\/x?html?$/.test(We),he=J?Oe.HTML_ENTITIES:Oe.XML_ENTITIES;return Mt&&Me.setDocumentLocator(Mt),Fe.errorHandler=function Re(nt,We,dt){if(!nt){if(We instanceof yt)return We;nt=We}var Fe={},Me=nt instanceof Function;function Et(Mt){var St=nt[Mt];!St&&Me&&(St=2==nt.length?function(J){nt(Mt,J)}:nt),Fe[Mt]=St&&function(J){St("[xmldom "+Mt+"]\t"+J+Pt(dt))}||function(){}}return dt=dt||{},Et("warning"),Et("error"),Et("fatalError"),Fe}(Et,Me,Mt),Fe.domBuilder=dt.domBuilder||Me,J&&(St[""]=Ge.HTML),St.xml=St.xml||Ge.XML,nt&&"string"==typeof nt?Fe.parse((dt.normalizeLineEndings||Ie)(nt),St,he):Fe.errorHandler.error("invalid doc source"),Me.doc},yt.prototype={startDocument:function(){this.doc=(new ke).createDocument(null,null,null),this.locator&&(this.doc.documentURI=this.locator.systemId)},startElement:function(nt,We,dt,Fe){var Me=this.doc,Et=Me.createElementNS(nt,dt||We),Mt=Fe.length;at(this,Et),this.currentElement=Et,this.locator&&ae(this.locator,Et);for(var St=0;St<Mt;St++){nt=Fe.getURI(St);var J=Fe.getValue(St),he=(dt=Fe.getQName(St),Me.createAttributeNS(nt,dt));this.locator&&ae(Fe.getLocator(St),he),he.value=he.nodeValue=J,Et.setAttributeNode(he)}},endElement:function(nt,We,dt){this.currentElement=this.currentElement.parentNode},startPrefixMapping:function(nt,We){},endPrefixMapping:function(nt){},processingInstruction:function(nt,We){var dt=this.doc.createProcessingInstruction(nt,We);this.locator&&ae(this.locator,dt),at(this,dt)},ignorableWhitespace:function(nt,We,dt){},characters:function(nt,We,dt){if(nt=et.apply(this,arguments)){if(this.cdata)var Fe=this.doc.createCDATASection(nt);else Fe=this.doc.createTextNode(nt);this.currentElement?this.currentElement.appendChild(Fe):/^\s*$/.test(nt)&&this.doc.appendChild(Fe),this.locator&&ae(this.locator,Fe)}},skippedEntity:function(nt){},endDocument:function(){this.doc.normalize()},setDocumentLocator:function(nt){(this.locator=nt)&&(nt.lineNumber=0)},comment:function(nt,We,dt){nt=et.apply(this,arguments);var Fe=this.doc.createComment(nt);this.locator&&ae(this.locator,Fe),at(this,Fe)},startCDATA:function(){this.cdata=!0},endCDATA:function(){this.cdata=!1},startDTD:function(nt,We,dt){var Fe=this.doc.implementation;if(Fe&&Fe.createDocumentType){var Me=Fe.createDocumentType(nt,We,dt);this.locator&&ae(this.locator,Me),at(this,Me),this.doc.doctype=Me}},warning:function(nt){console.warn("[xmldom warning]\t"+nt,Pt(this.locator))},error:function(nt){console.error("[xmldom error]\t"+nt,Pt(this.locator))},fatalError:function(nt){throw new He(nt,this.locator)}},"endDTD,startEntity,endEntity,attributeDecl,elementDecl,externalEntityDecl,internalEntityDecl,resolveEntity,getExternalSubset,notationDecl,unparsedEntityDecl".replace(/\w+/g,function(nt){yt.prototype[nt]=function(){return null}}),it.DOMParser=Pe},6853:(Qt,it,K)=>{var E=K(9401),M=E.find,re=E.NAMESPACE;function Oe(de){return""!==de}function ke(de,we){return de.hasOwnProperty(we)||(de[we]=!0),de}function Ge(de){if(!de)return[];var we=function De(de){return de?de.split(/[\t\n\f\r ]+/).filter(Oe):[]}(de);return Object.keys(we.reduce(ke,{}))}function Ke(de,we){for(var fe in de)Object.prototype.hasOwnProperty.call(de,fe)&&(we[fe]=de[fe])}function Ie(de,we){var fe=de.prototype;if(!(fe instanceof we)){let ge=function(){};ge.prototype=we.prototype,ge=new ge,Ke(fe,ge),de.prototype=fe=ge}fe.constructor!=de&&("function"!=typeof de&&console.error("unknown Class:"+de),fe.constructor=de)}var Pe={},Re=Pe.ELEMENT_NODE=1,yt=Pe.ATTRIBUTE_NODE=2,ae=Pe.TEXT_NODE=3,Pt=Pe.CDATA_SECTION_NODE=4,et=Pe.ENTITY_REFERENCE_NODE=5,at=Pe.ENTITY_NODE=6,nt=Pe.PROCESSING_INSTRUCTION_NODE=7,We=Pe.COMMENT_NODE=8,dt=Pe.DOCUMENT_NODE=9,Fe=Pe.DOCUMENT_TYPE_NODE=10,Me=Pe.DOCUMENT_FRAGMENT_NODE=11,Et=Pe.NOTATION_NODE=12,Mt={},St={},Ne=(Mt.INDEX_SIZE_ERR=(St[1]="Index size error",1),Mt.DOMSTRING_SIZE_ERR=(St[2]="DOMString size error",2),Mt.HIERARCHY_REQUEST_ERR=(St[3]="Hierarchy request error",3)),ut=(Mt.WRONG_DOCUMENT_ERR=(St[4]="Wrong document",4),Mt.INVALID_CHARACTER_ERR=(St[5]="Invalid character",5),Mt.NO_DATA_ALLOWED_ERR=(St[6]="No data allowed",6),Mt.NO_MODIFICATION_ALLOWED_ERR=(St[7]="No modification allowed",7),Mt.NOT_FOUND_ERR=(St[8]="Not found",8)),ot=(Mt.NOT_SUPPORTED_ERR=(St[9]="Not supported",9),Mt.INUSE_ATTRIBUTE_ERR=(St[10]="Attribute in use",10));function Ot(de,we){if(we instanceof Error)var fe=we;else fe=this,Error.call(this,St[de]),this.message=St[de],Error.captureStackTrace&&Error.captureStackTrace(this,Ot);return fe.code=de,we&&(this.message=this.message+": "+we),fe}function rn(){}function zt(de,we){this._node=de,this._refresh=we,bn(this)}function bn(de){var we=de._node._inc||de._node.ownerDocument._inc;if(de._inc!=we){var fe=de._refresh(de._node);Xn(de,"length",fe.length),Ke(fe,de),de._inc=we}}function dr(){}function Hn(de,we){for(var fe=de.length;fe--;)if(de[fe]===we)return fe}function Zn(de,we,fe,Te){if(Te?we[Hn(we,Te)]=fe:we[we.length++]=fe,de){fe.ownerElement=de;var ge=de.ownerDocument;ge&&(Te&&Ar(ge,de,Te),function Bn(de,we,fe){de&&de._inc++,fe.namespaceURI===re.XMLNS&&(we._nsMap[fe.prefix?fe.localName:""]=fe.value)}(ge,de,fe))}}function Vr(de,we,fe){var Te=Hn(we,fe);if(!(Te>=0))throw new Ot(ut,new Error(de.tagName+"@"+fe));for(var ge=we.length-1;Te<ge;)we[Te]=we[++Te];if(we.length=ge,de){var Ye=de.ownerDocument;Ye&&(Ar(Ye,de,fe),fe.ownerElement=null)}}function mr(){}function qn(){}function kr(de){return("<"==de?"&lt;":">"==de&&"&gt;")||"&"==de&&"&amp;"||'"'==de&&"&quot;"||"&#"+de.charCodeAt()+";"}function ii(de,we){if(we(de))return!0;if(de=de.firstChild)do{if(ii(de,we))return!0}while(de=de.nextSibling)}function fr(){this.ownerDocument=this}function Ar(de,we,fe,Te){de&&de._inc++,fe.namespaceURI===re.XMLNS&&delete we._nsMap[fe.prefix?fe.localName:""]}function Tn(de,we,fe){if(de&&de._inc){de._inc++;var Te=we.childNodes;if(fe)Te[Te.length++]=fe;else{for(var ge=we.firstChild,Ye=0;ge;)Te[Ye++]=ge,ge=ge.nextSibling;Te.length=Ye,delete Te[Te.length]}}}function ci(de,we){var fe=we.previousSibling,Te=we.nextSibling;return fe?fe.nextSibling=Te:de.firstChild=Te,Te?Te.previousSibling=fe:de.lastChild=fe,we.parentNode=null,we.previousSibling=null,we.nextSibling=null,Tn(de.ownerDocument,de),we}function gi(de){return de&&de.nodeType===qn.DOCUMENT_TYPE_NODE}function Ri(de){return de&&de.nodeType===qn.ELEMENT_NODE}function er(de){return de&&de.nodeType===qn.TEXT_NODE}function Wn(de,we){var fe=de.childNodes||[];if(M(fe,Ri)||gi(we))return!1;var Te=M(fe,gi);return!(we&&Te&&fe.indexOf(Te)>fe.indexOf(we))}function or(de,we){var fe=de.childNodes||[];if(M(fe,function Te(Ye){return Ri(Ye)&&Ye!==we}))return!1;var ge=M(fe,gi);return!(we&&ge&&fe.indexOf(ge)>fe.indexOf(we))}function Lr(de,we,fe){var Te=de.childNodes||[],ge=we.childNodes||[];if(we.nodeType===qn.DOCUMENT_FRAGMENT_NODE){var Ye=ge.filter(Ri);if(Ye.length>1||M(ge,er))throw new Ot(Ne,"More than one element or text in fragment");if(1===Ye.length&&!Wn(de,fe))throw new Ot(Ne,"Element in fragment can not be inserted before doctype")}if(Ri(we)&&!Wn(de,fe))throw new Ot(Ne,"Only one element can be added and only after doctype");if(gi(we)){if(M(Te,gi))throw new Ot(Ne,"Only one doctype is allowed");var Ht=M(Te,Ri);if(fe&&Te.indexOf(Ht)<Te.indexOf(fe))throw new Ot(Ne,"Doctype can only be inserted before an element");if(!fe&&Ht)throw new Ot(Ne,"Doctype can not be appended since element is present")}}function Qn(de,we,fe){var Te=de.childNodes||[],ge=we.childNodes||[];if(we.nodeType===qn.DOCUMENT_FRAGMENT_NODE){var Ye=ge.filter(Ri);if(Ye.length>1||M(ge,er))throw new Ot(Ne,"More than one element or text in fragment");if(1===Ye.length&&!or(de,fe))throw new Ot(Ne,"Element in fragment can not be inserted before doctype")}if(Ri(we)&&!or(de,fe))throw new Ot(Ne,"Only one element can be added and only after doctype");if(gi(we)){if(M(Te,function(jr){return gi(jr)&&jr!==fe}))throw new Ot(Ne,"Only one doctype is allowed");var Ht=M(Te,Ri);if(fe&&Te.indexOf(Ht)<Te.indexOf(fe))throw new Ot(Ne,"Doctype can only be inserted before an element")}}function ti(de,we,fe,Te){(function Us(de,we,fe){if(!function Hr(de){return de&&(de.nodeType===qn.DOCUMENT_NODE||de.nodeType===qn.DOCUMENT_FRAGMENT_NODE||de.nodeType===qn.ELEMENT_NODE)}(de))throw new Ot(Ne,"Unexpected parent node type "+de.nodeType);if(fe&&fe.parentNode!==de)throw new Ot(ut,"child not in parent");if(!function pr(de){return de&&(Ri(de)||er(de)||gi(de)||de.nodeType===qn.DOCUMENT_FRAGMENT_NODE||de.nodeType===qn.COMMENT_NODE||de.nodeType===qn.PROCESSING_INSTRUCTION_NODE)}(we)||gi(we)&&de.nodeType!==qn.DOCUMENT_NODE)throw new Ot(Ne,"Unexpected node type "+we.nodeType+" for parent node type "+de.nodeType)})(de,we,fe),de.nodeType===qn.DOCUMENT_NODE&&(Te||Lr)(de,we,fe);var ge=we.parentNode;if(ge&&ge.removeChild(we),we.nodeType===Me){var Ye=we.firstChild;if(null==Ye)return we;var Ht=we.lastChild}else Ye=Ht=we;var pn=fe?fe.previousSibling:de.lastChild;Ye.previousSibling=pn,Ht.nextSibling=fe,pn?pn.nextSibling=Ye:de.firstChild=Ye,null==fe?de.lastChild=Ht:fe.previousSibling=Ht;do{Ye.parentNode=de}while(Ye!==Ht&&(Ye=Ye.nextSibling));return Tn(de.ownerDocument||de,de),we.nodeType==Me&&(we.firstChild=we.lastChild=null),we}function Ki(){this._nsMap={}}function Fr(){}function Rr(){}function Ir(){}function di(){}function kn(){}function mn(){}function Xt(){}function yn(){}function tr(){}function nr(){}function vr(){}function Jr(){}function tt(de,we){var fe=[],Te=9==this.nodeType&&this.documentElement||this,ge=Te.prefix,Ye=Te.namespaceURI;if(Ye&&null==ge&&null==(ge=Te.lookupPrefix(Ye)))var Ht=[{namespace:Ye,prefix:null}];return $t(this,fe,de,we,Ht),fe.join("")}function Ze(de,we,fe){var Te=de.prefix||"",ge=de.namespaceURI;if(!ge||"xml"===Te&&ge===re.XML||ge===re.XMLNS)return!1;for(var Ye=fe.length;Ye--;){var Ht=fe[Ye];if(Ht.prefix===Te)return Ht.namespace!==ge}return!0}function ht(de,we,fe){de.push(" ",we,'="',fe.replace(/[<>&"\t\n\r]/g,kr),'"')}function $t(de,we,fe,Te,ge){if(ge||(ge=[]),Te){if(!(de=Te(de)))return;if("string"==typeof de)return void we.push(de)}switch(de.nodeType){case Re:var Ye=de.attributes,Ht=Ye.length,rr=de.firstChild,pn=de.tagName,Nn=pn;if(!(fe=re.isHTML(de.namespaceURI)||fe)&&!de.prefix&&de.namespaceURI){for(var jr,Or=0;Or<Ye.length;Or++)if("xmlns"===Ye.item(Or).name){jr=Ye.item(Or).value;break}if(!jr)for(var wi=ge.length-1;wi>=0;wi--)if(""===(xr=ge[wi]).prefix&&xr.namespace===de.namespaceURI){jr=xr.namespace;break}if(jr!==de.namespaceURI)for(wi=ge.length-1;wi>=0;wi--){var xr;if((xr=ge[wi]).namespace===de.namespaceURI){xr.prefix&&(Nn=xr.prefix+":"+pn);break}}}we.push("<",Nn);for(var Zi=0;Zi<Ht;Zi++)"xmlns"==(Ms=Ye.item(Zi)).prefix?ge.push({prefix:Ms.localName,namespace:Ms.value}):"xmlns"==Ms.nodeName&&ge.push({prefix:"",namespace:Ms.value});for(Zi=0;Zi<Ht;Zi++){var Ms,is,vs;Ze(Ms=Ye.item(Zi),0,ge)&&(ht(we,(is=Ms.prefix||"")?"xmlns:"+is:"xmlns",vs=Ms.namespaceURI),ge.push({prefix:is,namespace:vs})),$t(Ms,we,fe,Te,ge)}if(pn===Nn&&Ze(de,0,ge)&&(ht(we,(is=de.prefix||"")?"xmlns:"+is:"xmlns",vs=de.namespaceURI),ge.push({prefix:is,namespace:vs})),rr||fe&&!/^(?:meta|link|img|br|hr|input)$/i.test(pn)){if(we.push(">"),fe&&/^script$/i.test(pn))for(;rr;)rr.data?we.push(rr.data):$t(rr,we,fe,Te,ge.slice()),rr=rr.nextSibling;else for(;rr;)$t(rr,we,fe,Te,ge.slice()),rr=rr.nextSibling;we.push("</",Nn,">")}else we.push("/>");return;case dt:case Me:for(rr=de.firstChild;rr;)$t(rr,we,fe,Te,ge.slice()),rr=rr.nextSibling;return;case yt:return ht(we,de.name,de.value);case ae:return we.push(de.data.replace(/[<&>]/g,kr));case Pt:return we.push("<![CDATA[",de.data,"]]>");case We:return we.push("\x3c!--",de.data,"--\x3e");case Fe:var Yi=de.publicId,_i=de.systemId;if(we.push("<!DOCTYPE ",de.name),Yi)we.push(" PUBLIC ",Yi),_i&&"."!=_i&&we.push(" ",_i),we.push(">");else if(_i&&"."!=_i)we.push(" SYSTEM ",_i,">");else{var Ci=de.internalSubset;Ci&&we.push(" [",Ci,"]"),we.push(">")}return;case nt:return we.push("<?",de.target," ",de.data,"?>");case et:return we.push("&",de.nodeName,";");default:we.push("??",de.nodeName)}}function Rt(de,we,fe){var Te;switch(we.nodeType){case Re:(Te=we.cloneNode(!1)).ownerDocument=de;case Me:break;case yt:fe=!0}if(Te||(Te=we.cloneNode(!1)),Te.ownerDocument=de,Te.parentNode=null,fe)for(var ge=we.firstChild;ge;)Te.appendChild(Rt(de,ge,fe)),ge=ge.nextSibling;return Te}function fn(de,we,fe){var Te=new we.constructor;for(var ge in we)if(Object.prototype.hasOwnProperty.call(we,ge)){var Ye=we[ge];"object"!=typeof Ye&&Ye!=Te[ge]&&(Te[ge]=Ye)}switch(we.childNodes&&(Te.childNodes=new rn),Te.ownerDocument=de,Te.nodeType){case Re:var Ht=we.attributes,pn=Te.attributes=new dr,Nn=Ht.length;pn._ownerElement=Te;for(var jr=0;jr<Nn;jr++)Te.setAttributeNode(fn(de,Ht.item(jr),!0));break;case yt:fe=!0}if(fe)for(var Or=we.firstChild;Or;)Te.appendChild(fn(de,Or,fe)),Or=Or.nextSibling;return Te}function Xn(de,we,fe){de[we]=fe}Mt.INVALID_STATE_ERR=(St[11]="Invalid state",11),Mt.SYNTAX_ERR=(St[12]="Syntax error",12),Mt.INVALID_MODIFICATION_ERR=(St[13]="Invalid modification",13),Mt.NAMESPACE_ERR=(St[14]="Invalid namespace",14),Mt.INVALID_ACCESS_ERR=(St[15]="Invalid access",15),Ot.prototype=Error.prototype,Ke(Mt,Ot),rn.prototype={length:0,item:function(de){return this[de]||null},toString:function(de,we){for(var fe=[],Te=0;Te<this.length;Te++)$t(this[Te],fe,de,we);return fe.join("")},filter:function(de){return Array.prototype.filter.call(this,de)},indexOf:function(de){return Array.prototype.indexOf.call(this,de)}},zt.prototype.item=function(de){return bn(this),this[de]},Ie(zt,rn),dr.prototype={length:0,item:rn.prototype.item,getNamedItem:function(de){for(var we=this.length;we--;){var fe=this[we];if(fe.nodeName==de)return fe}},setNamedItem:function(de){var we=de.ownerElement;if(we&&we!=this._ownerElement)throw new Ot(ot);var fe=this.getNamedItem(de.nodeName);return Zn(this._ownerElement,this,de,fe),fe},setNamedItemNS:function(de){var fe,we=de.ownerElement;if(we&&we!=this._ownerElement)throw new Ot(ot);return fe=this.getNamedItemNS(de.namespaceURI,de.localName),Zn(this._ownerElement,this,de,fe),fe},removeNamedItem:function(de){var we=this.getNamedItem(de);return Vr(this._ownerElement,this,we),we},removeNamedItemNS:function(de,we){var fe=this.getNamedItemNS(de,we);return Vr(this._ownerElement,this,fe),fe},getNamedItemNS:function(de,we){for(var fe=this.length;fe--;){var Te=this[fe];if(Te.localName==we&&Te.namespaceURI==de)return Te}return null}},mr.prototype={hasFeature:function(de,we){return!0},createDocument:function(de,we,fe){var Te=new fr;if(Te.implementation=this,Te.childNodes=new rn,Te.doctype=fe||null,fe&&Te.appendChild(fe),we){var ge=Te.createElementNS(de,we);Te.appendChild(ge)}return Te},createDocumentType:function(de,we,fe){var Te=new mn;return Te.name=de,Te.nodeName=de,Te.publicId=we||"",Te.systemId=fe||"",Te}},qn.prototype={firstChild:null,lastChild:null,previousSibling:null,nextSibling:null,attributes:null,parentNode:null,childNodes:null,ownerDocument:null,nodeValue:null,namespaceURI:null,prefix:null,localName:null,insertBefore:function(de,we){return ti(this,de,we)},replaceChild:function(de,we){ti(this,de,we,Qn),we&&this.removeChild(we)},removeChild:function(de){return ci(this,de)},appendChild:function(de){return this.insertBefore(de,null)},hasChildNodes:function(){return null!=this.firstChild},cloneNode:function(de){return fn(this.ownerDocument||this,this,de)},normalize:function(){for(var de=this.firstChild;de;){var we=de.nextSibling;we&&we.nodeType==ae&&de.nodeType==ae?(this.removeChild(we),de.appendData(we.data)):(de.normalize(),de=we)}},isSupported:function(de,we){return this.ownerDocument.implementation.hasFeature(de,we)},hasAttributes:function(){return this.attributes.length>0},lookupPrefix:function(de){for(var we=this;we;){var fe=we._nsMap;if(fe)for(var Te in fe)if(Object.prototype.hasOwnProperty.call(fe,Te)&&fe[Te]===de)return Te;we=we.nodeType==yt?we.ownerDocument:we.parentNode}return null},lookupNamespaceURI:function(de){for(var we=this;we;){var fe=we._nsMap;if(fe&&Object.prototype.hasOwnProperty.call(fe,de))return fe[de];we=we.nodeType==yt?we.ownerDocument:we.parentNode}return null},isDefaultNamespace:function(de){return null==this.lookupPrefix(de)}},Ke(Pe,qn),Ke(Pe,qn.prototype),fr.prototype={nodeName:"#document",nodeType:dt,doctype:null,documentElement:null,_inc:1,insertBefore:function(de,we){if(de.nodeType==Me){for(var fe=de.firstChild;fe;){var Te=fe.nextSibling;this.insertBefore(fe,we),fe=Te}return de}return ti(this,de,we),de.ownerDocument=this,null===this.documentElement&&de.nodeType===Re&&(this.documentElement=de),de},removeChild:function(de){return this.documentElement==de&&(this.documentElement=null),ci(this,de)},replaceChild:function(de,we){ti(this,de,we,Qn),de.ownerDocument=this,we&&this.removeChild(we),Ri(de)&&(this.documentElement=de)},importNode:function(de,we){return Rt(this,de,we)},getElementById:function(de){var we=null;return ii(this.documentElement,function(fe){if(fe.nodeType==Re&&fe.getAttribute("id")==de)return we=fe,!0}),we},getElementsByClassName:function(de){var we=Ge(de);return new zt(this,function(fe){var Te=[];return we.length>0&&ii(fe.documentElement,function(ge){if(ge!==fe&&ge.nodeType===Re){var Ye=ge.getAttribute("class");if(Ye){var Ht=de===Ye;if(!Ht){var pn=Ge(Ye);Ht=we.every(function He(de){return function(we){return de&&-1!==de.indexOf(we)}}(pn))}Ht&&Te.push(ge)}}}),Te})},createElement:function(de){var we=new Ki;return we.ownerDocument=this,we.nodeName=de,we.tagName=de,we.localName=de,we.childNodes=new rn,(we.attributes=new dr)._ownerElement=we,we},createDocumentFragment:function(){var de=new nr;return de.ownerDocument=this,de.childNodes=new rn,de},createTextNode:function(de){var we=new Ir;return we.ownerDocument=this,we.appendData(de),we},createComment:function(de){var we=new di;return we.ownerDocument=this,we.appendData(de),we},createCDATASection:function(de){var we=new kn;return we.ownerDocument=this,we.appendData(de),we},createProcessingInstruction:function(de,we){var fe=new vr;return fe.ownerDocument=this,fe.tagName=fe.target=de,fe.nodeValue=fe.data=we,fe},createAttribute:function(de){var we=new Fr;return we.ownerDocument=this,we.name=de,we.nodeName=de,we.localName=de,we.specified=!0,we},createEntityReference:function(de){var we=new tr;return we.ownerDocument=this,we.nodeName=de,we},createElementNS:function(de,we){var fe=new Ki,Te=we.split(":"),ge=fe.attributes=new dr;return fe.childNodes=new rn,fe.ownerDocument=this,fe.nodeName=we,fe.tagName=we,fe.namespaceURI=de,2==Te.length?(fe.prefix=Te[0],fe.localName=Te[1]):fe.localName=we,ge._ownerElement=fe,fe},createAttributeNS:function(de,we){var fe=new Fr,Te=we.split(":");return fe.ownerDocument=this,fe.nodeName=we,fe.name=we,fe.namespaceURI=de,fe.specified=!0,2==Te.length?(fe.prefix=Te[0],fe.localName=Te[1]):fe.localName=we,fe}},Ie(fr,qn),fr.prototype.getElementsByTagName=(Ki.prototype={nodeType:Re,hasAttribute:function(de){return null!=this.getAttributeNode(de)},getAttribute:function(de){var we=this.getAttributeNode(de);return we&&we.value||""},getAttributeNode:function(de){return this.attributes.getNamedItem(de)},setAttribute:function(de,we){var fe=this.ownerDocument.createAttribute(de);fe.value=fe.nodeValue=""+we,this.setAttributeNode(fe)},removeAttribute:function(de){var we=this.getAttributeNode(de);we&&this.removeAttributeNode(we)},appendChild:function(de){return de.nodeType===Me?this.insertBefore(de,null):function Vi(de,we){return we.parentNode&&we.parentNode.removeChild(we),we.parentNode=de,we.previousSibling=de.lastChild,we.nextSibling=null,we.previousSibling?we.previousSibling.nextSibling=we:de.firstChild=we,de.lastChild=we,Tn(de.ownerDocument,de,we),we}(this,de)},setAttributeNode:function(de){return this.attributes.setNamedItem(de)},setAttributeNodeNS:function(de){return this.attributes.setNamedItemNS(de)},removeAttributeNode:function(de){return this.attributes.removeNamedItem(de.nodeName)},removeAttributeNS:function(de,we){var fe=this.getAttributeNodeNS(de,we);fe&&this.removeAttributeNode(fe)},hasAttributeNS:function(de,we){return null!=this.getAttributeNodeNS(de,we)},getAttributeNS:function(de,we){var fe=this.getAttributeNodeNS(de,we);return fe&&fe.value||""},setAttributeNS:function(de,we,fe){var Te=this.ownerDocument.createAttributeNS(de,we);Te.value=Te.nodeValue=""+fe,this.setAttributeNode(Te)},getAttributeNodeNS:function(de,we){return this.attributes.getNamedItemNS(de,we)},getElementsByTagName:function(de){return new zt(this,function(we){var fe=[];return ii(we,function(Te){Te!==we&&Te.nodeType==Re&&("*"===de||Te.tagName==de)&&fe.push(Te)}),fe})},getElementsByTagNameNS:function(de,we){return new zt(this,function(fe){var Te=[];return ii(fe,function(ge){ge!==fe&&ge.nodeType===Re&&("*"===de||ge.namespaceURI===de)&&("*"===we||ge.localName==we)&&Te.push(ge)}),Te})}}).getElementsByTagName,fr.prototype.getElementsByTagNameNS=Ki.prototype.getElementsByTagNameNS,Ie(Ki,qn),Fr.prototype.nodeType=yt,Ie(Fr,qn),Rr.prototype={data:"",substringData:function(de,we){return this.data.substring(de,de+we)},appendData:function(de){this.nodeValue=this.data=de=this.data+de,this.length=de.length},insertData:function(de,we){this.replaceData(de,0,we)},appendChild:function(de){throw new Error(St[Ne])},deleteData:function(de,we){this.replaceData(de,we,"")},replaceData:function(de,we,fe){var Te=this.data.substring(0,de),ge=this.data.substring(de+we);this.nodeValue=this.data=fe=Te+fe+ge,this.length=fe.length}},Ie(Rr,qn),Ir.prototype={nodeName:"#text",nodeType:ae,splitText:function(de){var we=this.data,fe=we.substring(de);we=we.substring(0,de),this.data=this.nodeValue=we,this.length=we.length;var Te=this.ownerDocument.createTextNode(fe);return this.parentNode&&this.parentNode.insertBefore(Te,this.nextSibling),Te}},Ie(Ir,Rr),di.prototype={nodeName:"#comment",nodeType:We},Ie(di,Rr),kn.prototype={nodeName:"#cdata-section",nodeType:Pt},Ie(kn,Rr),mn.prototype.nodeType=Fe,Ie(mn,qn),Xt.prototype.nodeType=Et,Ie(Xt,qn),yn.prototype.nodeType=at,Ie(yn,qn),tr.prototype.nodeType=et,Ie(tr,qn),nr.prototype.nodeName="#document-fragment",nr.prototype.nodeType=Me,Ie(nr,qn),vr.prototype.nodeType=nt,Ie(vr,qn),Jr.prototype.serializeToString=function(de,we,fe){return tt.call(de,we,fe)},qn.prototype.toString=tt;try{if(Object.defineProperty){let de=function(we){switch(we.nodeType){case Re:case Me:var fe=[];for(we=we.firstChild;we;)7!==we.nodeType&&8!==we.nodeType&&fe.push(de(we)),we=we.nextSibling;return fe.join("");default:return we.nodeValue}};Object.defineProperty(zt.prototype,"length",{get:function(){return bn(this),this.$$length}}),Object.defineProperty(qn.prototype,"textContent",{get:function(){return de(this)},set:function(we){switch(this.nodeType){case Re:case Me:for(;this.firstChild;)this.removeChild(this.firstChild);(we||String(we))&&this.appendChild(this.ownerDocument.createTextNode(we));break;default:this.data=we,this.value=we,this.nodeValue=we}}}),Xn=function(we,fe,Te){we["$$"+fe]=Te}}}catch{}it.DocumentType=mn,it.DOMException=Ot,it.DOMImplementation=mr,it.Element=Ki,it.Node=qn,it.NodeList=rn,it.XMLSerializer=Jr},4436:(Qt,it,K)=>{var E=K(9401).freeze;it.XML_ENTITIES=E({amp:"&",apos:"'",gt:">",lt:"<",quot:'"'}),it.HTML_ENTITIES=E({lt:"<",gt:">",amp:"&",quot:'"',apos:"'",Agrave:"\xc0",Aacute:"\xc1",Acirc:"\xc2",Atilde:"\xc3",Auml:"\xc4",Aring:"\xc5",AElig:"\xc6",Ccedil:"\xc7",Egrave:"\xc8",Eacute:"\xc9",Ecirc:"\xca",Euml:"\xcb",Igrave:"\xcc",Iacute:"\xcd",Icirc:"\xce",Iuml:"\xcf",ETH:"\xd0",Ntilde:"\xd1",Ograve:"\xd2",Oacute:"\xd3",Ocirc:"\xd4",Otilde:"\xd5",Ouml:"\xd6",Oslash:"\xd8",Ugrave:"\xd9",Uacute:"\xda",Ucirc:"\xdb",Uuml:"\xdc",Yacute:"\xdd",THORN:"\xde",szlig:"\xdf",agrave:"\xe0",aacute:"\xe1",acirc:"\xe2",atilde:"\xe3",auml:"\xe4",aring:"\xe5",aelig:"\xe6",ccedil:"\xe7",egrave:"\xe8",eacute:"\xe9",ecirc:"\xea",euml:"\xeb",igrave:"\xec",iacute:"\xed",icirc:"\xee",iuml:"\xef",eth:"\xf0",ntilde:"\xf1",ograve:"\xf2",oacute:"\xf3",ocirc:"\xf4",otilde:"\xf5",ouml:"\xf6",oslash:"\xf8",ugrave:"\xf9",uacute:"\xfa",ucirc:"\xfb",uuml:"\xfc",yacute:"\xfd",thorn:"\xfe",yuml:"\xff",nbsp:"\xa0",iexcl:"\xa1",cent:"\xa2",pound:"\xa3",curren:"\xa4",yen:"\xa5",brvbar:"\xa6",sect:"\xa7",uml:"\xa8",copy:"\xa9",ordf:"\xaa",laquo:"\xab",not:"\xac",shy:"\xad\xad",reg:"\xae",macr:"\xaf",deg:"\xb0",plusmn:"\xb1",sup2:"\xb2",sup3:"\xb3",acute:"\xb4",micro:"\xb5",para:"\xb6",middot:"\xb7",cedil:"\xb8",sup1:"\xb9",ordm:"\xba",raquo:"\xbb",frac14:"\xbc",frac12:"\xbd",frac34:"\xbe",iquest:"\xbf",times:"\xd7",divide:"\xf7",forall:"\u2200",part:"\u2202",exist:"\u2203",empty:"\u2205",nabla:"\u2207",isin:"\u2208",notin:"\u2209",ni:"\u220b",prod:"\u220f",sum:"\u2211",minus:"\u2212",lowast:"\u2217",radic:"\u221a",prop:"\u221d",infin:"\u221e",ang:"\u2220",and:"\u2227",or:"\u2228",cap:"\u2229",cup:"\u222a",int:"\u222b",there4:"\u2234",sim:"\u223c",cong:"\u2245",asymp:"\u2248",ne:"\u2260",equiv:"\u2261",le:"\u2264",ge:"\u2265",sub:"\u2282",sup:"\u2283",nsub:"\u2284",sube:"\u2286",supe:"\u2287",oplus:"\u2295",otimes:"\u2297",perp:"\u22a5",sdot:"\u22c5",Alpha:"\u0391",Beta:"\u0392",Gamma:"\u0393",Delta:"\u0394",Epsilon:"\u0395",Zeta:"\u0396",Eta:"\u0397",Theta:"\u0398",Iota:"\u0399",Kappa:"\u039a",Lambda:"\u039b",Mu:"\u039c",Nu:"\u039d",Xi:"\u039e",Omicron:"\u039f",Pi:"\u03a0",Rho:"\u03a1",Sigma:"\u03a3",Tau:"\u03a4",Upsilon:"\u03a5",Phi:"\u03a6",Chi:"\u03a7",Psi:"\u03a8",Omega:"\u03a9",alpha:"\u03b1",beta:"\u03b2",gamma:"\u03b3",delta:"\u03b4",epsilon:"\u03b5",zeta:"\u03b6",eta:"\u03b7",theta:"\u03b8",iota:"\u03b9",kappa:"\u03ba",lambda:"\u03bb",mu:"\u03bc",nu:"\u03bd",xi:"\u03be",omicron:"\u03bf",pi:"\u03c0",rho:"\u03c1",sigmaf:"\u03c2",sigma:"\u03c3",tau:"\u03c4",upsilon:"\u03c5",phi:"\u03c6",chi:"\u03c7",psi:"\u03c8",omega:"\u03c9",thetasym:"\u03d1",upsih:"\u03d2",piv:"\u03d6",OElig:"\u0152",oelig:"\u0153",Scaron:"\u0160",scaron:"\u0161",Yuml:"\u0178",fnof:"\u0192",circ:"\u02c6",tilde:"\u02dc",ensp:"\u2002",emsp:"\u2003",thinsp:"\u2009",zwnj:"\u200c",zwj:"\u200d",lrm:"\u200e",rlm:"\u200f",ndash:"\u2013",mdash:"\u2014",lsquo:"\u2018",rsquo:"\u2019",sbquo:"\u201a",ldquo:"\u201c",rdquo:"\u201d",bdquo:"\u201e",dagger:"\u2020",Dagger:"\u2021",bull:"\u2022",hellip:"\u2026",permil:"\u2030",prime:"\u2032",Prime:"\u2033",lsaquo:"\u2039",rsaquo:"\u203a",oline:"\u203e",euro:"\u20ac",trade:"\u2122",larr:"\u2190",uarr:"\u2191",rarr:"\u2192",darr:"\u2193",harr:"\u2194",crarr:"\u21b5",lceil:"\u2308",rceil:"\u2309",lfloor:"\u230a",rfloor:"\u230b",loz:"\u25ca",spades:"\u2660",clubs:"\u2663",hearts:"\u2665",diams:"\u2666"}),it.entityMap=it.HTML_ENTITIES},978:(Qt,it,K)=>{K(6853);it.DOMParser=K(1991).DOMParser},8702:(Qt,it,K)=>{var E=K(9401).NAMESPACE,M=/[A-Z_a-z\xC0-\xD6\xD8-\xF6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,re=new RegExp("[\\-\\.0-9"+M.source.slice(1,-1)+"\\u00B7\\u0300-\\u036F\\u203F-\\u2040]"),Oe=new RegExp("^"+M.source+re.source+"*(?::"+M.source+re.source+"*)?$"),De=0,ke=1,Ge=2,He=3,Ke=4,Ie=5,Pe=6,Re=7;function yt(J,he){this.message=J,this.locator=he,Error.captureStackTrace&&Error.captureStackTrace(this,yt)}function ae(){}function et(J,he){return he.lineNumber=J.lineNumber,he.columnNumber=J.columnNumber,he}function at(J,he,Ne,mt,st,xt){function Xe(jt,_n,Ot){Ne.attributeNames.hasOwnProperty(jt)&&xt.fatalError("Attribute "+jt+" redefined"),Ne.addValue(jt,_n.replace(/[\t\n\r]/g," ").replace(/&#?\w+;/g,st),Ot)}for(var ut,ot=++he,lt=De;;){var gt=J.charAt(ot);switch(gt){case"=":if(lt===ke)ut=J.slice(he,ot),lt=He;else{if(lt!==Ge)throw new Error("attribute equal must after attrName");lt=He}break;case"'":case'"':if(lt===He||lt===ke){if(lt===ke&&(xt.warning('attribute value must after "="'),ut=J.slice(he,ot)),!((ot=J.indexOf(gt,he=ot+1))>0))throw new Error("attribute value no end '"+gt+"' match");Xe(ut,Je=J.slice(he,ot),he-1),lt=Ie}else{if(lt!=Ke)throw new Error('attribute value must after "="');Xe(ut,Je=J.slice(he,ot),he),xt.warning('attribute "'+ut+'" missed start quot('+gt+")!!"),he=ot+1,lt=Ie}break;case"/":switch(lt){case De:Ne.setTagName(J.slice(he,ot));case Ie:case Pe:case Re:lt=Re,Ne.closed=!0;case Ke:case ke:case Ge:break;default:throw new Error("attribute invalid close char('/')")}break;case"":return xt.error("unexpected end of input"),lt==De&&Ne.setTagName(J.slice(he,ot)),ot;case">":switch(lt){case De:Ne.setTagName(J.slice(he,ot));case Ie:case Pe:case Re:break;case Ke:case ke:"/"===(Je=J.slice(he,ot)).slice(-1)&&(Ne.closed=!0,Je=Je.slice(0,-1));case Ge:lt===Ge&&(Je=ut),lt==Ke?(xt.warning('attribute "'+Je+'" missed quot(")!'),Xe(ut,Je,he)):((!E.isHTML(mt[""])||!Je.match(/^(?:disabled|checked|selected)$/i))&&xt.warning('attribute "'+Je+'" missed value!! "'+Je+'" instead!!'),Xe(Je,Je,he));break;case He:throw new Error("attribute value missed!!")}return ot;case"\x80":gt=" ";default:if(gt<=" ")switch(lt){case De:Ne.setTagName(J.slice(he,ot)),lt=Pe;break;case ke:ut=J.slice(he,ot),lt=Ge;break;case Ke:var Je=J.slice(he,ot);xt.warning('attribute "'+Je+'" missed quot(")!!'),Xe(ut,Je,he);case Ie:lt=Pe}else switch(lt){case Ge:(!E.isHTML(mt[""])||!ut.match(/^(?:disabled|checked|selected)$/i))&&xt.warning('attribute "'+ut+'" missed value!! "'+ut+'" instead2!!'),Xe(ut,ut,he),he=ot,lt=ke;break;case Ie:xt.warning('attribute space is required"'+ut+'"!!');case Pe:lt=ke,he=ot;break;case He:lt=Ke,he=ot;break;case Re:throw new Error("elements closed character '/' and '>' must be connected to")}}ot++}}function nt(J,he,Ne){for(var mt=J.tagName,st=null,gt=J.length;gt--;){var xt=J[gt],Xe=xt.qName,ut=xt.value;if((Nt=Xe.indexOf(":"))>0)var Je=xt.prefix=Xe.slice(0,Nt),ot=Xe.slice(Nt+1),lt="xmlns"===Je&&ot;else ot=Xe,Je=null,lt="xmlns"===Xe&&"";xt.localName=ot,!1!==lt&&(null==st&&(st={},Fe(Ne,Ne={})),Ne[lt]=st[lt]=ut,xt.uri=E.XMLNS,he.startPrefixMapping(lt,ut))}for(gt=J.length;gt--;)(Je=(xt=J[gt]).prefix)&&("xml"===Je&&(xt.uri=E.XML),"xmlns"!==Je&&(xt.uri=Ne[Je||""]));var Nt;(Nt=mt.indexOf(":"))>0?(Je=J.prefix=mt.slice(0,Nt),ot=J.localName=mt.slice(Nt+1)):(Je=null,ot=J.localName=mt);var jt=J.uri=Ne[Je||""];if(he.startElement(jt,ot,mt,J),!J.closed)return J.currentNSMap=Ne,J.localNSMap=st,!0;if(he.endElement(jt,ot,mt),st)for(Je in st)Object.prototype.hasOwnProperty.call(st,Je)&&he.endPrefixMapping(Je)}function We(J,he,Ne,mt,st){if(/^(?:script|textarea)$/i.test(Ne)){var xt=J.indexOf("</"+Ne+">",he),Xe=J.substring(he+1,xt);if(/[&<]/.test(Xe))return/^script$/i.test(Ne)?(st.characters(Xe,0,Xe.length),xt):(Xe=Xe.replace(/&#?\w+;/g,mt),st.characters(Xe,0,Xe.length),xt)}return he+1}function dt(J,he,Ne,mt){var st=mt[Ne];return null==st&&((st=J.lastIndexOf("</"+Ne+">"))<he&&(st=J.lastIndexOf("</"+Ne)),mt[Ne]=st),st<he}function Fe(J,he){for(var Ne in J)Object.prototype.hasOwnProperty.call(J,Ne)&&(he[Ne]=J[Ne])}function Me(J,he,Ne,mt){if("-"===J.charAt(he+2))return"-"===J.charAt(he+3)?(xt=J.indexOf("--\x3e",he+4))>he?(Ne.comment(J,he+4,xt-he-4),xt+3):(mt.error("Unclosed comment"),-1):-1;if("CDATA["==J.substr(he+3,6)){var xt=J.indexOf("]]>",he+9);return Ne.startCDATA(),Ne.characters(J,he+9,xt-he-9),Ne.endCDATA(),xt+3}var Xe=function St(J,he){var Ne,mt=[],st=/'[^']+'|"[^"]+"|[^\s<>\/=]+=?|(\/?\s*>|<)/g;for(st.lastIndex=he,st.exec(J);Ne=st.exec(J);)if(mt.push(Ne),Ne[1])return mt}(J,he),ut=Xe.length;if(ut>1&&/!doctype/i.test(Xe[0][0])){var Je=Xe[1][0],ot=!1,lt=!1;ut>3&&(/^public$/i.test(Xe[2][0])?(ot=Xe[3][0],lt=ut>4&&Xe[4][0]):/^system$/i.test(Xe[2][0])&&(lt=Xe[3][0]));var gt=Xe[ut-1];return Ne.startDTD(Je,ot,lt),Ne.endDTD(),gt.index+gt[0].length}return-1}function Et(J,he,Ne){var mt=J.indexOf("?>",he);if(mt){var st=J.substring(he,mt).match(/^<\?(\S*)\s*([\s\S]*?)\s*$/);return st?(Ne.processingInstruction(st[1],st[2]),mt+2):-1}return-1}function Mt(){this.attributeNames={}}(yt.prototype=new Error).name=yt.name,ae.prototype={parse:function(J,he,Ne){var mt=this.domBuilder;mt.startDocument(),Fe(he,he={}),function Pt(J,he,Ne,mt,st){function Xe(Hr){var pr=Hr.slice(1,-1);return Object.hasOwnProperty.call(Ne,pr)?Ne[pr]:"#"===pr.charAt(0)?function xt(Hr){return Hr>65535?(Hr-=65536,String.fromCharCode(55296+(Hr>>10),56320+(1023&Hr))):String.fromCharCode(Hr)}(parseInt(pr.substr(1).replace("x","0x"))):(st.error("entity not found:"+Hr),Hr)}function ut(Hr){if(Hr>Ot){var pr=J.substring(Ot,Hr).replace(/&#?\w+;/g,Xe);Nt&&Je(Ot),mt.characters(pr,0,Hr-Ot),Ot=Hr}}function Je(Hr,pr){for(;Hr>=lt&&(pr=gt.exec(J));)lt=(ot=pr.index)+pr[0].length,Nt.lineNumber++;Nt.columnNumber=Hr-ot+1}for(var ot=0,lt=0,gt=/.*(?:\r\n?|\n)|.*$/g,Nt=mt.locator,jt=[{currentNSMap:he}],_n={},Ot=0;;){try{var rn=J.indexOf("<",Ot);if(rn<0){if(!J.substr(Ot).match(/^\s*$/)){var zt=mt.doc,bn=zt.createTextNode(J.substr(Ot));zt.appendChild(bn),mt.currentElement=bn}return}switch(rn>Ot&&ut(rn),J.charAt(rn+1)){case"/":var fr=J.indexOf(">",rn+3),dr=J.substring(rn+2,fr).replace(/[ \t\n\r]+$/g,""),Hn=jt.pop();fr<0?(dr=J.substring(rn+2).replace(/[\s<].*/,""),st.error("end tag name: "+dr+" is not complete:"+Hn.tagName),fr=rn+1+dr.length):dr.match(/\s</)&&(dr=dr.replace(/[\s<].*/,""),st.error("end tag name: "+dr+" maybe not complete"),fr=rn+1+dr.length);var Zn=Hn.localNSMap,Vr=Hn.tagName==dr;if(Vr||Hn.tagName&&Hn.tagName.toLowerCase()==dr.toLowerCase()){if(mt.endElement(Hn.uri,Hn.localName,dr),Zn)for(var qn in Zn)Object.prototype.hasOwnProperty.call(Zn,qn)&&mt.endPrefixMapping(qn);Vr||st.fatalError("end tag name: "+dr+" is not match the current start tagName:"+Hn.tagName)}else jt.push(Hn);fr++;break;case"?":Nt&&Je(rn),fr=Et(J,rn,mt);break;case"!":Nt&&Je(rn),fr=Me(J,rn,mt,st);break;default:Nt&&Je(rn);var kr=new Mt,ii=jt[jt.length-1].currentNSMap,Bn=(fr=at(J,rn,kr,ii,Xe,st),kr.length);if(!kr.closed&&dt(J,fr,kr.tagName,_n)&&(kr.closed=!0,Ne.nbsp||st.warning("unclosed xml attribute")),Nt&&Bn){for(var Ar=et(Nt,{}),Tn=0;Tn<Bn;Tn++){var ci=kr[Tn];Je(ci.offset),ci.locator=et(Nt,{})}mt.locator=Ar,nt(kr,mt,ii)&&jt.push(kr),mt.locator=Nt}else nt(kr,mt,ii)&&jt.push(kr);E.isHTML(kr.uri)&&!kr.closed?fr=We(J,fr,kr.tagName,Xe,mt):fr++}}catch(Hr){if(Hr instanceof yt)throw Hr;st.error("element parse error: "+Hr),fr=-1}fr>Ot?Ot=fr:ut(Math.max(rn,Ot)+1)}}(J,he,Ne,mt,this.errorHandler),mt.endDocument()}},Mt.prototype={setTagName:function(J){if(!Oe.test(J))throw new Error("invalid tagName:"+J);this.tagName=J},addValue:function(J,he,Ne){if(!Oe.test(J))throw new Error("invalid attribute:"+J);this.attributeNames[J]=this.length,this[this.length++]={qName:J,value:he,offset:Ne}},length:0,getLocalName:function(J){return this[J].localName},getLocator:function(J){return this[J].locator},getQName:function(J){return this[J].qName},getURI:function(J){return this[J].uri},getValue:function(J){return this[J].value}},it.XMLReader=ae,it.ParseError=yt},1421:(Qt,it,K)=>{var re,E=typeof global<"u"?global:typeof window<"u"?window:{},M=K(5893);typeof document<"u"?re=document:(re=E["__GLOBAL_DOCUMENT_CACHE@4"])||(re=E["__GLOBAL_DOCUMENT_CACHE@4"]=M),Qt.exports=re},9226:Qt=>{var it;it=typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Qt.exports=it},2703:Qt=>{Qt.exports=function K(E){if(!E)return!1;var M=it.call(E);return"[object Function]"===M||"function"==typeof E&&"[object RegExp]"!==M||typeof window<"u"&&(E===window.setTimeout||E===window.alert||E===window.confirm||E===window.prompt)};var it=Object.prototype.toString},1234:(Qt,it)=>{function K(ke){if(ke&&"object"==typeof ke){var Ge=ke.which||ke.keyCode||ke.charCode;Ge&&(ke=Ge)}if("number"==typeof ke)return Oe[ke];var Ke,He=String(ke);return(Ke=E[He.toLowerCase()])?Ke:(Ke=M[He.toLowerCase()])||(1===He.length?He.charCodeAt(0):void 0)}K.isEventKey=function(Ge,He){if(Ge&&"object"==typeof Ge){var Ke=Ge.which||Ge.keyCode||Ge.charCode;if(null==Ke)return!1;if("string"==typeof He){var Ie;if(Ie=E[He.toLowerCase()])return Ie===Ke;if(Ie=M[He.toLowerCase()])return Ie===Ke}else if("number"==typeof He)return He===Ke;return!1}};var E=(it=Qt.exports=K).code=it.codes={backspace:8,tab:9,enter:13,shift:16,ctrl:17,alt:18,"pause/break":19,"caps lock":20,esc:27,space:32,"page up":33,"page down":34,end:35,home:36,left:37,up:38,right:39,down:40,insert:45,delete:46,command:91,"left command":91,"right command":93,"numpad *":106,"numpad +":107,"numpad -":109,"numpad .":110,"numpad /":111,"num lock":144,"scroll lock":145,"my computer":182,"my calculator":183,";":186,"=":187,",":188,"-":189,".":190,"/":191,"`":192,"[":219,"\\":220,"]":221,"'":222},M=it.aliases={windows:91,"\u21e7":16,"\u2325":18,"\u2303":17,"\u2318":91,ctl:17,control:17,option:18,pause:19,break:19,caps:20,return:13,escape:27,spc:32,spacebar:32,pgup:33,pgdn:34,ins:45,del:46,cmd:91};for(re=97;re<123;re++)E[String.fromCharCode(re)]=re-32;for(var re=48;re<58;re++)E[re-48]=re;for(re=1;re<13;re++)E["f"+re]=re+111;for(re=0;re<10;re++)E["numpad "+re]=re+96;var Oe=it.names=it.title={};for(re in E)Oe[E[re]]=re;for(var De in M)E[De]=M[De]},7459:(Qt,it,K)=>{var E=K(3357).getUint64;Qt.exports=function(re){var Oe=new DataView(re.buffer,re.byteOffset,re.byteLength),De={version:re[0],flags:new Uint8Array(re.subarray(1,4)),references:[],referenceId:Oe.getUint32(4),timescale:Oe.getUint32(8)},ke=12;0===De.version?(De.earliestPresentationTime=Oe.getUint32(ke),De.firstOffset=Oe.getUint32(ke+4),ke+=8):(De.earliestPresentationTime=E(re.subarray(ke)),De.firstOffset=E(re.subarray(ke+8)),ke+=16);var Ge=Oe.getUint16(ke+=2);for(ke+=2;Ge>0;ke+=12,Ge--)De.references.push({referenceType:(128&re[ke])>>>7,referencedSize:2147483647&Oe.getUint32(ke),subsegmentDuration:Oe.getUint32(ke+4),startsWithSap:!!(128&re[ke+8]),sapType:(112&re[ke+8])>>>4,sapDeltaTime:268435455&Oe.getUint32(ke+8)});return De}},6277:Qt=>{var K,E,M,re,Oe,De,ke;Oe=function(Ge,He){return K(re(Ge,He))},De=function(Ge,He){return E(M(Ge),He)},ke=function(Ge,He,Ke){return M(Ke?Ge:Ge-He)},Qt.exports={ONE_SECOND_IN_TS:9e4,secondsToVideoTs:K=function(Ge){return 9e4*Ge},secondsToAudioTs:E=function(Ge,He){return Ge*He},videoTsToSeconds:M=function(Ge){return Ge/9e4},audioTsToSeconds:re=function(Ge,He){return Ge/He},audioTsToVideoTs:Oe,videoTsToAudioTs:De,metadataTsToSeconds:ke}},3357:Qt=>{var it=Math.pow(2,32);Qt.exports={getUint64:function(E){var re,M=new DataView(E.buffer,E.byteOffset,E.byteLength);return M.getBigUint64?(re=M.getBigUint64(0))<Number.MAX_SAFE_INTEGER?Number(re):re:M.getUint32(0)*it+M.getUint32(4)},MAX_UINT32:it}},1135:(Qt,it,K)=>{"use strict";K.d(it,{X:()=>M});var E=K(7579);class M extends E.x{constructor(Oe){super(),this._value=Oe}get value(){return this.getValue()}_subscribe(Oe){const De=super._subscribe(Oe);return!De.closed&&Oe.next(this._value),De}getValue(){const{hasError:Oe,thrownError:De,_value:ke}=this;if(Oe)throw De;return this._throwIfClosed(),ke}next(Oe){super.next(this._value=Oe)}}},9751:(Qt,it,K)=>{"use strict";K.d(it,{y:()=>He});var E=K(930),M=K(727),re=K(8822),Oe=K(9635),De=K(2416),ke=K(576),Ge=K(2806);let He=(()=>{class Re{constructor(ae){ae&&(this._subscribe=ae)}lift(ae){const Pt=new Re;return Pt.source=this,Pt.operator=ae,Pt}subscribe(ae,Pt,et){const at=function Pe(Re){return Re&&Re instanceof E.Lv||function Ie(Re){return Re&&(0,ke.m)(Re.next)&&(0,ke.m)(Re.error)&&(0,ke.m)(Re.complete)}(Re)&&(0,M.Nn)(Re)}(ae)?ae:new E.Hp(ae,Pt,et);return(0,Ge.x)(()=>{const{operator:nt,source:We}=this;at.add(nt?nt.call(at,We):We?this._subscribe(at):this._trySubscribe(at))}),at}_trySubscribe(ae){try{return this._subscribe(ae)}catch(Pt){ae.error(Pt)}}forEach(ae,Pt){return new(Pt=Ke(Pt))((et,at)=>{const nt=new E.Hp({next:We=>{try{ae(We)}catch(dt){at(dt),nt.unsubscribe()}},error:at,complete:et});this.subscribe(nt)})}_subscribe(ae){var Pt;return null===(Pt=this.source)||void 0===Pt?void 0:Pt.subscribe(ae)}[re.L](){return this}pipe(...ae){return(0,Oe.U)(ae)(this)}toPromise(ae){return new(ae=Ke(ae))((Pt,et)=>{let at;this.subscribe(nt=>at=nt,nt=>et(nt),()=>Pt(at))})}}return Re.create=yt=>new Re(yt),Re})();function Ke(Re){var yt;return null!==(yt=Re??De.v.Promise)&&void 0!==yt?yt:Promise}},7579:(Qt,it,K)=>{"use strict";K.d(it,{x:()=>Ge});var E=K(9751),M=K(727);const Oe=(0,K(3888).d)(Ke=>function(){Ke(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var De=K(8737),ke=K(2806);let Ge=(()=>{class Ke extends E.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(Pe){const Re=new He(this,this);return Re.operator=Pe,Re}_throwIfClosed(){if(this.closed)throw new Oe}next(Pe){(0,ke.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const Re of this.currentObservers)Re.next(Pe)}})}error(Pe){(0,ke.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=Pe;const{observers:Re}=this;for(;Re.length;)Re.shift().error(Pe)}})}complete(){(0,ke.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:Pe}=this;for(;Pe.length;)Pe.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var Pe;return(null===(Pe=this.observers)||void 0===Pe?void 0:Pe.length)>0}_trySubscribe(Pe){return this._throwIfClosed(),super._trySubscribe(Pe)}_subscribe(Pe){return this._throwIfClosed(),this._checkFinalizedStatuses(Pe),this._innerSubscribe(Pe)}_innerSubscribe(Pe){const{hasError:Re,isStopped:yt,observers:ae}=this;return Re||yt?M.Lc:(this.currentObservers=null,ae.push(Pe),new M.w0(()=>{this.currentObservers=null,(0,De.P)(ae,Pe)}))}_checkFinalizedStatuses(Pe){const{hasError:Re,thrownError:yt,isStopped:ae}=this;Re?Pe.error(yt):ae&&Pe.complete()}asObservable(){const Pe=new E.y;return Pe.source=this,Pe}}return Ke.create=(Ie,Pe)=>new He(Ie,Pe),Ke})();class He extends Ge{constructor(Ie,Pe){super(),this.destination=Ie,this.source=Pe}next(Ie){var Pe,Re;null===(Re=null===(Pe=this.destination)||void 0===Pe?void 0:Pe.next)||void 0===Re||Re.call(Pe,Ie)}error(Ie){var Pe,Re;null===(Re=null===(Pe=this.destination)||void 0===Pe?void 0:Pe.error)||void 0===Re||Re.call(Pe,Ie)}complete(){var Ie,Pe;null===(Pe=null===(Ie=this.destination)||void 0===Ie?void 0:Ie.complete)||void 0===Pe||Pe.call(Ie)}_subscribe(Ie){var Pe,Re;return null!==(Re=null===(Pe=this.source)||void 0===Pe?void 0:Pe.subscribe(Ie))&&void 0!==Re?Re:M.Lc}}},930:(Qt,it,K)=>{"use strict";K.d(it,{Hp:()=>et,Lv:()=>Re});var E=K(576),M=K(727),re=K(2416),Oe=K(7849),De=K(5032);const ke=Ke("C",void 0,void 0);function Ke(Fe,Me,Et){return{kind:Fe,value:Me,error:Et}}var Ie=K(3410),Pe=K(2806);class Re extends M.w0{constructor(Me){super(),this.isStopped=!1,Me?(this.destination=Me,(0,M.Nn)(Me)&&Me.add(this)):this.destination=dt}static create(Me,Et,Mt){return new et(Me,Et,Mt)}next(Me){this.isStopped?We(function He(Fe){return Ke("N",Fe,void 0)}(Me),this):this._next(Me)}error(Me){this.isStopped?We(function Ge(Fe){return Ke("E",void 0,Fe)}(Me),this):(this.isStopped=!0,this._error(Me))}complete(){this.isStopped?We(ke,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(Me){this.destination.next(Me)}_error(Me){try{this.destination.error(Me)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const yt=Function.prototype.bind;function ae(Fe,Me){return yt.call(Fe,Me)}class Pt{constructor(Me){this.partialObserver=Me}next(Me){const{partialObserver:Et}=this;if(Et.next)try{Et.next(Me)}catch(Mt){at(Mt)}}error(Me){const{partialObserver:Et}=this;if(Et.error)try{Et.error(Me)}catch(Mt){at(Mt)}else at(Me)}complete(){const{partialObserver:Me}=this;if(Me.complete)try{Me.complete()}catch(Et){at(Et)}}}class et extends Re{constructor(Me,Et,Mt){let St;if(super(),(0,E.m)(Me)||!Me)St={next:Me??void 0,error:Et??void 0,complete:Mt??void 0};else{let J;this&&re.v.useDeprecatedNextContext?(J=Object.create(Me),J.unsubscribe=()=>this.unsubscribe(),St={next:Me.next&&ae(Me.next,J),error:Me.error&&ae(Me.error,J),complete:Me.complete&&ae(Me.complete,J)}):St=Me}this.destination=new Pt(St)}}function at(Fe){re.v.useDeprecatedSynchronousErrorHandling?(0,Pe.O)(Fe):(0,Oe.h)(Fe)}function We(Fe,Me){const{onStoppedNotification:Et}=re.v;Et&&Ie.z.setTimeout(()=>Et(Fe,Me))}const dt={closed:!0,next:De.Z,error:function nt(Fe){throw Fe},complete:De.Z}},727:(Qt,it,K)=>{"use strict";K.d(it,{Lc:()=>ke,w0:()=>De,Nn:()=>Ge});var E=K(576);const re=(0,K(3888).d)(Ke=>function(Pe){Ke(this),this.message=Pe?`${Pe.length} errors occurred during unsubscription:\n${Pe.map((Re,yt)=>`${yt+1}) ${Re.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=Pe});var Oe=K(8737);class De{constructor(Ie){this.initialTeardown=Ie,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let Ie;if(!this.closed){this.closed=!0;const{_parentage:Pe}=this;if(Pe)if(this._parentage=null,Array.isArray(Pe))for(const ae of Pe)ae.remove(this);else Pe.remove(this);const{initialTeardown:Re}=this;if((0,E.m)(Re))try{Re()}catch(ae){Ie=ae instanceof re?ae.errors:[ae]}const{_finalizers:yt}=this;if(yt){this._finalizers=null;for(const ae of yt)try{He(ae)}catch(Pt){Ie=Ie??[],Pt instanceof re?Ie=[...Ie,...Pt.errors]:Ie.push(Pt)}}if(Ie)throw new re(Ie)}}add(Ie){var Pe;if(Ie&&Ie!==this)if(this.closed)He(Ie);else{if(Ie instanceof De){if(Ie.closed||Ie._hasParent(this))return;Ie._addParent(this)}(this._finalizers=null!==(Pe=this._finalizers)&&void 0!==Pe?Pe:[]).push(Ie)}}_hasParent(Ie){const{_parentage:Pe}=this;return Pe===Ie||Array.isArray(Pe)&&Pe.includes(Ie)}_addParent(Ie){const{_parentage:Pe}=this;this._parentage=Array.isArray(Pe)?(Pe.push(Ie),Pe):Pe?[Pe,Ie]:Ie}_removeParent(Ie){const{_parentage:Pe}=this;Pe===Ie?this._parentage=null:Array.isArray(Pe)&&(0,Oe.P)(Pe,Ie)}remove(Ie){const{_finalizers:Pe}=this;Pe&&(0,Oe.P)(Pe,Ie),Ie instanceof De&&Ie._removeParent(this)}}De.EMPTY=(()=>{const Ke=new De;return Ke.closed=!0,Ke})();const ke=De.EMPTY;function Ge(Ke){return Ke instanceof De||Ke&&"closed"in Ke&&(0,E.m)(Ke.remove)&&(0,E.m)(Ke.add)&&(0,E.m)(Ke.unsubscribe)}function He(Ke){(0,E.m)(Ke)?Ke():Ke.unsubscribe()}},2416:(Qt,it,K)=>{"use strict";K.d(it,{v:()=>E});const E={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},9841:(Qt,it,K)=>{"use strict";K.d(it,{a:()=>Ie});var E=K(9751),M=K(4742),re=K(8996),Oe=K(4671),De=K(3268),ke=K(3269),Ge=K(1810),He=K(5403),Ke=K(9672);function Ie(...yt){const ae=(0,ke.yG)(yt),Pt=(0,ke.jO)(yt),{args:et,keys:at}=(0,M.D)(yt);if(0===et.length)return(0,re.D)([],ae);const nt=new E.y(function Pe(yt,ae,Pt=Oe.y){return et=>{Re(ae,()=>{const{length:at}=yt,nt=new Array(at);let We=at,dt=at;for(let Fe=0;Fe<at;Fe++)Re(ae,()=>{const Me=(0,re.D)(yt[Fe],ae);let Et=!1;Me.subscribe((0,He.x)(et,Mt=>{nt[Fe]=Mt,Et||(Et=!0,dt--),dt||et.next(Pt(nt.slice()))},()=>{--We||et.complete()}))},et)},et)}}(et,ae,at?We=>(0,Ge.n)(at,We):Oe.y));return Pt?nt.pipe((0,De.Z)(Pt)):nt}function Re(yt,ae,Pt){yt?(0,Ke.f)(Pt,yt,ae):ae()}},7272:(Qt,it,K)=>{"use strict";K.d(it,{z:()=>De});var E=K(8189),re=K(3269),Oe=K(8996);function De(...ke){return function M(){return(0,E.J)(1)}()((0,Oe.D)(ke,(0,re.yG)(ke)))}},515:(Qt,it,K)=>{"use strict";K.d(it,{E:()=>M});const M=new(K(9751).y)(De=>De.complete())},4128:(Qt,it,K)=>{"use strict";K.d(it,{D:()=>He});var E=K(9751),M=K(4742),re=K(8421),Oe=K(3269),De=K(5403),ke=K(3268),Ge=K(1810);function He(...Ke){const Ie=(0,Oe.jO)(Ke),{args:Pe,keys:Re}=(0,M.D)(Ke),yt=new E.y(ae=>{const{length:Pt}=Pe;if(!Pt)return void ae.complete();const et=new Array(Pt);let at=Pt,nt=Pt;for(let We=0;We<Pt;We++){let dt=!1;(0,re.Xf)(Pe[We]).subscribe((0,De.x)(ae,Fe=>{dt||(dt=!0,nt--),et[We]=Fe},()=>at--,void 0,()=>{(!at||!dt)&&(nt||ae.next(Re?(0,Ge.n)(Re,et):et),ae.complete())}))}});return Ie?yt.pipe((0,ke.Z)(Ie)):yt}},8996:(Qt,it,K)=>{"use strict";K.d(it,{D:()=>Me});var E=K(8421),M=K(5363),re=K(9468),ke=K(9751),He=K(2202),Ke=K(576),Ie=K(9672);function Re(Et,Mt){if(!Et)throw new Error("Iterable cannot be null");return new ke.y(St=>{(0,Ie.f)(St,Mt,()=>{const J=Et[Symbol.asyncIterator]();(0,Ie.f)(St,Mt,()=>{J.next().then(he=>{he.done?St.complete():St.next(he.value)})},0,!0)})})}var yt=K(3670),ae=K(8239),Pt=K(1144),et=K(6495),at=K(2206),nt=K(4532),We=K(3260);function Me(Et,Mt){return Mt?function Fe(Et,Mt){if(null!=Et){if((0,yt.c)(Et))return function Oe(Et,Mt){return(0,E.Xf)(Et).pipe((0,re.R)(Mt),(0,M.Q)(Mt))}(Et,Mt);if((0,Pt.z)(Et))return function Ge(Et,Mt){return new ke.y(St=>{let J=0;return Mt.schedule(function(){J===Et.length?St.complete():(St.next(Et[J++]),St.closed||this.schedule())})})}(Et,Mt);if((0,ae.t)(Et))return function De(Et,Mt){return(0,E.Xf)(Et).pipe((0,re.R)(Mt),(0,M.Q)(Mt))}(Et,Mt);if((0,at.D)(Et))return Re(Et,Mt);if((0,et.T)(Et))return function Pe(Et,Mt){return new ke.y(St=>{let J;return(0,Ie.f)(St,Mt,()=>{J=Et[He.h](),(0,Ie.f)(St,Mt,()=>{let he,Ne;try{({value:he,done:Ne}=J.next())}catch(mt){return void St.error(mt)}Ne?St.complete():St.next(he)},0,!0)}),()=>(0,Ke.m)(J?.return)&&J.return()})}(Et,Mt);if((0,We.L)(Et))return function dt(Et,Mt){return Re((0,We.Q)(Et),Mt)}(Et,Mt)}throw(0,nt.z)(Et)}(Et,Mt):(0,E.Xf)(Et)}},8421:(Qt,it,K)=>{"use strict";K.d(it,{Xf:()=>yt});var E=K(655),M=K(1144),re=K(8239),Oe=K(9751),De=K(3670),ke=K(2206),Ge=K(4532),He=K(6495),Ke=K(3260),Ie=K(576),Pe=K(7849),Re=K(8822);function yt(Fe){if(Fe instanceof Oe.y)return Fe;if(null!=Fe){if((0,De.c)(Fe))return function ae(Fe){return new Oe.y(Me=>{const Et=Fe[Re.L]();if((0,Ie.m)(Et.subscribe))return Et.subscribe(Me);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(Fe);if((0,M.z)(Fe))return function Pt(Fe){return new Oe.y(Me=>{for(let Et=0;Et<Fe.length&&!Me.closed;Et++)Me.next(Fe[Et]);Me.complete()})}(Fe);if((0,re.t)(Fe))return function et(Fe){return new Oe.y(Me=>{Fe.then(Et=>{Me.closed||(Me.next(Et),Me.complete())},Et=>Me.error(Et)).then(null,Pe.h)})}(Fe);if((0,ke.D)(Fe))return nt(Fe);if((0,He.T)(Fe))return function at(Fe){return new Oe.y(Me=>{for(const Et of Fe)if(Me.next(Et),Me.closed)return;Me.complete()})}(Fe);if((0,Ke.L)(Fe))return function We(Fe){return nt((0,Ke.Q)(Fe))}(Fe)}throw(0,Ge.z)(Fe)}function nt(Fe){return new Oe.y(Me=>{(function dt(Fe,Me){var Et,Mt,St,J;return(0,E.mG)(this,void 0,void 0,function*(){try{for(Et=(0,E.KL)(Fe);!(Mt=yield Et.next()).done;)if(Me.next(Mt.value),Me.closed)return}catch(he){St={error:he}}finally{try{Mt&&!Mt.done&&(J=Et.return)&&(yield J.call(Et))}finally{if(St)throw St.error}}Me.complete()})})(Fe,Me).catch(Et=>Me.error(Et))})}},6451:(Qt,it,K)=>{"use strict";K.d(it,{T:()=>ke});var E=K(8189),M=K(8421),re=K(515),Oe=K(3269),De=K(8996);function ke(...Ge){const He=(0,Oe.yG)(Ge),Ke=(0,Oe._6)(Ge,1/0),Ie=Ge;return Ie.length?1===Ie.length?(0,M.Xf)(Ie[0]):(0,E.J)(Ke)((0,De.D)(Ie,He)):re.E}},9646:(Qt,it,K)=>{"use strict";K.d(it,{of:()=>re});var E=K(3269),M=K(8996);function re(...Oe){const De=(0,E.yG)(Oe);return(0,M.D)(Oe,De)}},5403:(Qt,it,K)=>{"use strict";K.d(it,{x:()=>M});var E=K(930);function M(Oe,De,ke,Ge,He){return new re(Oe,De,ke,Ge,He)}class re extends E.Lv{constructor(De,ke,Ge,He,Ke,Ie){super(De),this.onFinalize=Ke,this.shouldUnsubscribe=Ie,this._next=ke?function(Pe){try{ke(Pe)}catch(Re){De.error(Re)}}:super._next,this._error=He?function(Pe){try{He(Pe)}catch(Re){De.error(Re)}finally{this.unsubscribe()}}:super._error,this._complete=Ge?function(){try{Ge()}catch(Pe){De.error(Pe)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var De;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:ke}=this;super.unsubscribe(),!ke&&(null===(De=this.onFinalize)||void 0===De||De.call(this))}}}},6590:(Qt,it,K)=>{"use strict";K.d(it,{d:()=>re});var E=K(4482),M=K(5403);function re(Oe){return(0,E.e)((De,ke)=>{let Ge=!1;De.subscribe((0,M.x)(ke,He=>{Ge=!0,ke.next(He)},()=>{Ge||ke.next(Oe),ke.complete()}))})}},9300:(Qt,it,K)=>{"use strict";K.d(it,{h:()=>re});var E=K(4482),M=K(5403);function re(Oe,De){return(0,E.e)((ke,Ge)=>{let He=0;ke.subscribe((0,M.x)(Ge,Ke=>Oe.call(De,Ke,He++)&&Ge.next(Ke)))})}},590:(Qt,it,K)=>{"use strict";K.d(it,{P:()=>Ge});var E=K(6805),M=K(9300),re=K(5698),Oe=K(6590),De=K(8068),ke=K(4671);function Ge(He,Ke){const Ie=arguments.length>=2;return Pe=>Pe.pipe(He?(0,M.h)((Re,yt)=>He(Re,yt,Pe)):ke.y,(0,re.q)(1),Ie?(0,Oe.d)(Ke):(0,De.T)(()=>new E.K))}},4004:(Qt,it,K)=>{"use strict";K.d(it,{U:()=>re});var E=K(4482),M=K(5403);function re(Oe,De){return(0,E.e)((ke,Ge)=>{let He=0;ke.subscribe((0,M.x)(Ge,Ke=>{Ge.next(Oe.call(De,Ke,He++))}))})}},9718:(Qt,it,K)=>{"use strict";K.d(it,{h:()=>M});var E=K(4004);function M(re){return(0,E.U)(()=>re)}},8189:(Qt,it,K)=>{"use strict";K.d(it,{J:()=>re});var E=K(5577),M=K(4671);function re(Oe=1/0){return(0,E.z)(M.y,Oe)}},5577:(Qt,it,K)=>{"use strict";K.d(it,{z:()=>He});var E=K(4004),M=K(8421),re=K(4482),Oe=K(9672),De=K(5403),Ge=K(576);function He(Ke,Ie,Pe=1/0){return(0,Ge.m)(Ie)?He((Re,yt)=>(0,E.U)((ae,Pt)=>Ie(Re,ae,yt,Pt))((0,M.Xf)(Ke(Re,yt))),Pe):("number"==typeof Ie&&(Pe=Ie),(0,re.e)((Re,yt)=>function ke(Ke,Ie,Pe,Re,yt,ae,Pt,et){const at=[];let nt=0,We=0,dt=!1;const Fe=()=>{dt&&!at.length&&!nt&&Ie.complete()},Me=Mt=>nt<Re?Et(Mt):at.push(Mt),Et=Mt=>{ae&&Ie.next(Mt),nt++;let St=!1;(0,M.Xf)(Pe(Mt,We++)).subscribe((0,De.x)(Ie,J=>{yt?.(J),ae?Me(J):Ie.next(J)},()=>{St=!0},void 0,()=>{if(St)try{for(nt--;at.length&&nt<Re;){const J=at.shift();Pt?(0,Oe.f)(Ie,Pt,()=>Et(J)):Et(J)}Fe()}catch(J){Ie.error(J)}}))};return Ke.subscribe((0,De.x)(Ie,Me,()=>{dt=!0,Fe()})),()=>{et?.()}}(Re,yt,Ke,Pe)))}},5363:(Qt,it,K)=>{"use strict";K.d(it,{Q:()=>Oe});var E=K(9672),M=K(4482),re=K(5403);function Oe(De,ke=0){return(0,M.e)((Ge,He)=>{Ge.subscribe((0,re.x)(He,Ke=>(0,E.f)(He,De,()=>He.next(Ke),ke),()=>(0,E.f)(He,De,()=>He.complete(),ke),Ke=>(0,E.f)(He,De,()=>He.error(Ke),ke)))})}},5026:(Qt,it,K)=>{"use strict";K.d(it,{R:()=>Oe});var E=K(4482),M=K(5403);function Oe(De,ke){return(0,E.e)(function re(De,ke,Ge,He,Ke){return(Ie,Pe)=>{let Re=Ge,yt=ke,ae=0;Ie.subscribe((0,M.x)(Pe,Pt=>{const et=ae++;yt=Re?De(yt,Pt,et):(Re=!0,Pt),He&&Pe.next(yt)},Ke&&(()=>{Re&&Pe.next(yt),Pe.complete()})))}}(De,ke,arguments.length>=2,!0))}},3099:(Qt,it,K)=>{"use strict";K.d(it,{B:()=>De});var E=K(8421),M=K(7579),re=K(930),Oe=K(4482);function De(Ge={}){const{connector:He=(()=>new M.x),resetOnError:Ke=!0,resetOnComplete:Ie=!0,resetOnRefCountZero:Pe=!0}=Ge;return Re=>{let yt,ae,Pt,et=0,at=!1,nt=!1;const We=()=>{ae?.unsubscribe(),ae=void 0},dt=()=>{We(),yt=Pt=void 0,at=nt=!1},Fe=()=>{const Me=yt;dt(),Me?.unsubscribe()};return(0,Oe.e)((Me,Et)=>{et++,!nt&&!at&&We();const Mt=Pt=Pt??He();Et.add(()=>{et--,0===et&&!nt&&!at&&(ae=ke(Fe,Pe))}),Mt.subscribe(Et),!yt&&et>0&&(yt=new re.Hp({next:St=>Mt.next(St),error:St=>{nt=!0,We(),ae=ke(dt,Ke,St),Mt.error(St)},complete:()=>{at=!0,We(),ae=ke(dt,Ie),Mt.complete()}}),(0,E.Xf)(Me).subscribe(yt))})(Re)}}function ke(Ge,He,...Ke){if(!0===He)return void Ge();if(!1===He)return;const Ie=new re.Hp({next:()=>{Ie.unsubscribe(),Ge()}});return He(...Ke).subscribe(Ie)}},8675:(Qt,it,K)=>{"use strict";K.d(it,{O:()=>Oe});var E=K(7272),M=K(3269),re=K(4482);function Oe(...De){const ke=(0,M.yG)(De);return(0,re.e)((Ge,He)=>{(ke?(0,E.z)(De,Ge,ke):(0,E.z)(De,Ge)).subscribe(He)})}},9468:(Qt,it,K)=>{"use strict";K.d(it,{R:()=>M});var E=K(4482);function M(re,Oe=0){return(0,E.e)((De,ke)=>{ke.add(re.schedule(()=>De.subscribe(ke),Oe))})}},3900:(Qt,it,K)=>{"use strict";K.d(it,{w:()=>Oe});var E=K(8421),M=K(4482),re=K(5403);function Oe(De,ke){return(0,M.e)((Ge,He)=>{let Ke=null,Ie=0,Pe=!1;const Re=()=>Pe&&!Ke&&He.complete();Ge.subscribe((0,re.x)(He,yt=>{Ke?.unsubscribe();let ae=0;const Pt=Ie++;(0,E.Xf)(De(yt,Pt)).subscribe(Ke=(0,re.x)(He,et=>He.next(ke?ke(yt,et,Pt,ae++):et),()=>{Ke=null,Re()}))},()=>{Pe=!0,Re()}))})}},5698:(Qt,it,K)=>{"use strict";K.d(it,{q:()=>Oe});var E=K(515),M=K(4482),re=K(5403);function Oe(De){return De<=0?()=>E.E:(0,M.e)((ke,Ge)=>{let He=0;ke.subscribe((0,re.x)(Ge,Ke=>{++He<=De&&(Ge.next(Ke),De<=He&&Ge.complete())}))})}},8505:(Qt,it,K)=>{"use strict";K.d(it,{b:()=>De});var E=K(576),M=K(4482),re=K(5403),Oe=K(4671);function De(ke,Ge,He){const Ke=(0,E.m)(ke)||Ge||He?{next:ke,error:Ge,complete:He}:ke;return Ke?(0,M.e)((Ie,Pe)=>{var Re;null===(Re=Ke.subscribe)||void 0===Re||Re.call(Ke);let yt=!0;Ie.subscribe((0,re.x)(Pe,ae=>{var Pt;null===(Pt=Ke.next)||void 0===Pt||Pt.call(Ke,ae),Pe.next(ae)},()=>{var ae;yt=!1,null===(ae=Ke.complete)||void 0===ae||ae.call(Ke),Pe.complete()},ae=>{var Pt;yt=!1,null===(Pt=Ke.error)||void 0===Pt||Pt.call(Ke,ae),Pe.error(ae)},()=>{var ae,Pt;yt&&(null===(ae=Ke.unsubscribe)||void 0===ae||ae.call(Ke)),null===(Pt=Ke.finalize)||void 0===Pt||Pt.call(Ke)}))}):Oe.y}},8068:(Qt,it,K)=>{"use strict";K.d(it,{T:()=>Oe});var E=K(6805),M=K(4482),re=K(5403);function Oe(ke=De){return(0,M.e)((Ge,He)=>{let Ke=!1;Ge.subscribe((0,re.x)(He,Ie=>{Ke=!0,He.next(Ie)},()=>Ke?He.complete():He.error(ke())))})}function De(){return new E.K}},4408:(Qt,it,K)=>{"use strict";K.d(it,{o:()=>De});var E=K(727);class M extends E.w0{constructor(Ge,He){super()}schedule(Ge,He=0){return this}}const re={setInterval(ke,Ge,...He){const{delegate:Ke}=re;return Ke?.setInterval?Ke.setInterval(ke,Ge,...He):setInterval(ke,Ge,...He)},clearInterval(ke){const{delegate:Ge}=re;return(Ge?.clearInterval||clearInterval)(ke)},delegate:void 0};var Oe=K(8737);class De extends M{constructor(Ge,He){super(Ge,He),this.scheduler=Ge,this.work=He,this.pending=!1}schedule(Ge,He=0){var Ke;if(this.closed)return this;this.state=Ge;const Ie=this.id,Pe=this.scheduler;return null!=Ie&&(this.id=this.recycleAsyncId(Pe,Ie,He)),this.pending=!0,this.delay=He,this.id=null!==(Ke=this.id)&&void 0!==Ke?Ke:this.requestAsyncId(Pe,this.id,He),this}requestAsyncId(Ge,He,Ke=0){return re.setInterval(Ge.flush.bind(Ge,this),Ke)}recycleAsyncId(Ge,He,Ke=0){if(null!=Ke&&this.delay===Ke&&!1===this.pending)return He;null!=He&&re.clearInterval(He)}execute(Ge,He){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const Ke=this._execute(Ge,He);if(Ke)return Ke;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(Ge,He){let Ie,Ke=!1;try{this.work(Ge)}catch(Pe){Ke=!0,Ie=Pe||new Error("Scheduled action threw falsy error")}if(Ke)return this.unsubscribe(),Ie}unsubscribe(){if(!this.closed){const{id:Ge,scheduler:He}=this,{actions:Ke}=He;this.work=this.state=this.scheduler=null,this.pending=!1,(0,Oe.P)(Ke,this),null!=Ge&&(this.id=this.recycleAsyncId(He,Ge,null)),this.delay=null,super.unsubscribe()}}}},7565:(Qt,it,K)=>{"use strict";K.d(it,{v:()=>re});var E=K(6063);class M{constructor(De,ke=M.now){this.schedulerActionCtor=De,this.now=ke}schedule(De,ke=0,Ge){return new this.schedulerActionCtor(this,De).schedule(Ge,ke)}}M.now=E.l.now;class re extends M{constructor(De,ke=M.now){super(De,ke),this.actions=[],this._active=!1}flush(De){const{actions:ke}=this;if(this._active)return void ke.push(De);let Ge;this._active=!0;do{if(Ge=De.execute(De.state,De.delay))break}while(De=ke.shift());if(this._active=!1,Ge){for(;De=ke.shift();)De.unsubscribe();throw Ge}}}},4986:(Qt,it,K)=>{"use strict";K.d(it,{P:()=>Oe,z:()=>re});var E=K(4408);const re=new(K(7565).v)(E.o),Oe=re},6063:(Qt,it,K)=>{"use strict";K.d(it,{l:()=>E});const E={now:()=>(E.delegate||Date).now(),delegate:void 0}},3410:(Qt,it,K)=>{"use strict";K.d(it,{z:()=>E});const E={setTimeout(M,re,...Oe){const{delegate:De}=E;return De?.setTimeout?De.setTimeout(M,re,...Oe):setTimeout(M,re,...Oe)},clearTimeout(M){const{delegate:re}=E;return(re?.clearTimeout||clearTimeout)(M)},delegate:void 0}},2202:(Qt,it,K)=>{"use strict";K.d(it,{h:()=>M});const M=function E(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(Qt,it,K)=>{"use strict";K.d(it,{L:()=>E});const E="function"==typeof Symbol&&Symbol.observable||"@@observable"},6805:(Qt,it,K)=>{"use strict";K.d(it,{K:()=>M});const M=(0,K(3888).d)(re=>function(){re(this),this.name="EmptyError",this.message="no elements in sequence"})},3269:(Qt,it,K)=>{"use strict";K.d(it,{_6:()=>ke,jO:()=>Oe,yG:()=>De});var E=K(576),M=K(3532);function re(Ge){return Ge[Ge.length-1]}function Oe(Ge){return(0,E.m)(re(Ge))?Ge.pop():void 0}function De(Ge){return(0,M.K)(re(Ge))?Ge.pop():void 0}function ke(Ge,He){return"number"==typeof re(Ge)?Ge.pop():He}},4742:(Qt,it,K)=>{"use strict";K.d(it,{D:()=>De});const{isArray:E}=Array,{getPrototypeOf:M,prototype:re,keys:Oe}=Object;function De(Ge){if(1===Ge.length){const He=Ge[0];if(E(He))return{args:He,keys:null};if(function ke(Ge){return Ge&&"object"==typeof Ge&&M(Ge)===re}(He)){const Ke=Oe(He);return{args:Ke.map(Ie=>He[Ie]),keys:Ke}}}return{args:Ge,keys:null}}},8737:(Qt,it,K)=>{"use strict";function E(M,re){if(M){const Oe=M.indexOf(re);0<=Oe&&M.splice(Oe,1)}}K.d(it,{P:()=>E})},3888:(Qt,it,K)=>{"use strict";function E(M){const Oe=M(De=>{Error.call(De),De.stack=(new Error).stack});return Oe.prototype=Object.create(Error.prototype),Oe.prototype.constructor=Oe,Oe}K.d(it,{d:()=>E})},1810:(Qt,it,K)=>{"use strict";function E(M,re){return M.reduce((Oe,De,ke)=>(Oe[De]=re[ke],Oe),{})}K.d(it,{n:()=>E})},2806:(Qt,it,K)=>{"use strict";K.d(it,{O:()=>Oe,x:()=>re});var E=K(2416);let M=null;function re(De){if(E.v.useDeprecatedSynchronousErrorHandling){const ke=!M;if(ke&&(M={errorThrown:!1,error:null}),De(),ke){const{errorThrown:Ge,error:He}=M;if(M=null,Ge)throw He}}else De()}function Oe(De){E.v.useDeprecatedSynchronousErrorHandling&&M&&(M.errorThrown=!0,M.error=De)}},9672:(Qt,it,K)=>{"use strict";function E(M,re,Oe,De=0,ke=!1){const Ge=re.schedule(function(){Oe(),ke?M.add(this.schedule(null,De)):this.unsubscribe()},De);if(M.add(Ge),!ke)return Ge}K.d(it,{f:()=>E})},4671:(Qt,it,K)=>{"use strict";function E(M){return M}K.d(it,{y:()=>E})},1144:(Qt,it,K)=>{"use strict";K.d(it,{z:()=>E});const E=M=>M&&"number"==typeof M.length&&"function"!=typeof M},2206:(Qt,it,K)=>{"use strict";K.d(it,{D:()=>M});var E=K(576);function M(re){return Symbol.asyncIterator&&(0,E.m)(re?.[Symbol.asyncIterator])}},576:(Qt,it,K)=>{"use strict";function E(M){return"function"==typeof M}K.d(it,{m:()=>E})},3670:(Qt,it,K)=>{"use strict";K.d(it,{c:()=>re});var E=K(8822),M=K(576);function re(Oe){return(0,M.m)(Oe[E.L])}},6495:(Qt,it,K)=>{"use strict";K.d(it,{T:()=>re});var E=K(2202),M=K(576);function re(Oe){return(0,M.m)(Oe?.[E.h])}},8239:(Qt,it,K)=>{"use strict";K.d(it,{t:()=>M});var E=K(576);function M(re){return(0,E.m)(re?.then)}},3260:(Qt,it,K)=>{"use strict";K.d(it,{L:()=>Oe,Q:()=>re});var E=K(655),M=K(576);function re(De){return(0,E.FC)(this,arguments,function*(){const Ge=De.getReader();try{for(;;){const{value:He,done:Ke}=yield(0,E.qq)(Ge.read());if(Ke)return yield(0,E.qq)(void 0);yield yield(0,E.qq)(He)}}finally{Ge.releaseLock()}})}function Oe(De){return(0,M.m)(De?.getReader)}},3532:(Qt,it,K)=>{"use strict";K.d(it,{K:()=>M});var E=K(576);function M(re){return re&&(0,E.m)(re.schedule)}},4482:(Qt,it,K)=>{"use strict";K.d(it,{A:()=>M,e:()=>re});var E=K(576);function M(Oe){return(0,E.m)(Oe?.lift)}function re(Oe){return De=>{if(M(De))return De.lift(function(ke){try{return Oe(ke,this)}catch(Ge){this.error(Ge)}});throw new TypeError("Unable to lift unknown Observable type")}}},3268:(Qt,it,K)=>{"use strict";K.d(it,{Z:()=>Oe});var E=K(4004);const{isArray:M}=Array;function Oe(De){return(0,E.U)(ke=>function re(De,ke){return M(ke)?De(...ke):De(ke)}(De,ke))}},5032:(Qt,it,K)=>{"use strict";function E(){}K.d(it,{Z:()=>E})},9635:(Qt,it,K)=>{"use strict";K.d(it,{U:()=>re,z:()=>M});var E=K(4671);function M(...Oe){return re(Oe)}function re(Oe){return 0===Oe.length?E.y:1===Oe.length?Oe[0]:function(ke){return Oe.reduce((Ge,He)=>He(Ge),ke)}}},7849:(Qt,it,K)=>{"use strict";K.d(it,{h:()=>re});var E=K(2416),M=K(3410);function re(Oe){M.z.setTimeout(()=>{const{onUnhandledError:De}=E.v;if(!De)throw Oe;De(Oe)})}},4532:(Qt,it,K)=>{"use strict";function E(M){return new TypeError(`You provided ${null!==M&&"object"==typeof M?"an invalid object":`'${M}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}K.d(it,{z:()=>E})},8099:Qt=>{Qt.exports=function it(K,E){var M,re=null;try{M=JSON.parse(K,E)}catch(Oe){re=Oe}return[re,M]}},3871:function(Qt){var K,E,M,re,Oe;K=/^(?=((?:[a-zA-Z0-9+\-.]+:)?))\1(?=((?:\/\/[^\/?#]*)?))\2(?=((?:(?:[^?#\/]*\/)*[^;?#\/]*)?))\3((?:;[^?#]*)?)(\?[^#]*)?(#[^]*)?$/,E=/^(?=([^\/?#]*))\1([^]*)$/,M=/(?:\/|^)\.(?=\/)/g,re=/(?:\/|^)\.\.\/(?!\.\.\/)[^\/]*(?=\/)/g,Qt.exports=Oe={buildAbsoluteURL:function(De,ke,Ge){if(Ge=Ge||{},De=De.trim(),!(ke=ke.trim())){if(!Ge.alwaysNormalize)return De;var He=Oe.parseURL(De);if(!He)throw new Error("Error trying to parse base URL.");return He.path=Oe.normalizePath(He.path),Oe.buildURLFromParts(He)}var Ke=Oe.parseURL(ke);if(!Ke)throw new Error("Error trying to parse relative URL.");if(Ke.scheme)return Ge.alwaysNormalize?(Ke.path=Oe.normalizePath(Ke.path),Oe.buildURLFromParts(Ke)):ke;var Ie=Oe.parseURL(De);if(!Ie)throw new Error("Error trying to parse base URL.");if(!Ie.netLoc&&Ie.path&&"/"!==Ie.path[0]){var Pe=E.exec(Ie.path);Ie.netLoc=Pe[1],Ie.path=Pe[2]}Ie.netLoc&&!Ie.path&&(Ie.path="/");var Re={scheme:Ie.scheme,netLoc:Ke.netLoc,path:null,params:Ke.params,query:Ke.query,fragment:Ke.fragment};if(!Ke.netLoc&&(Re.netLoc=Ie.netLoc,"/"!==Ke.path[0]))if(Ke.path){var yt=Ie.path,ae=yt.substring(0,yt.lastIndexOf("/")+1)+Ke.path;Re.path=Oe.normalizePath(ae)}else Re.path=Ie.path,Ke.params||(Re.params=Ie.params,Ke.query||(Re.query=Ie.query));return null===Re.path&&(Re.path=Ge.alwaysNormalize?Oe.normalizePath(Ke.path):Ke.path),Oe.buildURLFromParts(Re)},parseURL:function(De){var ke=K.exec(De);return ke?{scheme:ke[1]||"",netLoc:ke[2]||"",path:ke[3]||"",params:ke[4]||"",query:ke[5]||"",fragment:ke[6]||""}:null},normalizePath:function(De){for(De=De.split("").reverse().join("").replace(M,"");De.length!==(De=De.replace(re,"")).length;);return De.split("").reverse().join("")},buildURLFromParts:function(De){return De.scheme+De.netLoc+De.path+De.params+De.query+De.fragment}}},3629:(Qt,it,K)=>{var E=K(9226),M=Qt.exports={WebVTT:K(8318),VTTCue:K(5713),VTTRegion:K(3872)};E.vttjs=M,E.WebVTT=M.WebVTT;var re=M.VTTCue,Oe=M.VTTRegion,De=E.VTTCue,ke=E.VTTRegion;M.shim=function(){E.VTTCue=re,E.VTTRegion=Oe},M.restore=function(){E.VTTCue=De,E.VTTRegion=ke},E.VTTCue||M.shim()},8318:(Qt,it,K)=>{var E=K(1421),M=Object.create||function(){function J(){}return function(he){if(1!==arguments.length)throw new Error("Object.create shim only accepts one parameter.");return J.prototype=he,new J}}();function re(J,he){this.name="ParsingError",this.code=J.code,this.message=he||J.message}function Oe(J){function he(mt,st,xt,Xe){return 3600*(0|mt)+60*(0|st)+(0|xt)+(0|Xe)/1e3}var Ne=J.match(/^(\d+):(\d{1,2})(:\d{1,2})?\.(\d{3})/);return Ne?Ne[3]?he(Ne[1],Ne[2],Ne[3].replace(":",""),Ne[4]):Ne[1]>59?he(Ne[1],Ne[2],0,Ne[4]):he(0,Ne[1],Ne[2],Ne[4]):null}function De(){this.values=M(null)}function ke(J,he,Ne,mt){var st=mt?J.split(mt):[J];for(var xt in st)if("string"==typeof st[xt]){var Xe=st[xt].split(Ne);2===Xe.length&&he(Xe[0].trim(),Xe[1].trim())}}function Ge(J,he,Ne){var mt=J;function st(){var ut=Oe(J);if(null===ut)throw new re(re.Errors.BadTimeStamp,"Malformed timestamp: "+mt);return J=J.replace(/^[^\sa-zA-Z-]+/,""),ut}function Xe(){J=J.replace(/^\s+/,"")}if(Xe(),he.startTime=st(),Xe(),"--\x3e"!==J.substr(0,3))throw new re(re.Errors.BadTimeStamp,"Malformed time stamp (time stamps must be separated by '--\x3e'): "+mt);J=J.substr(3),Xe(),he.endTime=st(),Xe(),function xt(ut,Je){var ot=new De;ke(ut,function(lt,gt){switch(lt){case"region":for(var Nt=Ne.length-1;Nt>=0;Nt--)if(Ne[Nt].id===gt){ot.set(lt,Ne[Nt].region);break}break;case"vertical":ot.alt(lt,gt,["rl","lr"]);break;case"line":var jt=gt.split(","),_n=jt[0];ot.integer(lt,_n),ot.percent(lt,_n)&&ot.set("snapToLines",!1),ot.alt(lt,_n,["auto"]),2===jt.length&&ot.alt("lineAlign",jt[1],["start","center","end"]);break;case"position":jt=gt.split(","),ot.percent(lt,jt[0]),2===jt.length&&ot.alt("positionAlign",jt[1],["start","center","end"]);break;case"size":ot.percent(lt,gt);break;case"align":ot.alt(lt,gt,["start","center","end","left","right"])}},/:/,/\s/),Je.region=ot.get("region",null),Je.vertical=ot.get("vertical","");try{Je.line=ot.get("line","auto")}catch{}Je.lineAlign=ot.get("lineAlign","start"),Je.snapToLines=ot.get("snapToLines",!0),Je.size=ot.get("size",100);try{Je.align=ot.get("align","center")}catch{Je.align=ot.get("align","middle")}try{Je.position=ot.get("position","auto")}catch{Je.position=ot.get("position",{start:0,left:0,center:50,middle:50,end:100,right:100},Je.align)}Je.positionAlign=ot.get("positionAlign",{start:"start",left:"start",center:"center",middle:"center",end:"end",right:"end"},Je.align)}(J,he)}(re.prototype=M(Error.prototype)).constructor=re,re.Errors={BadSignature:{code:0,message:"Malformed WebVTT signature."},BadTimeStamp:{code:1,message:"Malformed time stamp."}},De.prototype={set:function(J,he){!this.get(J)&&""!==he&&(this.values[J]=he)},get:function(J,he,Ne){return Ne?this.has(J)?this.values[J]:he[Ne]:this.has(J)?this.values[J]:he},has:function(J){return J in this.values},alt:function(J,he,Ne){for(var mt=0;mt<Ne.length;++mt)if(he===Ne[mt]){this.set(J,he);break}},integer:function(J,he){/^-?\d+$/.test(he)&&this.set(J,parseInt(he,10))},percent:function(J,he){return!!(he.match(/^([\d]{1,3})(\.[\d]*)?%$/)&&(he=parseFloat(he),he>=0&&he<=100))&&(this.set(J,he),!0)}};var He=E.createElement&&E.createElement("textarea"),Ke={c:"span",i:"i",b:"b",u:"u",ruby:"ruby",rt:"rt",v:"span",lang:"span"},Ie={white:"rgba(255,255,255,1)",lime:"rgba(0,255,0,1)",cyan:"rgba(0,255,255,1)",red:"rgba(255,0,0,1)",yellow:"rgba(255,255,0,1)",magenta:"rgba(255,0,255,1)",blue:"rgba(0,0,255,1)",black:"rgba(0,0,0,1)"},Pe={v:"title",lang:"lang"},Re={rt:"ruby"};function yt(J,he){function Ne(){if(!he)return null;var Ot=he.match(/^([^<]*)(<[^>]*>?)?/);return function _n(rn){return he=he.substr(rn.length),rn}(Ot[1]?Ot[1]:Ot[2])}function mt(_n){return He.innerHTML=_n,_n=He.textContent,He.textContent="",_n}function xt(_n,Ot){var rn=Ke[_n];if(!rn)return null;var zt=J.document.createElement(rn),bn=Pe[_n];return bn&&Ot&&(zt[bn]=Ot.trim()),zt}for(var Je,Xe=J.document.createElement("div"),ut=Xe,ot=[];null!==(Je=Ne());)if("<"!==Je[0])ut.appendChild(J.document.createTextNode(mt(Je)));else{if("/"===Je[1]){ot.length&&ot[ot.length-1]===Je.substr(2).replace(">","")&&(ot.pop(),ut=ut.parentNode);continue}var gt,lt=Oe(Je.substr(1,Je.length-2));if(lt){gt=J.document.createProcessingInstruction("timestamp",lt),ut.appendChild(gt);continue}var Nt=Je.match(/^<([^.\s/0-9>]+)(\.[^\s\\>]+)?([^>\\]+)?(\\?)>?$/);if(!Nt||!(gt=xt(Nt[1],Nt[3]))||Re[(Ot=gt).localName]&&Re[Ot.localName]!==ut.localName)continue;if(Nt[2]){var jt=Nt[2].split(".");jt.forEach(function(_n){var Ot=/^bg_/.test(_n),rn=Ot?_n.slice(3):_n;Ie.hasOwnProperty(rn)&&(gt.style[Ot?"background-color":"color"]=Ie[rn])}),gt.className=jt.join(" ")}ot.push(Nt[1]),ut.appendChild(gt),ut=gt}var Ot;return Xe}var ae=[[1470,1470],[1472,1472],[1475,1475],[1478,1478],[1488,1514],[1520,1524],[1544,1544],[1547,1547],[1549,1549],[1563,1563],[1566,1610],[1645,1647],[1649,1749],[1765,1766],[1774,1775],[1786,1805],[1807,1808],[1810,1839],[1869,1957],[1969,1969],[1984,2026],[2036,2037],[2042,2042],[2048,2069],[2074,2074],[2084,2084],[2088,2088],[2096,2110],[2112,2136],[2142,2142],[2208,2208],[2210,2220],[8207,8207],[64285,64285],[64287,64296],[64298,64310],[64312,64316],[64318,64318],[64320,64321],[64323,64324],[64326,64449],[64467,64829],[64848,64911],[64914,64967],[65008,65020],[65136,65140],[65142,65276],[67584,67589],[67592,67592],[67594,67637],[67639,67640],[67644,67644],[67647,67669],[67671,67679],[67840,67867],[67872,67897],[67903,67903],[67968,68023],[68030,68031],[68096,68096],[68112,68115],[68117,68119],[68121,68147],[68160,68167],[68176,68184],[68192,68223],[68352,68405],[68416,68437],[68440,68466],[68472,68479],[68608,68680],[126464,126467],[126469,126495],[126497,126498],[126500,126500],[126503,126503],[126505,126514],[126516,126519],[126521,126521],[126523,126523],[126530,126530],[126535,126535],[126537,126537],[126539,126539],[126541,126543],[126545,126546],[126548,126548],[126551,126551],[126553,126553],[126555,126555],[126557,126557],[126559,126559],[126561,126562],[126564,126564],[126567,126570],[126572,126578],[126580,126583],[126585,126588],[126590,126590],[126592,126601],[126603,126619],[126625,126627],[126629,126633],[126635,126651],[1114109,1114109]];function Pt(J){for(var he=0;he<ae.length;he++){var Ne=ae[he];if(J>=Ne[0]&&J<=Ne[1])return!0}return!1}function et(J){var he=[],Ne="";if(!J||!J.childNodes)return"ltr";function st(ut,Je){for(var ot=Je.childNodes.length-1;ot>=0;ot--)ut.push(Je.childNodes[ot])}function xt(ut){if(!ut||!ut.length)return null;var Je=ut.pop(),ot=Je.textContent||Je.innerText;if(ot){var lt=ot.match(/^.*(\n|\r)/);return lt?(ut.length=0,lt[0]):ot}return"ruby"===Je.tagName?xt(ut):Je.childNodes?(st(ut,Je),xt(ut)):void 0}for(st(he,J);Ne=xt(he);)for(var Xe=0;Xe<Ne.length;Xe++)if(Pt(Ne.charCodeAt(Xe)))return"rtl";return"ltr"}function nt(){}function We(J,he,Ne){nt.call(this),this.cue=he,this.cueDiv=yt(J,he.text);var mt={color:"rgba(255, 255, 255, 1)",backgroundColor:"rgba(0, 0, 0, 0.8)",position:"relative",left:0,right:0,top:0,bottom:0,display:"inline",writingMode:""===he.vertical?"horizontal-tb":"lr"===he.vertical?"vertical-lr":"vertical-rl",unicodeBidi:"plaintext"};this.applyStyles(mt,this.cueDiv),this.div=J.document.createElement("div"),mt={direction:et(this.cueDiv),writingMode:""===he.vertical?"horizontal-tb":"lr"===he.vertical?"vertical-lr":"vertical-rl",unicodeBidi:"plaintext",textAlign:"middle"===he.align?"center":he.align,font:Ne.font,whiteSpace:"pre-line",position:"absolute"},this.applyStyles(mt),this.div.appendChild(this.cueDiv);var st=0;switch(he.positionAlign){case"start":st=he.position;break;case"center":st=he.position-he.size/2;break;case"end":st=he.position-he.size}this.applyStyles(""===he.vertical?{left:this.formatStyle(st,"%"),width:this.formatStyle(he.size,"%")}:{top:this.formatStyle(st,"%"),height:this.formatStyle(he.size,"%")}),this.move=function(xt){this.applyStyles({top:this.formatStyle(xt.top,"px"),bottom:this.formatStyle(xt.bottom,"px"),left:this.formatStyle(xt.left,"px"),right:this.formatStyle(xt.right,"px"),height:this.formatStyle(xt.height,"px"),width:this.formatStyle(xt.width,"px")})}}function dt(J){var he,Ne,mt,st;if(J.div){Ne=J.div.offsetHeight,mt=J.div.offsetWidth,st=J.div.offsetTop;var xt=(xt=J.div.childNodes)&&(xt=xt[0])&&xt.getClientRects&&xt.getClientRects();J=J.div.getBoundingClientRect(),he=xt?Math.max(xt[0]&&xt[0].height||0,J.height/xt.length):0}this.left=J.left,this.right=J.right,this.top=J.top||st,this.height=J.height||Ne,this.bottom=J.bottom||st+(J.height||Ne),this.width=J.width||mt,this.lineHeight=void 0!==he?he:J.lineHeight}function Fe(J,he,Ne,mt){var xt=new dt(he),Xe=he.cue,ut=function at(J){if("number"==typeof J.line&&(J.snapToLines||J.line>=0&&J.line<=100))return J.line;if(!J.track||!J.track.textTrackList||!J.track.textTrackList.mediaElement)return-1;for(var he=J.track,Ne=he.textTrackList,mt=0,st=0;st<Ne.length&&Ne[st]!==he;st++)"showing"===Ne[st].mode&&mt++;return-1*++mt}(Xe),Je=[];if(Xe.snapToLines){var ot;switch(Xe.vertical){case"":Je=["+y","-y"],ot="height";break;case"rl":Je=["+x","-x"],ot="width";break;case"lr":Je=["-x","+x"],ot="width"}var lt=xt.lineHeight,gt=lt*Math.round(ut),Nt=Ne[ot]+lt,jt=Je[0];Math.abs(gt)>Nt&&(gt=gt<0?-1:1,gt*=Math.ceil(Nt/lt)*lt),ut<0&&(gt+=""===Xe.vertical?Ne.height:Ne.width,Je=Je.reverse()),xt.move(jt,gt)}else{var _n=xt.lineHeight/Ne.height*100;switch(Xe.lineAlign){case"center":ut-=_n/2;break;case"end":ut-=_n}switch(Xe.vertical){case"":he.applyStyles({top:he.formatStyle(ut,"%")});break;case"rl":he.applyStyles({left:he.formatStyle(ut,"%")});break;case"lr":he.applyStyles({right:he.formatStyle(ut,"%")})}Je=["+y","-x","+x","-y"],xt=new dt(he)}var Ot=function st(rn,zt){for(var bn,dr=new dt(rn),Hn=1,Zn=0;Zn<zt.length;Zn++){for(;rn.overlapsOppositeAxis(Ne,zt[Zn])||rn.within(Ne)&&rn.overlapsAny(mt);)rn.move(zt[Zn]);if(rn.within(Ne))return rn;var Vr=rn.intersectPercentage(Ne);Hn>Vr&&(bn=new dt(rn),Hn=Vr),rn=new dt(dr)}return bn||dr}(xt,Je);he.move(Ot.toCSSCompatValues(Ne))}function Me(){}nt.prototype.applyStyles=function(J,he){for(var Ne in he=he||this.div,J)J.hasOwnProperty(Ne)&&(he.style[Ne]=J[Ne])},nt.prototype.formatStyle=function(J,he){return 0===J?0:J+he},(We.prototype=M(nt.prototype)).constructor=We,dt.prototype.move=function(J,he){switch(he=void 0!==he?he:this.lineHeight,J){case"+x":this.left+=he,this.right+=he;break;case"-x":this.left-=he,this.right-=he;break;case"+y":this.top+=he,this.bottom+=he;break;case"-y":this.top-=he,this.bottom-=he}},dt.prototype.overlaps=function(J){return this.left<J.right&&this.right>J.left&&this.top<J.bottom&&this.bottom>J.top},dt.prototype.overlapsAny=function(J){for(var he=0;he<J.length;he++)if(this.overlaps(J[he]))return!0;return!1},dt.prototype.within=function(J){return this.top>=J.top&&this.bottom<=J.bottom&&this.left>=J.left&&this.right<=J.right},dt.prototype.overlapsOppositeAxis=function(J,he){switch(he){case"+x":return this.left<J.left;case"-x":return this.right>J.right;case"+y":return this.top<J.top;case"-y":return this.bottom>J.bottom}},dt.prototype.intersectPercentage=function(J){return Math.max(0,Math.min(this.right,J.right)-Math.max(this.left,J.left))*Math.max(0,Math.min(this.bottom,J.bottom)-Math.max(this.top,J.top))/(this.height*this.width)},dt.prototype.toCSSCompatValues=function(J){return{top:this.top-J.top,bottom:J.bottom-this.bottom,left:this.left-J.left,right:J.right-this.right,height:this.height,width:this.width}},dt.getSimpleBoxPosition=function(J){var he=J.div?J.div.offsetHeight:J.tagName?J.offsetHeight:0,Ne=J.div?J.div.offsetWidth:J.tagName?J.offsetWidth:0,mt=J.div?J.div.offsetTop:J.tagName?J.offsetTop:0;return{left:(J=J.div?J.div.getBoundingClientRect():J.tagName?J.getBoundingClientRect():J).left,right:J.right,top:J.top||mt,height:J.height||he,bottom:J.bottom||mt+(J.height||he),width:J.width||Ne}},Me.StringDecoder=function(){return{decode:function(J){if(!J)return"";if("string"!=typeof J)throw new Error("Error - expected string data.");return decodeURIComponent(encodeURIComponent(J))}}},Me.convertCueToDOMTree=function(J,he){return J&&he?yt(J,he):null},Me.processCues=function(J,he,Ne){if(!J||!he||!Ne)return null;for(;Ne.firstChild;)Ne.removeChild(Ne.firstChild);var mt=J.document.createElement("div");if(mt.style.position="absolute",mt.style.left="0",mt.style.right="0",mt.style.top="0",mt.style.bottom="0",mt.style.margin="1.5%",Ne.appendChild(mt),function st(lt){for(var gt=0;gt<lt.length;gt++)if(lt[gt].hasBeenReset||!lt[gt].displayState)return!0;return!1}(he)){var Xe=[],ut=dt.getSimpleBoxPosition(mt),ot={font:Math.round(.05*ut.height*100)/100+"px sans-serif"};!function(){for(var lt,gt,Nt=0;Nt<he.length;Nt++)lt=new We(J,gt=he[Nt],ot),mt.appendChild(lt.div),Fe(0,lt,ut,Xe),gt.displayState=lt.div,Xe.push(dt.getSimpleBoxPosition(lt))}()}else for(var xt=0;xt<he.length;xt++)mt.appendChild(he[xt].displayState)},(Me.Parser=function(J,he,Ne){Ne||(Ne=he,he={}),he||(he={}),this.window=J,this.vttjs=he,this.state="INITIAL",this.buffer="",this.decoder=Ne||new TextDecoder("utf8"),this.regionList=[]}).prototype={reportOrThrowError:function(J){if(!(J instanceof re))throw J;this.onparsingerror&&this.onparsingerror(J)},parse:function(J){var lt,he=this;function Ne(){for(var lt=he.buffer,gt=0;gt<lt.length&&"\r"!==lt[gt]&&"\n"!==lt[gt];)++gt;var Nt=lt.substr(0,gt);return"\r"===lt[gt]&&++gt,"\n"===lt[gt]&&++gt,he.buffer=lt.substr(gt),Nt}J&&(he.buffer+=he.decoder.decode(J,{stream:!0}));try{var Xe;if("INITIAL"===he.state){if(!/\r\n|\n/.test(he.buffer))return this;var ut=(Xe=Ne()).match(/^WEBVTT([ \t].*)?$/);if(!ut||!ut[0])throw new re(re.Errors.BadSignature);he.state="HEADER"}for(var Je=!1;he.buffer;){if(!/\r\n|\n/.test(he.buffer))return this;switch(Je?Je=!1:Xe=Ne(),he.state){case"HEADER":/:/.test(Xe)?(lt=Xe).match(/X-TIMESTAMP-MAP/)?ke(lt,function(gt,Nt){"X-TIMESTAMP-MAP"===gt&&function st(lt){var gt=new De;ke(lt,function(Nt,jt){switch(Nt){case"MPEGT":gt.integer(Nt+"S",jt);break;case"LOCA":gt.set(Nt+"L",Oe(jt))}},/[^\d]:/,/,/),he.ontimestampmap&&he.ontimestampmap({MPEGTS:gt.get("MPEGTS"),LOCAL:gt.get("LOCAL")})}(Nt)},/=/):ke(lt,function(gt,Nt){"Region"===gt&&function mt(lt){var gt=new De;if(ke(lt,function(jt,_n){switch(jt){case"id":gt.set(jt,_n);break;case"width":gt.percent(jt,_n);break;case"lines":gt.integer(jt,_n);break;case"regionanchor":case"viewportanchor":var Ot=_n.split(",");if(2!==Ot.length)break;var rn=new De;if(rn.percent("x",Ot[0]),rn.percent("y",Ot[1]),!rn.has("x")||!rn.has("y"))break;gt.set(jt+"X",rn.get("x")),gt.set(jt+"Y",rn.get("y"));break;case"scroll":gt.alt(jt,_n,["up"])}},/=/,/\s/),gt.has("id")){var Nt=new(he.vttjs.VTTRegion||he.window.VTTRegion);Nt.width=gt.get("width",100),Nt.lines=gt.get("lines",3),Nt.regionAnchorX=gt.get("regionanchorX",0),Nt.regionAnchorY=gt.get("regionanchorY",100),Nt.viewportAnchorX=gt.get("viewportanchorX",0),Nt.viewportAnchorY=gt.get("viewportanchorY",100),Nt.scroll=gt.get("scroll",""),he.onregion&&he.onregion(Nt),he.regionList.push({id:gt.get("id"),region:Nt})}}(Nt)},/:/):Xe||(he.state="ID");continue;case"NOTE":Xe||(he.state="ID");continue;case"ID":if(/^NOTE($|[ \t])/.test(Xe)){he.state="NOTE";break}if(!Xe)continue;he.cue=new(he.vttjs.VTTCue||he.window.VTTCue)(0,0,"");try{he.cue.align="center"}catch{he.cue.align="middle"}if(he.state="CUE",-1===Xe.indexOf("--\x3e")){he.cue.id=Xe;continue}case"CUE":try{Ge(Xe,he.cue,he.regionList)}catch(lt){he.reportOrThrowError(lt),he.cue=null,he.state="BADCUE";continue}he.state="CUETEXT";continue;case"CUETEXT":var ot=-1!==Xe.indexOf("--\x3e");if(!Xe||ot&&(Je=!0)){he.oncue&&he.oncue(he.cue),he.cue=null,he.state="ID";continue}he.cue.text&&(he.cue.text+="\n"),he.cue.text+=Xe.replace(/\u2028/g,"\n").replace(/u2029/g,"\n");continue;case"BADCUE":Xe||(he.state="ID");continue}}}catch(lt){he.reportOrThrowError(lt),"CUETEXT"===he.state&&he.cue&&he.oncue&&he.oncue(he.cue),he.cue=null,he.state="INITIAL"===he.state?"BADWEBVTT":"BADCUE"}return this},flush:function(){var J=this;try{if(J.buffer+=J.decoder.decode(),(J.cue||"HEADER"===J.state)&&(J.buffer+="\n\n",J.parse()),"INITIAL"===J.state)throw new re(re.Errors.BadSignature)}catch(he){J.reportOrThrowError(he)}return J.onflush&&J.onflush(),this}},Qt.exports=Me},5713:Qt=>{var it="auto",K={"":1,lr:1,rl:1},E={start:1,center:1,end:1,left:1,right:1,auto:1,"line-left":1,"line-right":1};function re(De){return"string"==typeof De&&!!E[De.toLowerCase()]&&De.toLowerCase()}function Oe(De,ke,Ge){this.hasBeenReset=!1;var He="",Ke=!1,Ie=De,Pe=ke,Re=Ge,yt=null,ae="",Pt=!0,et="auto",at="start",nt="auto",We="auto",dt=100,Fe="center";Object.defineProperties(this,{id:{enumerable:!0,get:function(){return He},set:function(Me){He=""+Me}},pauseOnExit:{enumerable:!0,get:function(){return Ke},set:function(Me){Ke=!!Me}},startTime:{enumerable:!0,get:function(){return Ie},set:function(Me){if("number"!=typeof Me)throw new TypeError("Start time must be set to a number.");Ie=Me,this.hasBeenReset=!0}},endTime:{enumerable:!0,get:function(){return Pe},set:function(Me){if("number"!=typeof Me)throw new TypeError("End time must be set to a number.");Pe=Me,this.hasBeenReset=!0}},text:{enumerable:!0,get:function(){return Re},set:function(Me){Re=""+Me,this.hasBeenReset=!0}},region:{enumerable:!0,get:function(){return yt},set:function(Me){yt=Me,this.hasBeenReset=!0}},vertical:{enumerable:!0,get:function(){return ae},set:function(Me){var Et=function M(De){return"string"==typeof De&&!!K[De.toLowerCase()]&&De.toLowerCase()}(Me);if(!1===Et)throw new SyntaxError("Vertical: an invalid or illegal direction string was specified.");ae=Et,this.hasBeenReset=!0}},snapToLines:{enumerable:!0,get:function(){return Pt},set:function(Me){Pt=!!Me,this.hasBeenReset=!0}},line:{enumerable:!0,get:function(){return et},set:function(Me){if("number"!=typeof Me&&Me!==it)throw new SyntaxError("Line: an invalid number or illegal string was specified.");et=Me,this.hasBeenReset=!0}},lineAlign:{enumerable:!0,get:function(){return at},set:function(Me){var Et=re(Me);Et?(at=Et,this.hasBeenReset=!0):console.warn("lineAlign: an invalid or illegal string was specified.")}},position:{enumerable:!0,get:function(){return nt},set:function(Me){if(Me<0||Me>100)throw new Error("Position must be between 0 and 100.");nt=Me,this.hasBeenReset=!0}},positionAlign:{enumerable:!0,get:function(){return We},set:function(Me){var Et=re(Me);Et?(We=Et,this.hasBeenReset=!0):console.warn("positionAlign: an invalid or illegal string was specified.")}},size:{enumerable:!0,get:function(){return dt},set:function(Me){if(Me<0||Me>100)throw new Error("Size must be between 0 and 100.");dt=Me,this.hasBeenReset=!0}},align:{enumerable:!0,get:function(){return Fe},set:function(Me){var Et=re(Me);if(!Et)throw new SyntaxError("align: an invalid or illegal alignment string was specified.");Fe=Et,this.hasBeenReset=!0}}}),this.displayState=void 0}Oe.prototype.getCueAsHTML=function(){return WebVTT.convertCueToDOMTree(window,this.text)},Qt.exports=Oe},3872:Qt=>{var it={"":!0,up:!0};function E(re){return"number"==typeof re&&re>=0&&re<=100}Qt.exports=function M(){var re=100,Oe=3,De=0,ke=100,Ge=0,He=100,Ke="";Object.defineProperties(this,{width:{enumerable:!0,get:function(){return re},set:function(Ie){if(!E(Ie))throw new Error("Width must be between 0 and 100.");re=Ie}},lines:{enumerable:!0,get:function(){return Oe},set:function(Ie){if("number"!=typeof Ie)throw new TypeError("Lines must be set to a number.");Oe=Ie}},regionAnchorY:{enumerable:!0,get:function(){return ke},set:function(Ie){if(!E(Ie))throw new Error("RegionAnchorX must be between 0 and 100.");ke=Ie}},regionAnchorX:{enumerable:!0,get:function(){return De},set:function(Ie){if(!E(Ie))throw new Error("RegionAnchorY must be between 0 and 100.");De=Ie}},viewportAnchorY:{enumerable:!0,get:function(){return He},set:function(Ie){if(!E(Ie))throw new Error("ViewportAnchorY must be between 0 and 100.");He=Ie}},viewportAnchorX:{enumerable:!0,get:function(){return Ge},set:function(Ie){if(!E(Ie))throw new Error("ViewportAnchorX must be between 0 and 100.");Ge=Ie}},scroll:{enumerable:!0,get:function(){return Ke},set:function(Ie){var Pe=function K(re){return"string"==typeof re&&!!it[re.toLowerCase()]&&re.toLowerCase()}(Ie);!1===Pe?console.warn("Scroll: an invalid or illegal string was specified."):Ke=Pe}}})}},655:(Qt,it,K)=>{"use strict";function Oe(Xe,ut){var Je={};for(var ot in Xe)Object.prototype.hasOwnProperty.call(Xe,ot)&&ut.indexOf(ot)<0&&(Je[ot]=Xe[ot]);if(null!=Xe&&"function"==typeof Object.getOwnPropertySymbols){var lt=0;for(ot=Object.getOwnPropertySymbols(Xe);lt<ot.length;lt++)ut.indexOf(ot[lt])<0&&Object.prototype.propertyIsEnumerable.call(Xe,ot[lt])&&(Je[ot[lt]]=Xe[ot[lt]])}return Je}function Re(Xe,ut,Je,ot){return new(Je||(Je=Promise))(function(gt,Nt){function jt(rn){try{Ot(ot.next(rn))}catch(zt){Nt(zt)}}function _n(rn){try{Ot(ot.throw(rn))}catch(zt){Nt(zt)}}function Ot(rn){rn.done?gt(rn.value):function lt(gt){return gt instanceof Je?gt:new Je(function(Nt){Nt(gt)})}(rn.value).then(jt,_n)}Ot((ot=ot.apply(Xe,ut||[])).next())})}function Fe(Xe){return this instanceof Fe?(this.v=Xe,this):new Fe(Xe)}function Me(Xe,ut,Je){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var lt,ot=Je.apply(Xe,ut||[]),gt=[];return lt={},Nt("next"),Nt("throw"),Nt("return"),lt[Symbol.asyncIterator]=function(){return this},lt;function Nt(bn){ot[bn]&&(lt[bn]=function(dr){return new Promise(function(Hn,Zn){gt.push([bn,dr,Hn,Zn])>1||jt(bn,dr)})})}function jt(bn,dr){try{!function _n(bn){bn.value instanceof Fe?Promise.resolve(bn.value.v).then(Ot,rn):zt(gt[0][2],bn)}(ot[bn](dr))}catch(Hn){zt(gt[0][3],Hn)}}function Ot(bn){jt("next",bn)}function rn(bn){jt("throw",bn)}function zt(bn,dr){bn(dr),gt.shift(),gt.length&&jt(gt[0][0],gt[0][1])}}function Mt(Xe){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Je,ut=Xe[Symbol.asyncIterator];return ut?ut.call(Xe):(Xe=function et(Xe){var ut="function"==typeof Symbol&&Symbol.iterator,Je=ut&&Xe[ut],ot=0;if(Je)return Je.call(Xe);if(Xe&&"number"==typeof Xe.length)return{next:function(){return Xe&&ot>=Xe.length&&(Xe=void 0),{value:Xe&&Xe[ot++],done:!Xe}}};throw new TypeError(ut?"Object is not iterable.":"Symbol.iterator is not defined.")}(Xe),Je={},ot("next"),ot("throw"),ot("return"),Je[Symbol.asyncIterator]=function(){return this},Je);function ot(gt){Je[gt]=Xe[gt]&&function(Nt){return new Promise(function(jt,_n){!function lt(gt,Nt,jt,_n){Promise.resolve(_n).then(function(Ot){gt({value:Ot,done:jt})},Nt)}(jt,_n,(Nt=Xe[gt](Nt)).done,Nt.value)})}}}K.d(it,{FC:()=>Me,KL:()=>Mt,_T:()=>Oe,mG:()=>Re,qq:()=>Fe})},5893:()=>{},434:Qt=>{function it(){return Qt.exports=it=Object.assign?Object.assign.bind():function(K){for(var E=1;E<arguments.length;E++){var M=arguments[E];for(var re in M)Object.prototype.hasOwnProperty.call(M,re)&&(K[re]=M[re])}return K},Qt.exports.__esModule=!0,Qt.exports.default=Qt.exports,it.apply(this,arguments)}Qt.exports=it,Qt.exports.__esModule=!0,Qt.exports.default=Qt.exports},6895:(Qt,it,K)=>{"use strict";K.d(it,{Do:()=>We,EM:()=>da,HT:()=>Oe,JF:()=>Cl,K0:()=>ke,Mx:()=>Es,O5:()=>Xs,Ov:()=>Tr,PM:()=>Po,S$:()=>et,V_:()=>Ke,Ye:()=>dt,Zx:()=>Pa,b0:()=>nt,bD:()=>ru,ez:()=>Au,mk:()=>Sr,q:()=>re,sg:()=>fs,uU:()=>ks,w_:()=>De});var E=K(4650);let M=null;function re(){return M}function Oe(V){M||(M=V)}class De{}const ke=new E.OlP("DocumentToken");let Ge=(()=>{class V{historyGo(W){throw new Error("Not implemented")}}return V.\u0275fac=function(W){return new(W||V)},V.\u0275prov=E.Yz7({token:V,factory:function(){return function He(){return(0,E.LFG)(Ie)}()},providedIn:"platform"}),V})();const Ke=new E.OlP("Location Initialized");let Ie=(()=>{class V extends Ge{constructor(W){super(),this._doc=W,this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return re().getBaseHref(this._doc)}onPopState(W){const Ee=re().getGlobalEventTarget(this._doc,"window");return Ee.addEventListener("popstate",W,!1),()=>Ee.removeEventListener("popstate",W)}onHashChange(W){const Ee=re().getGlobalEventTarget(this._doc,"window");return Ee.addEventListener("hashchange",W,!1),()=>Ee.removeEventListener("hashchange",W)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(W){this._location.pathname=W}pushState(W,Ee,Qe){Pe()?this._history.pushState(W,Ee,Qe):this._location.hash=Qe}replaceState(W,Ee,Qe){Pe()?this._history.replaceState(W,Ee,Qe):this._location.hash=Qe}forward(){this._history.forward()}back(){this._history.back()}historyGo(W=0){this._history.go(W)}getState(){return this._history.state}}return V.\u0275fac=function(W){return new(W||V)(E.LFG(ke))},V.\u0275prov=E.Yz7({token:V,factory:function(){return function Re(){return new Ie((0,E.LFG)(ke))}()},providedIn:"platform"}),V})();function Pe(){return!!window.history.pushState}function yt(V,oe){if(0==V.length)return oe;if(0==oe.length)return V;let W=0;return V.endsWith("/")&&W++,oe.startsWith("/")&&W++,2==W?V+oe.substring(1):1==W?V+oe:V+"/"+oe}function ae(V){const oe=V.match(/#|\?|$/),W=oe&&oe.index||V.length;return V.slice(0,W-("/"===V[W-1]?1:0))+V.slice(W)}function Pt(V){return V&&"?"!==V[0]?"?"+V:V}let et=(()=>{class V{historyGo(W){throw new Error("Not implemented")}}return V.\u0275fac=function(W){return new(W||V)},V.\u0275prov=E.Yz7({token:V,factory:function(){return(0,E.f3M)(nt)},providedIn:"root"}),V})();const at=new E.OlP("appBaseHref");let nt=(()=>{class V extends et{constructor(W,Ee){super(),this._platformLocation=W,this._removeListenerFns=[],this._baseHref=Ee??this._platformLocation.getBaseHrefFromDOM()??(0,E.f3M)(ke).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(W){this._removeListenerFns.push(this._platformLocation.onPopState(W),this._platformLocation.onHashChange(W))}getBaseHref(){return this._baseHref}prepareExternalUrl(W){return yt(this._baseHref,W)}path(W=!1){const Ee=this._platformLocation.pathname+Pt(this._platformLocation.search),Qe=this._platformLocation.hash;return Qe&&W?`${Ee}${Qe}`:Ee}pushState(W,Ee,Qe,Ft){const qt=this.prepareExternalUrl(Qe+Pt(Ft));this._platformLocation.pushState(W,Ee,qt)}replaceState(W,Ee,Qe,Ft){const qt=this.prepareExternalUrl(Qe+Pt(Ft));this._platformLocation.replaceState(W,Ee,qt)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(W=0){this._platformLocation.historyGo?.(W)}}return V.\u0275fac=function(W){return new(W||V)(E.LFG(Ge),E.LFG(at,8))},V.\u0275prov=E.Yz7({token:V,factory:V.\u0275fac,providedIn:"root"}),V})(),We=(()=>{class V extends et{constructor(W,Ee){super(),this._platformLocation=W,this._baseHref="",this._removeListenerFns=[],null!=Ee&&(this._baseHref=Ee)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(W){this._removeListenerFns.push(this._platformLocation.onPopState(W),this._platformLocation.onHashChange(W))}getBaseHref(){return this._baseHref}path(W=!1){let Ee=this._platformLocation.hash;return null==Ee&&(Ee="#"),Ee.length>0?Ee.substring(1):Ee}prepareExternalUrl(W){const Ee=yt(this._baseHref,W);return Ee.length>0?"#"+Ee:Ee}pushState(W,Ee,Qe,Ft){let qt=this.prepareExternalUrl(Qe+Pt(Ft));0==qt.length&&(qt=this._platformLocation.pathname),this._platformLocation.pushState(W,Ee,qt)}replaceState(W,Ee,Qe,Ft){let qt=this.prepareExternalUrl(Qe+Pt(Ft));0==qt.length&&(qt=this._platformLocation.pathname),this._platformLocation.replaceState(W,Ee,qt)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(W=0){this._platformLocation.historyGo?.(W)}}return V.\u0275fac=function(W){return new(W||V)(E.LFG(Ge),E.LFG(at,8))},V.\u0275prov=E.Yz7({token:V,factory:V.\u0275fac}),V})(),dt=(()=>{class V{constructor(W){this._subject=new E.vpe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=W;const Ee=this._locationStrategy.getBaseHref();this._basePath=function Mt(V){if(new RegExp("^(https?:)?//").test(V)){const[,W]=V.split(/\/\/[^\/]+/);return W}return V}(ae(Et(Ee))),this._locationStrategy.onPopState(Qe=>{this._subject.emit({url:this.path(!0),pop:!0,state:Qe.state,type:Qe.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(W=!1){return this.normalize(this._locationStrategy.path(W))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(W,Ee=""){return this.path()==this.normalize(W+Pt(Ee))}normalize(W){return V.stripTrailingSlash(function Me(V,oe){if(!V||!oe.startsWith(V))return oe;const W=oe.substring(V.length);return""===W||["/",";","?","#"].includes(W[0])?W:oe}(this._basePath,Et(W)))}prepareExternalUrl(W){return W&&"/"!==W[0]&&(W="/"+W),this._locationStrategy.prepareExternalUrl(W)}go(W,Ee="",Qe=null){this._locationStrategy.pushState(Qe,"",W,Ee),this._notifyUrlChangeListeners(this.prepareExternalUrl(W+Pt(Ee)),Qe)}replaceState(W,Ee="",Qe=null){this._locationStrategy.replaceState(Qe,"",W,Ee),this._notifyUrlChangeListeners(this.prepareExternalUrl(W+Pt(Ee)),Qe)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(W=0){this._locationStrategy.historyGo?.(W)}onUrlChange(W){return this._urlChangeListeners.push(W),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(Ee=>{this._notifyUrlChangeListeners(Ee.url,Ee.state)})),()=>{const Ee=this._urlChangeListeners.indexOf(W);this._urlChangeListeners.splice(Ee,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(W="",Ee){this._urlChangeListeners.forEach(Qe=>Qe(W,Ee))}subscribe(W,Ee,Qe){return this._subject.subscribe({next:W,error:Ee,complete:Qe})}}return V.normalizeQueryParams=Pt,V.joinWithSlash=yt,V.stripTrailingSlash=ae,V.\u0275fac=function(W){return new(W||V)(E.LFG(et))},V.\u0275prov=E.Yz7({token:V,factory:function(){return function Fe(){return new dt((0,E.LFG)(et))}()},providedIn:"root"}),V})();function Et(V){return V.replace(/\/index.html$/,"")}var J=(()=>((J=J||{})[J.Decimal=0]="Decimal",J[J.Percent=1]="Percent",J[J.Currency=2]="Currency",J[J.Scientific=3]="Scientific",J))(),Ne=(()=>((Ne=Ne||{})[Ne.Format=0]="Format",Ne[Ne.Standalone=1]="Standalone",Ne))(),mt=(()=>((mt=mt||{})[mt.Narrow=0]="Narrow",mt[mt.Abbreviated=1]="Abbreviated",mt[mt.Wide=2]="Wide",mt[mt.Short=3]="Short",mt))(),st=(()=>((st=st||{})[st.Short=0]="Short",st[st.Medium=1]="Medium",st[st.Long=2]="Long",st[st.Full=3]="Full",st))(),xt=(()=>((xt=xt||{})[xt.Decimal=0]="Decimal",xt[xt.Group=1]="Group",xt[xt.List=2]="List",xt[xt.PercentSign=3]="PercentSign",xt[xt.PlusSign=4]="PlusSign",xt[xt.MinusSign=5]="MinusSign",xt[xt.Exponential=6]="Exponential",xt[xt.SuperscriptingExponent=7]="SuperscriptingExponent",xt[xt.PerMille=8]="PerMille",xt[xt.Infinity=9]="Infinity",xt[xt.NaN=10]="NaN",xt[xt.TimeSeparator=11]="TimeSeparator",xt[xt.CurrencyDecimal=12]="CurrencyDecimal",xt[xt.CurrencyGroup=13]="CurrencyGroup",xt))();function _n(V,oe){return Bn((0,E.cg1)(V)[E.wAp.DateFormat],oe)}function Ot(V,oe){return Bn((0,E.cg1)(V)[E.wAp.TimeFormat],oe)}function rn(V,oe){return Bn((0,E.cg1)(V)[E.wAp.DateTimeFormat],oe)}function zt(V,oe){const W=(0,E.cg1)(V),Ee=W[E.wAp.NumberSymbols][oe];if(typeof Ee>"u"){if(oe===xt.CurrencyDecimal)return W[E.wAp.NumberSymbols][xt.Decimal];if(oe===xt.CurrencyGroup)return W[E.wAp.NumberSymbols][xt.Group]}return Ee}function qn(V){if(!V[E.wAp.ExtraData])throw new Error(`Missing extra locale data for the locale "${V[E.wAp.LocaleId]}". Use "registerLocaleData" to load new data. See the "I18n guide" on angular.io to know more.`)}function Bn(V,oe){for(let W=oe;W>-1;W--)if(typeof V[W]<"u")return V[W];throw new Error("Locale data API: locale data undefined")}function Ar(V){const[oe,W]=V.split(":");return{hours:+oe,minutes:+W}}const pr=/^(\d{4,})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,gi={},Ri=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/;var er=(()=>((er=er||{})[er.Short=0]="Short",er[er.ShortGMT=1]="ShortGMT",er[er.Long=2]="Long",er[er.Extended=3]="Extended",er))(),Wn=(()=>((Wn=Wn||{})[Wn.FullYear=0]="FullYear",Wn[Wn.Month=1]="Month",Wn[Wn.Date=2]="Date",Wn[Wn.Hours=3]="Hours",Wn[Wn.Minutes=4]="Minutes",Wn[Wn.Seconds=5]="Seconds",Wn[Wn.FractionalSeconds=6]="FractionalSeconds",Wn[Wn.Day=7]="Day",Wn))(),or=(()=>((or=or||{})[or.DayPeriods=0]="DayPeriods",or[or.Days=1]="Days",or[or.Months=2]="Months",or[or.Eras=3]="Eras",or))();function Us(V,oe,W,Ee){let Qe=function Rt(V){if(Xn(V))return V;if("number"==typeof V&&!isNaN(V))return new Date(V);if("string"==typeof V){if(V=V.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(V)){const[Qe,Ft=1,qt=1]=V.split("-").map(Rn=>+Rn);return Lr(Qe,Ft-1,qt)}const W=parseFloat(V);if(!isNaN(V-W))return new Date(W);let Ee;if(Ee=V.match(pr))return function fn(V){const oe=new Date(0);let W=0,Ee=0;const Qe=V[8]?oe.setUTCFullYear:oe.setFullYear,Ft=V[8]?oe.setUTCHours:oe.setHours;V[9]&&(W=Number(V[9]+V[10]),Ee=Number(V[9]+V[11])),Qe.call(oe,Number(V[1]),Number(V[2])-1,Number(V[3]));const qt=Number(V[4]||0)-W,Rn=Number(V[5]||0)-Ee,Nr=Number(V[6]||0),Ii=Math.floor(1e3*parseFloat("0."+(V[7]||0)));return Ft.call(oe,qt,Rn,Nr,Ii),oe}(Ee)}const oe=new Date(V);if(!Xn(oe))throw new Error(`Unable to convert "${V}" into a date`);return oe}(V);oe=Qn(W,oe)||oe;let Rn,qt=[];for(;oe;){if(Rn=Ri.exec(oe),!Rn){qt.push(oe);break}{qt=qt.concat(Rn.slice(1));const Bi=qt.pop();if(!Bi)break;oe=Bi}}let Nr=Qe.getTimezoneOffset();Ee&&(Nr=Ze(Ee,Nr),Qe=function $t(V,oe,W){const Ee=W?-1:1,Qe=V.getTimezoneOffset();return function ht(V,oe){return(V=new Date(V.getTime())).setMinutes(V.getMinutes()+oe),V}(V,Ee*(Ze(oe,Qe)-Qe))}(Qe,Ee,!0));let Ii="";return qt.forEach(Bi=>{const Kt=function tt(V){if(Jr[V])return Jr[V];let oe;switch(V){case"G":case"GG":case"GGG":oe=Ir(or.Eras,mt.Abbreviated);break;case"GGGG":oe=Ir(or.Eras,mt.Wide);break;case"GGGGG":oe=Ir(or.Eras,mt.Narrow);break;case"y":oe=Fr(Wn.FullYear,1,0,!1,!0);break;case"yy":oe=Fr(Wn.FullYear,2,0,!0,!0);break;case"yyy":oe=Fr(Wn.FullYear,3,0,!1,!0);break;case"yyyy":oe=Fr(Wn.FullYear,4,0,!1,!0);break;case"Y":oe=vr(1);break;case"YY":oe=vr(2,!0);break;case"YYY":oe=vr(3);break;case"YYYY":oe=vr(4);break;case"M":case"L":oe=Fr(Wn.Month,1,1);break;case"MM":case"LL":oe=Fr(Wn.Month,2,1);break;case"MMM":oe=Ir(or.Months,mt.Abbreviated);break;case"MMMM":oe=Ir(or.Months,mt.Wide);break;case"MMMMM":oe=Ir(or.Months,mt.Narrow);break;case"LLL":oe=Ir(or.Months,mt.Abbreviated,Ne.Standalone);break;case"LLLL":oe=Ir(or.Months,mt.Wide,Ne.Standalone);break;case"LLLLL":oe=Ir(or.Months,mt.Narrow,Ne.Standalone);break;case"w":oe=nr(1);break;case"ww":oe=nr(2);break;case"W":oe=nr(1,!0);break;case"d":oe=Fr(Wn.Date,1);break;case"dd":oe=Fr(Wn.Date,2);break;case"c":case"cc":oe=Fr(Wn.Day,1);break;case"ccc":oe=Ir(or.Days,mt.Abbreviated,Ne.Standalone);break;case"cccc":oe=Ir(or.Days,mt.Wide,Ne.Standalone);break;case"ccccc":oe=Ir(or.Days,mt.Narrow,Ne.Standalone);break;case"cccccc":oe=Ir(or.Days,mt.Short,Ne.Standalone);break;case"E":case"EE":case"EEE":oe=Ir(or.Days,mt.Abbreviated);break;case"EEEE":oe=Ir(or.Days,mt.Wide);break;case"EEEEE":oe=Ir(or.Days,mt.Narrow);break;case"EEEEEE":oe=Ir(or.Days,mt.Short);break;case"a":case"aa":case"aaa":oe=Ir(or.DayPeriods,mt.Abbreviated);break;case"aaaa":oe=Ir(or.DayPeriods,mt.Wide);break;case"aaaaa":oe=Ir(or.DayPeriods,mt.Narrow);break;case"b":case"bb":case"bbb":oe=Ir(or.DayPeriods,mt.Abbreviated,Ne.Standalone,!0);break;case"bbbb":oe=Ir(or.DayPeriods,mt.Wide,Ne.Standalone,!0);break;case"bbbbb":oe=Ir(or.DayPeriods,mt.Narrow,Ne.Standalone,!0);break;case"B":case"BB":case"BBB":oe=Ir(or.DayPeriods,mt.Abbreviated,Ne.Format,!0);break;case"BBBB":oe=Ir(or.DayPeriods,mt.Wide,Ne.Format,!0);break;case"BBBBB":oe=Ir(or.DayPeriods,mt.Narrow,Ne.Format,!0);break;case"h":oe=Fr(Wn.Hours,1,-12);break;case"hh":oe=Fr(Wn.Hours,2,-12);break;case"H":oe=Fr(Wn.Hours,1);break;case"HH":oe=Fr(Wn.Hours,2);break;case"m":oe=Fr(Wn.Minutes,1);break;case"mm":oe=Fr(Wn.Minutes,2);break;case"s":oe=Fr(Wn.Seconds,1);break;case"ss":oe=Fr(Wn.Seconds,2);break;case"S":oe=Fr(Wn.FractionalSeconds,1);break;case"SS":oe=Fr(Wn.FractionalSeconds,2);break;case"SSS":oe=Fr(Wn.FractionalSeconds,3);break;case"Z":case"ZZ":case"ZZZ":oe=kn(er.Short);break;case"ZZZZZ":oe=kn(er.Extended);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":oe=kn(er.ShortGMT);break;case"OOOO":case"ZZZZ":case"zzzz":oe=kn(er.Long);break;default:return null}return Jr[V]=oe,oe}(Bi);Ii+=Kt?Kt(Qe,W,Nr):"''"===Bi?"'":Bi.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),Ii}function Lr(V,oe,W){const Ee=new Date(0);return Ee.setFullYear(V,oe,W),Ee.setHours(0,0,0),Ee}function Qn(V,oe){const W=function ut(V){return(0,E.cg1)(V)[E.wAp.LocaleId]}(V);if(gi[W]=gi[W]||{},gi[W][oe])return gi[W][oe];let Ee="";switch(oe){case"shortDate":Ee=_n(V,st.Short);break;case"mediumDate":Ee=_n(V,st.Medium);break;case"longDate":Ee=_n(V,st.Long);break;case"fullDate":Ee=_n(V,st.Full);break;case"shortTime":Ee=Ot(V,st.Short);break;case"mediumTime":Ee=Ot(V,st.Medium);break;case"longTime":Ee=Ot(V,st.Long);break;case"fullTime":Ee=Ot(V,st.Full);break;case"short":const Qe=Qn(V,"shortTime"),Ft=Qn(V,"shortDate");Ee=ti(rn(V,st.Short),[Qe,Ft]);break;case"medium":const qt=Qn(V,"mediumTime"),Rn=Qn(V,"mediumDate");Ee=ti(rn(V,st.Medium),[qt,Rn]);break;case"long":const Nr=Qn(V,"longTime"),Ii=Qn(V,"longDate");Ee=ti(rn(V,st.Long),[Nr,Ii]);break;case"full":const Bi=Qn(V,"fullTime"),Kt=Qn(V,"fullDate");Ee=ti(rn(V,st.Full),[Bi,Kt])}return Ee&&(gi[W][oe]=Ee),Ee}function ti(V,oe){return oe&&(V=V.replace(/\{([^}]+)}/g,function(W,Ee){return null!=oe&&Ee in oe?oe[Ee]:W})),V}function Vi(V,oe,W="-",Ee,Qe){let Ft="";(V<0||Qe&&V<=0)&&(Qe?V=1-V:(V=-V,Ft=W));let qt=String(V);for(;qt.length<oe;)qt="0"+qt;return Ee&&(qt=qt.slice(qt.length-oe)),Ft+qt}function Fr(V,oe,W=0,Ee=!1,Qe=!1){return function(Ft,qt){let Rn=function Rr(V,oe){switch(V){case Wn.FullYear:return oe.getFullYear();case Wn.Month:return oe.getMonth();case Wn.Date:return oe.getDate();case Wn.Hours:return oe.getHours();case Wn.Minutes:return oe.getMinutes();case Wn.Seconds:return oe.getSeconds();case Wn.FractionalSeconds:return oe.getMilliseconds();case Wn.Day:return oe.getDay();default:throw new Error(`Unknown DateType value "${V}".`)}}(V,Ft);if((W>0||Rn>-W)&&(Rn+=W),V===Wn.Hours)0===Rn&&-12===W&&(Rn=12);else if(V===Wn.FractionalSeconds)return function Ki(V,oe){return Vi(V,3).substring(0,oe)}(Rn,oe);const Nr=zt(qt,xt.MinusSign);return Vi(Rn,oe,Nr,Ee,Qe)}}function Ir(V,oe,W=Ne.Format,Ee=!1){return function(Qe,Ft){return function di(V,oe,W,Ee,Qe,Ft){switch(W){case or.Months:return function lt(V,oe,W){const Ee=(0,E.cg1)(V),Ft=Bn([Ee[E.wAp.MonthsFormat],Ee[E.wAp.MonthsStandalone]],oe);return Bn(Ft,W)}(oe,Qe,Ee)[V.getMonth()];case or.Days:return function ot(V,oe,W){const Ee=(0,E.cg1)(V),Ft=Bn([Ee[E.wAp.DaysFormat],Ee[E.wAp.DaysStandalone]],oe);return Bn(Ft,W)}(oe,Qe,Ee)[V.getDay()];case or.DayPeriods:const qt=V.getHours(),Rn=V.getMinutes();if(Ft){const Ii=function kr(V){const oe=(0,E.cg1)(V);return qn(oe),(oe[E.wAp.ExtraData][2]||[]).map(Ee=>"string"==typeof Ee?Ar(Ee):[Ar(Ee[0]),Ar(Ee[1])])}(oe),Bi=function ii(V,oe,W){const Ee=(0,E.cg1)(V);qn(Ee);const Ft=Bn([Ee[E.wAp.ExtraData][0],Ee[E.wAp.ExtraData][1]],oe)||[];return Bn(Ft,W)||[]}(oe,Qe,Ee),Kt=Ii.findIndex(si=>{if(Array.isArray(si)){const[gr,Mi]=si,Fn=qt>=gr.hours&&Rn>=gr.minutes,Vn=qt<Mi.hours||qt===Mi.hours&&Rn<Mi.minutes;if(gr.hours<Mi.hours){if(Fn&&Vn)return!0}else if(Fn||Vn)return!0}else if(si.hours===qt&&si.minutes===Rn)return!0;return!1});if(-1!==Kt)return Bi[Kt]}return function Je(V,oe,W){const Ee=(0,E.cg1)(V),Ft=Bn([Ee[E.wAp.DayPeriodsFormat],Ee[E.wAp.DayPeriodsStandalone]],oe);return Bn(Ft,W)}(oe,Qe,Ee)[qt<12?0:1];case or.Eras:return function gt(V,oe){return Bn((0,E.cg1)(V)[E.wAp.Eras],oe)}(oe,Ee)[V.getFullYear()<=0?0:1];default:throw new Error(`unexpected translation type ${W}`)}}(Qe,Ft,V,oe,W,Ee)}}function kn(V){return function(oe,W,Ee){const Qe=-1*Ee,Ft=zt(W,xt.MinusSign),qt=Qe>0?Math.floor(Qe/60):Math.ceil(Qe/60);switch(V){case er.Short:return(Qe>=0?"+":"")+Vi(qt,2,Ft)+Vi(Math.abs(Qe%60),2,Ft);case er.ShortGMT:return"GMT"+(Qe>=0?"+":"")+Vi(qt,1,Ft);case er.Long:return"GMT"+(Qe>=0?"+":"")+Vi(qt,2,Ft)+":"+Vi(Math.abs(Qe%60),2,Ft);case er.Extended:return 0===Ee?"Z":(Qe>=0?"+":"")+Vi(qt,2,Ft)+":"+Vi(Math.abs(Qe%60),2,Ft);default:throw new Error(`Unknown zone width "${V}"`)}}}const mn=0,Xt=4;function tr(V){return Lr(V.getFullYear(),V.getMonth(),V.getDate()+(Xt-V.getDay()))}function nr(V,oe=!1){return function(W,Ee){let Qe;if(oe){const Ft=new Date(W.getFullYear(),W.getMonth(),1).getDay()-1,qt=W.getDate();Qe=1+Math.floor((qt+Ft)/7)}else{const Ft=tr(W),qt=function yn(V){const oe=Lr(V,mn,1).getDay();return Lr(V,0,1+(oe<=Xt?Xt:Xt+7)-oe)}(Ft.getFullYear()),Rn=Ft.getTime()-qt.getTime();Qe=1+Math.round(Rn/6048e5)}return Vi(Qe,V,zt(Ee,xt.MinusSign))}}function vr(V,oe=!1){return function(W,Ee){return Vi(tr(W).getFullYear(),V,zt(Ee,xt.MinusSign),oe)}}const Jr={};function Ze(V,oe){V=V.replace(/:/g,"");const W=Date.parse("Jan 01, 1970 00:00:00 "+V)/6e4;return isNaN(W)?oe:W}function Xn(V){return V instanceof Date&&!isNaN(V.valueOf())}const oi=/^(\d+)?\.((\d+)(-(\d+))?)?$/,de=22,we=".",fe="0",Te=";",ge=",",Ye="#";function vs(V){const oe=parseInt(V);if(isNaN(oe))throw new Error("Invalid integer literal when parsing "+V);return oe}function Es(V,oe){oe=encodeURIComponent(oe);for(const W of V.split(";")){const Ee=W.indexOf("="),[Qe,Ft]=-1==Ee?[W,""]:[W.slice(0,Ee),W.slice(Ee+1)];if(Qe.trim()===oe)return decodeURIComponent(Ft)}return null}const Ss=/\s+/,Pn=[];let Sr=(()=>{class V{constructor(W,Ee,Qe,Ft){this._iterableDiffers=W,this._keyValueDiffers=Ee,this._ngEl=Qe,this._renderer=Ft,this.initialClasses=Pn,this.stateMap=new Map}set klass(W){this.initialClasses=null!=W?W.trim().split(Ss):Pn}set ngClass(W){this.rawClass="string"==typeof W?W.trim().split(Ss):W}ngDoCheck(){for(const Ee of this.initialClasses)this._updateState(Ee,!0);const W=this.rawClass;if(Array.isArray(W)||W instanceof Set)for(const Ee of W)this._updateState(Ee,!0);else if(null!=W)for(const Ee of Object.keys(W))this._updateState(Ee,Boolean(W[Ee]));this._applyStateDiff()}_updateState(W,Ee){const Qe=this.stateMap.get(W);void 0!==Qe?(Qe.enabled!==Ee&&(Qe.changed=!0,Qe.enabled=Ee),Qe.touched=!0):this.stateMap.set(W,{enabled:Ee,changed:!0,touched:!0})}_applyStateDiff(){for(const W of this.stateMap){const Ee=W[0],Qe=W[1];Qe.changed?(this._toggleClass(Ee,Qe.enabled),Qe.changed=!1):Qe.touched||(Qe.enabled&&this._toggleClass(Ee,!1),this.stateMap.delete(Ee)),Qe.touched=!1}}_toggleClass(W,Ee){(W=W.trim()).length>0&&W.split(Ss).forEach(Qe=>{Ee?this._renderer.addClass(this._ngEl.nativeElement,Qe):this._renderer.removeClass(this._ngEl.nativeElement,Qe)})}}return V.\u0275fac=function(W){return new(W||V)(E.Y36(E.ZZ4),E.Y36(E.aQg),E.Y36(E.SBq),E.Y36(E.Qsj))},V.\u0275dir=E.lG2({type:V,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"},standalone:!0}),V})();class Ni{constructor(oe,W,Ee,Qe){this.$implicit=oe,this.ngForOf=W,this.index=Ee,this.count=Qe}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let fs=(()=>{class V{set ngForOf(W){this._ngForOf=W,this._ngForOfDirty=!0}set ngForTrackBy(W){this._trackByFn=W}get ngForTrackBy(){return this._trackByFn}constructor(W,Ee,Qe){this._viewContainer=W,this._template=Ee,this._differs=Qe,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(W){W&&(this._template=W)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const W=this._ngForOf;!this._differ&&W&&(this._differ=this._differs.find(W).create(this.ngForTrackBy))}if(this._differ){const W=this._differ.diff(this._ngForOf);W&&this._applyChanges(W)}}_applyChanges(W){const Ee=this._viewContainer;W.forEachOperation((Qe,Ft,qt)=>{if(null==Qe.previousIndex)Ee.createEmbeddedView(this._template,new Ni(Qe.item,this._ngForOf,-1,-1),null===qt?void 0:qt);else if(null==qt)Ee.remove(null===Ft?void 0:Ft);else if(null!==Ft){const Rn=Ee.get(Ft);Ee.move(Rn,qt),Gr(Rn,Qe)}});for(let Qe=0,Ft=Ee.length;Qe<Ft;Qe++){const Rn=Ee.get(Qe).context;Rn.index=Qe,Rn.count=Ft,Rn.ngForOf=this._ngForOf}W.forEachIdentityChange(Qe=>{Gr(Ee.get(Qe.currentIndex),Qe)})}static ngTemplateContextGuard(W,Ee){return!0}}return V.\u0275fac=function(W){return new(W||V)(E.Y36(E.s_b),E.Y36(E.Rgc),E.Y36(E.ZZ4))},V.\u0275dir=E.lG2({type:V,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),V})();function Gr(V,oe){V.context.$implicit=oe.item}let Xs=(()=>{class V{constructor(W,Ee){this._viewContainer=W,this._context=new ar,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=Ee}set ngIf(W){this._context.$implicit=this._context.ngIf=W,this._updateView()}set ngIfThen(W){Ks("ngIfThen",W),this._thenTemplateRef=W,this._thenViewRef=null,this._updateView()}set ngIfElse(W){Ks("ngIfElse",W),this._elseTemplateRef=W,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(W,Ee){return!0}}return V.\u0275fac=function(W){return new(W||V)(E.Y36(E.s_b),E.Y36(E.Rgc))},V.\u0275dir=E.lG2({type:V,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),V})();class ar{constructor(){this.$implicit=null,this.ngIf=null}}function Ks(V,oe){if(oe&&!oe.createEmbeddedView)throw new Error(`${V} must be a TemplateRef, but received '${(0,E.AaK)(oe)}'.`)}function ft(V,oe){return new E.vHH(2100,!1)}class Ct{createSubscription(oe,W){return oe.subscribe({next:W,error:Ee=>{throw Ee}})}dispose(oe){oe.unsubscribe()}}class sn{createSubscription(oe,W){return oe.then(W,Ee=>{throw Ee})}dispose(oe){}}const Sn=new sn,Jn=new Ct;let Tr=(()=>{class V{constructor(W){this._latestValue=null,this._subscription=null,this._obj=null,this._strategy=null,this._ref=W}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(W){return this._obj?W!==this._obj?(this._dispose(),this.transform(W)):this._latestValue:(W&&this._subscribe(W),this._latestValue)}_subscribe(W){this._obj=W,this._strategy=this._selectStrategy(W),this._subscription=this._strategy.createSubscription(W,Ee=>this._updateLatestValue(W,Ee))}_selectStrategy(W){if((0,E.QGY)(W))return Sn;if((0,E.F4k)(W))return Jn;throw ft()}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(W,Ee){W===this._obj&&(this._latestValue=Ee,this._ref.markForCheck())}}return V.\u0275fac=function(W){return new(W||V)(E.Y36(E.sBO,16))},V.\u0275pipe=E.Yjl({name:"async",type:V,pure:!1,standalone:!0}),V})();const Pr=new E.OlP("DATE_PIPE_DEFAULT_TIMEZONE"),Uo=new E.OlP("DATE_PIPE_DEFAULT_OPTIONS");let ks=(()=>{class V{constructor(W,Ee,Qe){this.locale=W,this.defaultTimezone=Ee,this.defaultOptions=Qe}transform(W,Ee,Qe,Ft){if(null==W||""===W||W!=W)return null;try{return Us(W,Ee??this.defaultOptions?.dateFormat??"mediumDate",Ft||this.locale,Qe??this.defaultOptions?.timezone??this.defaultTimezone??void 0)}catch(qt){throw ft()}}}return V.\u0275fac=function(W){return new(W||V)(E.Y36(E.soG,16),E.Y36(Pr,24),E.Y36(Uo,24))},V.\u0275pipe=E.Yjl({name:"date",type:V,pure:!0,standalone:!0}),V})(),Pa=(()=>{class V{constructor(W){this._locale=W}transform(W,Ee,Qe){if(!function Js(V){return!(null==V||""===V||V!=V)}(W))return null;Qe=Qe||this._locale;try{return function Or(V,oe,W){return function Nn(V,oe,W,Ee,Qe,Ft,qt=!1){let Rn="",Nr=!1;if(isFinite(V)){let Ii=function Ms(V){let Ee,Qe,Ft,qt,Rn,oe=Math.abs(V)+"",W=0;for((Qe=oe.indexOf(we))>-1&&(oe=oe.replace(we,"")),(Ft=oe.search(/e/i))>0?(Qe<0&&(Qe=Ft),Qe+=+oe.slice(Ft+1),oe=oe.substring(0,Ft)):Qe<0&&(Qe=oe.length),Ft=0;oe.charAt(Ft)===fe;Ft++);if(Ft===(Rn=oe.length))Ee=[0],Qe=1;else{for(Rn--;oe.charAt(Rn)===fe;)Rn--;for(Qe-=Ft,Ee=[],qt=0;Ft<=Rn;Ft++,qt++)Ee[qt]=Number(oe.charAt(Ft))}return Qe>de&&(Ee=Ee.splice(0,de-1),W=Qe-1,Qe=1),{digits:Ee,exponent:W,integerLen:Qe}}(V);qt&&(Ii=function Zi(V){if(0===V.digits[0])return V;const oe=V.digits.length-V.integerLen;return V.exponent?V.exponent+=2:(0===oe?V.digits.push(0,0):1===oe&&V.digits.push(0),V.integerLen+=2),V}(Ii));let Bi=oe.minInt,Kt=oe.minFrac,si=oe.maxFrac;if(Ft){const Cn=Ft.match(oi);if(null===Cn)throw new Error(`${Ft} is not a valid digit info`);const Bt=Cn[1],un=Cn[3],Oi=Cn[5];null!=Bt&&(Bi=vs(Bt)),null!=un&&(Kt=vs(un)),null!=Oi?si=vs(Oi):null!=un&&Kt>si&&(si=Kt)}!function is(V,oe,W){if(oe>W)throw new Error(`The minimum number of digits after fraction (${oe}) is higher than the maximum (${W}).`);let Ee=V.digits,Qe=Ee.length-V.integerLen;const Ft=Math.min(Math.max(oe,Qe),W);let qt=Ft+V.integerLen,Rn=Ee[qt];if(qt>0){Ee.splice(Math.max(V.integerLen,qt));for(let Kt=qt;Kt<Ee.length;Kt++)Ee[Kt]=0}else{Qe=Math.max(0,Qe),V.integerLen=1,Ee.length=Math.max(1,qt=Ft+1),Ee[0]=0;for(let Kt=1;Kt<qt;Kt++)Ee[Kt]=0}if(Rn>=5)if(qt-1<0){for(let Kt=0;Kt>qt;Kt--)Ee.unshift(0),V.integerLen++;Ee.unshift(1),V.integerLen++}else Ee[qt-1]++;for(;Qe<Math.max(0,Ft);Qe++)Ee.push(0);let Nr=0!==Ft;const Ii=oe+V.integerLen,Bi=Ee.reduceRight(function(Kt,si,gr,Mi){return Mi[gr]=(si+=Kt)<10?si:si-10,Nr&&(0===Mi[gr]&&gr>=Ii?Mi.pop():Nr=!1),si>=10?1:0},0);Bi&&(Ee.unshift(Bi),V.integerLen++)}(Ii,Kt,si);let gr=Ii.digits,Mi=Ii.integerLen;const Fn=Ii.exponent;let Vn=[];for(Nr=gr.every(Cn=>!Cn);Mi<Bi;Mi++)gr.unshift(0);for(;Mi<0;Mi++)gr.unshift(0);Mi>0?Vn=gr.splice(Mi,gr.length):(Vn=gr,gr=[0]);const Kr=[];for(gr.length>=oe.lgSize&&Kr.unshift(gr.splice(-oe.lgSize,gr.length).join(""));gr.length>oe.gSize;)Kr.unshift(gr.splice(-oe.gSize,gr.length).join(""));gr.length&&Kr.unshift(gr.join("")),Rn=Kr.join(zt(W,Ee)),Vn.length&&(Rn+=zt(W,Qe)+Vn.join("")),Fn&&(Rn+=zt(W,xt.Exponential)+"+"+Fn)}else Rn=zt(W,xt.Infinity);return Rn=V<0&&!Nr?oe.negPre+Rn+oe.negSuf:oe.posPre+Rn+oe.posSuf,Rn}(V,function xr(V,oe="-"){const W={minInt:1,minFrac:0,maxFrac:0,posPre:"",posSuf:"",negPre:"",negSuf:"",gSize:0,lgSize:0},Ee=V.split(Te),Qe=Ee[0],Ft=Ee[1],qt=-1!==Qe.indexOf(we)?Qe.split(we):[Qe.substring(0,Qe.lastIndexOf(fe)+1),Qe.substring(Qe.lastIndexOf(fe)+1)],Rn=qt[0],Nr=qt[1]||"";W.posPre=Rn.substring(0,Rn.indexOf(Ye));for(let Bi=0;Bi<Nr.length;Bi++){const Kt=Nr.charAt(Bi);Kt===fe?W.minFrac=W.maxFrac=Bi+1:Kt===Ye?W.maxFrac=Bi+1:W.posSuf+=Kt}const Ii=Rn.split(ge);if(W.gSize=Ii[1]?Ii[1].length:0,W.lgSize=Ii[2]||Ii[1]?(Ii[2]||Ii[1]).length:0,Ft){const Bi=Qe.length-W.posPre.length-W.posSuf.length,Kt=Ft.indexOf(Ye);W.negPre=Ft.substring(0,Kt).replace(/'/g,""),W.negSuf=Ft.slice(Kt+Bi).replace(/'/g,"")}else W.negPre=oe+W.posPre,W.negSuf=W.posSuf;return W}(function bn(V,oe){return(0,E.cg1)(V)[E.wAp.NumberFormats][oe]}(oe,J.Percent),zt(oe,xt.MinusSign)),oe,xt.Group,xt.Decimal,W,!0).replace(new RegExp("%","g"),zt(oe,xt.PercentSign))}(function eo(V){if("string"==typeof V&&!isNaN(Number(V)-parseFloat(V)))return Number(V);if("number"!=typeof V)throw new Error(`${V} is not a number`);return V}(W),Qe,Ee)}catch(Ft){throw ft()}}}return V.\u0275fac=function(W){return new(W||V)(E.Y36(E.soG,16))},V.\u0275pipe=E.Yjl({name:"percent",type:V,pure:!0,standalone:!0}),V})();let Au=(()=>{class V{}return V.\u0275fac=function(W){return new(W||V)},V.\u0275mod=E.oAB({type:V}),V.\u0275inj=E.cJS({}),V})();const ru="browser",Vs="server";function Po(V){return V===Vs}let da=(()=>{class V{}return V.\u0275prov=(0,E.Yz7)({token:V,providedIn:"root",factory:()=>new ha((0,E.LFG)(ke),window)}),V})();class ha{constructor(oe,W){this.document=oe,this.window=W,this.offset=()=>[0,0]}setOffset(oe){this.offset=Array.isArray(oe)?()=>oe:oe}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(oe){this.supportsScrolling()&&this.window.scrollTo(oe[0],oe[1])}scrollToAnchor(oe){if(!this.supportsScrolling())return;const W=function ea(V,oe){const W=V.getElementById(oe)||V.getElementsByName(oe)[0];if(W)return W;if("function"==typeof V.createTreeWalker&&V.body&&(V.body.createShadowRoot||V.body.attachShadow)){const Ee=V.createTreeWalker(V.body,NodeFilter.SHOW_ELEMENT);let Qe=Ee.currentNode;for(;Qe;){const Ft=Qe.shadowRoot;if(Ft){const qt=Ft.getElementById(oe)||Ft.querySelector(`[name="${oe}"]`);if(qt)return qt}Qe=Ee.nextNode()}}return null}(this.document,oe);W&&(this.scrollToElement(W),W.focus())}setHistoryScrollRestoration(oe){if(this.supportScrollRestoration()){const W=this.window.history;W&&W.scrollRestoration&&(W.scrollRestoration=oe)}}scrollToElement(oe){const W=oe.getBoundingClientRect(),Ee=W.left+this.window.pageXOffset,Qe=W.top+this.window.pageYOffset,Ft=this.offset();this.window.scrollTo(Ee-Ft[0],Qe-Ft[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const oe=Yo(this.window.history)||Yo(Object.getPrototypeOf(this.window.history));return!(!oe||!oe.writable&&!oe.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function Yo(V){return Object.getOwnPropertyDescriptor(V,"scrollRestoration")}class Cl{}},4650:(Qt,it,K)=>{"use strict";K.d(it,{$8M:()=>xs,$WT:()=>Ci,$Z:()=>Gg,AFp:()=>VT,ALo:()=>G,AaK:()=>He,AsE:()=>Dc,BQk:()=>Wp,CHM:()=>Jt,CRH:()=>yT,CZH:()=>C0,CqO:()=>cm,D6c:()=>PE,DdM:()=>rl,EJc:()=>zb,EiD:()=>mp,EpF:()=>am,F$t:()=>Vh,F4k:()=>lm,FYo:()=>Pg,FiY:()=>Xa,G48:()=>hE,Gf:()=>mT,GfV:()=>Af,Gpc:()=>Pe,Hsn:()=>fm,JOm:()=>Zr,JVY:()=>Tt,JZr:()=>et,KtG:()=>wn,L6k:()=>Zt,LAX:()=>lr,LFG:()=>mn,LSH:()=>Ll,Lbi:()=>Hb,Lck:()=>rt,MAs:()=>rm,MMx:()=>br,NdJ:()=>qp,O4$:()=>$a,OlP:()=>fi,Oqu:()=>xu,P3R:()=>Sg,PXZ:()=>oE,Q6J:()=>im,QGY:()=>um,Qsj:()=>Mg,R0b:()=>rh,RDi:()=>ml,Rgc:()=>mu,SBq:()=>Sh,Sil:()=>qb,Suo:()=>vT,TTD:()=>hi,TgZ:()=>zp,VKq:()=>hd,W1O:()=>ET,WLB:()=>_0,X6Q:()=>dE,XFs:()=>Tn,Xpm:()=>Nn,Xts:()=>ql,Y36:()=>Pd,YKP:()=>Ae,YNc:()=>nm,Yjl:()=>vs,Yz7:()=>zt,Z0I:()=>Zn,ZZ4:()=>lT,_Bn:()=>te,_UZ:()=>Iv,_Vd:()=>Cd,_c5:()=>DE,_uU:()=>Jf,aQg:()=>cT,c2e:()=>Gb,cJS:()=>dr,cg1:()=>bm,dDg:()=>nE,dqk:()=>er,eBb:()=>Ln,eFA:()=>eb,eJc:()=>q0,ekj:()=>Le,eoX:()=>QT,f3M:()=>yn,g9A:()=>GT,h0i:()=>ce,hGG:()=>AE,hij:()=>jl,iGM:()=>gT,ifc:()=>Xn,ip1:()=>BT,jDz:()=>mo,kL8:()=>tg,kcU:()=>lo,lG2:()=>is,lcZ:()=>je,lqb:()=>Qc,lri:()=>ZT,mCW:()=>qc,n5z:()=>qu,n_E:()=>Ca,oAB:()=>xr,oxw:()=>hm,pB0:()=>Br,q3G:()=>No,q4F:()=>wp,qLn:()=>Ih,qOj:()=>pv,qZA:()=>Uh,qzn:()=>se,rWj:()=>YT,sBO:()=>fE,s_b:()=>Zv,soG:()=>I0,tb:()=>$T,tp0:()=>X,uIk:()=>$p,vHH:()=>at,vpe:()=>An,wAp:()=>Xr,xp6:()=>Dp,ynx:()=>om,z2F:()=>x0,z3N:()=>k,zSh:()=>Df,zs3:()=>Xl});var E=K(7579),M=K(727),re=K(9751),Oe=K(6451),De=K(3099);function ke(r){for(let o in r)if(r[o]===ke)return o;throw Error("Could not find renamed property on target object.")}function Ge(r,o){for(const d in o)o.hasOwnProperty(d)&&!r.hasOwnProperty(d)&&(r[d]=o[d])}function He(r){if("string"==typeof r)return r;if(Array.isArray(r))return"["+r.map(He).join(", ")+"]";if(null==r)return""+r;if(r.overriddenName)return`${r.overriddenName}`;if(r.name)return`${r.name}`;const o=r.toString();if(null==o)return""+o;const d=o.indexOf("\n");return-1===d?o:o.substring(0,d)}function Ke(r,o){return null==r||""===r?null===o?"":o:null==o||""===o?r:r+" "+o}const Ie=ke({__forward_ref__:ke});function Pe(r){return r.__forward_ref__=Pe,r.toString=function(){return He(this())},r}function Re(r){return yt(r)?r():r}function yt(r){return"function"==typeof r&&r.hasOwnProperty(Ie)&&r.__forward_ref__===Pe}function ae(r){return r&&!!r.\u0275providers}const et="https://g.co/ng/security#xss";class at extends Error{constructor(o,d){super(nt(o,d)),this.code=o}}function nt(r,o){return`NG0${Math.abs(r)}${o?": "+o.trim():""}`}function We(r){return"string"==typeof r?r:null==r?"":String(r)}function Mt(r,o){throw new at(-201,!1)}function Nt(r,o){null==r&&function jt(r,o,d,f){throw new Error(`ASSERTION ERROR: ${r}`+(null==f?"":` [Expected=> ${d} ${f} ${o} <=Actual]`))}(o,r,null,"!=")}function zt(r){return{token:r.token,providedIn:r.providedIn||null,factory:r.factory,value:void 0}}function dr(r){return{providers:r.providers||[],imports:r.imports||[]}}function Hn(r){return Vr(r,ii)||Vr(r,Bn)}function Zn(r){return null!==Hn(r)}function Vr(r,o){return r.hasOwnProperty(o)?r[o]:null}function kr(r){return r&&(r.hasOwnProperty(fr)||r.hasOwnProperty(Ar))?r[fr]:null}const ii=ke({\u0275prov:ke}),fr=ke({\u0275inj:ke}),Bn=ke({ngInjectableDef:ke}),Ar=ke({ngInjectorDef:ke});var Tn=(()=>((Tn=Tn||{})[Tn.Default=0]="Default",Tn[Tn.Host=1]="Host",Tn[Tn.Self=2]="Self",Tn[Tn.SkipSelf=4]="SkipSelf",Tn[Tn.Optional=8]="Optional",Tn))();let ci;function pr(r){const o=ci;return ci=r,o}function gi(r,o,d){const f=Hn(r);return f&&"root"==f.providedIn?void 0===f.value?f.value=f.factory():f.value:d&Tn.Optional?null:void 0!==o?o:void Mt(He(r))}const er=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),Lr={},Qn="__NG_DI_FLAG__",ti="ngTempTokenPath",Vi="ngTokenPath",Ki=/\n/gm,Fr="\u0275",Rr="__source";let Ir;function di(r){const o=Ir;return Ir=r,o}function kn(r,o=Tn.Default){if(void 0===Ir)throw new at(-203,!1);return null===Ir?gi(r,void 0,o):Ir.get(r,o&Tn.Optional?null:void 0,o)}function mn(r,o=Tn.Default){return(function Hr(){return ci}()||kn)(Re(r),o)}function yn(r,o=Tn.Default){return mn(r,tr(o))}function tr(r){return typeof r>"u"||"number"==typeof r?r:0|(r.optional&&8)|(r.host&&1)|(r.self&&2)|(r.skipSelf&&4)}function nr(r){const o=[];for(let d=0;d<r.length;d++){const f=Re(r[d]);if(Array.isArray(f)){if(0===f.length)throw new at(900,!1);let m,b=Tn.Default;for(let x=0;x<f.length;x++){const L=f[x],$=Jr(L);"number"==typeof $?-1===$?m=L.token:b|=$:m=L}o.push(mn(m,b))}else o.push(mn(f))}return o}function vr(r,o){return r[Qn]=o,r.prototype[Qn]=o,r}function Jr(r){return r[Qn]}function ht(r){return{toString:r}.toString()}var $t=(()=>(($t=$t||{})[$t.OnPush=0]="OnPush",$t[$t.Default=1]="Default",$t))(),Xn=(()=>{return(r=Xn||(Xn={}))[r.Emulated=0]="Emulated",r[r.None=2]="None",r[r.ShadowDom=3]="ShadowDom",Xn;var r})();const oi={},de=[],we=ke({\u0275cmp:ke}),fe=ke({\u0275dir:ke}),Te=ke({\u0275pipe:ke}),ge=ke({\u0275mod:ke}),Ye=ke({\u0275fac:ke}),Ht=ke({__NG_ELEMENT_ID__:ke});let pn=0;function Nn(r){return ht(()=>{const d=!0===r.standalone,f={},m={type:r.type,providersResolver:null,decls:r.decls,vars:r.vars,factory:null,template:r.template||null,consts:r.consts||null,ngContentSelectors:r.ngContentSelectors,hostBindings:r.hostBindings||null,hostVars:r.hostVars||0,hostAttrs:r.hostAttrs||null,contentQueries:r.contentQueries||null,declaredInputs:f,inputs:null,outputs:null,exportAs:r.exportAs||null,onPush:r.changeDetection===$t.OnPush,directiveDefs:null,pipeDefs:null,standalone:d,dependencies:d&&r.dependencies||null,getStandaloneInjector:null,selectors:r.selectors||de,viewQuery:r.viewQuery||null,features:r.features||null,data:r.data||{},encapsulation:r.encapsulation||Xn.Emulated,id:"c"+pn++,styles:r.styles||de,_:null,setInput:null,schemas:r.schemas||null,tView:null,findHostDirectiveDefs:null,hostDirectives:null},b=r.dependencies,x=r.features;return m.inputs=Ms(r.inputs,f),m.outputs=Ms(r.outputs),x&&x.forEach(L=>L(m)),m.directiveDefs=b?()=>("function"==typeof b?b():b).map(Or).filter(wi):null,m.pipeDefs=b?()=>("function"==typeof b?b():b).map(_i).filter(wi):null,m})}function Or(r){return rr(r)||Yi(r)}function wi(r){return null!==r}function xr(r){return ht(()=>({type:r.type,bootstrap:r.bootstrap||de,declarations:r.declarations||de,imports:r.imports||de,exports:r.exports||de,transitiveCompileScopes:null,schemas:r.schemas||null,id:r.id||null}))}function Ms(r,o){if(null==r)return oi;const d={};for(const f in r)if(r.hasOwnProperty(f)){let m=r[f],b=m;Array.isArray(m)&&(b=m[1],m=m[0]),d[m]=f,o&&(o[m]=b)}return d}const is=Nn;function vs(r){return{type:r.type,name:r.name,factory:null,pure:!1!==r.pure,standalone:!0===r.standalone,onDestroy:r.type.prototype.ngOnDestroy||null}}function rr(r){return r[we]||null}function Yi(r){return r[fe]||null}function _i(r){return r[Te]||null}function Ci(r){const o=rr(r)||Yi(r)||_i(r);return null!==o&&o.standalone}function Es(r,o){const d=r[ge]||null;if(!d&&!0===o)throw new Error(`Type ${He(r)} does not have '\u0275mod' property.`);return d}const Ss=0,Pn=1,Sr=2,Ei=3,hs=4,Qi=5,Ni=6,fs=7,Gr=8,qs=9,Xs=10,ar=11,Ks=12,Fo=13,la=14,Os=15,Bs=16,Ko=17,ys=18,Zs=19,jo=20,Li=21,pt=22,Ct=1,sn=2,Sn=7,Jn=8,Tr=9,$r=10;function Xi(r){return Array.isArray(r)&&"object"==typeof r[Ct]}function ss(r){return Array.isArray(r)&&!0===r[Ct]}function os(r){return 0!=(4&r.flags)}function Pr(r){return r.componentOffset>-1}function Uo(r){return 1==(1&r.flags)}function ks(r){return null!==r.template}function vo(r){return 0!=(256&r[Sr])}function uo(r,o){return r.hasOwnProperty(Ye)?r[Ye]:null}class yo{constructor(o,d,f){this.previousValue=o,this.currentValue=d,this.firstChange=f}isFirstChange(){return this.firstChange}}function hi(){return da}function da(r){return r.type.prototype.ngOnChanges&&(r.setInput=Yo),ha}function ha(){const r=su(this),o=r?.current;if(o){const d=r.previous;if(d===oi)r.previous=o;else for(let f in o)d[f]=o[f];r.current=null,this.ngOnChanges(o)}}function Yo(r,o,d,f){const m=this.declaredInputs[d],b=su(r)||function Cl(r,o){return r[ea]=o}(r,{previous:oi,current:null}),x=b.current||(b.current={}),L=b.previous,$=L[m];x[m]=new yo($&&$.currentValue,o,L===oi),r[f]=o}hi.ngInherit=!0;const ea="__ngSimpleChanges__";function su(r){return r[ea]||null}const ws=function(r,o,d){},ai="svg";function Fi(r){for(;Array.isArray(r);)r=r[Ss];return r}function Rs(r,o){return Fi(o[r])}function Ji(r,o){return Fi(o[r.index])}function Ha(r,o){return r.data[o]}function vi(r,o){return r[o]}function Cs(r,o){const d=o[r];return Xi(d)?d:d[Ss]}function _o(r){return 64==(64&r[Sr])}function ro(r,o){return null==o?null:r[o]}function na(r){r[ys]=0}function ji(r,o){r[Qi]+=o;let d=r,f=r[Ei];for(;null!==f&&(1===o&&1===d[Qi]||-1===o&&0===d[Qi]);)f[Qi]+=o,d=f,f=f[Ei]}const Dr={lFrame:sl(null),bindingsEnabled:!0};function H(){return Dr.bindingsEnabled}function xe(){return Dr.lFrame.lView}function wt(){return Dr.lFrame.tView}function Jt(r){return Dr.lFrame.contextLView=r,r[Gr]}function wn(r){return Dr.lFrame.contextLView=null,r}function xn(){let r=yr();for(;null!==r&&64===r.type;)r=r.parent;return r}function yr(){return Dr.lFrame.currentTNode}function Ti(r,o){const d=Dr.lFrame;d.currentTNode=r,d.isParent=o}function Ai(){return Dr.lFrame.isParent}function Ui(){Dr.lFrame.isParent=!1}function Wr(){const r=Dr.lFrame;let o=r.bindingRootIndex;return-1===o&&(o=r.bindingRootIndex=r.tView.bindingStartIndex),o}function Gi(){return Dr.lFrame.bindingIndex++}function Ns(r){const o=Dr.lFrame,d=o.bindingIndex;return o.bindingIndex=o.bindingIndex+r,d}function pa(r,o){const d=Dr.lFrame;d.bindingIndex=d.bindingRootIndex=r,au(o)}function au(r){Dr.lFrame.currentDirectiveIndex=r}function io(){return Dr.lFrame.currentQueryIndex}function yu(r){Dr.lFrame.currentQueryIndex=r}function il(r){const o=r[Pn];return 2===o.type?o.declTNode:1===o.type?r[Ni]:null}function qr(r,o,d){if(d&Tn.SkipSelf){let m=o,b=r;for(;!(m=m.parent,null!==m||d&Tn.Host||(m=il(b),null===m||(b=b[Os],10&m.type))););if(null===m)return!1;o=m,r=b}const f=Dr.lFrame=Il();return f.currentTNode=o,f.lView=r,!0}function Ga(r){const o=Il(),d=r[Pn];Dr.lFrame=o,o.currentTNode=d.firstChild,o.lView=r,o.tView=d,o.contextLView=r,o.bindingIndex=d.bindingStartIndex,o.inI18n=!1}function Il(){const r=Dr.lFrame,o=null===r?null:r.child;return null===o?sl(r):o}function sl(r){const o={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:r,child:null,inI18n:!1};return null!==r&&(r.child=o),o}function uu(){const r=Dr.lFrame;return Dr.lFrame=r.parent,r.currentTNode=null,r.lView=null,r}const xl=uu;function Ls(){const r=uu();r.isParent=!0,r.tView=null,r.selectedIndex=-1,r.contextLView=null,r.elementDepthCount=0,r.currentDirectiveIndex=-1,r.currentNamespace=null,r.bindingRootIndex=-1,r.bindingIndex=-1,r.currentQueryIndex=0}function so(){return Dr.lFrame.selectedIndex}function gs(r){Dr.lFrame.selectedIndex=r}function us(){const r=Dr.lFrame;return Ha(r.tView,r.selectedIndex)}function $a(){Dr.lFrame.currentNamespace=ai}function lo(){!function za(){Dr.lFrame.currentNamespace=null}()}function Ou(r,o){for(let d=o.directiveStart,f=o.directiveEnd;d<f;d++){const b=r.data[d].type.prototype,{ngAfterContentInit:x,ngAfterContentChecked:L,ngAfterViewInit:$,ngAfterViewChecked:ue,ngOnDestroy:Se}=b;x&&(r.contentHooks||(r.contentHooks=[])).push(-d,x),L&&((r.contentHooks||(r.contentHooks=[])).push(d,L),(r.contentCheckHooks||(r.contentCheckHooks=[])).push(d,L)),$&&(r.viewHooks||(r.viewHooks=[])).push(-d,$),ue&&((r.viewHooks||(r.viewHooks=[])).push(d,ue),(r.viewCheckHooks||(r.viewCheckHooks=[])).push(d,ue)),null!=Se&&(r.destroyHooks||(r.destroyHooks=[])).push(d,Se)}}function sa(r,o,d){oe(r,o,3,d)}function va(r,o,d,f){(3&r[Sr])===d&&oe(r,o,d,f)}function V(r,o){let d=r[Sr];(3&d)===o&&(d&=2047,d+=1,r[Sr]=d)}function oe(r,o,d,f){const b=f??-1,x=o.length-1;let L=0;for(let $=void 0!==f?65535&r[ys]:0;$<x;$++)if("number"==typeof o[$+1]){if(L=o[$],null!=f&&L>=f)break}else o[$]<0&&(r[ys]+=65536),(L<b||-1==b)&&(W(r,d,o,$),r[ys]=(4294901760&r[ys])+$+2),$++}function W(r,o,d,f){const m=d[f]<0,b=d[f+1],L=r[m?-d[f]:d[f]];if(m){if(r[Sr]>>11<r[ys]>>16&&(3&r[Sr])===o){r[Sr]+=2048,ws(4,L,b);try{b.call(L)}finally{ws(5,L,b)}}}else{ws(4,L,b);try{b.call(L)}finally{ws(5,L,b)}}}const Ee=-1;class Qe{constructor(o,d,f){this.factory=o,this.resolving=!1,this.canSeeViewProviders=d,this.injectImpl=f}}function gr(r,o,d){let f=0;for(;f<d.length;){const m=d[f];if("number"==typeof m){if(0!==m)break;f++;const b=d[f++],x=d[f++],L=d[f++];r.setAttribute(o,x,L,b)}else{const b=m,x=d[++f];Fn(b)?r.setProperty(o,b,x):r.setAttribute(o,b,x),f++}}return f}function Mi(r){return 3===r||4===r||6===r}function Fn(r){return 64===r.charCodeAt(0)}function Vn(r,o){if(null!==o&&0!==o.length)if(null===r||0===r.length)r=o.slice();else{let d=-1;for(let f=0;f<o.length;f++){const m=o[f];"number"==typeof m?d=m:0===d||Kr(r,d,m,null,-1===d||2===d?o[++f]:null)}}return r}function Kr(r,o,d,f,m){let b=0,x=r.length;if(-1===o)x=-1;else for(;b<r.length;){const L=r[b++];if("number"==typeof L){if(L===o){x=-1;break}if(L>o){x=b-1;break}}}for(;b<r.length;){const L=r[b];if("number"==typeof L)break;if(L===d){if(null===f)return void(null!==m&&(r[b+1]=m));if(f===r[b+1])return void(r[b+2]=m)}b++,null!==f&&b++,null!==m&&b++}-1!==x&&(r.splice(x,0,o),b=x+1),r.splice(b++,0,d),null!==f&&r.splice(b++,0,f),null!==m&&r.splice(b++,0,m)}function Cn(r){return r!==Ee}function Bt(r){return 32767&r}function Oi(r,o){let d=function un(r){return r>>16}(r),f=o;for(;d>0;)f=f[Os],d--;return f}let Ma=!0;function Dl(r){const o=Ma;return Ma=r,o}const Oa=255,Bl=5;let lu=0;const Go={};function zu(r,o){const d=ku(r,o);if(-1!==d)return d;const f=o[Pn];f.firstCreatePass&&(r.injectorIndex=o.length,Wa(f.data,r),Wa(o,null),Wa(f.blueprint,null));const m=Mr(r,o),b=r.injectorIndex;if(Cn(m)){const x=Bt(m),L=Oi(m,o),$=L[Pn].data;for(let ue=0;ue<8;ue++)o[b+ue]=L[x+ue]|$[x+ue]}return o[b+8]=m,b}function Wa(r,o){r.push(0,0,0,0,0,0,0,0,o)}function ku(r,o){return-1===r.injectorIndex||r.parent&&r.parent.injectorIndex===r.injectorIndex||null===o[r.injectorIndex+8]?-1:r.injectorIndex}function Mr(r,o){if(r.parent&&-1!==r.parent.injectorIndex)return r.parent.injectorIndex;let d=0,f=null,m=o;for(;null!==m;){if(f=_u(m),null===f)return Ee;if(d++,m=m[Os],-1!==f.injectorIndex)return f.injectorIndex|d<<16}return Ee}function Ru(r,o,d){!function uc(r,o,d){let f;"string"==typeof d?f=d.charCodeAt(0)||0:d.hasOwnProperty(Ht)&&(f=d[Ht]),null==f&&(f=d[Ht]=lu++);const m=f&Oa;o.data[r+(m>>Bl)]|=1<<m}(r,o,d)}function zi(r,o,d){if(d&Tn.Optional||void 0!==r)return r;Mt()}function ur(r,o,d,f){if(d&Tn.Optional&&void 0===f&&(f=null),!(d&(Tn.Self|Tn.Host))){const m=r[qs],b=pr(void 0);try{return m?m.get(o,f,d&Tn.Optional):gi(o,f,d&Tn.Optional)}finally{pr(b)}}return zi(f,0,d)}function Wu(r,o,d,f=Tn.Default,m){if(null!==r){if(1024&o[Sr]){const x=function lc(r,o,d,f,m){let b=r,x=o;for(;null!==b&&null!==x&&1024&x[Sr]&&!(256&x[Sr]);){const L=Ur(b,x,d,f|Tn.Self,Go);if(L!==Go)return L;let $=b.parent;if(!$){const ue=x[Li];if(ue){const Se=ue.get(d,Go,f);if(Se!==Go)return Se}$=_u(x),x=x[Os]}b=$}return m}(r,o,d,f,Go);if(x!==Go)return x}const b=Ur(r,o,d,f,Go);if(b!==Go)return b}return ur(o,d,f,m)}function Ur(r,o,d,f,m){const b=function al(r){if("string"==typeof r)return r.charCodeAt(0)||0;const o=r.hasOwnProperty(Ht)?r[Ht]:void 0;return"number"==typeof o?o>=0?o&Oa:Vl:o}(d);if("function"==typeof b){if(!qr(o,r,f))return f&Tn.Host?zi(m,0,f):ur(o,d,f,m);try{const x=b(f);if(null!=x||f&Tn.Optional)return x;Mt()}finally{xl()}}else if("number"==typeof b){let x=null,L=ku(r,o),$=Ee,ue=f&Tn.Host?o[Bs][Ni]:null;for((-1===L||f&Tn.SkipSelf)&&($=-1===L?Mr(r,o):o[L+8],$!==Ee&&$o(f,!1)?(x=o[Pn],L=Bt($),o=Oi($,o)):L=-1);-1!==L;){const Se=o[Pn];if(Nu(b,L,Se.data)){const ze=qa(L,o,d,x,f,ue);if(ze!==Go)return ze}$=o[L+8],$!==Ee&&$o(f,o[Pn].data[L+8]===ue)&&Nu(b,L,o)?(x=Se,L=Bt($),o=Oi($,o)):L=-1}}return m}function qa(r,o,d,f,m,b){const x=o[Pn],L=x.data[r+8],Se=_s(L,x,d,null==f?Pr(L)&&Ma:f!=x&&0!=(3&L.type),m&Tn.Host&&b===L);return null!==Se?Mn(o,x,Se,L):Go}function _s(r,o,d,f,m){const b=r.providerIndexes,x=o.data,L=1048575&b,$=r.directiveStart,Se=b>>20,bt=m?L+Se:r.directiveEnd;for(let Ut=f?L:L+Se;Ut<bt;Ut++){const hn=x[Ut];if(Ut<$&&d===hn||Ut>=$&&hn.type===d)return Ut}if(m){const Ut=x[$];if(Ut&&ks(Ut)&&Ut.type===d)return $}return null}function Mn(r,o,d,f){let m=r[d];const b=o.data;if(function Ft(r){return r instanceof Qe}(m)){const x=m;x.resolving&&function Fe(r,o){const d=o?`. Dependency path: ${o.join(" > ")} > ${r}`:"";throw new at(-200,`Circular dependency in DI detected for ${r}${d}`)}(function dt(r){return"function"==typeof r?r.name||r.toString():"object"==typeof r&&null!=r&&"function"==typeof r.type?r.type.name||r.type.toString():We(r)}(b[d]));const L=Dl(x.canSeeViewProviders);x.resolving=!0;const $=x.injectImpl?pr(x.injectImpl):null;qr(r,f,Tn.Default);try{m=r[d]=x.factory(void 0,b,r,f),o.firstCreatePass&&d>=f.directiveStart&&function Mc(r,o,d){const{ngOnChanges:f,ngOnInit:m,ngDoCheck:b}=o.type.prototype;if(f){const x=da(o);(d.preOrderHooks||(d.preOrderHooks=[])).push(r,x),(d.preOrderCheckHooks||(d.preOrderCheckHooks=[])).push(r,x)}m&&(d.preOrderHooks||(d.preOrderHooks=[])).push(0-r,m),b&&((d.preOrderHooks||(d.preOrderHooks=[])).push(r,b),(d.preOrderCheckHooks||(d.preOrderCheckHooks=[])).push(r,b))}(d,b[d],o)}finally{null!==$&&pr($),Dl(L),x.resolving=!1,xl()}}return m}function Nu(r,o,d){return!!(d[o+(r>>Bl)]&1<<r)}function $o(r,o){return!(r&Tn.Self||r&Tn.Host&&o)}class Is{constructor(o,d){this._tNode=o,this._lView=d}get(o,d,f){return Wu(this._tNode,this._lView,o,tr(f),d)}}function Vl(){return new Is(xn(),xe())}function qu(r){return ht(()=>{const o=r.prototype.constructor,d=o[Ye]||ul(o),f=Object.prototype;let m=Object.getPrototypeOf(r.prototype).constructor;for(;m&&m!==f;){const b=m[Ye]||ul(m);if(b&&b!==d)return b;m=Object.getPrototypeOf(m)}return b=>new b})}function ul(r){return yt(r)?()=>{const o=ul(Re(r));return o&&o()}:uo(r)}function _u(r){const o=r[Pn],d=o.type;return 2===d?o.declTNode:1===d?r[Ni]:null}function xs(r){return function Oo(r,o){if("class"===o)return r.classes;if("style"===o)return r.styles;const d=r.attrs;if(d){const f=d.length;let m=0;for(;m<f;){const b=d[m];if(Mi(b))break;if(0===b)m+=2;else if("number"==typeof b)for(m++;m<f&&"string"==typeof d[m];)m++;else{if(b===o)return d[m+1];m+=2}}}return null}(xn(),r)}const bo="__parameters__";function Lt(r,o,d){return ht(()=>{const f=function Ku(r){return function(...d){if(r){const f=r(...d);for(const m in f)this[m]=f[m]}}}(o);function m(...b){if(this instanceof m)return f.apply(this,b),this;const x=new m(...b);return L.annotation=x,L;function L($,ue,Se){const ze=$.hasOwnProperty(bo)?$[bo]:Object.defineProperty($,bo,{value:[]})[bo];for(;ze.length<=Se;)ze.push(null);return(ze[Se]=ze[Se]||[]).push(x),$}}return d&&(m.prototype=Object.create(d.prototype)),m.prototype.ngMetadataName=r,m.annotationCls=m,m})}class fi{constructor(o,d){this._desc=o,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof d?this.__NG_ELEMENT_ID__=d:void 0!==d&&(this.\u0275prov=zt({token:this,providedIn:d.providedIn||"root",factory:d.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function co(r,o){r.forEach(d=>Array.isArray(d)?co(d,o):o(d))}function Yu(r,o,d){o>=r.length?r.push(d):r.splice(o,0,d)}function du(r,o){return o>=r.length-1?r.pop():r.splice(o,1)[0]}function Qa(r,o){const d=[];for(let f=0;f<r;f++)d.push(o);return d}function Q(r,o,d){let f=ve(r,o);return f>=0?r[1|f]=d:(f=~f,function C(r,o,d,f){let m=r.length;if(m==o)r.push(d,f);else if(1===m)r.push(f,r[0]),r[0]=d;else{for(m--,r.push(r[m-1],r[m]);m>o;)r[m]=r[m-2],m--;r[o]=d,r[o+1]=f}}(r,f,o,d)),f}function pe(r,o){const d=ve(r,o);if(d>=0)return r[1|d]}function ve(r,o){return function Wt(r,o,d){let f=0,m=r.length>>d;for(;m!==f;){const b=f+(m-f>>1),x=r[b<<d];if(o===x)return b<<d;x>o?m=b:f=b+1}return~(m<<d)}(r,o,1)}const Xa=vr(Lt("Optional"),8),X=vr(Lt("SkipSelf"),4);var Zr=(()=>((Zr=Zr||{})[Zr.Important=1]="Important",Zr[Zr.DashCase=2]="DashCase",Zr))();const Nc=new Map;let Lc=0;const lf="__ngContext__";function Ta(r,o){Xi(o)?(r[lf]=o[jo],function af(r){Nc.set(r[jo],r)}(o)):r[lf]=o}let vd;function uh(r,o){return vd(r,o)}function hc(r){const o=r[Ei];return ss(o)?o[Ei]:o}function yd(r){return gf(r[Fo])}function up(r){return gf(r[hs])}function gf(r){for(;null!==r&&!ss(r);)r=r[hs];return r}function Xu(r,o,d,f,m){if(null!=f){let b,x=!1;ss(f)?b=f:Xi(f)&&(x=!0,f=f[Ss]);const L=Fi(f);0===r&&null!==d?null==m?fu(o,d,L):hu(o,d,L,m||null,!0):1===r&&null!==d?hu(o,d,L,m||null,!0):2===r?function Fu(r,o,d){const f=Rl(r,o);f&&function _f(r,o,d,f){r.removeChild(o,d,f)}(r,f,o,d)}(o,L,x):3===r&&o.destroyNode(L),null!=b&&function bg(r,o,d,f,m){const b=d[Sn];b!==Fi(d)&&Xu(o,r,f,b,m);for(let L=$r;L<d.length;L++){const $=d[L];wu($[Pn],$,r,o,f,b)}}(o,r,b,d,m)}}function dl(r,o,d){return r.createElement(o,d)}function As(r,o){const d=r[Tr],f=d.indexOf(o),m=o[Ei];512&o[Sr]&&(o[Sr]&=-513,ji(m,-1)),d.splice(f,1)}function Hl(r,o){if(r.length<=$r)return;const d=$r+o,f=r[d];if(f){const m=f[Ko];null!==m&&m!==r&&As(m,f),o>0&&(r[d-1][hs]=f[hs]);const b=du(r,$r+o);!function hl(r,o){wu(r,o,o[ar],2,null,null),o[Ss]=null,o[Ni]=null}(f[Pn],f);const x=b[Zs];null!==x&&x.detachView(b[Pn]),f[Ei]=null,f[hs]=null,f[Sr]&=-65}return f}function Vc(r,o){if(!(128&o[Sr])){const d=o[ar];d.destroyNode&&wu(r,o,d,3,null,null),function Bc(r){let o=r[Fo];if(!o)return Td(r[Pn],r);for(;o;){let d=null;if(Xi(o))d=o[Fo];else{const f=o[$r];f&&(d=f)}if(!d){for(;o&&!o[hs]&&o!==r;)Xi(o)&&Td(o[Pn],o),o=o[Ei];null===o&&(o=r),Xi(o)&&Td(o[Pn],o),d=o&&o[hs]}o=d}}(o)}}function Td(r,o){if(!(128&o[Sr])){o[Sr]&=-65,o[Sr]|=128,function lh(r,o){let d;if(null!=r&&null!=(d=r.destroyHooks))for(let f=0;f<d.length;f+=2){const m=o[d[f]];if(!(m instanceof Qe)){const b=d[f+1];if(Array.isArray(b))for(let x=0;x<b.length;x+=2){const L=m[b[x]],$=b[x+1];ws(4,L,$);try{$.call(L)}finally{ws(5,L,$)}}else{ws(4,m,b);try{b.call(m)}finally{ws(5,m,b)}}}}}(r,o),function yg(r,o){const d=r.cleanup,f=o[fs];let m=-1;if(null!==d)for(let b=0;b<d.length-1;b+=2)if("string"==typeof d[b]){const x=d[b+3];x>=0?f[m=x]():f[m=-x].unsubscribe(),b+=2}else{const x=f[m=d[b+1]];d[b].call(x)}if(null!==f){for(let b=m+1;b<f.length;b++)(0,f[b])();o[fs]=null}}(r,o),1===o[Pn].type&&o[ar].destroy();const d=o[Ko];if(null!==d&&ss(o[Ei])){d!==o[Ei]&&As(d,o);const f=o[Zs];null!==f&&f.detachView(r)}!function mg(r){Nc.delete(r[jo])}(o)}}function vf(r,o,d){return function yf(r,o,d){let f=o;for(;null!==f&&40&f.type;)f=(o=f).parent;if(null===f)return d[Ss];{const{componentOffset:m}=f;if(m>-1){const{encapsulation:b}=r.data[f.directiveStart+m];if(b===Xn.None||b===Xn.Emulated)return null}return Ji(f,d)}}(r,o.parent,d)}function hu(r,o,d,f,m){r.insertBefore(o,d,f,m)}function fu(r,o,d){r.appendChild(o,d)}function ch(r,o,d,f,m){null!==f?hu(r,o,d,f,m):fu(r,o,d)}function Rl(r,o){return r.parentNode(o)}function Tg(r,o,d){return ki(r,o,d)}let Gl,Nl,bd,hh,ki=function ko(r,o,d){return 40&r.type?Ji(r,d):null};function fl(r,o,d,f){const m=vf(r,f,o),b=o[ar],L=Tg(f.parent||o[Ni],f,o);if(null!=m)if(Array.isArray(d))for(let $=0;$<d.length;$++)ch(b,m,d[$],L,!1);else ch(b,m,d,L,!1);void 0!==Gl&&Gl(b,f,o,d,m)}function Hc(r,o){if(null!==o){const d=o.type;if(3&d)return Ji(o,r);if(4&d)return La(-1,r[o.index]);if(8&d){const f=o.child;if(null!==f)return Hc(r,f);{const m=r[o.index];return ss(m)?La(-1,m):Fi(m)}}if(32&d)return uh(o,r)()||Fi(r[o.index]);{const f=eu(r,o);return null!==f?Array.isArray(f)?f[0]:Hc(hc(r[Bs]),f):Hc(r,o.next)}}return null}function eu(r,o){return null!==o?r[Bs][Ni].projection[o.projection]:null}function La(r,o){const d=$r+r+1;if(d<o.length){const f=o[d],m=f[Pn].firstChild;if(null!==m)return Hc(f,m)}return o[Sn]}function Gc(r,o,d,f,m,b,x){for(;null!=d;){const L=f[d.index],$=d.type;if(x&&0===o&&(L&&Ta(Fi(L),f),d.flags|=2),32!=(32&d.flags))if(8&$)Gc(r,o,d.child,f,m,b,!1),Xu(o,r,m,L,b);else if(32&$){const ue=uh(d,f);let Se;for(;Se=ue();)Xu(o,r,m,Se,b);Xu(o,r,m,L,b)}else 16&$?Ju(r,o,f,d,m,b):Xu(o,r,m,L,b);d=x?d.projectionNext:d.next}}function wu(r,o,d,f,m,b){Gc(d,f,r.firstChild,o,m,b,!1)}function Ju(r,o,d,f,m,b){const x=d[Bs],$=x[Ni].projection[f.projection];if(Array.isArray($))for(let ue=0;ue<$.length;ue++)Xu(o,r,m,$[ue],b);else Gc(r,o,$,x[Ei],m,b,!0)}function pl(r,o,d){""===d?r.removeAttribute(o,"class"):r.setAttribute(o,"class",d)}function gc(r,o,d){const{mergedAttrs:f,classes:m,styles:b}=d;null!==f&&gr(r,o,f),null!==m&&pl(r,o,m),null!==b&&function pi(r,o,d){r.setAttribute(o,"style",d)}(r,o,b)}function gl(r){return function $l(){if(void 0===Nl&&(Nl=null,er.trustedTypes))try{Nl=er.trustedTypes.createPolicy("angular",{createHTML:r=>r,createScript:r=>r,createScriptURL:r=>r})}catch{}return Nl}()?.createHTML(r)||r}function ml(r){bd=r}function Sf(r){return function Wc(){if(void 0===hh&&(hh=null,er.trustedTypes))try{hh=er.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:r=>r,createScript:r=>r,createScriptURL:r=>r})}catch{}return hh}()?.createScriptURL(r)||r}class mc{constructor(o){this.changingThisBreaksApplicationSecurity=o}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${et})`}}class Ro extends mc{getTypeName(){return"HTML"}}class wf extends mc{getTypeName(){return"Style"}}class I extends mc{getTypeName(){return"Script"}}class y extends mc{getTypeName(){return"URL"}}class T extends mc{getTypeName(){return"ResourceURL"}}function k(r){return r instanceof mc?r.changingThisBreaksApplicationSecurity:r}function se(r,o){const d=function Ce(r){return r instanceof mc&&r.getTypeName()||null}(r);if(null!=d&&d!==o){if("ResourceURL"===d&&"URL"===o)return!0;throw new Error(`Required a safe ${o}, got a ${d} (see ${et})`)}return d===o}function Tt(r){return new Ro(r)}function Zt(r){return new wf(r)}function Ln(r){return new I(r)}function lr(r){return new y(r)}function Br(r){return new T(r)}class Wo{constructor(o){this.inertDocumentHelper=o}getInertBodyElement(o){o="<body><remove></remove>"+o;try{const d=(new window.DOMParser).parseFromString(gl(o),"text/html").body;return null===d?this.inertDocumentHelper.getInertBodyElement(o):(d.removeChild(d.firstChild),d)}catch{return null}}}class yl{constructor(o){this.defaultDoc=o,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert")}getInertBodyElement(o){const d=this.inertDocument.createElement("template");return d.innerHTML=gl(o),d}}const Ed=/^(?:(?:https?|mailto|data|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi;function qc(r){return(r=String(r)).match(Ed)?r:"unsafe:"+r}function _l(r){const o={};for(const d of r.split(","))o[d]=!0;return o}function Kc(...r){const o={};for(const d of r)for(const f in d)d.hasOwnProperty(f)&&(o[f]=!0);return o}const ph=_l("area,br,col,hr,img,wbr"),fp=_l("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),pp=_l("rp,rt"),yc=Kc(ph,Kc(fp,_l("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),Kc(pp,_l("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),Kc(pp,fp)),gh=_l("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),Cf=Kc(gh,_l("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),_l("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),_c=_l("script,style,template");class oa{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(o){let d=o.firstChild,f=!0;for(;d;)if(d.nodeType===Node.ELEMENT_NODE?f=this.startElement(d):d.nodeType===Node.TEXT_NODE?this.chars(d.nodeValue):this.sanitizedSomething=!0,f&&d.firstChild)d=d.firstChild;else for(;d;){d.nodeType===Node.ELEMENT_NODE&&this.endElement(d);let m=this.checkClobberedElement(d,d.nextSibling);if(m){d=m;break}d=this.checkClobberedElement(d,d.parentNode)}return this.buf.join("")}startElement(o){const d=o.nodeName.toLowerCase();if(!yc.hasOwnProperty(d))return this.sanitizedSomething=!0,!_c.hasOwnProperty(d);this.buf.push("<"),this.buf.push(d);const f=o.attributes;for(let m=0;m<f.length;m++){const b=f.item(m),x=b.name,L=x.toLowerCase();if(!Cf.hasOwnProperty(L)){this.sanitizedSomething=!0;continue}let $=b.value;gh[L]&&($=qc($)),this.buf.push(" ",x,'="',mh($),'"')}return this.buf.push(">"),!0}endElement(o){const d=o.nodeName.toLowerCase();yc.hasOwnProperty(d)&&!ph.hasOwnProperty(d)&&(this.buf.push("</"),this.buf.push(d),this.buf.push(">"))}chars(o){this.buf.push(mh(o))}checkClobberedElement(o,d){if(d&&(o.compareDocumentPosition(d)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${o.outerHTML}`);return d}}const Sd=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,gp=/([^\#-~ |!])/g;function mh(r){return r.replace(/&/g,"&amp;").replace(Sd,function(o){return"&#"+(1024*(o.charCodeAt(0)-55296)+(o.charCodeAt(1)-56320)+65536)+";"}).replace(gp,function(o){return"&#"+o.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let Zc;function mp(r,o){let d=null;try{Zc=Zc||function Er(r){const o=new yl(r);return function fh(){try{return!!(new window.DOMParser).parseFromString(gl(""),"text/html")}catch{return!1}}()?new Wo(o):o}(r);let f=o?String(o):"";d=Zc.getInertBodyElement(f);let m=5,b=f;do{if(0===m)throw new Error("Failed to sanitize html because the input is unstable");m--,f=b,b=d.innerHTML,d=Zc.getInertBodyElement(f)}while(f!==b);return gl((new oa).sanitizeChildren(If(d)||d))}finally{if(d){const f=If(d)||d;for(;f.firstChild;)f.removeChild(f.firstChild)}}}function If(r){return"content"in r&&function Xv(r){return r.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===r.nodeName}(r)?r.content:null}var No=(()=>((No=No||{})[No.NONE=0]="NONE",No[No.HTML=1]="HTML",No[No.STYLE=2]="STYLE",No[No.SCRIPT=3]="SCRIPT",No[No.URL=4]="URL",No[No.RESOURCE_URL=5]="RESOURCE_URL",No))();function Ll(r){const o=Iu();return o?o.sanitize(No.URL,r)||"":se(r,"URL")?k(r):qc(We(r))}function Lm(r){const o=Iu();if(o)return Sf(o.sanitize(No.RESOURCE_URL,r)||"");if(se(r,"ResourceURL"))return Sf(k(r));throw new at(904,!1)}function Sg(r,o,d){return function Eg(r,o){return"src"===o&&("embed"===r||"frame"===r||"iframe"===r||"media"===r||"script"===r)||"href"===o&&("base"===r||"link"===r)?Lm:Ll}(o,d)(r)}function Iu(){const r=xe();return r&&r[Ks]}const ql=new fi("ENVIRONMENT_INITIALIZER"),Kl=new fi("INJECTOR",-1),vp=new fi("INJECTOR_DEF_TYPES");class Lo{get(o,d=Lr){if(d===Lr){const f=new Error(`NullInjectorError: No provider for ${He(o)}!`);throw f.name="NullInjectorError",f}return d}}function jm(...r){return{\u0275providers:wg(0,r),\u0275fromNgModule:!0}}function wg(r,...o){const d=[],f=new Set;let m;return co(o,b=>{const x=b;Cg(x,d,[],f)&&(m||(m=[]),m.push(x))}),void 0!==m&&Tc(m,d),d}function Tc(r,o){for(let d=0;d<r.length;d++){const{providers:m}=r[d];Ig(m,b=>{o.push(b)})}}function Cg(r,o,d,f){if(!(r=Re(r)))return!1;let m=null,b=kr(r);const x=!b&&rr(r);if(b||x){if(x&&!x.standalone)return!1;m=r}else{const $=r.ngModule;if(b=kr($),!b)return!1;m=$}const L=f.has(m);if(x){if(L)return!1;if(f.add(m),x.dependencies){const $="function"==typeof x.dependencies?x.dependencies():x.dependencies;for(const ue of $)Cg(ue,o,d,f)}}else{if(!b)return!1;{if(null!=b.imports&&!L){let ue;f.add(m);try{co(b.imports,Se=>{Cg(Se,o,d,f)&&(ue||(ue=[]),ue.push(Se))})}finally{}void 0!==ue&&Tc(ue,o)}if(!L){const ue=uo(m)||(()=>new m);o.push({provide:m,useFactory:ue,deps:de},{provide:vp,useValue:m,multi:!0},{provide:ql,useValue:()=>mn(m),multi:!0})}const $=b.providers;null==$||L||Ig($,Se=>{o.push(Se)})}}return m!==r&&void 0!==r.providers}function Ig(r,o){for(let d of r)ae(d)&&(d=d.\u0275providers),Array.isArray(d)?Ig(d,o):o(d)}const _p=ke({provide:String,useValue:ke});function Zl(r){return null!==r&&"object"==typeof r&&_p in r}function Tl(r){return"function"==typeof r}const Df=new fi("Set Injector scope."),vh={},ty={};let xg;function Tp(){return void 0===xg&&(xg=new Lo),xg}class Qc{}class yh extends Qc{get destroyed(){return this._destroyed}constructor(o,d,f,m){super(),this.parent=d,this.source=f,this.scopes=m,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,wd(o,x=>this.processProvider(x)),this.records.set(Kl,Xc(void 0,this)),m.has("environment")&&this.records.set(Qc,Xc(void 0,this));const b=this.records.get(Df);null!=b&&"string"==typeof b.value&&this.scopes.add(b.value),this.injectorDefTypes=new Set(this.get(vp.multi,de,Tn.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const o of this._ngOnDestroyHooks)o.ngOnDestroy();for(const o of this._onDestroyHooks)o()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(o){this._onDestroyHooks.push(o)}runInContext(o){this.assertNotDestroyed();const d=di(this),f=pr(void 0);try{return o()}finally{di(d),pr(f)}}get(o,d=Lr,f=Tn.Default){this.assertNotDestroyed(),f=tr(f);const m=di(this),b=pr(void 0);try{if(!(f&Tn.SkipSelf)){let L=this.records.get(o);if(void 0===L){const $=function C_(r){return"function"==typeof r||"object"==typeof r&&r instanceof fi}(o)&&Hn(o);L=$&&this.injectableDefInScope($)?Xc(_h(o),vh):null,this.records.set(o,L)}if(null!=L)return this.hydrate(o,L)}return(f&Tn.Self?Tp():this.parent).get(o,d=f&Tn.Optional&&d===Lr?null:d)}catch(x){if("NullInjectorError"===x.name){if((x[ti]=x[ti]||[]).unshift(He(o)),m)throw x;return function tt(r,o,d,f){const m=r[ti];throw o[Rr]&&m.unshift(o[Rr]),r.message=function Ze(r,o,d,f=null){r=r&&"\n"===r.charAt(0)&&r.charAt(1)==Fr?r.slice(2):r;let m=He(o);if(Array.isArray(o))m=o.map(He).join(" -> ");else if("object"==typeof o){let b=[];for(let x in o)if(o.hasOwnProperty(x)){let L=o[x];b.push(x+":"+("string"==typeof L?JSON.stringify(L):He(L)))}m=`{${b.join(", ")}}`}return`${d}${f?"("+f+")":""}[${m}]: ${r.replace(Ki,"\n  ")}`}("\n"+r.message,m,d,f),r[Vi]=m,r[ti]=null,r}(x,o,"R3InjectorError",this.source)}throw x}finally{pr(b),di(m)}}resolveInjectorInitializers(){const o=di(this),d=pr(void 0);try{const f=this.get(ql.multi,de,Tn.Self);for(const m of f)m()}finally{di(o),pr(d)}}toString(){const o=[],d=this.records;for(const f of d.keys())o.push(He(f));return`R3Injector[${o.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new at(205,!1)}processProvider(o){let d=Tl(o=Re(o))?o:Re(o&&o.provide);const f=function Th(r){return Zl(r)?Xc(void 0,r.useValue):Xc(Bm(r),vh)}(o);if(Tl(o)||!0!==o.multi)this.records.get(d);else{let m=this.records.get(d);m||(m=Xc(void 0,vh,!0),m.factory=()=>nr(m.multi),this.records.set(d,m)),d=o,m.multi.push(o)}this.records.set(d,f)}hydrate(o,d){return d.value===vh&&(d.value=ty,d.value=d.factory()),"object"==typeof d.value&&d.value&&function w_(r){return null!==r&&"object"==typeof r&&"function"==typeof r.ngOnDestroy}(d.value)&&this._ngOnDestroyHooks.add(d.value),d.value}injectableDefInScope(o){if(!o.providedIn)return!1;const d=Re(o.providedIn);return"string"==typeof d?"any"===d||this.scopes.has(d):this.injectorDefTypes.has(d)}}function _h(r){const o=Hn(r),d=null!==o?o.factory:uo(r);if(null!==d)return d;if(r instanceof fi)throw new at(204,!1);if(r instanceof Function)return function bp(r){const o=r.length;if(o>0)throw Qa(o,"?"),new at(204,!1);const d=function mr(r){const o=r&&(r[ii]||r[Bn]);return o?(function qn(r){if(r.hasOwnProperty("name"))return r.name;(""+r).match(/^function\s*([^\s(]+)/)}(r),o):null}(r);return null!==d?()=>d.factory(r):()=>new r}(r);throw new at(204,!1)}function Bm(r,o,d){let f;if(Tl(r)){const m=Re(r);return uo(m)||_h(m)}if(Zl(r))f=()=>Re(r.useValue);else if(function bc(r){return!(!r||!r.useFactory)}(r))f=()=>r.useFactory(...nr(r.deps||[]));else if(function Yc(r){return!(!r||!r.useExisting)}(r))f=()=>mn(Re(r.useExisting));else{const m=Re(r&&(r.useClass||r.provide));if(!function Dg(r){return!!r.deps}(r))return uo(m)||_h(m);f=()=>new m(...nr(r.deps))}return f}function Xc(r,o,d=!1){return{factory:r,value:o,multi:d?[]:void 0}}function wd(r,o){for(const d of r)Array.isArray(d)?wd(d,o):d&&ae(d)?wd(d.\u0275providers,o):o(d)}class bh{}class Yl{}class el{resolveComponentFactory(o){throw function Ag(r){const o=Error(`No component factory found for ${He(r)}. Did you add it to @NgModule.entryComponents?`);return o.ngComponent=r,o}(o)}}let Cd=(()=>{class r{}return r.NULL=new el,r})();function Sp(){return Eh(xn(),xe())}function Eh(r,o){return new Sh(Ji(r,o))}let Sh=(()=>{class r{constructor(d){this.nativeElement=d}}return r.__NG_ELEMENT_ID__=Sp,r})();function Id(r){return r instanceof Sh?r.nativeElement:r}class Pg{}let Mg=(()=>{class r{}return r.__NG_ELEMENT_ID__=()=>function I_(){const r=xe(),d=Cs(xn().index,r);return(Xi(d)?d:r)[ar]}(),r})(),Hm=(()=>{class r{}return r.\u0275prov=zt({token:r,providedIn:"root",factory:()=>null}),r})();class Af{constructor(o){this.full=o,this.major=o.split(".")[0],this.minor=o.split(".")[1],this.patch=o.split(".").slice(2).join(".")}}const wp=new Af("15.2.1"),Og={},wh="ngOriginalError";function Ch(r){return r[wh]}class Ih{constructor(){this._console=console}handleError(o){const d=this._findOriginalError(o);this._console.error("ERROR",o),d&&this._console.error("ORIGINAL ERROR",d)}_findOriginalError(o){let d=o&&Ch(o);for(;d&&Ch(d);)d=Ch(d);return d||null}}function Ql(r){return r instanceof Function?r():r}function Ip(r,o,d){let f=r.length;for(;;){const m=r.indexOf(o,d);if(-1===m)return m;if(0===m||r.charCodeAt(m-1)<=32){const b=o.length;if(m+b===f||r.charCodeAt(m+b)<=32)return m}d=m+1}}const zm="ng-template";function iy(r,o,d){let f=0;for(;f<r.length;){let m=r[f++];if(d&&"class"===m){if(m=r[f],-1!==Ip(m.toLowerCase(),o,0))return!0}else if(1===m){for(;f<r.length&&"string"==typeof(m=r[f++]);)if(m.toLowerCase()===o)return!0;return!1}}return!1}function sy(r){return 4===r.type&&r.value!==zm}function Ng(r,o,d){return o===(4!==r.type||d?r.value:zm)}function oy(r,o,d){let f=4;const m=r.attrs||[],b=function Dh(r){for(let o=0;o<r.length;o++)if(Mi(r[o]))return o;return r.length}(m);let x=!1;for(let L=0;L<o.length;L++){const $=o[L];if("number"!=typeof $){if(!x)if(4&f){if(f=2|1&f,""!==$&&!Ng(r,$,d)||""===$&&1===o.length){if(Fl(f))return!1;x=!0}}else{const ue=8&f?$:o[++L];if(8&f&&null!==r.attrs){if(!iy(r.attrs,ue,d)){if(Fl(f))return!1;x=!0}continue}const ze=ay(8&f?"class":$,m,sy(r),d);if(-1===ze){if(Fl(f))return!1;x=!0;continue}if(""!==ue){let bt;bt=ze>b?"":m[ze+1].toLowerCase();const Ut=8&f?bt:null;if(Ut&&-1!==Ip(Ut,ue,0)||2&f&&ue!==bt){if(Fl(f))return!1;x=!0}}}}else{if(!x&&!Fl(f)&&!Fl($))return!1;if(x&&Fl($))continue;x=!1,f=$|1&f}}return Fl(f)||x}function Fl(r){return 0==(1&r)}function ay(r,o,d,f){if(null===o)return-1;let m=0;if(f||!d){let b=!1;for(;m<o.length;){const x=o[m];if(x===r)return m;if(3===x||6===x)b=!0;else{if(1===x||2===x){let L=o[++m];for(;"string"==typeof L;)L=o[++m];continue}if(4===x)break;if(0===x){m+=4;continue}}m+=b?1:2}return-1}return function xp(r,o){let d=r.indexOf(4);if(d>-1)for(d++;d<r.length;){const f=r[d];if("number"==typeof f)return-1;if(f===o)return d;d++}return-1}(o,r)}function uy(r,o,d=!1){for(let f=0;f<o.length;f++)if(oy(r,o[f],d))return!0;return!1}function cy(r,o){e:for(let d=0;d<o.length;d++){const f=o[d];if(r.length===f.length){for(let m=0;m<r.length;m++)if(r[m]!==f[m])continue e;return!0}}return!1}function Wm(r,o){return r?":not("+o.trim()+")":o}function D_(r){let o=r[0],d=1,f=2,m="",b=!1;for(;d<r.length;){let x=r[d];if("string"==typeof x)if(2&f){const L=r[++d];m+="["+x+(L.length>0?'="'+L+'"':"")+"]"}else 8&f?m+="."+x:4&f&&(m+=" "+x);else""!==m&&!Fl(x)&&(o+=Wm(b,m),m=""),f=x,b=b||!Fl(f);d++}return""!==m&&(o+=Wm(b,m)),o}const yi={};function Dp(r){Ea(wt(),xe(),so()+r,!1)}function Ea(r,o,d,f){if(!f)if(3==(3&o[Sr])){const b=r.preOrderCheckHooks;null!==b&&sa(o,b,d)}else{const b=r.preOrderHooks;null!==b&&va(o,b,0,d)}gs(d)}function jg(r,o=null,d=null,f){const m=Ap(r,o,d,f);return m.resolveInjectorInitializers(),m}function Ap(r,o=null,d=null,f,m=new Set){const b=[d||de,jm(r)];return f=f||("object"==typeof r?void 0:He(r)),new yh(b,o||Tp(),f||null,m)}let Xl=(()=>{class r{static create(d,f){if(Array.isArray(d))return jg({name:""},f,d,"");{const m=d.name??"";return jg({name:m},d.parent,d.providers,m)}}}return r.THROW_IF_NOT_FOUND=Lr,r.NULL=new Lo,r.\u0275prov=zt({token:r,providedIn:"any",factory:()=>mn(Kl)}),r.__NG_ELEMENT_ID__=-1,r})();function Pd(r,o=Tn.Default){const d=xe();return null===d?mn(r,o):Wu(xn(),d,Re(r),o)}function Gg(){throw new Error("invalid")}function _y(r,o){const d=r.contentQueries;if(null!==d)for(let f=0;f<d.length;f+=2){const b=d[f+1];if(-1!==b){const x=r.data[b];yu(d[f]),x.contentQueries(2,o[b],b)}}}function Rp(r,o,d,f,m,b,x,L,$,ue,Se){const ze=o.blueprint.slice();return ze[Ss]=m,ze[Sr]=76|f,(null!==Se||r&&1024&r[Sr])&&(ze[Sr]|=1024),na(ze),ze[Ei]=ze[Os]=r,ze[Gr]=d,ze[Xs]=x||r&&r[Xs],ze[ar]=L||r&&r[ar],ze[Ks]=$||r&&r[Ks]||null,ze[qs]=ue||r&&r[qs]||null,ze[Ni]=b,ze[jo]=function Fc(){return Lc++}(),ze[Li]=Se,ze[Bs]=2==o.type?r[Bs]:ze,ze}function kf(r,o,d,f,m){let b=r.data[o];if(null===b)b=function Mh(r,o,d,f,m){const b=yr(),x=Ai(),$=r.data[o]=function tv(r,o,d,f,m,b){return{type:d,index:f,insertBeforeIndex:null,injectorIndex:o?o.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:0,providerIndexes:0,value:m,attrs:b,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,prev:null,projectionNext:null,child:null,parent:o,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,x?b:b&&b.parent,d,o,f,m);return null===r.firstChild&&(r.firstChild=$),null!==b&&(x?null==b.child&&null!==$.parent&&(b.child=$):null===b.next&&(b.next=$,$.prev=b)),$}(r,o,d,f,m),function Ho(){return Dr.lFrame.inI18n}()&&(b.flags|=32);else if(64&b.type){b.type=d,b.value=f,b.attrs=m;const x=function zr(){const r=Dr.lFrame,o=r.currentTNode;return r.isParent?o:o.parent}();b.injectorIndex=null===x?-1:x.injectorIndex}return Ti(b,!0),b}function td(r,o,d,f){if(0===d)return-1;const m=o.length;for(let b=0;b<d;b++)o.push(f),r.blueprint.push(f),r.data.push(null);return m}function ec(r,o,d){Ga(o);try{const f=r.viewQuery;null!==f&&Sa(1,f,d);const m=r.template;null!==m&&$g(r,o,m,1,d),r.firstCreatePass&&(r.firstCreatePass=!1),r.staticContentQueries&&_y(r,o),r.staticViewQueries&&Sa(2,r.viewQuery,d);const b=r.components;null!==b&&function L_(r,o){for(let d=0;d<o.length;d++)av(r,o[d])}(o,b)}catch(f){throw r.firstCreatePass&&(r.incompleteFirstPass=!0,r.firstCreatePass=!1),f}finally{o[Sr]&=-5,Ls()}}function nd(r,o,d,f){const m=o[Sr];if(128!=(128&m)){Ga(o);try{na(o),function as(r){return Dr.lFrame.bindingIndex=r}(r.bindingStartIndex),null!==d&&$g(r,o,d,2,f);const x=3==(3&m);if(x){const ue=r.preOrderCheckHooks;null!==ue&&sa(o,ue,null)}else{const ue=r.preOrderHooks;null!==ue&&va(o,ue,0,null),V(o,0)}if(function nc(r){for(let o=yd(r);null!==o;o=up(o)){if(!o[sn])continue;const d=o[Tr];for(let f=0;f<d.length;f++){const m=d[f];512&m[Sr]||ji(m[Ei],1),m[Sr]|=512}}}(o),function ov(r){for(let o=yd(r);null!==o;o=up(o))for(let d=$r;d<o.length;d++){const f=o[d],m=f[Pn];_o(f)&&nd(m,f,m.template,f[Gr])}}(o),null!==r.contentQueries&&_y(r,o),x){const ue=r.contentCheckHooks;null!==ue&&sa(o,ue)}else{const ue=r.contentHooks;null!==ue&&va(o,ue,1),V(o,1)}!function yy(r,o){const d=r.hostBindingOpCodes;if(null!==d)try{for(let f=0;f<d.length;f++){const m=d[f];if(m<0)gs(~m);else{const b=m,x=d[++f],L=d[++f];pa(x,b),L(2,o[b])}}}finally{gs(-1)}}(r,o);const L=r.components;null!==L&&function Ty(r,o){for(let d=0;d<o.length;d++)Ay(r,o[d])}(o,L);const $=r.viewQuery;if(null!==$&&Sa(2,$,f),x){const ue=r.viewCheckHooks;null!==ue&&sa(o,ue)}else{const ue=r.viewHooks;null!==ue&&va(o,ue,2),V(o,2)}!0===r.firstUpdatePass&&(r.firstUpdatePass=!1),o[Sr]&=-41,512&o[Sr]&&(o[Sr]&=-513,ji(o[Ei],-1))}finally{Ls()}}}function $g(r,o,d,f,m){const b=so(),x=2&f;try{gs(-1),x&&o.length>pt&&Ea(r,o,pt,!1),ws(x?2:0,m),d(f,m)}finally{gs(b),ws(x?3:1,m)}}function Rf(r,o,d){if(os(o)){const m=o.directiveEnd;for(let b=o.directiveStart;b<m;b++){const x=r.data[b];x.contentQueries&&x.contentQueries(1,d[b],b)}}}function Md(r,o,d){H()&&(function wy(r,o,d,f){const m=d.directiveStart,b=d.directiveEnd;Pr(d)&&function Iy(r,o,d){const f=Ji(o,r),m=by(d),b=r[Xs],x=Nh(r,Rp(r,m,null,d.onPush?32:16,f,o,b,b.createRenderer(f,d),null,null,null));r[o.index]=x}(o,d,r.data[m+d.componentOffset]),r.firstCreatePass||zu(d,o),Ta(f,o);const x=d.initialInputs;for(let L=m;L<b;L++){const $=r.data[L],ue=Mn(o,r,L,d);Ta(ue,o),null!==x&&xy(0,L-m,ue,$,0,x),ks($)&&(Cs(d.index,o)[Gr]=Mn(o,r,L,d))}}(r,o,d,Ji(d,o)),64==(64&d.flags)&&qg(r,o,d))}function Np(r,o,d=Ji){const f=o.localNames;if(null!==f){let m=o.index+1;for(let b=0;b<f.length;b+=2){const x=f[b+1],L=-1===x?d(o,r):r[x];r[m++]=L}}}function by(r){const o=r.tView;return null===o||o.incompleteFirstPass?r.tView=Nf(1,null,r.template,r.decls,r.vars,r.directiveDefs,r.pipeDefs,r.viewQuery,r.schemas,r.consts):o}function Nf(r,o,d,f,m,b,x,L,$,ue){const Se=pt+f,ze=Se+m,bt=function Ey(r,o){const d=[];for(let f=0;f<o;f++)d.push(f<r?null:yi);return d}(Se,ze),Ut="function"==typeof ue?ue():ue;return bt[Pn]={type:r,blueprint:bt,template:d,queries:null,viewQuery:L,declTNode:o,data:bt.slice().fill(null,Se),bindingStartIndex:Se,expandoStartIndex:ze,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof b?b():b,pipeRegistry:"function"==typeof x?x():x,firstChild:null,schemas:$,consts:Ut,incompleteFirstPass:!1}}function Lf(r,o,d,f){const m=Bp(o);null===d?m.push(f):(m.push(d),r.firstCreatePass&&Rd(r).push(f,m.length-1))}function Oh(r,o,d,f){for(let m in r)if(r.hasOwnProperty(m)){d=null===d?{}:d;const b=r[m];null===f?zg(d,o,m,b):f.hasOwnProperty(m)&&zg(d,o,f[m],b)}return d}function zg(r,o,d,f){r.hasOwnProperty(d)?r[d].push(o,f):r[d]=[o,f]}function nv(r,o){const d=Cs(o,r);16&d[Sr]||(d[Sr]|=32)}function tc(r,o,d,f){if(H()){const m=null===f?null:{"":-1},b=function sv(r,o){const d=r.directiveRegistry;let f=null,m=null;if(d)for(let b=0;b<d.length;b++){const x=d[b];if(uy(o,x.selectors,!1))if(f||(f=[]),ks(x))if(null!==x.findHostDirectiveDefs){const L=[];m=m||new Map,x.findHostDirectiveDefs(x,L,m),f.unshift(...L,x),Rh(r,o,L.length)}else f.unshift(x),Rh(r,o,0);else m=m||new Map,x.findHostDirectiveDefs?.(x,f,m),f.push(x)}return null===f?null:[f,m]}(r,d);let x,L;null===b?x=L=null:[x,L]=b,null!==x&&rv(r,o,d,x,m,L),m&&function Ff(r,o,d){if(o){const f=r.localNames=[];for(let m=0;m<o.length;m+=2){const b=d[o[m+1]];if(null==b)throw new at(-301,!1);f.push(o[m],b)}}}(d,f,m)}d.mergedAttrs=Vn(d.mergedAttrs,d.attrs)}function rv(r,o,d,f,m,b){for(let ue=0;ue<f.length;ue++)Ru(zu(d,o),r,f[ue].type);!function jf(r,o,d){r.flags|=1,r.directiveStart=o,r.directiveEnd=o+d,r.providerIndexes=o}(d,r.data.length,f.length);for(let ue=0;ue<f.length;ue++){const Se=f[ue];Se.providersResolver&&Se.providersResolver(Se)}let x=!1,L=!1,$=td(r,o,f.length,null);for(let ue=0;ue<f.length;ue++){const Se=f[ue];d.mergedAttrs=Vn(d.mergedAttrs,Se.hostAttrs),Od(r,d,o,$,Se),Cy($,Se,m),null!==Se.contentQueries&&(d.flags|=4),(null!==Se.hostBindings||null!==Se.hostAttrs||0!==Se.hostVars)&&(d.flags|=64);const ze=Se.type.prototype;!x&&(ze.ngOnChanges||ze.ngOnInit||ze.ngDoCheck)&&((r.preOrderHooks||(r.preOrderHooks=[])).push(d.index),x=!0),!L&&(ze.ngOnChanges||ze.ngDoCheck)&&((r.preOrderCheckHooks||(r.preOrderCheckHooks=[])).push(d.index),L=!0),$++}!function Wg(r,o,d){const m=o.directiveEnd,b=r.data,x=o.attrs,L=[];let $=null,ue=null;for(let Se=o.directiveStart;Se<m;Se++){const ze=b[Se],bt=d?d.get(ze):null,hn=bt?bt.outputs:null;$=Oh(ze.inputs,Se,$,bt?bt.inputs:null),ue=Oh(ze.outputs,Se,ue,hn);const Un=null===$||null===x||sy(o)?null:Dy($,Se,x);L.push(Un)}null!==$&&($.hasOwnProperty("class")&&(o.flags|=8),$.hasOwnProperty("style")&&(o.flags|=16)),o.initialInputs=L,o.inputs=$,o.outputs=ue}(r,d,b)}function qg(r,o,d){const f=d.directiveStart,m=d.directiveEnd,b=d.index,x=function ga(){return Dr.lFrame.currentDirectiveIndex}();try{gs(b);for(let L=f;L<m;L++){const $=r.data[L],ue=o[L];au(L),(null!==$.hostBindings||0!==$.hostVars||null!==$.hostAttrs)&&Fp($,ue)}}finally{gs(-1),au(x)}}function Fp(r,o){null!==r.hostBindings&&r.hostBindings(1,o)}function Rh(r,o,d){o.componentOffset=d,(r.components||(r.components=[])).push(o.index)}function Cy(r,o,d){if(d){if(o.exportAs)for(let f=0;f<o.exportAs.length;f++)d[o.exportAs[f]]=r;ks(o)&&(d[""]=r)}}function Od(r,o,d,f,m){r.data[f]=m;const b=m.factory||(m.factory=uo(m.type)),x=new Qe(b,ks(m),Pd);r.blueprint[f]=x,d[f]=x,function j_(r,o,d,f,m){const b=m.hostBindings;if(b){let x=r.hostBindingOpCodes;null===x&&(x=r.hostBindingOpCodes=[]);const L=~o.index;(function iv(r){let o=r.length;for(;o>0;){const d=r[--o];if("number"==typeof d&&d<0)return d}return 0})(x)!=L&&x.push(L),x.push(d,f,b)}}(r,o,f,td(r,d,m.hostVars,yi),m)}function Sc(r,o,d,f,m,b){const x=Ji(r,o);!function jp(r,o,d,f,m,b,x){if(null==b)r.removeAttribute(o,m,d);else{const L=null==x?We(b):x(b,f||"",m);r.setAttribute(o,m,L,d)}}(o[ar],x,b,r.value,d,f,m)}function xy(r,o,d,f,m,b){const x=b[o];if(null!==x){const L=f.setInput;for(let $=0;$<x.length;){const ue=x[$++],Se=x[$++],ze=x[$++];null!==L?f.setInput(d,ze,ue,Se):d[Se]=ze}}}function Dy(r,o,d){let f=null,m=0;for(;m<d.length;){const b=d[m];if(0!==b)if(5!==b){if("number"==typeof b)break;if(r.hasOwnProperty(b)){null===f&&(f=[]);const x=r[b];for(let L=0;L<x.length;L+=2)if(x[L]===o){f.push(b,x[L+1],d[m+1]);break}}m+=2}else m+=2;else m+=4}return f}function Kg(r,o,d,f){return[r,!0,!1,o,null,0,f,d,null,null]}function Ay(r,o){const d=Cs(o,r);if(_o(d)){const f=d[Pn];48&d[Sr]?nd(f,d,f.template,d[Gr]):d[Qi]>0&&Up(d)}}function Up(r){for(let f=yd(r);null!==f;f=up(f))for(let m=$r;m<f.length;m++){const b=f[m];if(_o(b))if(512&b[Sr]){const x=b[Pn];nd(x,b,x.template,b[Gr])}else b[Qi]>0&&Up(b)}const d=r[Pn].components;if(null!==d)for(let f=0;f<d.length;f++){const m=Cs(d[f],r);_o(m)&&m[Qi]>0&&Up(m)}}function av(r,o){const d=Cs(o,r),f=d[Pn];(function uv(r,o){for(let d=o.length;d<r.blueprint.length;d++)o.push(r.blueprint[d])})(f,d),ec(f,d,d[Gr])}function Nh(r,o){return r[Fo]?r[la][hs]=o:r[Fo]=o,r[la]=o,o}function Uf(r){for(;r;){r[Sr]|=32;const o=hc(r);if(vo(r)&&!o)return r;r=o}return null}function Bu(r,o,d,f=!0){const m=o[Xs];m.begin&&m.begin();try{nd(r,o,r.template,d)}catch(x){throw f&&lv(o,x),x}finally{m.end&&m.end()}}function Sa(r,o,d){yu(0),o(r,d)}function Bp(r){return r[fs]||(r[fs]=[])}function Rd(r){return r.cleanup||(r.cleanup=[])}function lv(r,o){const d=r[qs],f=d?d.get(Ih,null):null;f&&f.handleError(o)}function Ld(r,o,d,f,m){for(let b=0;b<d.length;){const x=d[b++],L=d[b++],$=o[x],ue=r.data[x];null!==ue.setInput?ue.setInput($,m,f,L):$[L]=m}}function rd(r,o,d){const f=Rs(o,r);!function lp(r,o,d){r.setValue(o,d)}(r[ar],f,d)}function Zg(r,o,d){let f=d?r.styles:null,m=d?r.classes:null,b=0;if(null!==o)for(let x=0;x<o.length;x++){const L=o[x];"number"==typeof L?b=L:1==b?m=Ke(m,L):2==b&&(f=Ke(f,L+": "+o[++x]+";"))}d?r.styles=f:r.stylesWithoutHost=f,d?r.classes=m:r.classesWithoutHost=m}function Bf(r,o,d,f,m=!1){for(;null!==d;){const b=o[d.index];if(null!==b&&f.push(Fi(b)),ss(b))for(let L=$r;L<b.length;L++){const $=b[L],ue=$[Pn].firstChild;null!==ue&&Bf($[Pn],$,ue,f)}const x=d.type;if(8&x)Bf(r,o,d.child,f);else if(32&x){const L=uh(d,o);let $;for(;$=L();)f.push($)}else if(16&x){const L=eu(o,d);if(Array.isArray(L))f.push(...L);else{const $=hc(o[Bs]);Bf($[Pn],$,L,f,!0)}}d=m?d.projectionNext:d.next}return f}class Fd{get rootNodes(){const o=this._lView,d=o[Pn];return Bf(d,o,d.firstChild,[])}constructor(o,d){this._lView=o,this._cdRefInjectingView=d,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[Gr]}set context(o){this._lView[Gr]=o}get destroyed(){return 128==(128&this._lView[Sr])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const o=this._lView[Ei];if(ss(o)){const d=o[Jn],f=d?d.indexOf(this):-1;f>-1&&(Hl(o,f),du(d,f))}this._attachedToViewContainer=!1}Vc(this._lView[Pn],this._lView)}onDestroy(o){Lf(this._lView[Pn],this._lView,null,o)}markForCheck(){Uf(this._cdRefInjectingView||this._lView)}detach(){this._lView[Sr]&=-65}reattach(){this._lView[Sr]|=64}detectChanges(){Bu(this._lView[Pn],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new at(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function _d(r,o){wu(r,o,o[ar],2,null,null)}(this._lView[Pn],this._lView)}attachToAppRef(o){if(this._attachedToViewContainer)throw new at(902,!1);this._appRef=o}}class cv extends Fd{constructor(o){super(o),this._view=o}detectChanges(){const o=this._view;Bu(o[Pn],o,o[Gr],!1)}checkNoChanges(){}get context(){return null}}class Yg extends Cd{constructor(o){super(),this.ngModule=o}resolveComponentFactory(o){const d=rr(o);return new wc(d,this.ngModule)}}function Py(r){const o=[];for(let d in r)r.hasOwnProperty(d)&&o.push({propName:r[d],templateName:d});return o}class dv{constructor(o,d){this.injector=o,this.parentInjector=d}get(o,d,f){f=tr(f);const m=this.injector.get(o,Og,f);return m!==Og||d===Og?m:this.parentInjector.get(o,d,f)}}class wc extends Yl{get inputs(){return Py(this.componentDef.inputs)}get outputs(){return Py(this.componentDef.outputs)}constructor(o,d){super(),this.componentDef=o,this.ngModule=d,this.componentType=o.type,this.selector=function Lg(r){return r.map(D_).join(",")}(o.selectors),this.ngContentSelectors=o.ngContentSelectors?o.ngContentSelectors:[],this.isBoundToModule=!!d}create(o,d,f,m){let b=(m=m||this.ngModule)instanceof Qc?m:m?.injector;b&&null!==this.componentDef.getStandaloneInjector&&(b=this.componentDef.getStandaloneInjector(b)||b);const x=b?new dv(o,b):o,L=x.get(Pg,null);if(null===L)throw new at(407,!1);const $=x.get(Hm,null),ue=L.createRenderer(null,this.componentDef),Se=this.componentDef.selectors[0][0]||"div",ze=f?function F_(r,o,d){return r.selectRootElement(o,d===Xn.ShadowDom)}(ue,f,this.componentDef.encapsulation):dl(ue,Se,function U_(r){const o=r.toLowerCase();return"svg"===o?ai:"math"===o?"math":null}(Se)),bt=this.componentDef.onPush?288:272,Ut=Nf(0,null,null,1,0,null,null,null,null,null),hn=Rp(null,Ut,null,bt,null,null,L,ue,$,x,null);let Un,sr;Ga(hn);try{const Cr=this.componentDef;let li,Dn=null;Cr.findHostDirectiveDefs?(li=[],Dn=new Map,Cr.findHostDirectiveDefs(Cr,li,Dn),li.push(Cr)):li=[Cr];const xi=function V_(r,o){const d=r[Pn],f=pt;return r[f]=o,kf(d,f,2,"#host",null)}(hn,ze),xa=function My(r,o,d,f,m,b,x,L){const $=m[Pn];!function Vp(r,o,d,f){for(const m of r)o.mergedAttrs=Vn(o.mergedAttrs,m.hostAttrs);null!==o.mergedAttrs&&(Zg(o,o.mergedAttrs,!0),null!==d&&gc(f,d,o))}(f,r,o,x);const ue=b.createRenderer(o,d),Se=Rp(m,by(d),null,d.onPush?32:16,m[r.index],r,b,ue,L||null,null,null);return $.firstCreatePass&&Rh($,r,f.length-1),Nh(m,Se),m[r.index]=Se}(xi,ze,Cr,li,hn,L,ue);sr=Ha(Ut,pt),ze&&function Oy(r,o,d,f){if(f)gr(r,d,["ng-version",wp.full]);else{const{attrs:m,classes:b}=function A_(r){const o=[],d=[];let f=1,m=2;for(;f<r.length;){let b=r[f];if("string"==typeof b)2===m?""!==b&&o.push(b,r[++f]):8===m&&d.push(b);else{if(!Fl(m))break;m=b}f++}return{attrs:o,classes:d}}(o.selectors[0]);m&&gr(r,d,m),b&&b.length>0&&pl(r,d,b.join(" "))}}(ue,Cr,ze,f),void 0!==d&&function H_(r,o,d){const f=r.projection=[];for(let m=0;m<o.length;m++){const b=d[m];f.push(null!=b?Array.from(b):null)}}(sr,this.ngContentSelectors,d),Un=function fv(r,o,d,f,m,b){const x=xn(),L=m[Pn],$=Ji(x,m);rv(L,m,x,d,null,f);for(let Se=0;Se<d.length;Se++)Ta(Mn(m,L,x.directiveStart+Se,x),m);qg(L,m,x),$&&Ta($,m);const ue=Mn(m,L,x.directiveStart+x.componentOffset,x);if(r[Gr]=m[Gr]=ue,null!==b)for(const Se of b)Se(ue,o);return Rf(L,x,r),ue}(xa,Cr,li,Dn,hn,[G_]),ec(Ut,hn,null)}finally{Ls()}return new hv(this.componentType,Un,Eh(sr,hn),hn,sr)}}class hv extends bh{constructor(o,d,f,m,b){super(),this.location=f,this._rootLView=m,this._tNode=b,this.instance=d,this.hostView=this.changeDetectorRef=new cv(m),this.componentType=o}setInput(o,d){const f=this._tNode.inputs;let m;if(null!==f&&(m=f[o])){const b=this._rootLView;Ld(b[Pn],b,m,o,d),nv(b,this._tNode.index)}}get injector(){return new Is(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(o){this.hostView.onDestroy(o)}}function G_(){const r=xn();Ou(xe()[Pn],r)}function pv(r){let o=function ky(r){return Object.getPrototypeOf(r.prototype).constructor}(r.type),d=!0;const f=[r];for(;o;){let m;if(ks(r))m=o.\u0275cmp||o.\u0275dir;else{if(o.\u0275cmp)throw new at(903,!1);m=o.\u0275dir}if(m){if(d){f.push(m);const x=r;x.inputs=Hp(r.inputs),x.declaredInputs=Hp(r.declaredInputs),x.outputs=Hp(r.outputs);const L=m.hostBindings;L&&vv(r,L);const $=m.viewQuery,ue=m.contentQueries;if($&&mv(r,$),ue&&id(r,ue),Ge(r.inputs,m.inputs),Ge(r.declaredInputs,m.declaredInputs),Ge(r.outputs,m.outputs),ks(m)&&m.data.animation){const Se=r.data;Se.animation=(Se.animation||[]).concat(m.data.animation)}}const b=m.features;if(b)for(let x=0;x<b.length;x++){const L=b[x];L&&L.ngInherit&&L(r),L===pv&&(d=!1)}}o=Object.getPrototypeOf(o)}!function gv(r){let o=0,d=null;for(let f=r.length-1;f>=0;f--){const m=r[f];m.hostVars=o+=m.hostVars,m.hostAttrs=Vn(m.hostAttrs,d=Vn(d,m.hostAttrs))}}(f)}function Hp(r){return r===oi?{}:r===de?[]:r}function mv(r,o){const d=r.viewQuery;r.viewQuery=d?(f,m)=>{o(f,m),d(f,m)}:o}function id(r,o){const d=r.contentQueries;r.contentQueries=d?(f,m,b)=>{o(f,m,b),d(f,m,b)}:o}function vv(r,o){const d=r.hostBindings;r.hostBindings=d?(f,m)=>{o(f,m),d(f,m)}:o}function Vf(r){return!!Gp(r)&&(Array.isArray(r)||!(r instanceof Map)&&Symbol.iterator in r)}function Gp(r){return null!==r&&("function"==typeof r||"object"==typeof r)}function Vu(r,o,d){return r[o]=d}function ja(r,o,d){return!Object.is(r[o],d)&&(r[o]=d,!0)}function jd(r,o,d,f){const m=ja(r,o,d);return ja(r,o+1,f)||m}function $p(r,o,d,f){const m=xe();return ja(m,Gi(),o)&&(wt(),Sc(us(),m,r,o,d,f)),$p}function Lh(r,o,d,f,m,b){const L=jd(r,function Pi(){return Dr.lFrame.bindingIndex}(),d,m);return Ns(2),L?o+We(d)+f+We(m)+b:yi}function nm(r,o,d,f,m,b,x,L){const $=xe(),ue=wt(),Se=r+pt,ze=ue.firstCreatePass?function wv(r,o,d,f,m,b,x,L,$){const ue=o.consts,Se=kf(o,r,4,x||null,ro(ue,L));tc(o,d,Se,ro(ue,$)),Ou(o,Se);const ze=Se.tViews=Nf(2,Se,f,m,b,o.directiveRegistry,o.pipeRegistry,null,o.schemas,ue);return null!==o.queries&&(o.queries.template(o,Se),ze.queries=o.queries.embeddedTView(Se)),Se}(Se,ue,$,o,d,f,m,b,x):ue.data[Se];Ti(ze,!1);const bt=$[ar].createComment("");fl(ue,$,bt,ze),Ta(bt,$),Nh($,$[Se]=Kg(bt,$,bt,ze)),Uo(ze)&&Md(ue,$,ze),null!=x&&Np($,ze,L)}function rm(r){return vi(function ps(){return Dr.lFrame.contextLView}(),pt+r)}function im(r,o,d){const f=xe();return ja(f,Gi(),o)&&function Uu(r,o,d,f,m,b,x,L){const $=Ji(o,d);let Se,ue=o.inputs;!L&&null!=ue&&(Se=ue[f])?(Ld(r,d,Se,f,m),Pr(o)&&nv(d,o.index)):3&o.type&&(f=function Lp(r){return"class"===r?"className":"for"===r?"htmlFor":"formaction"===r?"formAction":"innerHtml"===r?"innerHTML":"readonly"===r?"readOnly":"tabindex"===r?"tabIndex":r}(f),m=null!=x?x(m,o.value||"",f):m,b.setProperty($,f,m))}(wt(),us(),f,r,o,f[ar],d,!1),im}function sm(r,o,d,f,m){const x=m?"class":"style";Ld(r,d,o.inputs[x],x,f)}function zp(r,o,d,f){const m=xe(),b=wt(),x=pt+r,L=m[ar],$=b.firstCreatePass?function Cv(r,o,d,f,m,b){const x=o.consts,$=kf(o,r,2,f,ro(x,m));return tc(o,d,$,ro(x,b)),null!==$.attrs&&Zg($,$.attrs,!1),null!==$.mergedAttrs&&Zg($,$.mergedAttrs,!0),null!==o.queries&&o.queries.elementStart(o,$),$}(x,b,m,o,d,f):b.data[x],ue=m[x]=dl(L,o,function Mu(){return Dr.lFrame.currentNamespace}()),Se=Uo($);return Ti($,!0),gc(L,ue,$),32!=(32&$.flags)&&fl(b,m,ue,$),0===function Z(){return Dr.lFrame.elementDepthCount}()&&Ta(ue,m),function q(){Dr.lFrame.elementDepthCount++}(),Se&&(Md(b,m,$),Rf(b,$,m)),null!==f&&Np(m,$),zp}function Uh(){let r=xn();Ai()?Ui():(r=r.parent,Ti(r,!1));const o=r;!function O(){Dr.lFrame.elementDepthCount--}();const d=wt();return d.firstCreatePass&&(Ou(d,r),os(r)&&d.queries.elementEnd(r)),null!=o.classesWithoutHost&&function Ii(r){return 0!=(8&r.flags)}(o)&&sm(d,o,xe(),o.classesWithoutHost,!0),null!=o.stylesWithoutHost&&function Bi(r){return 0!=(16&r.flags)}(o)&&sm(d,o,xe(),o.stylesWithoutHost,!1),Uh}function Iv(r,o,d,f){return zp(r,o,d,f),Uh(),Iv}function om(r,o,d){const f=xe(),m=wt(),b=r+pt,x=m.firstCreatePass?function z_(r,o,d,f,m){const b=o.consts,x=ro(b,f),L=kf(o,r,8,"ng-container",x);return null!==x&&Zg(L,x,!0),tc(o,d,L,ro(b,m)),null!==o.queries&&o.queries.elementStart(o,L),L}(b,m,f,o,d):m.data[b];Ti(x,!0);const L=f[b]=f[ar].createComment("");return fl(m,f,L,x),Ta(L,f),Uo(x)&&(Md(m,f,x),Rf(m,x,f)),null!=d&&Np(f,x),om}function Wp(){let r=xn();const o=wt();return Ai()?Ui():(r=r.parent,Ti(r,!1)),o.firstCreatePass&&(Ou(o,r),os(r)&&o.queries.elementEnd(r)),Wp}function am(){return xe()}function um(r){return!!r&&"function"==typeof r.then}function lm(r){return!!r&&"function"==typeof r.subscribe}const cm=lm;function qp(r,o,d,f){const m=xe(),b=wt(),x=xn();return function xc(r,o,d,f,m,b,x){const L=Uo(f),ue=r.firstCreatePass&&Rd(r),Se=o[Gr],ze=Bp(o);let bt=!0;if(3&f.type||x){const Un=Ji(f,o),sr=x?x(Un):Un,Cr=ze.length,li=x?xi=>x(Fi(xi[f.index])):f.index;let Dn=null;if(!x&&L&&(Dn=function Dv(r,o,d,f){const m=r.cleanup;if(null!=m)for(let b=0;b<m.length-1;b+=2){const x=m[b];if(x===d&&m[b+1]===f){const L=o[fs],$=m[b+2];return L.length>$?L[$]:null}"string"==typeof x&&(b+=2)}return null}(r,o,m,f.index)),null!==Dn)(Dn.__ngLastListenerFn__||Dn).__ngNextListenerFn__=b,Dn.__ngLastListenerFn__=b,bt=!1;else{b=dm(f,o,Se,b,!1);const xi=d.listen(sr,m,b);ze.push(b,xi),ue&&ue.push(m,li,Cr,Cr+1)}}else b=dm(f,o,Se,b,!1);const Ut=f.outputs;let hn;if(bt&&null!==Ut&&(hn=Ut[m])){const Un=hn.length;if(Un)for(let sr=0;sr<Un;sr+=2){const xa=o[hn[sr]][hn[sr+1]].subscribe(b),vu=ze.length;ze.push(b,xa),ue&&ue.push(m,f.index,vu,-(vu+1))}}}(b,m,m[ar],x,r,o,f),qp}function qf(r,o,d,f){try{return ws(6,o,d),!1!==d(f)}catch(m){return lv(r,m),!1}finally{ws(7,o,d)}}function dm(r,o,d,f,m){return function b(x){if(x===Function)return f;Uf(r.componentOffset>-1?Cs(r.index,o):o);let $=qf(o,d,f,x),ue=b.__ngNextListenerFn__;for(;ue;)$=qf(o,d,ue,x)&&$,ue=ue.__ngNextListenerFn__;return m&&!1===$&&(x.preventDefault(),x.returnValue=!1),$}}function hm(r=1){return function ia(r){return(Dr.lFrame.contextLView=function Pu(r,o){for(;r>0;)o=o[Os],r--;return o}(r,Dr.lFrame.contextLView))[Gr]}(r)}function Bh(r,o){let d=null;const f=function ly(r){const o=r.attrs;if(null!=o){const d=o.indexOf(5);if(!(1&d))return o[d+1]}return null}(r);for(let m=0;m<o.length;m++){const b=o[m];if("*"!==b){if(null===f?uy(r,b,!0):cy(f,b))return m}else d=m}return d}function Vh(r){const o=xe()[Bs][Ni];if(!o.projection){const f=o.projection=Qa(r?r.length:1,null),m=f.slice();let b=o.child;for(;null!==b;){const x=r?Bh(b,r):0;null!==x&&(m[x]?m[x].projectionNext=b:f[x]=b,m[x]=b),b=b.next}}}function fm(r,o=0,d){const f=xe(),m=wt(),b=kf(m,pt+r,16,null,d||null);null===b.projection&&(b.projection=o),Ui(),32!=(32&b.flags)&&function pc(r,o,d){Ju(o[ar],0,o,d,vf(r,d,o),Tg(d.parent||o[Ni],d,o))}(m,f,b)}function Zf(r,o){return r<<17|o<<2}function sd(r){return r>>17&32767}function Xf(r){return 2|r}function bi(r){return(131068&r)>>2}function pm(r,o){return-131069&r|o<<2}function rc(r){return 1|r}function $d(r,o,d,f,m){const b=r[d+1],x=null===o;let L=f?sd(b):bi(b),$=!1;for(;0!==L&&(!1===$||x);){const Se=r[L+1];zy(r[L],o)&&($=!0,r[L+1]=f?rc(Se):Xf(Se)),L=f?sd(Se):bi(Se)}$&&(r[d+1]=f?Xf(b):rc(b))}function zy(r,o){return null===r||null==o||(Array.isArray(r)?r[1]:r)===o||!(!Array.isArray(r)||"string"!=typeof o)&&ve(r,o)>=0}function Le(r,o){return function On(r,o,d,f){const m=xe(),b=wt(),x=Ns(2);b.firstUpdatePass&&function In(r,o,d,f){const m=r.data;if(null===m[d+1]){const b=m[so()],x=function en(r,o){return o>=r.expandoStartIndex}(r,d);(function ls(r,o){return 0!=(r.flags&(o?8:16))})(b,f)&&null===o&&!x&&(o=!1),o=function nn(r,o,d,f){const m=function ma(r){const o=Dr.lFrame.currentDirectiveIndex;return-1===o?null:r[o]}(r);let b=f?o.residualClasses:o.residualStyles;if(null===m)0===(f?o.classBindings:o.styleBindings)&&(d=Gn(d=wr(null,r,o,d,f),o.attrs,f),b=null);else{const x=o.directiveStylingLast;if(-1===x||r[x]!==m)if(d=wr(m,r,o,d,f),null===b){let $=function tn(r,o,d){const f=d?o.classBindings:o.styleBindings;if(0!==bi(f))return r[sd(f)]}(r,o,f);void 0!==$&&Array.isArray($)&&($=wr(null,r,o,$[1],f),$=Gn($,o.attrs,f),function En(r,o,d,f){r[sd(d?o.classBindings:o.styleBindings)]=f}(r,o,f,$))}else b=function cn(r,o,d){let f;const m=o.directiveEnd;for(let b=1+o.directiveStylingLast;b<m;b++)f=Gn(f,r[b].hostAttrs,d);return Gn(f,o.attrs,d)}(r,o,f)}return void 0!==b&&(f?o.residualClasses=b:o.residualStyles=b),d}(m,b,o,f),function pu(r,o,d,f,m,b){let x=b?o.classBindings:o.styleBindings,L=sd(x),$=bi(x);r[f]=d;let Se,ue=!1;if(Array.isArray(d)?(Se=d[1],(null===Se||ve(d,Se)>0)&&(ue=!0)):Se=d,m)if(0!==$){const bt=sd(r[L+1]);r[f+1]=Zf(bt,L),0!==bt&&(r[bt+1]=pm(r[bt+1],f)),r[L+1]=function Qf(r,o){return 131071&r|o<<17}(r[L+1],f)}else r[f+1]=Zf(L,0),0!==L&&(r[L+1]=pm(r[L+1],f)),L=f;else r[f+1]=Zf($,0),0===L?L=f:r[$+1]=pm(r[$+1],f),$=f;ue&&(r[f+1]=Xf(r[f+1])),$d(r,Se,f,!0),$d(r,Se,f,!1),function Hu(r,o,d,f,m){const b=m?r.residualClasses:r.residualStyles;null!=b&&"string"==typeof o&&ve(b,o)>=0&&(d[f+1]=rc(d[f+1]))}(o,Se,r,f,b),x=Zf(L,$),b?o.classBindings=x:o.styleBindings=x}(m,b,o,d,x,f)}}(b,r,x,f),o!==yi&&ja(m,x,o)&&function Co(r,o,d,f,m,b,x,L){if(!(3&o.type))return;const $=r.data,ue=$[L+1],Se=function $y(r){return 1==(1&r)}(ue)?ua($,o,d,m,bi(ue),x):void 0;ms(Se)||(ms(b)||function Yf(r){return 2==(2&r)}(ue)&&(b=ua($,null,d,m,L,x)),function $c(r,o,d,f,m){if(o)m?r.addClass(d,f):r.removeClass(d,f);else{let b=-1===f.indexOf("-")?void 0:Zr.DashCase;null==m?r.removeStyle(d,f,b):("string"==typeof m&&m.endsWith("!important")&&(m=m.slice(0,-10),b|=Zr.Important),r.setStyle(d,f,m,b))}}(f,x,Rs(so(),d),m,b))}(b,b.data[so()],m,m[ar],r,m[x+1]=function Ua(r,o){return null==r||("string"==typeof o?r+=o:"object"==typeof r&&(r=He(k(r)))),r}(o,d),f,x)}(r,o,null,!0),Le}function wr(r,o,d,f,m){let b=null;const x=d.directiveEnd;let L=d.directiveStylingLast;for(-1===L?L=d.directiveStart:L++;L<x&&(b=o[L],f=Gn(f,b.hostAttrs,m),b!==r);)L++;return null!==r&&(d.directiveStylingLast=L),f}function Gn(r,o,d){const f=d?1:2;let m=-1;if(null!==o)for(let b=0;b<o.length;b++){const x=o[b];"number"==typeof x?m=x:m===f&&(Array.isArray(r)||(r=void 0===r?[]:["",r]),Q(r,x,!!d||o[++b]))}return void 0===r?null:r}function ua(r,o,d,f,m,b){const x=null===o;let L;for(;m>0;){const $=r[m],ue=Array.isArray($),Se=ue?$[1]:$,ze=null===Se;let bt=d[m+1];bt===yi&&(bt=ze?de:void 0);let Ut=ze?pe(bt,f):Se===f?bt:void 0;if(ue&&!ms(Ut)&&(Ut=pe($,f)),ms(Ut)&&(L=Ut,x))return L;const hn=r[m+1];m=x?sd(hn):bi(hn)}if(null!==o){let $=b?o.residualClasses:o.residualStyles;null!=$&&(L=pe($,f))}return L}function ms(r){return void 0!==r}function Jf(r,o=""){const d=xe(),f=wt(),m=r+pt,b=f.firstCreatePass?kf(f,m,1,o,null):f.data[m],x=d[m]=function cl(r,o){return r.createText(o)}(d[ar],o);fl(f,d,x,b),Ti(b,!1)}function xu(r){return jl("",r,""),xu}function jl(r,o,d){const f=xe(),m=function Ud(r,o,d,f){return ja(r,Gi(),d)?o+We(d)+f:yi}(f,r,o,d);return m!==yi&&rd(f,so(),m),jl}function Dc(r,o,d,f,m){const b=xe(),x=Lh(b,r,o,d,f,m);return x!==yi&&rd(b,so(),x),Dc}const Zd=void 0;var Rv=["en",[["a","p"],["AM","PM"],Zd],[["AM","PM"],Zd,Zd],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Zd,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Zd,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Zd,"{1} 'at' {0}",Zd],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function Ul(r){const d=Math.floor(Math.abs(r)),f=r.toString().replace(/^[^.]*\.?/,"").length;return 1===d&&0===f?1:5}];let Wh={};function bm(r){const o=function Q_(r){return r.toLowerCase().replace(/_/g,"-")}(r);let d=ep(o);if(d)return d;const f=o.split("-")[0];if(d=ep(f),d)return d;if("en"===f)return Rv;throw new at(701,!1)}function tg(r){return bm(r)[Xr.PluralCase]}function ep(r){return r in Wh||(Wh[r]=er.ng&&er.ng.common&&er.ng.common.locales&&er.ng.common.locales[r]),Wh[r]}var Xr=(()=>((Xr=Xr||{})[Xr.LocaleId=0]="LocaleId",Xr[Xr.DayPeriodsFormat=1]="DayPeriodsFormat",Xr[Xr.DayPeriodsStandalone=2]="DayPeriodsStandalone",Xr[Xr.DaysFormat=3]="DaysFormat",Xr[Xr.DaysStandalone=4]="DaysStandalone",Xr[Xr.MonthsFormat=5]="MonthsFormat",Xr[Xr.MonthsStandalone=6]="MonthsStandalone",Xr[Xr.Eras=7]="Eras",Xr[Xr.FirstDayOfWeek=8]="FirstDayOfWeek",Xr[Xr.WeekendRange=9]="WeekendRange",Xr[Xr.DateFormat=10]="DateFormat",Xr[Xr.TimeFormat=11]="TimeFormat",Xr[Xr.DateTimeFormat=12]="DateTimeFormat",Xr[Xr.NumberSymbols=13]="NumberSymbols",Xr[Xr.NumberFormats=14]="NumberFormats",Xr[Xr.CurrencyCode=15]="CurrencyCode",Xr[Xr.CurrencySymbol=16]="CurrencySymbol",Xr[Xr.CurrencyName=17]="CurrencyName",Xr[Xr.Currencies=18]="Currencies",Xr[Xr.Directionality=19]="Directionality",Xr[Xr.PluralCase=20]="PluralCase",Xr[Xr.ExtraData=21]="ExtraData",Xr))();const Gu="en-US";let Xd=Gu;function a(r,o,d,f,m){if(r=Re(r),Array.isArray(r))for(let b=0;b<r.length;b++)a(r[b],o,d,f,m);else{const b=wt(),x=xe();let L=Tl(r)?r:Re(r.provide),$=Bm(r);const ue=xn(),Se=1048575&ue.providerIndexes,ze=ue.directiveStart,bt=ue.providerIndexes>>20;if(Tl(r)||!r.multi){const Ut=new Qe($,m,Pd),hn=c(L,o,m?Se:Se+bt,ze);-1===hn?(Ru(zu(ue,x),b,L),e(b,r,o.length),o.push(L),ue.directiveStart++,ue.directiveEnd++,m&&(ue.providerIndexes+=1048576),d.push(Ut),x.push(Ut)):(d[hn]=Ut,x[hn]=Ut)}else{const Ut=c(L,o,Se+bt,ze),hn=c(L,o,Se,Se+bt),sr=hn>=0&&d[hn];if(m&&!sr||!m&&!(Ut>=0&&d[Ut])){Ru(zu(ue,x),b,L);const Cr=function N(r,o,d,f,m){const b=new Qe(r,d,Pd);return b.multi=[],b.index=o,b.componentProviders=0,n(b,m,f&&!d),b}(m?_:p,d.length,m,f,$);!m&&sr&&(d[hn].providerFactory=Cr),e(b,r,o.length,0),o.push(L),ue.directiveStart++,ue.directiveEnd++,m&&(ue.providerIndexes+=1048576),d.push(Cr),x.push(Cr)}else e(b,r,Ut>-1?Ut:hn,n(d[m?hn:Ut],$,!m&&f));!m&&f&&sr&&d[hn].componentProviders++}}}function e(r,o,d,f){const m=Tl(o),b=function Um(r){return!!r.useClass}(o);if(m||b){const $=(b?Re(o.useClass):o).prototype.ngOnDestroy;if($){const ue=r.destroyHooks||(r.destroyHooks=[]);if(!m&&o.multi){const Se=ue.indexOf(d);-1===Se?ue.push(d,[f,$]):ue[Se+1].push(f,$)}else ue.push(d,$)}}}function n(r,o,d){return d&&r.componentProviders++,r.multi.push(o)-1}function c(r,o,d,f){for(let m=d;m<f;m++)if(o[m]===r)return m;return-1}function p(r,o,d,f){return w(this.multi,[])}function _(r,o,d,f){const m=this.multi;let b;if(this.providerFactory){const x=this.providerFactory.componentProviders,L=Mn(d,d[Pn],this.providerFactory.index,f);b=L.slice(0,x),w(m,b);for(let $=x;$<L.length;$++)b.push(L[$])}else b=[],w(m,b);return b}function w(r,o){for(let d=0;d<r.length;d++)o.push((0,r[d])());return o}function te(r,o=[]){return d=>{d.providersResolver=(f,m)=>function u0(r,o,d){const f=wt();if(f.firstCreatePass){const m=ks(r);a(d,f.data,f.blueprint,m,!0),a(o,f.data,f.blueprint,m,!1)}}(f,m?m(r):r,o)}}class ce{}class Ae{}function rt(r,o){return new on(r,o??null)}class on extends ce{constructor(o,d){super(),this._parent=d,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new Yg(this);const f=Es(o);this._bootstrapComponents=Ql(f.bootstrap),this._r3Injector=Ap(o,d,[{provide:ce,useValue:this},{provide:Cd,useValue:this.componentFactoryResolver}],He(o),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(o)}get injector(){return this._r3Injector}destroy(){const o=this._r3Injector;!o.destroyed&&o.destroy(),this.destroyCbs.forEach(d=>d()),this.destroyCbs=null}onDestroy(o){this.destroyCbs.push(o)}}class gn extends Ae{constructor(o){super(),this.moduleType=o}create(o){return new on(this.moduleType,o)}}class Yn extends ce{constructor(o,d,f){super(),this.componentFactoryResolver=new Yg(this),this.instance=null;const m=new yh([...o,{provide:ce,useValue:this},{provide:Cd,useValue:this.componentFactoryResolver}],d||Tp(),f,new Set(["environment"]));this.injector=m,m.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(o){this.injector.onDestroy(o)}}function br(r,o,d=null){return new Yn(r,o,d).injector}let Ws=(()=>{class r{constructor(d){this._injector=d,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(d){if(!d.standalone)return null;if(!this.cachedInjectors.has(d.id)){const f=wg(0,d.type),m=f.length>0?br([f],this._injector,`Standalone[${d.type.name}]`):null;this.cachedInjectors.set(d.id,m)}return this.cachedInjectors.get(d.id)}ngOnDestroy(){try{for(const d of this.cachedInjectors.values())null!==d&&d.destroy()}finally{this.cachedInjectors.clear()}}}return r.\u0275prov=zt({token:r,providedIn:"environment",factory:()=>new r(mn(Qc))}),r})();function mo(r){r.getStandaloneInjector=o=>o.get(Ws).getOrCreateStandaloneInjector(r)}function rl(r,o,d){const f=Wr()+r,m=xe();return m[f]===yi?Vu(m,f,d?o.call(d):o()):function Xo(r,o){return r[o]}(m,f)}function hd(r,o,d,f){return l0(xe(),Wr(),r,o,d,f)}function _0(r,o,d,f,m){return function ye(r,o,d,f,m,b,x){const L=o+d;return jd(r,L,m,b)?Vu(r,L+2,x?f.call(x,m,b):f(m,b)):qv(r,L+2)}(xe(),Wr(),r,o,d,f,m)}function qv(r,o){const d=r[o];return d===yi?void 0:d}function l0(r,o,d,f,m,b){const x=o+d;return ja(r,x,m)?Vu(r,x+1,b?f.call(b,m):f(m)):qv(r,x+1)}function G(r,o){const d=wt();let f;const m=r+pt;d.firstCreatePass?(f=function ie(r,o){if(o)for(let d=o.length-1;d>=0;d--){const f=o[d];if(r===f.name)return f}}(o,d.pipeRegistry),d.data[m]=f,f.onDestroy&&(d.destroyHooks||(d.destroyHooks=[])).push(m,f.onDestroy)):f=d.data[m];const b=f.factory||(f.factory=uo(f.type)),x=pr(Pd);try{const L=Dl(!1),$=b();return Dl(L),function Uy(r,o,d,f){d>=r.data.length&&(r.data[d]=null,r.blueprint[d]=null),o[d]=f}(d,xe(),m,$),$}finally{pr(x)}}function je(r,o,d){const f=r+pt,m=xe(),b=vi(m,f);return function an(r,o){return r[Pn].data[o].pure}(m,f)?l0(m,Wr(),o,b.transform,d,b):b.transform(d)}function cr(r){return o=>{setTimeout(r,void 0,o)}}const An=class $n extends E.x{constructor(o=!1){super(),this.__isAsync=o}emit(o){super.next(o)}subscribe(o,d,f){let m=o,b=d||(()=>null),x=f;if(o&&"object"==typeof o){const $=o;m=$.next?.bind($),b=$.error?.bind($),x=$.complete?.bind($)}this.__isAsync&&(b=cr(b),m&&(m=cr(m)),x&&(x=cr(x)));const L=super.subscribe({next:m,error:b,complete:x});return o instanceof M.w0&&o.add(L),L}};function ri(){return this._results[Symbol.iterator]()}class Ca{get changes(){return this._changes||(this._changes=new An)}constructor(o=!1){this._emitDistinctChangesOnly=o,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const d=Ca.prototype;d[Symbol.iterator]||(d[Symbol.iterator]=ri)}get(o){return this._results[o]}map(o){return this._results.map(o)}filter(o){return this._results.filter(o)}find(o){return this._results.find(o)}reduce(o,d){return this._results.reduce(o,d)}forEach(o){this._results.forEach(o)}some(o){return this._results.some(o)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(o,d){const f=this;f.dirty=!1;const m=function zo(r){return r.flat(Number.POSITIVE_INFINITY)}(o);(this._changesDetected=!function Tu(r,o,d){if(r.length!==o.length)return!1;for(let f=0;f<r.length;f++){let m=r[f],b=o[f];if(d&&(m=d(m),b=d(b)),b!==m)return!1}return!0}(f._results,m,d))&&(f._results=m,f.length=m.length,f.last=m[this.length-1],f.first=m[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let mu=(()=>{class r{}return r.__NG_ELEMENT_ID__=b0,r})();const cg=mu,c0=class extends cg{constructor(o,d,f){super(),this._declarationLView=o,this._declarationTContainer=d,this.elementRef=f}createEmbeddedView(o,d){const f=this._declarationTContainer.tViews,m=Rp(this._declarationLView,f,o,16,null,f.declTNode,null,null,null,null,d||null);m[Ko]=this._declarationLView[this._declarationTContainer.index];const x=this._declarationLView[Zs];return null!==x&&(m[Zs]=x.createEmbeddedView(f)),ec(f,m,o),new Fd(m)}};function b0(){return Kv(xn(),xe())}function Kv(r,o){return 4&r.type?new c0(o,r,Eh(r,o)):null}let Zv=(()=>{class r{}return r.__NG_ELEMENT_ID__=d0,r})();function d0(){return hT(xn(),xe())}const E0=Zv,Ia=class extends E0{constructor(o,d,f){super(),this._lContainer=o,this._hostTNode=d,this._hostLView=f}get element(){return Eh(this._hostTNode,this._hostLView)}get injector(){return new Is(this._hostTNode,this._hostLView)}get parentInjector(){const o=Mr(this._hostTNode,this._hostLView);if(Cn(o)){const d=Oi(o,this._hostLView),f=Bt(o);return new Is(d[Pn].data[f+8],d)}return new Is(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(o){const d=h0(this._lContainer);return null!==d&&d[o]||null}get length(){return this._lContainer.length-$r}createEmbeddedView(o,d,f){let m,b;"number"==typeof f?m=f:null!=f&&(m=f.index,b=f.injector);const x=o.createEmbeddedView(d||{},b);return this.insert(x,m),x}createComponent(o,d,f,m,b){const x=o&&!function Ra(r){return"function"==typeof r}(o);let L;if(x)L=d;else{const ze=d||{};L=ze.index,f=ze.injector,m=ze.projectableNodes,b=ze.environmentInjector||ze.ngModuleRef}const $=x?o:new wc(rr(o)),ue=f||this.parentInjector;if(!b&&null==$.ngModule){const bt=(x?ue:this.parentInjector).get(Qc,null);bt&&(b=bt)}const Se=$.create(ue,m,void 0,b);return this.insert(Se.hostView,L),Se}insert(o,d){const f=o._lView,m=f[Pn];if(function ta(r){return ss(r[Ei])}(f)){const Se=this.indexOf(o);if(-1!==Se)this.detach(Se);else{const ze=f[Ei],bt=new Ia(ze,ze[Ni],ze[Ei]);bt.detach(bt.indexOf(o))}}const b=this._adjustIndex(d),x=this._lContainer;!function cp(r,o,d,f){const m=$r+f,b=d.length;f>0&&(d[m-1][hs]=o),f<b-$r?(o[hs]=d[m],Yu(d,$r+f,o)):(d.push(o),o[hs]=null),o[Ei]=d;const x=o[Ko];null!==x&&d!==x&&function Nm(r,o){const d=r[Tr];o[Bs]!==o[Ei][Ei][Bs]&&(r[sn]=!0),null===d?r[Tr]=[o]:d.push(o)}(x,o);const L=o[Zs];null!==L&&L.insertView(r),o[Sr]|=64}(m,f,x,b);const L=La(b,x),$=f[ar],ue=Rl($,x[Sn]);return null!==ue&&function mf(r,o,d,f,m,b){f[Ss]=m,f[Ni]=o,wu(r,f,d,1,m,b)}(m,x[Ni],$,f,ue,L),o.attachToViewContainerRef(),Yu(Jh(x),b,o),o}move(o,d){return this.insert(o,d)}indexOf(o){const d=h0(this._lContainer);return null!==d?d.indexOf(o):-1}remove(o){const d=this._adjustIndex(o,-1),f=Hl(this._lContainer,d);f&&(du(Jh(this._lContainer),d),Vc(f[Pn],f))}detach(o){const d=this._adjustIndex(o,-1),f=Hl(this._lContainer,d);return f&&null!=du(Jh(this._lContainer),d)?new Fd(f):null}_adjustIndex(o,d=0){return o??this.length+d}};function h0(r){return r[Jn]}function Jh(r){return r[Jn]||(r[Jn]=[])}function hT(r,o){let d;const f=o[r.index];if(ss(f))d=f;else{let m;if(8&r.type)m=Fi(f);else{const b=o[ar];m=b.createComment("");const x=Ji(r,o);hu(b,Rl(b,x),m,function dp(r,o){return r.nextSibling(o)}(b,x),!1)}o[r.index]=d=Kg(f,o,m,r),Nh(o,d)}return new Ia(d,r,o)}class H0{constructor(o){this.queryList=o,this.matches=null}clone(){return new H0(this.queryList)}setDirty(){this.queryList.setDirty()}}class G0{constructor(o=[]){this.queries=o}createEmbeddedView(o){const d=o.queries;if(null!==d){const f=null!==o.contentQueries?o.contentQueries[0]:d.length,m=[];for(let b=0;b<f;b++){const x=d.getByIndex(b);m.push(this.queries[x.indexInDeclarationView].clone())}return new G0(m)}return null}insertView(o){this.dirtyQueriesWithMatches(o)}detachView(o){this.dirtyQueriesWithMatches(o)}dirtyQueriesWithMatches(o){for(let d=0;d<this.queries.length;d++)null!==bT(o,d).matches&&this.queries[d].setDirty()}}class fT{constructor(o,d,f=null){this.predicate=o,this.flags=d,this.read=f}}class $0{constructor(o=[]){this.queries=o}elementStart(o,d){for(let f=0;f<this.queries.length;f++)this.queries[f].elementStart(o,d)}elementEnd(o){for(let d=0;d<this.queries.length;d++)this.queries[d].elementEnd(o)}embeddedTView(o){let d=null;for(let f=0;f<this.length;f++){const m=null!==d?d.length:0,b=this.getByIndex(f).embeddedTView(o,m);b&&(b.indexInDeclarationView=f,null!==d?d.push(b):d=[b])}return null!==d?new $0(d):null}template(o,d){for(let f=0;f<this.queries.length;f++)this.queries[f].template(o,d)}getByIndex(o){return this.queries[o]}get length(){return this.queries.length}track(o){this.queries.push(o)}}class z0{constructor(o,d=-1){this.metadata=o,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=d}elementStart(o,d){this.isApplyingToNode(d)&&this.matchTNode(o,d)}elementEnd(o){this._declarationNodeIndex===o.index&&(this._appliesToNextNode=!1)}template(o,d){this.elementStart(o,d)}embeddedTView(o,d){return this.isApplyingToNode(o)?(this.crossesNgTemplate=!0,this.addMatch(-o.index,d),new z0(this.metadata)):null}isApplyingToNode(o){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const d=this._declarationNodeIndex;let f=o.parent;for(;null!==f&&8&f.type&&f.index!==d;)f=f.parent;return d===(null!==f?f.index:-1)}return this._appliesToNextNode}matchTNode(o,d){const f=this.metadata.predicate;if(Array.isArray(f))for(let m=0;m<f.length;m++){const b=f[m];this.matchTNodeWithReadOption(o,d,vb(d,b)),this.matchTNodeWithReadOption(o,d,_s(d,o,b,!1,!1))}else f===mu?4&d.type&&this.matchTNodeWithReadOption(o,d,-1):this.matchTNodeWithReadOption(o,d,_s(d,o,f,!1,!1))}matchTNodeWithReadOption(o,d,f){if(null!==f){const m=this.metadata.read;if(null!==m)if(m===Sh||m===Zv||m===mu&&4&d.type)this.addMatch(d.index,-2);else{const b=_s(d,o,m,!1,!1);null!==b&&this.addMatch(d.index,b)}else this.addMatch(d.index,f)}}addMatch(o,d){null===this.matches?this.matches=[o,d]:this.matches.push(o,d)}}function vb(r,o){const d=r.localNames;if(null!==d)for(let f=0;f<d.length;f+=2)if(d[f]===o)return d[f+1];return null}function _b(r,o,d,f){return-1===d?function yb(r,o){return 11&r.type?Eh(r,o):4&r.type?Kv(r,o):null}(o,r):-2===d?function Tb(r,o,d){return d===Sh?Eh(o,r):d===mu?Kv(o,r):d===Zv?hT(o,r):void 0}(r,o,f):Mn(r,r[Pn],d,o)}function pT(r,o,d,f){const m=o[Zs].queries[f];if(null===m.matches){const b=r.data,x=d.matches,L=[];for(let $=0;$<x.length;$+=2){const ue=x[$];L.push(ue<0?null:_b(o,b[ue],x[$+1],d.metadata.read))}m.matches=L}return m.matches}function W0(r,o,d,f){const m=r.queries.getByIndex(d),b=m.matches;if(null!==b){const x=pT(r,o,m,d);for(let L=0;L<b.length;L+=2){const $=b[L];if($>0)f.push(x[L/2]);else{const ue=b[L+1],Se=o[-$];for(let ze=$r;ze<Se.length;ze++){const bt=Se[ze];bt[Ko]===bt[Ei]&&W0(bt[Pn],bt,ue,f)}if(null!==Se[Tr]){const ze=Se[Tr];for(let bt=0;bt<ze.length;bt++){const Ut=ze[bt];W0(Ut[Pn],Ut,ue,f)}}}}}return f}function gT(r){const o=xe(),d=wt(),f=io();yu(f+1);const m=bT(d,f);if(r.dirty&&function fa(r){return 4==(4&r[Sr])}(o)===(2==(2&m.metadata.flags))){if(null===m.matches)r.reset([]);else{const b=m.crossesNgTemplate?W0(d,o,f,[]):pT(d,o,m,f);r.reset(b,Id),r.notifyOnChanges()}return!0}return!1}function mT(r,o,d){const f=wt();f.firstCreatePass&&(TT(f,new fT(r,o,d),-1),2==(2&o)&&(f.staticViewQueries=!0)),_T(f,xe(),o)}function vT(r,o,d,f){const m=wt();if(m.firstCreatePass){const b=xn();TT(m,new fT(o,d,f),b.index),function Eb(r,o){const d=r.contentQueries||(r.contentQueries=[]);o!==(d.length?d[d.length-1]:-1)&&d.push(r.queries.length-1,o)}(m,r),2==(2&d)&&(m.staticContentQueries=!0)}_T(m,xe(),d)}function yT(){return function bb(r,o){return r[Zs].queries[o].queryList}(xe(),io())}function _T(r,o,d){const f=new Ca(4==(4&d));Lf(r,o,f,f.destroy),null===o[Zs]&&(o[Zs]=new G0),o[Zs].queries.push(new H0(f))}function TT(r,o,d){null===r.queries&&(r.queries=new $0),r.queries.track(new z0(o,d))}function bT(r,o){return r.queries.getByIndex(o)}function ET(r,o){return Kv(r,o)}function q0(r){return!!Es(r)}function w0(...r){}const BT=new fi("Application Initializer");let C0=(()=>{class r{constructor(d){this.appInits=d,this.resolve=w0,this.reject=w0,this.initialized=!1,this.done=!1,this.donePromise=new Promise((f,m)=>{this.resolve=f,this.reject=m})}runInitializers(){if(this.initialized)return;const d=[],f=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let m=0;m<this.appInits.length;m++){const b=this.appInits[m]();if(um(b))d.push(b);else if(cm(b)){const x=new Promise((L,$)=>{b.subscribe({complete:L,error:$})});d.push(x)}}Promise.all(d).then(()=>{f()}).catch(m=>{this.reject(m)}),0===d.length&&f(),this.initialized=!0}}return r.\u0275fac=function(d){return new(d||r)(mn(BT,8))},r.\u0275prov=zt({token:r,factory:r.\u0275fac,providedIn:"root"}),r})();const VT=new fi("AppId",{providedIn:"root",factory:function HT(){return`${X0()}${X0()}${X0()}`}});function X0(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const GT=new fi("Platform Initializer"),Hb=new fi("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),$T=new fi("appBootstrapListener");let Gb=(()=>{class r{log(d){console.log(d)}warn(d){console.warn(d)}}return r.\u0275fac=function(d){return new(d||r)},r.\u0275prov=zt({token:r,factory:r.\u0275fac,providedIn:"platform"}),r})();const I0=new fi("LocaleId",{providedIn:"root",factory:()=>yn(I0,Tn.Optional|Tn.SkipSelf)||function $b(){return typeof $localize<"u"&&$localize.locale||Gu}()}),zb=new fi("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class Wb{constructor(o,d){this.ngModuleFactory=o,this.componentFactories=d}}let qb=(()=>{class r{compileModuleSync(d){return new gn(d)}compileModuleAsync(d){return Promise.resolve(this.compileModuleSync(d))}compileModuleAndAllComponentsSync(d){const f=this.compileModuleSync(d),b=Ql(Es(d).declarations).reduce((x,L)=>{const $=rr(L);return $&&x.push(new wc($)),x},[]);return new Wb(f,b)}compileModuleAndAllComponentsAsync(d){return Promise.resolve(this.compileModuleAndAllComponentsSync(d))}clearCache(){}clearCacheFor(d){}getModuleId(d){}}return r.\u0275fac=function(d){return new(d||r)},r.\u0275prov=zt({token:r,factory:r.\u0275fac,providedIn:"root"}),r})();const Yb=(()=>Promise.resolve(0))();function J0(r){typeof Zone>"u"?Yb.then(()=>{r&&r.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",r)}class rh{constructor({enableLongStackTrace:o=!1,shouldCoalesceEventChangeDetection:d=!1,shouldCoalesceRunChangeDetection:f=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new An(!1),this.onMicrotaskEmpty=new An(!1),this.onStable=new An(!1),this.onError=new An(!1),typeof Zone>"u")throw new at(908,!1);Zone.assertZonePatched();const m=this;m._nesting=0,m._outer=m._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(m._inner=m._inner.fork(new Zone.TaskTrackingZoneSpec)),o&&Zone.longStackTraceZoneSpec&&(m._inner=m._inner.fork(Zone.longStackTraceZoneSpec)),m.shouldCoalesceEventChangeDetection=!f&&d,m.shouldCoalesceRunChangeDetection=f,m.lastRequestAnimationFrameId=-1,m.nativeRequestAnimationFrame=function Qb(){let r=er.requestAnimationFrame,o=er.cancelAnimationFrame;if(typeof Zone<"u"&&r&&o){const d=r[Zone.__symbol__("OriginalDelegate")];d&&(r=d);const f=o[Zone.__symbol__("OriginalDelegate")];f&&(o=f)}return{nativeRequestAnimationFrame:r,nativeCancelAnimationFrame:o}}().nativeRequestAnimationFrame,function eE(r){const o=()=>{!function Jb(r){r.isCheckStableRunning||-1!==r.lastRequestAnimationFrameId||(r.lastRequestAnimationFrameId=r.nativeRequestAnimationFrame.call(er,()=>{r.fakeTopEventTask||(r.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{r.lastRequestAnimationFrameId=-1,tT(r),r.isCheckStableRunning=!0,eT(r),r.isCheckStableRunning=!1},void 0,()=>{},()=>{})),r.fakeTopEventTask.invoke()}),tT(r))}(r)};r._inner=r._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(d,f,m,b,x,L)=>{try{return qT(r),d.invokeTask(m,b,x,L)}finally{(r.shouldCoalesceEventChangeDetection&&"eventTask"===b.type||r.shouldCoalesceRunChangeDetection)&&o(),KT(r)}},onInvoke:(d,f,m,b,x,L,$)=>{try{return qT(r),d.invoke(m,b,x,L,$)}finally{r.shouldCoalesceRunChangeDetection&&o(),KT(r)}},onHasTask:(d,f,m,b)=>{d.hasTask(m,b),f===m&&("microTask"==b.change?(r._hasPendingMicrotasks=b.microTask,tT(r),eT(r)):"macroTask"==b.change&&(r.hasPendingMacrotasks=b.macroTask))},onHandleError:(d,f,m,b)=>(d.handleError(m,b),r.runOutsideAngular(()=>r.onError.emit(b)),!1)})}(m)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!rh.isInAngularZone())throw new at(909,!1)}static assertNotInAngularZone(){if(rh.isInAngularZone())throw new at(909,!1)}run(o,d,f){return this._inner.run(o,d,f)}runTask(o,d,f,m){const b=this._inner,x=b.scheduleEventTask("NgZoneEvent: "+m,o,Xb,w0,w0);try{return b.runTask(x,d,f)}finally{b.cancelTask(x)}}runGuarded(o,d,f){return this._inner.runGuarded(o,d,f)}runOutsideAngular(o){return this._outer.run(o)}}const Xb={};function eT(r){if(0==r._nesting&&!r.hasPendingMicrotasks&&!r.isStable)try{r._nesting++,r.onMicrotaskEmpty.emit(null)}finally{if(r._nesting--,!r.hasPendingMicrotasks)try{r.runOutsideAngular(()=>r.onStable.emit(null))}finally{r.isStable=!0}}}function tT(r){r.hasPendingMicrotasks=!!(r._hasPendingMicrotasks||(r.shouldCoalesceEventChangeDetection||r.shouldCoalesceRunChangeDetection)&&-1!==r.lastRequestAnimationFrameId)}function qT(r){r._nesting++,r.isStable&&(r.isStable=!1,r.onUnstable.emit(null))}function KT(r){r._nesting--,eT(r)}class tE{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new An,this.onMicrotaskEmpty=new An,this.onStable=new An,this.onError=new An}run(o,d,f){return o.apply(d,f)}runGuarded(o,d,f){return o.apply(d,f)}runOutsideAngular(o){return o()}runTask(o,d,f,m){return o.apply(d,f)}}const ZT=new fi(""),YT=new fi("");let nT,nE=(()=>{class r{constructor(d,f,m){this._ngZone=d,this.registry=f,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,nT||(function rE(r){nT=r}(m),m.addToWindow(f)),this._watchAngularEvents(),d.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{rh.assertNotInAngularZone(),J0(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())J0(()=>{for(;0!==this._callbacks.length;){let d=this._callbacks.pop();clearTimeout(d.timeoutId),d.doneCb(this._didWork)}this._didWork=!1});else{let d=this.getPendingTasks();this._callbacks=this._callbacks.filter(f=>!f.updateCb||!f.updateCb(d)||(clearTimeout(f.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(d=>({source:d.source,creationLocation:d.creationLocation,data:d.data})):[]}addCallback(d,f,m){let b=-1;f&&f>0&&(b=setTimeout(()=>{this._callbacks=this._callbacks.filter(x=>x.timeoutId!==b),d(this._didWork,this.getPendingTasks())},f)),this._callbacks.push({doneCb:d,timeoutId:b,updateCb:m})}whenStable(d,f,m){if(m&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(d,f,m),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(d){this.registry.registerApplication(d,this)}unregisterApplication(d){this.registry.unregisterApplication(d)}findProviders(d,f,m){return[]}}return r.\u0275fac=function(d){return new(d||r)(mn(rh),mn(QT),mn(YT))},r.\u0275prov=zt({token:r,factory:r.\u0275fac}),r})(),QT=(()=>{class r{constructor(){this._applications=new Map}registerApplication(d,f){this._applications.set(d,f)}unregisterApplication(d){this._applications.delete(d)}unregisterAllApplications(){this._applications.clear()}getTestability(d){return this._applications.get(d)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(d,f=!0){return nT?.findTestabilityInTree(this,d,f)??null}}return r.\u0275fac=function(d){return new(d||r)},r.\u0275prov=zt({token:r,factory:r.\u0275fac,providedIn:"platform"}),r})(),Pm=null;const XT=new fi("AllowMultipleToken"),rT=new fi("PlatformDestroyListeners"),dg=!1;class oE{constructor(o,d){this.name=o,this.token=d}}function eb(r,o,d=[]){const f=`Platform: ${o}`,m=new fi(f);return(b=[])=>{let x=iT();if(!x||x.injector.get(XT,!1)){const L=[...d,...b,{provide:m,useValue:!0}];r?r(L):function aE(r){if(Pm&&!Pm.get(XT,!1))throw new at(400,!1);Pm=r;const o=r.get(nb);(function JT(r){const o=r.get(GT,null);o&&o.forEach(d=>d())})(r)}(function tb(r=[],o){return Xl.create({name:o,providers:[{provide:Df,useValue:"platform"},{provide:rT,useValue:new Set([()=>Pm=null])},...r]})}(L,f))}return function lE(r){const o=iT();if(!o)throw new at(401,!1);return o}()}}function iT(){return Pm?.get(nb)??null}let nb=(()=>{class r{constructor(d){this._injector=d,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(d,f){const m=function ib(r,o){let d;return d="noop"===r?new tE:("zone.js"===r?void 0:r)||new rh(o),d}(f?.ngZone,function rb(r){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!r||!r.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!r||!r.ngZoneRunCoalescing)||!1}}(f)),b=[{provide:rh,useValue:m}];return m.run(()=>{const x=Xl.create({providers:b,parent:this.injector,name:d.moduleType.name}),L=d.create(x),$=L.injector.get(Ih,null);if(!$)throw new at(402,!1);return m.runOutsideAngular(()=>{const ue=m.onError.subscribe({next:Se=>{$.handleError(Se)}});L.onDestroy(()=>{D0(this._modules,L),ue.unsubscribe()})}),function sb(r,o,d){try{const f=d();return um(f)?f.catch(m=>{throw o.runOutsideAngular(()=>r.handleError(m)),m}):f}catch(f){throw o.runOutsideAngular(()=>r.handleError(f)),f}}($,m,()=>{const ue=L.injector.get(C0);return ue.runInitializers(),ue.donePromise.then(()=>(function Ps(r){Nt(r,"Expected localeId to be defined"),"string"==typeof r&&(Xd=r.toLowerCase().replace(/_/g,"-"))}(L.injector.get(I0,Gu)||Gu),this._moduleDoBootstrap(L),L))})})}bootstrapModule(d,f=[]){const m=ob({},f);return function iE(r,o,d){const f=new gn(d);return Promise.resolve(f)}(0,0,d).then(b=>this.bootstrapModuleFactory(b,m))}_moduleDoBootstrap(d){const f=d.injector.get(x0);if(d._bootstrapComponents.length>0)d._bootstrapComponents.forEach(m=>f.bootstrap(m));else{if(!d.instance.ngDoBootstrap)throw new at(-403,!1);d.instance.ngDoBootstrap(f)}this._modules.push(d)}onDestroy(d){this._destroyListeners.push(d)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new at(404,!1);this._modules.slice().forEach(f=>f.destroy()),this._destroyListeners.forEach(f=>f());const d=this._injector.get(rT,null);d&&(d.forEach(f=>f()),d.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return r.\u0275fac=function(d){return new(d||r)(mn(Xl))},r.\u0275prov=zt({token:r,factory:r.\u0275fac,providedIn:"platform"}),r})();function ob(r,o){return Array.isArray(o)?o.reduce(ob,r):{...r,...o}}let x0=(()=>{class r{get destroyed(){return this._destroyed}get injector(){return this._injector}constructor(d,f,m){this._zone=d,this._injector=f,this._exceptionHandler=m,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const b=new re.y(L=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{L.next(this._stable),L.complete()})}),x=new re.y(L=>{let $;this._zone.runOutsideAngular(()=>{$=this._zone.onStable.subscribe(()=>{rh.assertNotInAngularZone(),J0(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,L.next(!0))})})});const ue=this._zone.onUnstable.subscribe(()=>{rh.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{L.next(!1)}))});return()=>{$.unsubscribe(),ue.unsubscribe()}});this.isStable=(0,Oe.T)(b,x.pipe((0,De.B)()))}bootstrap(d,f){const m=d instanceof Yl;if(!this._injector.get(C0).done){!m&&Ci(d);throw new at(405,dg)}let x;x=m?d:this._injector.get(Cd).resolveComponentFactory(d),this.componentTypes.push(x.componentType);const L=function sE(r){return r.isBoundToModule}(x)?void 0:this._injector.get(ce),ue=x.create(Xl.NULL,[],f||x.selector,L),Se=ue.location.nativeElement,ze=ue.injector.get(ZT,null);return ze?.registerApplication(Se),ue.onDestroy(()=>{this.detachView(ue.hostView),D0(this.components,ue),ze?.unregisterApplication(Se)}),this._loadComponent(ue),ue}tick(){if(this._runningTick)throw new at(101,!1);try{this._runningTick=!0;for(let d of this._views)d.detectChanges()}catch(d){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(d))}finally{this._runningTick=!1}}attachView(d){const f=d;this._views.push(f),f.attachToAppRef(this)}detachView(d){const f=d;D0(this._views,f),f.detachFromAppRef()}_loadComponent(d){this.attachView(d.hostView),this.tick(),this.components.push(d);const f=this._injector.get($T,[]);f.push(...this._bootstrapListeners),f.forEach(m=>m(d))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(d=>d()),this._views.slice().forEach(d=>d.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(d){return this._destroyListeners.push(d),()=>D0(this._destroyListeners,d)}destroy(){if(this._destroyed)throw new at(406,!1);const d=this._injector;d.destroy&&!d.destroyed&&d.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return r.\u0275fac=function(d){return new(d||r)(mn(rh),mn(Qc),mn(Ih))},r.\u0275prov=zt({token:r,factory:r.\u0275fac,providedIn:"root"}),r})();function D0(r,o){const d=r.indexOf(o);d>-1&&r.splice(d,1)}function dE(){return!1}function hE(){}let fE=(()=>{class r{}return r.__NG_ELEMENT_ID__=pE,r})();function pE(r){return function gE(r,o,d){if(Pr(r)&&!d){const f=Cs(r.index,o);return new Fd(f,f)}return 47&r.type?new Fd(o[Bs],o):null}(xn(),xe(),16==(16&r))}class db{constructor(){}supports(o){return Vf(o)}create(o){return new bE(o)}}const TE=(r,o)=>o;class bE{constructor(o){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=o||TE}forEachItem(o){let d;for(d=this._itHead;null!==d;d=d._next)o(d)}forEachOperation(o){let d=this._itHead,f=this._removalsHead,m=0,b=null;for(;d||f;){const x=!f||d&&d.currentIndex<fb(f,m,b)?d:f,L=fb(x,m,b),$=x.currentIndex;if(x===f)m--,f=f._nextRemoved;else if(d=d._next,null==x.previousIndex)m++;else{b||(b=[]);const ue=L-m,Se=$-m;if(ue!=Se){for(let bt=0;bt<ue;bt++){const Ut=bt<b.length?b[bt]:b[bt]=0,hn=Ut+bt;Se<=hn&&hn<ue&&(b[bt]=Ut+1)}b[x.previousIndex]=Se-ue}}L!==$&&o(x,L,$)}}forEachPreviousItem(o){let d;for(d=this._previousItHead;null!==d;d=d._nextPrevious)o(d)}forEachAddedItem(o){let d;for(d=this._additionsHead;null!==d;d=d._nextAdded)o(d)}forEachMovedItem(o){let d;for(d=this._movesHead;null!==d;d=d._nextMoved)o(d)}forEachRemovedItem(o){let d;for(d=this._removalsHead;null!==d;d=d._nextRemoved)o(d)}forEachIdentityChange(o){let d;for(d=this._identityChangesHead;null!==d;d=d._nextIdentityChange)o(d)}diff(o){if(null==o&&(o=[]),!Vf(o))throw new at(900,!1);return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let m,b,x,d=this._itHead,f=!1;if(Array.isArray(o)){this.length=o.length;for(let L=0;L<this.length;L++)b=o[L],x=this._trackByFn(L,b),null!==d&&Object.is(d.trackById,x)?(f&&(d=this._verifyReinsertion(d,b,x,L)),Object.is(d.item,b)||this._addIdentityChange(d,b)):(d=this._mismatch(d,b,x,L),f=!0),d=d._next}else m=0,function bv(r,o){if(Array.isArray(r))for(let d=0;d<r.length;d++)o(r[d]);else{const d=r[Symbol.iterator]();let f;for(;!(f=d.next()).done;)o(f.value)}}(o,L=>{x=this._trackByFn(m,L),null!==d&&Object.is(d.trackById,x)?(f&&(d=this._verifyReinsertion(d,L,x,m)),Object.is(d.item,L)||this._addIdentityChange(d,L)):(d=this._mismatch(d,L,x,m),f=!0),d=d._next,m++}),this.length=m;return this._truncate(d),this.collection=o,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let o;for(o=this._previousItHead=this._itHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._additionsHead;null!==o;o=o._nextAdded)o.previousIndex=o.currentIndex;for(this._additionsHead=this._additionsTail=null,o=this._movesHead;null!==o;o=o._nextMoved)o.previousIndex=o.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(o,d,f,m){let b;return null===o?b=this._itTail:(b=o._prev,this._remove(o)),null!==(o=null===this._unlinkedRecords?null:this._unlinkedRecords.get(f,null))?(Object.is(o.item,d)||this._addIdentityChange(o,d),this._reinsertAfter(o,b,m)):null!==(o=null===this._linkedRecords?null:this._linkedRecords.get(f,m))?(Object.is(o.item,d)||this._addIdentityChange(o,d),this._moveAfter(o,b,m)):o=this._addAfter(new EE(d,f),b,m),o}_verifyReinsertion(o,d,f,m){let b=null===this._unlinkedRecords?null:this._unlinkedRecords.get(f,null);return null!==b?o=this._reinsertAfter(b,o._prev,m):o.currentIndex!=m&&(o.currentIndex=m,this._addToMoves(o,m)),o}_truncate(o){for(;null!==o;){const d=o._next;this._addToRemovals(this._unlink(o)),o=d}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(o,d,f){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(o);const m=o._prevRemoved,b=o._nextRemoved;return null===m?this._removalsHead=b:m._nextRemoved=b,null===b?this._removalsTail=m:b._prevRemoved=m,this._insertAfter(o,d,f),this._addToMoves(o,f),o}_moveAfter(o,d,f){return this._unlink(o),this._insertAfter(o,d,f),this._addToMoves(o,f),o}_addAfter(o,d,f){return this._insertAfter(o,d,f),this._additionsTail=null===this._additionsTail?this._additionsHead=o:this._additionsTail._nextAdded=o,o}_insertAfter(o,d,f){const m=null===d?this._itHead:d._next;return o._next=m,o._prev=d,null===m?this._itTail=o:m._prev=o,null===d?this._itHead=o:d._next=o,null===this._linkedRecords&&(this._linkedRecords=new hb),this._linkedRecords.put(o),o.currentIndex=f,o}_remove(o){return this._addToRemovals(this._unlink(o))}_unlink(o){null!==this._linkedRecords&&this._linkedRecords.remove(o);const d=o._prev,f=o._next;return null===d?this._itHead=f:d._next=f,null===f?this._itTail=d:f._prev=d,o}_addToMoves(o,d){return o.previousIndex===d||(this._movesTail=null===this._movesTail?this._movesHead=o:this._movesTail._nextMoved=o),o}_addToRemovals(o){return null===this._unlinkedRecords&&(this._unlinkedRecords=new hb),this._unlinkedRecords.put(o),o.currentIndex=null,o._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=o,o._prevRemoved=null):(o._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=o),o}_addIdentityChange(o,d){return o.item=d,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=o:this._identityChangesTail._nextIdentityChange=o,o}}class EE{constructor(o,d){this.item=o,this.trackById=d,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class SE{constructor(){this._head=null,this._tail=null}add(o){null===this._head?(this._head=this._tail=o,o._nextDup=null,o._prevDup=null):(this._tail._nextDup=o,o._prevDup=this._tail,o._nextDup=null,this._tail=o)}get(o,d){let f;for(f=this._head;null!==f;f=f._nextDup)if((null===d||d<=f.currentIndex)&&Object.is(f.trackById,o))return f;return null}remove(o){const d=o._prevDup,f=o._nextDup;return null===d?this._head=f:d._nextDup=f,null===f?this._tail=d:f._prevDup=d,null===this._head}}class hb{constructor(){this.map=new Map}put(o){const d=o.trackById;let f=this.map.get(d);f||(f=new SE,this.map.set(d,f)),f.add(o)}get(o,d){const m=this.map.get(o);return m?m.get(o,d):null}remove(o){const d=o.trackById;return this.map.get(d).remove(o)&&this.map.delete(d),o}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function fb(r,o,d){const f=r.previousIndex;if(null===f)return f;let m=0;return d&&f<d.length&&(m=d[f]),f+o+m}class pb{constructor(){}supports(o){return o instanceof Map||Gp(o)}create(){return new wE}}class wE{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(o){let d;for(d=this._mapHead;null!==d;d=d._next)o(d)}forEachPreviousItem(o){let d;for(d=this._previousMapHead;null!==d;d=d._nextPrevious)o(d)}forEachChangedItem(o){let d;for(d=this._changesHead;null!==d;d=d._nextChanged)o(d)}forEachAddedItem(o){let d;for(d=this._additionsHead;null!==d;d=d._nextAdded)o(d)}forEachRemovedItem(o){let d;for(d=this._removalsHead;null!==d;d=d._nextRemoved)o(d)}diff(o){if(o){if(!(o instanceof Map||Gp(o)))throw new at(900,!1)}else o=new Map;return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let d=this._mapHead;if(this._appendAfter=null,this._forEach(o,(f,m)=>{if(d&&d.key===m)this._maybeAddToChanges(d,f),this._appendAfter=d,d=d._next;else{const b=this._getOrCreateRecordForKey(m,f);d=this._insertBeforeOrAppend(d,b)}}),d){d._prev&&(d._prev._next=null),this._removalsHead=d;for(let f=d;null!==f;f=f._nextRemoved)f===this._mapHead&&(this._mapHead=null),this._records.delete(f.key),f._nextRemoved=f._next,f.previousValue=f.currentValue,f.currentValue=null,f._prev=null,f._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(o,d){if(o){const f=o._prev;return d._next=o,d._prev=f,o._prev=d,f&&(f._next=d),o===this._mapHead&&(this._mapHead=d),this._appendAfter=o,o}return this._appendAfter?(this._appendAfter._next=d,d._prev=this._appendAfter):this._mapHead=d,this._appendAfter=d,null}_getOrCreateRecordForKey(o,d){if(this._records.has(o)){const m=this._records.get(o);this._maybeAddToChanges(m,d);const b=m._prev,x=m._next;return b&&(b._next=x),x&&(x._prev=b),m._next=null,m._prev=null,m}const f=new CE(o);return this._records.set(o,f),f.currentValue=d,this._addToAdditions(f),f}_reset(){if(this.isDirty){let o;for(this._previousMapHead=this._mapHead,o=this._previousMapHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._changesHead;null!==o;o=o._nextChanged)o.previousValue=o.currentValue;for(o=this._additionsHead;null!=o;o=o._nextAdded)o.previousValue=o.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(o,d){Object.is(d,o.currentValue)||(o.previousValue=o.currentValue,o.currentValue=d,this._addToChanges(o))}_addToAdditions(o){null===this._additionsHead?this._additionsHead=this._additionsTail=o:(this._additionsTail._nextAdded=o,this._additionsTail=o)}_addToChanges(o){null===this._changesHead?this._changesHead=this._changesTail=o:(this._changesTail._nextChanged=o,this._changesTail=o)}_forEach(o,d){o instanceof Map?o.forEach(d):Object.keys(o).forEach(f=>d(o[f],f))}}class CE{constructor(o){this.key=o,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function gb(){return new lT([new db])}let lT=(()=>{class r{constructor(d){this.factories=d}static create(d,f){if(null!=f){const m=f.factories.slice();d=d.concat(m)}return new r(d)}static extend(d){return{provide:r,useFactory:f=>r.create(d,f||gb()),deps:[[r,new X,new Xa]]}}find(d){const f=this.factories.find(m=>m.supports(d));if(null!=f)return f;throw new at(901,!1)}}return r.\u0275prov=zt({token:r,providedIn:"root",factory:gb}),r})();function mb(){return new cT([new pb])}let cT=(()=>{class r{constructor(d){this.factories=d}static create(d,f){if(f){const m=f.factories.slice();d=d.concat(m)}return new r(d)}static extend(d){return{provide:r,useFactory:f=>r.create(d,f||mb()),deps:[[r,new X,new Xa]]}}find(d){const f=this.factories.find(m=>m.supports(d));if(f)return f;throw new at(901,!1)}}return r.\u0275prov=zt({token:r,providedIn:"root",factory:mb}),r})();const DE=eb(null,"core",[]);let AE=(()=>{class r{constructor(d){}}return r.\u0275fac=function(d){return new(d||r)(mn(x0))},r.\u0275mod=xr({type:r}),r.\u0275inj=dr({}),r})();function PE(r){return"boolean"==typeof r?r:null!=r&&"false"!==r}},4006:(Qt,it,K)=>{"use strict";K.d(it,{F:()=>Ni,Fj:()=>ae,JJ:()=>Bn,JL:()=>Ar,Kr:()=>iu,NI:()=>qs,On:()=>Li,Q7:()=>ea,UX:()=>ra,YN:()=>eo,_Y:()=>pt,c5:()=>no,cw:()=>$t,kI:()=>Fe,oH:()=>Pr,sg:()=>ks,u5:()=>Dr});var E=K(4650),M=K(6895),re=K(8996),Oe=K(4128),De=K(4004);let ke=(()=>{class ne{constructor(q,O){this._renderer=q,this._elementRef=O,this.onChange=H=>{},this.onTouched=()=>{}}setProperty(q,O){this._renderer.setProperty(this._elementRef.nativeElement,q,O)}registerOnTouched(q){this.onTouched=q}registerOnChange(q){this.onChange=q}setDisabledState(q){this.setProperty("disabled",q)}}return ne.\u0275fac=function(q){return new(q||ne)(E.Y36(E.Qsj),E.Y36(E.SBq))},ne.\u0275dir=E.lG2({type:ne}),ne})(),Ge=(()=>{class ne extends ke{}return ne.\u0275fac=function(){let Z;return function(O){return(Z||(Z=E.n5z(ne)))(O||ne)}}(),ne.\u0275dir=E.lG2({type:ne,features:[E.qOj]}),ne})();const He=new E.OlP("NgValueAccessor"),Pe={provide:He,useExisting:(0,E.Gpc)(()=>ae),multi:!0},yt=new E.OlP("CompositionEventMode");let ae=(()=>{class ne extends ke{constructor(q,O,H){super(q,O),this._compositionMode=H,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function Re(){const ne=(0,M.q)()?(0,M.q)().getUserAgent():"";return/android (\d+)/.test(ne.toLowerCase())}())}writeValue(q){this.setProperty("value",q??"")}_handleInput(q){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(q)}_compositionStart(){this._composing=!0}_compositionEnd(q){this._composing=!1,this._compositionMode&&this.onChange(q)}}return ne.\u0275fac=function(q){return new(q||ne)(E.Y36(E.Qsj),E.Y36(E.SBq),E.Y36(yt,8))},ne.\u0275dir=E.lG2({type:ne,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(q,O){1&q&&E.NdJ("input",function(be){return O._handleInput(be.target.value)})("blur",function(){return O.onTouched()})("compositionstart",function(){return O._compositionStart()})("compositionend",function(be){return O._compositionEnd(be.target.value)})},features:[E._Bn([Pe]),E.qOj]}),ne})();const Pt=!1;function et(ne){return null==ne||("string"==typeof ne||Array.isArray(ne))&&0===ne.length}function at(ne){return null!=ne&&"number"==typeof ne.length}const nt=new E.OlP("NgValidators"),We=new E.OlP("NgAsyncValidators"),dt=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class Fe{static min(Z){return function Me(ne){return Z=>{if(et(Z.value)||et(ne))return null;const q=parseFloat(Z.value);return!isNaN(q)&&q<ne?{min:{min:ne,actual:Z.value}}:null}}(Z)}static max(Z){return function Et(ne){return Z=>{if(et(Z.value)||et(ne))return null;const q=parseFloat(Z.value);return!isNaN(q)&&q>ne?{max:{max:ne,actual:Z.value}}:null}}(Z)}static required(Z){return Mt(Z)}static requiredTrue(Z){return function St(ne){return!0===ne.value?null:{required:!0}}(Z)}static email(Z){return function J(ne){return et(ne.value)||dt.test(ne.value)?null:{email:!0}}(Z)}static minLength(Z){return function he(ne){return Z=>et(Z.value)||!at(Z.value)?null:Z.value.length<ne?{minlength:{requiredLength:ne,actualLength:Z.value.length}}:null}(Z)}static maxLength(Z){return function Ne(ne){return Z=>at(Z.value)&&Z.value.length>ne?{maxlength:{requiredLength:ne,actualLength:Z.value.length}}:null}(Z)}static pattern(Z){return mt(Z)}static nullValidator(Z){return null}static compose(Z){return gt(Z)}static composeAsync(Z){return jt(Z)}}function Mt(ne){return et(ne.value)?{required:!0}:null}function mt(ne){if(!ne)return st;let Z,q;return"string"==typeof ne?(q="","^"!==ne.charAt(0)&&(q+="^"),q+=ne,"$"!==ne.charAt(ne.length-1)&&(q+="$"),Z=new RegExp(q)):(q=ne.toString(),Z=ne),O=>{if(et(O.value))return null;const H=O.value;return Z.test(H)?null:{pattern:{requiredPattern:q,actualValue:H}}}}function st(ne){return null}function xt(ne){return null!=ne}function Xe(ne){const Z=(0,E.QGY)(ne)?(0,re.D)(ne):ne;if(Pt&&!(0,E.CqO)(Z)){let q="Expected async validator to return Promise or Observable.";throw"object"==typeof ne&&(q+=" Are you using a synchronous validator where an async validator is expected?"),new E.vHH(-1101,q)}return Z}function ut(ne){let Z={};return ne.forEach(q=>{Z=null!=q?{...Z,...q}:Z}),0===Object.keys(Z).length?null:Z}function Je(ne,Z){return Z.map(q=>q(ne))}function lt(ne){return ne.map(Z=>function ot(ne){return!ne.validate}(Z)?Z:q=>Z.validate(q))}function gt(ne){if(!ne)return null;const Z=ne.filter(xt);return 0==Z.length?null:function(q){return ut(Je(q,Z))}}function Nt(ne){return null!=ne?gt(lt(ne)):null}function jt(ne){if(!ne)return null;const Z=ne.filter(xt);return 0==Z.length?null:function(q){const O=Je(q,Z).map(Xe);return(0,Oe.D)(O).pipe((0,De.U)(ut))}}function _n(ne){return null!=ne?jt(lt(ne)):null}function Ot(ne,Z){return null===ne?[Z]:Array.isArray(ne)?[...ne,Z]:[ne,Z]}function rn(ne){return ne._rawValidators}function zt(ne){return ne._rawAsyncValidators}function bn(ne){return ne?Array.isArray(ne)?ne:[ne]:[]}function dr(ne,Z){return Array.isArray(ne)?ne.includes(Z):ne===Z}function Hn(ne,Z){const q=bn(Z);return bn(ne).forEach(H=>{dr(q,H)||q.push(H)}),q}function Zn(ne,Z){return bn(Z).filter(q=>!dr(ne,q))}class Vr{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(Z){this._rawValidators=Z||[],this._composedValidatorFn=Nt(this._rawValidators)}_setAsyncValidators(Z){this._rawAsyncValidators=Z||[],this._composedAsyncValidatorFn=_n(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(Z){this._onDestroyCallbacks.push(Z)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(Z=>Z()),this._onDestroyCallbacks=[]}reset(Z){this.control&&this.control.reset(Z)}hasError(Z,q){return!!this.control&&this.control.hasError(Z,q)}getError(Z,q){return this.control?this.control.getError(Z,q):null}}class mr extends Vr{get formDirective(){return null}get path(){return null}}class qn extends Vr{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class kr{constructor(Z){this._cd=Z}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let Bn=(()=>{class ne extends kr{constructor(q){super(q)}}return ne.\u0275fac=function(q){return new(q||ne)(E.Y36(qn,2))},ne.\u0275dir=E.lG2({type:ne,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(q,O){2&q&&E.ekj("ng-untouched",O.isUntouched)("ng-touched",O.isTouched)("ng-pristine",O.isPristine)("ng-dirty",O.isDirty)("ng-valid",O.isValid)("ng-invalid",O.isInvalid)("ng-pending",O.isPending)},features:[E.qOj]}),ne})(),Ar=(()=>{class ne extends kr{constructor(q){super(q)}}return ne.\u0275fac=function(q){return new(q||ne)(E.Y36(mr,10))},ne.\u0275dir=E.lG2({type:ne,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(q,O){2&q&&E.ekj("ng-untouched",O.isUntouched)("ng-touched",O.isTouched)("ng-pristine",O.isPristine)("ng-dirty",O.isDirty)("ng-valid",O.isValid)("ng-invalid",O.isInvalid)("ng-pending",O.isPending)("ng-submitted",O.isSubmitted)},features:[E.qOj]}),ne})();function Vi(ne,Z){return ne?`with name: '${Z}'`:`at index: ${Z}`}const Ir=!1,di="VALID",kn="INVALID",mn="PENDING",Xt="DISABLED";function yn(ne){return(Jr(ne)?ne.validators:ne)||null}function nr(ne,Z){return(Jr(Z)?Z.asyncValidators:ne)||null}function Jr(ne){return null!=ne&&!Array.isArray(ne)&&"object"==typeof ne}class ht{constructor(Z,q){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(Z),this._assignAsyncValidators(q)}get validator(){return this._composedValidatorFn}set validator(Z){this._rawValidators=this._composedValidatorFn=Z}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(Z){this._rawAsyncValidators=this._composedAsyncValidatorFn=Z}get parent(){return this._parent}get valid(){return this.status===di}get invalid(){return this.status===kn}get pending(){return this.status==mn}get disabled(){return this.status===Xt}get enabled(){return this.status!==Xt}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(Z){this._assignValidators(Z)}setAsyncValidators(Z){this._assignAsyncValidators(Z)}addValidators(Z){this.setValidators(Hn(Z,this._rawValidators))}addAsyncValidators(Z){this.setAsyncValidators(Hn(Z,this._rawAsyncValidators))}removeValidators(Z){this.setValidators(Zn(Z,this._rawValidators))}removeAsyncValidators(Z){this.setAsyncValidators(Zn(Z,this._rawAsyncValidators))}hasValidator(Z){return dr(this._rawValidators,Z)}hasAsyncValidator(Z){return dr(this._rawAsyncValidators,Z)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(Z={}){this.touched=!0,this._parent&&!Z.onlySelf&&this._parent.markAsTouched(Z)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(Z=>Z.markAllAsTouched())}markAsUntouched(Z={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(q=>{q.markAsUntouched({onlySelf:!0})}),this._parent&&!Z.onlySelf&&this._parent._updateTouched(Z)}markAsDirty(Z={}){this.pristine=!1,this._parent&&!Z.onlySelf&&this._parent.markAsDirty(Z)}markAsPristine(Z={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(q=>{q.markAsPristine({onlySelf:!0})}),this._parent&&!Z.onlySelf&&this._parent._updatePristine(Z)}markAsPending(Z={}){this.status=mn,!1!==Z.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!Z.onlySelf&&this._parent.markAsPending(Z)}disable(Z={}){const q=this._parentMarkedDirty(Z.onlySelf);this.status=Xt,this.errors=null,this._forEachChild(O=>{O.disable({...Z,onlySelf:!0})}),this._updateValue(),!1!==Z.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...Z,skipPristineCheck:q}),this._onDisabledChange.forEach(O=>O(!0))}enable(Z={}){const q=this._parentMarkedDirty(Z.onlySelf);this.status=di,this._forEachChild(O=>{O.enable({...Z,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:Z.emitEvent}),this._updateAncestors({...Z,skipPristineCheck:q}),this._onDisabledChange.forEach(O=>O(!1))}_updateAncestors(Z){this._parent&&!Z.onlySelf&&(this._parent.updateValueAndValidity(Z),Z.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(Z){this._parent=Z}getRawValue(){return this.value}updateValueAndValidity(Z={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===di||this.status===mn)&&this._runAsyncValidator(Z.emitEvent)),!1!==Z.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!Z.onlySelf&&this._parent.updateValueAndValidity(Z)}_updateTreeValidity(Z={emitEvent:!0}){this._forEachChild(q=>q._updateTreeValidity(Z)),this.updateValueAndValidity({onlySelf:!0,emitEvent:Z.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Xt:di}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(Z){if(this.asyncValidator){this.status=mn,this._hasOwnPendingAsyncValidator=!0;const q=Xe(this.asyncValidator(this));this._asyncValidationSubscription=q.subscribe(O=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(O,{emitEvent:Z})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(Z,q={}){this.errors=Z,this._updateControlsErrors(!1!==q.emitEvent)}get(Z){let q=Z;return null==q||(Array.isArray(q)||(q=q.split(".")),0===q.length)?null:q.reduce((O,H)=>O&&O._find(H),this)}getError(Z,q){const O=q?this.get(q):this;return O&&O.errors?O.errors[Z]:null}hasError(Z,q){return!!this.getError(Z,q)}get root(){let Z=this;for(;Z._parent;)Z=Z._parent;return Z}_updateControlsErrors(Z){this.status=this._calculateStatus(),Z&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(Z)}_initObservables(){this.valueChanges=new E.vpe,this.statusChanges=new E.vpe}_calculateStatus(){return this._allControlsDisabled()?Xt:this.errors?kn:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(mn)?mn:this._anyControlsHaveStatus(kn)?kn:di}_anyControlsHaveStatus(Z){return this._anyControls(q=>q.status===Z)}_anyControlsDirty(){return this._anyControls(Z=>Z.dirty)}_anyControlsTouched(){return this._anyControls(Z=>Z.touched)}_updatePristine(Z={}){this.pristine=!this._anyControlsDirty(),this._parent&&!Z.onlySelf&&this._parent._updatePristine(Z)}_updateTouched(Z={}){this.touched=this._anyControlsTouched(),this._parent&&!Z.onlySelf&&this._parent._updateTouched(Z)}_registerOnCollectionChange(Z){this._onCollectionChange=Z}_setUpdateStrategy(Z){Jr(Z)&&null!=Z.updateOn&&(this._updateOn=Z.updateOn)}_parentMarkedDirty(Z){return!Z&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(Z){return null}_assignValidators(Z){this._rawValidators=Array.isArray(Z)?Z.slice():Z,this._composedValidatorFn=function tr(ne){return Array.isArray(ne)?Nt(ne):ne||null}(this._rawValidators)}_assignAsyncValidators(Z){this._rawAsyncValidators=Array.isArray(Z)?Z.slice():Z,this._composedAsyncValidatorFn=function vr(ne){return Array.isArray(ne)?_n(ne):ne||null}(this._rawAsyncValidators)}}class $t extends ht{constructor(Z,q,O){super(yn(q),nr(O,q)),this.controls=Z,this._initObservables(),this._setUpdateStrategy(q),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(Z,q){return this.controls[Z]?this.controls[Z]:(this.controls[Z]=q,q.setParent(this),q._registerOnCollectionChange(this._onCollectionChange),q)}addControl(Z,q,O={}){this.registerControl(Z,q),this.updateValueAndValidity({emitEvent:O.emitEvent}),this._onCollectionChange()}removeControl(Z,q={}){this.controls[Z]&&this.controls[Z]._registerOnCollectionChange(()=>{}),delete this.controls[Z],this.updateValueAndValidity({emitEvent:q.emitEvent}),this._onCollectionChange()}setControl(Z,q,O={}){this.controls[Z]&&this.controls[Z]._registerOnCollectionChange(()=>{}),delete this.controls[Z],q&&this.registerControl(Z,q),this.updateValueAndValidity({emitEvent:O.emitEvent}),this._onCollectionChange()}contains(Z){return this.controls.hasOwnProperty(Z)&&this.controls[Z].enabled}setValue(Z,q={}){(function Ze(ne,Z,q){ne._forEachChild((O,H)=>{if(void 0===q[H])throw new E.vHH(1002,Ir?function Rr(ne,Z){return`Must supply a value for form control ${Vi(ne,Z)}`}(Z,H):"")})})(this,!0,Z),Object.keys(Z).forEach(O=>{(function tt(ne,Z,q){const O=ne.controls;if(!(Z?Object.keys(O):O).length)throw new E.vHH(1e3,Ir?function Ki(ne){return`\n    There are no form controls registered with this ${ne?"group":"array"} yet. If you're using ngModel,\n    you may want to check next tick (e.g. use setTimeout).\n  `}(Z):"");if(!O[q])throw new E.vHH(1001,Ir?function Fr(ne,Z){return`Cannot find form control ${Vi(ne,Z)}`}(Z,q):"")})(this,!0,O),this.controls[O].setValue(Z[O],{onlySelf:!0,emitEvent:q.emitEvent})}),this.updateValueAndValidity(q)}patchValue(Z,q={}){null!=Z&&(Object.keys(Z).forEach(O=>{const H=this.controls[O];H&&H.patchValue(Z[O],{onlySelf:!0,emitEvent:q.emitEvent})}),this.updateValueAndValidity(q))}reset(Z={},q={}){this._forEachChild((O,H)=>{O.reset(Z[H],{onlySelf:!0,emitEvent:q.emitEvent})}),this._updatePristine(q),this._updateTouched(q),this.updateValueAndValidity(q)}getRawValue(){return this._reduceChildren({},(Z,q,O)=>(Z[O]=q.getRawValue(),Z))}_syncPendingControls(){let Z=this._reduceChildren(!1,(q,O)=>!!O._syncPendingControls()||q);return Z&&this.updateValueAndValidity({onlySelf:!0}),Z}_forEachChild(Z){Object.keys(this.controls).forEach(q=>{const O=this.controls[q];O&&Z(O,q)})}_setUpControls(){this._forEachChild(Z=>{Z.setParent(this),Z._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(Z){for(const[q,O]of Object.entries(this.controls))if(this.contains(q)&&Z(O))return!0;return!1}_reduceValue(){return this._reduceChildren({},(q,O,H)=>((O.enabled||this.disabled)&&(q[H]=O.value),q))}_reduceChildren(Z,q){let O=Z;return this._forEachChild((H,be)=>{O=q(O,H,be)}),O}_allControlsDisabled(){for(const Z of Object.keys(this.controls))if(this.controls[Z].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(Z){return this.controls.hasOwnProperty(Z)?this.controls[Z]:null}}const de=new E.OlP("CallSetDisabledState",{providedIn:"root",factory:()=>we}),we="always";function Te(ne,Z,q=we){pn(ne,Z),Z.valueAccessor.writeValue(ne.value),(ne.disabled||"always"===q)&&Z.valueAccessor.setDisabledState?.(ne.disabled),function jr(ne,Z){Z.valueAccessor.registerOnChange(q=>{ne._pendingValue=q,ne._pendingChange=!0,ne._pendingDirty=!0,"change"===ne.updateOn&&wi(ne,Z)})}(ne,Z),function xr(ne,Z){const q=(O,H)=>{Z.valueAccessor.writeValue(O),H&&Z.viewToModelUpdate(O)};ne.registerOnChange(q),Z._registerOnDestroy(()=>{ne._unregisterOnChange(q)})}(ne,Z),function Or(ne,Z){Z.valueAccessor.registerOnTouched(()=>{ne._pendingTouched=!0,"blur"===ne.updateOn&&ne._pendingChange&&wi(ne,Z),"submit"!==ne.updateOn&&ne.markAsTouched()})}(ne,Z),function Ht(ne,Z){if(Z.valueAccessor.setDisabledState){const q=O=>{Z.valueAccessor.setDisabledState(O)};ne.registerOnDisabledChange(q),Z._registerOnDestroy(()=>{ne._unregisterOnDisabledChange(q)})}}(ne,Z)}function ge(ne,Z,q=!0){const O=()=>{};Z.valueAccessor&&(Z.valueAccessor.registerOnChange(O),Z.valueAccessor.registerOnTouched(O)),Nn(ne,Z),ne&&(Z._invokeOnDestroyCallbacks(),ne._registerOnCollectionChange(()=>{}))}function Ye(ne,Z){ne.forEach(q=>{q.registerOnValidatorChange&&q.registerOnValidatorChange(Z)})}function pn(ne,Z){const q=rn(ne);null!==Z.validator?ne.setValidators(Ot(q,Z.validator)):"function"==typeof q&&ne.setValidators([q]);const O=zt(ne);null!==Z.asyncValidator?ne.setAsyncValidators(Ot(O,Z.asyncValidator)):"function"==typeof O&&ne.setAsyncValidators([O]);const H=()=>ne.updateValueAndValidity();Ye(Z._rawValidators,H),Ye(Z._rawAsyncValidators,H)}function Nn(ne,Z){let q=!1;if(null!==ne){if(null!==Z.validator){const H=rn(ne);if(Array.isArray(H)&&H.length>0){const be=H.filter(Ve=>Ve!==Z.validator);be.length!==H.length&&(q=!0,ne.setValidators(be))}}if(null!==Z.asyncValidator){const H=zt(ne);if(Array.isArray(H)&&H.length>0){const be=H.filter(Ve=>Ve!==Z.asyncValidator);be.length!==H.length&&(q=!0,ne.setAsyncValidators(be))}}}const O=()=>{};return Ye(Z._rawValidators,O),Ye(Z._rawAsyncValidators,O),q}function wi(ne,Z){ne._pendingDirty&&ne.markAsDirty(),ne.setValue(ne._pendingValue,{emitModelToViewChange:!1}),Z.viewToModelUpdate(ne._pendingValue),ne._pendingChange=!1}function Zi(ne,Z){pn(ne,Z)}function Ci(ne,Z){if(!ne.hasOwnProperty("model"))return!1;const q=ne.model;return!!q.isFirstChange()||!Object.is(Z,q.currentValue)}function Ss(ne,Z){ne._syncPendingControls(),Z.forEach(q=>{const O=q.control;"submit"===O.updateOn&&O._pendingChange&&(q.viewToModelUpdate(O._pendingValue),O._pendingChange=!1)})}function Pn(ne,Z){if(!Z)return null;let q,O,H;return Array.isArray(Z),Z.forEach(be=>{be.constructor===ae?q=be:function Es(ne){return Object.getPrototypeOf(ne.constructor)===Ge}(be)?O=be:H=be}),H||O||q||null}const hs={provide:mr,useExisting:(0,E.Gpc)(()=>Ni)},Qi=(()=>Promise.resolve())();let Ni=(()=>{class ne extends mr{constructor(q,O,H){super(),this.callSetDisabledState=H,this.submitted=!1,this._directives=new Set,this.ngSubmit=new E.vpe,this.form=new $t({},Nt(q),_n(O))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(q){Qi.then(()=>{const O=this._findContainer(q.path);q.control=O.registerControl(q.name,q.control),Te(q.control,q,this.callSetDisabledState),q.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(q)})}getControl(q){return this.form.get(q.path)}removeControl(q){Qi.then(()=>{const O=this._findContainer(q.path);O&&O.removeControl(q.name),this._directives.delete(q)})}addFormGroup(q){Qi.then(()=>{const O=this._findContainer(q.path),H=new $t({});Zi(H,q),O.registerControl(q.name,H),H.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(q){Qi.then(()=>{const O=this._findContainer(q.path);O&&O.removeControl(q.name)})}getFormGroup(q){return this.form.get(q.path)}updateModel(q,O){Qi.then(()=>{this.form.get(q.path).setValue(O)})}setValue(q){this.control.setValue(q)}onSubmit(q){return this.submitted=!0,Ss(this.form,this._directives),this.ngSubmit.emit(q),"dialog"===q?.target?.method}onReset(){this.resetForm()}resetForm(q){this.form.reset(q),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(q){return q.pop(),q.length?this.form.get(q):this.form}}return ne.\u0275fac=function(q){return new(q||ne)(E.Y36(nt,10),E.Y36(We,10),E.Y36(de,8))},ne.\u0275dir=E.lG2({type:ne,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(q,O){1&q&&E.NdJ("submit",function(be){return O.onSubmit(be)})("reset",function(){return O.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[E._Bn([hs]),E.qOj]}),ne})();function fs(ne,Z){const q=ne.indexOf(Z);q>-1&&ne.splice(q,1)}function Gr(ne){return"object"==typeof ne&&null!==ne&&2===Object.keys(ne).length&&"value"in ne&&"disabled"in ne}const qs=class extends ht{constructor(Z=null,q,O){super(yn(q),nr(O,q)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(Z),this._setUpdateStrategy(q),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Jr(q)&&(q.nonNullable||q.initialValueIsDefault)&&(this.defaultValue=Gr(Z)?Z.value:Z)}setValue(Z,q={}){this.value=this._pendingValue=Z,this._onChange.length&&!1!==q.emitModelToViewChange&&this._onChange.forEach(O=>O(this.value,!1!==q.emitViewToModelChange)),this.updateValueAndValidity(q)}patchValue(Z,q={}){this.setValue(Z,q)}reset(Z=this.defaultValue,q={}){this._applyFormState(Z),this.markAsPristine(q),this.markAsUntouched(q),this.setValue(this.value,q),this._pendingChange=!1}_updateValue(){}_anyControls(Z){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(Z){this._onChange.push(Z)}_unregisterOnChange(Z){fs(this._onChange,Z)}registerOnDisabledChange(Z){this._onDisabledChange.push(Z)}_unregisterOnDisabledChange(Z){fs(this._onDisabledChange,Z)}_forEachChild(Z){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(Z){Gr(Z)?(this.value=this._pendingValue=Z.value,Z.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=Z}},Zs={provide:qn,useExisting:(0,E.Gpc)(()=>Li)},jo=(()=>Promise.resolve())();let Li=(()=>{class ne extends qn{constructor(q,O,H,be,Ve,xe){super(),this._changeDetectorRef=Ve,this.callSetDisabledState=xe,this.control=new qs,this._registered=!1,this.update=new E.vpe,this._parent=q,this._setValidators(O),this._setAsyncValidators(H),this.valueAccessor=Pn(0,be)}ngOnChanges(q){if(this._checkForErrors(),!this._registered||"name"in q){if(this._registered&&(this._checkName(),this.formDirective)){const O=q.name.previousValue;this.formDirective.removeControl({name:O,path:this._getPath(O)})}this._setUpControl()}"isDisabled"in q&&this._updateDisabled(q),Ci(q,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(q){this.viewModel=q,this.update.emit(q)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){Te(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(q){jo.then(()=>{this.control.setValue(q,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(q){const O=q.isDisabled.currentValue,H=0!==O&&(0,E.D6c)(O);jo.then(()=>{H&&!this.control.disabled?this.control.disable():!H&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(q){return this._parent?function fe(ne,Z){return[...Z.path,ne]}(q,this._parent):[q]}}return ne.\u0275fac=function(q){return new(q||ne)(E.Y36(mr,9),E.Y36(nt,10),E.Y36(We,10),E.Y36(He,10),E.Y36(E.sBO,8),E.Y36(de,8))},ne.\u0275dir=E.lG2({type:ne,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[E._Bn([Zs]),E.qOj,E.TTD]}),ne})(),pt=(()=>{class ne{}return ne.\u0275fac=function(q){return new(q||ne)},ne.\u0275dir=E.lG2({type:ne,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),ne})(),Jn=(()=>{class ne{}return ne.\u0275fac=function(q){return new(q||ne)},ne.\u0275mod=E.oAB({type:ne}),ne.\u0275inj=E.cJS({}),ne})();const ss=new E.OlP("NgModelWithFormControlWarning"),os={provide:qn,useExisting:(0,E.Gpc)(()=>Pr)};let Pr=(()=>{class ne extends qn{set isDisabled(q){}constructor(q,O,H,be,Ve){super(),this._ngModelWarningConfig=be,this.callSetDisabledState=Ve,this.update=new E.vpe,this._ngModelWarningSent=!1,this._setValidators(q),this._setAsyncValidators(O),this.valueAccessor=Pn(0,H)}ngOnChanges(q){if(this._isControlChanged(q)){const O=q.form.previousValue;O&&ge(O,this,!1),Te(this.form,this,this.callSetDisabledState),this.form.updateValueAndValidity({emitEvent:!1})}Ci(q,this.viewModel)&&(this.form.setValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.form&&ge(this.form,this,!1)}get path(){return[]}get control(){return this.form}viewToModelUpdate(q){this.viewModel=q,this.update.emit(q)}_isControlChanged(q){return q.hasOwnProperty("form")}}return ne._ngModelWarningSentOnce=!1,ne.\u0275fac=function(q){return new(q||ne)(E.Y36(nt,10),E.Y36(We,10),E.Y36(He,10),E.Y36(ss,8),E.Y36(de,8))},ne.\u0275dir=E.lG2({type:ne,selectors:[["","formControl",""]],inputs:{form:["formControl","form"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},exportAs:["ngForm"],features:[E._Bn([os]),E.qOj,E.TTD]}),ne})();const Uo={provide:mr,useExisting:(0,E.Gpc)(()=>ks)};let ks=(()=>{class ne extends mr{constructor(q,O,H){super(),this.callSetDisabledState=H,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new E.vpe,this._setValidators(q),this._setAsyncValidators(O)}ngOnChanges(q){this._checkFormPresent(),q.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(Nn(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(q){const O=this.form.get(q.path);return Te(O,q,this.callSetDisabledState),O.updateValueAndValidity({emitEvent:!1}),this.directives.push(q),O}getControl(q){return this.form.get(q.path)}removeControl(q){ge(q.control||null,q,!1),function Sr(ne,Z){const q=ne.indexOf(Z);q>-1&&ne.splice(q,1)}(this.directives,q)}addFormGroup(q){this._setUpFormContainer(q)}removeFormGroup(q){this._cleanUpFormContainer(q)}getFormGroup(q){return this.form.get(q.path)}addFormArray(q){this._setUpFormContainer(q)}removeFormArray(q){this._cleanUpFormContainer(q)}getFormArray(q){return this.form.get(q.path)}updateModel(q,O){this.form.get(q.path).setValue(O)}onSubmit(q){return this.submitted=!0,Ss(this.form,this.directives),this.ngSubmit.emit(q),"dialog"===q?.target?.method}onReset(){this.resetForm()}resetForm(q){this.form.reset(q),this.submitted=!1}_updateDomValue(){this.directives.forEach(q=>{const O=q.control,H=this.form.get(q.path);O!==H&&(ge(O||null,q),(ne=>ne instanceof qs)(H)&&(Te(H,q,this.callSetDisabledState),q.control=H))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(q){const O=this.form.get(q.path);Zi(O,q),O.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(q){if(this.form){const O=this.form.get(q.path);O&&function Ms(ne,Z){return Nn(ne,Z)}(O,q)&&O.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){pn(this.form,this),this._oldForm&&Nn(this._oldForm,this)}_checkFormPresent(){}}return ne.\u0275fac=function(q){return new(q||ne)(E.Y36(nt,10),E.Y36(We,10),E.Y36(de,8))},ne.\u0275dir=E.lG2({type:ne,selectors:[["","formGroup",""]],hostBindings:function(q,O){1&q&&E.NdJ("submit",function(be){return O.onSubmit(be)})("reset",function(){return O.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[E._Bn([Uo]),E.qOj,E.TTD]}),ne})();const Aa={provide:He,useExisting:(0,E.Gpc)(()=>Js),multi:!0};function Pa(ne,Z){return null==ne?`${Z}`:(Z&&"object"==typeof Z&&(Z="Object"),`${ne}: ${Z}`.slice(0,50))}let Js=(()=>{class ne extends Ge{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(q){this._compareWith=q}writeValue(q){this.value=q;const H=Pa(this._getOptionId(q),q);this.setProperty("value",H)}registerOnChange(q){this.onChange=O=>{this.value=this._getOptionValue(O),q(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(q){for(const O of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(O),q))return O;return null}_getOptionValue(q){const O=function Ba(ne){return ne.split(":")[0]}(q);return this._optionMap.has(O)?this._optionMap.get(O):q}}return ne.\u0275fac=function(){let Z;return function(O){return(Z||(Z=E.n5z(ne)))(O||ne)}}(),ne.\u0275dir=E.lG2({type:ne,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(q,O){1&q&&E.NdJ("change",function(be){return O.onChange(be.target.value)})("blur",function(){return O.onTouched()})},inputs:{compareWith:"compareWith"},features:[E._Bn([Aa]),E.qOj]}),ne})(),eo=(()=>{class ne{constructor(q,O,H){this._element=q,this._renderer=O,this._select=H,this._select&&(this.id=this._select._registerOption())}set ngValue(q){null!=this._select&&(this._select._optionMap.set(this.id,q),this._setElementValue(Pa(this.id,q)),this._select.writeValue(this._select.value))}set value(q){this._setElementValue(q),this._select&&this._select.writeValue(this._select.value)}_setElementValue(q){this._renderer.setProperty(this._element.nativeElement,"value",q)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return ne.\u0275fac=function(q){return new(q||ne)(E.Y36(E.SBq),E.Y36(E.Qsj),E.Y36(Js,9))},ne.\u0275dir=E.lG2({type:ne,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),ne})();const to={provide:He,useExisting:(0,E.Gpc)(()=>Vs),multi:!0};function wl(ne,Z){return null==ne?`${Z}`:("string"==typeof Z&&(Z=`'${Z}'`),Z&&"object"==typeof Z&&(Z="Object"),`${ne}: ${Z}`.slice(0,50))}let Vs=(()=>{class ne extends Ge{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(q){this._compareWith=q}writeValue(q){let O;if(this.value=q,Array.isArray(q)){const H=q.map(be=>this._getOptionId(be));O=(be,Ve)=>{be._setSelected(H.indexOf(Ve.toString())>-1)}}else O=(H,be)=>{H._setSelected(!1)};this._optionMap.forEach(O)}registerOnChange(q){this.onChange=O=>{const H=[],be=O.selectedOptions;if(void 0!==be){const Ve=be;for(let xe=0;xe<Ve.length;xe++){const Jt=this._getOptionValue(Ve[xe].value);H.push(Jt)}}else{const Ve=O.options;for(let xe=0;xe<Ve.length;xe++){const wt=Ve[xe];if(wt.selected){const Jt=this._getOptionValue(wt.value);H.push(Jt)}}}this.value=H,q(H)}}_registerOption(q){const O=(this._idCounter++).toString();return this._optionMap.set(O,q),O}_getOptionId(q){for(const O of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(O)._value,q))return O;return null}_getOptionValue(q){const O=function Au(ne){return ne.split(":")[0]}(q);return this._optionMap.has(O)?this._optionMap.get(O)._value:q}}return ne.\u0275fac=function(){let Z;return function(O){return(Z||(Z=E.n5z(ne)))(O||ne)}}(),ne.\u0275dir=E.lG2({type:ne,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(q,O){1&q&&E.NdJ("change",function(be){return O.onChange(be.target)})("blur",function(){return O.onTouched()})},inputs:{compareWith:"compareWith"},features:[E._Bn([to]),E.qOj]}),ne})(),iu=(()=>{class ne{constructor(q,O,H){this._element=q,this._renderer=O,this._select=H,this._select&&(this.id=this._select._registerOption(this))}set ngValue(q){null!=this._select&&(this._value=q,this._setElementValue(wl(this.id,q)),this._select.writeValue(this._select.value))}set value(q){this._select?(this._value=q,this._setElementValue(wl(this.id,q)),this._select.writeValue(this._select.value)):this._setElementValue(q)}_setElementValue(q){this._renderer.setProperty(this._element.nativeElement,"value",q)}_setSelected(q){this._renderer.setProperty(this._element.nativeElement,"selected",q)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return ne.\u0275fac=function(q){return new(q||ne)(E.Y36(E.SBq),E.Y36(E.Qsj),E.Y36(Vs,9))},ne.\u0275dir=E.lG2({type:ne,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),ne})(),Po=(()=>{class ne{constructor(){this._validator=st}ngOnChanges(q){if(this.inputName in q){const O=this.normalizeInput(q[this.inputName].currentValue);this._enabled=this.enabled(O),this._validator=this._enabled?this.createValidator(O):st,this._onChange&&this._onChange()}}validate(q){return this._validator(q)}registerOnValidatorChange(q){this._onChange=q}enabled(q){return null!=q}}return ne.\u0275fac=function(q){return new(q||ne)},ne.\u0275dir=E.lG2({type:ne,features:[E.TTD]}),ne})();const ha={provide:nt,useExisting:(0,E.Gpc)(()=>ea),multi:!0};let ea=(()=>{class ne extends Po{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=E.D6c,this.createValidator=q=>Mt}enabled(q){return q}}return ne.\u0275fac=function(){let Z;return function(O){return(Z||(Z=E.n5z(ne)))(O||ne)}}(),ne.\u0275dir=E.lG2({type:ne,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(q,O){2&q&&E.uIk("required",O._enabled?"":null)},inputs:{required:"required"},features:[E._Bn([ha]),E.qOj]}),ne})();const Fi={provide:nt,useExisting:(0,E.Gpc)(()=>no),multi:!0};let no=(()=>{class ne extends Po{constructor(){super(...arguments),this.inputName="pattern",this.normalizeInput=q=>q,this.createValidator=q=>mt(q)}}return ne.\u0275fac=function(){let Z;return function(O){return(Z||(Z=E.n5z(ne)))(O||ne)}}(),ne.\u0275dir=E.lG2({type:ne,selectors:[["","pattern","","formControlName",""],["","pattern","","formControl",""],["","pattern","","ngModel",""]],hostVars:1,hostBindings:function(q,O){2&q&&E.uIk("pattern",O._enabled?O.pattern:null)},inputs:{pattern:"pattern"},features:[E._Bn([Fi]),E.qOj]}),ne})(),Ha=(()=>{class ne{}return ne.\u0275fac=function(q){return new(q||ne)},ne.\u0275mod=E.oAB({type:ne}),ne.\u0275inj=E.cJS({imports:[Jn]}),ne})(),Dr=(()=>{class ne{static withConfig(q){return{ngModule:ne,providers:[{provide:de,useValue:q.callSetDisabledState??we}]}}}return ne.\u0275fac=function(q){return new(q||ne)},ne.\u0275mod=E.oAB({type:ne}),ne.\u0275inj=E.cJS({imports:[Ha]}),ne})(),ra=(()=>{class ne{static withConfig(q){return{ngModule:ne,providers:[{provide:ss,useValue:q.warnOnNgModelWithFormControl??"always"},{provide:de,useValue:q.callSetDisabledState??we}]}}}return ne.\u0275fac=function(q){return new(q||ne)},ne.\u0275mod=E.oAB({type:ne}),ne.\u0275inj=E.cJS({imports:[Ha]}),ne})()},1481:(Qt,it,K)=>{"use strict";K.d(it,{Dx:()=>er,H7:()=>Xn,b2:()=>ci,q6:()=>fr});var E=K(6895),M=K(4650);class re extends E.w_{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class Oe extends re{static makeCurrent(){(0,E.HT)(new Oe)}onAndCancel(Te,ge,Ye){return Te.addEventListener(ge,Ye,!1),()=>{Te.removeEventListener(ge,Ye,!1)}}dispatchEvent(Te,ge){Te.dispatchEvent(ge)}remove(Te){Te.parentNode&&Te.parentNode.removeChild(Te)}createElement(Te,ge){return(ge=ge||this.getDefaultDocument()).createElement(Te)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(Te){return Te.nodeType===Node.ELEMENT_NODE}isShadowRoot(Te){return Te instanceof DocumentFragment}getGlobalEventTarget(Te,ge){return"window"===ge?window:"document"===ge?Te:"body"===ge?Te.body:null}getBaseHref(Te){const ge=function ke(){return De=De||document.querySelector("base"),De?De.getAttribute("href"):null}();return null==ge?null:function He(fe){Ge=Ge||document.createElement("a"),Ge.setAttribute("href",fe);const Te=Ge.pathname;return"/"===Te.charAt(0)?Te:`/${Te}`}(ge)}resetBaseElement(){De=null}getUserAgent(){return window.navigator.userAgent}getCookie(Te){return(0,E.Mx)(document.cookie,Te)}}let Ge,De=null;const Ke=new M.OlP("TRANSITION_ID"),Pe=[{provide:M.ip1,useFactory:function Ie(fe,Te,ge){return()=>{ge.get(M.CZH).donePromise.then(()=>{const Ye=(0,E.q)(),Ht=Te.querySelectorAll(`style[ng-transition="${fe}"]`);for(let pn=0;pn<Ht.length;pn++)Ye.remove(Ht[pn])})}},deps:[Ke,E.K0,M.zs3],multi:!0}];let yt=(()=>{class fe{build(){return new XMLHttpRequest}}return fe.\u0275fac=function(ge){return new(ge||fe)},fe.\u0275prov=M.Yz7({token:fe,factory:fe.\u0275fac}),fe})();const ae=new M.OlP("EventManagerPlugins");let Pt=(()=>{class fe{constructor(ge,Ye){this._zone=Ye,this._eventNameToPlugin=new Map,ge.forEach(Ht=>Ht.manager=this),this._plugins=ge.slice().reverse()}addEventListener(ge,Ye,Ht){return this._findPluginFor(Ye).addEventListener(ge,Ye,Ht)}addGlobalEventListener(ge,Ye,Ht){return this._findPluginFor(Ye).addGlobalEventListener(ge,Ye,Ht)}getZone(){return this._zone}_findPluginFor(ge){const Ye=this._eventNameToPlugin.get(ge);if(Ye)return Ye;const Ht=this._plugins;for(let pn=0;pn<Ht.length;pn++){const Nn=Ht[pn];if(Nn.supports(ge))return this._eventNameToPlugin.set(ge,Nn),Nn}throw new Error(`No event manager plugin found for event ${ge}`)}}return fe.\u0275fac=function(ge){return new(ge||fe)(M.LFG(ae),M.LFG(M.R0b))},fe.\u0275prov=M.Yz7({token:fe,factory:fe.\u0275fac}),fe})();class et{constructor(Te){this._doc=Te}addGlobalEventListener(Te,ge,Ye){const Ht=(0,E.q)().getGlobalEventTarget(this._doc,Te);if(!Ht)throw new Error(`Unsupported event target ${Ht} for event ${ge}`);return this.addEventListener(Ht,ge,Ye)}}let at=(()=>{class fe{constructor(){this.usageCount=new Map}addStyles(ge){for(const Ye of ge)1===this.changeUsageCount(Ye,1)&&this.onStyleAdded(Ye)}removeStyles(ge){for(const Ye of ge)0===this.changeUsageCount(Ye,-1)&&this.onStyleRemoved(Ye)}onStyleRemoved(ge){}onStyleAdded(ge){}getAllStyles(){return this.usageCount.keys()}changeUsageCount(ge,Ye){const Ht=this.usageCount;let pn=Ht.get(ge)??0;return pn+=Ye,pn>0?Ht.set(ge,pn):Ht.delete(ge),pn}ngOnDestroy(){for(const ge of this.getAllStyles())this.onStyleRemoved(ge);this.usageCount.clear()}}return fe.\u0275fac=function(ge){return new(ge||fe)},fe.\u0275prov=M.Yz7({token:fe,factory:fe.\u0275fac}),fe})(),nt=(()=>{class fe extends at{constructor(ge){super(),this.doc=ge,this.styleRef=new Map,this.hostNodes=new Set,this.resetHostNodes()}onStyleAdded(ge){for(const Ye of this.hostNodes)this.addStyleToHost(Ye,ge)}onStyleRemoved(ge){const Ye=this.styleRef;Ye.get(ge)?.forEach(pn=>pn.remove()),Ye.delete(ge)}ngOnDestroy(){super.ngOnDestroy(),this.styleRef.clear(),this.resetHostNodes()}addHost(ge){this.hostNodes.add(ge);for(const Ye of this.getAllStyles())this.addStyleToHost(ge,Ye)}removeHost(ge){this.hostNodes.delete(ge)}addStyleToHost(ge,Ye){const Ht=this.doc.createElement("style");Ht.textContent=Ye,ge.appendChild(Ht);const pn=this.styleRef.get(Ye);pn?pn.push(Ht):this.styleRef.set(Ye,[Ht])}resetHostNodes(){const ge=this.hostNodes;ge.clear(),ge.add(this.doc.head)}}return fe.\u0275fac=function(ge){return new(ge||fe)(M.LFG(E.K0))},fe.\u0275prov=M.Yz7({token:fe,factory:fe.\u0275fac}),fe})();const We={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},dt=/%COMP%/g,J=new M.OlP("RemoveStylesOnCompDestory",{providedIn:"root",factory:()=>!1});function mt(fe,Te){return Te.flat(100).map(ge=>ge.replace(dt,fe))}function st(fe){return Te=>{if("__ngUnwrap__"===Te)return fe;!1===fe(Te)&&(Te.preventDefault(),Te.returnValue=!1)}}let xt=(()=>{class fe{constructor(ge,Ye,Ht,pn){this.eventManager=ge,this.sharedStylesHost=Ye,this.appId=Ht,this.removeStylesOnCompDestory=pn,this.rendererByCompId=new Map,this.defaultRenderer=new Xe(ge)}createRenderer(ge,Ye){if(!ge||!Ye)return this.defaultRenderer;const Ht=this.getOrCreateRenderer(ge,Ye);return Ht instanceof Nt?Ht.applyToHost(ge):Ht instanceof gt&&Ht.applyStyles(),Ht}getOrCreateRenderer(ge,Ye){const Ht=this.rendererByCompId;let pn=Ht.get(Ye.id);if(!pn){const Nn=this.eventManager,jr=this.sharedStylesHost,Or=this.removeStylesOnCompDestory;switch(Ye.encapsulation){case M.ifc.Emulated:pn=new Nt(Nn,jr,Ye,this.appId,Or);break;case M.ifc.ShadowDom:return new lt(Nn,jr,ge,Ye);default:pn=new gt(Nn,jr,Ye,Or)}pn.onDestroy=()=>Ht.delete(Ye.id),Ht.set(Ye.id,pn)}return pn}ngOnDestroy(){this.rendererByCompId.clear()}begin(){}end(){}}return fe.\u0275fac=function(ge){return new(ge||fe)(M.LFG(Pt),M.LFG(nt),M.LFG(M.AFp),M.LFG(J))},fe.\u0275prov=M.Yz7({token:fe,factory:fe.\u0275fac}),fe})();class Xe{constructor(Te){this.eventManager=Te,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(Te,ge){return ge?document.createElementNS(We[ge]||ge,Te):document.createElement(Te)}createComment(Te){return document.createComment(Te)}createText(Te){return document.createTextNode(Te)}appendChild(Te,ge){(ot(Te)?Te.content:Te).appendChild(ge)}insertBefore(Te,ge,Ye){Te&&(ot(Te)?Te.content:Te).insertBefore(ge,Ye)}removeChild(Te,ge){Te&&Te.removeChild(ge)}selectRootElement(Te,ge){let Ye="string"==typeof Te?document.querySelector(Te):Te;if(!Ye)throw new Error(`The selector "${Te}" did not match any elements`);return ge||(Ye.textContent=""),Ye}parentNode(Te){return Te.parentNode}nextSibling(Te){return Te.nextSibling}setAttribute(Te,ge,Ye,Ht){if(Ht){ge=Ht+":"+ge;const pn=We[Ht];pn?Te.setAttributeNS(pn,ge,Ye):Te.setAttribute(ge,Ye)}else Te.setAttribute(ge,Ye)}removeAttribute(Te,ge,Ye){if(Ye){const Ht=We[Ye];Ht?Te.removeAttributeNS(Ht,ge):Te.removeAttribute(`${Ye}:${ge}`)}else Te.removeAttribute(ge)}addClass(Te,ge){Te.classList.add(ge)}removeClass(Te,ge){Te.classList.remove(ge)}setStyle(Te,ge,Ye,Ht){Ht&(M.JOm.DashCase|M.JOm.Important)?Te.style.setProperty(ge,Ye,Ht&M.JOm.Important?"important":""):Te.style[ge]=Ye}removeStyle(Te,ge,Ye){Ye&M.JOm.DashCase?Te.style.removeProperty(ge):Te.style[ge]=""}setProperty(Te,ge,Ye){Te[ge]=Ye}setValue(Te,ge){Te.nodeValue=ge}listen(Te,ge,Ye){return"string"==typeof Te?this.eventManager.addGlobalEventListener(Te,ge,st(Ye)):this.eventManager.addEventListener(Te,ge,st(Ye))}}function ot(fe){return"TEMPLATE"===fe.tagName&&void 0!==fe.content}class lt extends Xe{constructor(Te,ge,Ye,Ht){super(Te),this.sharedStylesHost=ge,this.hostEl=Ye,this.shadowRoot=Ye.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const pn=mt(Ht.id,Ht.styles);for(const Nn of pn){const jr=document.createElement("style");jr.textContent=Nn,this.shadowRoot.appendChild(jr)}}nodeOrShadowRoot(Te){return Te===this.hostEl?this.shadowRoot:Te}appendChild(Te,ge){return super.appendChild(this.nodeOrShadowRoot(Te),ge)}insertBefore(Te,ge,Ye){return super.insertBefore(this.nodeOrShadowRoot(Te),ge,Ye)}removeChild(Te,ge){return super.removeChild(this.nodeOrShadowRoot(Te),ge)}parentNode(Te){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(Te)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class gt extends Xe{constructor(Te,ge,Ye,Ht,pn=Ye.id){super(Te),this.sharedStylesHost=ge,this.removeStylesOnCompDestory=Ht,this.rendererUsageCount=0,this.styles=mt(pn,Ye.styles)}applyStyles(){this.sharedStylesHost.addStyles(this.styles),this.rendererUsageCount++}destroy(){this.removeStylesOnCompDestory&&(this.sharedStylesHost.removeStyles(this.styles),this.rendererUsageCount--,0===this.rendererUsageCount&&this.onDestroy?.())}}class Nt extends gt{constructor(Te,ge,Ye,Ht,pn){const Nn=Ht+"-"+Ye.id;super(Te,ge,Ye,pn,Nn),this.contentAttr=function he(fe){return"_ngcontent-%COMP%".replace(dt,fe)}(Nn),this.hostAttr=function Ne(fe){return"_nghost-%COMP%".replace(dt,fe)}(Nn)}applyToHost(Te){this.applyStyles(),this.setAttribute(Te,this.hostAttr,"")}createElement(Te,ge){const Ye=super.createElement(Te,ge);return super.setAttribute(Ye,this.contentAttr,""),Ye}}let jt=(()=>{class fe extends et{constructor(ge){super(ge)}supports(ge){return!0}addEventListener(ge,Ye,Ht){return ge.addEventListener(Ye,Ht,!1),()=>this.removeEventListener(ge,Ye,Ht)}removeEventListener(ge,Ye,Ht){return ge.removeEventListener(Ye,Ht)}}return fe.\u0275fac=function(ge){return new(ge||fe)(M.LFG(E.K0))},fe.\u0275prov=M.Yz7({token:fe,factory:fe.\u0275fac}),fe})();const _n=["alt","control","meta","shift"],Ot={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},rn={alt:fe=>fe.altKey,control:fe=>fe.ctrlKey,meta:fe=>fe.metaKey,shift:fe=>fe.shiftKey};let zt=(()=>{class fe extends et{constructor(ge){super(ge)}supports(ge){return null!=fe.parseEventName(ge)}addEventListener(ge,Ye,Ht){const pn=fe.parseEventName(Ye),Nn=fe.eventCallback(pn.fullKey,Ht,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>(0,E.q)().onAndCancel(ge,pn.domEventName,Nn))}static parseEventName(ge){const Ye=ge.toLowerCase().split("."),Ht=Ye.shift();if(0===Ye.length||"keydown"!==Ht&&"keyup"!==Ht)return null;const pn=fe._normalizeKey(Ye.pop());let Nn="",jr=Ye.indexOf("code");if(jr>-1&&(Ye.splice(jr,1),Nn="code."),_n.forEach(wi=>{const xr=Ye.indexOf(wi);xr>-1&&(Ye.splice(xr,1),Nn+=wi+".")}),Nn+=pn,0!=Ye.length||0===pn.length)return null;const Or={};return Or.domEventName=Ht,Or.fullKey=Nn,Or}static matchEventFullKeyCode(ge,Ye){let Ht=Ot[ge.key]||ge.key,pn="";return Ye.indexOf("code.")>-1&&(Ht=ge.code,pn="code."),!(null==Ht||!Ht)&&(Ht=Ht.toLowerCase()," "===Ht?Ht="space":"."===Ht&&(Ht="dot"),_n.forEach(Nn=>{Nn!==Ht&&(0,rn[Nn])(ge)&&(pn+=Nn+".")}),pn+=Ht,pn===Ye)}static eventCallback(ge,Ye,Ht){return pn=>{fe.matchEventFullKeyCode(pn,ge)&&Ht.runGuarded(()=>Ye(pn))}}static _normalizeKey(ge){return"esc"===ge?"escape":ge}}return fe.\u0275fac=function(ge){return new(ge||fe)(M.LFG(E.K0))},fe.\u0275prov=M.Yz7({token:fe,factory:fe.\u0275fac}),fe})();const fr=(0,M.eFA)(M._c5,"browser",[{provide:M.Lbi,useValue:E.bD},{provide:M.g9A,useValue:function mr(){Oe.makeCurrent()},multi:!0},{provide:E.K0,useFactory:function kr(){return(0,M.RDi)(document),document},deps:[]}]),Bn=new M.OlP(""),Ar=[{provide:M.rWj,useClass:class Re{addToWindow(Te){M.dqk.getAngularTestability=(Ye,Ht=!0)=>{const pn=Te.findTestabilityInTree(Ye,Ht);if(null==pn)throw new Error("Could not find testability for element.");return pn},M.dqk.getAllAngularTestabilities=()=>Te.getAllTestabilities(),M.dqk.getAllAngularRootElements=()=>Te.getAllRootElements(),M.dqk.frameworkStabilizers||(M.dqk.frameworkStabilizers=[]),M.dqk.frameworkStabilizers.push(Ye=>{const Ht=M.dqk.getAllAngularTestabilities();let pn=Ht.length,Nn=!1;const jr=function(Or){Nn=Nn||Or,pn--,0==pn&&Ye(Nn)};Ht.forEach(function(Or){Or.whenStable(jr)})})}findTestabilityInTree(Te,ge,Ye){return null==ge?null:Te.getTestability(ge)??(Ye?(0,E.q)().isShadowRoot(ge)?this.findTestabilityInTree(Te,ge.host,!0):this.findTestabilityInTree(Te,ge.parentElement,!0):null)}},deps:[]},{provide:M.lri,useClass:M.dDg,deps:[M.R0b,M.eoX,M.rWj]},{provide:M.dDg,useClass:M.dDg,deps:[M.R0b,M.eoX,M.rWj]}],Tn=[{provide:M.zSh,useValue:"root"},{provide:M.qLn,useFactory:function qn(){return new M.qLn},deps:[]},{provide:ae,useClass:jt,multi:!0,deps:[E.K0,M.R0b,M.Lbi]},{provide:ae,useClass:zt,multi:!0,deps:[E.K0]},{provide:xt,useClass:xt,deps:[Pt,nt,M.AFp,J]},{provide:M.FYo,useExisting:xt},{provide:at,useExisting:nt},{provide:nt,useClass:nt,deps:[E.K0]},{provide:Pt,useClass:Pt,deps:[ae,M.R0b]},{provide:E.JF,useClass:yt,deps:[]},[]];let ci=(()=>{class fe{constructor(ge){}static withServerTransition(ge){return{ngModule:fe,providers:[{provide:M.AFp,useValue:ge.appId},{provide:Ke,useExisting:M.AFp},Pe]}}}return fe.\u0275fac=function(ge){return new(ge||fe)(M.LFG(Bn,12))},fe.\u0275mod=M.oAB({type:fe}),fe.\u0275inj=M.cJS({providers:[...Tn,...Ar],imports:[E.ez,M.hGG]}),fe})(),er=(()=>{class fe{constructor(ge){this._doc=ge}getTitle(){return this._doc.title}setTitle(ge){this._doc.title=ge||""}}return fe.\u0275fac=function(ge){return new(ge||fe)(M.LFG(E.K0))},fe.\u0275prov=M.Yz7({token:fe,factory:function(ge){let Ye=null;return Ye=ge?new ge:function Ri(){return new er((0,M.LFG)(E.K0))}(),Ye},providedIn:"root"}),fe})();typeof window<"u"&&window;let Xn=(()=>{class fe{}return fe.\u0275fac=function(ge){return new(ge||fe)},fe.\u0275prov=M.Yz7({token:fe,factory:function(ge){let Ye=null;return Ye=ge?new(ge||fe):M.LFG(de),Ye},providedIn:"root"}),fe})(),de=(()=>{class fe extends Xn{constructor(ge){super(),this._doc=ge}sanitize(ge,Ye){if(null==Ye)return null;switch(ge){case M.q3G.NONE:return Ye;case M.q3G.HTML:return(0,M.qzn)(Ye,"HTML")?(0,M.z3N)(Ye):(0,M.EiD)(this._doc,String(Ye)).toString();case M.q3G.STYLE:return(0,M.qzn)(Ye,"Style")?(0,M.z3N)(Ye):Ye;case M.q3G.SCRIPT:if((0,M.qzn)(Ye,"Script"))return(0,M.z3N)(Ye);throw new Error("unsafe value used in a script context");case M.q3G.URL:return(0,M.qzn)(Ye,"URL")?(0,M.z3N)(Ye):(0,M.mCW)(String(Ye));case M.q3G.RESOURCE_URL:if((0,M.qzn)(Ye,"ResourceURL"))return(0,M.z3N)(Ye);throw new Error(`unsafe value used in a resource URL context (see ${M.JZr})`);default:throw new Error(`Unexpected SecurityContext ${ge} (see ${M.JZr})`)}}bypassSecurityTrustHtml(ge){return(0,M.JVY)(ge)}bypassSecurityTrustStyle(ge){return(0,M.L6k)(ge)}bypassSecurityTrustScript(ge){return(0,M.eBb)(ge)}bypassSecurityTrustUrl(ge){return(0,M.LAX)(ge)}bypassSecurityTrustResourceUrl(ge){return(0,M.pB0)(ge)}}return fe.\u0275fac=function(ge){return new(ge||fe)(M.LFG(E.K0))},fe.\u0275prov=M.Yz7({token:fe,factory:function(ge){let Ye=null;return Ye=ge?new ge:function oi(fe){return new de(fe.get(E.K0))}(M.LFG(M.zs3)),Ye},providedIn:"root"}),fe})()},9062:(Qt,it,K)=>{"use strict";K.d(it,{gz:()=>Do,m2:()=>Xs,F0:()=>Oo,rH:()=>ur,Od:()=>Wu,Bz:()=>$i,lC:()=>hi});var E=K(4650),M=K(8996),re=K(9646),Oe=K(1135),De=K(6805),ke=K(9841),Ge=K(7272),He=K(9751),Ke=K(8421);function Ie(P){return new He.y(R=>{(0,Ke.Xf)(P()).subscribe(R)})}var Pe=K(9635),Re=K(576);function yt(P,R){const C=(0,Re.m)(P)?P:()=>P,B=Q=>Q.error(C());return new He.y(R?Q=>R.schedule(B,0,Q):B)}var ae=K(515),Pt=K(727),et=K(4482),at=K(5403);function nt(){return(0,et.e)((P,R)=>{let C=null;P._refCount++;const B=(0,at.x)(R,void 0,void 0,void 0,()=>{if(!P||P._refCount<=0||0<--P._refCount)return void(C=null);const Q=P._connection,pe=C;C=null,Q&&(!pe||Q===pe)&&Q.unsubscribe(),R.unsubscribe()});P.subscribe(B),B.closed||(C=P.connect())})}class We extends He.y{constructor(R,C){super(),this.source=R,this.subjectFactory=C,this._subject=null,this._refCount=0,this._connection=null,(0,et.A)(R)&&(this.lift=R.lift)}_subscribe(R){return this.getSubject().subscribe(R)}getSubject(){const R=this._subject;return(!R||R.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:R}=this;this._subject=this._connection=null,R?.unsubscribe()}connect(){let R=this._connection;if(!R){R=this._connection=new Pt.w0;const C=this.getSubject();R.add(this.source.subscribe((0,at.x)(C,void 0,()=>{this._teardown(),C.complete()},B=>{this._teardown(),C.error(B)},()=>this._teardown()))),R.closed&&(this._connection=null,R=Pt.w0.EMPTY)}return R}refCount(){return nt()(this)}}var dt=K(7579),Fe=K(6895),Me=K(4004),Et=K(3900),Mt=K(5698),St=K(8675),J=K(9300),he=K(5577),Ne=K(590);function mt(P,R){return(0,Re.m)(R)?(0,he.z)(P,R,1):(0,he.z)(P,1)}var st=K(8505);function xt(P){return(0,et.e)((R,C)=>{let pe,B=null,Q=!1;B=R.subscribe((0,at.x)(C,void 0,void 0,ve=>{pe=(0,Ke.Xf)(P(ve,xt(P)(R))),B?(B.unsubscribe(),B=null,pe.subscribe(C)):Q=!0})),Q&&(B.unsubscribe(),B=null,pe.subscribe(C))})}var Xe=K(5026);function ut(P){return P<=0?()=>ae.E:(0,et.e)((R,C)=>{let B=[];R.subscribe((0,at.x)(C,Q=>{B.push(Q),P<B.length&&B.shift()},()=>{for(const Q of B)C.next(Q);C.complete()},void 0,()=>{B=null}))})}var Je=K(8068),ot=K(6590),lt=K(4671);function gt(P,R){const C=arguments.length>=2;return B=>B.pipe(P?(0,J.h)((Q,pe)=>P(Q,pe,B)):lt.y,ut(1),C?(0,ot.d)(R):(0,Je.T)(()=>new De.K))}var jt=K(9718);function _n(P){return(0,et.e)((R,C)=>{try{R.subscribe(C)}finally{C.add(P)}})}var Ot=K(8189),rn=K(1481);const zt="primary",bn=Symbol("RouteTitle");class dr{constructor(R){this.params=R||{}}has(R){return Object.prototype.hasOwnProperty.call(this.params,R)}get(R){if(this.has(R)){const C=this.params[R];return Array.isArray(C)?C[0]:C}return null}getAll(R){if(this.has(R)){const C=this.params[R];return Array.isArray(C)?C:[C]}return[]}get keys(){return Object.keys(this.params)}}function Hn(P){return new dr(P)}function Zn(P,R,C){const B=C.path.split("/");if(B.length>P.length||"full"===C.pathMatch&&(R.hasChildren()||B.length<P.length))return null;const Q={};for(let pe=0;pe<B.length;pe++){const ve=B[pe],_t=P[pe];if(ve.startsWith(":"))Q[ve.substring(1)]=_t;else if(ve!==_t.path)return null}return{consumed:P.slice(0,B.length),posParams:Q}}function mr(P,R){const C=P?Object.keys(P):void 0,B=R?Object.keys(R):void 0;if(!C||!B||C.length!=B.length)return!1;let Q;for(let pe=0;pe<C.length;pe++)if(Q=C[pe],!qn(P[Q],R[Q]))return!1;return!0}function qn(P,R){if(Array.isArray(P)&&Array.isArray(R)){if(P.length!==R.length)return!1;const C=[...P].sort(),B=[...R].sort();return C.every((Q,pe)=>B[pe]===Q)}return P===R}function kr(P){return Array.prototype.concat.apply([],P)}function ii(P){return P.length>0?P[P.length-1]:null}function Bn(P,R){for(const C in P)P.hasOwnProperty(C)&&R(P[C],C)}function Ar(P){return(0,E.CqO)(P)?P:(0,E.QGY)(P)?(0,M.D)(Promise.resolve(P)):(0,re.of)(P)}const Tn=!1,ci={exact:function Ri(P,R,C){if(!Ki(P.segments,R.segments)||!Us(P.segments,R.segments,C)||P.numberOfChildren!==R.numberOfChildren)return!1;for(const B in R.children)if(!P.children[B]||!Ri(P.children[B],R.children[B],C))return!1;return!0},subset:Wn},Hr={exact:function gi(P,R){return mr(P,R)},subset:function er(P,R){return Object.keys(R).length<=Object.keys(P).length&&Object.keys(R).every(C=>qn(P[C],R[C]))},ignored:()=>!0};function pr(P,R,C){return ci[C.paths](P.root,R.root,C.matrixParams)&&Hr[C.queryParams](P.queryParams,R.queryParams)&&!("exact"===C.fragment&&P.fragment!==R.fragment)}function Wn(P,R,C){return or(P,R,R.segments,C)}function or(P,R,C,B){if(P.segments.length>C.length){const Q=P.segments.slice(0,C.length);return!(!Ki(Q,C)||R.hasChildren()||!Us(Q,C,B))}if(P.segments.length===C.length){if(!Ki(P.segments,C)||!Us(P.segments,C,B))return!1;for(const Q in R.children)if(!P.children[Q]||!Wn(P.children[Q],R.children[Q],B))return!1;return!0}{const Q=C.slice(0,P.segments.length),pe=C.slice(P.segments.length);return!!(Ki(P.segments,Q)&&Us(P.segments,Q,B)&&P.children[zt])&&or(P.children[zt],R,pe,B)}}function Us(P,R,C){return R.every((B,Q)=>Hr[C](P[Q].parameters,B.parameters))}class Lr{constructor(R=new Qn([],{}),C={},B=null){this.root=R,this.queryParams=C,this.fragment=B}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Hn(this.queryParams)),this._queryParamMap}toString(){return di.serialize(this)}}class Qn{constructor(R,C){this.segments=R,this.children=C,this.parent=null,Bn(C,(B,Q)=>B.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return kn(this)}}class ti{constructor(R,C){this.path=R,this.parameters=C}get parameterMap(){return this._parameterMap||(this._parameterMap=Hn(this.parameters)),this._parameterMap}toString(){return tt(this)}}function Ki(P,R){return P.length===R.length&&P.every((C,B)=>C.path===R[B].path)}let Rr=(()=>{class P{}return P.\u0275fac=function(C){return new(C||P)},P.\u0275prov=E.Yz7({token:P,factory:function(){return new Ir},providedIn:"root"}),P})();class Ir{parse(R){const C=new we(R);return new Lr(C.parseRootSegment(),C.parseQueryParams(),C.parseFragment())}serialize(R){const C=`/${mn(R.root,!0)}`,B=function ht(P){const R=Object.keys(P).map(C=>{const B=P[C];return Array.isArray(B)?B.map(Q=>`${yn(C)}=${yn(Q)}`).join("&"):`${yn(C)}=${yn(B)}`}).filter(C=>!!C);return R.length?`?${R.join("&")}`:""}(R.queryParams);return`${C}${B}${"string"==typeof R.fragment?`#${function tr(P){return encodeURI(P)}(R.fragment)}`:""}`}}const di=new Ir;function kn(P){return P.segments.map(R=>tt(R)).join("/")}function mn(P,R){if(!P.hasChildren())return kn(P);if(R){const C=P.children[zt]?mn(P.children[zt],!1):"",B=[];return Bn(P.children,(Q,pe)=>{pe!==zt&&B.push(`${pe}:${mn(Q,!1)}`)}),B.length>0?`${C}(${B.join("//")})`:C}{const C=function Fr(P,R){let C=[];return Bn(P.children,(B,Q)=>{Q===zt&&(C=C.concat(R(B,Q)))}),Bn(P.children,(B,Q)=>{Q!==zt&&(C=C.concat(R(B,Q)))}),C}(P,(B,Q)=>Q===zt?[mn(P.children[zt],!1)]:[`${Q}:${mn(B,!1)}`]);return 1===Object.keys(P.children).length&&null!=P.children[zt]?`${kn(P)}/${C[0]}`:`${kn(P)}/(${C.join("//")})`}}function Xt(P){return encodeURIComponent(P).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function yn(P){return Xt(P).replace(/%3B/gi,";")}function nr(P){return Xt(P).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function vr(P){return decodeURIComponent(P)}function Jr(P){return vr(P.replace(/\+/g,"%20"))}function tt(P){return`${nr(P.path)}${function Ze(P){return Object.keys(P).map(R=>`;${nr(R)}=${nr(P[R])}`).join("")}(P.parameters)}`}const $t=/^[^\/()?;=#]+/;function Rt(P){const R=P.match($t);return R?R[0]:""}const fn=/^[^=?&#]+/,oi=/^[^&#]+/;class we{constructor(R){this.url=R,this.remaining=R}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Qn([],{}):new Qn([],this.parseChildren())}parseQueryParams(){const R={};if(this.consumeOptional("?"))do{this.parseQueryParam(R)}while(this.consumeOptional("&"));return R}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const R=[];for(this.peekStartsWith("(")||R.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),R.push(this.parseSegment());let C={};this.peekStartsWith("/(")&&(this.capture("/"),C=this.parseParens(!0));let B={};return this.peekStartsWith("(")&&(B=this.parseParens(!1)),(R.length>0||Object.keys(C).length>0)&&(B[zt]=new Qn(R,C)),B}parseSegment(){const R=Rt(this.remaining);if(""===R&&this.peekStartsWith(";"))throw new E.vHH(4009,Tn);return this.capture(R),new ti(vr(R),this.parseMatrixParams())}parseMatrixParams(){const R={};for(;this.consumeOptional(";");)this.parseParam(R);return R}parseParam(R){const C=Rt(this.remaining);if(!C)return;this.capture(C);let B="";if(this.consumeOptional("=")){const Q=Rt(this.remaining);Q&&(B=Q,this.capture(B))}R[vr(C)]=vr(B)}parseQueryParam(R){const C=function Xn(P){const R=P.match(fn);return R?R[0]:""}(this.remaining);if(!C)return;this.capture(C);let B="";if(this.consumeOptional("=")){const ve=function de(P){const R=P.match(oi);return R?R[0]:""}(this.remaining);ve&&(B=ve,this.capture(B))}const Q=Jr(C),pe=Jr(B);if(R.hasOwnProperty(Q)){let ve=R[Q];Array.isArray(ve)||(ve=[ve],R[Q]=ve),ve.push(pe)}else R[Q]=pe}parseParens(R){const C={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const B=Rt(this.remaining),Q=this.remaining[B.length];if("/"!==Q&&")"!==Q&&";"!==Q)throw new E.vHH(4010,Tn);let pe;B.indexOf(":")>-1?(pe=B.slice(0,B.indexOf(":")),this.capture(pe),this.capture(":")):R&&(pe=zt);const ve=this.parseChildren();C[pe]=1===Object.keys(ve).length?ve[zt]:new Qn([],ve),this.consumeOptional("//")}return C}peekStartsWith(R){return this.remaining.startsWith(R)}consumeOptional(R){return!!this.peekStartsWith(R)&&(this.remaining=this.remaining.substring(R.length),!0)}capture(R){if(!this.consumeOptional(R))throw new E.vHH(4011,Tn)}}function fe(P){return P.segments.length>0?new Qn([],{[zt]:P}):P}function Te(P){const R={};for(const B of Object.keys(P.children)){const pe=Te(P.children[B]);(pe.segments.length>0||pe.hasChildren())&&(R[B]=pe)}return function ge(P){if(1===P.numberOfChildren&&P.children[zt]){const R=P.children[zt];return new Qn(P.segments.concat(R.segments),R.children)}return P}(new Qn(P.segments,R))}function Ye(P){return P instanceof Lr}const Ht=!1;function Or(P,R,C,B,Q){if(0===C.length)return Zi(R.root,R.root,R.root,B,Q);const pe=function vs(P){if("string"==typeof P[0]&&1===P.length&&"/"===P[0])return new is(!0,0,P);let R=0,C=!1;const B=P.reduce((Q,pe,ve)=>{if("object"==typeof pe&&null!=pe){if(pe.outlets){const _t={};return Bn(pe.outlets,(Wt,zn)=>{_t[zn]="string"==typeof Wt?Wt.split("/"):Wt}),[...Q,{outlets:_t}]}if(pe.segmentPath)return[...Q,pe.segmentPath]}return"string"!=typeof pe?[...Q,pe]:0===ve?(pe.split("/").forEach((_t,Wt)=>{0==Wt&&"."===_t||(0==Wt&&""===_t?C=!0:".."===_t?R++:""!=_t&&Q.push(_t))}),Q):[...Q,pe]},[]);return new is(C,R,B)}(C);return pe.toRoot()?Zi(R.root,R.root,new Qn([],{}),B,Q):function ve(Wt){const zn=function _i(P,R,C,B){if(P.isAbsolute)return new rr(R.root,!0,0);if(-1===B)return new rr(C,C===R.root,0);return function Ci(P,R,C){let B=P,Q=R,pe=C;for(;pe>Q;){if(pe-=Q,B=B.parent,!B)throw new E.vHH(4005,Ht&&"Invalid number of '../'");Q=B.segments.length}return new rr(B,!1,Q-pe)}(C,B+(wi(P.commands[0])?0:1),P.numberOfDoubleDots)}(pe,R,P.snapshot?._urlSegment,Wt),jn=zn.processChildren?Pn(zn.segmentGroup,zn.index,pe.commands):Ss(zn.segmentGroup,zn.index,pe.commands);return Zi(R.root,zn.segmentGroup,jn,B,Q)}(P.snapshot?._lastPathIndex)}function wi(P){return"object"==typeof P&&null!=P&&!P.outlets&&!P.segmentPath}function xr(P){return"object"==typeof P&&null!=P&&P.outlets}function Zi(P,R,C,B,Q){let ve,pe={};B&&Bn(B,(Wt,zn)=>{pe[zn]=Array.isArray(Wt)?Wt.map(jn=>`${jn}`):`${Wt}`}),ve=P===R?C:Ms(P,R,C);const _t=fe(Te(ve));return new Lr(_t,pe,Q)}function Ms(P,R,C){const B={};return Bn(P.children,(Q,pe)=>{B[pe]=Q===R?C:Ms(Q,R,C)}),new Qn(P.segments,B)}class is{constructor(R,C,B){if(this.isAbsolute=R,this.numberOfDoubleDots=C,this.commands=B,R&&B.length>0&&wi(B[0]))throw new E.vHH(4003,Ht&&"Root segment cannot have matrix parameters");const Q=B.find(xr);if(Q&&Q!==ii(B))throw new E.vHH(4004,Ht&&"{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class rr{constructor(R,C,B){this.segmentGroup=R,this.processChildren=C,this.index=B}}function Ss(P,R,C){if(P||(P=new Qn([],{})),0===P.segments.length&&P.hasChildren())return Pn(P,R,C);const B=function Sr(P,R,C){let B=0,Q=R;const pe={match:!1,pathIndex:0,commandIndex:0};for(;Q<P.segments.length;){if(B>=C.length)return pe;const ve=P.segments[Q],_t=C[B];if(xr(_t))break;const Wt=`${_t}`,zn=B<C.length-1?C[B+1]:null;if(Q>0&&void 0===Wt)break;if(Wt&&zn&&"object"==typeof zn&&void 0===zn.outlets){if(!Ni(Wt,zn,ve))return pe;B+=2}else{if(!Ni(Wt,{},ve))return pe;B++}Q++}return{match:!0,pathIndex:Q,commandIndex:B}}(P,R,C),Q=C.slice(B.commandIndex);if(B.match&&B.pathIndex<P.segments.length){const pe=new Qn(P.segments.slice(0,B.pathIndex),{});return pe.children[zt]=new Qn(P.segments.slice(B.pathIndex),P.children),Pn(pe,0,Q)}return B.match&&0===Q.length?new Qn(P.segments,{}):B.match&&!P.hasChildren()?Ei(P,R,C):B.match?Pn(P,0,Q):Ei(P,R,C)}function Pn(P,R,C){if(0===C.length)return new Qn(P.segments,{});{const B=function Es(P){return xr(P[0])?P[0].outlets:{[zt]:P}}(C),Q={};return!B[zt]&&P.children[zt]&&1===P.numberOfChildren&&0===P.children[zt].segments.length?Pn(P.children[zt],R,C):(Bn(B,(pe,ve)=>{"string"==typeof pe&&(pe=[pe]),null!==pe&&(Q[ve]=Ss(P.children[ve],R,pe))}),Bn(P.children,(pe,ve)=>{void 0===B[ve]&&(Q[ve]=pe)}),new Qn(P.segments,Q))}}function Ei(P,R,C){const B=P.segments.slice(0,R);let Q=0;for(;Q<C.length;){const pe=C[Q];if(xr(pe)){const Wt=hs(pe.outlets);return new Qn(B,Wt)}if(0===Q&&wi(C[0])){B.push(new ti(P.segments[R].path,Qi(C[0]))),Q++;continue}const ve=xr(pe)?pe.outlets[zt]:`${pe}`,_t=Q<C.length-1?C[Q+1]:null;ve&&_t&&wi(_t)?(B.push(new ti(ve,Qi(_t))),Q+=2):(B.push(new ti(ve,{})),Q++)}return new Qn(B,{})}function hs(P){const R={};return Bn(P,(C,B)=>{"string"==typeof C&&(C=[C]),null!==C&&(R[B]=Ei(new Qn([],{}),0,C))}),R}function Qi(P){const R={};return Bn(P,(C,B)=>R[B]=`${C}`),R}function Ni(P,R,C){return P==C.path&&mr(R,C.parameters)}const fs="imperative";class Gr{constructor(R,C){this.id=R,this.url=C}}class qs extends Gr{constructor(R,C,B="imperative",Q=null){super(R,C),this.type=0,this.navigationTrigger=B,this.restoredState=Q}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Xs extends Gr{constructor(R,C,B){super(R,C),this.urlAfterRedirects=B,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class ar extends Gr{constructor(R,C,B,Q){super(R,C),this.reason=B,this.code=Q,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Ks extends Gr{constructor(R,C,B,Q){super(R,C),this.reason=B,this.code=Q,this.type=16}}class Fo extends Gr{constructor(R,C,B,Q){super(R,C),this.error=B,this.target=Q,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class la extends Gr{constructor(R,C,B,Q){super(R,C),this.urlAfterRedirects=B,this.state=Q,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Os extends Gr{constructor(R,C,B,Q){super(R,C),this.urlAfterRedirects=B,this.state=Q,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Bs extends Gr{constructor(R,C,B,Q,pe){super(R,C),this.urlAfterRedirects=B,this.state=Q,this.shouldActivate=pe,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class Ko extends Gr{constructor(R,C,B,Q){super(R,C),this.urlAfterRedirects=B,this.state=Q,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class ys extends Gr{constructor(R,C,B,Q){super(R,C),this.urlAfterRedirects=B,this.state=Q,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Zs{constructor(R){this.route=R,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class jo{constructor(R){this.route=R,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class Li{constructor(R){this.snapshot=R,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class pt{constructor(R){this.snapshot=R,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class ft{constructor(R){this.snapshot=R,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Ct{constructor(R){this.snapshot=R,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class sn{constructor(R,C,B){this.routerEvent=R,this.position=C,this.anchor=B,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}let Tr=(()=>{class P{createUrlTree(C,B,Q,pe,ve,_t){return Or(C||B.root,Q,pe,ve,_t)}}return P.\u0275fac=function(C){return new(C||P)},P.\u0275prov=E.Yz7({token:P,factory:P.\u0275fac}),P})(),mi=(()=>{class P{}return P.\u0275fac=function(C){return new(C||P)},P.\u0275prov=E.Yz7({token:P,factory:function(R){return Tr.\u0275fac(R)},providedIn:"root"}),P})();class Xi{constructor(R){this._root=R}get root(){return this._root.value}parent(R){const C=this.pathFromRoot(R);return C.length>1?C[C.length-2]:null}children(R){const C=ss(R,this._root);return C?C.children.map(B=>B.value):[]}firstChild(R){const C=ss(R,this._root);return C&&C.children.length>0?C.children[0].value:null}siblings(R){const C=os(R,this._root);return C.length<2?[]:C[C.length-2].children.map(Q=>Q.value).filter(Q=>Q!==R)}pathFromRoot(R){return os(R,this._root).map(C=>C.value)}}function ss(P,R){if(P===R.value)return R;for(const C of R.children){const B=ss(P,C);if(B)return B}return null}function os(P,R){if(P===R.value)return[R];for(const C of R.children){const B=os(P,C);if(B.length)return B.unshift(R),B}return[]}class Pr{constructor(R,C){this.value=R,this.children=C}toString(){return`TreeNode(${this.value})`}}function Uo(P){const R={};return P&&P.children.forEach(C=>R[C.value.outlet]=C),R}class ks extends Xi{constructor(R,C){super(R),this.snapshot=C,Aa(this,R)}toString(){return this.snapshot.toString()}}function vo(P,R){const C=function Da(P,R){const ve=new Ao([],{},{},"",{},zt,R,null,P.root,-1,{});return new ca("",new Pr(ve,[]))}(P,R),B=new Oe.X([new ti("",{})]),Q=new Oe.X({}),pe=new Oe.X({}),ve=new Oe.X({}),_t=new Oe.X(""),Wt=new Do(B,Q,ve,_t,pe,zt,R,C.root);return Wt.snapshot=C.root,new ks(new Pr(Wt,[]),C)}class Do{constructor(R,C,B,Q,pe,ve,_t,Wt){this.url=R,this.params=C,this.queryParams=B,this.fragment=Q,this.data=pe,this.outlet=ve,this.component=_t,this.title=this.data?.pipe((0,Me.U)(zn=>zn[bn]))??(0,re.of)(void 0),this._futureSnapshot=Wt}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,Me.U)(R=>Hn(R)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,Me.U)(R=>Hn(R)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function Di(P,R="emptyOnly"){const C=P.pathFromRoot;let B=0;if("always"!==R)for(B=C.length-1;B>=1;){const Q=C[B],pe=C[B-1];if(Q.routeConfig&&""===Q.routeConfig.path)B--;else{if(pe.component)break;B--}}return function Jo(P){return P.reduce((R,C)=>({params:{...R.params,...C.params},data:{...R.data,...C.data},resolve:{...C.data,...R.resolve,...C.routeConfig?.data,...C._resolvedData}}),{params:{},data:{},resolve:{}})}(C.slice(B))}class Ao{get title(){return this.data?.[bn]}constructor(R,C,B,Q,pe,ve,_t,Wt,zn,jn,ui){this.url=R,this.params=C,this.queryParams=B,this.fragment=Q,this.data=pe,this.outlet=ve,this.component=_t,this.routeConfig=Wt,this._urlSegment=zn,this._lastPathIndex=jn,this._resolve=ui}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Hn(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Hn(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(B=>B.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class ca extends Xi{constructor(R,C){super(C),this.url=R,Aa(this,C)}toString(){return Pa(this._root)}}function Aa(P,R){R.value._routerState=P,R.children.forEach(C=>Aa(P,C))}function Pa(P){const R=P.children.length>0?` { ${P.children.map(Pa).join(", ")} } `:"";return`${P.value}${R}`}function Ba(P){if(P.snapshot){const R=P.snapshot,C=P._futureSnapshot;P.snapshot=C,mr(R.queryParams,C.queryParams)||P.queryParams.next(C.queryParams),R.fragment!==C.fragment&&P.fragment.next(C.fragment),mr(R.params,C.params)||P.params.next(C.params),function Vr(P,R){if(P.length!==R.length)return!1;for(let C=0;C<P.length;++C)if(!mr(P[C],R[C]))return!1;return!0}(R.url,C.url)||P.url.next(C.url),mr(R.data,C.data)||P.data.next(C.data)}else P.snapshot=P._futureSnapshot,P.data.next(P._futureSnapshot.data)}function Js(P,R){const C=mr(P.params,R.params)&&function Vi(P,R){return Ki(P,R)&&P.every((C,B)=>mr(C.parameters,R[B].parameters))}(P.url,R.url);return C&&!(!P.parent!=!R.parent)&&(!P.parent||Js(P.parent,R.parent))}function to(P,R,C){if(C&&P.shouldReuseRoute(R.value,C.value.snapshot)){const B=C.value;B._futureSnapshot=R.value;const Q=function wl(P,R,C){return R.children.map(B=>{for(const Q of C.children)if(P.shouldReuseRoute(B.value,Q.value.snapshot))return to(P,B,Q);return to(P,B)})}(P,R,C);return new Pr(B,Q)}{if(P.shouldAttach(R.value)){const pe=P.retrieve(R.value);if(null!==pe){const ve=pe.route;return ve.value._futureSnapshot=R.value,ve.children=R.children.map(_t=>to(P,_t)),ve}}const B=function Au(P){return new Do(new Oe.X(P.url),new Oe.X(P.params),new Oe.X(P.queryParams),new Oe.X(P.fragment),new Oe.X(P.data),P.outlet,P.component,P)}(R.value),Q=R.children.map(pe=>to(P,pe));return new Pr(B,Q)}}const ru="ngNavigationCancelingError";function Vs(P,R){const{redirectTo:C,navigationBehaviorOptions:B}=Ye(R)?{redirectTo:R,navigationBehaviorOptions:void 0}:R,Q=iu(!1,0,R);return Q.url=C,Q.navigationBehaviorOptions=B,Q}function iu(P,R,C){const B=new Error("NavigationCancelingError: "+(P||""));return B[ru]=!0,B.cancellationCode=R,C&&(B.url=C),B}function Zo(P){return Bo(P)&&Ye(P.url)}function Bo(P){return P&&P[ru]}class Po{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.injector=null,this.children=new uo,this.attachRef=null}}let uo=(()=>{class P{constructor(){this.contexts=new Map}onChildOutletCreated(C,B){const Q=this.getOrCreateContext(C);Q.outlet=B,this.contexts.set(C,Q)}onChildOutletDestroyed(C){const B=this.getContext(C);B&&(B.outlet=null,B.attachRef=null)}onOutletDeactivated(){const C=this.contexts;return this.contexts=new Map,C}onOutletReAttached(C){this.contexts=C}getOrCreateContext(C){let B=this.getContext(C);return B||(B=new Po,this.contexts.set(C,B)),B}getContext(C){return this.contexts.get(C)||null}}return P.\u0275fac=function(C){return new(C||P)},P.\u0275prov=E.Yz7({token:P,factory:P.\u0275fac,providedIn:"root"}),P})();const yo=!1;let hi=(()=>{class P{constructor(){this.activated=null,this._activatedRoute=null,this.name=zt,this.activateEvents=new E.vpe,this.deactivateEvents=new E.vpe,this.attachEvents=new E.vpe,this.detachEvents=new E.vpe,this.parentContexts=(0,E.f3M)(uo),this.location=(0,E.f3M)(E.s_b),this.changeDetector=(0,E.f3M)(E.sBO),this.environmentInjector=(0,E.f3M)(E.lqb)}ngOnChanges(C){if(C.name){const{firstChange:B,previousValue:Q}=C.name;if(B)return;this.isTrackedInParentContexts(Q)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(Q)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name)}isTrackedInParentContexts(C){return this.parentContexts.getContext(C)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const C=this.parentContexts.getContext(this.name);C?.route&&(C.attachRef?this.attach(C.attachRef,C.route):this.activateWith(C.route,C.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new E.vHH(4012,yo);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new E.vHH(4012,yo);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new E.vHH(4012,yo);this.location.detach();const C=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(C.instance),C}attach(C,B){this.activated=C,this._activatedRoute=B,this.location.insert(C.hostView),this.attachEvents.emit(C.instance)}deactivate(){if(this.activated){const C=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(C)}}activateWith(C,B){if(this.isActivated)throw new E.vHH(4013,yo);this._activatedRoute=C;const Q=this.location,ve=C.snapshot.component,_t=this.parentContexts.getOrCreateContext(this.name).children,Wt=new da(C,_t,Q.injector);if(B&&function ha(P){return!!P.resolveComponentFactory}(B)){const zn=B.resolveComponentFactory(ve);this.activated=Q.createComponent(zn,Q.length,Wt)}else this.activated=Q.createComponent(ve,{index:Q.length,injector:Wt,environmentInjector:B??this.environmentInjector});this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return P.\u0275fac=function(C){return new(C||P)},P.\u0275dir=E.lG2({type:P,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[E.TTD]}),P})();class da{constructor(R,C,B){this.route=R,this.childContexts=C,this.parent=B}get(R,C){return R===Do?this.route:R===uo?this.childContexts:this.parent.get(R,C)}}let Yo=(()=>{class P{}return P.\u0275fac=function(C){return new(C||P)},P.\u0275cmp=E.Xpm({type:P,selectors:[["ng-component"]],standalone:!0,features:[E.jDz],decls:1,vars:0,template:function(C,B){1&C&&E._UZ(0,"router-outlet")},dependencies:[hi],encapsulation:2}),P})();function ea(P,R){return P.providers&&!P._injector&&(P._injector=(0,E.MMx)(P.providers,R,`Route: ${P.path}`)),P._injector??R}function no(P){const R=P.children&&P.children.map(no),C=R?{...P,children:R}:{...P};return!C.component&&!C.loadComponent&&(R||C.loadChildren)&&C.outlet&&C.outlet!==zt&&(C.component=Yo),C}function Rs(P){return P.outlet||zt}function Ji(P,R){const C=P.filter(B=>Rs(B)===R);return C.push(...P.filter(B=>Rs(B)!==R)),C}function ou(P){if(!P)return null;if(P.routeConfig?._injector)return P.routeConfig._injector;for(let R=P.parent;R;R=R.parent){const C=R.routeConfig;if(C?._loadedInjector)return C._loadedInjector;if(C?._injector)return C._injector}return null}class vi{constructor(R,C,B,Q){this.routeReuseStrategy=R,this.futureState=C,this.currState=B,this.forwardEvent=Q}activate(R){const C=this.futureState._root,B=this.currState?this.currState._root:null;this.deactivateChildRoutes(C,B,R),Ba(this.futureState.root),this.activateChildRoutes(C,B,R)}deactivateChildRoutes(R,C,B){const Q=Uo(C);R.children.forEach(pe=>{const ve=pe.value.outlet;this.deactivateRoutes(pe,Q[ve],B),delete Q[ve]}),Bn(Q,(pe,ve)=>{this.deactivateRouteAndItsChildren(pe,B)})}deactivateRoutes(R,C,B){const Q=R.value,pe=C?C.value:null;if(Q===pe)if(Q.component){const ve=B.getContext(Q.outlet);ve&&this.deactivateChildRoutes(R,C,ve.children)}else this.deactivateChildRoutes(R,C,B);else pe&&this.deactivateRouteAndItsChildren(C,B)}deactivateRouteAndItsChildren(R,C){R.value.component&&this.routeReuseStrategy.shouldDetach(R.value.snapshot)?this.detachAndStoreRouteSubtree(R,C):this.deactivateRouteAndOutlet(R,C)}detachAndStoreRouteSubtree(R,C){const B=C.getContext(R.value.outlet),Q=B&&R.value.component?B.children:C,pe=Uo(R);for(const ve of Object.keys(pe))this.deactivateRouteAndItsChildren(pe[ve],Q);if(B&&B.outlet){const ve=B.outlet.detach(),_t=B.children.onOutletDeactivated();this.routeReuseStrategy.store(R.value.snapshot,{componentRef:ve,route:R,contexts:_t})}}deactivateRouteAndOutlet(R,C){const B=C.getContext(R.value.outlet),Q=B&&R.value.component?B.children:C,pe=Uo(R);for(const ve of Object.keys(pe))this.deactivateRouteAndItsChildren(pe[ve],Q);B&&B.outlet&&(B.outlet.deactivate(),B.children.onOutletDeactivated(),B.attachRef=null,B.resolver=null,B.route=null)}activateChildRoutes(R,C,B){const Q=Uo(C);R.children.forEach(pe=>{this.activateRoutes(pe,Q[pe.value.outlet],B),this.forwardEvent(new Ct(pe.value.snapshot))}),R.children.length&&this.forwardEvent(new pt(R.value.snapshot))}activateRoutes(R,C,B){const Q=R.value,pe=C?C.value:null;if(Ba(Q),Q===pe)if(Q.component){const ve=B.getOrCreateContext(Q.outlet);this.activateChildRoutes(R,C,ve.children)}else this.activateChildRoutes(R,C,B);else if(Q.component){const ve=B.getOrCreateContext(Q.outlet);if(this.routeReuseStrategy.shouldAttach(Q.snapshot)){const _t=this.routeReuseStrategy.retrieve(Q.snapshot);this.routeReuseStrategy.store(Q.snapshot,null),ve.children.onOutletReAttached(_t.contexts),ve.attachRef=_t.componentRef,ve.route=_t.route.value,ve.outlet&&ve.outlet.attach(_t.componentRef,_t.route.value),Ba(_t.route.value),this.activateChildRoutes(R,null,ve.children)}else{const _t=ou(Q.snapshot),Wt=_t?.get(E._Vd)??null;ve.attachRef=null,ve.route=Q,ve.resolver=Wt,ve.injector=_t,ve.outlet&&ve.outlet.activateWith(Q,ve.injector),this.activateChildRoutes(R,null,ve.children)}}else this.activateChildRoutes(R,null,B)}}class Cs{constructor(R){this.path=R,this.route=this.path[this.path.length-1]}}class fa{constructor(R,C){this.component=R,this.route=C}}function _o(P,R,C){const B=P._root;return na(B,R?R._root:null,C,[B.value])}function ro(P,R){const C=Symbol(),B=R.get(P,C);return B===C?"function"!=typeof P||(0,E.Z0I)(P)?R.get(P):P:B}function na(P,R,C,B,Q={canDeactivateChecks:[],canActivateChecks:[]}){const pe=Uo(R);return P.children.forEach(ve=>{(function ji(P,R,C,B,Q={canDeactivateChecks:[],canActivateChecks:[]}){const pe=P.value,ve=R?R.value:null,_t=C?C.getContext(P.value.outlet):null;if(ve&&pe.routeConfig===ve.routeConfig){const Wt=function Dr(P,R,C){if("function"==typeof C)return C(P,R);switch(C){case"pathParamsChange":return!Ki(P.url,R.url);case"pathParamsOrQueryParamsChange":return!Ki(P.url,R.url)||!mr(P.queryParams,R.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Js(P,R)||!mr(P.queryParams,R.queryParams);default:return!Js(P,R)}}(ve,pe,pe.routeConfig.runGuardsAndResolvers);Wt?Q.canActivateChecks.push(new Cs(B)):(pe.data=ve.data,pe._resolvedData=ve._resolvedData),na(P,R,pe.component?_t?_t.children:null:C,B,Q),Wt&&_t&&_t.outlet&&_t.outlet.isActivated&&Q.canDeactivateChecks.push(new fa(_t.outlet.component,ve))}else ve&&ra(R,_t,Q),Q.canActivateChecks.push(new Cs(B)),na(P,null,pe.component?_t?_t.children:null:C,B,Q)})(ve,pe[ve.value.outlet],C,B.concat([ve.value]),Q),delete pe[ve.value.outlet]}),Bn(pe,(ve,_t)=>ra(ve,C.getContext(_t),Q)),Q}function ra(P,R,C){const B=Uo(P),Q=P.value;Bn(B,(pe,ve)=>{ra(pe,Q.component?R?R.children.getContext(ve):null:R,C)}),C.canDeactivateChecks.push(new fa(Q.component&&R&&R.outlet&&R.outlet.isActivated?R.outlet.component:null,Q))}function ne(P){return"function"==typeof P}function Jt(P){return P instanceof De.K||"EmptyError"===P?.name}const wn=Symbol("INITIAL_VALUE");function xn(){return(0,Et.w)(P=>(0,ke.a)(P.map(R=>R.pipe((0,Mt.q)(1),(0,St.O)(wn)))).pipe((0,Me.U)(R=>{for(const C of R)if(!0!==C){if(C===wn)return wn;if(!1===C||C instanceof Lr)return C}return!0}),(0,J.h)(R=>R!==wn),(0,Mt.q)(1)))}function Pi(P){return(0,Pe.z)((0,st.b)(R=>{if(Ye(R))throw Vs(0,R)}),(0,Me.U)(R=>!0===R))}const Gi={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function Ns(P,R,C,B,Q){const pe=Ho(P,R,C);return pe.matched?function as(P,R,C,B){const Q=R.canMatch;if(!Q||0===Q.length)return(0,re.of)(!0);const pe=Q.map(ve=>{const _t=ro(ve,P);return Ar(function Ve(P){return P&&ne(P.canMatch)}(_t)?_t.canMatch(R,C):P.runInContext(()=>_t(R,C)))});return(0,re.of)(pe).pipe(xn(),Pi())}(B=ea(R,B),R,C).pipe((0,Me.U)(ve=>!0===ve?pe:{...Gi})):(0,re.of)(pe)}function Ho(P,R,C){if(""===R.path)return"full"===R.pathMatch&&(P.hasChildren()||C.length>0)?{...Gi}:{matched:!0,consumedSegments:[],remainingSegments:C,parameters:{},positionalParamSegments:{}};const Q=(R.matcher||Zn)(C,P,R);if(!Q)return{...Gi};const pe={};Bn(Q.posParams,(_t,Wt)=>{pe[Wt]=_t.path});const ve=Q.consumed.length>0?{...pe,...Q.consumed[Q.consumed.length-1].parameters}:pe;return{matched:!0,consumedSegments:Q.consumed,remainingSegments:C.slice(Q.consumed.length),parameters:ve,positionalParamSegments:Q.posParams??{}}}function To(P,R,C,B){if(C.length>0&&function au(P,R,C){return C.some(B=>io(P,R,B)&&Rs(B)!==zt)}(P,C,B)){const pe=new Qn(R,function ga(P,R,C,B){const Q={};Q[zt]=B,B._sourceSegment=P,B._segmentIndexShift=R.length;for(const pe of C)if(""===pe.path&&Rs(pe)!==zt){const ve=new Qn([],{});ve._sourceSegment=P,ve._segmentIndexShift=R.length,Q[Rs(pe)]=ve}return Q}(P,R,B,new Qn(C,P.children)));return pe._sourceSegment=P,pe._segmentIndexShift=R.length,{segmentGroup:pe,slicedSegments:[]}}if(0===C.length&&function ma(P,R,C){return C.some(B=>io(P,R,B))}(P,C,B)){const pe=new Qn(P.segments,function pa(P,R,C,B,Q){const pe={};for(const ve of B)if(io(P,C,ve)&&!Q[Rs(ve)]){const _t=new Qn([],{});_t._sourceSegment=P,_t._segmentIndexShift=R.length,pe[Rs(ve)]=_t}return{...Q,...pe}}(P,R,C,B,P.children));return pe._sourceSegment=P,pe._segmentIndexShift=R.length,{segmentGroup:pe,slicedSegments:C}}const Q=new Qn(P.segments,P.children);return Q._sourceSegment=P,Q._segmentIndexShift=R.length,{segmentGroup:Q,slicedSegments:C}}function io(P,R,C){return(!(P.hasChildren()||R.length>0)||"full"!==C.pathMatch)&&""===C.path}function yu(P,R,C,B){return!!(Rs(P)===B||B!==zt&&io(R,C,P))&&("**"===P.path||Ho(R,P,C).matched)}function il(P,R,C){return 0===R.length&&!P.children[C]}const qr=!1;class Ga{constructor(R){this.segmentGroup=R||null}}class Il{constructor(R){this.urlTree=R}}function sl(P){return yt(new Ga(P))}function uu(P){return yt(new Il(P))}class Pu{constructor(R,C,B,Q,pe){this.injector=R,this.configLoader=C,this.urlSerializer=B,this.urlTree=Q,this.config=pe,this.allowRedirects=!0}apply(){const R=To(this.urlTree.root,[],[],this.config).segmentGroup,C=new Qn(R.segments,R.children);return this.expandSegmentGroup(this.injector,this.config,C,zt).pipe((0,Me.U)(pe=>this.createUrlTree(Te(pe),this.urlTree.queryParams,this.urlTree.fragment))).pipe(xt(pe=>{if(pe instanceof Il)return this.allowRedirects=!1,this.match(pe.urlTree);throw pe instanceof Ga?this.noMatchError(pe):pe}))}match(R){return this.expandSegmentGroup(this.injector,this.config,R.root,zt).pipe((0,Me.U)(Q=>this.createUrlTree(Te(Q),R.queryParams,R.fragment))).pipe(xt(Q=>{throw Q instanceof Ga?this.noMatchError(Q):Q}))}noMatchError(R){return new E.vHH(4002,qr)}createUrlTree(R,C,B){const Q=fe(R);return new Lr(Q,C,B)}expandSegmentGroup(R,C,B,Q){return 0===B.segments.length&&B.hasChildren()?this.expandChildren(R,C,B).pipe((0,Me.U)(pe=>new Qn([],pe))):this.expandSegment(R,B,C,B.segments,Q,!0)}expandChildren(R,C,B){const Q=[];for(const pe of Object.keys(B.children))"primary"===pe?Q.unshift(pe):Q.push(pe);return(0,M.D)(Q).pipe(mt(pe=>{const ve=B.children[pe],_t=Ji(C,pe);return this.expandSegmentGroup(R,_t,ve,pe).pipe((0,Me.U)(Wt=>({segment:Wt,outlet:pe})))}),(0,Xe.R)((pe,ve)=>(pe[ve.outlet]=ve.segment,pe),{}),gt())}expandSegment(R,C,B,Q,pe,ve){return(0,M.D)(B).pipe(mt(_t=>this.expandSegmentAgainstRoute(R,C,B,_t,Q,pe,ve).pipe(xt(zn=>{if(zn instanceof Ga)return(0,re.of)(null);throw zn}))),(0,Ne.P)(_t=>!!_t),xt((_t,Wt)=>{if(Jt(_t))return il(C,Q,pe)?(0,re.of)(new Qn([],{})):sl(C);throw _t}))}expandSegmentAgainstRoute(R,C,B,Q,pe,ve,_t){return yu(Q,C,pe,ve)?void 0===Q.redirectTo?this.matchSegmentAgainstRoute(R,C,Q,pe,ve):_t&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(R,C,B,Q,pe,ve):sl(C):sl(C)}expandSegmentAgainstRouteUsingRedirect(R,C,B,Q,pe,ve){return"**"===Q.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(R,B,Q,ve):this.expandRegularSegmentAgainstRouteUsingRedirect(R,C,B,Q,pe,ve)}expandWildCardWithParamsAgainstRouteUsingRedirect(R,C,B,Q){const pe=this.applyRedirectCommands([],B.redirectTo,{});return B.redirectTo.startsWith("/")?uu(pe):this.lineralizeSegments(B,pe).pipe((0,he.z)(ve=>{const _t=new Qn(ve,{});return this.expandSegment(R,_t,C,ve,Q,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(R,C,B,Q,pe,ve){const{matched:_t,consumedSegments:Wt,remainingSegments:zn,positionalParamSegments:jn}=Ho(C,Q,pe);if(!_t)return sl(C);const ui=this.applyRedirectCommands(Wt,Q.redirectTo,jn);return Q.redirectTo.startsWith("/")?uu(ui):this.lineralizeSegments(Q,ui).pipe((0,he.z)(Wi=>this.expandSegment(R,C,B,Wi.concat(zn),ve,!1)))}matchSegmentAgainstRoute(R,C,B,Q,pe){return"**"===B.path?(R=ea(B,R),B.loadChildren?(B._loadedRoutes?(0,re.of)({routes:B._loadedRoutes,injector:B._loadedInjector}):this.configLoader.loadChildren(R,B)).pipe((0,Me.U)(_t=>(B._loadedRoutes=_t.routes,B._loadedInjector=_t.injector,new Qn(Q,{})))):(0,re.of)(new Qn(Q,{}))):Ns(C,B,Q,R).pipe((0,Et.w)(({matched:ve,consumedSegments:_t,remainingSegments:Wt})=>ve?this.getChildConfig(R=B._injector??R,B,Q).pipe((0,he.z)(jn=>{const ui=jn.injector??R,Wi=jn.routes,{segmentGroup:dn,slicedSegments:So}=To(C,_t,Wt,Wi),Qo=new Qn(dn.segments,dn.children);if(0===So.length&&Qo.hasChildren())return this.expandChildren(ui,Wi,Qo).pipe((0,Me.U)(z=>new Qn(_t,z)));if(0===Wi.length&&0===So.length)return(0,re.of)(new Qn(_t,{}));const Fs=Rs(B)===pe;return this.expandSegment(ui,Qo,Wi,So,Fs?zt:pe,!0).pipe((0,Me.U)(Xa=>new Qn(_t.concat(Xa.segments),Xa.children)))})):sl(C)))}getChildConfig(R,C,B){return C.children?(0,re.of)({routes:C.children,injector:R}):C.loadChildren?void 0!==C._loadedRoutes?(0,re.of)({routes:C._loadedRoutes,injector:C._loadedInjector}):function Wr(P,R,C,B){const Q=R.canLoad;if(void 0===Q||0===Q.length)return(0,re.of)(!0);const pe=Q.map(ve=>{const _t=ro(ve,P);return Ar(function q(P){return P&&ne(P.canLoad)}(_t)?_t.canLoad(R,C):P.runInContext(()=>_t(R,C)))});return(0,re.of)(pe).pipe(xn(),Pi())}(R,C,B).pipe((0,he.z)(Q=>Q?this.configLoader.loadChildren(R,C).pipe((0,st.b)(pe=>{C._loadedRoutes=pe.routes,C._loadedInjector=pe.injector})):function Ls(P){return yt(iu(qr,3))}())):(0,re.of)({routes:[],injector:R})}lineralizeSegments(R,C){let B=[],Q=C.root;for(;;){if(B=B.concat(Q.segments),0===Q.numberOfChildren)return(0,re.of)(B);if(Q.numberOfChildren>1||!Q.children[zt])return R.redirectTo,yt(new E.vHH(4e3,qr));Q=Q.children[zt]}}applyRedirectCommands(R,C,B){return this.applyRedirectCreateUrlTree(C,this.urlSerializer.parse(C),R,B)}applyRedirectCreateUrlTree(R,C,B,Q){const pe=this.createSegmentGroup(R,C.root,B,Q);return new Lr(pe,this.createQueryParams(C.queryParams,this.urlTree.queryParams),C.fragment)}createQueryParams(R,C){const B={};return Bn(R,(Q,pe)=>{if("string"==typeof Q&&Q.startsWith(":")){const _t=Q.substring(1);B[pe]=C[_t]}else B[pe]=Q}),B}createSegmentGroup(R,C,B,Q){const pe=this.createSegments(R,C.segments,B,Q);let ve={};return Bn(C.children,(_t,Wt)=>{ve[Wt]=this.createSegmentGroup(R,_t,B,Q)}),new Qn(pe,ve)}createSegments(R,C,B,Q){return C.map(pe=>pe.path.startsWith(":")?this.findPosParam(R,pe,Q):this.findOrReturn(pe,B))}findPosParam(R,C,B){const Q=B[C.path.substring(1)];if(!Q)throw new E.vHH(4001,qr);return Q}findOrReturn(R,C){let B=0;for(const Q of C){if(Q.path===R.path)return C.splice(B),Q;B++}return R}}class us{}class lo{constructor(R,C,B,Q,pe,ve,_t){this.injector=R,this.rootComponentType=C,this.config=B,this.urlTree=Q,this.url=pe,this.paramsInheritanceStrategy=ve,this.urlSerializer=_t}recognize(){const R=To(this.urlTree.root,[],[],this.config.filter(C=>void 0===C.redirectTo)).segmentGroup;return this.processSegmentGroup(this.injector,this.config,R,zt).pipe((0,Me.U)(C=>{if(null===C)return null;const B=new Ao([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},zt,this.rootComponentType,null,this.urlTree.root,-1,{}),Q=new Pr(B,C),pe=new ca(this.url,Q);return this.inheritParamsAndData(pe._root),pe}))}inheritParamsAndData(R){const C=R.value,B=Di(C,this.paramsInheritanceStrategy);C.params=Object.freeze(B.params),C.data=Object.freeze(B.data),R.children.forEach(Q=>this.inheritParamsAndData(Q))}processSegmentGroup(R,C,B,Q){return 0===B.segments.length&&B.hasChildren()?this.processChildren(R,C,B):this.processSegment(R,C,B,B.segments,Q)}processChildren(R,C,B){return(0,M.D)(Object.keys(B.children)).pipe(mt(Q=>{const pe=B.children[Q],ve=Ji(C,Q);return this.processSegmentGroup(R,ve,pe,Q)}),(0,Xe.R)((Q,pe)=>Q&&pe?(Q.push(...pe),Q):null),function Nt(P,R=!1){return(0,et.e)((C,B)=>{let Q=0;C.subscribe((0,at.x)(B,pe=>{const ve=P(pe,Q++);(ve||R)&&B.next(pe),!ve&&B.complete()}))})}(Q=>null!==Q),(0,ot.d)(null),gt(),(0,Me.U)(Q=>{if(null===Q)return null;const pe=Ou(Q);return function za(P){P.sort((R,C)=>R.value.outlet===zt?-1:C.value.outlet===zt?1:R.value.outlet.localeCompare(C.value.outlet))}(pe),pe}))}processSegment(R,C,B,Q,pe){return(0,M.D)(C).pipe(mt(ve=>this.processSegmentAgainstRoute(ve._injector??R,ve,B,Q,pe)),(0,Ne.P)(ve=>!!ve),xt(ve=>{if(Jt(ve))return il(B,Q,pe)?(0,re.of)([]):(0,re.of)(null);throw ve}))}processSegmentAgainstRoute(R,C,B,Q,pe){if(C.redirectTo||!yu(C,B,Q,pe))return(0,re.of)(null);let ve;if("**"===C.path){const _t=Q.length>0?ii(Q).parameters:{},Wt=V(B)+Q.length,zn=new Ao(Q,_t,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,W(C),Rs(C),C.component??C._loadedComponent??null,C,va(B),Wt,Ee(C));ve=(0,re.of)({snapshot:zn,consumedSegments:[],remainingSegments:[]})}else ve=Ns(B,C,Q,R).pipe((0,Me.U)(({matched:_t,consumedSegments:Wt,remainingSegments:zn,parameters:jn})=>{if(!_t)return null;const ui=V(B)+Wt.length;return{snapshot:new Ao(Wt,jn,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,W(C),Rs(C),C.component??C._loadedComponent??null,C,va(B),ui,Ee(C)),consumedSegments:Wt,remainingSegments:zn}}));return ve.pipe((0,Et.w)(_t=>{if(null===_t)return(0,re.of)(null);const{snapshot:Wt,consumedSegments:zn,remainingSegments:jn}=_t;R=C._injector??R;const ui=C._loadedInjector??R,Wi=function Mu(P){return P.children?P.children:P.loadChildren?P._loadedRoutes:[]}(C),{segmentGroup:dn,slicedSegments:So}=To(B,zn,jn,Wi.filter(Fs=>void 0===Fs.redirectTo));if(0===So.length&&dn.hasChildren())return this.processChildren(ui,Wi,dn).pipe((0,Me.U)(Fs=>null===Fs?null:[new Pr(Wt,Fs)]));if(0===Wi.length&&0===So.length)return(0,re.of)([new Pr(Wt,[])]);const Qo=Rs(C)===pe;return this.processSegment(ui,Wi,dn,So,Qo?zt:pe).pipe((0,Me.U)(Fs=>null===Fs?null:[new Pr(Wt,Fs)]))}))}}function Mc(P){const R=P.value.routeConfig;return R&&""===R.path&&void 0===R.redirectTo}function Ou(P){const R=[],C=new Set;for(const B of P){if(!Mc(B)){R.push(B);continue}const Q=R.find(pe=>B.value.routeConfig===pe.value.routeConfig);void 0!==Q?(Q.children.push(...B.children),C.add(Q)):R.push(B)}for(const B of C){const Q=Ou(B.children);R.push(new Pr(B.value,Q))}return R.filter(B=>!C.has(B))}function va(P){let R=P;for(;R._sourceSegment;)R=R._sourceSegment;return R}function V(P){let R=P,C=R._segmentIndexShift??0;for(;R._sourceSegment;)R=R._sourceSegment,C+=R._segmentIndexShift??0;return C-1}function W(P){return P.data||{}}function Ee(P){return P.resolve||{}}function Bi(P){return"string"==typeof P.title||null===P.title}function Kt(P){return(0,Et.w)(R=>{const C=P(R);return C?(0,M.D)(C).pipe((0,Me.U)(()=>R)):(0,re.of)(R)})}const Mi=new E.OlP("ROUTES");let Fn=(()=>{class P{constructor(C,B){this.injector=C,this.compiler=B,this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap}loadComponent(C){if(this.componentLoaders.get(C))return this.componentLoaders.get(C);if(C._loadedComponent)return(0,re.of)(C._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(C);const B=Ar(C.loadComponent()).pipe((0,Me.U)(Kr),(0,st.b)(pe=>{this.onLoadEndListener&&this.onLoadEndListener(C),C._loadedComponent=pe}),_n(()=>{this.componentLoaders.delete(C)})),Q=new We(B,()=>new dt.x).pipe(nt());return this.componentLoaders.set(C,Q),Q}loadChildren(C,B){if(this.childrenLoaders.get(B))return this.childrenLoaders.get(B);if(B._loadedRoutes)return(0,re.of)({routes:B._loadedRoutes,injector:B._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(B);const pe=this.loadModuleFactoryOrRoutes(B.loadChildren).pipe((0,Me.U)(_t=>{this.onLoadEndListener&&this.onLoadEndListener(B);let Wt,zn,jn=!1;Array.isArray(_t)?zn=_t:(Wt=_t.create(C).injector,zn=kr(Wt.get(Mi,[],E.XFs.Self|E.XFs.Optional)));return{routes:zn.map(no),injector:Wt}}),_n(()=>{this.childrenLoaders.delete(B)})),ve=new We(pe,()=>new dt.x).pipe(nt());return this.childrenLoaders.set(B,ve),ve}loadModuleFactoryOrRoutes(C){return Ar(C()).pipe((0,Me.U)(Kr),(0,he.z)(Q=>Q instanceof E.YKP||Array.isArray(Q)?(0,re.of)(Q):(0,M.D)(this.compiler.compileModuleAsync(Q))))}}return P.\u0275fac=function(C){return new(C||P)(E.LFG(E.zs3),E.LFG(E.Sil))},P.\u0275prov=E.Yz7({token:P,factory:P.\u0275fac,providedIn:"root"}),P})();function Kr(P){return function Vn(P){return P&&"object"==typeof P&&"default"in P}(P)?P.default:P}let Bt=(()=>{class P{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.lastSuccessfulNavigation=null,this.events=new dt.x,this.configLoader=(0,E.f3M)(Fn),this.environmentInjector=(0,E.f3M)(E.lqb),this.urlSerializer=(0,E.f3M)(Rr),this.rootContexts=(0,E.f3M)(uo),this.navigationId=0,this.afterPreactivation=()=>(0,re.of)(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=Q=>this.events.next(new jo(Q)),this.configLoader.onLoadStartListener=Q=>this.events.next(new Zs(Q))}complete(){this.transitions?.complete()}handleNavigationRequest(C){const B=++this.navigationId;this.transitions?.next({...this.transitions.value,...C,id:B})}setupNavigations(C){return this.transitions=new Oe.X({id:0,targetPageId:0,currentUrlTree:C.currentUrlTree,currentRawUrl:C.currentUrlTree,extractedUrl:C.urlHandlingStrategy.extract(C.currentUrlTree),urlAfterRedirects:C.urlHandlingStrategy.extract(C.currentUrlTree),rawUrl:C.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:fs,restoredState:null,currentSnapshot:C.routerState.snapshot,targetSnapshot:null,currentRouterState:C.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe((0,J.h)(B=>0!==B.id),(0,Me.U)(B=>({...B,extractedUrl:C.urlHandlingStrategy.extract(B.rawUrl)})),(0,Et.w)(B=>{let Q=!1,pe=!1;return(0,re.of)(B).pipe((0,st.b)(ve=>{this.currentNavigation={id:ve.id,initialUrl:ve.rawUrl,extractedUrl:ve.extractedUrl,trigger:ve.source,extras:ve.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),(0,Et.w)(ve=>{const _t=C.browserUrlTree.toString(),Wt=!C.navigated||ve.extractedUrl.toString()!==_t||_t!==C.currentUrlTree.toString();if(!Wt&&"reload"!==(ve.extras.onSameUrlNavigation??C.onSameUrlNavigation)){const jn="";return this.events.next(new Ks(ve.id,C.serializeUrl(B.rawUrl),jn,0)),C.rawUrlTree=ve.rawUrl,ve.resolve(null),ae.E}if(C.urlHandlingStrategy.shouldProcessUrl(ve.rawUrl))return un(ve.source)&&(C.browserUrlTree=ve.extractedUrl),(0,re.of)(ve).pipe((0,Et.w)(jn=>{const ui=this.transitions?.getValue();return this.events.next(new qs(jn.id,this.urlSerializer.serialize(jn.extractedUrl),jn.source,jn.restoredState)),ui!==this.transitions?.getValue()?ae.E:Promise.resolve(jn)}),function so(P,R,C,B){return(0,Et.w)(Q=>function ia(P,R,C,B,Q){return new Pu(P,R,C,B,Q).apply()}(P,R,C,Q.extractedUrl,B).pipe((0,Me.U)(pe=>({...Q,urlAfterRedirects:pe}))))}(this.environmentInjector,this.configLoader,this.urlSerializer,C.config),(0,st.b)(jn=>{this.currentNavigation={...this.currentNavigation,finalUrl:jn.urlAfterRedirects},B.urlAfterRedirects=jn.urlAfterRedirects}),function Qe(P,R,C,B,Q){return(0,he.z)(pe=>function Mo(P,R,C,B,Q,pe,ve="emptyOnly"){return new lo(P,R,C,B,Q,ve,pe).recognize().pipe((0,Et.w)(_t=>null===_t?function $a(P){return new He.y(R=>R.error(P))}(new us):(0,re.of)(_t)))}(P,R,C,pe.urlAfterRedirects,B.serialize(pe.urlAfterRedirects),B,Q).pipe((0,Me.U)(ve=>({...pe,targetSnapshot:ve}))))}(this.environmentInjector,this.rootComponentType,C.config,this.urlSerializer,C.paramsInheritanceStrategy),(0,st.b)(jn=>{if(B.targetSnapshot=jn.targetSnapshot,"eager"===C.urlUpdateStrategy){if(!jn.extras.skipLocationChange){const Wi=C.urlHandlingStrategy.merge(jn.urlAfterRedirects,jn.rawUrl);C.setBrowserUrl(Wi,jn)}C.browserUrlTree=jn.urlAfterRedirects}const ui=new la(jn.id,this.urlSerializer.serialize(jn.extractedUrl),this.urlSerializer.serialize(jn.urlAfterRedirects),jn.targetSnapshot);this.events.next(ui)}));if(Wt&&C.urlHandlingStrategy.shouldProcessUrl(C.rawUrlTree)){const{id:jn,extractedUrl:ui,source:Wi,restoredState:dn,extras:So}=ve,Qo=new qs(jn,this.urlSerializer.serialize(ui),Wi,dn);this.events.next(Qo);const Fs=vo(ui,this.rootComponentType).snapshot;return B={...ve,targetSnapshot:Fs,urlAfterRedirects:ui,extras:{...So,skipLocationChange:!1,replaceUrl:!1}},(0,re.of)(B)}{const jn="";return this.events.next(new Ks(ve.id,C.serializeUrl(B.extractedUrl),jn,1)),C.rawUrlTree=ve.rawUrl,ve.resolve(null),ae.E}}),(0,st.b)(ve=>{const _t=new Os(ve.id,this.urlSerializer.serialize(ve.extractedUrl),this.urlSerializer.serialize(ve.urlAfterRedirects),ve.targetSnapshot);this.events.next(_t)}),(0,Me.U)(ve=>B={...ve,guards:_o(ve.targetSnapshot,ve.currentSnapshot,this.rootContexts)}),function yr(P,R){return(0,he.z)(C=>{const{targetSnapshot:B,currentSnapshot:Q,guards:{canActivateChecks:pe,canDeactivateChecks:ve}}=C;return 0===ve.length&&0===pe.length?(0,re.of)({...C,guardsResult:!0}):function zr(P,R,C,B){return(0,M.D)(P).pipe((0,he.z)(Q=>function ts(P,R,C,B,Q){const pe=R&&R.routeConfig?R.routeConfig.canDeactivate:null;if(!pe||0===pe.length)return(0,re.of)(!0);const ve=pe.map(_t=>{const Wt=ou(R)??Q,zn=ro(_t,Wt);return Ar(function be(P){return P&&ne(P.canDeactivate)}(zn)?zn.canDeactivate(P,R,C,B):Wt.runInContext(()=>zn(P,R,C,B))).pipe((0,Ne.P)())});return(0,re.of)(ve).pipe(xn())}(Q.component,Q.route,C,R,B)),(0,Ne.P)(Q=>!0!==Q,!0))}(ve,B,Q,P).pipe((0,he.z)(_t=>_t&&function Z(P){return"boolean"==typeof P}(_t)?function Ti(P,R,C,B){return(0,M.D)(R).pipe(mt(Q=>(0,Ge.z)(function Ui(P,R){return null!==P&&R&&R(new Li(P)),(0,re.of)(!0)}(Q.route.parent,B),function Ai(P,R){return null!==P&&R&&R(new ft(P)),(0,re.of)(!0)}(Q.route,B),function Hs(P,R,C){const B=R[R.length-1],pe=R.slice(0,R.length-1).reverse().map(ve=>function ta(P){const R=P.routeConfig?P.routeConfig.canActivateChild:null;return R&&0!==R.length?{node:P,guards:R}:null}(ve)).filter(ve=>null!==ve).map(ve=>Ie(()=>{const _t=ve.guards.map(Wt=>{const zn=ou(ve.node)??C,jn=ro(Wt,zn);return Ar(function H(P){return P&&ne(P.canActivateChild)}(jn)?jn.canActivateChild(B,P):zn.runInContext(()=>jn(B,P))).pipe((0,Ne.P)())});return(0,re.of)(_t).pipe(xn())}));return(0,re.of)(pe).pipe(xn())}(P,Q.path,C),function ps(P,R,C){const B=R.routeConfig?R.routeConfig.canActivate:null;if(!B||0===B.length)return(0,re.of)(!0);const Q=B.map(pe=>Ie(()=>{const ve=ou(R)??C,_t=ro(pe,ve);return Ar(function O(P){return P&&ne(P.canActivate)}(_t)?_t.canActivate(R,P):ve.runInContext(()=>_t(R,P))).pipe((0,Ne.P)())}));return(0,re.of)(Q).pipe(xn())}(P,Q.route,C))),(0,Ne.P)(Q=>!0!==Q,!0))}(B,pe,P,R):(0,re.of)(_t)),(0,Me.U)(_t=>({...C,guardsResult:_t})))})}(this.environmentInjector,ve=>this.events.next(ve)),(0,st.b)(ve=>{if(B.guardsResult=ve.guardsResult,Ye(ve.guardsResult))throw Vs(0,ve.guardsResult);const _t=new Bs(ve.id,this.urlSerializer.serialize(ve.extractedUrl),this.urlSerializer.serialize(ve.urlAfterRedirects),ve.targetSnapshot,!!ve.guardsResult);this.events.next(_t)}),(0,J.h)(ve=>!!ve.guardsResult||(C.restoreHistory(ve),this.cancelNavigationTransition(ve,"",3),!1)),Kt(ve=>{if(ve.guards.canActivateChecks.length)return(0,re.of)(ve).pipe((0,st.b)(_t=>{const Wt=new Ko(_t.id,this.urlSerializer.serialize(_t.extractedUrl),this.urlSerializer.serialize(_t.urlAfterRedirects),_t.targetSnapshot);this.events.next(Wt)}),(0,Et.w)(_t=>{let Wt=!1;return(0,re.of)(_t).pipe(function Ft(P,R){return(0,he.z)(C=>{const{targetSnapshot:B,guards:{canActivateChecks:Q}}=C;if(!Q.length)return(0,re.of)(C);let pe=0;return(0,M.D)(Q).pipe(mt(ve=>function qt(P,R,C,B){const Q=P.routeConfig,pe=P._resolve;return void 0!==Q?.title&&!Bi(Q)&&(pe[bn]=Q.title),function Rn(P,R,C,B){const Q=function Nr(P){return[...Object.keys(P),...Object.getOwnPropertySymbols(P)]}(P);if(0===Q.length)return(0,re.of)({});const pe={};return(0,M.D)(Q).pipe((0,he.z)(ve=>function Ii(P,R,C,B){const Q=ou(R)??B,pe=ro(P,Q);return Ar(pe.resolve?pe.resolve(R,C):Q.runInContext(()=>pe(R,C)))}(P[ve],R,C,B).pipe((0,Ne.P)(),(0,st.b)(_t=>{pe[ve]=_t}))),ut(1),(0,jt.h)(pe),xt(ve=>Jt(ve)?ae.E:yt(ve)))}(pe,P,R,B).pipe((0,Me.U)(ve=>(P._resolvedData=ve,P.data=Di(P,C).resolve,Q&&Bi(Q)&&(P.data[bn]=Q.title),null)))}(ve.route,B,P,R)),(0,st.b)(()=>pe++),ut(1),(0,he.z)(ve=>pe===Q.length?(0,re.of)(C):ae.E))})}(C.paramsInheritanceStrategy,this.environmentInjector),(0,st.b)({next:()=>Wt=!0,complete:()=>{Wt||(C.restoreHistory(_t),this.cancelNavigationTransition(_t,"",2))}}))}),(0,st.b)(_t=>{const Wt=new ys(_t.id,this.urlSerializer.serialize(_t.extractedUrl),this.urlSerializer.serialize(_t.urlAfterRedirects),_t.targetSnapshot);this.events.next(Wt)}))}),Kt(ve=>{const _t=Wt=>{const zn=[];Wt.routeConfig?.loadComponent&&!Wt.routeConfig._loadedComponent&&zn.push(this.configLoader.loadComponent(Wt.routeConfig).pipe((0,st.b)(jn=>{Wt.component=jn}),(0,Me.U)(()=>{})));for(const jn of Wt.children)zn.push(..._t(jn));return zn};return(0,ke.a)(_t(ve.targetSnapshot.root)).pipe((0,ot.d)(),(0,Mt.q)(1))}),Kt(()=>this.afterPreactivation()),(0,Me.U)(ve=>{const _t=function eo(P,R,C){const B=to(P,R._root,C?C._root:void 0);return new ks(B,R)}(C.routeReuseStrategy,ve.targetSnapshot,ve.currentRouterState);return B={...ve,targetRouterState:_t}}),(0,st.b)(ve=>{C.currentUrlTree=ve.urlAfterRedirects,C.rawUrlTree=C.urlHandlingStrategy.merge(ve.urlAfterRedirects,ve.rawUrl),C.routerState=ve.targetRouterState,"deferred"===C.urlUpdateStrategy&&(ve.extras.skipLocationChange||C.setBrowserUrl(C.rawUrlTree,ve),C.browserUrlTree=ve.urlAfterRedirects)}),((P,R,C)=>(0,Me.U)(B=>(new vi(R,B.targetRouterState,B.currentRouterState,C).activate(P),B)))(this.rootContexts,C.routeReuseStrategy,ve=>this.events.next(ve)),(0,st.b)({next:ve=>{Q=!0,this.lastSuccessfulNavigation=this.currentNavigation,C.navigated=!0,this.events.next(new Xs(ve.id,this.urlSerializer.serialize(ve.extractedUrl),this.urlSerializer.serialize(C.currentUrlTree))),C.titleStrategy?.updateTitle(ve.targetRouterState.snapshot),ve.resolve(!0)},complete:()=>{Q=!0}}),_n(()=>{Q||pe||this.cancelNavigationTransition(B,"",1),this.currentNavigation?.id===B.id&&(this.currentNavigation=null)}),xt(ve=>{if(pe=!0,Bo(ve)){Zo(ve)||(C.navigated=!0,C.restoreHistory(B,!0));const _t=new ar(B.id,this.urlSerializer.serialize(B.extractedUrl),ve.message,ve.cancellationCode);if(this.events.next(_t),Zo(ve)){const Wt=C.urlHandlingStrategy.merge(ve.url,C.rawUrlTree),zn={skipLocationChange:B.extras.skipLocationChange,replaceUrl:"eager"===C.urlUpdateStrategy||un(B.source)};C.scheduleNavigation(Wt,fs,null,zn,{resolve:B.resolve,reject:B.reject,promise:B.promise})}else B.resolve(!1)}else{C.restoreHistory(B,!0);const _t=new Fo(B.id,this.urlSerializer.serialize(B.extractedUrl),ve,B.targetSnapshot??void 0);this.events.next(_t);try{B.resolve(C.errorHandler(ve))}catch(Wt){B.reject(Wt)}}return ae.E}))}))}cancelNavigationTransition(C,B,Q){const pe=new ar(C.id,this.urlSerializer.serialize(C.extractedUrl),B,Q);this.events.next(pe),C.resolve(!1)}}return P.\u0275fac=function(C){return new(C||P)},P.\u0275prov=E.Yz7({token:P,factory:P.\u0275fac,providedIn:"root"}),P})();function un(P){return P!==fs}let Oi=(()=>{class P{buildTitle(C){let B,Q=C.root;for(;void 0!==Q;)B=this.getResolvedTitleForRoute(Q)??B,Q=Q.children.find(pe=>pe.outlet===zt);return B}getResolvedTitleForRoute(C){return C.data[bn]}}return P.\u0275fac=function(C){return new(C||P)},P.\u0275prov=E.Yz7({token:P,factory:function(){return(0,E.f3M)(Ma)},providedIn:"root"}),P})(),Ma=(()=>{class P extends Oi{constructor(C){super(),this.title=C}updateTitle(C){const B=this.buildTitle(C);void 0!==B&&this.title.setTitle(B)}}return P.\u0275fac=function(C){return new(C||P)(E.LFG(rn.Dx))},P.\u0275prov=E.Yz7({token:P,factory:P.\u0275fac,providedIn:"root"}),P})(),Dl=(()=>{class P{}return P.\u0275fac=function(C){return new(C||P)},P.\u0275prov=E.Yz7({token:P,factory:function(){return(0,E.f3M)(Oa)},providedIn:"root"}),P})();class ol{shouldDetach(R){return!1}store(R,C){}shouldAttach(R){return!1}retrieve(R){return null}shouldReuseRoute(R,C){return R.routeConfig===C.routeConfig}}let Oa=(()=>{class P extends ol{}return P.\u0275fac=function(){let R;return function(B){return(R||(R=E.n5z(P)))(B||P)}}(),P.\u0275prov=E.Yz7({token:P,factory:P.\u0275fac,providedIn:"root"}),P})();const lu=new E.OlP("",{providedIn:"root",factory:()=>({})});let Go=(()=>{class P{}return P.\u0275fac=function(C){return new(C||P)},P.\u0275prov=E.Yz7({token:P,factory:function(){return(0,E.f3M)(uc)},providedIn:"root"}),P})(),uc=(()=>{class P{shouldProcessUrl(C){return!0}extract(C){return C}merge(C,B){return C}}return P.\u0275fac=function(C){return new(C||P)},P.\u0275prov=E.Yz7({token:P,factory:P.\u0275fac,providedIn:"root"}),P})();function Wa(P){throw P}function ku(P,R,C){return R.parse("/")}const Mr={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},Ru={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let Oo=(()=>{class P{get navigationId(){return this.navigationTransitions.navigationId}get browserPageId(){return this.location.getState()?.\u0275routerPageId}get events(){return this.navigationTransitions.events}constructor(){this.disposed=!1,this.currentPageId=0,this.console=(0,E.f3M)(E.c2e),this.isNgZoneEnabled=!1,this.options=(0,E.f3M)(lu,{optional:!0})||{},this.errorHandler=this.options.errorHandler||Wa,this.malformedUriErrorHandler=this.options.malformedUriErrorHandler||ku,this.navigated=!1,this.lastSuccessfulId=-1,this.urlHandlingStrategy=(0,E.f3M)(Go),this.routeReuseStrategy=(0,E.f3M)(Dl),this.urlCreationStrategy=(0,E.f3M)(mi),this.titleStrategy=(0,E.f3M)(Oi),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.config=kr((0,E.f3M)(Mi,{optional:!0})??[]),this.navigationTransitions=(0,E.f3M)(Bt),this.urlSerializer=(0,E.f3M)(Rr),this.location=(0,E.f3M)(Fe.Ye),this.isNgZoneEnabled=(0,E.f3M)(E.R0b)instanceof E.R0b&&E.R0b.isInAngularZone(),this.resetConfig(this.config),this.currentUrlTree=new Lr,this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=vo(this.currentUrlTree,null),this.navigationTransitions.setupNavigations(this).subscribe(C=>{this.lastSuccessfulId=C.id,this.currentPageId=C.targetPageId},C=>{this.console.warn(`Unhandled Navigation Error: ${C}`)})}resetRootComponentType(C){this.routerState.root.component=C,this.navigationTransitions.rootComponentType=C}initialNavigation(){if(this.setUpLocationChangeListener(),!this.navigationTransitions.hasRequestedNavigation){const C=this.location.getState();this.navigateToSyncWithBrowser(this.location.path(!0),fs,C)}}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(C=>{const B="popstate"===C.type?"popstate":"hashchange";"popstate"===B&&setTimeout(()=>{this.navigateToSyncWithBrowser(C.url,B,C.state)},0)}))}navigateToSyncWithBrowser(C,B,Q){const pe={replaceUrl:!0},ve=Q?.navigationId?Q:null;if(Q){const Wt={...Q};delete Wt.navigationId,delete Wt.\u0275routerPageId,0!==Object.keys(Wt).length&&(pe.state=Wt)}const _t=this.parseUrl(C);this.scheduleNavigation(_t,B,ve,pe)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}resetConfig(C){this.config=C.map(no),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(C,B={}){const{relativeTo:Q,queryParams:pe,fragment:ve,queryParamsHandling:_t,preserveFragment:Wt}=B,zn=Wt?this.currentUrlTree.fragment:ve;let jn=null;switch(_t){case"merge":jn={...this.currentUrlTree.queryParams,...pe};break;case"preserve":jn=this.currentUrlTree.queryParams;break;default:jn=pe||null}return null!==jn&&(jn=this.removeEmptyProps(jn)),this.urlCreationStrategy.createUrlTree(Q,this.routerState,this.currentUrlTree,C,jn,zn??null)}navigateByUrl(C,B={skipLocationChange:!1}){const Q=Ye(C)?C:this.parseUrl(C),pe=this.urlHandlingStrategy.merge(Q,this.rawUrlTree);return this.scheduleNavigation(pe,fs,null,B)}navigate(C,B={skipLocationChange:!1}){return function zi(P){for(let R=0;R<P.length;R++){const C=P[R];if(null==C)throw new E.vHH(4008,false)}}(C),this.navigateByUrl(this.createUrlTree(C,B),B)}serializeUrl(C){return this.urlSerializer.serialize(C)}parseUrl(C){let B;try{B=this.urlSerializer.parse(C)}catch(Q){B=this.malformedUriErrorHandler(Q,this.urlSerializer,C)}return B}isActive(C,B){let Q;if(Q=!0===B?{...Mr}:!1===B?{...Ru}:B,Ye(C))return pr(this.currentUrlTree,C,Q);const pe=this.parseUrl(C);return pr(this.currentUrlTree,pe,Q)}removeEmptyProps(C){return Object.keys(C).reduce((B,Q)=>{const pe=C[Q];return null!=pe&&(B[Q]=pe),B},{})}scheduleNavigation(C,B,Q,pe,ve){if(this.disposed)return Promise.resolve(!1);let _t,Wt,zn,jn;return ve?(_t=ve.resolve,Wt=ve.reject,zn=ve.promise):zn=new Promise((ui,Wi)=>{_t=ui,Wt=Wi}),jn="computed"===this.canceledNavigationResolution?Q&&Q.\u0275routerPageId?Q.\u0275routerPageId:pe.replaceUrl||pe.skipLocationChange?this.browserPageId??0:(this.browserPageId??0)+1:0,this.navigationTransitions.handleNavigationRequest({targetPageId:jn,source:B,restoredState:Q,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:C,extras:pe,resolve:_t,reject:Wt,promise:zn,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),zn.catch(ui=>Promise.reject(ui))}setBrowserUrl(C,B){const Q=this.urlSerializer.serialize(C),pe={...B.extras.state,...this.generateNgRouterState(B.id,B.targetPageId)};this.location.isCurrentPathEqualTo(Q)||B.extras.replaceUrl?this.location.replaceState(Q,"",pe):this.location.go(Q,"",pe)}restoreHistory(C,B=!1){if("computed"===this.canceledNavigationResolution){const Q=this.currentPageId-C.targetPageId;"popstate"!==C.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==this.getCurrentNavigation()?.finalUrl||0===Q?this.currentUrlTree===this.getCurrentNavigation()?.finalUrl&&0===Q&&(this.resetState(C),this.browserUrlTree=C.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(Q)}else"replace"===this.canceledNavigationResolution&&(B&&this.resetState(C),this.resetUrlToCurrentUrlTree())}resetState(C){this.routerState=C.currentRouterState,this.currentUrlTree=C.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,C.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(C,B){return"computed"===this.canceledNavigationResolution?{navigationId:C,\u0275routerPageId:B}:{navigationId:C}}}return P.\u0275fac=function(C){return new(C||P)},P.\u0275prov=E.Yz7({token:P,factory:P.\u0275fac,providedIn:"root"}),P})(),ur=(()=>{class P{constructor(C,B,Q,pe,ve,_t){this.router=C,this.route=B,this.tabIndexAttribute=Q,this.renderer=pe,this.el=ve,this.locationStrategy=_t,this._preserveFragment=!1,this._skipLocationChange=!1,this._replaceUrl=!1,this.href=null,this.commands=null,this.onChanges=new dt.x;const Wt=ve.nativeElement.tagName?.toLowerCase();this.isAnchorElement="a"===Wt||"area"===Wt,this.isAnchorElement?this.subscription=C.events.subscribe(zn=>{zn instanceof Xs&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}set preserveFragment(C){this._preserveFragment=(0,E.D6c)(C)}get preserveFragment(){return this._preserveFragment}set skipLocationChange(C){this._skipLocationChange=(0,E.D6c)(C)}get skipLocationChange(){return this._skipLocationChange}set replaceUrl(C){this._replaceUrl=(0,E.D6c)(C)}get replaceUrl(){return this._replaceUrl}setTabIndexIfNotOnNativeEl(C){null!=this.tabIndexAttribute||this.isAnchorElement||this.applyAttributeValue("tabindex",C)}ngOnChanges(C){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(C){null!=C?(this.commands=Array.isArray(C)?C:[C],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(C,B,Q,pe,ve){return!!(null===this.urlTree||this.isAnchorElement&&(0!==C||B||Q||pe||ve||"string"==typeof this.target&&"_self"!=this.target))||(this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!this.isAnchorElement)}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){this.href=null!==this.urlTree&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null;const C=null===this.href?null:(0,E.P3R)(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",C)}applyAttributeValue(C,B){const Q=this.renderer,pe=this.el.nativeElement;null!==B?Q.setAttribute(pe,C,B):Q.removeAttribute(pe,C)}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}}return P.\u0275fac=function(C){return new(C||P)(E.Y36(Oo),E.Y36(Do),E.$8M("tabindex"),E.Y36(E.Qsj),E.Y36(E.SBq),E.Y36(Fe.S$))},P.\u0275dir=E.lG2({type:P,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(C,B){1&C&&E.NdJ("click",function(pe){return B.onClick(pe.button,pe.ctrlKey,pe.shiftKey,pe.altKey,pe.metaKey)}),2&C&&E.uIk("target",B.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",routerLink:"routerLink"},standalone:!0,features:[E.TTD]}),P})(),Wu=(()=>{class P{get isActive(){return this._isActive}constructor(C,B,Q,pe,ve){this.router=C,this.element=B,this.renderer=Q,this.cdr=pe,this.link=ve,this.classes=[],this._isActive=!1,this.routerLinkActiveOptions={exact:!1},this.isActiveChange=new E.vpe,this.routerEventsSubscription=C.events.subscribe(_t=>{_t instanceof Xs&&this.update()})}ngAfterContentInit(){(0,re.of)(this.links.changes,(0,re.of)(null)).pipe((0,Ot.J)()).subscribe(C=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){this.linkInputChangesSubscription?.unsubscribe();const C=[...this.links.toArray(),this.link].filter(B=>!!B).map(B=>B.onChanges);this.linkInputChangesSubscription=(0,M.D)(C).pipe((0,Ot.J)()).subscribe(B=>{this._isActive!==this.isLinkActive(this.router)(B)&&this.update()})}set routerLinkActive(C){const B=Array.isArray(C)?C:C.split(" ");this.classes=B.filter(Q=>!!Q)}ngOnChanges(C){this.update()}ngOnDestroy(){this.routerEventsSubscription.unsubscribe(),this.linkInputChangesSubscription?.unsubscribe()}update(){!this.links||!this.router.navigated||Promise.resolve().then(()=>{const C=this.hasActiveLinks();this._isActive!==C&&(this._isActive=C,this.cdr.markForCheck(),this.classes.forEach(B=>{C?this.renderer.addClass(this.element.nativeElement,B):this.renderer.removeClass(this.element.nativeElement,B)}),C&&void 0!==this.ariaCurrentWhenActive?this.renderer.setAttribute(this.element.nativeElement,"aria-current",this.ariaCurrentWhenActive.toString()):this.renderer.removeAttribute(this.element.nativeElement,"aria-current"),this.isActiveChange.emit(C))})}isLinkActive(C){const B=function Ur(P){return!!P.paths}(this.routerLinkActiveOptions)?this.routerLinkActiveOptions:this.routerLinkActiveOptions.exact||!1;return Q=>!!Q.urlTree&&C.isActive(Q.urlTree,B)}hasActiveLinks(){const C=this.isLinkActive(this.router);return this.link&&C(this.link)||this.links.some(C)}}return P.\u0275fac=function(C){return new(C||P)(E.Y36(Oo),E.Y36(E.SBq),E.Y36(E.Qsj),E.Y36(E.sBO),E.Y36(ur,8))},P.\u0275dir=E.lG2({type:P,selectors:[["","routerLinkActive",""]],contentQueries:function(C,B,Q){if(1&C&&E.Suo(Q,ur,5),2&C){let pe;E.iGM(pe=E.CRH())&&(B.links=pe)}},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",ariaCurrentWhenActive:"ariaCurrentWhenActive",routerLinkActive:"routerLinkActive"},outputs:{isActiveChange:"isActiveChange"},exportAs:["routerLinkActive"],standalone:!0,features:[E.TTD]}),P})();class qa{}let al=(()=>{class P{constructor(C,B,Q,pe,ve){this.router=C,this.injector=Q,this.preloadingStrategy=pe,this.loader=ve}setUpPreloading(){this.subscription=this.router.events.pipe((0,J.h)(C=>C instanceof Xs),mt(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(C,B){const Q=[];for(const pe of B){pe.providers&&!pe._injector&&(pe._injector=(0,E.MMx)(pe.providers,C,`Route: ${pe.path}`));const ve=pe._injector??C,_t=pe._loadedInjector??ve;pe.loadChildren&&!pe._loadedRoutes&&void 0===pe.canLoad||pe.loadComponent&&!pe._loadedComponent?Q.push(this.preloadConfig(ve,pe)):(pe.children||pe._loadedRoutes)&&Q.push(this.processRoutes(_t,pe.children??pe._loadedRoutes))}return(0,M.D)(Q).pipe((0,Ot.J)())}preloadConfig(C,B){return this.preloadingStrategy.preload(B,()=>{let Q;Q=B.loadChildren&&void 0===B.canLoad?this.loader.loadChildren(C,B):(0,re.of)(null);const pe=Q.pipe((0,he.z)(ve=>null===ve?(0,re.of)(void 0):(B._loadedRoutes=ve.routes,B._loadedInjector=ve.injector,this.processRoutes(ve.injector??C,ve.routes))));if(B.loadComponent&&!B._loadedComponent){const ve=this.loader.loadComponent(B);return(0,M.D)([pe,ve]).pipe((0,Ot.J)())}return pe})}}return P.\u0275fac=function(C){return new(C||P)(E.LFG(Oo),E.LFG(E.Sil),E.LFG(E.lqb),E.LFG(qa),E.LFG(Fn))},P.\u0275prov=E.Yz7({token:P,factory:P.\u0275fac,providedIn:"root"}),P})();const Nu=new E.OlP("");let $o=(()=>{class P{constructor(C,B,Q,pe,ve={}){this.urlSerializer=C,this.transitions=B,this.viewportScroller=Q,this.zone=pe,this.options=ve,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},ve.scrollPositionRestoration=ve.scrollPositionRestoration||"disabled",ve.anchorScrolling=ve.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(C=>{C instanceof qs?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=C.navigationTrigger,this.restoredId=C.restoredState?C.restoredState.navigationId:0):C instanceof Xs&&(this.lastId=C.id,this.scheduleScrollEvent(C,this.urlSerializer.parse(C.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(C=>{C instanceof sn&&(C.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(C.position):C.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(C.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(C,B){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new sn(C,"popstate"===this.lastSource?this.store[this.restoredId]:null,B))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}}return P.\u0275fac=function(C){E.$Z()},P.\u0275prov=E.Yz7({token:P,factory:P.\u0275fac}),P})();var Is=(()=>((Is=Is||{})[Is.COMPLETE=0]="COMPLETE",Is[Is.FAILED=1]="FAILED",Is[Is.REDIRECTING=2]="REDIRECTING",Is))();const qu=!1;function _u(P,R){return{\u0275kind:P,\u0275providers:R}}const xs=new E.OlP("",{providedIn:"root",factory:()=>!1});function Ka(){const P=(0,E.f3M)(E.zs3);return R=>{const C=P.get(E.z2F);if(R!==C.components[0])return;const B=P.get(Oo),Q=P.get(Ku);1===P.get(Lt)&&B.initialNavigation(),P.get(Gs,null,E.XFs.Optional)?.setUpPreloading(),P.get(Nu,null,E.XFs.Optional)?.init(),B.resetRootComponentType(C.componentTypes[0]),Q.closed||(Q.next(),Q.unsubscribe())}}const Ku=new E.OlP(qu?"bootstrap done indicator":"",{factory:()=>new dt.x}),Lt=new E.OlP(qu?"initial navigation":"",{providedIn:"root",factory:()=>1});function fi(){let P=[];return P=qu?[{provide:E.Xts,multi:!0,useFactory:()=>{const R=(0,E.f3M)(Oo);return()=>R.events.subscribe(C=>{console.group?.(`Router Event: ${C.constructor.name}`),console.log(function Sn(P){if(!("type"in P))return`Unknown Router Event: ${P.constructor.name}`;switch(P.type){case 14:return`ActivationEnd(path: '${P.snapshot.routeConfig?.path||""}')`;case 13:return`ActivationStart(path: '${P.snapshot.routeConfig?.path||""}')`;case 12:return`ChildActivationEnd(path: '${P.snapshot.routeConfig?.path||""}')`;case 11:return`ChildActivationStart(path: '${P.snapshot.routeConfig?.path||""}')`;case 8:return`GuardsCheckEnd(id: ${P.id}, url: '${P.url}', urlAfterRedirects: '${P.urlAfterRedirects}', state: ${P.state}, shouldActivate: ${P.shouldActivate})`;case 7:return`GuardsCheckStart(id: ${P.id}, url: '${P.url}', urlAfterRedirects: '${P.urlAfterRedirects}', state: ${P.state})`;case 2:return`NavigationCancel(id: ${P.id}, url: '${P.url}')`;case 16:return`NavigationSkipped(id: ${P.id}, url: '${P.url}')`;case 1:return`NavigationEnd(id: ${P.id}, url: '${P.url}', urlAfterRedirects: '${P.urlAfterRedirects}')`;case 3:return`NavigationError(id: ${P.id}, url: '${P.url}', error: ${P.error})`;case 0:return`NavigationStart(id: ${P.id}, url: '${P.url}')`;case 6:return`ResolveEnd(id: ${P.id}, url: '${P.url}', urlAfterRedirects: '${P.urlAfterRedirects}', state: ${P.state})`;case 5:return`ResolveStart(id: ${P.id}, url: '${P.url}', urlAfterRedirects: '${P.urlAfterRedirects}', state: ${P.state})`;case 10:return`RouteConfigLoadEnd(path: ${P.route.path})`;case 9:return`RouteConfigLoadStart(path: ${P.route.path})`;case 4:return`RoutesRecognized(id: ${P.id}, url: '${P.url}', urlAfterRedirects: '${P.urlAfterRedirects}', state: ${P.state})`;case 15:return`Scroll(anchor: '${P.anchor}', position: '${P.position?`${P.position[0]}, ${P.position[1]}`:null}')`}}(C)),console.log(C),console.groupEnd?.()})}}]:[],_u(1,P)}const Gs=new E.OlP(qu?"router preloader":"");function Ya(P){return _u(0,[{provide:Gs,useExisting:al},{provide:qa,useExisting:P}])}const Eo=!1,ka=new E.OlP(Eo?"router duplicate forRoot guard":"ROUTER_FORROOT_GUARD"),ya=[Fe.Ye,{provide:Rr,useClass:Ir},Oo,uo,{provide:Do,useFactory:function lc(P){return P.routerState.root},deps:[Oo]},Fn,Eo?{provide:xs,useValue:!0}:[]];function oo(){return new E.PXZ("Router",Oo)}let $i=(()=>{class P{constructor(C){}static forRoot(C,B){return{ngModule:P,providers:[ya,Eo&&B?.enableTracing?fi().\u0275providers:[],{provide:Mi,multi:!0,useValue:C},{provide:ka,useFactory:zo,deps:[[Oo,new E.FiY,new E.tp0]]},{provide:lu,useValue:B||{}},B?.useHash?{provide:Fe.S$,useClass:Fe.Do}:{provide:Fe.S$,useClass:Fe.b0},{provide:Nu,useFactory:()=>{const P=(0,E.f3M)(Fe.EM),R=(0,E.f3M)(E.R0b),C=(0,E.f3M)(lu),B=(0,E.f3M)(Bt),Q=(0,E.f3M)(Rr);return C.scrollOffset&&P.setOffset(C.scrollOffset),new $o(Q,B,P,R,C)}},B?.preloadingStrategy?Ya(B.preloadingStrategy).\u0275providers:[],{provide:E.PXZ,multi:!0,useFactory:oo},B?.initialNavigation?co(B):[],[{provide:Yu,useFactory:Ka},{provide:E.tb,multi:!0,useExisting:Yu}]]}}static forChild(C){return{ngModule:P,providers:[{provide:Mi,multi:!0,useValue:C}]}}}return P.\u0275fac=function(C){return new(C||P)(E.LFG(ka,8))},P.\u0275mod=E.oAB({type:P}),P.\u0275inj=E.cJS({imports:[Yo]}),P})();function zo(P){if(Eo&&P)throw new E.vHH(4007,"The Router was provided more than once. This can happen if 'forRoot' is used outside of the root injector. Lazy loaded modules should use RouterModule.forChild() instead.");return"guarded"}function co(P){return["disabled"===P.initialNavigation?_u(3,[{provide:E.ip1,multi:!0,useFactory:()=>{const R=(0,E.f3M)(Oo);return()=>{R.setUpLocationChangeListener()}}},{provide:Lt,useValue:2}]).\u0275providers:[],"enabledBlocking"===P.initialNavigation?_u(2,[{provide:Lt,useValue:0},{provide:E.ip1,multi:!0,deps:[E.zs3],useFactory:R=>{const C=R.get(Fe.V_,Promise.resolve());return()=>C.then(()=>new Promise(B=>{const Q=R.get(Oo),pe=R.get(Ku);(function Vl(P,R){P.events.pipe((0,J.h)(C=>C instanceof Xs||C instanceof ar||C instanceof Fo||C instanceof Ks),(0,Me.U)(C=>C instanceof Xs||C instanceof Ks?Is.COMPLETE:C instanceof ar&&(0===C.code||1===C.code)?Is.REDIRECTING:Is.FAILED),(0,J.h)(C=>C!==Is.REDIRECTING),(0,Mt.q)(1)).subscribe(()=>{R()})})(Q,()=>{B(!0)}),R.get(Bt).afterPreactivation=()=>(B(!0),pe.closed?(0,re.of)(void 0):pe),Q.initialNavigation()}))}}]).\u0275providers:[]]}const Yu=new E.OlP(Eo?"Router Initializer":"")},3942:(Qt,it,K)=>{"use strict";K.d(it,{Z:()=>Pt});var E=K(2090),M=K(4859),re=K(9681),Oe=K(1877);class De{constructor(at,nt){this._delegate=at,this.firebase=nt,(0,re._addComponent)(at,new M.wA("app-compat",()=>this,"PUBLIC")),this.container=at.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(at){this._delegate.automaticDataCollectionEnabled=at}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(at=>{this._delegate.checkDestroyed(),at()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,re.deleteApp)(this._delegate)))}_getService(at,nt=re._DEFAULT_ENTRY_NAME){var We;this._delegate.checkDestroyed();const dt=this._delegate.container.getProvider(at);return!dt.isInitialized()&&"EXPLICIT"===(null===(We=dt.getComponent())||void 0===We?void 0:We.instantiationMode)&&dt.initialize(),dt.getImmediate({identifier:nt})}_removeServiceInstance(at,nt=re._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(at).clearInstance(nt)}_addComponent(at){(0,re._addComponent)(this._delegate,at)}_addOrOverwriteComponent(at){(0,re._addOrOverwriteComponent)(this._delegate,at)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const Ge=new E.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),Ie=function Ke(){const et=function He(et){const at={},nt={__esModule:!0,initializeApp:function Fe(St,J={}){const he=re.initializeApp(St,J);if((0,E.r3)(at,he.name))return at[he.name];const Ne=new et(he,nt);return at[he.name]=Ne,Ne},app:dt,registerVersion:re.registerVersion,setLogLevel:re.setLogLevel,onLog:re.onLog,apps:null,SDK_VERSION:re.SDK_VERSION,INTERNAL:{registerComponent:function Et(St){const J=St.name,he=J.replace("-compat","");if(re._registerComponent(St)&&"PUBLIC"===St.type){const Ne=(mt=dt())=>{if("function"!=typeof mt[he])throw Ge.create("invalid-app-argument",{appName:J});return mt[he]()};void 0!==St.serviceProps&&(0,E.ZB)(Ne,St.serviceProps),nt[he]=Ne,et.prototype[he]=function(...mt){return this._getService.bind(this,J).apply(this,St.multipleInstances?mt:[])}}return"PUBLIC"===St.type?nt[he]:null},removeApp:function We(St){delete at[St]},useAsService:function Mt(St,J){return"serverAuth"===J?null:J},modularAPIs:re}};function dt(St){if(!(0,E.r3)(at,St=St||re._DEFAULT_ENTRY_NAME))throw Ge.create("no-app",{appName:St});return at[St]}return nt.default=nt,Object.defineProperty(nt,"apps",{get:function Me(){return Object.keys(at).map(St=>at[St])}}),dt.App=et,nt}(De);return et.INTERNAL=Object.assign(Object.assign({},et.INTERNAL),{createFirebaseNamespace:Ke,extendNamespace:function at(nt){(0,E.ZB)(et,nt)},createSubscribe:E.ne,ErrorFactory:E.LL,deepExtend:E.ZB}),et}(),Pe=new Oe.Yd("@firebase/app-compat");if((0,E.jU)()&&void 0!==self.firebase){Pe.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const et=self.firebase.SDK_VERSION;et&&et.indexOf("LITE")>=0&&Pe.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const Pt=Ie;!function ae(et){(0,re.registerVersion)("@firebase/app-compat","0.2.4",et)}()},9681:(Qt,it,K)=>{"use strict";K.r(it),K.d(it,{FirebaseError:()=>Oe.ZR,SDK_VERSION:()=>mr,_DEFAULT_ENTRY_NAME:()=>lt,_addComponent:()=>_n,_addOrOverwriteComponent:()=>Ot,_apps:()=>Nt,_clearComponents:()=>dr,_components:()=>jt,_getProvider:()=>zt,_registerComponent:()=>rn,_removeServiceInstance:()=>bn,deleteApp:()=>fr,getApp:()=>kr,getApps:()=>ii,initializeApp:()=>qn,onLog:()=>Tn,registerVersion:()=>Ar,setLogLevel:()=>ci});var E=K(5861),M=K(4859),re=K(1877),Oe=K(2090),De=K(8766);class ke{constructor(Xt){this.container=Xt}getPlatformInfoString(){return this.container.getProviders().map(yn=>{if(function Ge(mn){return"VERSION"===mn.getComponent()?.type}(yn)){const tr=yn.getImmediate();return`${tr.library}/${tr.version}`}return null}).filter(yn=>yn).join(" ")}}const He="@firebase/app",Ie=new re.Yd("@firebase/app"),lt="[DEFAULT]",gt={[He]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},Nt=new Map,jt=new Map;function _n(mn,Xt){try{mn.container.addComponent(Xt)}catch(yn){Ie.debug(`Component ${Xt.name} failed to register with FirebaseApp ${mn.name}`,yn)}}function Ot(mn,Xt){mn.container.addOrOverwriteComponent(Xt)}function rn(mn){const Xt=mn.name;if(jt.has(Xt))return Ie.debug(`There were multiple attempts to register component ${Xt}.`),!1;jt.set(Xt,mn);for(const yn of Nt.values())_n(yn,mn);return!0}function zt(mn,Xt){const yn=mn.container.getProvider("heartbeat").getImmediate({optional:!0});return yn&&yn.triggerHeartbeat(),mn.container.getProvider(Xt)}function bn(mn,Xt,yn=lt){zt(mn,Xt).clearInstance(yn)}function dr(){jt.clear()}const Zn=new Oe.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class Vr{constructor(Xt,yn,tr){this._isDeleted=!1,this._options=Object.assign({},Xt),this._config=Object.assign({},yn),this._name=yn.name,this._automaticDataCollectionEnabled=yn.automaticDataCollectionEnabled,this._container=tr,this.container.addComponent(new M.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Xt){this.checkDestroyed(),this._automaticDataCollectionEnabled=Xt}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(Xt){this._isDeleted=Xt}checkDestroyed(){if(this.isDeleted)throw Zn.create("app-deleted",{appName:this._name})}}const mr="9.17.2";function qn(mn,Xt={}){let yn=mn;"object"!=typeof Xt&&(Xt={name:Xt});const tr=Object.assign({name:lt,automaticDataCollectionEnabled:!1},Xt),nr=tr.name;if("string"!=typeof nr||!nr)throw Zn.create("bad-app-name",{appName:String(nr)});if(yn||(yn=(0,Oe.aH)()),!yn)throw Zn.create("no-options");const vr=Nt.get(nr);if(vr){if((0,Oe.vZ)(yn,vr.options)&&(0,Oe.vZ)(tr,vr.config))return vr;throw Zn.create("duplicate-app",{appName:nr})}const Jr=new M.H0(nr);for(const Ze of jt.values())Jr.addComponent(Ze);const tt=new Vr(yn,tr,Jr);return Nt.set(nr,tt),tt}function kr(mn=lt){const Xt=Nt.get(mn);if(!Xt&&mn===lt)return qn();if(!Xt)throw Zn.create("no-app",{appName:mn});return Xt}function ii(){return Array.from(Nt.values())}function fr(mn){return Bn.apply(this,arguments)}function Bn(){return(Bn=(0,E.Z)(function*(mn){const Xt=mn.name;Nt.has(Xt)&&(Nt.delete(Xt),yield Promise.all(mn.container.getProviders().map(yn=>yn.delete())),mn.isDeleted=!0)})).apply(this,arguments)}function Ar(mn,Xt,yn){var tr;let nr=null!==(tr=gt[mn])&&void 0!==tr?tr:mn;yn&&(nr+=`-${yn}`);const vr=nr.match(/\s|\//),Jr=Xt.match(/\s|\//);if(vr||Jr){const tt=[`Unable to register library "${nr}" with version "${Xt}":`];return vr&&tt.push(`library name "${nr}" contains illegal characters (whitespace or "/")`),vr&&Jr&&tt.push("and"),Jr&&tt.push(`version name "${Xt}" contains illegal characters (whitespace or "/")`),void Ie.warn(tt.join(" "))}rn(new M.wA(`${nr}-version`,()=>({library:nr,version:Xt}),"VERSION"))}function Tn(mn,Xt){if(null!==mn&&"function"!=typeof mn)throw Zn.create("invalid-log-argument");(0,re.Am)(mn,Xt)}function ci(mn){(0,re.Ub)(mn)}const Hr="firebase-heartbeat-database",pr=1,gi="firebase-heartbeat-store";let Ri=null;function er(){return Ri||(Ri=(0,De.X3)(Hr,pr,{upgrade:(mn,Xt)=>{0===Xt&&mn.createObjectStore(gi)}}).catch(mn=>{throw Zn.create("idb-open",{originalErrorMessage:mn.message})})),Ri}function or(){return(or=(0,E.Z)(function*(mn){try{return(yield er()).transaction(gi).objectStore(gi).get(Qn(mn))}catch(Xt){if(Xt instanceof Oe.ZR)Ie.warn(Xt.message);else{const yn=Zn.create("idb-get",{originalErrorMessage:Xt?.message});Ie.warn(yn.message)}}})).apply(this,arguments)}function Us(mn,Xt){return Lr.apply(this,arguments)}function Lr(){return(Lr=(0,E.Z)(function*(mn,Xt){try{const tr=(yield er()).transaction(gi,"readwrite");return yield tr.objectStore(gi).put(Xt,Qn(mn)),tr.done}catch(yn){if(yn instanceof Oe.ZR)Ie.warn(yn.message);else{const tr=Zn.create("idb-set",{originalErrorMessage:yn?.message});Ie.warn(tr.message)}}})).apply(this,arguments)}function Qn(mn){return`${mn.name}!${mn.options.appId}`}class Ki{constructor(Xt){this.container=Xt,this._heartbeatsCache=null;const yn=this.container.getProvider("app").getImmediate();this._storage=new Ir(yn),this._heartbeatsCachePromise=this._storage.read().then(tr=>(this._heartbeatsCache=tr,tr))}triggerHeartbeat(){var Xt=this;return(0,E.Z)(function*(){const tr=Xt.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),nr=Fr();if(null===Xt._heartbeatsCache&&(Xt._heartbeatsCache=yield Xt._heartbeatsCachePromise),Xt._heartbeatsCache.lastSentHeartbeatDate!==nr&&!Xt._heartbeatsCache.heartbeats.some(vr=>vr.date===nr))return Xt._heartbeatsCache.heartbeats.push({date:nr,agent:tr}),Xt._heartbeatsCache.heartbeats=Xt._heartbeatsCache.heartbeats.filter(vr=>{const Jr=new Date(vr.date).valueOf();return Date.now()-Jr<=2592e6}),Xt._storage.overwrite(Xt._heartbeatsCache)})()}getHeartbeatsHeader(){var Xt=this;return(0,E.Z)(function*(){if(null===Xt._heartbeatsCache&&(yield Xt._heartbeatsCachePromise),null===Xt._heartbeatsCache||0===Xt._heartbeatsCache.heartbeats.length)return"";const yn=Fr(),{heartbeatsToSend:tr,unsentEntries:nr}=function Rr(mn,Xt=1024){const yn=[];let tr=mn.slice();for(const nr of mn){const vr=yn.find(Jr=>Jr.agent===nr.agent);if(vr){if(vr.dates.push(nr.date),di(yn)>Xt){vr.dates.pop();break}}else if(yn.push({agent:nr.agent,dates:[nr.date]}),di(yn)>Xt){yn.pop();break}tr=tr.slice(1)}return{heartbeatsToSend:yn,unsentEntries:tr}}(Xt._heartbeatsCache.heartbeats),vr=(0,Oe.L)(JSON.stringify({version:2,heartbeats:tr}));return Xt._heartbeatsCache.lastSentHeartbeatDate=yn,nr.length>0?(Xt._heartbeatsCache.heartbeats=nr,yield Xt._storage.overwrite(Xt._heartbeatsCache)):(Xt._heartbeatsCache.heartbeats=[],Xt._storage.overwrite(Xt._heartbeatsCache)),vr})()}}function Fr(){return(new Date).toISOString().substring(0,10)}class Ir{constructor(Xt){this.app=Xt,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,E.Z)(function*(){return!!(0,Oe.hl)()&&(0,Oe.eu)().then(()=>!0).catch(()=>!1)})()}read(){var Xt=this;return(0,E.Z)(function*(){return(yield Xt._canUseIndexedDBPromise)&&(yield function Wn(mn){return or.apply(this,arguments)}(Xt.app))||{heartbeats:[]}})()}overwrite(Xt){var yn=this;return(0,E.Z)(function*(){var tr;if(yield yn._canUseIndexedDBPromise){const vr=yield yn.read();return Us(yn.app,{lastSentHeartbeatDate:null!==(tr=Xt.lastSentHeartbeatDate)&&void 0!==tr?tr:vr.lastSentHeartbeatDate,heartbeats:Xt.heartbeats})}})()}add(Xt){var yn=this;return(0,E.Z)(function*(){var tr;if(yield yn._canUseIndexedDBPromise){const vr=yield yn.read();return Us(yn.app,{lastSentHeartbeatDate:null!==(tr=Xt.lastSentHeartbeatDate)&&void 0!==tr?tr:vr.lastSentHeartbeatDate,heartbeats:[...vr.heartbeats,...Xt.heartbeats]})}})()}}function di(mn){return(0,Oe.L)(JSON.stringify({version:2,heartbeats:mn})).length}!function kn(mn){rn(new M.wA("platform-logger",Xt=>new ke(Xt),"PRIVATE")),rn(new M.wA("heartbeat",Xt=>new Ki(Xt),"PRIVATE")),Ar(He,"0.9.4",mn),Ar(He,"0.9.4","esm2017"),Ar("fire-js","")}("")},4859:(Qt,it,K)=>{"use strict";K.d(it,{H0:()=>He,wA:()=>re});var E=K(5861),M=K(2090);class re{constructor(Ie,Pe,Re){this.name=Ie,this.instanceFactory=Pe,this.type=Re,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(Ie){return this.instantiationMode=Ie,this}setMultipleInstances(Ie){return this.multipleInstances=Ie,this}setServiceProps(Ie){return this.serviceProps=Ie,this}setInstanceCreatedCallback(Ie){return this.onInstanceCreated=Ie,this}}const Oe="[DEFAULT]";class De{constructor(Ie,Pe){this.name=Ie,this.container=Pe,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(Ie){const Pe=this.normalizeInstanceIdentifier(Ie);if(!this.instancesDeferred.has(Pe)){const Re=new M.BH;if(this.instancesDeferred.set(Pe,Re),this.isInitialized(Pe)||this.shouldAutoInitialize())try{const yt=this.getOrInitializeService({instanceIdentifier:Pe});yt&&Re.resolve(yt)}catch{}}return this.instancesDeferred.get(Pe).promise}getImmediate(Ie){var Pe;const Re=this.normalizeInstanceIdentifier(Ie?.identifier),yt=null!==(Pe=Ie?.optional)&&void 0!==Pe&&Pe;if(!this.isInitialized(Re)&&!this.shouldAutoInitialize()){if(yt)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:Re})}catch(ae){if(yt)return null;throw ae}}getComponent(){return this.component}setComponent(Ie){if(Ie.name!==this.name)throw Error(`Mismatching Component ${Ie.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=Ie,this.shouldAutoInitialize()){if(function Ge(Ke){return"EAGER"===Ke.instantiationMode}(Ie))try{this.getOrInitializeService({instanceIdentifier:Oe})}catch{}for(const[Pe,Re]of this.instancesDeferred.entries()){const yt=this.normalizeInstanceIdentifier(Pe);try{const ae=this.getOrInitializeService({instanceIdentifier:yt});Re.resolve(ae)}catch{}}}}clearInstance(Ie=Oe){this.instancesDeferred.delete(Ie),this.instancesOptions.delete(Ie),this.instances.delete(Ie)}delete(){var Ie=this;return(0,E.Z)(function*(){const Pe=Array.from(Ie.instances.values());yield Promise.all([...Pe.filter(Re=>"INTERNAL"in Re).map(Re=>Re.INTERNAL.delete()),...Pe.filter(Re=>"_delete"in Re).map(Re=>Re._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(Ie=Oe){return this.instances.has(Ie)}getOptions(Ie=Oe){return this.instancesOptions.get(Ie)||{}}initialize(Ie={}){const{options:Pe={}}=Ie,Re=this.normalizeInstanceIdentifier(Ie.instanceIdentifier);if(this.isInitialized(Re))throw Error(`${this.name}(${Re}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const yt=this.getOrInitializeService({instanceIdentifier:Re,options:Pe});for(const[ae,Pt]of this.instancesDeferred.entries())Re===this.normalizeInstanceIdentifier(ae)&&Pt.resolve(yt);return yt}onInit(Ie,Pe){var Re;const yt=this.normalizeInstanceIdentifier(Pe),ae=null!==(Re=this.onInitCallbacks.get(yt))&&void 0!==Re?Re:new Set;ae.add(Ie),this.onInitCallbacks.set(yt,ae);const Pt=this.instances.get(yt);return Pt&&Ie(Pt,yt),()=>{ae.delete(Ie)}}invokeOnInitCallbacks(Ie,Pe){const Re=this.onInitCallbacks.get(Pe);if(Re)for(const yt of Re)try{yt(Ie,Pe)}catch{}}getOrInitializeService({instanceIdentifier:Ie,options:Pe={}}){let Re=this.instances.get(Ie);if(!Re&&this.component&&(Re=this.component.instanceFactory(this.container,{instanceIdentifier:(Ke=Ie,Ke===Oe?void 0:Ke),options:Pe}),this.instances.set(Ie,Re),this.instancesOptions.set(Ie,Pe),this.invokeOnInitCallbacks(Re,Ie),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,Ie,Re)}catch{}var Ke;return Re||null}normalizeInstanceIdentifier(Ie=Oe){return this.component?this.component.multipleInstances?Ie:Oe:Ie}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class He{constructor(Ie){this.name=Ie,this.providers=new Map}addComponent(Ie){const Pe=this.getProvider(Ie.name);if(Pe.isComponentSet())throw new Error(`Component ${Ie.name} has already been registered with ${this.name}`);Pe.setComponent(Ie)}addOrOverwriteComponent(Ie){this.getProvider(Ie.name).isComponentSet()&&this.providers.delete(Ie.name),this.addComponent(Ie)}getProvider(Ie){if(this.providers.has(Ie))return this.providers.get(Ie);const Pe=new De(Ie,this);return this.providers.set(Ie,Pe),Pe}getProviders(){return Array.from(this.providers.values())}}},1877:(Qt,it,K)=>{"use strict";K.d(it,{Am:()=>Ke,Ub:()=>He,Yd:()=>Ge,in:()=>M});const E=[];var M=(()=>{return(Ie=M||(M={}))[Ie.DEBUG=0]="DEBUG",Ie[Ie.VERBOSE=1]="VERBOSE",Ie[Ie.INFO=2]="INFO",Ie[Ie.WARN=3]="WARN",Ie[Ie.ERROR=4]="ERROR",Ie[Ie.SILENT=5]="SILENT",M;var Ie})();const re={debug:M.DEBUG,verbose:M.VERBOSE,info:M.INFO,warn:M.WARN,error:M.ERROR,silent:M.SILENT},Oe=M.INFO,De={[M.DEBUG]:"log",[M.VERBOSE]:"log",[M.INFO]:"info",[M.WARN]:"warn",[M.ERROR]:"error"},ke=(Ie,Pe,...Re)=>{if(Pe<Ie.logLevel)return;const yt=(new Date).toISOString(),ae=De[Pe];if(!ae)throw new Error(`Attempted to log a message with an invalid logType (value: ${Pe})`);console[ae](`[${yt}]  ${Ie.name}:`,...Re)};class Ge{constructor(Pe){this.name=Pe,this._logLevel=Oe,this._logHandler=ke,this._userLogHandler=null,E.push(this)}get logLevel(){return this._logLevel}set logLevel(Pe){if(!(Pe in M))throw new TypeError(`Invalid value "${Pe}" assigned to \`logLevel\``);this._logLevel=Pe}setLogLevel(Pe){this._logLevel="string"==typeof Pe?re[Pe]:Pe}get logHandler(){return this._logHandler}set logHandler(Pe){if("function"!=typeof Pe)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=Pe}get userLogHandler(){return this._userLogHandler}set userLogHandler(Pe){this._userLogHandler=Pe}debug(...Pe){this._userLogHandler&&this._userLogHandler(this,M.DEBUG,...Pe),this._logHandler(this,M.DEBUG,...Pe)}log(...Pe){this._userLogHandler&&this._userLogHandler(this,M.VERBOSE,...Pe),this._logHandler(this,M.VERBOSE,...Pe)}info(...Pe){this._userLogHandler&&this._userLogHandler(this,M.INFO,...Pe),this._logHandler(this,M.INFO,...Pe)}warn(...Pe){this._userLogHandler&&this._userLogHandler(this,M.WARN,...Pe),this._logHandler(this,M.WARN,...Pe)}error(...Pe){this._userLogHandler&&this._userLogHandler(this,M.ERROR,...Pe),this._logHandler(this,M.ERROR,...Pe)}}function He(Ie){E.forEach(Pe=>{Pe.setLogLevel(Ie)})}function Ke(Ie,Pe){for(const Re of E){let yt=null;Pe&&Pe.level&&(yt=re[Pe.level]),Re.userLogHandler=null===Ie?null:(ae,Pt,...et)=>{const at=et.map(nt=>{if(null==nt)return null;if("string"==typeof nt)return nt;if("number"==typeof nt||"boolean"==typeof nt)return nt.toString();if(nt instanceof Error)return nt.message;try{return JSON.stringify(nt)}catch{return null}}).filter(nt=>nt).join(" ");Pt>=(yt??ae.logLevel)&&Ie({level:M[Pt].toLowerCase(),message:at,args:et,type:ae.name})}}}},259:(Qt,it,K)=>{"use strict";K.d(it,{C6:()=>E.getApps,Mq:()=>E.getApp});var E=K(9681);(0,E.registerVersion)("firebase","9.17.2","app")},9260:(Qt,it,K)=>{"use strict";K.d(it,{Z:()=>E.Z});var E=K(3942);E.Z.registerVersion("firebase","9.17.2","app-compat")},4217:(Qt,it,K)=>{"use strict";K.r(it);var E=K(5861),M=K(3942),re=K(2090),Oe=K(9681),De=K(1877),ke=K(655),Ge=K(4859);const Ke={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},Re_EMAIL_SIGNIN="EMAIL_SIGNIN",Re_PASSWORD_RESET="PASSWORD_RESET",Re_RECOVER_EMAIL="RECOVER_EMAIL",Re_REVERT_SECOND_FACTOR_ADDITION="REVERT_SECOND_FACTOR_ADDITION",Re_VERIFY_AND_CHANGE_EMAIL="VERIFY_AND_CHANGE_EMAIL",Re_VERIFY_EMAIL="VERIFY_EMAIL";const Pt=function yt(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},et=function ae(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},at=new re.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),We=new De.Yd("@firebase/auth");function dt(I,...y){We.logLevel<=De.in.ERROR&&We.error(`Auth (${Oe.SDK_VERSION}): ${I}`,...y)}function Fe(I,...y){throw St(I,...y)}function Me(I,...y){return St(I,...y)}function Et(I,y,T){const k=Object.assign(Object.assign({},et()),{[y]:T});return new re.LL("auth","Firebase",k).create(y,{appName:I.name})}function Mt(I,y,T){if(!(y instanceof T))throw T.name!==y.constructor.name&&Fe(I,"argument-error"),Et(I,"argument-error",`Type of ${y.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function St(I,...y){if("string"!=typeof I){const T=y[0],k=[...y.slice(1)];return k[0]&&(k[0].appName=I.name),I._errorFactory.create(T,...k)}return at.create(I,...y)}function J(I,y,...T){if(!I)throw St(y,...T)}function he(I){const y="INTERNAL ASSERTION FAILED: "+I;throw dt(y),new Error(y)}function Ne(I,y){I||he(y)}const mt=new Map;function st(I){Ne(I instanceof Function,"Expected a class definition");let y=mt.get(I);return y?(Ne(y instanceof I,"Instance stored in cache mismatched with class"),y):(y=new I,mt.set(I,y),y)}function ut(){var I;return typeof self<"u"&&(null===(I=self.location)||void 0===I?void 0:I.href)||""}function Je(){return"http:"===ot()||"https:"===ot()}function ot(){var I;return typeof self<"u"&&(null===(I=self.location)||void 0===I?void 0:I.protocol)||null}class Nt{constructor(y,T){this.shortDelay=y,this.longDelay=T,Ne(T>y,"Short delay should be less than long delay!"),this.isMobile=(0,re.uI)()||(0,re.b$)()}get(){return function lt(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(Je()||(0,re.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function jt(I,y){Ne(I.emulator,"Emulator should always be set here");const{url:T}=I.emulator;return y?`${T}${y.startsWith("/")?y.slice(1):y}`:T}class _n{static initialize(y,T,k){this.fetchImpl=y,T&&(this.headersImpl=T),k&&(this.responseImpl=k)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:void he("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:void he("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:void he("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Ot={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},rn=new Nt(3e4,6e4);function zt(I,y){return I.tenantId&&!y.tenantId?Object.assign(Object.assign({},y),{tenantId:I.tenantId}):y}function bn(I,y,T,k){return dr.apply(this,arguments)}function dr(){return(dr=(0,E.Z)(function*(I,y,T,k,se={}){return Hn(I,se,(0,E.Z)(function*(){let Ce={},Tt={};k&&("GET"===y?Tt=k:Ce={body:JSON.stringify(k)});const Zt=(0,re.xO)(Object.assign({key:I.config.apiKey},Tt)).slice(1),Ln=yield I._getAdditionalHeaders();return Ln["Content-Type"]="application/json",I.languageCode&&(Ln["X-Firebase-Locale"]=I.languageCode),_n.fetch()(qn(I,I.config.apiHost,T,Zt),Object.assign({method:y,headers:Ln,referrerPolicy:"no-referrer"},Ce))}))})).apply(this,arguments)}function Hn(I,y,T){return Zn.apply(this,arguments)}function Zn(){return(Zn=(0,E.Z)(function*(I,y,T){I._canInitEmulator=!1;const k=Object.assign(Object.assign({},Ot),y);try{const se=new kr(I),Ce=yield Promise.race([T(),se.promise]);se.clearNetworkTimeout();const Tt=yield Ce.json();if("needConfirmation"in Tt)throw ii(I,"account-exists-with-different-credential",Tt);if(Ce.ok&&!("errorMessage"in Tt))return Tt;{const Zt=Ce.ok?Tt.errorMessage:Tt.error.message,[Ln,lr]=Zt.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===Ln)throw ii(I,"credential-already-in-use",Tt);if("EMAIL_EXISTS"===Ln)throw ii(I,"email-already-in-use",Tt);if("USER_DISABLED"===Ln)throw ii(I,"user-disabled",Tt);const Br=k[Ln]||Ln.toLowerCase().replace(/[_\s]+/g,"-");if(lr)throw Et(I,Br,lr);Fe(I,Br)}}catch(se){if(se instanceof re.ZR)throw se;Fe(I,"internal-error",{message:String(se)})}})).apply(this,arguments)}function Vr(I,y,T,k){return mr.apply(this,arguments)}function mr(){return(mr=(0,E.Z)(function*(I,y,T,k,se={}){const Ce=yield bn(I,y,T,k,se);return"mfaPendingCredential"in Ce&&Fe(I,"multi-factor-auth-required",{_serverResponse:Ce}),Ce})).apply(this,arguments)}function qn(I,y,T,k){const se=`${y}${T}?${k}`;return I.config.emulator?jt(I.config,se):`${I.config.apiScheme}://${se}`}class kr{constructor(y){this.auth=y,this.timer=null,this.promise=new Promise((T,k)=>{this.timer=setTimeout(()=>k(Me(this.auth,"network-request-failed")),rn.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function ii(I,y,T){const k={appName:I.name};T.email&&(k.email=T.email),T.phoneNumber&&(k.phoneNumber=T.phoneNumber);const se=Me(I,y,k);return se.customData._tokenResponse=T,se}function Bn(){return(Bn=(0,E.Z)(function*(I,y){return bn(I,"POST","/v1/accounts:delete",y)})).apply(this,arguments)}function Tn(){return(Tn=(0,E.Z)(function*(I,y){return bn(I,"POST","/v1/accounts:update",y)})).apply(this,arguments)}function Hr(){return(Hr=(0,E.Z)(function*(I,y){return bn(I,"POST","/v1/accounts:lookup",y)})).apply(this,arguments)}function pr(I){if(I)try{const y=new Date(Number(I));if(!isNaN(y.getTime()))return y.toUTCString()}catch{}}function er(){return(er=(0,E.Z)(function*(I,y=!1){const T=(0,re.m9)(I),k=yield T.getIdToken(y),se=or(k);J(se&&se.exp&&se.auth_time&&se.iat,T.auth,"internal-error");const Ce="object"==typeof se.firebase?se.firebase:void 0,Tt=Ce?.sign_in_provider;return{claims:se,token:k,authTime:pr(Wn(se.auth_time)),issuedAtTime:pr(Wn(se.iat)),expirationTime:pr(Wn(se.exp)),signInProvider:Tt||null,signInSecondFactor:Ce?.sign_in_second_factor||null}})).apply(this,arguments)}function Wn(I){return 1e3*Number(I)}function or(I){const[y,T,k]=I.split(".");if(void 0===y||void 0===T||void 0===k)return dt("JWT malformed, contained fewer than 3 sections"),null;try{const se=(0,re.tV)(T);return se?JSON.parse(se):(dt("Failed to decode base64 JWT payload"),null)}catch(se){return dt("Caught error parsing JWT payload as JSON",se?.toString()),null}}function Lr(I,y){return Qn.apply(this,arguments)}function Qn(){return(Qn=(0,E.Z)(function*(I,y,T=!1){if(T)return y;try{return yield y}catch(k){throw k instanceof re.ZR&&function ti({code:I}){return"auth/user-disabled"===I||"auth/user-token-expired"===I}(k)&&I.auth.currentUser===I&&(yield I.auth.signOut()),k}})).apply(this,arguments)}class Vi{constructor(y){this.user=y,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(y){var T;if(y){const k=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),k}{this.errorBackoff=3e4;const se=(null!==(T=this.user.stsTokenManager.expirationTime)&&void 0!==T?T:0)-Date.now()-3e5;return Math.max(0,se)}}schedule(y=!1){var T=this;if(!this.isRunning)return;const k=this.getInterval(y);this.timerId=setTimeout((0,E.Z)(function*(){yield T.iteration()}),k)}iteration(){var y=this;return(0,E.Z)(function*(){try{yield y.user.getIdToken(!0)}catch(T){return void("auth/network-request-failed"===T?.code&&y.schedule(!0))}y.schedule()})()}}class Ki{constructor(y,T){this.createdAt=y,this.lastLoginAt=T,this._initializeTime()}_initializeTime(){this.lastSignInTime=pr(this.lastLoginAt),this.creationTime=pr(this.createdAt)}_copy(y){this.createdAt=y.createdAt,this.lastLoginAt=y.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function Fr(I){return Rr.apply(this,arguments)}function Rr(){return Rr=(0,E.Z)(function*(I){var y;const T=I.auth,k=yield I.getIdToken(),se=yield Lr(I,function ci(I,y){return Hr.apply(this,arguments)}(T,{idToken:k}));J(se?.users.length,T,"internal-error");const Ce=se.users[0];I._notifyReloadListener(Ce);const Tt=null!==(y=Ce.providerUserInfo)&&void 0!==y&&y.length?function mn(I){return I.map(y=>{var{providerId:T}=y,k=(0,ke._T)(y,["providerId"]);return{providerId:T,uid:k.rawId||"",displayName:k.displayName||null,email:k.email||null,phoneNumber:k.phoneNumber||null,photoURL:k.photoUrl||null}})}(Ce.providerUserInfo):[],Zt=function kn(I,y){return[...I.filter(k=>!y.some(se=>se.providerId===k.providerId)),...y]}(I.providerData,Tt),Br=!!I.isAnonymous&&!(I.email&&Ce.passwordHash||Zt?.length),Er={uid:Ce.localId,displayName:Ce.displayName||null,photoURL:Ce.photoUrl||null,email:Ce.email||null,emailVerified:Ce.emailVerified||!1,phoneNumber:Ce.phoneNumber||null,tenantId:Ce.tenantId||null,providerData:Zt,metadata:new Ki(Ce.createdAt,Ce.lastLoginAt),isAnonymous:Br};Object.assign(I,Er)}),Rr.apply(this,arguments)}function di(){return(di=(0,E.Z)(function*(I){const y=(0,re.m9)(I);yield Fr(y),yield y.auth._persistUserIfCurrent(y),y.auth._notifyListenersIfCurrent(y)})).apply(this,arguments)}function yn(){return(yn=(0,E.Z)(function*(I,y){const T=yield Hn(I,{},(0,E.Z)(function*(){const k=(0,re.xO)({grant_type:"refresh_token",refresh_token:y}).slice(1),{tokenApiHost:se,apiKey:Ce}=I.config,Tt=qn(I,se,"/v1/token",`key=${Ce}`),Zt=yield I._getAdditionalHeaders();return Zt["Content-Type"]="application/x-www-form-urlencoded",_n.fetch()(Tt,{method:"POST",headers:Zt,body:k})}));return{accessToken:T.access_token,expiresIn:T.expires_in,refreshToken:T.refresh_token}})).apply(this,arguments)}class tr{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(y){J(y.idToken,"internal-error"),J(typeof y.idToken<"u","internal-error"),J(typeof y.refreshToken<"u","internal-error");const T="expiresIn"in y&&typeof y.expiresIn<"u"?Number(y.expiresIn):function Us(I){const y=or(I);return J(y,"internal-error"),J(typeof y.exp<"u","internal-error"),J(typeof y.iat<"u","internal-error"),Number(y.exp)-Number(y.iat)}(y.idToken);this.updateTokensAndExpiration(y.idToken,y.refreshToken,T)}getToken(y,T=!1){var k=this;return(0,E.Z)(function*(){return J(!k.accessToken||k.refreshToken,y,"user-token-expired"),T||!k.accessToken||k.isExpired?k.refreshToken?(yield k.refresh(y,k.refreshToken),k.accessToken):null:k.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(y,T){var k=this;return(0,E.Z)(function*(){const{accessToken:se,refreshToken:Ce,expiresIn:Tt}=yield function Xt(I,y){return yn.apply(this,arguments)}(y,T);k.updateTokensAndExpiration(se,Ce,Number(Tt))})()}updateTokensAndExpiration(y,T,k){this.refreshToken=T||null,this.accessToken=y||null,this.expirationTime=Date.now()+1e3*k}static fromJSON(y,T){const{refreshToken:k,accessToken:se,expirationTime:Ce}=T,Tt=new tr;return k&&(J("string"==typeof k,"internal-error",{appName:y}),Tt.refreshToken=k),se&&(J("string"==typeof se,"internal-error",{appName:y}),Tt.accessToken=se),Ce&&(J("number"==typeof Ce,"internal-error",{appName:y}),Tt.expirationTime=Ce),Tt}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(y){this.accessToken=y.accessToken,this.refreshToken=y.refreshToken,this.expirationTime=y.expirationTime}_clone(){return Object.assign(new tr,this.toJSON())}_performRefresh(){return he("not implemented")}}function nr(I,y){J("string"==typeof I||typeof I>"u","internal-error",{appName:y})}class vr{constructor(y){var{uid:T,auth:k,stsTokenManager:se}=y,Ce=(0,ke._T)(y,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Vi(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=T,this.auth=k,this.stsTokenManager=se,this.accessToken=se.accessToken,this.displayName=Ce.displayName||null,this.email=Ce.email||null,this.emailVerified=Ce.emailVerified||!1,this.phoneNumber=Ce.phoneNumber||null,this.photoURL=Ce.photoURL||null,this.isAnonymous=Ce.isAnonymous||!1,this.tenantId=Ce.tenantId||null,this.providerData=Ce.providerData?[...Ce.providerData]:[],this.metadata=new Ki(Ce.createdAt||void 0,Ce.lastLoginAt||void 0)}getIdToken(y){var T=this;return(0,E.Z)(function*(){const k=yield Lr(T,T.stsTokenManager.getToken(T.auth,y));return J(k,T.auth,"internal-error"),T.accessToken!==k&&(T.accessToken=k,yield T.auth._persistUserIfCurrent(T),T.auth._notifyListenersIfCurrent(T)),k})()}getIdTokenResult(y){return function Ri(I){return er.apply(this,arguments)}(this,y)}reload(){return function Ir(I){return di.apply(this,arguments)}(this)}_assign(y){this!==y&&(J(this.uid===y.uid,this.auth,"internal-error"),this.displayName=y.displayName,this.photoURL=y.photoURL,this.email=y.email,this.emailVerified=y.emailVerified,this.phoneNumber=y.phoneNumber,this.isAnonymous=y.isAnonymous,this.tenantId=y.tenantId,this.providerData=y.providerData.map(T=>Object.assign({},T)),this.metadata._copy(y.metadata),this.stsTokenManager._assign(y.stsTokenManager))}_clone(y){return new vr(Object.assign(Object.assign({},this),{auth:y,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(y){J(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=y,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(y){this.reloadListener?this.reloadListener(y):this.reloadUserInfo=y}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(y,T=!1){var k=this;return(0,E.Z)(function*(){let se=!1;y.idToken&&y.idToken!==k.stsTokenManager.accessToken&&(k.stsTokenManager.updateFromServerResponse(y),se=!0),T&&(yield Fr(k)),yield k.auth._persistUserIfCurrent(k),se&&k.auth._notifyListenersIfCurrent(k)})()}delete(){var y=this;return(0,E.Z)(function*(){const T=yield y.getIdToken();return yield Lr(y,function fr(I,y){return Bn.apply(this,arguments)}(y.auth,{idToken:T})),y.stsTokenManager.clearRefreshToken(),y.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(y=>Object.assign({},y)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(y,T){var k,se,Ce,Tt,Zt,Ln,lr,Br;const Er=null!==(k=T.displayName)&&void 0!==k?k:void 0,Wo=null!==(se=T.email)&&void 0!==se?se:void 0,yl=null!==(Ce=T.phoneNumber)&&void 0!==Ce?Ce:void 0,fh=null!==(Tt=T.photoURL)&&void 0!==Tt?Tt:void 0,Ed=null!==(Zt=T.tenantId)&&void 0!==Zt?Zt:void 0,qc=null!==(Ln=T._redirectEventId)&&void 0!==Ln?Ln:void 0,_l=null!==(lr=T.createdAt)&&void 0!==lr?lr:void 0,Kc=null!==(Br=T.lastLoginAt)&&void 0!==Br?Br:void 0,{uid:ph,emailVerified:fp,isAnonymous:pp,providerData:zl,stsTokenManager:vc}=T;J(ph&&vc,y,"internal-error");const Kn=tr.fromJSON(this.name,vc);J("string"==typeof ph,y,"internal-error"),nr(Er,y.name),nr(Wo,y.name),J("boolean"==typeof fp,y,"internal-error"),J("boolean"==typeof pp,y,"internal-error"),nr(yl,y.name),nr(fh,y.name),nr(Ed,y.name),nr(qc,y.name),nr(_l,y.name),nr(Kc,y.name);const yc=new vr({uid:ph,auth:y,email:Wo,emailVerified:fp,displayName:Er,isAnonymous:pp,photoURL:fh,phoneNumber:yl,tenantId:Ed,stsTokenManager:Kn,createdAt:_l,lastLoginAt:Kc});return zl&&Array.isArray(zl)&&(yc.providerData=zl.map(gh=>Object.assign({},gh))),qc&&(yc._redirectEventId=qc),yc}static _fromIdTokenResponse(y,T,k=!1){return(0,E.Z)(function*(){const se=new tr;se.updateFromServerResponse(T);const Ce=new vr({uid:T.localId,auth:y,stsTokenManager:se,isAnonymous:k});return yield Fr(Ce),Ce})()}}const tt=(()=>{class I{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,E.Z)(function*(){return!0})()}_set(T,k){var se=this;return(0,E.Z)(function*(){se.storage[T]=k})()}_get(T){var k=this;return(0,E.Z)(function*(){const se=k.storage[T];return void 0===se?null:se})()}_remove(T){var k=this;return(0,E.Z)(function*(){delete k.storage[T]})()}_addListener(T,k){}_removeListener(T,k){}}return I.type="NONE",I})();function Ze(I,y,T){return`firebase:${I}:${y}:${T}`}class ht{constructor(y,T,k){this.persistence=y,this.auth=T,this.userKey=k;const{config:se,name:Ce}=this.auth;this.fullUserKey=Ze(this.userKey,se.apiKey,Ce),this.fullPersistenceKey=Ze("persistence",se.apiKey,Ce),this.boundEventHandler=T._onStorageEvent.bind(T),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(y){return this.persistence._set(this.fullUserKey,y.toJSON())}getCurrentUser(){var y=this;return(0,E.Z)(function*(){const T=yield y.persistence._get(y.fullUserKey);return T?vr._fromJSON(y.auth,T):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(y){var T=this;return(0,E.Z)(function*(){if(T.persistence===y)return;const k=yield T.getCurrentUser();return yield T.removeCurrentUser(),T.persistence=y,k?T.setCurrentUser(k):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(y,T,k="authUser"){return(0,E.Z)(function*(){if(!T.length)return new ht(st(tt),y,k);const se=(yield Promise.all(T.map(function(){var lr=(0,E.Z)(function*(Br){if(yield Br._isAvailable())return Br});return function(Br){return lr.apply(this,arguments)}}()))).filter(lr=>lr);let Ce=se[0]||st(tt);const Tt=Ze(k,y.config.apiKey,y.name);let Zt=null;for(const lr of T)try{const Br=yield lr._get(Tt);if(Br){const Er=vr._fromJSON(y,Br);lr!==Ce&&(Zt=Er),Ce=lr;break}}catch{}const Ln=se.filter(lr=>lr._shouldAllowMigration);return Ce._shouldAllowMigration&&Ln.length?(Ce=Ln[0],Zt&&(yield Ce._set(Tt,Zt.toJSON())),yield Promise.all(T.map(function(){var lr=(0,E.Z)(function*(Br){if(Br!==Ce)try{yield Br._remove(Tt)}catch{}});return function(Br){return lr.apply(this,arguments)}}())),new ht(Ce,y,k)):new ht(Ce,y,k)})()}}function $t(I){const y=I.toLowerCase();if(y.includes("opera/")||y.includes("opr/")||y.includes("opios/"))return"Opera";if(oi(y))return"IEMobile";if(y.includes("msie")||y.includes("trident/"))return"IE";if(y.includes("edge/"))return"Edge";if(Rt(y))return"Firefox";if(y.includes("silk/"))return"Silk";if(we(y))return"Blackberry";if(fe(y))return"Webos";if(fn(y))return"Safari";if((y.includes("chrome/")||Xn(y))&&!y.includes("edge/"))return"Chrome";if(de(y))return"Android";{const k=I.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===k?.length)return k[1]}return"Other"}function Rt(I=(0,re.z$)()){return/firefox\//i.test(I)}function fn(I=(0,re.z$)()){const y=I.toLowerCase();return y.includes("safari/")&&!y.includes("chrome/")&&!y.includes("crios/")&&!y.includes("android")}function Xn(I=(0,re.z$)()){return/crios\//i.test(I)}function oi(I=(0,re.z$)()){return/iemobile/i.test(I)}function de(I=(0,re.z$)()){return/android/i.test(I)}function we(I=(0,re.z$)()){return/blackberry/i.test(I)}function fe(I=(0,re.z$)()){return/webos/i.test(I)}function Te(I=(0,re.z$)()){return/iphone|ipad|ipod/i.test(I)||/macintosh/i.test(I)&&/mobile/i.test(I)}function pn(I=(0,re.z$)()){return Te(I)||de(I)||fe(I)||we(I)||/windows phone/i.test(I)||oi(I)}function jr(I,y=[]){let T;switch(I){case"Browser":T=$t((0,re.z$)());break;case"Worker":T=`${$t((0,re.z$)())}-${I}`;break;default:T=I}const k=y.length?y.join(","):"FirebaseCore-web";return`${T}/JsCore/${Oe.SDK_VERSION}/${k}`}class Or{constructor(y){this.auth=y,this.queue=[]}pushCallback(y,T){const k=Ce=>new Promise((Tt,Zt)=>{try{Tt(y(Ce))}catch(Ln){Zt(Ln)}});k.onAbort=T,this.queue.push(k);const se=this.queue.length-1;return()=>{this.queue[se]=()=>Promise.resolve()}}runMiddleware(y){var T=this;return(0,E.Z)(function*(){if(T.auth.currentUser===y)return;const k=[];try{for(const se of T.queue)yield se(y),se.onAbort&&k.push(se.onAbort)}catch(se){k.reverse();for(const Ce of k)try{Ce()}catch{}throw T.auth._errorFactory.create("login-blocked",{originalMessage:se?.message})}})()}}class wi{constructor(y,T,k){this.app=y,this.heartbeatServiceProvider=T,this.config=k,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Zi(this),this.idTokenSubscription=new Zi(this),this.beforeStateQueue=new Or(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=at,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=y.name,this.clientVersion=k.sdkClientVersion}_initializeWithPersistence(y,T){var k=this;return T&&(this._popupRedirectResolver=st(T)),this._initializationPromise=this.queue((0,E.Z)(function*(){var se,Ce;if(!k._deleted&&(k.persistenceManager=yield ht.create(k,y),!k._deleted)){if(null!==(se=k._popupRedirectResolver)&&void 0!==se&&se._shouldInitProactively)try{yield k._popupRedirectResolver._initialize(k)}catch{}yield k.initializeCurrentUser(T),k.lastNotifiedUid=(null===(Ce=k.currentUser)||void 0===Ce?void 0:Ce.uid)||null,!k._deleted&&(k._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var y=this;return(0,E.Z)(function*(){if(y._deleted)return;const T=yield y.assertedPersistence.getCurrentUser();if(y.currentUser||T){if(y.currentUser&&T&&y.currentUser.uid===T.uid)return y._currentUser._assign(T),void(yield y.currentUser.getIdToken());yield y._updateCurrentUser(T,!0)}})()}initializeCurrentUser(y){var T=this;return(0,E.Z)(function*(){var k;const se=yield T.assertedPersistence.getCurrentUser();let Ce=se,Tt=!1;if(y&&T.config.authDomain){yield T.getOrInitRedirectPersistenceManager();const Zt=null===(k=T.redirectUser)||void 0===k?void 0:k._redirectEventId,Ln=Ce?._redirectEventId,lr=yield T.tryRedirectSignIn(y);(!Zt||Zt===Ln)&&lr?.user&&(Ce=lr.user,Tt=!0)}if(!Ce)return T.directlySetCurrentUser(null);if(!Ce._redirectEventId){if(Tt)try{yield T.beforeStateQueue.runMiddleware(Ce)}catch(Zt){Ce=se,T._popupRedirectResolver._overrideRedirectResult(T,()=>Promise.reject(Zt))}return Ce?T.reloadAndSetCurrentUserOrClear(Ce):T.directlySetCurrentUser(null)}return J(T._popupRedirectResolver,T,"argument-error"),yield T.getOrInitRedirectPersistenceManager(),T.redirectUser&&T.redirectUser._redirectEventId===Ce._redirectEventId?T.directlySetCurrentUser(Ce):T.reloadAndSetCurrentUserOrClear(Ce)})()}tryRedirectSignIn(y){var T=this;return(0,E.Z)(function*(){let k=null;try{k=yield T._popupRedirectResolver._completeRedirectFn(T,y,!0)}catch{yield T._setRedirectUser(null)}return k})()}reloadAndSetCurrentUserOrClear(y){var T=this;return(0,E.Z)(function*(){try{yield Fr(y)}catch(k){if("auth/network-request-failed"!==k?.code)return T.directlySetCurrentUser(null)}return T.directlySetCurrentUser(y)})()}useDeviceLanguage(){this.languageCode=function gt(){if(typeof navigator>"u")return null;const I=navigator;return I.languages&&I.languages[0]||I.language||null}()}_delete(){var y=this;return(0,E.Z)(function*(){y._deleted=!0})()}updateCurrentUser(y){var T=this;return(0,E.Z)(function*(){const k=y?(0,re.m9)(y):null;return k&&J(k.auth.config.apiKey===T.config.apiKey,T,"invalid-user-token"),T._updateCurrentUser(k&&k._clone(T))})()}_updateCurrentUser(y,T=!1){var k=this;return(0,E.Z)(function*(){if(!k._deleted)return y&&J(k.tenantId===y.tenantId,k,"tenant-id-mismatch"),T||(yield k.beforeStateQueue.runMiddleware(y)),k.queue((0,E.Z)(function*(){yield k.directlySetCurrentUser(y),k.notifyAuthListeners()}))})()}signOut(){var y=this;return(0,E.Z)(function*(){return yield y.beforeStateQueue.runMiddleware(null),(y.redirectPersistenceManager||y._popupRedirectResolver)&&(yield y._setRedirectUser(null)),y._updateCurrentUser(null,!0)})()}setPersistence(y){var T=this;return this.queue((0,E.Z)(function*(){yield T.assertedPersistence.setPersistence(st(y))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(y){this._errorFactory=new re.LL("auth","Firebase",y())}onAuthStateChanged(y,T,k){return this.registerStateListener(this.authStateSubscription,y,T,k)}beforeAuthStateChanged(y,T){return this.beforeStateQueue.pushCallback(y,T)}onIdTokenChanged(y,T,k){return this.registerStateListener(this.idTokenSubscription,y,T,k)}toJSON(){var y;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(y=this._currentUser)||void 0===y?void 0:y.toJSON()}}_setRedirectUser(y,T){var k=this;return(0,E.Z)(function*(){const se=yield k.getOrInitRedirectPersistenceManager(T);return null===y?se.removeCurrentUser():se.setCurrentUser(y)})()}getOrInitRedirectPersistenceManager(y){var T=this;return(0,E.Z)(function*(){if(!T.redirectPersistenceManager){const k=y&&st(y)||T._popupRedirectResolver;J(k,T,"argument-error"),T.redirectPersistenceManager=yield ht.create(T,[st(k._redirectPersistence)],"redirectUser"),T.redirectUser=yield T.redirectPersistenceManager.getCurrentUser()}return T.redirectPersistenceManager})()}_redirectUserForId(y){var T=this;return(0,E.Z)(function*(){var k,se;return T._isInitialized&&(yield T.queue((0,E.Z)(function*(){}))),(null===(k=T._currentUser)||void 0===k?void 0:k._redirectEventId)===y?T._currentUser:(null===(se=T.redirectUser)||void 0===se?void 0:se._redirectEventId)===y?T.redirectUser:null})()}_persistUserIfCurrent(y){var T=this;return(0,E.Z)(function*(){if(y===T.currentUser)return T.queue((0,E.Z)(function*(){return T.directlySetCurrentUser(y)}))})()}_notifyListenersIfCurrent(y){y===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var y,T;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const k=null!==(T=null===(y=this.currentUser)||void 0===y?void 0:y.uid)&&void 0!==T?T:null;this.lastNotifiedUid!==k&&(this.lastNotifiedUid=k,this.authStateSubscription.next(this.currentUser))}registerStateListener(y,T,k,se){if(this._deleted)return()=>{};const Ce="function"==typeof T?T:T.next.bind(T),Tt=this._isInitialized?Promise.resolve():this._initializationPromise;return J(Tt,this,"internal-error"),Tt.then(()=>Ce(this.currentUser)),"function"==typeof T?y.addObserver(T,k,se):y.addObserver(T)}directlySetCurrentUser(y){var T=this;return(0,E.Z)(function*(){T.currentUser&&T.currentUser!==y&&T._currentUser._stopProactiveRefresh(),y&&T.isProactiveRefreshEnabled&&y._startProactiveRefresh(),T.currentUser=y,y?yield T.assertedPersistence.setCurrentUser(y):yield T.assertedPersistence.removeCurrentUser()})()}queue(y){return this.operations=this.operations.then(y,y),this.operations}get assertedPersistence(){return J(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(y){!y||this.frameworks.includes(y)||(this.frameworks.push(y),this.frameworks.sort(),this.clientVersion=jr(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var y=this;return(0,E.Z)(function*(){var T;const k={"X-Client-Version":y.clientVersion};y.app.options.appId&&(k["X-Firebase-gmpid"]=y.app.options.appId);const se=yield null===(T=y.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===T?void 0:T.getHeartbeatsHeader();return se&&(k["X-Firebase-Client"]=se),k})()}}function xr(I){return(0,re.m9)(I)}class Zi{constructor(y){this.auth=y,this.observer=null,this.addObserver=(0,re.ne)(T=>this.observer=T)}get next(){return J(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function is(I){const y=I.indexOf(":");return y<0?"":I.substr(0,y+1)}function rr(I){if(!I)return null;const y=Number(I);return isNaN(y)?null:y}class _i{constructor(y,T){this.providerId=y,this.signInMethod=T}toJSON(){return he("not implemented")}_getIdTokenResponse(y){return he("not implemented")}_linkToIdToken(y,T){return he("not implemented")}_getReauthenticationResolver(y){return he("not implemented")}}function Ci(I,y){return Es.apply(this,arguments)}function Es(){return(Es=(0,E.Z)(function*(I,y){return bn(I,"POST","/v1/accounts:resetPassword",zt(I,y))})).apply(this,arguments)}function Ss(I,y){return Pn.apply(this,arguments)}function Pn(){return(Pn=(0,E.Z)(function*(I,y){return bn(I,"POST","/v1/accounts:update",y)})).apply(this,arguments)}function Ei(){return(Ei=(0,E.Z)(function*(I,y){return bn(I,"POST","/v1/accounts:update",zt(I,y))})).apply(this,arguments)}function Qi(){return(Qi=(0,E.Z)(function*(I,y){return Vr(I,"POST","/v1/accounts:signInWithPassword",zt(I,y))})).apply(this,arguments)}function Ni(I,y){return fs.apply(this,arguments)}function fs(){return(fs=(0,E.Z)(function*(I,y){return bn(I,"POST","/v1/accounts:sendOobCode",zt(I,y))})).apply(this,arguments)}function qs(){return(qs=(0,E.Z)(function*(I,y){return Ni(I,y)})).apply(this,arguments)}function ar(){return(ar=(0,E.Z)(function*(I,y){return Ni(I,y)})).apply(this,arguments)}function Fo(){return(Fo=(0,E.Z)(function*(I,y){return Ni(I,y)})).apply(this,arguments)}function Os(){return(Os=(0,E.Z)(function*(I,y){return Ni(I,y)})).apply(this,arguments)}function Ko(){return(Ko=(0,E.Z)(function*(I,y){return Vr(I,"POST","/v1/accounts:signInWithEmailLink",zt(I,y))})).apply(this,arguments)}function Zs(){return(Zs=(0,E.Z)(function*(I,y){return Vr(I,"POST","/v1/accounts:signInWithEmailLink",zt(I,y))})).apply(this,arguments)}class jo extends _i{constructor(y,T,k,se=null){super("password",k),this._email=y,this._password=T,this._tenantId=se}static _fromEmailAndPassword(y,T){return new jo(y,T,"password")}static _fromEmailAndCode(y,T,k=null){return new jo(y,T,"emailLink",k)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(y){const T="string"==typeof y?JSON.parse(y):y;if(T?.email&&T?.password){if("password"===T.signInMethod)return this._fromEmailAndPassword(T.email,T.password);if("emailLink"===T.signInMethod)return this._fromEmailAndCode(T.email,T.password,T.tenantId)}return null}_getIdTokenResponse(y){var T=this;return(0,E.Z)(function*(){switch(T.signInMethod){case"password":return function hs(I,y){return Qi.apply(this,arguments)}(y,{returnSecureToken:!0,email:T._email,password:T._password});case"emailLink":return function Bs(I,y){return Ko.apply(this,arguments)}(y,{email:T._email,oobCode:T._password});default:Fe(y,"internal-error")}})()}_linkToIdToken(y,T){var k=this;return(0,E.Z)(function*(){switch(k.signInMethod){case"password":return Ss(y,{idToken:T,returnSecureToken:!0,email:k._email,password:k._password});case"emailLink":return function ys(I,y){return Zs.apply(this,arguments)}(y,{idToken:T,email:k._email,oobCode:k._password});default:Fe(y,"internal-error")}})()}_getReauthenticationResolver(y){return this._getIdTokenResponse(y)}}function Li(I,y){return pt.apply(this,arguments)}function pt(){return(pt=(0,E.Z)(function*(I,y){return Vr(I,"POST","/v1/accounts:signInWithIdp",zt(I,y))})).apply(this,arguments)}class Ct extends _i{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(y){const T=new Ct(y.providerId,y.signInMethod);return y.idToken||y.accessToken?(y.idToken&&(T.idToken=y.idToken),y.accessToken&&(T.accessToken=y.accessToken),y.nonce&&!y.pendingToken&&(T.nonce=y.nonce),y.pendingToken&&(T.pendingToken=y.pendingToken)):y.oauthToken&&y.oauthTokenSecret?(T.accessToken=y.oauthToken,T.secret=y.oauthTokenSecret):Fe("argument-error"),T}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(y){const T="string"==typeof y?JSON.parse(y):y,{providerId:k,signInMethod:se}=T,Ce=(0,ke._T)(T,["providerId","signInMethod"]);if(!k||!se)return null;const Tt=new Ct(k,se);return Tt.idToken=Ce.idToken||void 0,Tt.accessToken=Ce.accessToken||void 0,Tt.secret=Ce.secret,Tt.nonce=Ce.nonce,Tt.pendingToken=Ce.pendingToken||null,Tt}_getIdTokenResponse(y){return Li(y,this.buildRequest())}_linkToIdToken(y,T){const k=this.buildRequest();return k.idToken=T,Li(y,k)}_getReauthenticationResolver(y){const T=this.buildRequest();return T.autoCreate=!1,Li(y,T)}buildRequest(){const y={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)y.pendingToken=this.pendingToken;else{const T={};this.idToken&&(T.id_token=this.idToken),this.accessToken&&(T.access_token=this.accessToken),this.secret&&(T.oauth_token_secret=this.secret),T.providerId=this.providerId,this.nonce&&!this.pendingToken&&(T.nonce=this.nonce),y.postBody=(0,re.xO)(T)}return y}}function Sn(){return(Sn=(0,E.Z)(function*(I,y){return bn(I,"POST","/v1/accounts:sendVerificationCode",zt(I,y))})).apply(this,arguments)}function Tr(){return(Tr=(0,E.Z)(function*(I,y){return Vr(I,"POST","/v1/accounts:signInWithPhoneNumber",zt(I,y))})).apply(this,arguments)}function mi(){return(mi=(0,E.Z)(function*(I,y){const T=yield Vr(I,"POST","/v1/accounts:signInWithPhoneNumber",zt(I,y));if(T.temporaryProof)throw ii(I,"account-exists-with-different-credential",T);return T})).apply(this,arguments)}const Xi={USER_NOT_FOUND:"user-not-found"};function os(){return(os=(0,E.Z)(function*(I,y){return Vr(I,"POST","/v1/accounts:signInWithPhoneNumber",zt(I,Object.assign(Object.assign({},y),{operation:"REAUTH"})),Xi)})).apply(this,arguments)}class Pr extends _i{constructor(y){super("phone","phone"),this.params=y}static _fromVerification(y,T){return new Pr({verificationId:y,verificationCode:T})}static _fromTokenResponse(y,T){return new Pr({phoneNumber:y,temporaryProof:T})}_getIdTokenResponse(y){return function Jn(I,y){return Tr.apply(this,arguments)}(y,this._makeVerificationRequest())}_linkToIdToken(y,T){return function $r(I,y){return mi.apply(this,arguments)}(y,Object.assign({idToken:T},this._makeVerificationRequest()))}_getReauthenticationResolver(y){return function ss(I,y){return os.apply(this,arguments)}(y,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:y,phoneNumber:T,verificationId:k,verificationCode:se}=this.params;return y&&T?{temporaryProof:y,phoneNumber:T}:{sessionInfo:k,code:se}}toJSON(){const y={providerId:this.providerId};return this.params.phoneNumber&&(y.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(y.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(y.verificationCode=this.params.verificationCode),this.params.verificationId&&(y.verificationId=this.params.verificationId),y}static fromJSON(y){"string"==typeof y&&(y=JSON.parse(y));const{verificationId:T,verificationCode:k,phoneNumber:se,temporaryProof:Ce}=y;return k||T||se||Ce?new Pr({verificationId:T,verificationCode:k,phoneNumber:se,temporaryProof:Ce}):null}}class vo{constructor(y){var T,k,se,Ce,Tt,Zt;const Ln=(0,re.zd)((0,re.pd)(y)),lr=null!==(T=Ln.apiKey)&&void 0!==T?T:null,Br=null!==(k=Ln.oobCode)&&void 0!==k?k:null,Er=function Uo(I){switch(I){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(se=Ln.mode)&&void 0!==se?se:null);J(lr&&Br&&Er,"argument-error"),this.apiKey=lr,this.operation=Er,this.code=Br,this.continueUrl=null!==(Ce=Ln.continueUrl)&&void 0!==Ce?Ce:null,this.languageCode=null!==(Tt=Ln.languageCode)&&void 0!==Tt?Tt:null,this.tenantId=null!==(Zt=Ln.tenantId)&&void 0!==Zt?Zt:null}static parseLink(y){const T=function ks(I){const y=(0,re.zd)((0,re.pd)(I)).link,T=y?(0,re.zd)((0,re.pd)(y)).deep_link_id:null,k=(0,re.zd)((0,re.pd)(I)).deep_link_id;return(k?(0,re.zd)((0,re.pd)(k)).link:null)||k||T||y||I}(y);try{return new vo(T)}catch{return null}}}let Do=(()=>{class I{constructor(){this.providerId=I.PROVIDER_ID}static credential(T,k){return jo._fromEmailAndPassword(T,k)}static credentialWithLink(T,k){const se=vo.parseLink(k);return J(se,"argument-error"),jo._fromEmailAndCode(T,se.code,se.tenantId)}}return I.PROVIDER_ID="password",I.EMAIL_PASSWORD_SIGN_IN_METHOD="password",I.EMAIL_LINK_SIGN_IN_METHOD="emailLink",I})();class Di{constructor(y){this.providerId=y,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(y){this.defaultLanguageCode=y}setCustomParameters(y){return this.customParameters=y,this}getCustomParameters(){return this.customParameters}}class Jo extends Di{constructor(){super(...arguments),this.scopes=[]}addScope(y){return this.scopes.includes(y)||this.scopes.push(y),this}getScopes(){return[...this.scopes]}}class Ao extends Jo{static credentialFromJSON(y){const T="string"==typeof y?JSON.parse(y):y;return J("providerId"in T&&"signInMethod"in T,"argument-error"),Ct._fromParams(T)}credential(y){return this._credential(Object.assign(Object.assign({},y),{nonce:y.rawNonce}))}_credential(y){return J(y.idToken||y.accessToken,"argument-error"),Ct._fromParams(Object.assign(Object.assign({},y),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(y){return Ao.oauthCredentialFromTaggedObject(y)}static credentialFromError(y){return Ao.oauthCredentialFromTaggedObject(y.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:y}){if(!y)return null;const{oauthIdToken:T,oauthAccessToken:k,oauthTokenSecret:se,pendingToken:Ce,nonce:Tt,providerId:Zt}=y;if(!k&&!se&&!T&&!Ce||!Zt)return null;try{return new Ao(Zt)._credential({idToken:T,accessToken:k,nonce:Tt,pendingToken:Ce})}catch{return null}}}let ca=(()=>{class I extends Jo{constructor(){super("facebook.com")}static credential(T){return Ct._fromParams({providerId:I.PROVIDER_ID,signInMethod:I.FACEBOOK_SIGN_IN_METHOD,accessToken:T})}static credentialFromResult(T){return I.credentialFromTaggedObject(T)}static credentialFromError(T){return I.credentialFromTaggedObject(T.customData||{})}static credentialFromTaggedObject({_tokenResponse:T}){if(!T||!("oauthAccessToken"in T)||!T.oauthAccessToken)return null;try{return I.credential(T.oauthAccessToken)}catch{return null}}}return I.FACEBOOK_SIGN_IN_METHOD="facebook.com",I.PROVIDER_ID="facebook.com",I})(),Aa=(()=>{class I extends Jo{constructor(){super("google.com"),this.addScope("profile")}static credential(T,k){return Ct._fromParams({providerId:I.PROVIDER_ID,signInMethod:I.GOOGLE_SIGN_IN_METHOD,idToken:T,accessToken:k})}static credentialFromResult(T){return I.credentialFromTaggedObject(T)}static credentialFromError(T){return I.credentialFromTaggedObject(T.customData||{})}static credentialFromTaggedObject({_tokenResponse:T}){if(!T)return null;const{oauthIdToken:k,oauthAccessToken:se}=T;if(!k&&!se)return null;try{return I.credential(k,se)}catch{return null}}}return I.GOOGLE_SIGN_IN_METHOD="google.com",I.PROVIDER_ID="google.com",I})(),Pa=(()=>{class I extends Jo{constructor(){super("github.com")}static credential(T){return Ct._fromParams({providerId:I.PROVIDER_ID,signInMethod:I.GITHUB_SIGN_IN_METHOD,accessToken:T})}static credentialFromResult(T){return I.credentialFromTaggedObject(T)}static credentialFromError(T){return I.credentialFromTaggedObject(T.customData||{})}static credentialFromTaggedObject({_tokenResponse:T}){if(!T||!("oauthAccessToken"in T)||!T.oauthAccessToken)return null;try{return I.credential(T.oauthAccessToken)}catch{return null}}}return I.GITHUB_SIGN_IN_METHOD="github.com",I.PROVIDER_ID="github.com",I})();class Js extends _i{constructor(y,T){super(y,y),this.pendingToken=T}_getIdTokenResponse(y){return Li(y,this.buildRequest())}_linkToIdToken(y,T){const k=this.buildRequest();return k.idToken=T,Li(y,k)}_getReauthenticationResolver(y){const T=this.buildRequest();return T.autoCreate=!1,Li(y,T)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(y){const T="string"==typeof y?JSON.parse(y):y,{providerId:k,signInMethod:se,pendingToken:Ce}=T;return k&&se&&Ce&&k===se?new Js(k,Ce):null}static _create(y,T){return new Js(y,T)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class to extends Di{constructor(y){J(y.startsWith("saml."),"argument-error"),super(y)}static credentialFromResult(y){return to.samlCredentialFromTaggedObject(y)}static credentialFromError(y){return to.samlCredentialFromTaggedObject(y.customData||{})}static credentialFromJSON(y){const T=Js.fromJSON(y);return J(T,"argument-error"),T}static samlCredentialFromTaggedObject({_tokenResponse:y}){if(!y)return null;const{pendingToken:T,providerId:k}=y;if(!T||!k)return null;try{return Js._create(k,T)}catch{return null}}}let wl=(()=>{class I extends Jo{constructor(){super("twitter.com")}static credential(T,k){return Ct._fromParams({providerId:I.PROVIDER_ID,signInMethod:I.TWITTER_SIGN_IN_METHOD,oauthToken:T,oauthTokenSecret:k})}static credentialFromResult(T){return I.credentialFromTaggedObject(T)}static credentialFromError(T){return I.credentialFromTaggedObject(T.customData||{})}static credentialFromTaggedObject({_tokenResponse:T}){if(!T)return null;const{oauthAccessToken:k,oauthTokenSecret:se}=T;if(!k||!se)return null;try{return I.credential(k,se)}catch{return null}}}return I.TWITTER_SIGN_IN_METHOD="twitter.com",I.PROVIDER_ID="twitter.com",I})();function Au(I,y){return ru.apply(this,arguments)}function ru(){return(ru=(0,E.Z)(function*(I,y){return Vr(I,"POST","/v1/accounts:signUp",zt(I,y))})).apply(this,arguments)}class Vs{constructor(y){this.user=y.user,this.providerId=y.providerId,this._tokenResponse=y._tokenResponse,this.operationType=y.operationType}static _fromIdTokenResponse(y,T,k,se=!1){return(0,E.Z)(function*(){const Ce=yield vr._fromIdTokenResponse(y,k,se),Tt=iu(k);return new Vs({user:Ce,providerId:Tt,_tokenResponse:k,operationType:T})})()}static _forOperation(y,T,k){return(0,E.Z)(function*(){yield y._updateTokensIfNecessary(k,!0);const se=iu(k);return new Vs({user:y,providerId:se,_tokenResponse:k,operationType:T})})()}}function iu(I){return I.providerId?I.providerId:"phoneNumber"in I?"phone":null}function Bo(){return(Bo=(0,E.Z)(function*(I){var y;const T=xr(I);if(yield T._initializationPromise,null!==(y=T.currentUser)&&void 0!==y&&y.isAnonymous)return new Vs({user:T.currentUser,providerId:null,operationType:"signIn"});const k=yield Au(T,{returnSecureToken:!0}),se=yield Vs._fromIdTokenResponse(T,"signIn",k,!0);return yield T._updateCurrentUser(se.user),se})).apply(this,arguments)}class Po extends re.ZR{constructor(y,T,k,se){var Ce;super(T.code,T.message),this.operationType=k,this.user=se,Object.setPrototypeOf(this,Po.prototype),this.customData={appName:y.name,tenantId:null!==(Ce=y.tenantId)&&void 0!==Ce?Ce:void 0,_serverResponse:T.customData._serverResponse,operationType:k}}static _fromErrorAndOperation(y,T,k,se){return new Po(y,T,k,se)}}function uo(I,y,T,k){return("reauthenticate"===y?T._getReauthenticationResolver(I):T._getIdTokenResponse(I)).catch(Ce=>{throw"auth/multi-factor-auth-required"===Ce.code?Po._fromErrorAndOperation(I,Ce,y,k):Ce})}function yo(I){return new Set(I.map(({providerId:y})=>y).filter(y=>!!y))}function da(){return da=(0,E.Z)(function*(I,y){const T=(0,re.m9)(I);yield ea(!0,T,y);const{providerUserInfo:k}=yield function Ar(I,y){return Tn.apply(this,arguments)}(T.auth,{idToken:yield T.getIdToken(),deleteProvider:[y]}),se=yo(k||[]);return T.providerData=T.providerData.filter(Ce=>se.has(Ce.providerId)),se.has("phone")||(T.phoneNumber=null),yield T.auth._persistUserIfCurrent(T),T}),da.apply(this,arguments)}function ha(I,y){return Yo.apply(this,arguments)}function Yo(){return(Yo=(0,E.Z)(function*(I,y,T=!1){const k=yield Lr(I,y._linkToIdToken(I.auth,yield I.getIdToken()),T);return Vs._forOperation(I,"link",k)})).apply(this,arguments)}function ea(I,y,T){return su.apply(this,arguments)}function su(){return(su=(0,E.Z)(function*(I,y,T){yield Fr(y);const se=!1===I?"provider-already-linked":"no-such-provider";J(yo(y.providerData).has(T)===I,y.auth,se)})).apply(this,arguments)}function Cl(I,y){return Vo.apply(this,arguments)}function Vo(){return(Vo=(0,E.Z)(function*(I,y,T=!1){const{auth:k}=I,se="reauthenticate";try{const Ce=yield Lr(I,uo(k,se,y,I),T);J(Ce.idToken,k,"internal-error");const Tt=or(Ce.idToken);J(Tt,k,"internal-error");const{sub:Zt}=Tt;return J(I.uid===Zt,k,"user-mismatch"),Vs._forOperation(I,se,Ce)}catch(Ce){throw"auth/user-not-found"===Ce?.code&&Fe(k,"user-mismatch"),Ce}})).apply(this,arguments)}function Va(I,y){return ws.apply(this,arguments)}function ws(){return(ws=(0,E.Z)(function*(I,y,T=!1){const k="signIn",se=yield uo(I,k,y),Ce=yield Vs._fromIdTokenResponse(I,k,se);return T||(yield I._updateCurrentUser(Ce.user)),Ce})).apply(this,arguments)}function ai(I,y){return Hi.apply(this,arguments)}function Hi(){return(Hi=(0,E.Z)(function*(I,y){return Va(xr(I),y)})).apply(this,arguments)}function Fi(I,y){return no.apply(this,arguments)}function no(){return(no=(0,E.Z)(function*(I,y){const T=(0,re.m9)(I);return yield ea(!1,T,y.providerId),ha(T,y)})).apply(this,arguments)}function Rs(I,y){return Ji.apply(this,arguments)}function Ji(){return(Ji=(0,E.Z)(function*(I,y){return Cl((0,re.m9)(I),y)})).apply(this,arguments)}function Ha(){return(Ha=(0,E.Z)(function*(I,y){return Vr(I,"POST","/v1/accounts:signInWithCustomToken",zt(I,y))})).apply(this,arguments)}function Cs(){return Cs=(0,E.Z)(function*(I,y){const T=xr(I),k=yield function ou(I,y){return Ha.apply(this,arguments)}(T,{token:y,returnSecureToken:!0}),se=yield Vs._fromIdTokenResponse(T,"signIn",k);return yield T._updateCurrentUser(se.user),se}),Cs.apply(this,arguments)}class fa{constructor(y,T){this.factorId=y,this.uid=T.mfaEnrollmentId,this.enrollmentTime=new Date(T.enrolledAt).toUTCString(),this.displayName=T.displayName}static _fromServerResponse(y,T){return"phoneInfo"in T?_o._fromServerResponse(y,T):Fe(y,"internal-error")}}class _o extends fa{constructor(y){super("phone",y),this.phoneNumber=y.phoneInfo}static _fromServerResponse(y,T){return new _o(T)}}function ta(I,y,T){var k;J((null===(k=T.url)||void 0===k?void 0:k.length)>0,I,"invalid-continue-uri"),J(typeof T.dynamicLinkDomain>"u"||T.dynamicLinkDomain.length>0,I,"invalid-dynamic-link-domain"),y.continueUrl=T.url,y.dynamicLinkDomain=T.dynamicLinkDomain,y.canHandleCodeInApp=T.handleCodeInApp,T.iOS&&(J(T.iOS.bundleId.length>0,I,"missing-ios-bundle-id"),y.iOSBundleId=T.iOS.bundleId),T.android&&(J(T.android.packageName.length>0,I,"missing-android-pkg-name"),y.androidInstallApp=T.android.installApp,y.androidMinimumVersionCode=T.android.minimumVersion,y.androidPackageName=T.android.packageName)}function na(){return na=(0,E.Z)(function*(I,y,T){const k=(0,re.m9)(I),se={requestType:"PASSWORD_RESET",email:y};T&&ta(k,se,T),yield function Xs(I,y){return ar.apply(this,arguments)}(k,se)}),na.apply(this,arguments)}function Dr(){return(Dr=(0,E.Z)(function*(I,y,T){yield Ci((0,re.m9)(I),{oobCode:y,newPassword:T})})).apply(this,arguments)}function ne(){return ne=(0,E.Z)(function*(I,y){yield function Sr(I,y){return Ei.apply(this,arguments)}((0,re.m9)(I),{oobCode:y})}),ne.apply(this,arguments)}function Z(I,y){return q.apply(this,arguments)}function q(){return(q=(0,E.Z)(function*(I,y){const T=(0,re.m9)(I),k=yield Ci(T,{oobCode:y}),se=k.requestType;switch(J(se,T,"internal-error"),se){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":J(k.newEmail,T,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":J(k.mfaInfo,T,"internal-error");default:J(k.email,T,"internal-error")}let Ce=null;return k.mfaInfo&&(Ce=fa._fromServerResponse(xr(T),k.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===k.requestType?k.newEmail:k.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===k.requestType?k.email:k.newEmail)||null,multiFactorInfo:Ce},operation:se}})).apply(this,arguments)}function H(){return(H=(0,E.Z)(function*(I,y){const{data:T}=yield Z((0,re.m9)(I),y);return T.email})).apply(this,arguments)}function Ve(){return(Ve=(0,E.Z)(function*(I,y,T){const k=xr(I),se=yield Au(k,{returnSecureToken:!0,email:y,password:T}),Ce=yield Vs._fromIdTokenResponse(k,"signIn",se);return yield k._updateCurrentUser(Ce.user),Ce})).apply(this,arguments)}function Jt(){return Jt=(0,E.Z)(function*(I,y,T){const k=(0,re.m9)(I),se={requestType:"EMAIL_SIGNIN",email:y};J(T.handleCodeInApp,k,"argument-error"),T&&ta(k,se,T),yield function Ks(I,y){return Fo.apply(this,arguments)}(k,se)}),Jt.apply(this,arguments)}function yr(){return(yr=(0,E.Z)(function*(I,y,T){const k=(0,re.m9)(I),se=Do.credentialWithLink(y,T||ut());return J(se._tenantId===(k.tenantId||null),k,"tenant-id-mismatch"),ai(k,se)})).apply(this,arguments)}function Ti(){return(Ti=(0,E.Z)(function*(I,y){return bn(I,"POST","/v1/accounts:createAuthUri",zt(I,y))})).apply(this,arguments)}function Ui(){return Ui=(0,E.Z)(function*(I,y){const k={identifier:y,continueUri:Je()?ut():"http://localhost"},{signinMethods:se}=yield function zr(I,y){return Ti.apply(this,arguments)}((0,re.m9)(I),k);return se||[]}),Ui.apply(this,arguments)}function Hs(){return Hs=(0,E.Z)(function*(I,y){const T=(0,re.m9)(I),se={requestType:"VERIFY_EMAIL",idToken:yield I.getIdToken()};y&&ta(T.auth,se,y);const{email:Ce}=yield function Gr(I,y){return qs.apply(this,arguments)}(T.auth,se);Ce!==I.email&&(yield I.reload())}),Hs.apply(this,arguments)}function Wr(){return Wr=(0,E.Z)(function*(I,y,T){const k=(0,re.m9)(I),Ce={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield I.getIdToken(),newEmail:y};T&&ta(k.auth,Ce,T);const{email:Tt}=yield function la(I,y){return Os.apply(this,arguments)}(k.auth,Ce);Tt!==I.email&&(yield I.reload())}),Wr.apply(this,arguments)}function as(){return(as=(0,E.Z)(function*(I,y){return bn(I,"POST","/v1/accounts:update",y)})).apply(this,arguments)}function Ns(){return Ns=(0,E.Z)(function*(I,{displayName:y,photoURL:T}){if(void 0===y&&void 0===T)return;const k=(0,re.m9)(I),Ce={idToken:yield k.getIdToken(),displayName:y,photoUrl:T,returnSecureToken:!0},Tt=yield Lr(k,function Pi(I,y){return as.apply(this,arguments)}(k.auth,Ce));k.displayName=Tt.displayName||null,k.photoURL=Tt.photoUrl||null;const Zt=k.providerData.find(({providerId:Ln})=>"password"===Ln);Zt&&(Zt.displayName=k.displayName,Zt.photoURL=k.photoURL),yield k._updateTokensIfNecessary(Tt)}),Ns.apply(this,arguments)}function pa(I,y,T){return ga.apply(this,arguments)}function ga(){return(ga=(0,E.Z)(function*(I,y,T){const{auth:k}=I,Ce={idToken:yield I.getIdToken(),returnSecureToken:!0};y&&(Ce.email=y),T&&(Ce.password=T);const Tt=yield Lr(I,Ss(k,Ce));yield I._updateTokensIfNecessary(Tt,!0)})).apply(this,arguments)}class ma{constructor(y,T,k={}){this.isNewUser=y,this.providerId=T,this.profile=k}}class io extends ma{constructor(y,T,k,se){super(y,T,k),this.username=se}}class yu extends ma{constructor(y,T){super(y,"facebook.com",T)}}class il extends io{constructor(y,T){super(y,"github.com",T,"string"==typeof T?.login?T?.login:null)}}class qr extends ma{constructor(y,T){super(y,"google.com",T)}}class Ga extends io{constructor(y,T,k){super(y,"twitter.com",T,k)}}function Il(I){const{user:y,_tokenResponse:T}=I;return y.isAnonymous&&!T?{providerId:null,isNewUser:!1,profile:null}:function au(I){var y,T;if(!I)return null;const{providerId:k}=I,se=I.rawUserInfo?JSON.parse(I.rawUserInfo):{},Ce=I.isNewUser||"identitytoolkit#SignupNewUserResponse"===I.kind;if(!k&&I?.idToken){const Tt=null===(T=null===(y=or(I.idToken))||void 0===y?void 0:y.firebase)||void 0===T?void 0:T.sign_in_provider;if(Tt)return new ma(Ce,"anonymous"!==Tt&&"custom"!==Tt?Tt:null)}if(!k)return null;switch(k){case"facebook.com":return new yu(Ce,se);case"github.com":return new il(Ce,se);case"google.com":return new qr(Ce,se);case"twitter.com":return new Ga(Ce,se,I.screenName||null);case"custom":case"anonymous":return new ma(Ce,null);default:return new ma(Ce,k,se)}}(T)}class $a{constructor(y,T,k){this.type=y,this.credential=T,this.auth=k}static _fromIdtoken(y,T){return new $a("enroll",y,T)}static _fromMfaPendingCredential(y){return new $a("signin",y)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(y){var T,k;if(y?.multiFactorSession){if(null!==(T=y.multiFactorSession)&&void 0!==T&&T.pendingCredential)return $a._fromMfaPendingCredential(y.multiFactorSession.pendingCredential);if(null!==(k=y.multiFactorSession)&&void 0!==k&&k.idToken)return $a._fromIdtoken(y.multiFactorSession.idToken)}return null}}class Mo{constructor(y,T,k){this.session=y,this.hints=T,this.signInResolver=k}static _fromError(y,T){const k=xr(y),se=T.customData._serverResponse,Ce=(se.mfaInfo||[]).map(Zt=>fa._fromServerResponse(k,Zt));J(se.mfaPendingCredential,k,"internal-error");const Tt=$a._fromMfaPendingCredential(se.mfaPendingCredential);return new Mo(Tt,Ce,function(){var Zt=(0,E.Z)(function*(Ln){const lr=yield Ln._process(k,Tt);delete se.mfaInfo,delete se.mfaPendingCredential;const Br=Object.assign(Object.assign({},se),{idToken:lr.idToken,refreshToken:lr.refreshToken});switch(T.operationType){case"signIn":const Er=yield Vs._fromIdTokenResponse(k,T.operationType,Br);return yield k._updateCurrentUser(Er.user),Er;case"reauthenticate":return J(T.user,k,"internal-error"),Vs._forOperation(T.user,T.operationType,Br);default:Fe(k,"internal-error")}});return function(Ln){return Zt.apply(this,arguments)}}())}resolveSignIn(y){var T=this;return(0,E.Z)(function*(){return T.signInResolver(y)})()}}class Ou{constructor(y){this.user=y,this.enrolledFactors=[],y._onReload(T=>{T.mfaInfo&&(this.enrolledFactors=T.mfaInfo.map(k=>fa._fromServerResponse(y.auth,k)))})}static _fromUser(y){return new Ou(y)}getSession(){var y=this;return(0,E.Z)(function*(){return $a._fromIdtoken(yield y.user.getIdToken(),y.user.auth)})()}enroll(y,T){var k=this;return(0,E.Z)(function*(){const se=y,Ce=yield k.getSession(),Tt=yield Lr(k.user,se._process(k.user.auth,Ce,T));return yield k.user._updateTokensIfNecessary(Tt),k.user.reload()})()}unenroll(y){var T=this;return(0,E.Z)(function*(){const k="string"==typeof y?y:y.uid,se=yield T.user.getIdToken();try{const Ce=yield Lr(T.user,function Mc(I,y){return bn(I,"POST","/v2/accounts/mfaEnrollment:withdraw",zt(I,y))}(T.user.auth,{idToken:se,mfaEnrollmentId:k}));T.enrolledFactors=T.enrolledFactors.filter(({uid:Tt})=>Tt!==k),yield T.user._updateTokensIfNecessary(Ce),yield T.user.reload()}catch(Ce){throw Ce}})()}}const sa=new WeakMap,V="__sak";class oe{constructor(y,T){this.storageRetriever=y,this.type=T}_isAvailable(){try{return this.storage?(this.storage.setItem(V,"1"),this.storage.removeItem(V),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(y,T){return this.storage.setItem(y,JSON.stringify(T)),Promise.resolve()}_get(y){const T=this.storage.getItem(y);return Promise.resolve(T?JSON.parse(T):null)}_remove(y){return this.storage.removeItem(y),Promise.resolve()}get storage(){return this.storageRetriever()}}const qt=(()=>{class I extends oe{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(T,k)=>this.onStorageEvent(T,k),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function W(){const I=(0,re.z$)();return fn(I)||Te(I)}()&&function Nn(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=pn(),this._shouldAllowMigration=!0}forAllChangedKeys(T){for(const k of Object.keys(this.listeners)){const se=this.storage.getItem(k),Ce=this.localCache[k];se!==Ce&&T(k,Ce,se)}}onStorageEvent(T,k=!1){if(!T.key)return void this.forAllChangedKeys((Zt,Ln,lr)=>{this.notifyListeners(Zt,lr)});const se=T.key;if(k?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const Zt=this.storage.getItem(se);if(T.newValue!==Zt)null!==T.newValue?this.storage.setItem(se,T.newValue):this.storage.removeItem(se);else if(this.localCache[se]===T.newValue&&!k)return}const Ce=()=>{const Zt=this.storage.getItem(se);!k&&this.localCache[se]===Zt||this.notifyListeners(se,Zt)},Tt=this.storage.getItem(se);!function Ht(){return(0,re.w1)()&&10===document.documentMode}()||Tt===T.newValue||T.newValue===T.oldValue?Ce():setTimeout(Ce,10)}notifyListeners(T,k){this.localCache[T]=k;const se=this.listeners[T];if(se)for(const Ce of Array.from(se))Ce(k&&JSON.parse(k))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((T,k,se)=>{this.onStorageEvent(new StorageEvent("storage",{key:T,oldValue:k,newValue:se}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(T,k){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[T]||(this.listeners[T]=new Set,this.localCache[T]=this.storage.getItem(T)),this.listeners[T].add(k)}_removeListener(T,k){this.listeners[T]&&(this.listeners[T].delete(k),0===this.listeners[T].size&&delete this.listeners[T]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(T,k){var se=()=>super._set,Ce=this;return(0,E.Z)(function*(){yield se().call(Ce,T,k),Ce.localCache[T]=JSON.stringify(k)})()}_get(T){var k=()=>super._get,se=this;return(0,E.Z)(function*(){const Ce=yield k().call(se,T);return se.localCache[T]=JSON.stringify(Ce),Ce})()}_remove(T){var k=()=>super._remove,se=this;return(0,E.Z)(function*(){yield k().call(se,T),delete se.localCache[T]})()}}return I.type="LOCAL",I})(),Nr=(()=>{class I extends oe{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(T,k){}_removeListener(T,k){}}return I.type="SESSION",I})();let Bi=(()=>{class I{constructor(T){this.eventTarget=T,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(T){const k=this.receivers.find(Ce=>Ce.isListeningto(T));if(k)return k;const se=new I(T);return this.receivers.push(se),se}isListeningto(T){return this.eventTarget===T}handleEvent(T){var k=this;return(0,E.Z)(function*(){const se=T,{eventId:Ce,eventType:Tt,data:Zt}=se.data,Ln=k.handlersMap[Tt];if(!Ln?.size)return;se.ports[0].postMessage({status:"ack",eventId:Ce,eventType:Tt});const lr=Array.from(Ln).map(function(){var Er=(0,E.Z)(function*(Wo){return Wo(se.origin,Zt)});return function(Wo){return Er.apply(this,arguments)}}()),Br=yield function Ii(I){return Promise.all(I.map(function(){var y=(0,E.Z)(function*(T){try{return{fulfilled:!0,value:yield T}}catch(k){return{fulfilled:!1,reason:k}}});return function(T){return y.apply(this,arguments)}}()))}(lr);se.ports[0].postMessage({status:"done",eventId:Ce,eventType:Tt,response:Br})})()}_subscribe(T,k){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[T]||(this.handlersMap[T]=new Set),this.handlersMap[T].add(k)}_unsubscribe(T,k){this.handlersMap[T]&&k&&this.handlersMap[T].delete(k),(!k||0===this.handlersMap[T].size)&&delete this.handlersMap[T],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return I.receivers=[],I})();function Kt(I="",y=10){let T="";for(let k=0;k<y;k++)T+=Math.floor(10*Math.random());return I+T}class si{constructor(y){this.target=y,this.handlers=new Set}removeMessageHandler(y){y.messageChannel&&(y.messageChannel.port1.removeEventListener("message",y.onMessage),y.messageChannel.port1.close()),this.handlers.delete(y)}_send(y,T,k=50){var se=this;return(0,E.Z)(function*(){const Ce=typeof MessageChannel<"u"?new MessageChannel:null;if(!Ce)throw new Error("connection_unavailable");let Tt,Zt;return new Promise((Ln,lr)=>{const Br=Kt("",20);Ce.port1.start();const Er=setTimeout(()=>{lr(new Error("unsupported_event"))},k);Zt={messageChannel:Ce,onMessage(Wo){const yl=Wo;if(yl.data.eventId===Br)switch(yl.data.status){case"ack":clearTimeout(Er),Tt=setTimeout(()=>{lr(new Error("timeout"))},3e3);break;case"done":clearTimeout(Tt),Ln(yl.data.response);break;default:clearTimeout(Er),clearTimeout(Tt),lr(new Error("invalid_response"))}}},se.handlers.add(Zt),Ce.port1.addEventListener("message",Zt.onMessage),se.target.postMessage({eventType:y,eventId:Br,data:T},[Ce.port2])}).finally(()=>{Zt&&se.removeMessageHandler(Zt)})})()}}function gr(){return window}function Fn(){return typeof gr().WorkerGlobalScope<"u"&&"function"==typeof gr().importScripts}function Kr(){return(Kr=(0,E.Z)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const un="firebaseLocalStorageDb",Oi=1,Ma="firebaseLocalStorage",Dl="fbase_key";class ol{constructor(y){this.request=y}toPromise(){return new Promise((y,T)=>{this.request.addEventListener("success",()=>{y(this.request.result)}),this.request.addEventListener("error",()=>{T(this.request.error)})})}}function Oa(I,y){return I.transaction([Ma],y?"readwrite":"readonly").objectStore(Ma)}function lu(){const I=indexedDB.open(un,Oi);return new Promise((y,T)=>{I.addEventListener("error",()=>{T(I.error)}),I.addEventListener("upgradeneeded",()=>{const k=I.result;try{k.createObjectStore(Ma,{keyPath:Dl})}catch(se){T(se)}}),I.addEventListener("success",(0,E.Z)(function*(){const k=I.result;k.objectStoreNames.contains(Ma)?y(k):(k.close(),yield function Bl(){const I=indexedDB.deleteDatabase(un);return new ol(I).toPromise()}(),y(yield lu()))}))})}function Go(I,y,T){return uc.apply(this,arguments)}function uc(){return(uc=(0,E.Z)(function*(I,y,T){const k=Oa(I,!0).put({[Dl]:y,value:T});return new ol(k).toPromise()})).apply(this,arguments)}function Wa(){return(Wa=(0,E.Z)(function*(I,y){const T=Oa(I,!1).get(y),k=yield new ol(T).toPromise();return void 0===k?null:k.value})).apply(this,arguments)}function ku(I,y){const T=Oa(I,!0).delete(y);return new ol(T).toPromise()}const zi=(()=>{class I{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var T=this;return(0,E.Z)(function*(){return T.db||(T.db=yield lu()),T.db})()}_withRetries(T){var k=this;return(0,E.Z)(function*(){let se=0;for(;;)try{const Ce=yield k._openDb();return yield T(Ce)}catch(Ce){if(se++>3)throw Ce;k.db&&(k.db.close(),k.db=void 0)}})()}initializeServiceWorkerMessaging(){var T=this;return(0,E.Z)(function*(){return Fn()?T.initializeReceiver():T.initializeSender()})()}initializeReceiver(){var T=this;return(0,E.Z)(function*(){T.receiver=Bi._getInstance(function Bt(){return Fn()?self:null}()),T.receiver._subscribe("keyChanged",function(){var k=(0,E.Z)(function*(se,Ce){return{keyProcessed:(yield T._poll()).includes(Ce.key)}});return function(se,Ce){return k.apply(this,arguments)}}()),T.receiver._subscribe("ping",function(){var k=(0,E.Z)(function*(se,Ce){return["keyChanged"]});return function(se,Ce){return k.apply(this,arguments)}}())})()}initializeSender(){var T=this;return(0,E.Z)(function*(){var k,se;if(T.activeServiceWorker=yield function Vn(){return Kr.apply(this,arguments)}(),!T.activeServiceWorker)return;T.sender=new si(T.activeServiceWorker);const Ce=yield T.sender._send("ping",{},800);Ce&&null!==(k=Ce[0])&&void 0!==k&&k.fulfilled&&null!==(se=Ce[0])&&void 0!==se&&se.value.includes("keyChanged")&&(T.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(T){var k=this;return(0,E.Z)(function*(){if(k.sender&&k.activeServiceWorker&&function Cn(){var I;return(null===(I=navigator?.serviceWorker)||void 0===I?void 0:I.controller)||null}()===k.activeServiceWorker)try{yield k.sender._send("keyChanged",{key:T},k.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,E.Z)(function*(){try{if(!indexedDB)return!1;const T=yield lu();return yield Go(T,V,"1"),yield ku(T,V),!0}catch{}return!1})()}_withPendingWrite(T){var k=this;return(0,E.Z)(function*(){k.pendingWrites++;try{yield T()}finally{k.pendingWrites--}})()}_set(T,k){var se=this;return(0,E.Z)(function*(){return se._withPendingWrite((0,E.Z)(function*(){return yield se._withRetries(Ce=>Go(Ce,T,k)),se.localCache[T]=k,se.notifyServiceWorker(T)}))})()}_get(T){var k=this;return(0,E.Z)(function*(){const se=yield k._withRetries(Ce=>function zu(I,y){return Wa.apply(this,arguments)}(Ce,T));return k.localCache[T]=se,se})()}_remove(T){var k=this;return(0,E.Z)(function*(){return k._withPendingWrite((0,E.Z)(function*(){return yield k._withRetries(se=>ku(se,T)),delete k.localCache[T],k.notifyServiceWorker(T)}))})()}_poll(){var T=this;return(0,E.Z)(function*(){const k=yield T._withRetries(Tt=>{const Zt=Oa(Tt,!1).getAll();return new ol(Zt).toPromise()});if(!k)return[];if(0!==T.pendingWrites)return[];const se=[],Ce=new Set;for(const{fbase_key:Tt,value:Zt}of k)Ce.add(Tt),JSON.stringify(T.localCache[Tt])!==JSON.stringify(Zt)&&(T.notifyListeners(Tt,Zt),se.push(Tt));for(const Tt of Object.keys(T.localCache))T.localCache[Tt]&&!Ce.has(Tt)&&(T.notifyListeners(Tt,null),se.push(Tt));return se})()}notifyListeners(T,k){this.localCache[T]=k;const se=this.listeners[T];if(se)for(const Ce of Array.from(se))Ce(k)}startPolling(){var T=this;this.stopPolling(),this.pollTimer=setInterval((0,E.Z)(function*(){return T._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(T,k){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[T]||(this.listeners[T]=new Set,this._get(T)),this.listeners[T].add(k)}_removeListener(T,k){this.listeners[T]&&(this.listeners[T].delete(k),0===this.listeners[T].size&&delete this.listeners[T]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return I.type="LOCAL",I})();function qa(){return(qa=(0,E.Z)(function*(I){return(yield bn(I,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function Mn(I){return new Promise((y,T)=>{const k=document.createElement("script");k.setAttribute("src",I),k.onload=y,k.onerror=se=>{const Ce=Me("internal-error");Ce.customData=se,T(Ce)},k.type="text/javascript",k.charset="UTF-8",function _s(){var I,y;return null!==(y=null===(I=document.getElementsByTagName("head"))||void 0===I?void 0:I[0])&&void 0!==y?y:document}().appendChild(k)})}function al(I){return`__${I}${Math.floor(1e6*Math.random())}`}const Is=1e12;class Vl{constructor(y){this.auth=y,this.counter=Is,this._widgets=new Map}render(y,T){const k=this.counter;return this._widgets.set(k,new qu(y,this.auth.name,T||{})),this.counter++,k}reset(y){var T;const k=y||Is;null===(T=this._widgets.get(k))||void 0===T||T.delete(),this._widgets.delete(k)}getResponse(y){var T;return(null===(T=this._widgets.get(y||Is))||void 0===T?void 0:T.getResponse())||""}execute(y){var T=this;return(0,E.Z)(function*(){var k;return null===(k=T._widgets.get(y||Is))||void 0===k||k.execute(),""})()}}class qu{constructor(y,T,k){this.params=k,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const se="string"==typeof y?document.getElementById(y):y;J(se,"argument-error",{appName:T}),this.container=se,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function ul(I){const y=[],T="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let k=0;k<I;k++)y.push(T.charAt(Math.floor(Math.random()*T.length)));return y.join("")}(50);const{callback:y,"expired-callback":T}=this.params;if(y)try{y(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,T)try{T()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const lc=al("rcb"),_u=new Nt(3e4,6e4);class cu{constructor(){var y;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(y=gr().grecaptcha)||void 0===y||!y.render)}load(y,T=""){return J(function bo(I){return I.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(I)}(T),y,"argument-error"),this.shouldResolveImmediately(T)?Promise.resolve(gr().grecaptcha):new Promise((k,se)=>{const Ce=gr().setTimeout(()=>{se(Me(y,"network-request-failed"))},_u.get());gr()[lc]=()=>{gr().clearTimeout(Ce),delete gr()[lc];const Zt=gr().grecaptcha;if(!Zt)return void se(Me(y,"internal-error"));const Ln=Zt.render;Zt.render=(lr,Br)=>{const Er=Ln(lr,Br);return this.counter++,Er},this.hostLanguage=T,k(Zt)},Mn(`https://www.google.com/recaptcha/api.js??${(0,re.xO)({onload:lc,render:"explicit",hl:T})}`).catch(()=>{clearTimeout(Ce),se(Me(y,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(y){var T;return!(null===(T=gr().grecaptcha)||void 0===T||!T.render)&&(y===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class Al{load(y){return(0,E.Z)(function*(){return new Vl(y)})()}clearedOneInstance(){}}const Ka="recaptcha",Ku={theme:"light",type:"image"};class Lt{constructor(y,T=Object.assign({},Ku),k){this.parameters=T,this.type=Ka,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=xr(k),this.isInvisible="invisible"===this.parameters.size,J(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const se="string"==typeof y?document.getElementById(y):y;J(se,this.auth,"argument-error"),this.container=se,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Al:new cu,this.validateStartingState()}verify(){var y=this;return(0,E.Z)(function*(){y.assertNotDestroyed();const T=yield y.render(),k=y.getAssertedRecaptcha();return k.getResponse(T)||new Promise(Ce=>{const Tt=Zt=>{Zt&&(y.tokenChangeListeners.delete(Tt),Ce(Zt))};y.tokenChangeListeners.add(Tt),y.isInvisible&&k.execute(T)})})()}render(){try{this.assertNotDestroyed()}catch(y){return Promise.reject(y)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(y=>{throw this.renderPromise=null,y})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(y=>{this.container.removeChild(y)})}validateStartingState(){J(!this.parameters.sitekey,this.auth,"argument-error"),J(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),J(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(y){return T=>{if(this.tokenChangeListeners.forEach(k=>k(T)),"function"==typeof y)y(T);else if("string"==typeof y){const k=gr()[y];"function"==typeof k&&k(T)}}}assertNotDestroyed(){J(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var y=this;return(0,E.Z)(function*(){if(yield y.init(),!y.widgetId){let T=y.container;if(!y.isInvisible){const k=document.createElement("div");T.appendChild(k),T=k}y.widgetId=y.getAssertedRecaptcha().render(T,y.parameters)}return y.widgetId})()}init(){var y=this;return(0,E.Z)(function*(){J(Je()&&!Fn(),y.auth,"internal-error"),yield function Oc(){let I=null;return new Promise(y=>{"complete"!==document.readyState?(I=()=>y(),window.addEventListener("load",I)):y()}).catch(y=>{throw I&&window.removeEventListener("load",I),y})}(),y.recaptcha=yield y._recaptchaLoader.load(y.auth,y.auth.languageCode||void 0);const T=yield function Ur(I){return qa.apply(this,arguments)}(y.auth);J(T,y.auth,"internal-error"),y.parameters.sitekey=T})()}getAssertedRecaptcha(){return J(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class Za{constructor(y,T){this.verificationId=y,this.onConfirmation=T}confirm(y){const T=Pr._fromVerification(this.verificationId,y);return this.onConfirmation(T)}}function Gs(){return(Gs=(0,E.Z)(function*(I,y,T){const k=xr(I),se=yield Eo(k,y,(0,re.m9)(T));return new Za(se,Ce=>ai(k,Ce))})).apply(this,arguments)}function cc(){return(cc=(0,E.Z)(function*(I,y,T){const k=(0,re.m9)(I);yield ea(!1,k,"phone");const se=yield Eo(k.auth,y,(0,re.m9)(T));return new Za(se,Ce=>Fi(k,Ce))})).apply(this,arguments)}function fd(){return(fd=(0,E.Z)(function*(I,y,T){const k=(0,re.m9)(I),se=yield Eo(k.auth,y,(0,re.m9)(T));return new Za(se,Ce=>Rs(k,Ce))})).apply(this,arguments)}function Eo(I,y,T){return Ds.apply(this,arguments)}function Ds(){return Ds=(0,E.Z)(function*(I,y,T){var k;const se=yield T.verify();try{let Ce;if(J("string"==typeof se,I,"argument-error"),J(T.type===Ka,I,"argument-error"),Ce="string"==typeof y?{phoneNumber:y}:y,"session"in Ce){const Tt=Ce.session;if("phoneNumber"in Ce)return J("enroll"===Tt.type,I,"internal-error"),(yield function za(I,y){return bn(I,"POST","/v2/accounts/mfaEnrollment:start",zt(I,y))}(I,{idToken:Tt.credential,phoneEnrollmentInfo:{phoneNumber:Ce.phoneNumber,recaptchaToken:se}})).phoneSessionInfo.sessionInfo;{J("signin"===Tt.type,I,"internal-error");const Zt=(null===(k=Ce.multiFactorHint)||void 0===k?void 0:k.uid)||Ce.multiFactorUid;return J(Zt,I,"missing-multi-factor-info"),(yield function ur(I,y){return bn(I,"POST","/v2/accounts/mfaSignIn:start",zt(I,y))}(I,{mfaPendingCredential:Tt.credential,mfaEnrollmentId:Zt,phoneSignInInfo:{recaptchaToken:se}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:Tt}=yield function sn(I,y){return Sn.apply(this,arguments)}(I,{phoneNumber:Ce.phoneNumber,recaptchaToken:se});return Tt}}finally{T._reset()}}),Ds.apply(this,arguments)}function ya(){return(ya=(0,E.Z)(function*(I,y){yield ha((0,re.m9)(I),y)})).apply(this,arguments)}let oo=(()=>{class I{constructor(T){this.providerId=I.PROVIDER_ID,this.auth=xr(T)}verifyPhoneNumber(T,k){return Eo(this.auth,T,(0,re.m9)(k))}static credential(T,k){return Pr._fromVerification(T,k)}static credentialFromResult(T){return I.credentialFromTaggedObject(T)}static credentialFromError(T){return I.credentialFromTaggedObject(T.customData||{})}static credentialFromTaggedObject({_tokenResponse:T}){if(!T)return null;const{phoneNumber:k,temporaryProof:se}=T;return k&&se?Pr._fromTokenResponse(k,se):null}}return I.PROVIDER_ID="phone",I.PHONE_SIGN_IN_METHOD="phone",I})();function $i(I,y){return y?st(y):(J(I._popupRedirectResolver,I,"argument-error"),I._popupRedirectResolver)}class Zu extends _i{constructor(y){super("custom","custom"),this.params=y}_getIdTokenResponse(y){return Li(y,this._buildIdpRequest())}_linkToIdToken(y,T){return Li(y,this._buildIdpRequest(T))}_getReauthenticationResolver(y){return Li(y,this._buildIdpRequest())}_buildIdpRequest(y){const T={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return y&&(T.idToken=y),T}}function Ra(I){return Va(I.auth,new Zu(I),I.bypassAuthState)}function Tu(I){const{auth:y,user:T}=I;return J(T,y,"internal-error"),Cl(T,new Zu(I),I.bypassAuthState)}function zo(I){return co.apply(this,arguments)}function co(){return(co=(0,E.Z)(function*(I){const{auth:y,user:T}=I;return J(T,y,"internal-error"),ha(T,new Zu(I),I.bypassAuthState)})).apply(this,arguments)}class Yu{constructor(y,T,k,se,Ce=!1){this.auth=y,this.resolver=k,this.user=se,this.bypassAuthState=Ce,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(T)?T:[T]}execute(){var y=this;return new Promise(function(){var T=(0,E.Z)(function*(k,se){y.pendingPromise={resolve:k,reject:se};try{y.eventManager=yield y.resolver._initialize(y.auth),yield y.onExecution(),y.eventManager.registerConsumer(y)}catch(Ce){y.reject(Ce)}});return function(k,se){return T.apply(this,arguments)}}())}onAuthEvent(y){var T=this;return(0,E.Z)(function*(){const{urlResponse:k,sessionId:se,postBody:Ce,tenantId:Tt,error:Zt,type:Ln}=y;if(Zt)return void T.reject(Zt);const lr={auth:T.auth,requestUri:k,sessionId:se,tenantId:Tt||void 0,postBody:Ce||void 0,user:T.user,bypassAuthState:T.bypassAuthState};try{T.resolve(yield T.getIdpTask(Ln)(lr))}catch(Br){T.reject(Br)}})()}onError(y){this.reject(y)}getIdpTask(y){switch(y){case"signInViaPopup":case"signInViaRedirect":return Ra;case"linkViaPopup":case"linkViaRedirect":return zo;case"reauthViaPopup":case"reauthViaRedirect":return Tu;default:Fe(this.auth,"internal-error")}}resolve(y){Ne(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(y),this.unregisterAndCleanUp()}reject(y){Ne(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(y),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const du=new Nt(2e3,1e4);function P(){return(P=(0,E.Z)(function*(I,y,T){const k=xr(I);Mt(I,y,Di);const se=$i(k,T);return new pe(k,"signInViaPopup",y,se).executeNotNull()})).apply(this,arguments)}function C(){return(C=(0,E.Z)(function*(I,y,T){const k=(0,re.m9)(I);Mt(k.auth,y,Di);const se=$i(k.auth,T);return new pe(k.auth,"reauthViaPopup",y,se,k).executeNotNull()})).apply(this,arguments)}function Q(){return(Q=(0,E.Z)(function*(I,y,T){const k=(0,re.m9)(I);Mt(k.auth,y,Di);const se=$i(k.auth,T);return new pe(k.auth,"linkViaPopup",y,se,k).executeNotNull()})).apply(this,arguments)}let pe=(()=>{class I extends Yu{constructor(T,k,se,Ce,Tt){super(T,k,Ce,Tt),this.provider=se,this.authWindow=null,this.pollId=null,I.currentPopupAction&&I.currentPopupAction.cancel(),I.currentPopupAction=this}executeNotNull(){var T=this;return(0,E.Z)(function*(){const k=yield T.execute();return J(k,T.auth,"internal-error"),k})()}onExecution(){var T=this;return(0,E.Z)(function*(){Ne(1===T.filter.length,"Popup operations only handle one event");const k=Kt();T.authWindow=yield T.resolver._openPopup(T.auth,T.provider,T.filter[0],k),T.authWindow.associatedEvent=k,T.resolver._originValidation(T.auth).catch(se=>{T.reject(se)}),T.resolver._isIframeWebStorageSupported(T.auth,se=>{se||T.reject(Me(T.auth,"web-storage-unsupported"))}),T.pollUserCancellation()})()}get eventId(){var T;return(null===(T=this.authWindow)||void 0===T?void 0:T.associatedEvent)||null}cancel(){this.reject(Me(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,I.currentPopupAction=null}pollUserCancellation(){const T=()=>{var k,se;this.pollId=null!==(se=null===(k=this.authWindow)||void 0===k?void 0:k.window)&&void 0!==se&&se.closed?window.setTimeout(()=>{this.pollId=null,this.reject(Me(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(T,du.get())};T()}}return I.currentPopupAction=null,I})();const ve="pendingRedirect",_t=new Map;class Wt extends Yu{constructor(y,T,k=!1){super(y,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],T,void 0,k),this.eventId=null}execute(){var y=()=>super.execute,T=this;return(0,E.Z)(function*(){let k=_t.get(T.auth._key());if(!k){try{const Ce=(yield function zn(I,y){return jn.apply(this,arguments)}(T.resolver,T.auth))?yield y().call(T):null;k=()=>Promise.resolve(Ce)}catch(se){k=()=>Promise.reject(se)}_t.set(T.auth._key(),k)}return T.bypassAuthState||_t.set(T.auth._key(),()=>Promise.resolve(null)),k()})()}onAuthEvent(y){var T=()=>super.onAuthEvent,k=this;return(0,E.Z)(function*(){if("signInViaRedirect"===y.type)return T().call(k,y);if("unknown"!==y.type){if(y.eventId){const se=yield k.auth._redirectUserForId(y.eventId);if(se)return k.user=se,T().call(k,y);k.resolve(null)}}else k.resolve(null)})()}onExecution(){return(0,E.Z)(function*(){})()}cleanUp(){}}function jn(){return(jn=(0,E.Z)(function*(I,y){const T=Fs(y),k=Qo(I);if(!(yield k._isAvailable()))return!1;const se="true"===(yield k._get(T));return yield k._remove(T),se})).apply(this,arguments)}function ui(I,y){return Wi.apply(this,arguments)}function Wi(){return(Wi=(0,E.Z)(function*(I,y){return Qo(I)._set(Fs(y),"true")})).apply(this,arguments)}function So(I,y){_t.set(I._key(),y)}function Qo(I){return st(I._redirectPersistence)}function Fs(I){return Ze(ve,I.config.apiKey,I.name)}function Lu(I,y,T){return function Xa(I,y,T){return z.apply(this,arguments)}(I,y,T)}function z(){return(z=(0,E.Z)(function*(I,y,T){const k=xr(I);Mt(I,y,Di),yield k._initializationPromise;const se=$i(k,T);return yield ui(se,k),se._openRedirect(k,y,"signInViaRedirect")})).apply(this,arguments)}function X(I,y,T){return function _e(I,y,T){return $e.apply(this,arguments)}(I,y,T)}function $e(){return($e=(0,E.Z)(function*(I,y,T){const k=(0,re.m9)(I);Mt(k.auth,y,Di),yield k.auth._initializationPromise;const se=$i(k.auth,T);yield ui(se,k.auth);const Ce=yield Qr(k);return se._openRedirect(k.auth,y,"reauthViaRedirect",Ce)})).apply(this,arguments)}function It(I,y,T){return function Vt(I,y,T){return vn.apply(this,arguments)}(I,y,T)}function vn(){return(vn=(0,E.Z)(function*(I,y,T){const k=(0,re.m9)(I);Mt(k.auth,y,Di),yield k.auth._initializationPromise;const se=$i(k.auth,T);yield ea(!1,k,y.providerId),yield ui(se,k.auth);const Ce=yield Qr(k);return se._openRedirect(k.auth,y,"linkViaRedirect",Ce)})).apply(this,arguments)}function _r(){return(_r=(0,E.Z)(function*(I,y){return yield xr(I)._initializationPromise,hr(I,y,!1)})).apply(this,arguments)}function hr(I,y){return Yr.apply(this,arguments)}function Yr(){return(Yr=(0,E.Z)(function*(I,y,T=!1){const k=xr(I),se=$i(k,y),Tt=yield new Wt(k,se,T).execute();return Tt&&!T&&(delete Tt.user._redirectEventId,yield k._persistUserIfCurrent(Tt.user),yield k._setRedirectUser(null,y)),Tt})).apply(this,arguments)}function Qr(I){return _a.apply(this,arguments)}function _a(){return(_a=(0,E.Z)(function*(I){const y=Kt(`${I.uid}:::`);return I._redirectEventId=y,yield I.auth._setRedirectUser(I),yield I.auth._persistUserIfCurrent(I),y})).apply(this,arguments)}class Ml{constructor(y){this.auth=y,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(y){this.consumers.add(y),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,y)&&(this.sendToConsumer(this.queuedRedirectEvent,y),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(y){this.consumers.delete(y)}onEvent(y){if(this.hasEventBeenHandled(y))return!1;let T=!1;return this.consumers.forEach(k=>{this.isEventForConsumer(y,k)&&(T=!0,this.sendToConsumer(y,k),this.saveEventToCache(y))}),this.hasHandledPotentialRedirect||!function ei(I){switch(I.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Ol(I);default:return!1}}(y)||(this.hasHandledPotentialRedirect=!0,T||(this.queuedRedirectEvent=y,T=!0)),T}sendToConsumer(y,T){var k;if(y.error&&!Ol(y)){const se=(null===(k=y.error.code)||void 0===k?void 0:k.split("auth/")[1])||"internal-error";T.onError(Me(this.auth,se))}else T.onAuthEvent(y)}isEventForConsumer(y,T){const k=null===T.eventId||!!y.eventId&&y.eventId===T.eventId;return T.filter.includes(y.type)&&k}hasEventBeenHandled(y){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(pd(y))}saveEventToCache(y){this.cachedEventUids.add(pd(y)),this.lastProcessedEventTime=Date.now()}}function pd(I){return[I.type,I.eventId,I.sessionId,I.tenantId].filter(y=>y).join("-")}function Ol({type:I,error:y}){return"unknown"===I&&"auth/no-auth-event"===y?.code}function Si(I){return bu.apply(this,arguments)}function bu(){return(bu=(0,E.Z)(function*(I,y={}){return bn(I,"GET","/v1/projects",y)})).apply(this,arguments)}const tf=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,op=/^https?/;function gd(){return(gd=(0,E.Z)(function*(I){if(I.config.emulator)return;const{authorizedDomains:y}=yield Si(I);for(const T of y)try{if(ih(T))return}catch{}Fe(I,"unauthorized-domain")})).apply(this,arguments)}function ih(I){const y=ut(),{protocol:T,hostname:k}=new URL(y);if(I.startsWith("chrome-extension://")){const Tt=new URL(I);return""===Tt.hostname&&""===k?"chrome-extension:"===T&&I.replace("chrome-extension://","")===y.replace("chrome-extension://",""):"chrome-extension:"===T&&Tt.hostname===k}if(!op.test(T))return!1;if(tf.test(I))return k===I;const se=I.replace(/\./g,"\\.");return new RegExp("^(.+\\."+se+"|"+se+")$","i").test(k)}const hg=new Nt(3e4,6e4);function sh(){const I=gr().___jsl;if(I?.H)for(const y of Object.keys(I.H))if(I.H[y].r=I.H[y].r||[],I.H[y].L=I.H[y].L||[],I.H[y].r=[...I.H[y].L],I.CP)for(let T=0;T<I.CP.length;T++)I.CP[T]=null}let md=null;const fg=new Nt(5e3,15e3),kc="__/auth/iframe",pg="emulator/auth/iframe",Om={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},km=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function oh(I){const y=I.config;J(y.authDomain,I,"auth-domain-config-required");const T=y.emulator?jt(y,pg):`https://${I.config.authDomain}/${kc}`,k={apiKey:y.apiKey,appName:I.name,v:Oe.SDK_VERSION},se=km.get(I.config.apiHost);se&&(k.eid=se);const Ce=I._getFrameworks();return Ce.length&&(k.fw=Ce.join(",")),`${T}?${(0,re.xO)(k).slice(1)}`}function ho(){return ho=(0,E.Z)(function*(I){const y=yield function Mm(I){return md=md||function rf(I){return new Promise((y,T)=>{var k,se,Ce;function Tt(){sh(),gapi.load("gapi.iframes",{callback:()=>{y(gapi.iframes.getContext())},ontimeout:()=>{sh(),T(Me(I,"network-request-failed"))},timeout:hg.get()})}if(null!==(se=null===(k=gr().gapi)||void 0===k?void 0:k.iframes)&&void 0!==se&&se.Iframe)y(gapi.iframes.getContext());else{if(null===(Ce=gr().gapi)||void 0===Ce||!Ce.load){const Zt=al("iframefcb");return gr()[Zt]=()=>{gapi.load?Tt():T(Me(I,"network-request-failed"))},Mn(`https://apis.google.com/js/api.js?onload=${Zt}`).catch(Ln=>T(Ln))}Tt()}}).catch(y=>{throw md=null,y})}(I),md}(I),T=gr().gapi;return J(T,I,"internal-error"),y.open({where:document.body,url:oh(I),messageHandlersFilter:T.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Om,dontclear:!0},k=>new Promise(function(){var se=(0,E.Z)(function*(Ce,Tt){yield k.restyle({setHideOnLeave:!1});const Zt=Me(I,"network-request-failed"),Ln=gr().setTimeout(()=>{Tt(Zt)},fg.get());function lr(){gr().clearTimeout(Ln),Ce(k)}k.ping(lr).then(lr,()=>{Tt(Zt)})});return function(Ce,Tt){return se.apply(this,arguments)}}()))}),ho.apply(this,arguments)}const kl={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Ts=500,es=600,Na="_blank",Rc="http://localhost";class Zr{constructor(y){this.window=y,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}const js="__/auth/handler",gg="emulator/auth/handler";function Nc(I,y,T,k,se,Ce){J(I.config.authDomain,I,"auth-domain-config-required"),J(I.config.apiKey,I,"invalid-api-key");const Tt={apiKey:I.config.apiKey,appName:I.name,authType:T,redirectUrl:k,v:Oe.SDK_VERSION,eventId:se};if(y instanceof Di){y.setDefaultLanguage(I.languageCode),Tt.providerId=y.providerId||"",(0,re.xb)(y.getCustomParameters())||(Tt.customParameters=JSON.stringify(y.getCustomParameters()));for(const[Ln,lr]of Object.entries(Ce||{}))Tt[Ln]=lr}if(y instanceof Jo){const Ln=y.getScopes().filter(lr=>""!==lr);Ln.length>0&&(Tt.scopes=Ln.join(","))}I.tenantId&&(Tt.tid=I.tenantId);const Zt=Tt;for(const Ln of Object.keys(Zt))void 0===Zt[Ln]&&delete Zt[Ln];return`${function Lc({config:I}){return I.emulator?jt(I,gg):`https://${I.authDomain}/${js}`}(I)}?${(0,re.xO)(Zt).slice(1)}`}const Fc="webStorageSupport",jc=class af{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Nr,this._completeRedirectFn=hr,this._overrideRedirectResult=So}_openPopup(y,T,k,se){var Ce=this;return(0,E.Z)(function*(){var Tt;Ne(null===(Tt=Ce.eventManagers[y._key()])||void 0===Tt?void 0:Tt.manager,"_initialize() not called before _openPopup()");const Zt=Nc(y,T,k,ut(),se);return function fo(I,y,T,k=Ts,se=es){const Ce=Math.max((window.screen.availHeight-se)/2,0).toString(),Tt=Math.max((window.screen.availWidth-k)/2,0).toString();let Zt="";const Ln=Object.assign(Object.assign({},kl),{width:k.toString(),height:se.toString(),top:Ce,left:Tt}),lr=(0,re.z$)().toLowerCase();T&&(Zt=Xn(lr)?Na:T),Rt(lr)&&(y=y||Rc,Ln.scrollbars="yes");const Br=Object.entries(Ln).reduce((Wo,[yl,fh])=>`${Wo}${yl}=${fh},`,"");if(function Ye(I=(0,re.z$)()){var y;return Te(I)&&!(null===(y=window.navigator)||void 0===y||!y.standalone)}(lr)&&"_self"!==Zt)return function sf(I,y){const T=document.createElement("a");T.href=I,T.target=y;const k=document.createEvent("MouseEvent");k.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),T.dispatchEvent(k)}(y||"",Zt),new Zr(null);const Er=window.open(y||"",Zt,Br);J(Er,I,"popup-blocked");try{Er.focus()}catch{}return new Zr(Er)}(y,Zt,Kt())})()}_openRedirect(y,T,k,se){var Ce=this;return(0,E.Z)(function*(){return yield Ce._originValidation(y),function Mi(I){gr().location.href=I}(Nc(y,T,k,ut(),se)),new Promise(()=>{})})()}_initialize(y){const T=y._key();if(this.eventManagers[T]){const{manager:se,promise:Ce}=this.eventManagers[T];return se?Promise.resolve(se):(Ne(Ce,"If manager is not set, promise should be"),Ce)}const k=this.initAndGetManager(y);return this.eventManagers[T]={promise:k},k.catch(()=>{delete this.eventManagers[T]}),k}initAndGetManager(y){var T=this;return(0,E.Z)(function*(){const k=yield function Rm(I){return ho.apply(this,arguments)}(y),se=new Ml(y);return k.register("authEvent",Ce=>(J(Ce?.authEvent,y,"invalid-auth-event"),{status:se.onEvent(Ce.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),T.eventManagers[y._key()]={manager:se},T.iframes[y._key()]=k,se})()}_isIframeWebStorageSupported(y,T){this.iframes[y._key()].send(Fc,{type:Fc},se=>{var Ce;const Tt=null===(Ce=se?.[0])||void 0===Ce?void 0:Ce[Fc];void 0!==Tt&&T(!!Tt),Fe(y,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(y){const T=y._key();return this.originValidationPromises[T]||(this.originValidationPromises[T]=function nf(I){return gd.apply(this,arguments)}(y)),this.originValidationPromises[T]}get _shouldInitProactively(){return pn()||fn()||Te()}};class mg{constructor(y){this.factorId=y}_process(y,T,k){switch(T.type){case"enroll":return this._finalizeEnroll(y,T.credential,k);case"signin":return this._finalizeSignIn(y,T.credential);default:return he("unexpected MultiFactorSessionType")}}}class uf extends mg{constructor(y){super("phone"),this.credential=y}static _fromCredential(y){return new uf(y)}_finalizeEnroll(y,T,k){return function Mu(I,y){return bn(I,"POST","/v2/accounts/mfaEnrollment:finalize",zt(I,y))}(y,{idToken:T,displayName:k,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(y,T){return function Wu(I,y){return bn(I,"POST","/v2/accounts/mfaSignIn:finalize",zt(I,y))}(y,{mfaPendingCredential:T,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let wo=(()=>{class I{constructor(){}static assertion(T){return uf._fromCredential(T)}}return I.FACTOR_ID="phone",I})();var Uc="@firebase/auth";class lf{constructor(y){this.auth=y,this.internalListeners=new Map}getUid(){var y;return this.assertAuthConfigured(),(null===(y=this.auth.currentUser)||void 0===y?void 0:y.uid)||null}getToken(y){var T=this;return(0,E.Z)(function*(){return T.assertAuthConfigured(),yield T.auth._initializationPromise,T.auth.currentUser?{accessToken:yield T.auth.currentUser.getIdToken(y)}:null})()}addAuthTokenListener(y){if(this.assertAuthConfigured(),this.internalListeners.has(y))return;const T=this.auth.onIdTokenChanged(k=>{y(k?.stsTokenManager.accessToken||null)});this.internalListeners.set(y,T),this.updateProactiveRefresh()}removeAuthTokenListener(y){this.assertAuthConfigured();const T=this.internalListeners.get(y);T&&(this.internalListeners.delete(y),T(),this.updateProactiveRefresh())}assertAuthConfigured(){J(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function Qu(){return window}(0,re.Pz)("authIdTokenMaxAge"),function Eu(I){(0,Oe._registerComponent)(new Ge.wA("auth",(y,{options:T})=>{const k=y.getProvider("app").getImmediate(),se=y.getProvider("heartbeat"),{apiKey:Ce,authDomain:Tt}=k.options;return((Zt,Ln)=>{J(Ce&&!Ce.includes(":"),"invalid-api-key",{appName:Zt.name}),J(!Tt?.includes(":"),"argument-error",{appName:Zt.name});const lr={apiKey:Ce,authDomain:Tt,clientPlatform:I,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:jr(I)},Br=new wi(Zt,Ln,lr);return function Xe(I,y){const T=y?.persistence||[],k=(Array.isArray(T)?T:[T]).map(st);y?.errorMap&&I._updateErrorMap(y.errorMap),I._initializeWithPersistence(k,y?.popupRedirectResolver)}(Br,T),Br})(k,se)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((y,T,k)=>{y.getProvider("auth-internal").initialize()})),(0,Oe._registerComponent)(new Ge.wA("auth-internal",y=>{const T=xr(y.getProvider("auth").getImmediate());return new lf(T)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,Oe.registerVersion)(Uc,"0.21.4",function Ta(I){switch(I){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(I)),(0,Oe.registerVersion)(Uc,"0.21.4","esm2017")}("Browser");const ah=2e3;function ba(){return ba=(0,E.Z)(function*(I,y,T){var k;const{BuildInfo:se}=Qu();Ne(y.sessionId,"AuthEvent did not contain a session ID");const Ce=yield function Su(I){return yd.apply(this,arguments)}(y.sessionId),Tt={};return Te()?Tt.ibi=se.packageName:de()?Tt.apn=se.packageName:Fe(I,"operation-not-supported-in-this-environment"),se.displayName&&(Tt.appDisplayName=se.displayName),Tt.sessionId=Ce,Nc(I,T,y.type,void 0,null!==(k=y.eventId)&&void 0!==k?k:void 0,Tt)}),ba.apply(this,arguments)}function vd(){return(vd=(0,E.Z)(function*(I){const{BuildInfo:y}=Qu(),T={};Te()?T.iosBundleId=y.packageName:de()?T.androidPackageName=y.packageName:Fe(I,"operation-not-supported-in-this-environment"),yield Si(I,T)})).apply(this,arguments)}function hc(){return(hc=(0,E.Z)(function*(I,y,T){const{cordova:k}=Qu();let se=()=>{};try{yield new Promise((Ce,Tt)=>{let Zt=null;function Ln(){var Er;Ce();const Wo=null===(Er=k.plugins.browsertab)||void 0===Er?void 0:Er.close;"function"==typeof Wo&&Wo(),"function"==typeof T?.close&&T.close()}function lr(){Zt||(Zt=window.setTimeout(()=>{Tt(Me(I,"redirect-cancelled-by-user"))},ah))}function Br(){"visible"===document?.visibilityState&&lr()}y.addPassiveListener(Ln),document.addEventListener("resume",lr,!1),de()&&document.addEventListener("visibilitychange",Br,!1),se=()=>{y.removePassiveListener(Ln),document.removeEventListener("resume",lr,!1),document.removeEventListener("visibilitychange",Br,!1),Zt&&window.clearTimeout(Zt)}})}finally{se()}})).apply(this,arguments)}function yd(){return(yd=(0,E.Z)(function*(I){const y=function up(I){if(Ne(/[0-9a-zA-Z]+/.test(I),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(I);const y=new ArrayBuffer(I.length),T=new Uint8Array(y);for(let k=0;k<I.length;k++)T[k]=I.charCodeAt(k);return T}(I),T=yield crypto.subtle.digest("SHA-256",y);return Array.from(new Uint8Array(T)).map(se=>se.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}const gf=20;class Xu extends Ml{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(y=>{this.resolveInialized=y})}addPassiveListener(y){this.passiveListeners.add(y)}removePassiveListener(y){this.passiveListeners.delete(y)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(y){return this.resolveInialized(),this.passiveListeners.forEach(T=>T(y)),super.onEvent(y)}initialized(){var y=this;return(0,E.Z)(function*(){yield y.initPromise})()}}function fc(I){return dl.apply(this,arguments)}function dl(){return(dl=(0,E.Z)(function*(I){const y=yield _d()._get(Bc(I));return y&&(yield _d()._remove(Bc(I))),y})).apply(this,arguments)}function mf(){const I=[],y="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let T=0;T<gf;T++){const k=Math.floor(Math.random()*y.length);I.push(y.charAt(k))}return I.join("")}function _d(){return st(qt)}function Bc(I){return Ze("authEvent",I.config.apiKey,I.name)}function As(I){if(!I?.includes("?"))return{};const[y,...T]=I.split("?");return(0,re.zd)(T.join("?"))}const Td=class Vc{constructor(){this._redirectPersistence=Nr,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=hr,this._overrideRedirectResult=So}_initialize(y){var T=this;return(0,E.Z)(function*(){const k=y._key();let se=T.eventManagers.get(k);return se||(se=new Xu(y),T.eventManagers.set(k,se),T.attachCallbackListeners(y,se)),se})()}_openPopup(y){Fe(y,"operation-not-supported-in-this-environment")}_openRedirect(y,T,k,se){var Ce=this;return(0,E.Z)(function*(){!function vg(I){var y,T,k,se,Ce,Tt,Zt,Ln,lr,Br;const Er=Qu();J("function"==typeof(null===(y=Er?.universalLinks)||void 0===y?void 0:y.subscribe),I,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),J(typeof(null===(T=Er?.BuildInfo)||void 0===T?void 0:T.packageName)<"u",I,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),J("function"==typeof(null===(Ce=null===(se=null===(k=Er?.cordova)||void 0===k?void 0:k.plugins)||void 0===se?void 0:se.browsertab)||void 0===Ce?void 0:Ce.openUrl),I,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),J("function"==typeof(null===(Ln=null===(Zt=null===(Tt=Er?.cordova)||void 0===Tt?void 0:Tt.plugins)||void 0===Zt?void 0:Zt.browsertab)||void 0===Ln?void 0:Ln.isAvailable),I,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),J("function"==typeof(null===(Br=null===(lr=Er?.cordova)||void 0===lr?void 0:lr.InAppBrowser)||void 0===Br?void 0:Br.open),I,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(y);const Tt=yield Ce._initialize(y);yield Tt.initialized(),Tt.resetRedirect(),function dn(){_t.clear()}(),yield Ce._originValidation(y);const Zt=function cl(I,y,T=null){return{type:y,eventId:T,urlResponse:null,sessionId:mf(),postBody:null,tenantId:I.tenantId,error:Me(I,"no-auth-event")}}(y,k,se);yield function lp(I,y){return _d()._set(Bc(I),y)}(y,Zt);const Ln=yield function ff(I,y,T){return ba.apply(this,arguments)}(y,Zt,T),lr=yield function uh(I){const{cordova:y}=Qu();return new Promise(T=>{y.plugins.browsertab.isAvailable(k=>{let se=null;k?y.plugins.browsertab.openUrl(I):se=y.InAppBrowser.open(I,function ge(I=(0,re.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(I)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(I)}()?"_blank":"_system","location=yes"),T(se)})})}(Ln);return function pf(I,y,T){return hc.apply(this,arguments)}(y,Tt,lr)})()}_isIframeWebStorageSupported(y,T){throw new Error("Method not implemented.")}_originValidation(y){const T=y._key();return this.originValidationPromises[T]||(this.originValidationPromises[T]=function ap(I){return vd.apply(this,arguments)}(y)),this.originValidationPromises[T]}attachCallbackListeners(y,T){const{universalLinks:k,handleOpenURL:se,BuildInfo:Ce}=Qu(),Tt=setTimeout((0,E.Z)(function*(){yield fc(y),T.onEvent(yg())}),500),Zt=function(){var Br=(0,E.Z)(function*(Er){clearTimeout(Tt);const Wo=yield fc(y);let yl=null;Wo&&Er?.url&&(yl=function hl(I,y){var T,k;const se=function Nm(I){const y=As(I),T=y.link?decodeURIComponent(y.link):void 0,k=As(T).link,se=y.deep_link_id?decodeURIComponent(y.deep_link_id):void 0;return As(se).link||se||k||T||I}(y);if(se.includes("/__/auth/callback")){const Ce=As(se),Tt=Ce.firebaseError?function cp(I){try{return JSON.parse(I)}catch{return null}}(decodeURIComponent(Ce.firebaseError)):null,Zt=null===(k=null===(T=Tt?.code)||void 0===T?void 0:T.split("auth/"))||void 0===k?void 0:k[1],Ln=Zt?Me(Zt):null;return Ln?{type:I.type,eventId:I.eventId,tenantId:I.tenantId,error:Ln,urlResponse:null,sessionId:null,postBody:null}:{type:I.type,eventId:I.eventId,tenantId:I.tenantId,sessionId:I.sessionId,urlResponse:se,postBody:null}}return null}(Wo,Er.url)),T.onEvent(yl||yg())});return function(Wo){return Br.apply(this,arguments)}}();typeof k<"u"&&"function"==typeof k.subscribe&&k.subscribe(null,Zt);const Ln=se,lr=`${Ce.packageName.toLowerCase()}://`;Qu().handleOpenURL=function(){var Br=(0,E.Z)(function*(Er){if(Er.toLowerCase().startsWith(lr)&&Zt({url:Er}),"function"==typeof Ln)try{Ln(Er)}catch(Wo){console.error(Wo)}});return function(Er){return Br.apply(this,arguments)}}()}};function yg(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:Me("no-auth-event")}}const hu=1e3;function fu(){var I;return(null===(I=self?.location)||void 0===I?void 0:I.protocol)||null}function _f(I=(0,re.z$)()){return!("file:"!==fu()&&"ionic:"!==fu()&&"capacitor:"!==fu()||!I.toLowerCase().match(/iphone|ipad|ipod|android/))}function ko(){try{const I=self.localStorage,y=Kt();if(I)return I.setItem(y,"1"),I.removeItem(y),!function Tg(I=(0,re.z$)()){return function Rl(){return(0,re.w1)()&&11===document?.documentMode}()||function dp(I=(0,re.z$)()){return/Edge\/\d+/.test(I)}(I)}()||(0,re.hl)()}catch{return ki()&&(0,re.hl)()}return!1}function ki(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function Gl(){return(function ch(){return"http:"===fu()||"https:"===fu()}()||(0,re.ru)()||_f())&&!function _g(){return(0,re.b$)()||(0,re.UG)()}()&&ko()&&!ki()}function dh(){return _f()&&typeof document<"u"}function Hc(){return(Hc=(0,E.Z)(function*(){return!!dh()&&new Promise(I=>{const y=setTimeout(()=>{I(!1)},hu);document.addEventListener("deviceready",()=>{clearTimeout(y),I(!0)})})})).apply(this,arguments)}const La={LOCAL:"local",NONE:"none",SESSION:"session"},Fu=J,Gc="persistence";function pc(I){return Ju.apply(this,arguments)}function Ju(){return(Ju=(0,E.Z)(function*(I){yield I._initializationPromise;const y=$c(),T=Ze(Gc,I.config.apiKey,I.name);y&&y.setItem(T,I._getPersistence())})).apply(this,arguments)}function $c(){var I;try{return(null===(I=function eu(){return typeof window<"u"?window:null}())||void 0===I?void 0:I.sessionStorage)||null}catch{return null}}const pi=J;class pl{constructor(){this.browserResolver=st(jc),this.cordovaResolver=st(Td),this.underlyingResolver=null,this._redirectPersistence=Nr,this._completeRedirectFn=hr,this._overrideRedirectResult=So}_initialize(y){var T=this;return(0,E.Z)(function*(){return yield T.selectUnderlyingResolver(),T.assertedUnderlyingResolver._initialize(y)})()}_openPopup(y,T,k,se){var Ce=this;return(0,E.Z)(function*(){return yield Ce.selectUnderlyingResolver(),Ce.assertedUnderlyingResolver._openPopup(y,T,k,se)})()}_openRedirect(y,T,k,se){var Ce=this;return(0,E.Z)(function*(){return yield Ce.selectUnderlyingResolver(),Ce.assertedUnderlyingResolver._openRedirect(y,T,k,se)})()}_isIframeWebStorageSupported(y,T){this.assertedUnderlyingResolver._isIframeWebStorageSupported(y,T)}_originValidation(y){return this.assertedUnderlyingResolver._originValidation(y)}get _shouldInitProactively(){return dh()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return pi(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var y=this;return(0,E.Z)(function*(){if(y.underlyingResolver)return;const T=yield function fl(){return Hc.apply(this,arguments)}();y.underlyingResolver=T?y.cordovaResolver:y.browserResolver})()}}function gc(I){return I.unwrap()}function $l(I){return Tf(I)}function Tf(I){const{_tokenResponse:y}=I instanceof re.ZR?I.customData:I;if(!y)return null;if(!(I instanceof re.ZR)&&"temporaryProof"in y&&"phoneNumber"in y)return oo.credentialFromResult(I);const T=y.providerId;if(!T||T===Ke.PASSWORD)return null;let k;switch(T){case Ke.GOOGLE:k=Aa;break;case Ke.FACEBOOK:k=ca;break;case Ke.GITHUB:k=Pa;break;case Ke.TWITTER:k=wl;break;default:const{oauthIdToken:se,oauthAccessToken:Ce,oauthTokenSecret:Tt,pendingToken:Zt,nonce:Ln}=y;return Ce||Tt||se||Zt?Zt?T.startsWith("saml.")?Js._create(T,Zt):Ct._fromParams({providerId:T,signInMethod:T,pendingToken:Zt,idToken:se,accessToken:Ce}):new Ao(T).credential({idToken:se,accessToken:Ce,rawNonce:Ln}):null}return I instanceof re.ZR?k.credentialFromError(I):k.credentialFromResult(I)}function Fa(I,y){return y.catch(T=>{throw T instanceof re.ZR&&function gl(I,y){var T;const k=null===(T=y.customData)||void 0===T?void 0:T._tokenResponse;if("auth/multi-factor-auth-required"===y?.code)y.resolver=new bd(I,function lo(I,y){var T;const k=(0,re.m9)(I),se=y;return J(y.customData.operationType,k,"argument-error"),J(null===(T=se.customData._serverResponse)||void 0===T?void 0:T.mfaPendingCredential,k,"argument-error"),Mo._fromError(k,se)}(I,y));else if(k){const se=Tf(y),Ce=y;se&&(Ce.credential=se,Ce.tenantId=k.tenantId||void 0,Ce.email=k.email||void 0,Ce.phoneNumber=k.phoneNumber||void 0)}}(I,T),T}).then(T=>{const se=T.user;return{operationType:T.operationType,credential:$l(T),additionalUserInfo:Il(T),user:ml.getOrCreate(se)}})}function bf(I,y){return Ef.apply(this,arguments)}function Ef(){return(Ef=(0,E.Z)(function*(I,y){const T=yield y;return{verificationId:T.verificationId,confirm:k=>Fa(I,T.confirm(k))}})).apply(this,arguments)}class bd{constructor(y,T){this.resolver=T,this.auth=function Nl(I){return I.wrapped()}(y)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(y){return Fa(gc(this.auth),this.resolver.resolveSignIn(y))}}class ml{constructor(y){this._delegate=y,this.multiFactor=function va(I){const y=(0,re.m9)(I);return sa.has(y)||sa.set(y,Ou._fromUser(y)),sa.get(y)}(y)}static getOrCreate(y){return ml.USER_MAP.has(y)||ml.USER_MAP.set(y,new ml(y)),ml.USER_MAP.get(y)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(y){return this._delegate.getIdTokenResult(y)}getIdToken(y){return this._delegate.getIdToken(y)}linkAndRetrieveDataWithCredential(y){return this.linkWithCredential(y)}linkWithCredential(y){var T=this;return(0,E.Z)(function*(){return Fa(T.auth,Fi(T._delegate,y))})()}linkWithPhoneNumber(y,T){var k=this;return(0,E.Z)(function*(){return bf(k.auth,function Ya(I,y,T){return cc.apply(this,arguments)}(k._delegate,y,T))})()}linkWithPopup(y){var T=this;return(0,E.Z)(function*(){return Fa(T.auth,function B(I,y,T){return Q.apply(this,arguments)}(T._delegate,y,pl))})()}linkWithRedirect(y){var T=this;return(0,E.Z)(function*(){return yield pc(xr(T.auth)),It(T._delegate,y,pl)})()}reauthenticateAndRetrieveDataWithCredential(y){return this.reauthenticateWithCredential(y)}reauthenticateWithCredential(y){var T=this;return(0,E.Z)(function*(){return Fa(T.auth,Rs(T._delegate,y))})()}reauthenticateWithPhoneNumber(y,T){return bf(this.auth,function Pl(I,y,T){return fd.apply(this,arguments)}(this._delegate,y,T))}reauthenticateWithPopup(y){return Fa(this.auth,function R(I,y,T){return C.apply(this,arguments)}(this._delegate,y,pl))}reauthenticateWithRedirect(y){var T=this;return(0,E.Z)(function*(){return yield pc(xr(T.auth)),X(T._delegate,y,pl)})()}sendEmailVerification(y){return function ps(I,y){return Hs.apply(this,arguments)}(this._delegate,y)}unlink(y){var T=this;return(0,E.Z)(function*(){return yield function hi(I,y){return da.apply(this,arguments)}(T._delegate,y),T})()}updateEmail(y){return function Ho(I,y){return pa((0,re.m9)(I),y,null)}(this._delegate,y)}updatePassword(y){return function To(I,y){return pa((0,re.m9)(I),null,y)}(this._delegate,y)}updatePhoneNumber(y){return function ka(I,y){return ya.apply(this,arguments)}(this._delegate,y)}updateProfile(y){return function Gi(I,y){return Ns.apply(this,arguments)}(this._delegate,y)}verifyBeforeUpdateEmail(y,T){return function ts(I,y,T){return Wr.apply(this,arguments)}(this._delegate,y,T)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}ml.USER_MAP=new WeakMap;const zc=J;let hh=(()=>{class I{constructor(T,k){if(this.app=T,k.isInitialized())return this._delegate=k.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:se}=T.options;zc(se,"invalid-api-key",{appName:T.name}),zc(se,"invalid-api-key",{appName:T.name});const Ce=typeof window<"u"?pl:void 0;this._delegate=k.initialize({options:{persistence:hp(se,T.name),popupRedirectResolver:Ce}}),this._delegate._updateErrorMap(Pt),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?ml.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(T){this._delegate.languageCode=T}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(T){this._delegate.tenantId=T}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(T,k){!function Ms(I,y,T){const k=xr(I);J(k._canInitEmulator,k,"emulator-config-failed"),J(/^https?:\/\//.test(y),k,"invalid-emulator-scheme");const se=!!T?.disableWarnings,Ce=is(y),{host:Tt,port:Zt}=function vs(I){const y=is(I),T=/(\/\/)?([^?#/]+)/.exec(I.substr(y.length));if(!T)return{host:"",port:null};const k=T[2].split("@").pop()||"",se=/^(\[[^\]]+\])(:|$)/.exec(k);if(se){const Ce=se[1];return{host:Ce,port:rr(k.substr(Ce.length+1))}}{const[Ce,Tt]=k.split(":");return{host:Ce,port:rr(Tt)}}}(y);k.config.emulator={url:`${Ce}//${Tt}${null===Zt?"":`:${Zt}`}/`},k.settings.appVerificationDisabledForTesting=!0,k.emulatorConfig=Object.freeze({host:Tt,port:Zt,protocol:Ce.replace(":",""),options:Object.freeze({disableWarnings:se})}),se||function Yi(){function I(){const y=document.createElement("p"),T=y.style;y.innerText="Running in emulator mode. Do not use with production credentials.",T.position="fixed",T.width="100%",T.backgroundColor="#ffffff",T.border=".1em solid #000000",T.color="#b50000",T.bottom="0px",T.left="0px",T.margin="0px",T.zIndex="10000",T.textAlign="center",y.classList.add("firebase-emulator-warning"),document.body.appendChild(y)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",I):I())}()}(this._delegate,T,k)}applyActionCode(T){return function ra(I,y){return ne.apply(this,arguments)}(this._delegate,T)}checkActionCode(T){return Z(this._delegate,T)}confirmPasswordReset(T,k){return function ji(I,y,T){return Dr.apply(this,arguments)}(this._delegate,T,k)}createUserWithEmailAndPassword(T,k){var se=this;return(0,E.Z)(function*(){return Fa(se._delegate,function be(I,y,T){return Ve.apply(this,arguments)}(se._delegate,T,k))})()}fetchProvidersForEmail(T){return this.fetchSignInMethodsForEmail(T)}fetchSignInMethodsForEmail(T){return function Ai(I,y){return Ui.apply(this,arguments)}(this._delegate,T)}isSignInWithEmailLink(T){return function wn(I,y){return"EMAIL_SIGNIN"===vo.parseLink(y)?.operation}(0,T)}getRedirectResult(){var T=this;return(0,E.Z)(function*(){zc(Gl(),T._delegate,"operation-not-supported-in-this-environment");const k=yield function ir(I,y){return _r.apply(this,arguments)}(T._delegate,pl);return k?Fa(T._delegate,Promise.resolve(k)):{credential:null,user:null}})()}addFrameworkForLogging(T){!function lh(I,y){xr(I)._logFramework(y)}(this._delegate,T)}onAuthStateChanged(T,k,se){const{next:Ce,error:Tt,complete:Zt}=Wc(T,k,se);return this._delegate.onAuthStateChanged(Ce,Tt,Zt)}onIdTokenChanged(T,k,se){const{next:Ce,error:Tt,complete:Zt}=Wc(T,k,se);return this._delegate.onIdTokenChanged(Ce,Tt,Zt)}sendSignInLinkToEmail(T,k){return function wt(I,y,T){return Jt.apply(this,arguments)}(this._delegate,T,k)}sendPasswordResetEmail(T,k){return function ro(I,y,T){return na.apply(this,arguments)}(this._delegate,T,k||void 0)}setPersistence(T){var k=this;return(0,E.Z)(function*(){let se;switch(function wu(I,y){Fu(Object.values(La).includes(y),I,"invalid-persistence-type"),(0,re.b$)()?Fu(y!==La.SESSION,I,"unsupported-persistence-type"):(0,re.UG)()?Fu(y===La.NONE,I,"unsupported-persistence-type"):ki()?Fu(y===La.NONE||y===La.LOCAL&&(0,re.hl)(),I,"unsupported-persistence-type"):Fu(y===La.NONE||ko(),I,"unsupported-persistence-type")}(k._delegate,T),T){case La.SESSION:se=Nr;break;case La.LOCAL:se=(yield st(zi)._isAvailable())?zi:qt;break;case La.NONE:se=tt;break;default:return Fe("argument-error",{appName:k._delegate.name})}return k._delegate.setPersistence(se)})()}signInAndRetrieveDataWithCredential(T){return this.signInWithCredential(T)}signInAnonymously(){return Fa(this._delegate,function Zo(I){return Bo.apply(this,arguments)}(this._delegate))}signInWithCredential(T){return Fa(this._delegate,ai(this._delegate,T))}signInWithCustomToken(T){return Fa(this._delegate,function vi(I,y){return Cs.apply(this,arguments)}(this._delegate,T))}signInWithEmailAndPassword(T,k){return Fa(this._delegate,function xe(I,y,T){return ai((0,re.m9)(I),Do.credential(y,T))}(this._delegate,T,k))}signInWithEmailLink(T,k){return Fa(this._delegate,function xn(I,y,T){return yr.apply(this,arguments)}(this._delegate,T,k))}signInWithPhoneNumber(T,k){return bf(this._delegate,function fi(I,y,T){return Gs.apply(this,arguments)}(this._delegate,T,k))}signInWithPopup(T){var k=this;return(0,E.Z)(function*(){return zc(Gl(),k._delegate,"operation-not-supported-in-this-environment"),Fa(k._delegate,function Qa(I,y,T){return P.apply(this,arguments)}(k._delegate,T,pl))})()}signInWithRedirect(T){var k=this;return(0,E.Z)(function*(){return zc(Gl(),k._delegate,"operation-not-supported-in-this-environment"),yield pc(k._delegate),Lu(k._delegate,T,pl)})()}updateCurrentUser(T){return this._delegate.updateCurrentUser(T)}verifyPasswordResetCode(T){return function O(I,y){return H.apply(this,arguments)}(this._delegate,T)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return I.Persistence=La,I})();function Wc(I,y,T){let k=I;"function"!=typeof I&&({next:k,error:y,complete:T}=I);const se=k;return{next:Tt=>se(Tt&&ml.getOrCreate(Tt)),error:y,complete:T}}function hp(I,y){const T=function bg(I,y){const T=$c();if(!T)return[];const k=Ze(Gc,I,y);switch(T.getItem(k)){case La.NONE:return[tt];case La.LOCAL:return[zi,Nr];case La.SESSION:return[Nr];default:return[]}}(I,y);if(typeof self<"u"&&!T.includes(zi)&&T.push(zi),typeof window<"u")for(const k of[qt,Nr])T.includes(k)||T.push(k);return T.includes(tt)||T.push(tt),T}class vl{constructor(){this.providerId="phone",this._delegate=new oo(gc(M.Z.auth()))}static credential(y,T){return oo.credential(y,T)}verifyPhoneNumber(y,T){return this._delegate.verifyPhoneNumber(y,T)}unwrap(){return this._delegate}}vl.PHONE_SIGN_IN_METHOD=oo.PHONE_SIGN_IN_METHOD,vl.PROVIDER_ID=oo.PROVIDER_ID;const Sf=J;class mc{constructor(y,T,k=M.Z.app()){var se;Sf(null===(se=k.options)||void 0===se?void 0:se.apiKey,"invalid-api-key",{appName:k.name}),this._delegate=new Lt(y,T,k.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function wf(I){I.INTERNAL.registerComponent(new Ge.wA("auth-compat",y=>{const T=y.getProvider("app-compat").getImmediate(),k=y.getProvider("auth");return new hh(T,k)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:Re_EMAIL_SIGNIN,PASSWORD_RESET:Re_PASSWORD_RESET,RECOVER_EMAIL:Re_RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:Re_REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:Re_VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:Re_VERIFY_EMAIL}},EmailAuthProvider:Do,FacebookAuthProvider:ca,GithubAuthProvider:Pa,GoogleAuthProvider:Aa,OAuthProvider:Ao,SAMLAuthProvider:to,PhoneAuthProvider:vl,PhoneMultiFactorGenerator:wo,RecaptchaVerifier:mc,TwitterAuthProvider:wl,Auth:hh,AuthCredential:_i,Error:re.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),I.registerVersion("@firebase/auth-compat","0.3.4")}(M.Z)},8766:(Qt,it,K)=>{"use strict";K.d(it,{Lj:()=>Fe,X3:()=>dt});var E=K(5861);const M=(J,he)=>he.some(Ne=>J instanceof Ne);let re,Oe;const Ge=new WeakMap,He=new WeakMap,Ke=new WeakMap,Ie=new WeakMap,Pe=new WeakMap;let ae={get(J,he,Ne){if(J instanceof IDBTransaction){if("done"===he)return He.get(J);if("objectStoreNames"===he)return J.objectStoreNames||Ke.get(J);if("store"===he)return Ne.objectStoreNames[1]?void 0:Ne.objectStore(Ne.objectStoreNames[0])}return nt(J[he])},set:(J,he,Ne)=>(J[he]=Ne,!0),has:(J,he)=>J instanceof IDBTransaction&&("done"===he||"store"===he)||he in J};function at(J){return"function"==typeof J?function et(J){return J!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function ke(){return Oe||(Oe=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(J)?function(...he){return J.apply(We(this),he),nt(Ge.get(this))}:function(...he){return nt(J.apply(We(this),he))}:function(he,...Ne){const mt=J.call(We(this),he,...Ne);return Ke.set(mt,he.sort?he.sort():[he]),nt(mt)}}(J):(J instanceof IDBTransaction&&function yt(J){if(He.has(J))return;const he=new Promise((Ne,mt)=>{const st=()=>{J.removeEventListener("complete",xt),J.removeEventListener("error",Xe),J.removeEventListener("abort",Xe)},xt=()=>{Ne(),st()},Xe=()=>{mt(J.error||new DOMException("AbortError","AbortError")),st()};J.addEventListener("complete",xt),J.addEventListener("error",Xe),J.addEventListener("abort",Xe)});He.set(J,he)}(J),M(J,function De(){return re||(re=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(J,ae):J)}function nt(J){if(J instanceof IDBRequest)return function Re(J){const he=new Promise((Ne,mt)=>{const st=()=>{J.removeEventListener("success",xt),J.removeEventListener("error",Xe)},xt=()=>{Ne(nt(J.result)),st()},Xe=()=>{mt(J.error),st()};J.addEventListener("success",xt),J.addEventListener("error",Xe)});return he.then(Ne=>{Ne instanceof IDBCursor&&Ge.set(Ne,J)}).catch(()=>{}),Pe.set(he,J),he}(J);if(Ie.has(J))return Ie.get(J);const he=at(J);return he!==J&&(Ie.set(J,he),Pe.set(he,J)),he}const We=J=>Pe.get(J);function dt(J,he,{blocked:Ne,upgrade:mt,blocking:st,terminated:xt}={}){const Xe=indexedDB.open(J,he),ut=nt(Xe);return mt&&Xe.addEventListener("upgradeneeded",Je=>{mt(nt(Xe.result),Je.oldVersion,Je.newVersion,nt(Xe.transaction))}),Ne&&Xe.addEventListener("blocked",()=>Ne()),ut.then(Je=>{xt&&Je.addEventListener("close",()=>xt()),st&&Je.addEventListener("versionchange",()=>st())}).catch(()=>{}),ut}function Fe(J,{blocked:he}={}){const Ne=indexedDB.deleteDatabase(J);return he&&Ne.addEventListener("blocked",()=>he()),nt(Ne).then(()=>{})}const Me=["get","getKey","getAll","getAllKeys","count"],Et=["put","add","delete","clear"],Mt=new Map;function St(J,he){if(!(J instanceof IDBDatabase)||he in J||"string"!=typeof he)return;if(Mt.get(he))return Mt.get(he);const Ne=he.replace(/FromIndex$/,""),mt=he!==Ne,st=Et.includes(Ne);if(!(Ne in(mt?IDBIndex:IDBObjectStore).prototype)||!st&&!Me.includes(Ne))return;const xt=function(){var Xe=(0,E.Z)(function*(ut,...Je){const ot=this.transaction(ut,st?"readwrite":"readonly");let lt=ot.store;return mt&&(lt=lt.index(Je.shift())),(yield Promise.all([lt[Ne](...Je),st&&ot.done]))[0]});return function(Je){return Xe.apply(this,arguments)}}();return Mt.set(he,xt),xt}!function Pt(J){ae=J(ae)}(J=>({...J,get:(he,Ne,mt)=>St(he,Ne)||J.get(he,Ne,mt),has:(he,Ne)=>!!St(he,Ne)||J.has(he,Ne)}))},5861:(Qt,it,K)=>{"use strict";function E(re,Oe,De,ke,Ge,He,Ke){try{var Ie=re[He](Ke),Pe=Ie.value}catch(Re){return void De(Re)}Ie.done?Oe(Pe):Promise.resolve(Pe).then(ke,Ge)}function M(re){return function(){var Oe=this,De=arguments;return new Promise(function(ke,Ge){var He=re.apply(Oe,De);function Ke(Pe){E(He,ke,Ge,Ke,Ie,"next",Pe)}function Ie(Pe){E(He,ke,Ge,Ke,Ie,"throw",Pe)}Ke(void 0)})}}K.d(it,{Z:()=>M})}},Qt=>{Qt(Qt.s=7666)}]);